require("../@babel/runtime/helpers/Arrayincludes");

var _typeof2 = require("../@babel/runtime/helpers/typeof");

exports.fmMap = function(t) {
    var e = {};
    function n(r) {
        var i;
        return (e[r] || (i = e[r] = {
            i: r,
            l: !1,
            exports: {}
        }, t[r].call(i.exports, i, i.exports, n), i.l = !0, i)).exports;
    }
    return n.m = t, n.c = e, n.d = function(t, e, r) {
        n.o(t, e) || Object.defineProperty(t, e, {
            enumerable: !0,
            get: r
        });
    }, n.r = function(t) {
        "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, {
            value: "Module"
        }), Object.defineProperty(t, "u", {
            value: !0
        });
    }, n.t = function(t, e) {
        if (1 & e && (t = n(t)), 8 & e) return t;
        if (4 & e && "object" == _typeof2(t) && t && t.u) return t;
        var r = Object.create(null);
        if (n.r(r), Object.defineProperty(r, "default", {
            enumerable: !0,
            value: t
        }), 2 & e && "string" != typeof t) for (var i in t) n.d(r, i, function(e) {
            return t[e];
        }.bind(null, i));
        return r;
    }, n.n = function(t) {
        var e = t && t.u ? function() {
            return t.default;
        } : function() {
            return t;
        };
        return n.d(e, "a", e), e;
    }, n.o = function(t, e) {
        return Object.prototype.hasOwnProperty.call(t, e);
    }, n.p = "", n(n.s = 51);
}([ function(t, e, n) {
    n.d(e, "a", function() {
        return r;
    });
    e = n(1);
    var r = {
        document: "undefined" != typeof document ? document : {},
        window: "undefined" != typeof window ? window : {},
        environment: e.a.BROWSER,
        XMLHttpRequest: "undefined" != typeof XMLHttpRequest ? XMLHttpRequest : {}
    };
}, function(t, e, n) {
    var r = {
        BROWSER: 0,
        WX: 1
    };
    Object.freeze(r), e.a = r;
}, function(t, e, n) {
    t.exports = n(16);
}, function(t, e, n) {
    var r, i, o = t.exports = n(4), a = n(20), s = (o.codegen = n(46), o.fetch = n(47), 
    o.path = n(48), o.fs = o.inquire("fs"), o.toArray = function(t) {
        if (t) {
            for (var e = Object.keys(t), n = new Array(e.length), r = 0; r < e.length; ) n[r] = t[e[r++]];
            return n;
        }
        return [];
    }, o.toObject = function(t) {
        for (var e = {}, n = 0; n < t.length; ) {
            var r = t[n++], i = t[n++];
            void 0 !== i && (e[r] = i);
        }
        return e;
    }, /\\/g), l = /"/g, u = (o.isReserved = function(t) {
        return /^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(t);
    }, o.safeProp = function(t) {
        return !/^[$\w_]+$/.test(t) || o.isReserved(t) ? '["' + t.replace(s, "\\\\").replace(l, '\\"') + '"]' : "." + t;
    }, o.ucFirst = function(t) {
        return t.charAt(0).toUpperCase() + t.substring(1);
    }, /_([a-z])/g), c = (o.camelCase = function(t) {
        return t.substring(0, 1) + t.substring(1).replace(u, function(t, e) {
            return e.toUpperCase();
        });
    }, o.compareFieldsById = function(t, e) {
        return t.id - e.id;
    }, o.decorateType = function(t, e) {
        return t.$type ? (e && t.$type.name !== e && (o.decorateRoot.remove(t.$type), t.$type.name = e, 
        o.decorateRoot.add(t.$type)), t.$type) : (e = new (r = r || n(22))(e || t.name), 
        o.decorateRoot.add(e), e.ctor = t, Object.defineProperty(t, "$type", {
            value: e,
            enumerable: !1
        }), Object.defineProperty(t.prototype, "$type", {
            value: e,
            enumerable: !1
        }), e);
    }, 0);
    o.decorateEnum = function(t) {
        var e;
        return t.$type || (e = new (i = i || n(5))("Enum" + c++, t), o.decorateRoot.add(e), 
        Object.defineProperty(t, "$type", {
            value: e,
            enumerable: !1
        }), e);
    }, o.setProperty = function(t, e, n) {
        if ("object" != _typeof2(t)) throw TypeError("dst must be an object");
        if (e) return function t(e, n, r) {
            var i = n.shift();
            return "__proto__" !== i && "prototype" !== i && (0 < n.length ? e[i] = t(e[i] || {}, n, r) : ((n = e[i]) && (r = [].concat(n).concat(r)), 
            e[i] = r)), e;
        }(t, e = e.split("."), n);
        throw TypeError("path must be specified");
    }, Object.defineProperty(o, "decorateRoot", {
        get: function() {
            return a.decorated || (a.decorated = new (n(30))());
        }
    });
}, function(t, e, n) {
    (function(t) {
        var r = e;
        function i(t, e, n) {
            for (var r = Object.keys(e), i = 0; i < r.length; ++i) void 0 !== t[r[i]] && n || (t[r[i]] = e[r[i]]);
            return t;
        }
        function o(t) {
            function e(t, n) {
                if (!(this instanceof e)) return new e(t, n);
                Object.defineProperty(this, "message", {
                    get: function() {
                        return t;
                    }
                }), Error.captureStackTrace ? Error.captureStackTrace(this, e) : Object.defineProperty(this, "stack", {
                    value: new Error().stack || ""
                }), n && i(this, n);
            }
            return (e.prototype = Object.create(Error.prototype)).constructor = e, Object.defineProperty(e.prototype, "name", {
                get: function() {
                    return t;
                }
            }), e.prototype.toString = function() {
                return this.name + ": " + this.message;
            }, e;
        }
        r.asPromise = n(17), r.base64 = n(37), r.EventEmitter = n(38), r.float = n(39), 
        r.inquire = n(18), r.utf8 = n(40), r.pool = n(41), r.LongBits = n(42), r.isNode = Boolean(void 0 !== t && t && t.process && t.process.versions && t.process.versions.node), 
        r.global = r.isNode && t || "undefined" != typeof window && window || "undefined" != typeof self && self || this, 
        r.emptyArray = Object.freeze ? Object.freeze([]) : [], r.emptyObject = Object.freeze ? Object.freeze({}) : {}, 
        r.isInteger = Number.isInteger || function(t) {
            return "number" == typeof t && isFinite(t) && Math.floor(t) === t;
        }, r.isString = function(t) {
            return "string" == typeof t || t instanceof String;
        }, r.isObject = function(t) {
            return t && "object" == _typeof2(t);
        }, r.isset = r.isSet = function(t, e) {
            var n = t[e];
            return !(null == n || !t.hasOwnProperty(e)) && ("object" != _typeof2(n) || 0 < (Array.isArray(n) ? n : Object.keys(n)).length);
        }, r.Buffer = function() {
            try {
                var t = r.inquire("buffer").Buffer;
                return t.prototype.utf8Write ? t : null;
            } catch (t) {
                return null;
            }
        }(), r._ = null, r.S = null, r.newBuffer = function(t) {
            return "number" == typeof t ? r.Buffer ? r.S(t) : new r.Array(t) : r.Buffer ? r._(t) : "undefined" == typeof Uint8Array ? t : new Uint8Array(t);
        }, r.Array = "undefined" != typeof Uint8Array ? Uint8Array : Array, r.Long = r.global.dcodeIO && r.global.dcodeIO.Long || r.global.Long || r.inquire("long"), 
        r.key2Re = /^true|false|0|1$/, r.key32Re = /^-?(?:0|[1-9][0-9]*)$/, r.key64Re = /^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/, 
        r.longToHash = function(t) {
            return t ? r.LongBits.from(t).toHash() : r.LongBits.zeroHash;
        }, r.longFromHash = function(t, e) {
            return t = r.LongBits.fromHash(t), r.Long ? r.Long.fromBits(t.lo, t.hi, e) : t.toNumber(Boolean(e));
        }, r.merge = i, r.lcFirst = function(t) {
            return t.charAt(0).toLowerCase() + t.substring(1);
        }, r.newError = o, r.ProtocolError = o("ProtocolError"), r.oneOfGetter = function(t) {
            for (var e = {}, n = 0; n < t.length; ++n) e[t[n]] = 1;
            return function() {
                for (var t = Object.keys(this), n = t.length - 1; -1 < n; --n) if (1 === e[t[n]] && void 0 !== this[t[n]] && null !== this[t[n]]) return t[n];
            };
        }, r.oneOfSetter = function(t) {
            return function(e) {
                for (var n = 0; n < t.length; ++n) t[n] !== e && delete this[t[n]];
            };
        }, r.toJSONOptions = {
            longs: String,
            enums: String,
            bytes: String,
            json: !0
        }, r.M = function() {
            var t = r.Buffer;
            t ? (r._ = t.from !== Uint8Array.from && t.from || function(e, n) {
                return new t(e, n);
            }, r.S = t.allocUnsafe || function(e) {
                return new t(e);
            }) : r._ = r.S = null;
        };
    }).call(this, n(15));
}, function(t, e, n) {
    t.exports = a;
    var r = n(7), i = (((a.prototype = Object.create(r.prototype)).constructor = a).className = "Enum", 
    n(9)), o = n(3);
    function a(t, e, n, i, o) {
        if (r.call(this, t, n), e && "object" != _typeof2(e)) throw TypeError("values must be an object");
        if (this.valuesById = {}, this.values = Object.create(this.valuesById), this.comment = i, 
        this.comments = o || {}, this.reserved = void 0, e) for (var a = Object.keys(e), s = 0; s < a.length; ++s) "number" == typeof e[a[s]] && (this.valuesById[this.values[a[s]] = e[a[s]]] = a[s]);
    }
    a.fromJSON = function(t, e) {
        return (t = new a(t, e.values, e.options, e.comment, e.comments)).reserved = e.reserved, 
        t;
    }, a.prototype.toJSON = function(t) {
        return t = !!t && Boolean(t.keepComments), o.toObject([ "options", this.options, "values", this.values, "reserved", this.reserved && this.reserved.length ? this.reserved : void 0, "comment", t ? this.comment : void 0, "comments", t ? this.comments : void 0 ]);
    }, a.prototype.add = function(t, e, n) {
        if (!o.isString(t)) throw TypeError("name must be a string");
        if (!o.isInteger(e)) throw TypeError("id must be an integer");
        if (void 0 !== this.values[t]) throw Error("duplicate name '" + t + "' in " + this);
        if (this.isReservedId(e)) throw Error("id " + e + " is reserved in " + this);
        if (this.isReservedName(t)) throw Error("name '" + t + "' is reserved in " + this);
        if (void 0 !== this.valuesById[e]) {
            if (!this.options || !this.options.allow_alias) throw Error("duplicate id " + e + " in " + this);
            this.values[t] = e;
        } else this.valuesById[this.values[t] = e] = t;
        return this.comments[t] = n || null, this;
    }, a.prototype.remove = function(t) {
        if (!o.isString(t)) throw TypeError("name must be a string");
        var e = this.values[t];
        if (null == e) throw Error("name '" + t + "' does not exist in " + this);
        return delete this.valuesById[e], delete this.values[t], delete this.comments[t], 
        this;
    }, a.prototype.isReservedId = function(t) {
        return i.isReservedId(this.reserved, t);
    }, a.prototype.isReservedName = function(t) {
        return i.isReservedName(this.reserved, t);
    };
}, function(t, e, n) {
    (function(t) {
        var r = n(1), i = n(0);
        function o(t) {
            return (o = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
                return _typeof2(t);
            } : function(t) {
                return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
            })(t);
        }
        function a(t, e) {
            for (var n = 0; n < e.length; n++) {
                var r = e[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
                Object.defineProperty(t, function(t) {
                    return t = function(t, e) {
                        if ("object" != o(t) || !t) return t;
                        var n = t[Symbol.toPrimitive];
                        if (void 0 === n) return String(t);
                        if ("object" != o(n = n.call(t, e))) return n;
                        throw new TypeError("@@toPrimitive must return a primitive value.");
                    }(t, "string"), "symbol" == o(t) ? t : String(t);
                }(r.key), r);
            }
        }
        var s = null, l = function() {
            function e() {
                if (!(this instanceof e)) throw new TypeError("Cannot call a class as a function");
            }
            var n, o, l;
            function u() {
                return l.apply(this, arguments);
            }
            return n = e, null, (o = [ {
                key: "global",
                value: (l = function() {
                    if ("undefined" != typeof self && null !== self && 0 !== Object.keys(self).length) return self;
                    if ("undefined" != typeof window && null !== window && 0 !== Object.keys(window).length) return window;
                    if (null != t && 0 !== Object.keys(t).length) return t;
                    var e;
                    if ("undefined" != typeof my) return s || (e = my.getAppIdSync(), s = {
                        location: {
                            host: e.appId + ".hybrid.alipay-eco.com"
                        }
                    }), s;
                    if (i.a.environment == r.a.WX) return {};
                    throw new Error("unable to locate global object");
                }, u.toString = function() {
                    return l.toString();
                }, u)
            } ]) && a(n, o), Object.defineProperty(n, "prototype", {
                writable: !1
            }), e;
        }();
        e.a = l;
    }).call(this, n(15));
}, function(t, e, n) {
    (t.exports = o).className = "ReflectionObject";
    var r, i = n(3);
    function o(t, e) {
        if (!i.isString(t)) throw TypeError("name must be a string");
        if (e && !i.isObject(e)) throw TypeError("options must be an object");
        this.options = e, this.parsedOptions = null, this.name = t, this.parent = null, 
        this.resolved = !1, this.comment = null, this.filename = null;
    }
    Object.defineProperties(o.prototype, {
        root: {
            get: function() {
                for (var t = this; null !== t.parent; ) t = t.parent;
                return t;
            }
        },
        fullName: {
            get: function() {
                for (var t = [ this.name ], e = this.parent; e; ) t.unshift(e.name), e = e.parent;
                return t.join(".");
            }
        }
    }), o.prototype.toJSON = function() {
        throw Error();
    }, o.prototype.onAdd = function(t) {
        this.parent && this.parent !== t && this.parent.remove(this), this.parent = t, this.resolved = !1, 
        (t = t.root) instanceof r && t.O(this);
    }, o.prototype.onRemove = function(t) {
        (t = t.root) instanceof r && t.T(this), this.parent = null, this.resolved = !1;
    }, o.prototype.resolve = function() {
        return this.resolved || this.root instanceof r && (this.resolved = !0), this;
    }, o.prototype.getOption = function(t) {
        if (this.options) return this.options[t];
    }, o.prototype.setOption = function(t, e, n) {
        return n && this.options && void 0 !== this.options[t] || ((this.options || (this.options = {}))[t] = e), 
        this;
    }, o.prototype.setParsedOption = function(t, e, n) {
        this.parsedOptions || (this.parsedOptions = []);
        var r, o, a = this.parsedOptions;
        return n ? (r = a.find(function(e) {
            return Object.prototype.hasOwnProperty.call(e, t);
        })) ? (o = r[t], i.setProperty(o, n, e)) : ((r = {})[t] = i.setProperty({}, n, e), 
        a.push(r)) : ((o = {})[t] = e, a.push(o)), this;
    }, o.prototype.setOptions = function(t, e) {
        if (t) for (var n = Object.keys(t), r = 0; r < n.length; ++r) this.setOption(n[r], t[n[r]], e);
        return this;
    }, o.prototype.toString = function() {
        var t = this.constructor.className, e = this.fullName;
        return e.length ? t + " " + e : t;
    }, o.M = function(t) {
        r = t;
    };
}, function(t, e, n) {
    t.exports = u;
    var r, i = n(7), o = (((u.prototype = Object.create(i.prototype)).constructor = u).className = "Field", 
    n(5)), a = n(10), s = n(3), l = /^required|optional|repeated$/;
    function u(t, e, n, r, o, u, c) {
        if (s.isObject(r) ? (c = o, u = r, r = o = void 0) : s.isObject(o) && (c = u, u = o, 
        o = void 0), i.call(this, t, u), !s.isInteger(e) || e < 0) throw TypeError("id must be a non-negative integer");
        if (!s.isString(n)) throw TypeError("type must be a string");
        if (void 0 !== r && !l.test(r = r.toString().toLowerCase())) throw TypeError("rule must be a string rule");
        if (void 0 !== o && !s.isString(o)) throw TypeError("extend must be a string");
        this.rule = (r = "proto3_optional" === r ? "optional" : r) && "optional" !== r ? r : void 0, 
        this.type = n, this.id = e, this.extend = o || void 0, this.required = "required" === r, 
        this.optional = !this.required, this.repeated = "repeated" === r, this.map = !1, 
        this.message = null, this.partOf = null, this.typeDefault = null, this.defaultValue = null, 
        this.long = !!s.Long && void 0 !== a.long[n], this.bytes = "bytes" === n, this.resolvedType = null, 
        this.extensionField = null, this.declaringField = null, this.j = null, this.comment = c;
    }
    u.fromJSON = function(t, e) {
        return new u(t, e.id, e.type, e.rule, e.extend, e.options, e.comment);
    }, Object.defineProperty(u.prototype, "packed", {
        get: function() {
            return null === this.j && (this.j = !1 !== this.getOption("packed")), this.j;
        }
    }), u.prototype.setOption = function(t, e, n) {
        return "packed" === t && (this.j = null), i.prototype.setOption.call(this, t, e, n);
    }, u.prototype.toJSON = function(t) {
        return t = !!t && Boolean(t.keepComments), s.toObject([ "rule", "optional" !== this.rule && this.rule || void 0, "type", this.type, "id", this.id, "extend", this.extend, "options", this.options, "comment", t ? this.comment : void 0 ]);
    }, u.prototype.resolve = function() {
        var t;
        return this.resolved ? this : (void 0 === (this.typeDefault = a.defaults[this.type]) && (this.resolvedType = (this.declaringField || this).parent.lookupTypeOrEnum(this.type), 
        this.resolvedType instanceof r ? this.typeDefault = null : this.typeDefault = this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]), 
        this.options && null != this.options.default && (this.typeDefault = this.options.default, 
        this.resolvedType instanceof o) && "string" == typeof this.typeDefault && (this.typeDefault = this.resolvedType.values[this.typeDefault]), 
        this.options && (!0 !== this.options.packed && (void 0 === this.options.packed || !this.resolvedType || this.resolvedType instanceof o) || delete this.options.packed, 
        Object.keys(this.options).length || (this.options = void 0)), this.long ? (this.typeDefault = s.Long.fromNumber(this.typeDefault, "u" === this.type.charAt(0)), 
        Object.freeze && Object.freeze(this.typeDefault)) : this.bytes && "string" == typeof this.typeDefault && (s.base64.test(this.typeDefault) ? s.base64.decode(this.typeDefault, t = s.newBuffer(s.base64.length(this.typeDefault)), 0) : s.utf8.write(this.typeDefault, t = s.newBuffer(s.utf8.length(this.typeDefault)), 0), 
        this.typeDefault = t), this.map ? this.defaultValue = s.emptyObject : this.repeated ? this.defaultValue = s.emptyArray : this.defaultValue = this.typeDefault, 
        this.parent instanceof r && (this.parent.ctor.prototype[this.name] = this.defaultValue), 
        i.prototype.resolve.call(this));
    }, u.d = function(t, e, n, r) {
        return "function" == typeof e ? e = s.decorateType(e).name : e && "object" == _typeof2(e) && (e = s.decorateEnum(e).name), 
        function(i, o) {
            s.decorateType(i.constructor).add(new u(o, t, e, n, {
                default: r
            }));
        };
    }, u.M = function(t) {
        r = t;
    };
}, function(t, e, n) {
    t.exports = h;
    var r, i, o, a = n(7), s = (((h.prototype = Object.create(a.prototype)).constructor = h).className = "Namespace", 
    n(8)), l = n(11), u = n(3);
    function c(t, e) {
        if (t && t.length) {
            for (var n = {}, r = 0; r < t.length; ++r) n[t[r].name] = t[r].toJSON(e);
            return n;
        }
    }
    function h(t, e) {
        a.call(this, t, e), this.nested = void 0, this.L = null;
    }
    function f(t) {
        return t.L = null, t;
    }
    h.fromJSON = function(t, e) {
        return new h(t, e.options).addJSON(e.nested);
    }, h.arrayToJSON = c, h.isReservedId = function(t, e) {
        if (t) for (var n = 0; n < t.length; ++n) if ("string" != typeof t[n] && t[n][0] <= e && t[n][1] > e) return !0;
        return !1;
    }, h.isReservedName = function(t, e) {
        if (t) for (var n = 0; n < t.length; ++n) if (t[n] === e) return !0;
        return !1;
    }, Object.defineProperty(h.prototype, "nestedArray", {
        get: function() {
            return this.L || (this.L = u.toArray(this.nested));
        }
    }), h.prototype.toJSON = function(t) {
        return u.toObject([ "options", this.options, "nested", c(this.nestedArray, t) ]);
    }, h.prototype.addJSON = function(t) {
        if (t) for (var e, n = Object.keys(t), a = 0; a < n.length; ++a) e = t[n[a]], this.add((void 0 !== e.fields ? r : void 0 !== e.values ? o : void 0 !== e.methods ? i : void 0 !== e.id ? s : h).fromJSON(n[a], e));
        return this;
    }, h.prototype.get = function(t) {
        return this.nested && this.nested[t] || null;
    }, h.prototype.getEnum = function(t) {
        if (this.nested && this.nested[t] instanceof o) return this.nested[t].values;
        throw Error("no such enum: " + t);
    }, h.prototype.add = function(t) {
        if (!(t instanceof s && void 0 !== t.extend || t instanceof r || t instanceof o || t instanceof i || t instanceof h || t instanceof l)) throw TypeError("object must be a valid nested object");
        if (this.nested) {
            var e = this.get(t.name);
            if (e) {
                if (!(e instanceof h && t instanceof h) || e instanceof r || e instanceof i) throw Error("duplicate name '" + t.name + "' in " + this);
                for (var n = e.nestedArray, a = 0; a < n.length; ++a) t.add(n[a]);
                this.remove(e), this.nested || (this.nested = {}), t.setOptions(e.options, !0);
            }
        } else this.nested = {};
        return (this.nested[t.name] = t).onAdd(this), f(this);
    }, h.prototype.remove = function(t) {
        if (!(t instanceof a)) throw TypeError("object must be a ReflectionObject");
        if (t.parent !== this) throw Error(t + " is not a member of " + this);
        return delete this.nested[t.name], Object.keys(this.nested).length || (this.nested = void 0), 
        t.onRemove(this), f(this);
    }, h.prototype.define = function(t, e) {
        if (u.isString(t)) t = t.split("."); else if (!Array.isArray(t)) throw TypeError("illegal path");
        if (t && t.length && "" === t[0]) throw Error("path must be relative");
        for (var n = this; 0 < t.length; ) {
            var r = t.shift();
            if (n.nested && n.nested[r]) {
                if (!((n = n.nested[r]) instanceof h)) throw Error("path conflicts with non-namespace objects");
            } else n.add(n = new h(r));
        }
        return e && n.addJSON(e), n;
    }, h.prototype.resolveAll = function() {
        for (var t = this.nestedArray, e = 0; e < t.length; ) t[e] instanceof h ? t[e++].resolveAll() : t[e++].resolve();
        return this.resolve();
    }, h.prototype.lookup = function(t, e, n) {
        if ("boolean" == typeof e ? (n = e, e = void 0) : e && !Array.isArray(e) && (e = [ e ]), 
        u.isString(t) && t.length) {
            if ("." === t) return this.root;
            t = t.split(".");
        } else if (!t.length) return this;
        if ("" === t[0]) return this.root.lookup(t.slice(1), e);
        var r = this.get(t[0]);
        if (r) {
            if (1 === t.length) {
                if (!e || -1 < e.indexOf(r.constructor)) return r;
            } else if (r instanceof h && (r = r.lookup(t.slice(1), e, !0))) return r;
        } else for (var i = 0; i < this.nestedArray.length; ++i) if (this.L[i] instanceof h && (r = this.L[i].lookup(t, e, !0))) return r;
        return null === this.parent || n ? null : this.parent.lookup(t, e);
    }, h.prototype.lookupType = function(t) {
        var e = this.lookup(t, [ r ]);
        if (e) return e;
        throw Error("no such type: " + t);
    }, h.prototype.lookupEnum = function(t) {
        var e = this.lookup(t, [ o ]);
        if (e) return e;
        throw Error("no such Enum '" + t + "' in " + this);
    }, h.prototype.lookupTypeOrEnum = function(t) {
        var e = this.lookup(t, [ r, o ]);
        if (e) return e;
        throw Error("no such Type or Enum '" + t + "' in " + this);
    }, h.prototype.lookupService = function(t) {
        var e = this.lookup(t, [ i ]);
        if (e) return e;
        throw Error("no such Service '" + t + "' in " + this);
    }, h.M = function(t, e, n) {
        r = t, i = e, o = n;
    };
}, function(t, e, n) {
    n = n(3);
    var r = [ "double", "float", "int32", "uint32", "sint32", "fixed32", "sfixed32", "int64", "uint64", "sint64", "fixed64", "sfixed64", "bool", "string", "bytes" ];
    function i(t, e) {
        var n = 0, i = {};
        for (e |= 0; n < t.length; ) i[r[n + e]] = t[n++];
        return i;
    }
    e.basic = i([ 1, 5, 0, 0, 0, 5, 5, 0, 0, 0, 1, 1, 0, 2, 2 ]), e.defaults = i([ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, !1, "", n.emptyArray, null ]), 
    e.long = i([ 0, 0, 0, 1, 1 ], 7), e.mapKey = i([ 0, 0, 0, 5, 5, 0, 0, 0, 1, 1, 0, 2 ], 2), 
    e.packed = i([ 1, 5, 0, 0, 0, 5, 5, 0, 0, 0, 1, 1, 0 ]);
}, function(t, e, n) {
    t.exports = a;
    var r = n(7), i = (((a.prototype = Object.create(r.prototype)).constructor = a).className = "OneOf", 
    n(8)), o = n(3);
    function a(t, e, n, i) {
        if (Array.isArray(e) || (n = e, e = void 0), r.call(this, t, n), void 0 !== e && !Array.isArray(e)) throw TypeError("fieldNames must be an Array");
        this.oneof = e || [], this.fieldsArray = [], this.comment = i;
    }
    function s(t) {
        if (t.parent) for (var e = 0; e < t.fieldsArray.length; ++e) t.fieldsArray[e].parent || t.parent.add(t.fieldsArray[e]);
    }
    a.fromJSON = function(t, e) {
        return new a(t, e.oneof, e.options, e.comment);
    }, a.prototype.toJSON = function(t) {
        return t = !!t && Boolean(t.keepComments), o.toObject([ "options", this.options, "oneof", this.oneof, "comment", t ? this.comment : void 0 ]);
    }, a.prototype.add = function(t) {
        if (t instanceof i) return t.parent && t.parent !== this.parent && t.parent.remove(t), 
        this.oneof.push(t.name), this.fieldsArray.push(t), s(t.partOf = this), this;
        throw TypeError("field must be a Field");
    }, a.prototype.remove = function(t) {
        if (!(t instanceof i)) throw TypeError("field must be a Field");
        var e = this.fieldsArray.indexOf(t);
        if (e < 0) throw Error(t + " is not a member of " + this);
        return this.fieldsArray.splice(e, 1), -1 < (e = this.oneof.indexOf(t.name)) && this.oneof.splice(e, 1), 
        t.partOf = null, this;
    }, a.prototype.onAdd = function(t) {
        r.prototype.onAdd.call(this, t);
        for (var e = 0; e < this.oneof.length; ++e) {
            var n = t.get(this.oneof[e]);
            n && !n.partOf && (n.partOf = this).fieldsArray.push(n);
        }
        s(this);
    }, a.prototype.onRemove = function(t) {
        for (var e, n = 0; n < this.fieldsArray.length; ++n) (e = this.fieldsArray[n]).parent && e.parent.remove(e);
        r.prototype.onRemove.call(this, t);
    }, a.d = function() {
        for (var t = new Array(arguments.length), e = 0; e < arguments.length; ) t[e] = arguments[e++];
        return function(e, n) {
            o.decorateType(e.constructor).add(new a(n, t)), Object.defineProperty(e, n, {
                get: o.oneOfGetter(t),
                set: o.oneOfSetter(t)
            });
        };
    };
}, function(t, e, n) {
    t.exports = h;
    var r, i = n(4), o = i.LongBits, a = i.base64, s = i.utf8;
    function l(t, e, n) {
        this.fn = t, this.len = e, this.next = void 0, this.val = n;
    }
    function u() {}
    function c(t) {
        this.head = t.head, this.tail = t.tail, this.len = t.len, this.next = t.states;
    }
    function h() {
        this.len = 0, this.head = new l(u, 0, 0), this.tail = this.head, this.states = null;
    }
    function f() {
        return i.Buffer ? function() {
            return (h.create = function() {
                return new r();
            })();
        } : function() {
            return new h();
        };
    }
    function p(t, e, n) {
        e[n] = 255 & t;
    }
    function d(t, e) {
        this.len = t, this.next = void 0, this.val = e;
    }
    function y(t, e, n) {
        for (;t.hi; ) e[n++] = 127 & t.lo | 128, t.lo = (t.lo >>> 7 | t.hi << 25) >>> 0, 
        t.hi >>>= 7;
        for (;127 < t.lo; ) e[n++] = 127 & t.lo | 128, t.lo = t.lo >>> 7;
        e[n++] = t.lo;
    }
    function m(t, e, n) {
        e[n] = 255 & t, e[n + 1] = t >>> 8 & 255, e[n + 2] = t >>> 16 & 255, e[n + 3] = t >>> 24;
    }
    h.create = f(), h.alloc = function(t) {
        return new i.Array(t);
    }, i.Array !== Array && (h.alloc = i.pool(h.alloc, i.Array.prototype.subarray)), 
    h.prototype.k = function(t, e, n) {
        return this.tail = this.tail.next = new l(t, e, n), this.len += e, this;
    }, (d.prototype = Object.create(l.prototype)).fn = function(t, e, n) {
        for (;127 < t; ) e[n++] = 127 & t | 128, t >>>= 7;
        e[n] = t;
    }, h.prototype.uint32 = function(t) {
        return this.len += (this.tail = this.tail.next = new d((t >>>= 0) < 128 ? 1 : t < 16384 ? 2 : t < 2097152 ? 3 : t < 268435456 ? 4 : 5, t)).len, 
        this;
    }, h.prototype.int32 = function(t) {
        return t < 0 ? this.k(y, 10, o.fromNumber(t)) : this.uint32(t);
    }, h.prototype.sint32 = function(t) {
        return this.uint32((t << 1 ^ t >> 31) >>> 0);
    }, h.prototype.int64 = h.prototype.uint64 = function(t) {
        return t = o.from(t), this.k(y, t.length(), t);
    }, h.prototype.sint64 = function(t) {
        return t = o.from(t).zzEncode(), this.k(y, t.length(), t);
    }, h.prototype.bool = function(t) {
        return this.k(p, 1, t ? 1 : 0);
    }, h.prototype.sfixed32 = h.prototype.fixed32 = function(t) {
        return this.k(m, 4, t >>> 0);
    }, h.prototype.sfixed64 = h.prototype.fixed64 = function(t) {
        return t = o.from(t), this.k(m, 4, t.lo).k(m, 4, t.hi);
    }, h.prototype.float = function(t) {
        return this.k(i.float.writeFloatLE, 4, t);
    }, h.prototype.double = function(t) {
        return this.k(i.float.writeDoubleLE, 8, t);
    };
    var v = i.Array.prototype.set ? function(t, e, n) {
        e.set(t, n);
    } : function(t, e, n) {
        for (var r = 0; r < t.length; ++r) e[n + r] = t[r];
    };
    h.prototype.bytes = function(t) {
        var e, n = t.length >>> 0;
        return n ? (i.isString(t) && (e = h.alloc(n = a.length(t)), a.decode(t, e, 0), t = e), 
        this.uint32(n).k(v, n, t)) : this.k(p, 1, 0);
    }, h.prototype.string = function(t) {
        var e = s.length(t);
        return e ? this.uint32(e).k(s.write, e, t) : this.k(p, 1, 0);
    }, h.prototype.fork = function() {
        return this.states = new c(this), this.head = this.tail = new l(u, 0, 0), this.len = 0, 
        this;
    }, h.prototype.reset = function() {
        return this.states ? (this.head = this.states.head, this.tail = this.states.tail, 
        this.len = this.states.len, this.states = this.states.next) : (this.head = this.tail = new l(u, 0, 0), 
        this.len = 0), this;
    }, h.prototype.ldelim = function() {
        var t = this.head, e = this.tail, n = this.len;
        return this.reset().uint32(n), n && (this.tail.next = t.next, this.tail = e, this.len += n), 
        this;
    }, h.prototype.finish = function() {
        for (var t = this.head.next, e = this.constructor.alloc(this.len), n = 0; t; ) t.fn(t.val, e, n), 
        n += t.len, t = t.next;
        return e;
    }, h.M = function(t) {
        r = t, h.create = f(), r.M();
    };
}, function(t, e, n) {
    t.exports = l;
    var r, i = n(4), o = i.LongBits, a = i.utf8;
    function s(t, e) {
        return RangeError("index out of range: " + t.pos + " + " + (e || 1) + " > " + t.len);
    }
    function l(t) {
        this.buf = t, this.pos = 0, this.len = t.length;
    }
    function u() {
        return i.Buffer ? function(t) {
            return (l.create = function(t) {
                return i.Buffer.isBuffer(t) ? new r(t) : h(t);
            })(t);
        } : h;
    }
    var c, h = "undefined" != typeof Uint8Array ? function(t) {
        if (t instanceof Uint8Array || Array.isArray(t)) return new l(t);
        throw Error("illegal buffer");
    } : function(t) {
        if (Array.isArray(t)) return new l(t);
        throw Error("illegal buffer");
    };
    function f() {
        var t = new o(0, 0), e = 0;
        if (!(4 < this.len - this.pos)) {
            for (;e < 3; ++e) {
                if (this.pos >= this.len) throw s(this);
                if (t.lo = (t.lo | (127 & this.buf[this.pos]) << 7 * e) >>> 0, this.buf[this.pos++] < 128) return t;
            }
            return t.lo = (t.lo | (127 & this.buf[this.pos++]) << 7 * e) >>> 0, t;
        }
        for (;e < 4; ++e) if (t.lo = (t.lo | (127 & this.buf[this.pos]) << 7 * e) >>> 0, 
        this.buf[this.pos++] < 128) return t;
        if (t.lo = (t.lo | (127 & this.buf[this.pos]) << 28) >>> 0, t.hi = (t.hi | (127 & this.buf[this.pos]) >> 4) >>> 0, 
        this.buf[this.pos++] < 128) return t;
        if (e = 0, 4 < this.len - this.pos) {
            for (;e < 5; ++e) if (t.hi = (t.hi | (127 & this.buf[this.pos]) << 7 * e + 3) >>> 0, 
            this.buf[this.pos++] < 128) return t;
        } else for (;e < 5; ++e) {
            if (this.pos >= this.len) throw s(this);
            if (t.hi = (t.hi | (127 & this.buf[this.pos]) << 7 * e + 3) >>> 0, this.buf[this.pos++] < 128) return t;
        }
        throw Error("invalid varint encoding");
    }
    function p(t, e) {
        return (t[e - 4] | t[e - 3] << 8 | t[e - 2] << 16 | t[e - 1] << 24) >>> 0;
    }
    function d() {
        if (this.pos + 8 > this.len) throw s(this, 8);
        return new o(p(this.buf, this.pos += 4), p(this.buf, this.pos += 4));
    }
    l.create = u(), l.prototype.A = i.Array.prototype.subarray || i.Array.prototype.slice, 
    l.prototype.uint32 = (c = 4294967295, function() {
        if (c = (127 & this.buf[this.pos]) >>> 0, this.buf[this.pos++] < 128 || (c = (c | (127 & this.buf[this.pos]) << 7) >>> 0, 
        this.buf[this.pos++] < 128) || (c = (c | (127 & this.buf[this.pos]) << 14) >>> 0, 
        this.buf[this.pos++] < 128) || (c = (c | (127 & this.buf[this.pos]) << 21) >>> 0, 
        this.buf[this.pos++] < 128) || (c = (c | (15 & this.buf[this.pos]) << 28) >>> 0, 
        this.buf[this.pos++] < 128) || !((this.pos += 5) > this.len)) return c;
        throw this.pos = this.len, s(this, 10);
    }), l.prototype.int32 = function() {
        return 0 | this.uint32();
    }, l.prototype.sint32 = function() {
        var t = this.uint32();
        return t >>> 1 ^ -(1 & t) | 0;
    }, l.prototype.bool = function() {
        return 0 !== this.uint32();
    }, l.prototype.fixed32 = function() {
        if (this.pos + 4 > this.len) throw s(this, 4);
        return p(this.buf, this.pos += 4);
    }, l.prototype.sfixed32 = function() {
        if (this.pos + 4 > this.len) throw s(this, 4);
        return 0 | p(this.buf, this.pos += 4);
    }, l.prototype.float = function() {
        if (this.pos + 4 > this.len) throw s(this, 4);
        var t = i.float.readFloatLE(this.buf, this.pos);
        return this.pos += 4, t;
    }, l.prototype.double = function() {
        if (this.pos + 8 > this.len) throw s(this, 4);
        var t = i.float.readDoubleLE(this.buf, this.pos);
        return this.pos += 8, t;
    }, l.prototype.bytes = function() {
        var t = this.uint32(), e = this.pos, n = this.pos + t;
        if (n > this.len) throw s(this, t);
        return this.pos += t, Array.isArray(this.buf) ? this.buf.slice(e, n) : e === n ? new this.buf.constructor(0) : this.A.call(this.buf, e, n);
    }, l.prototype.string = function() {
        var t = this.bytes();
        return a.read(t, 0, t.length);
    }, l.prototype.skip = function(t) {
        if ("number" == typeof t) {
            if (this.pos + t > this.len) throw s(this, t);
            this.pos += t;
        } else do {
            if (this.pos >= this.len) throw s(this);
        } while (128 & this.buf[this.pos++]);
        return this;
    }, l.prototype.skipType = function(t) {
        switch (t) {
          case 0:
            this.skip();
            break;

          case 1:
            this.skip(8);
            break;

          case 2:
            this.skip(this.uint32());
            break;

          case 3:
            for (;4 != (t = 7 & this.uint32()); ) this.skipType(t);
            break;

          case 5:
            this.skip(4);
            break;

          default:
            throw Error("invalid wire type " + t + " at offset " + this.pos);
        }
        return this;
    }, l.M = function(t) {
        r = t, l.create = u(), r.M();
        var e = i.Long ? "toLong" : "toNumber";
        i.merge(l.prototype, {
            int64: function() {
                return f.call(this)[e](!1);
            },
            uint64: function() {
                return f.call(this)[e](!0);
            },
            sint64: function() {
                return f.call(this).zzDecode()[e](!1);
            },
            fixed64: function() {
                return d.call(this)[e](!0);
            },
            sfixed64: function() {
                return d.call(this)[e](!1);
            }
        });
    };
}, function(t, e, n) {
    t.exports = i;
    var r = n(4);
    function i(t) {
        if (t) for (var e = Object.keys(t), n = 0; n < e.length; ++n) this[e[n]] = t[e[n]];
    }
    i.create = function(t) {
        return this.$type.create(t);
    }, i.encode = function(t, e) {
        return this.$type.encode(t, e);
    }, i.encodeDelimited = function(t, e) {
        return this.$type.encodeDelimited(t, e);
    }, i.decode = function(t) {
        return this.$type.decode(t);
    }, i.decodeDelimited = function(t) {
        return this.$type.decodeDelimited(t);
    }, i.verify = function(t) {
        return this.$type.verify(t);
    }, i.fromObject = function(t) {
        return this.$type.fromObject(t);
    }, i.toObject = function(t, e) {
        return this.$type.toObject(t, e);
    }, i.prototype.toJSON = function() {
        return this.$type.toObject(this, r.toJSONOptions);
    };
}, function(t, e) {
    var n = function() {
        return this;
    }();
    try {
        n = n || new Function("return this")();
    } catch (t) {
        "object" == ("undefined" == typeof window ? "undefined" : _typeof2(window)) && (n = window);
    }
    t.exports = n;
}, function(t, e, n) {
    var r = e;
    function i() {
        r.util.M(), r.Writer.M(r.BufferWriter), r.Reader.M(r.BufferReader);
    }
    r.build = "minimal", r.Writer = n(12), r.BufferWriter = n(43), r.Reader = n(13), 
    r.BufferReader = n(44), r.util = n(4), r.rpc = n(19), r.roots = n(20), r.configure = i, 
    i();
}, function(t, e, n) {
    t.exports = function(t, e) {
        for (var n = new Array(arguments.length - 1), r = 0, i = 2, o = !0; i < arguments.length; ) n[r++] = arguments[i++];
        return new Promise(function(i, a) {
            n[r] = function(t) {
                if (o) if (o = !1, t) a(t); else {
                    for (var e = new Array(arguments.length - 1), n = 0; n < e.length; ) e[n++] = arguments[n];
                    i.apply(null, e);
                }
            };
            try {
                t.apply(e || null, n);
            } catch (t) {
                o && (o = !1, a(t));
            }
        });
    };
}, function(module, exports, __webpack_require__) {
    function inquire(moduleName) {
        try {
            var mod = eval("quire".replace(/^/, "re"))(moduleName);
            if (mod && (mod.length || Object.keys(mod).length)) return mod;
        } catch (t) {}
        return null;
    }
    module.exports = inquire;
}, function(t, e, n) {
    e.Service = n(45);
}, function(t, e, n) {
    t.exports = {};
}, function(t, e, n) {
    t.exports = function(t) {
        for (var e, n = o.codegen([ "m", "w" ], t.name + "$encode")("if(!w)")("w=Writer.create()"), s = t.fieldsArray.slice().sort(o.compareFieldsById), l = 0; l < s.length; ++l) {
            var u = s[l].resolve(), c = t.R.indexOf(u), h = u.resolvedType instanceof r ? "int32" : u.type, f = i.basic[h];
            e = "m" + o.safeProp(u.name), u.map ? (n("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){", e, u.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){", e)("w.uint32(%i).fork().uint32(%i).%s(ks[i])", (u.id << 3 | 2) >>> 0, 8 | i.mapKey[u.keyType], u.keyType), 
            void 0 === f ? n("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()", c, e) : n(".uint32(%i).%s(%s[ks[i]]).ldelim()", 16 | f, h, e), 
            n("}")("}")) : u.repeated ? (n("if(%s!=null&&%s.length){", e, e), u.packed && void 0 !== i.packed[h] ? n("w.uint32(%i).fork()", (u.id << 3 | 2) >>> 0)("for(var i=0;i<%s.length;++i)", e)("w.%s(%s[i])", h, e)("w.ldelim()") : (n("for(var i=0;i<%s.length;++i)", e), 
            void 0 === f ? a(n, u, c, e + "[i]") : n("w.uint32(%i).%s(%s[i])", (u.id << 3 | f) >>> 0, h, e)), 
            n("}")) : (u.optional && n("if(%s!=null&&Object.hasOwnProperty.call(m,%j))", e, u.name), 
            void 0 === f ? a(n, u, c, e) : n("w.uint32(%i).%s(%s)", (u.id << 3 | f) >>> 0, h, e));
        }
        return n("return w");
    };
    var r = n(5), i = n(10), o = n(3);
    function a(t, e, n, r) {
        e.resolvedType.group ? t("types[%i].encode(%s,w.uint32(%i)).uint32(%i)", n, r, (e.id << 3 | 3) >>> 0, (e.id << 3 | 4) >>> 0) : t("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()", n, r, (e.id << 3 | 2) >>> 0);
    }
}, function(t, e, n) {
    t.exports = g;
    var r = n(9), i = (((g.prototype = Object.create(r.prototype)).constructor = g).className = "Type", 
    n(5)), o = n(11), a = n(8), s = n(23), l = n(24), u = n(14), c = n(13), h = n(12), f = n(3), p = n(21), d = n(26), y = n(27), m = n(28), v = n(29);
    function g(t, e) {
        r.call(this, t, e), this.fields = {}, this.oneofs = void 0, this.extensions = void 0, 
        this.reserved = void 0, this.group = void 0, this.C = null, this.R = null, this.N = null, 
        this.P = null;
    }
    function b(t) {
        return t.C = t.R = t.N = null, delete t.encode, delete t.decode, delete t.verify, 
        t;
    }
    Object.defineProperties(g.prototype, {
        fieldsById: {
            get: function() {
                if (!this.C) {
                    this.C = {};
                    for (var t = Object.keys(this.fields), e = 0; e < t.length; ++e) {
                        var n = this.fields[t[e]], r = n.id;
                        if (this.C[r]) throw Error("duplicate id " + r + " in " + this);
                        this.C[r] = n;
                    }
                }
                return this.C;
            }
        },
        fieldsArray: {
            get: function() {
                return this.R || (this.R = f.toArray(this.fields));
            }
        },
        oneofsArray: {
            get: function() {
                return this.N || (this.N = f.toArray(this.oneofs));
            }
        },
        ctor: {
            get: function() {
                return this.P || (this.ctor = g.generateConstructor(this)());
            },
            set: function(t) {
                for (var e = t.prototype, n = (e instanceof u || ((t.prototype = new u()).constructor = t, 
                f.merge(t.prototype, e)), t.$type = t.prototype.$type = this, f.merge(t, u, !0), 
                this.P = t, 0); n < this.fieldsArray.length; ++n) this.R[n].resolve();
                var r = {};
                for (n = 0; n < this.oneofsArray.length; ++n) r[this.N[n].resolve().name] = {
                    get: f.oneOfGetter(this.N[n].oneof),
                    set: f.oneOfSetter(this.N[n].oneof)
                };
                n && Object.defineProperties(t.prototype, r);
            }
        }
    }), g.generateConstructor = function(t) {
        for (var e, n = f.codegen([ "p" ], t.name), r = 0; r < t.fieldsArray.length; ++r) (e = t.R[r]).map ? n("this%s={}", f.safeProp(e.name)) : e.repeated && n("this%s=[]", f.safeProp(e.name));
        return n("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]");
    }, g.fromJSON = function(t, e) {
        for (var n = new g(t, e.options), u = (n.extensions = e.extensions, n.reserved = e.reserved, 
        Object.keys(e.fields)), c = 0; c < u.length; ++c) n.add((void 0 !== e.fields[u[c]].keyType ? s : a).fromJSON(u[c], e.fields[u[c]]));
        if (e.oneofs) for (u = Object.keys(e.oneofs), c = 0; c < u.length; ++c) n.add(o.fromJSON(u[c], e.oneofs[u[c]]));
        if (e.nested) for (u = Object.keys(e.nested), c = 0; c < u.length; ++c) {
            var h = e.nested[u[c]];
            n.add((void 0 !== h.id ? a : void 0 !== h.fields ? g : void 0 !== h.values ? i : void 0 !== h.methods ? l : r).fromJSON(u[c], h));
        }
        return e.extensions && e.extensions.length && (n.extensions = e.extensions), e.reserved && e.reserved.length && (n.reserved = e.reserved), 
        e.group && (n.group = !0), e.comment && (n.comment = e.comment), n;
    }, g.prototype.toJSON = function(t) {
        var e = r.prototype.toJSON.call(this, t), n = !!t && Boolean(t.keepComments);
        return f.toObject([ "options", e && e.options || void 0, "oneofs", r.arrayToJSON(this.oneofsArray, t), "fields", r.arrayToJSON(this.fieldsArray.filter(function(t) {
            return !t.declaringField;
        }), t) || {}, "extensions", this.extensions && this.extensions.length ? this.extensions : void 0, "reserved", this.reserved && this.reserved.length ? this.reserved : void 0, "group", this.group || void 0, "nested", e && e.nested || void 0, "comment", n ? this.comment : void 0 ]);
    }, g.prototype.resolveAll = function() {
        for (var t = this.fieldsArray, e = 0; e < t.length; ) t[e++].resolve();
        var n = this.oneofsArray;
        for (e = 0; e < n.length; ) n[e++].resolve();
        return r.prototype.resolveAll.call(this);
    }, g.prototype.get = function(t) {
        return this.fields[t] || this.oneofs && this.oneofs[t] || this.nested && this.nested[t] || null;
    }, g.prototype.add = function(t) {
        if (this.get(t.name)) throw Error("duplicate name '" + t.name + "' in " + this);
        if (t instanceof a && void 0 === t.extend) {
            if ((this.C || this.fieldsById)[t.id]) throw Error("duplicate id " + t.id + " in " + this);
            if (this.isReservedId(t.id)) throw Error("id " + t.id + " is reserved in " + this);
            if (this.isReservedName(t.name)) throw Error("name '" + t.name + "' is reserved in " + this);
            return t.parent && t.parent.remove(t), (this.fields[t.name] = t).message = this, 
            t.onAdd(this), b(this);
        }
        return t instanceof o ? (this.oneofs || (this.oneofs = {}), (this.oneofs[t.name] = t).onAdd(this), 
        b(this)) : r.prototype.add.call(this, t);
    }, g.prototype.remove = function(t) {
        if (t instanceof a && void 0 === t.extend) {
            if (this.fields && this.fields[t.name] === t) return delete this.fields[t.name], 
            t.parent = null, t.onRemove(this), b(this);
            throw Error(t + " is not a member of " + this);
        }
        if (t instanceof o) {
            if (this.oneofs && this.oneofs[t.name] === t) return delete this.oneofs[t.name], 
            t.parent = null, t.onRemove(this), b(this);
            throw Error(t + " is not a member of " + this);
        }
        return r.prototype.remove.call(this, t);
    }, g.prototype.isReservedId = function(t) {
        return r.isReservedId(this.reserved, t);
    }, g.prototype.isReservedName = function(t) {
        return r.isReservedName(this.reserved, t);
    }, g.prototype.create = function(t) {
        return new this.ctor(t);
    }, g.prototype.setup = function() {
        for (var t = this.fullName, e = [], n = 0; n < this.fieldsArray.length; ++n) e.push(this.R[n].resolve().resolvedType);
        var r;
        return this.encode = p(this)({
            Writer: h,
            types: e,
            util: f
        }), this.decode = d(this)({
            Reader: c,
            types: e,
            util: f
        }), this.verify = y(this)({
            types: e,
            util: f
        }), this.fromObject = m.fromObject(this)({
            types: e,
            util: f
        }), this.toObject = m.toObject(this)({
            types: e,
            util: f
        }), (t = v[t]) && ((r = Object.create(this)).fromObject = this.fromObject, this.fromObject = t.fromObject.bind(r), 
        r.toObject = this.toObject, this.toObject = t.toObject.bind(r)), this;
    }, g.prototype.encode = function(t, e) {
        return this.setup().encode(t, e);
    }, g.prototype.encodeDelimited = function(t, e) {
        return this.encode(t, e && e.len ? e.fork() : e).ldelim();
    }, g.prototype.decode = function(t, e) {
        return this.setup().decode(t, e);
    }, g.prototype.decodeDelimited = function(t) {
        return t instanceof c || (t = c.create(t)), this.decode(t, t.uint32());
    }, g.prototype.verify = function(t) {
        return this.setup().verify(t);
    }, g.prototype.fromObject = function(t) {
        return this.setup().fromObject(t);
    }, g.prototype.toObject = function(t, e) {
        return this.setup().toObject(t, e);
    }, g.d = function(t) {
        return function(e) {
            f.decorateType(e, t);
        };
    };
}, function(t, e, n) {
    t.exports = a;
    var r = n(8), i = (((a.prototype = Object.create(r.prototype)).constructor = a).className = "MapField", 
    n(10)), o = n(3);
    function a(t, e, n, i, a, s) {
        if (r.call(this, t, e, i, void 0, void 0, a, s), !o.isString(n)) throw TypeError("keyType must be a string");
        this.keyType = n, this.resolvedKeyType = null, this.map = !0;
    }
    a.fromJSON = function(t, e) {
        return new a(t, e.id, e.keyType, e.type, e.options, e.comment);
    }, a.prototype.toJSON = function(t) {
        return t = !!t && Boolean(t.keepComments), o.toObject([ "keyType", this.keyType, "type", this.type, "id", this.id, "extend", this.extend, "options", this.options, "comment", t ? this.comment : void 0 ]);
    }, a.prototype.resolve = function() {
        if (this.resolved) return this;
        if (void 0 === i.mapKey[this.keyType]) throw Error("invalid key type: " + this.keyType);
        return r.prototype.resolve.call(this);
    }, a.d = function(t, e, n) {
        return "function" == typeof n ? n = o.decorateType(n).name : n && "object" == _typeof2(n) && (n = o.decorateEnum(n).name), 
        function(r, i) {
            o.decorateType(r.constructor).add(new a(i, t, e, n));
        };
    };
}, function(t, e, n) {
    t.exports = s;
    var r = n(9), i = (((s.prototype = Object.create(r.prototype)).constructor = s).className = "Service", 
    n(25)), o = n(3), a = n(19);
    function s(t, e) {
        r.call(this, t, e), this.methods = {}, this.D = null;
    }
    function l(t) {
        return t.D = null, t;
    }
    s.fromJSON = function(t, e) {
        var n = new s(t, e.options);
        if (e.methods) for (var r = Object.keys(e.methods), o = 0; o < r.length; ++o) n.add(i.fromJSON(r[o], e.methods[r[o]]));
        return e.nested && n.addJSON(e.nested), n.comment = e.comment, n;
    }, s.prototype.toJSON = function(t) {
        var e = r.prototype.toJSON.call(this, t), n = !!t && Boolean(t.keepComments);
        return o.toObject([ "options", e && e.options || void 0, "methods", r.arrayToJSON(this.methodsArray, t) || {}, "nested", e && e.nested || void 0, "comment", n ? this.comment : void 0 ]);
    }, Object.defineProperty(s.prototype, "methodsArray", {
        get: function() {
            return this.D || (this.D = o.toArray(this.methods));
        }
    }), s.prototype.get = function(t) {
        return this.methods[t] || r.prototype.get.call(this, t);
    }, s.prototype.resolveAll = function() {
        for (var t = this.methodsArray, e = 0; e < t.length; ++e) t[e].resolve();
        return r.prototype.resolve.call(this);
    }, s.prototype.add = function(t) {
        if (this.get(t.name)) throw Error("duplicate name '" + t.name + "' in " + this);
        return t instanceof i ? l((this.methods[t.name] = t).parent = this) : r.prototype.add.call(this, t);
    }, s.prototype.remove = function(t) {
        if (t instanceof i) {
            if (this.methods[t.name] !== t) throw Error(t + " is not a member of " + this);
            return delete this.methods[t.name], t.parent = null, l(this);
        }
        return r.prototype.remove.call(this, t);
    }, s.prototype.create = function(t, e, n) {
        for (var r, i = new a.Service(t, e, n), s = 0; s < this.methodsArray.length; ++s) {
            var l = o.lcFirst((r = this.D[s]).resolve().name).replace(/[^$\w_]/g, "");
            i[l] = o.codegen([ "r", "c" ], o.isReserved(l) ? l + "_" : l)("return this.rpcCall(m,q,s,r,c)")({
                m: r,
                q: r.resolvedRequestType.ctor,
                s: r.resolvedResponseType.ctor
            });
        }
        return i;
    };
}, function(t, e, n) {
    t.exports = o;
    var r = n(7), i = (((o.prototype = Object.create(r.prototype)).constructor = o).className = "Method", 
    n(3));
    function o(t, e, n, o, a, s, l, u, c) {
        if (i.isObject(a) ? (l = a, a = s = void 0) : i.isObject(s) && (l = s, s = void 0), 
        void 0 !== e && !i.isString(e)) throw TypeError("type must be a string");
        if (!i.isString(n)) throw TypeError("requestType must be a string");
        if (!i.isString(o)) throw TypeError("responseType must be a string");
        r.call(this, t, l), this.type = e || "rpc", this.requestType = n, this.requestStream = !!a || void 0, 
        this.responseType = o, this.responseStream = !!s || void 0, this.resolvedRequestType = null, 
        this.resolvedResponseType = null, this.comment = u, this.parsedOptions = c;
    }
    o.fromJSON = function(t, e) {
        return new o(t, e.type, e.requestType, e.responseType, e.requestStream, e.responseStream, e.options, e.comment, e.parsedOptions);
    }, o.prototype.toJSON = function(t) {
        return t = !!t && Boolean(t.keepComments), i.toObject([ "type", "rpc" !== this.type && this.type || void 0, "requestType", this.requestType, "requestStream", this.requestStream, "responseType", this.responseType, "responseStream", this.responseStream, "options", this.options, "comment", t ? this.comment : void 0, "parsedOptions", this.parsedOptions ]);
    }, o.prototype.resolve = function() {
        return this.resolved ? this : (this.resolvedRequestType = this.parent.lookupType(this.requestType), 
        this.resolvedResponseType = this.parent.lookupType(this.responseType), r.prototype.resolve.call(this));
    };
}, function(t, e, n) {
    t.exports = function(t) {
        var e = o.codegen([ "r", "l" ], t.name + "$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor" + (t.fieldsArray.filter(function(t) {
            return t.map;
        }).length ? ",k,value" : ""))("while(r.pos<c){")("var t=r.uint32()");
        t.group && e("if((t&7)===4)")("break"), e("switch(t>>>3){");
        for (var n = 0; n < t.fieldsArray.length; ++n) {
            var a = t.R[n].resolve(), s = a.resolvedType instanceof r ? "int32" : a.type, l = "m" + o.safeProp(a.name);
            e("case %i:", a.id), a.map ? (e("if(%s===util.emptyObject)", l)("%s={}", l)("var c2 = r.uint32()+r.pos"), 
            void 0 !== i.defaults[a.keyType] ? e("k=%j", i.defaults[a.keyType]) : e("k=null"), 
            void 0 !== i.defaults[s] ? e("value=%j", i.defaults[s]) : e("value=null"), e("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break", a.keyType)("case 2:"), 
            void 0 === i.basic[s] ? e("value=types[%i].decode(r,r.uint32())", n) : e("value=r.%s()", s), 
            e("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"), void 0 !== i.long[a.keyType] ? e('%s[typeof k==="object"?util.longToHash(k):k]=value', l) : e("%s[k]=value", l)) : a.repeated ? (e("if(!(%s&&%s.length))", l, l)("%s=[]", l), 
            void 0 !== i.packed[s] && e("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())", l, s)("}else"), 
            void 0 === i.basic[s] ? e(a.resolvedType.group ? "%s.push(types[%i].decode(r))" : "%s.push(types[%i].decode(r,r.uint32()))", l, n) : e("%s.push(r.%s())", l, s)) : void 0 === i.basic[s] ? e(a.resolvedType.group ? "%s=types[%i].decode(r)" : "%s=types[%i].decode(r,r.uint32())", l, n) : e("%s=r.%s()", l, s), 
            e("break");
        }
        for (e("default:")("r.skipType(t&7)")("break")("}")("}"), n = 0; n < t.R.length; ++n) {
            var u = t.R[n];
            u.required && e("if(!m.hasOwnProperty(%j))", u.name)("throw util.ProtocolError(%j,{instance:m})", "missing required '" + u.name + "'");
        }
        return e("return m");
    };
    var r = n(5), i = n(10), o = n(3);
}, function(t, e, n) {
    t.exports = function(t) {
        var e = i.codegen([ "m" ], t.name + "$verify")('if(typeof m!=="object"||m===null)')("return%j", "object expected"), n = {};
        t.oneofsArray.length && e("var p={}");
        for (var r = 0; r < t.fieldsArray.length; ++r) {
            var s, l = t.R[r].resolve(), u = "m" + i.safeProp(l.name);
            l.optional && e("if(%s!=null&&m.hasOwnProperty(%j)){", u, l.name), l.map ? (e("if(!util.isObject(%s))", u)("return%j", o(l, "object"))("var k=Object.keys(%s)", u)("for(var i=0;i<k.length;++i){"), 
            function(t, e, n) {
                switch (e.keyType) {
                  case "int32":
                  case "uint32":
                  case "sint32":
                  case "fixed32":
                  case "sfixed32":
                    t("if(!util.key32Re.test(%s))", n)("return%j", o(e, "integer key"));
                    break;

                  case "int64":
                  case "uint64":
                  case "sint64":
                  case "fixed64":
                  case "sfixed64":
                    t("if(!util.key64Re.test(%s))", n)("return%j", o(e, "integer|Long key"));
                    break;

                  case "bool":
                    t("if(!util.key2Re.test(%s))", n)("return%j", o(e, "boolean key"));
                }
            }(e, l, "k[i]"), a(e, l, r, u + "[k[i]]")("}")) : l.repeated ? (e("if(!Array.isArray(%s))", u)("return%j", o(l, "array"))("for(var i=0;i<%s.length;++i){", u), 
            a(e, l, r, u + "[i]")("}")) : (l.partOf && (s = i.safeProp(l.partOf.name), 1 === n[l.partOf.name] && e("if(p%s===1)", s)("return%j", l.partOf.name + ": multiple values"), 
            n[l.partOf.name] = 1, e("p%s=1", s)), a(e, l, r, u)), l.optional && e("}");
        }
        return e("return null");
    };
    var r = n(5), i = n(3);
    function o(t, e) {
        return t.name + ": " + e + (t.repeated && "array" !== e ? "[]" : t.map && "object" !== e ? "{k:" + t.keyType + "}" : "") + " expected";
    }
    function a(t, e, n, i) {
        if (e.resolvedType) if (e.resolvedType instanceof r) {
            t("switch(%s){", i)("default:")("return%j", o(e, "enum value"));
            for (var a = Object.keys(e.resolvedType.values), s = 0; s < a.length; ++s) t("case %i:", e.resolvedType.values[a[s]]);
            t("break")("}");
        } else t("{")("var e=types[%i].verify(%s);", n, i)("if(e)")("return%j+e", e.name + ".")("}"); else switch (e.type) {
          case "int32":
          case "uint32":
          case "sint32":
          case "fixed32":
          case "sfixed32":
            t("if(!util.isInteger(%s))", i)("return%j", o(e, "integer"));
            break;

          case "int64":
          case "uint64":
          case "sint64":
          case "fixed64":
          case "sfixed64":
            t("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))", i, i, i, i)("return%j", o(e, "integer|Long"));
            break;

          case "float":
          case "double":
            t('if(typeof %s!=="number")', i)("return%j", o(e, "number"));
            break;

          case "bool":
            t('if(typeof %s!=="boolean")', i)("return%j", o(e, "boolean"));
            break;

          case "string":
            t("if(!util.isString(%s))", i)("return%j", o(e, "string"));
            break;

          case "bytes":
            t('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))', i, i, i)("return%j", o(e, "buffer"));
        }
        return t;
    }
}, function(t, e, n) {
    var r = n(5), i = n(3);
    function o(t, e, n, i) {
        if (e.resolvedType) if (e.resolvedType instanceof r) {
            t("switch(d%s){", i);
            for (var o = e.resolvedType.values, a = Object.keys(o), s = 0; s < a.length; ++s) e.repeated && o[a[s]] === e.typeDefault && t("default:"), 
            t("case%j:", a[s])("case %i:", o[a[s]])("m%s=%j", i, o[a[s]])("break");
            t("}");
        } else t('if(typeof d%s!=="object")', i)("throw TypeError(%j)", e.fullName + ": object expected")("m%s=types[%i].fromObject(d%s)", i, n, i); else {
            var l = !1;
            switch (e.type) {
              case "double":
              case "float":
                t("m%s=Number(d%s)", i, i);
                break;

              case "uint32":
              case "fixed32":
                t("m%s=d%s>>>0", i, i);
                break;

              case "int32":
              case "sint32":
              case "sfixed32":
                t("m%s=d%s|0", i, i);
                break;

              case "uint64":
                l = !0;

              case "int64":
              case "sint64":
              case "fixed64":
              case "sfixed64":
                t("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j", i, i, l)('else if(typeof d%s==="string")', i)("m%s=parseInt(d%s,10)", i, i)('else if(typeof d%s==="number")', i)("m%s=d%s", i, i)('else if(typeof d%s==="object")', i)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)", i, i, i, l ? "true" : "");
                break;

              case "bytes":
                t('if(typeof d%s==="string")', i)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)", i, i, i)("else if(d%s.length)", i)("m%s=d%s", i, i);
                break;

              case "string":
                t("m%s=String(d%s)", i, i);
                break;

              case "bool":
                t("m%s=Boolean(d%s)", i, i);
            }
        }
        return t;
    }
    function a(t, e, n, i) {
        if (e.resolvedType) e.resolvedType instanceof r ? t("d%s=o.enums===String?types[%i].values[m%s]:m%s", i, n, i, i) : t("d%s=types[%i].toObject(m%s,o)", i, n, i); else {
            var o = !1;
            switch (e.type) {
              case "double":
              case "float":
                t("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s", i, i, i, i);
                break;

              case "uint64":
                o = !0;

              case "int64":
              case "sint64":
              case "fixed64":
              case "sfixed64":
                t('if(typeof m%s==="number")', i)("d%s=o.longs===String?String(m%s):m%s", i, i, i)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s", i, i, i, i, o ? "true" : "", i);
                break;

              case "bytes":
                t("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s", i, i, i, i, i);
                break;

              default:
                t("d%s=m%s", i, i);
            }
        }
        return t;
    }
    e.fromObject = function(t) {
        var e = t.fieldsArray, n = i.codegen([ "d" ], t.name + "$fromObject")("if(d instanceof this.ctor)")("return d");
        if (!e.length) return n("return new this.ctor");
        n("var m=new this.ctor");
        for (var a = 0; a < e.length; ++a) {
            var s = e[a].resolve(), l = i.safeProp(s.name);
            s.map ? (n("if(d%s){", l)('if(typeof d%s!=="object")', l)("throw TypeError(%j)", s.fullName + ": object expected")("m%s={}", l)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){", l), 
            o(n, s, a, l + "[ks[i]]")("}")("}")) : s.repeated ? (n("if(d%s){", l)("if(!Array.isArray(d%s))", l)("throw TypeError(%j)", s.fullName + ": array expected")("m%s=[]", l)("for(var i=0;i<d%s.length;++i){", l), 
            o(n, s, a, l + "[i]")("}")("}")) : (s.resolvedType instanceof r || n("if(d%s!=null){", l), 
            o(n, s, a, l), s.resolvedType instanceof r || n("}"));
        }
        return n("return m");
    }, e.toObject = function(t) {
        var e = t.fieldsArray.slice().sort(i.compareFieldsById);
        if (!e.length) return i.codegen()("return {}");
        for (var n = i.codegen([ "m", "o" ], t.name + "$toObject")("if(!o)")("o={}")("var d={}"), o = [], s = [], l = [], u = 0; u < e.length; ++u) e[u].partOf || (e[u].resolve().repeated ? o : e[u].map ? s : l).push(e[u]);
        if (o.length) {
            for (n("if(o.arrays||o.defaults){"), u = 0; u < o.length; ++u) n("d%s=[]", i.safeProp(o[u].name));
            n("}");
        }
        if (s.length) {
            for (n("if(o.objects||o.defaults){"), u = 0; u < s.length; ++u) n("d%s={}", i.safeProp(s[u].name));
            n("}");
        }
        if (l.length) {
            for (n("if(o.defaults){"), u = 0; u < l.length; ++u) {
                var c, h = l[u], f = i.safeProp(h.name);
                h.resolvedType instanceof r ? n("d%s=o.enums===String?%j:%j", f, h.resolvedType.valuesById[h.typeDefault], h.typeDefault) : h.long ? n("if(util.Long){")("var n=new util.Long(%i,%i,%j)", h.typeDefault.low, h.typeDefault.high, h.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n", f)("}else")("d%s=o.longs===String?%j:%i", f, h.typeDefault.toString(), h.typeDefault.toNumber()) : h.bytes ? (c = "[" + Array.prototype.slice.call(h.typeDefault).join(",") + "]", 
                n("if(o.bytes===String)d%s=%j", f, String.fromCharCode.apply(String, h.typeDefault))("else{")("d%s=%s", f, c)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)", f, f)("}")) : n("d%s=%j", f, h.typeDefault);
            }
            n("}");
        }
        var p = !1;
        for (u = 0; u < e.length; ++u) {
            h = e[u];
            var d = t.R.indexOf(h);
            f = i.safeProp(h.name);
            h.map ? (p || (p = !0, n("var ks2")), n("if(m%s&&(ks2=Object.keys(m%s)).length){", f, f)("d%s={}", f)("for(var j=0;j<ks2.length;++j){"), 
            a(n, h, d, f + "[ks2[j]]")("}")) : h.repeated ? (n("if(m%s&&m%s.length){", f, f)("d%s=[]", f)("for(var j=0;j<m%s.length;++j){", f), 
            a(n, h, d, f + "[j]")("}")) : (n("if(m%s!=null&&m.hasOwnProperty(%j)){", f, h.name), 
            a(n, h, d, f), h.partOf && n("if(o.oneofs)")("d%s=%j", i.safeProp(h.partOf.name), h.name)), 
            n("}");
        }
        return n("return d");
    };
}, function(t, e, n) {
    var r = n(14);
    e[".google.protobuf.Any"] = {
        fromObject: function(t) {
            if (t && t["@type"]) {
                var e, n = t["@type"].substring(t["@type"].lastIndexOf("/") + 1);
                if (n = this.lookup(n)) return -1 === (e = "." === t["@type"].charAt(0) ? t["@type"].substr(1) : t["@type"]).indexOf("/") && (e = "/" + e), 
                this.create({
                    type_url: e,
                    value: n.encode(n.fromObject(t)).finish()
                });
            }
            return this.fromObject(t);
        },
        toObject: function(t, e) {
            var n, i, o = "", a = "";
            return !((t = e && e.json && t.type_url && t.value && (a = t.type_url.substring(t.type_url.lastIndexOf("/") + 1), 
            o = t.type_url.substring(0, t.type_url.lastIndexOf("/") + 1), n = this.lookup(a)) ? n.decode(t.value) : t) instanceof this.ctor) && t instanceof r ? (n = t.$type.toObject(t, e), 
            i = "." === t.$type.fullName[0] ? t.$type.fullName.substr(1) : t.$type.fullName, 
            n["@type"] = a = (o = "" === o ? "type.googleapis.com/" : o) + i, n) : this.toObject(t, e);
        }
    };
}, function(t, e, n) {
    t.exports = h;
    var r, i, o, a = n(9), s = (((h.prototype = Object.create(a.prototype)).constructor = h).className = "Root", 
    n(8)), l = n(5), u = n(11), c = n(3);
    function h(t) {
        a.call(this, "", t), this.deferred = [], this.files = [];
    }
    function f() {}
    h.fromJSON = function(t, e) {
        return e = e || new h(), t.options && e.setOptions(t.options), e.addJSON(t.nested);
    }, h.prototype.resolvePath = c.path.resolve, h.prototype.fetch = c.fetch, h.prototype.load = function t(e, n, r) {
        "function" == typeof n && (r = n, n = void 0);
        var a = this;
        if (!r) return c.asPromise(t, a, e, n);
        var s = r === f;
        function l(t, e) {
            if (r) {
                var n = r;
                if (r = null, s) throw t;
                n(t, e);
            }
        }
        function u(t) {
            var e = t.lastIndexOf("google/protobuf/");
            return -1 < e && (t = t.substring(e)) in o ? t : null;
        }
        function h(t, e) {
            try {
                if (c.isString(e) && "{" === e.charAt(0) && (e = JSON.parse(e)), c.isString(e)) {
                    i.filename = t;
                    var r, o = i(e, a, n), h = 0;
                    if (o.imports) for (;h < o.imports.length; ++h) (r = u(o.imports[h]) || a.resolvePath(t, o.imports[h])) && p(r);
                    if (o.weakImports) for (h = 0; h < o.weakImports.length; ++h) (r = u(o.weakImports[h]) || a.resolvePath(t, o.weakImports[h])) && p(r, !0);
                } else a.setOptions(e.options).addJSON(e.nested);
            } catch (t) {
                l(t);
            }
            s || d || l(null, a);
        }
        function p(t, e) {
            if (!(-1 < a.files.indexOf(t))) if (a.files.push(t), t in o) s ? h(t, o[t]) : (++d, 
            setTimeout(function() {
                --d, h(t, o[t]);
            })); else if (s) {
                var n;
                try {
                    n = c.fs.readFileSync(t).toString("utf8");
                } catch (n) {
                    return void (e || l(n));
                }
                h(t, n);
            } else ++d, a.fetch(t, function(n, i) {
                --d, r && (n ? e ? d || l(null, a) : l(n) : h(t, i));
            });
        }
        var d = 0;
        c.isString(e) && (e = [ e ]);
        for (var y, m = 0; m < e.length; ++m) (y = a.resolvePath("", e[m])) && p(y);
        if (s) return a;
        d || l(null, a);
    }, h.prototype.loadSync = function(t, e) {
        if (c.isNode) return this.load(t, e, f);
        throw Error("not supported");
    }, h.prototype.resolveAll = function() {
        if (this.deferred.length) throw Error("unresolvable extensions: " + this.deferred.map(function(t) {
            return "'extend " + t.extend + "' in " + t.parent.fullName;
        }).join(", "));
        return a.prototype.resolveAll.call(this);
    };
    var p = /^[A-Z]/;
    function d(t, e) {
        var n, r = e.parent.lookup(e.extend);
        if (r) return ((n = new s(e.fullName, e.id, e.type, e.rule, void 0, e.options)).declaringField = e).extensionField = n, 
        r.add(n), 1;
    }
    h.prototype.O = function(t) {
        if (t instanceof s) void 0 === t.extend || t.extensionField || d(0, t) || this.deferred.push(t); else if (t instanceof l) p.test(t.name) && (t.parent[t.name] = t.values); else if (!(t instanceof u)) {
            if (t instanceof r) for (var e = 0; e < this.deferred.length; ) d(0, this.deferred[e]) ? this.deferred.splice(e, 1) : ++e;
            for (var n = 0; n < t.nestedArray.length; ++n) this.O(t.L[n]);
            p.test(t.name) && (t.parent[t.name] = t);
        }
    }, h.prototype.T = function(t) {
        var e;
        if (t instanceof s) void 0 !== t.extend && (t.extensionField ? (t.extensionField.parent.remove(t.extensionField), 
        t.extensionField = null) : -1 < (e = this.deferred.indexOf(t)) && this.deferred.splice(e, 1)); else if (t instanceof l) p.test(t.name) && delete t.parent[t.name]; else if (t instanceof a) {
            for (var n = 0; n < t.nestedArray.length; ++n) this.T(t.L[n]);
            p.test(t.name) && delete t.parent[t.name];
        }
    }, h.M = function(t, e, n) {
        r = t, i = e, o = n;
    };
}, function(t, e, n) {
    var r;
    function i(t) {
        return (i = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    r = function(t) {
        function e(t) {
            return 180 * t / Math.PI;
        }
        function n(t) {
            return e(Math.atan2(t[1][1] - t[0][1], t[1][0] - t[0][0]));
        }
        function r(t, e) {
            return function(t) {
                if (Array.isArray(t)) return t;
            }(t) || function(t, e) {
                var n = [], r = !0, i = !1, o = void 0;
                try {
                    for (var a, s = t[Symbol.iterator](); !(r = (a = s.next()).done) && (n.push(a.value), 
                    !e || n.length !== e); r = !0) ;
                } catch (t) {
                    i = !0, o = t;
                } finally {
                    try {
                        r || null == s.return || s.return();
                    } finally {
                        if (i) throw o;
                    }
                }
                return n;
            }(t, e) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance");
            }();
        }
        function i(t) {
            return function(t) {
                if (Array.isArray(t)) {
                    for (var e = 0, n = new Array(t.length); e < t.length; e++) n[e] = t[e];
                    return n;
                }
            }(t) || function(t) {
                if (Symbol.iterator in Object(t) || "[object Arguments]" === Object.prototype.toString.call(t)) return Array.from(t);
            }(t) || function() {
                throw new TypeError("Invalid attempt to spread non-iterable instance");
            }();
        }
        function o(t) {
            var e, n = 1 < arguments.length && void 0 !== arguments[1] && arguments[1], i = (t = r(t, 2), 
            (e = r(t[0], 2))[0]), o = e[1], a = (e = r(t[1], 2))[0], s = e[1];
            return function(t) {
                return [ (a - i) * (t = n ? t < 0 ? 0 : 1 < t ? 1 : t : t) + i, (s - o) * t + o ];
            };
        }
        function a(t) {
            return Math.sqrt(Math.pow(t[1][0] - t[0][0], 2) + Math.pow(t[1][1] - t[0][1], 2));
        }
        function s(t) {
            return [ (t[0][0] + t[1][0]) / 2, (t[0][1] + t[1][1]) / 2 ];
        }
        function l(t) {
            return t / 180 * Math.PI;
        }
        function u(t, e, n) {
            return e = l(e || 0), !n || 0 === n[0] && 0 === n[1] ? c(t, e) : c(t.map(function(t, e) {
                return t - n[e];
            }), e).map(function(t, e) {
                return t + n[e];
            });
        }
        function c(t, e) {
            return [ t[0] * Math.cos(e) - t[1] * Math.sin(e), t[0] * Math.sin(e) + t[1] * Math.cos(e) ];
        }
        function h(t) {
            var e = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : 0, n = l(n = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : 0);
            return [ t[0] + e * Math.cos(n), t[1] + e * Math.sin(n) ];
        }
        function f(t) {
            for (var e = 1 < arguments.length && void 0 !== arguments[1] && arguments[1], n = 0, r = 0, i = t.length; r < i; r++) {
                var o = t[r], a = t[r === i - 1 ? 0 : r + 1];
                n = (n += o[0] * a[1]) - a[0] * o[1];
            }
            return e ? n / 2 : Math.abs(n / 2);
        }
        function p(t) {
            if (t.length < 3) return null;
            for (var e = 1 / 0, n = -1 / 0, r = 1 / 0, i = -1 / 0, o = !1, a = 0, s = t.length; a < s; a++) {
                var l = (u = t[a])[0], u = u[1];
                null != l && isFinite(l) && null != u && isFinite(u) && (o = !0, l < e && (e = l), 
                n < l && (n = l), u < r && (r = u), i < u) && (i = u);
            }
            return o ? [ [ e, r ], [ n, i ] ] : null;
        }
        function d(t) {
            for (var e = 0, n = 0, r = 0, i = t.length, o = 0; o < i; o++) {
                var a = t[o], s = t[o === i - 1 ? 0 : o + 1], l = a[0] * s[1] - s[0] * a[1];
                e += l, n += (a[0] + s[0]) * l, r += (a[1] + s[1]) * l;
            }
            var u = 3 * e;
            return [ n / u, r / u ];
        }
        function y(t, e, n) {
            return (t[0] - n[0]) * (e[1] - n[1]) - (t[1] - n[1]) * (e[0] - n[0]);
        }
        function m(t) {
            return n = (e = t)[0], e = e[e.length - 1], n[0] === e[0] && n[1] === e[1] ? t : [].concat(i(t), [ t[0] ]);
            var e, n;
        }
        function v(t) {
            if (0 === t.length) return 0;
            for (var e, n, r = -1, i = t.length, o = t[i - 1], a = o[0], s = o[1], l = 0; ++r < i; ) e = a, 
            n = s, e -= a = (o = t[r])[0], n -= s = o[1], l += Math.sqrt(e * e + n * n);
            return l;
        }
        function g(t, e, r) {
            r = r || d(t);
            for (var i = [], o = 0, s = t.length; o < s; o++) {
                var l = a([ r, u = t[o] ]), u = n([ r, u ]);
                i[o] = h(r, u, l * Math.sqrt(e));
            }
            return i;
        }
        function b(t, e, n) {
            for (var r = [], i = 0, o = t.length; i < o; i++) r[i] = h(t[i], e, n);
            return r;
        }
        function x(t, e, n) {
            for (var r = e, i = e, o = [], a = 1; a < t.length - 1; a++) {
                var s = t[a];
                .5 < Math.random() ? (o.push(s - r), r = s) : (o.push(i - s), i = s);
            }
            return o.push(n - r), o.push(i - n), o;
        }
        function w(t) {
            return t[1][1] > t[0][1] ? t : [ t[1], t[0] ];
        }
        function S(t, e) {
            var n = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : 0, r = a(e);
            return _(t, e, n) && a([ e[0], t ]) <= r && a([ e[1], t ]) <= r;
        }
        function _(t, e) {
            var n = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : 0;
            return Math.abs(y(t, e[0], e[1])) <= n;
        }
        function E(t, e) {
            var n = r(t, 2), i = (o = r(n[0], 2))[0], o = o[1], a = (n = r(n[1], 2))[0], s = (n = n[1], 
            r(e, 2)), l = (u = r(s[0], 2))[0], u = u[1], c = (s = r(s[1], 2))[0];
            s = s[1];
            return i === l && o === u || a === c && n === s || !!(S(t[0], e) || S(t[1], e) || S(e[0], t) || S(e[1], t)) || 0 != (e = (s - u) * (a - i) - (c - l) * (n - o)) && (n = ((a - i) * (t = o - u) - (n - o) * (a = i - l)) / e, 
            0 < (o = ((c - l) * t - (s - u) * a) / e)) && o < 1 && 0 < n && n < 1;
        }
        function O(t, e) {
            for (var n = !1, r = m(e), i = 0, o = r.length - 1; i < o; i++) {
                var a = r[i], s = r[i + 1];
                if (E(t, [ a, s ]) || S(a, t) && S(s, t)) {
                    n = !0;
                    break;
                }
            }
            return n;
        }
        function M(t, e) {
            for (var n = t[0], r = t[1], i = !1, o = 0, a = e.length - 1; o < e.length; a = o++) {
                var s = e[o][0], l = e[o][1], u = e[a][0], c = e[a][1];
                r < l != r < c && n < (u - s) * (r - l) / (c - l) + s && (i = !i);
            }
            return i;
        }
        function T(t, e) {
            for (var n = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : 0, r = !1, i = m(e), o = 0, a = i.length - 1; o < a; o++) if (S(t, [ i[o], i[o + 1] ], n)) {
                r = !0;
                break;
            }
            return r;
        }
        t.lineAngle = n, t.lineInterpolate = o, t.lineLength = a, t.lineMidpoint = s, t.lineRotate = function(t, e, n) {
            return t.map(function(r) {
                return u(r, e, n || s(t));
            });
        }, t.lineTranslate = function(t, e, n) {
            return t.map(function(t) {
                return h(t, e, n);
            });
        }, t.pointRotate = u, t.pointTranslate = h, t.polygonArea = f, t.polygonBounds = p, 
        t.polygonCentroid = d, t.polygonHull = function(t) {
            if (t.length < 3) return null;
            for (var e = t.slice().sort(function(t, e) {
                return t[0] === e[0] ? t[1] - e[1] : t[0] - e[0];
            }), n = [], r = 0; r < e.length; r++) {
                for (;2 <= n.length && y(n[n.length - 2], n[n.length - 1], e[r]) <= 0; ) n.pop();
                n.push(e[r]);
            }
            for (var i = [], o = e.length - 1; 0 <= o; o--) {
                for (;2 <= i.length && y(i[i.length - 2], i[i.length - 1], e[o]) <= 0; ) i.pop();
                i.push(e[o]);
            }
            return i.pop(), n.pop(), n.concat(i);
        }, t.polygonInterpolate = function(t) {
            return function(e) {
                if (e <= 0) return t[0];
                var r = m(t);
                if (1 <= e) return r[r.length - 1];
                for (var i = v(r) * e, o = [], s = 0, l = 0; l < r.length - 1; l++) {
                    var u = [ r[l], r[l + 1] ], c = a(u), f = n(u), p = i - (s += c);
                    if (p < 0) {
                        o = h(u[0], f, c + p);
                        break;
                    }
                    l === t.length - 2 && (o = h(u[0], f, p));
                }
                return o;
            };
        }, t.polygonLength = v, t.polygonMean = function(t) {
            for (var e = 0, n = 0, r = t.length, i = 0; i < r; i++) {
                var o = t[i];
                e += o[0], n += o[1];
            }
            return [ e / r, n / r ];
        }, t.polygonRandom = function() {
            for (var t = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : 3, e = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : 100, r = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : [ 0, 0 ], i = Math.sqrt(e / Math.PI), o = Array.from({
                length: t
            }, function() {
                return 2 * i * Math.random();
            }), s = (t = Array.from({
                length: t
            }, function() {
                return 2 * i * Math.random();
            }), o = (o.sort(function(t, e) {
                return t - e;
            }), t.sort(function(t, e) {
                return t - e;
            }), x(o, o[0], o[o.length - 1])), x(t, t[0], t[t.length - 1])), l = s, u = l.length - 1; 0 < u; u--) {
                var c = Math.floor(Math.random() * (u + 1)), h = [ l[c], l[u] ];
                l[u] = h[0], l[c] = h[1];
            }
            var p = [], y = 0, m = 0;
            o.map(function(t, e) {
                return [ t, s[e] ];
            }).sort(function(t, e) {
                return Math.atan2(e[1], e[0]) - Math.atan2(t[1], t[0]);
            }).forEach(function(t) {
                y += +t[0], m += +t[1], p.push([ y, m ]);
            }), t = d(p);
            return b(g(p, e / f(p)), n([ t, r ]), a([ t, r ]));
        }, t.polygonReflectX = function(t) {
            var e = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : 1, n = r(p(t), 2), i = r(n[0], 2), a = i[0];
            i[1];
            for (var s = (i = r(n[1], 2))[0], l = (i[1], []), u = 0, c = t.length; u < c; u++) {
                var h, f = (h = r(t[u], 2))[0], d = [ a + s - f, h = h[1] ];
                0 === e ? l[u] = [ f, h ] : 1 === e ? l[u] = d : (f = o([ [ f, h ], d ]), l[u] = f(Math.max(Math.min(e, 1), 0)));
            }
            return l;
        }, t.polygonReflectY = function(t) {
            for (var e = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : 1, n = r(p(t), 2), i = r(n[0], 2), a = (i[0], 
            i[1]), s = ((i = r(n[1], 2))[0], i[1]), l = [], u = 0, c = t.length; u < c; u++) {
                var h, f = (h = r(t[u], 2))[0], d = [ f, a + s - (h = h[1]) ];
                0 === e ? l[u] = [ f, h ] : 1 === e ? l[u] = d : (f = o([ [ f, h ], d ]), l[u] = f(Math.max(Math.min(e, 1), 0)));
            }
            return l;
        }, t.polygonRegular = function() {
            for (var t = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : 3, e = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : 100, r = 2 < arguments.length ? arguments[2] : void 0, i = [], o = [ 0, 0 ], s = [ 0, 0 ], l = 0, u = 0; u < t; u++) i[u] = o, 
            s[0] += o[0], s[1] += o[1], o = h(o, l, Math.sqrt(4 * e * Math.tan(Math.PI / t) / t)), 
            l -= 360 / t;
            return r ? b(i, n(r = [ [ s[0] / t, s[1] / t ], r ]), a(r)) : i;
        }, t.polygonRotate = function(t, e, n) {
            for (var r = [], i = 0, o = t.length; i < o; i++) r[i] = u(t[i], e, n);
            return r;
        }, t.polygonScale = function(t, e, r) {
            r = r || d(t);
            for (var i = [], o = 0, s = t.length; o < s; o++) {
                var l = a([ r, u = t[o] ]), u = n([ r, u ]);
                i[o] = h(r, u, l * e);
            }
            return i;
        }, t.polygonScaleArea = g, t.polygonScaleX = function(t, e, r) {
            r = r || d(t);
            for (var i = [], o = 0, s = t.length; o < s; o++) {
                var l = t[o], u = a([ r, l ]);
                u = h(r, n([ r, l ]), u * e);
                i[o] = [ u[0], l[1] ];
            }
            return i;
        }, t.polygonScaleY = function(t, e, r) {
            r = r || d(t);
            for (var i = [], o = 0, s = t.length; o < s; o++) {
                var l = t[o], u = a([ r, l ]);
                u = h(r, n([ r, l ]), u * e);
                i[o] = [ l[0], u[1] ];
            }
            return i;
        }, t.polygonTranslate = b, t.polygonWind = function(t) {
            var e, n, r = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : "ccw";
            return t.length < 3 ? null : (e = t.slice().reverse(), n = 0 < f(t, !0), "cw" === r || "clockwise" === r ? n ? t : e : n ? e : t);
        }, t.lineIntersectsLine = E, t.lineIntersectsPolygon = O, t.pointInPolygon = M, 
        t.pointOnPolygon = T, t.pointLeftofLine = function(t, e) {
            return y(t, (e = w(e))[1], e[0]) < 0;
        }, t.pointRightofLine = function(t, e) {
            return 0 < y(t, (e = w(e))[1], e[0]);
        }, t.pointOnLine = S, t.pointWithLine = _, t.polygonInPolygon = function(t, e) {
            for (var n = !0, r = m(t), i = 0, o = r.length - 1; i < o; i++) {
                var a = r[i];
                if (!M(a, e)) {
                    n = !1;
                    break;
                }
                if (O([ a, r[i + 1] ], e)) {
                    n = !1;
                    break;
                }
            }
            return n;
        }, t.polygonIntersectsPolygon = function(t, e) {
            for (var n = !1, r = 0, i = m(t), o = 0, a = i.length - 1; o < a; o++) {
                var s = i[o];
                if (O([ s, i[o + 1] ], e)) {
                    n = !0;
                    break;
                }
                if (T(s, e) && ++r, 2 === r) {
                    n = !0;
                    break;
                }
            }
            return n;
        }, t.angleReflect = function(t, e) {
            return 360 <= (e = 2 * e - t) ? e - 360 : e < 0 ? 360 + e : e;
        }, t.angleToDegrees = e, t.angleToRadians = l, Object.defineProperty(t, "u", {
            value: !0
        });
    }, "object" === i(e) && void 0 !== t ? r(e) : void 0 !== (e = "function" == typeof (r = r) ? r.apply(e, [ e ]) : r) && (t.exports = e);
}, function(t, e, n) {
    t.exports = n(36);
}, function(t, e, n) {
    var r;
    void 0 !== (e = "function" == typeof (r = function() {
        var t = function(t) {
            return t.reduce(function(t, e) {
                return 2 * t + e;
            }, 0);
        }, e = function(t) {
            for (var e = [], n = 7; n >= 0; n--) e.push(!!(t & 1 << n));
            return e;
        }, n = function(t) {
            this.data = t, this.len = this.data.length, this.pos = 0, this.readByte = function() {
                if (this.pos >= this.data.length) throw new Error("Attempted to read past end of stream.");
                return t instanceof Uint8Array ? t[this.pos++] : 255 & t.charCodeAt(this.pos++);
            }, this.readBytes = function(t) {
                for (var e = [], n = 0; n < t; n++) e.push(this.readByte());
                return e;
            }, this.read = function(t) {
                for (var e = "", n = 0; n < t; n++) e += String.fromCharCode(this.readByte());
                return e;
            }, this.readUnsigned = function() {
                var t = this.readBytes(2);
                return (t[1] << 8) + t[0];
            };
        }, r = function(n, r) {
            r || (r = {});
            var i = function(t) {
                for (var e = [], r = 0; r < t; r++) e.push(n.readBytes(3));
                return e;
            }, o = function() {
                var t, e;
                e = "";
                do {
                    t = n.readByte(), e += n.read(t);
                } while (0 !== t);
                return e;
            }, a = function(a) {
                a.leftPos = n.readUnsigned(), a.topPos = n.readUnsigned(), a.width = n.readUnsigned(), 
                a.height = n.readUnsigned();
                var s = e(n.readByte());
                a.lctFlag = s.shift(), a.interlaced = s.shift(), a.sorted = s.shift(), a.reserved = s.splice(0, 2), 
                a.lctSize = t(s.splice(0, 3)), a.lctFlag && (a.lct = i(1 << a.lctSize + 1)), a.lzwMinCodeSize = n.readByte();
                var l = o();
                a.pixels = function(t, e) {
                    for (var n, r, i = 0, o = function(t) {
                        for (var n = 0, r = 0; r < t; r++) e.charCodeAt(i >> 3) & 1 << (7 & i) && (n |= 1 << r), 
                        i++;
                        return n;
                    }, a = [], s = 1 << t, l = s + 1, u = t + 1, c = [], h = function() {
                        c = [], u = t + 1;
                        for (var e = 0; e < s; e++) c[e] = [ e ];
                        c[s] = [], c[l] = null;
                    }; ;) if (r = n, (n = o(u)) !== s) {
                        if (n === l) break;
                        if (n < c.length) r !== s && c.push(c[r].concat(c[n][0])); else {
                            if (n !== c.length) throw new Error("Invalid LZW code.");
                            c.push(c[r].concat(c[r][0]));
                        }
                        a.push.apply(a, c[n]), c.length === 1 << u && u < 12 && u++;
                    } else h();
                    return a;
                }(a.lzwMinCodeSize, l), a.interlaced && (a.pixels = function(t, e) {
                    for (var n = new Array(t.length), r = t.length / e, i = function(r, i) {
                        var o = t.slice(i * e, (i + 1) * e);
                        n.splice.apply(n, [ r * e, e ].concat(o));
                    }, o = [ 0, 4, 2, 1 ], a = [ 8, 8, 4, 2 ], s = 0, l = 0; l < 4; l++) for (var u = o[l]; u < r; u += a[l]) i(u, s), 
                    s++;
                    return n;
                }(a.pixels, a.width)), r.img && r.img(a);
            }, s = function i() {
                var s = {};
                switch (s.sentinel = n.readByte(), String.fromCharCode(s.sentinel)) {
                  case "!":
                    s.type = "ext", function(i) {
                        switch (i.label = n.readByte(), i.label) {
                          case 249:
                            i.extType = "gce", function(i) {
                                n.readByte();
                                var o = e(n.readByte());
                                i.reserved = o.splice(0, 3), i.disposalMethod = t(o.splice(0, 3)), i.userInput = o.shift(), 
                                i.transparencyGiven = o.shift(), i.delayTime = n.readUnsigned(), i.transparencyIndex = n.readByte(), 
                                i.terminator = n.readByte(), r.gce && r.gce(i);
                            }(i);
                            break;

                          case 254:
                            i.extType = "com", function(t) {
                                t.comment = o(), r.com && r.com(t);
                            }(i);
                            break;

                          case 1:
                            i.extType = "pte", function(t) {
                                n.readByte();
                                t.ptHeader = n.readBytes(12), t.ptData = o(), r.pte && r.pte(t);
                            }(i);
                            break;

                          case 255:
                            i.extType = "app", function(t) {
                                n.readByte();
                                switch (t.identifier = n.read(8), t.authCode = n.read(3), t.identifier) {
                                  case "NETSCAPE":
                                    !function(t) {
                                        n.readByte();
                                        t.unknown = n.readByte(), t.iterations = n.readUnsigned(), t.terminator = n.readByte(), 
                                        r.app && r.app.NETSCAPE && r.app.NETSCAPE(t);
                                    }(t);
                                    break;

                                  default:
                                    !function(t) {
                                        t.appData = o(), r.app && r.app[t.identifier] && r.app[t.identifier](t);
                                    }(t);
                                }
                            }(i);
                            break;

                          default:
                            i.extType = "unknown", function(t) {
                                t.data = o(), r.unknown && r.unknown(t);
                            }(i);
                        }
                    }(s);
                    break;

                  case ",":
                    s.type = "img", a(s);
                    break;

                  case ";":
                    s.type = "eof", r.eof && r.eof(s);
                    break;

                  default:
                    throw new Error("Unknown block: 0x" + s.sentinel.toString(16));
                }
                "eof" !== s.type && setTimeout(i, 0);
            };
            !function() {
                var o = {};
                if (o.sig = n.read(3), o.ver = n.read(3), "GIF" !== o.sig) throw new Error("Not a GIF file.");
                o.width = n.readUnsigned(), o.height = n.readUnsigned();
                var a = e(n.readByte());
                o.gctFlag = a.shift(), o.colorRes = t(a.splice(0, 3)), o.sorted = a.shift(), o.gctSize = t(a.splice(0, 3)), 
                o.bgColor = n.readByte(), o.pixelAspectRatio = n.readByte(), o.gctFlag && (o.gct = i(1 << o.gctSize + 1)), 
                r.hdr && r.hdr(o);
            }(), setTimeout(s, 0);
        };
        return function(t) {
            var e, i, o = {
                vp_l: 0,
                vp_t: 0,
                vp_w: null,
                vp_h: null,
                c_w: null,
                c_h: null
            };
            for (var a in t) o[a] = t[a];
            o.vp_w && o.vp_h && (o.is_vp = !0);
            var s = null, l = !1, u = null, c = null, h = null, f = null, p = null, d = null, y = null, m = !0, v = !1, g = [], b = [], x = o.gif;
            void 0 === o.auto_play && (o.auto_play = !x.getAttribute("rel:auto_play") || "1" == x.getAttribute("rel:auto_play"));
            var w, S, _, E, O = o.hasOwnProperty("on_end") ? o.on_end : null, M = o.hasOwnProperty("loop_delay") ? o.loop_delay : 0, T = o.hasOwnProperty("loop_mode") ? o.loop_mode : "auto", L = !o.hasOwnProperty("draw_while_loading") || o.draw_while_loading, A = !!L && (!o.hasOwnProperty("show_progress_bar") || o.show_progress_bar), P = o.hasOwnProperty("progressbar_height") ? o.progressbar_height : 25, R = o.hasOwnProperty("progressbar_background_color") ? o.progressbar_background_color : "rgba(255,255,255,0.4)", j = o.hasOwnProperty("progressbar_foreground_color") ? o.progressbar_foreground_color : "rgba(255,0,22,.8)", I = function() {
                u = null, c = null, p = h, h = null, d = null;
            }, D = function() {
                try {
                    r(e, H);
                } catch (t) {
                    N("parse");
                }
            }, k = function(t, e) {
                w.width = t * W(), w.height = e * W(), _.style.minWidth = t * W() + "px", E.width = t, 
                E.height = e, E.style.width = t + "px", E.style.height = e + "px", E.getContext("2d").setTransform(1, 0, 0, 1, 0, 0);
            }, C = function(t, e, n) {
                if (n && A) {
                    var r, i, a, s = P;
                    if (o.is_vp) v ? (i = (o.vp_t + o.vp_h - s) / W(), s /= W(), r = o.vp_l / W() + t / e * (o.vp_w / W()), 
                    a = w.width / W()) : (i = o.vp_t + o.vp_h - s, s = s, r = o.vp_l + t / e * o.vp_w, 
                    a = w.width); else i = (w.height - s) / (v ? W() : 1), r = t / e * w.width / (v ? W() : 1), 
                    a = w.width / (v ? W() : 1), s /= v ? W() : 1;
                    S.fillStyle = R, S.fillRect(r, i, a - r, s), S.fillStyle = j, S.fillRect(0, i, r, s);
                }
            }, N = function(t) {
                s = t, i = {
                    width: x.width,
                    height: x.height
                }, g = [], S.fillStyle = "black", S.fillRect(0, 0, o.c_w ? o.c_w : i.width, o.c_h ? o.c_h : i.height), 
                S.strokeStyle = "red", S.lineWidth = 3, S.moveTo(0, 0), S.lineTo(o.c_w ? o.c_w : i.width, o.c_h ? o.c_h : i.height), 
                S.moveTo(0, o.c_h ? o.c_h : i.height), S.lineTo(o.c_w ? o.c_w : i.width, 0), S.stroke();
            }, F = function() {
                d && (g.push({
                    data: d.getImageData(0, 0, i.width, i.height),
                    delay: c
                }), b.push({
                    x: 0,
                    y: 0
                }));
            }, B = function() {
                var t = -1, e = 0, n = function(e) {
                    t += e, i();
                }, r = function() {
                    var r = !1, i = function() {
                        null !== O && O(x), e++, !1 !== T || e < 0 ? o() : (r = !1, m = !1);
                    }, o = function e() {
                        if (r = m) {
                            n(1);
                            var o = 10 * g[t].delay;
                            o || (o = 100), 0 === (t + 1 + g.length) % g.length ? (o += M, setTimeout(i, o)) : setTimeout(e, o);
                        }
                    };
                    return function() {
                        r || setTimeout(o, 0);
                    };
                }(), i = function() {
                    var e;
                    (t = parseInt(t, 10)) > g.length - 1 && (t = 0), t < 0 && (t = 0), e = b[t], E.getContext("2d").putImageData(g[t].data, e.x, e.y), 
                    S.globalCompositeOperation = "copy", S.drawImage(E, 0, 0);
                };
                return {
                    init: function() {
                        s || (o.c_w && o.c_h || S.scale(W(), W()), o.auto_play ? r() : (t = 0, i()));
                    },
                    step: r,
                    play: function() {
                        m = !0, r();
                    },
                    pause: function() {
                        m = !1;
                    },
                    playing: m,
                    move_relative: n,
                    current_frame: function() {
                        return t;
                    },
                    length: function() {
                        return g.length;
                    },
                    move_to: function(e) {
                        t = e, i();
                    }
                };
            }(), U = function(t) {
                C(e.pos, e.data.length, t);
            }, z = function() {}, G = function(t, e) {
                return function(n) {
                    t(n), U(e);
                };
            }, H = {
                hdr: G(function(t) {
                    k((i = t).width, i.height);
                }),
                gce: G(function(t) {
                    F(), I(), u = t.transparencyGiven ? t.transparencyIndex : null, c = t.delayTime, 
                    h = t.disposalMethod;
                }),
                com: G(z),
                app: {
                    NETSCAPE: G(z)
                },
                img: G(function(t) {
                    d || (d = E.getContext("2d"));
                    var e = g.length, n = t.lctFlag ? t.lct : i.gct;
                    e > 0 && (3 === p ? null !== f ? d.putImageData(g[f].data, 0, 0) : d.clearRect(y.leftPos, y.topPos, y.width, y.height) : f = e - 1, 
                    2 === p && d.clearRect(y.leftPos, y.topPos, y.width, y.height));
                    var r = d.getImageData(t.leftPos, t.topPos, t.width, t.height);
                    t.pixels.forEach(function(t, e) {
                        t !== u && (r.data[4 * e + 0] = n[t][0], r.data[4 * e + 1] = n[t][1], r.data[4 * e + 2] = n[t][2], 
                        r.data[4 * e + 3] = 255);
                    }), d.putImageData(r, t.leftPos, t.topPos), v || (S.scale(W(), W()), v = !0), L && (S.drawImage(E, 0, 0), 
                    L = o.auto_play), y = t;
                }, !0),
                eof: function(t) {
                    F(), U(!1), o.c_w && o.c_h || (w.width = i.width * W(), w.height = i.height * W()), 
                    B.init(), l = !1, X && X(x);
                }
            }, V = function() {
                var t = x.parentNode, e = document.createElement("div");
                w = document.createElement("canvas"), S = w.getContext("2d"), _ = document.createElement("div"), 
                E = document.createElement("canvas"), e.width = w.width = x.width, e.height = w.height = x.height, 
                _.style.minWidth = x.width + "px", e.className = "jsgif", _.className = "jsgif_toolbar", 
                e.appendChild(w), e.appendChild(_), t.insertBefore(e, x), t.removeChild(x), o.c_w && o.c_h && k(o.c_w, o.c_h), 
                Y = !0;
            }, W = function() {
                return o.max_width && i && i.width > o.max_width ? o.max_width / i.width : 1;
            }, Y = !1, X = !1, Z = function(t) {
                return !l && (X = t || !1, l = !0, g = [], I(), f = null, p = null, d = null, y = null, 
                !0);
            }, q = function() {
                return g.reduce(function(t, e) {
                    return t + e.delay;
                }, 0);
            };
            return {
                play: B.play,
                pause: B.pause,
                move_relative: B.move_relative,
                move_to: B.move_to,
                get_playing: function() {
                    return m;
                },
                get_canvas: function() {
                    return w;
                },
                get_canvas_scale: function() {
                    return W();
                },
                get_loading: function() {
                    return l;
                },
                get_auto_play: function() {
                    return o.auto_play;
                },
                get_length: function() {
                    return B.length();
                },
                get_frames: function() {
                    return g;
                },
                get_duration: function() {
                    return q();
                },
                get_duration_ms: function() {
                    return 10 * q();
                },
                get_current_frame: function() {
                    return B.current_frame();
                },
                load_url: function(t, r) {
                    if (Z(r)) {
                        var i = new XMLHttpRequest();
                        i.open("GET", t, !0), "overrideMimeType" in i ? i.overrideMimeType("text/plain; charset=x-user-defined") : "responseType" in i ? i.responseType = "arraybuffer" : i.setRequestHeader("Accept-Charset", "x-user-defined"), 
                        i.onloadstart = function() {
                            Y || V();
                        }, i.onload = function(t) {
                            200 != this.status && N("xhr - response"), "response" in this || (this.response = new VBArray(this.responseText).toArray().map(String.fromCharCode).join(""));
                            var r = this.response;
                            r.toString().indexOf("ArrayBuffer") > 0 && (r = new Uint8Array(r)), e = new n(r), 
                            setTimeout(D, 0);
                        }, i.onprogress = function(t) {
                            t.lengthComputable && C(t.loaded, t.total, !0);
                        }, i.onerror = function() {
                            N("xhr");
                        }, i.send();
                    }
                },
                load: function(t) {
                    this.load_url(x.getAttribute("rel:animated_src") || x.src, t);
                },
                load_raw: function(t, r) {
                    Z(r) && (Y || V(), e = new n(t), setTimeout(D, 0));
                },
                set_frame_offset: function(t, e) {
                    b[t] ? (void 0 !== e.x && (b[t].x = e.x), void 0 !== e.y && (b[t].y = e.y)) : b[t] = e;
                }
            };
        };
    }) ? r.apply(e, []) : r) && (t.exports = e);
}, function(t, e, n) {
    var r = n(49);
    n = n(50);
    t.exports = {
        atob: r,
        btoa: n
    };
}, function(t, e, n) {
    var r;
    r = function() {
        var t, e = {
            defaultRadius: 40,
            defaultRenderer: "canvas2d",
            defaultGradient: {
                .25: "rgb(0,0,255)",
                .55: "rgb(0,255,0)",
                .85: "yellow",
                1: "rgb(255,0,0)"
            },
            defaultMaxOpacity: 1,
            defaultMinOpacity: 0,
            defaultBlur: .85,
            defaultXField: "x",
            defaultYField: "y",
            defaultValueField: "value",
            plugins: {}
        }, n = (t = e.defaultRadius, r.prototype = {
            I: function(e, n) {
                var r = e[this.F], i = e[this.G], o = this.U, a = this.B, s = this.H, l = this.V, u = e[this.W] || 1;
                e = e.radius || this.Y || t;
                return s < (o = (a[r] || (a[r] = [], o[r] = []), a[r][i] ? a[r][i] += u : (a[r][i] = u, 
                o[r][i] = e), a[r][i])) ? (n ? this.setDataMax(o) : this.H = o, !1) : o < l ? (n ? this.setDataMin(o) : this.V = o, 
                !1) : {
                    x: r,
                    y: i,
                    value: u,
                    radius: e,
                    min: l,
                    max: s
                };
            },
            X: function() {
                var t, e = [], n = this.B, r = this.U;
                for (t in n) for (var i in n[t]) e.push({
                    x: t,
                    y: i,
                    radius: r[t][i],
                    value: n[t][i]
                });
                return {
                    min: this.V,
                    max: this.H,
                    data: e
                };
            },
            Z: function() {
                this.J.emit("extremachange", {
                    min: this.V,
                    max: this.H
                });
            },
            addData: function() {
                if (0 < arguments[0].length) for (var t = arguments[0], e = t.length; e--; ) this.addData.call(this, t[e]); else {
                    var n = this.I(arguments[0], !0);
                    n && (0 === this.B.length && (this.V = this.H = n.value), this.J.emit("renderpartial", {
                        min: this.V,
                        max: this.H,
                        data: [ n ]
                    }));
                }
                return this;
            },
            setData: function(t) {
                var e = t.data, n = e.length;
                this.B = [], this.U = [];
                for (var r = 0; r < n; r++) this.I(e[r], !1);
                return this.H = t.max, this.V = t.min || 0, this.Z(), this.J.emit("renderall", this.K()), 
                this;
            },
            removeData: function() {},
            setDataMax: function(t) {
                return this.H = t, this.Z(), this.J.emit("renderall", this.K()), this;
            },
            setDataMin: function(t) {
                return this.V = t, this.Z(), this.J.emit("renderall", this.K()), this;
            },
            setCoordinator: function(t) {
                this.J = t;
            },
            K: function() {
                return {
                    max: this.H,
                    min: this.V,
                    data: this.B,
                    radi: this.U
                };
            },
            getData: function() {
                return this.X();
            }
        }, r);
        function r(t) {
            this.J = {}, this.B = [], this.U = [], this.V = 10, this.H = 1, this.F = t.xField || t.defaultXField, 
            this.G = t.yField || t.defaultYField, this.W = t.valueField || t.defaultValueField, 
            t.radius && (this.Y = t.radius);
        }
        function i(t) {
            for (var e = t.gradient || t.defaultGradient, n = (t = t.canvas).getContext("2d"), r = (t.width = 256, 
            t.height = 1, n.createLinearGradient(0, 0, 256, 1)), i = Object.keys(e).map(parseFloat), o = (i.sort(function(t, e) {
                return t - e;
            }), []), a = 0; a < i.length; a++) o.push(e[i[a]]);
            for (var s = 0; s < i.length; s++) r.addColorStop(i[s], o[s]);
            return n.fillStyle = r, n.fillRect(0, 0, 256, 1), n.getImageData(0, 0, 256, 1).data;
        }
        function o(t) {
            var e = this.shadowCanvas = t.canvas, n = this.canvas = t.canvas;
            this.$ = [ 1e4, 1e4, 0, 0 ], e.width = n.width, e.height = n.height, this.tt = n.width, 
            this.nt = n.height, this.ctx = n.getContext("2d"), this.shadowCtx = e.getContext("2d"), 
            this.et = i(t), this.it = {}, this.rt(t);
        }
        a = !(o.prototype = {
            renderPartial: function(t) {
                0 < t.data.length && (this.ot(t), this.st());
            },
            renderAll: function(t) {
                var e;
                this.ut(), 0 < (null == t || null == (e = t.data) ? void 0 : e.length) && (this.ot(function(t) {
                    for (var e = [], n = t.min, r = t.max, i = t.radi, o = (t = t.data, Object.keys(t)), a = o.length; a--; ) for (var s = o[a], l = Object.keys(t[s]), u = l.length; u--; ) {
                        var c = l[u], h = t[s][c], f = i[s][c];
                        e.push({
                            x: s,
                            y: c,
                            value: h,
                            radius: f
                        });
                    }
                    return {
                        min: n,
                        max: r,
                        data: e
                    };
                }(t)), this.st());
            },
            ct: function(t) {
                this.et = i(t);
            },
            updateConfig: function(t) {
                t.gradient && this.ct(t), this.rt(t);
            },
            setDimensions: function(t, e) {
                this.tt = t, this.nt = e, this.canvas.width = this.shadowCanvas.width = t, this.canvas.height = this.shadowCanvas.height = e;
            },
            ut: function() {
                this.shadowCtx.clearRect(0, 0, this.tt, this.nt), this.ctx.clearRect(0, 0, this.tt, this.nt);
            },
            rt: function(t) {
                this.ft = 0 == t.blur ? 0 : t.blur || t.defaultBlur, t.backgroundColor && (this.canvas.style.backgroundColor = t.backgroundColor), 
                this.tt = this.canvas.width = this.shadowCanvas.width = t.width || this.tt, this.nt = this.canvas.height = this.shadowCanvas.height = t.height || this.nt, 
                this.ht = 255 * (t.opacity || 0), this.lt = 255 * (t.maxOpacity || t.defaultMaxOpacity), 
                this.dt = 255 * (t.minOpacity || t.defaultMinOpacity), this.vt = !!t.useGradientOpacity;
            },
            ot: function(t) {
                for (var e, n, r, i, o, a, s = this.V = t.min, l = this.H = t.max, u = (t = t.data || []).length, c = 1 - this.ft; u--; ) {
                    var h = (d = t[u]).x, f = d.y, p = d.radius, d = (h = h - p, f = f - p, ((d = Math.min(d.value, l)) - s) / (l - s));
                    this.ctx.globalAlpha = d < .01 ? .01 : d, d = this.ctx, r = h, i = f, void 0, a = o = e = p, 
                    1 == (n = c) ? (d.beginPath(), d.arc(r, i, e, 0, 2 * Math.PI, !1), d.fillStyle = "rgba(0,0,0,1)", 
                    d.fill()) : ((n = d.createRadialGradient(r + o, i + a, e * n, r + o, i + a, e)).addColorStop(0, "rgba(0,0,0,1)"), 
                    n.addColorStop(1, "rgba(0,0,0,0)"), d.fillStyle = n, d.fillRect(r, i, 2 * e, 2 * e)), 
                    h < this.$[0] && (this.$[0] = h), f < this.$[1] && (this.$[1] = f), h + 2 * p > this.$[2] && (this.$[2] = h + 2 * p), 
                    f + 2 * p > this.$[3] && (this.$[3] = f + 2 * p);
                }
            },
            st: function() {
                for (var t = this.$[0], e = this.$[1], n = this.$[2] - t, r = this.$[3] - e, i = this.tt, o = this.nt, a = this.ht, s = this.lt, l = this.dt, u = this.vt, c = (i = this.shadowCtx.getImageData(t = t < 0 ? 0 : t, e = e < 0 ? 0 : e, n = i < t + n ? i - t : n, r = o < e + r ? o - e : r)).data, h = c.length, f = this.et, p = 3; p < h; p += 4) {
                    var d = c[p], y = 4 * d;
                    y && (d = 0 < a ? a : d < s ? d < l ? l : d : s, c[p - 3] = f[y], c[p - 2] = f[1 + y], 
                    c[p - 1] = f[2 + y], c[p] = u ? f[3 + y] : d);
                }
                this.ctx.putImageData(i, t, e), this.$ = [ 1e3, 1e3, 0, 0 ];
            },
            getValueAt: function(t) {
                t = this.shadowCtx.getImageData(t.x, t.y, 1, 1).data[3];
                var e = this.H, n = this.V;
                return Math.abs(e - n) * (t / 255) >> 0;
            },
            getDataURL: function() {
                return this.canvas.toDataURL();
            }
        });
        var a, s, l = a = "canvas2d" === e.defaultRenderer ? o : a, u = function() {
            for (var t = {}, e = arguments.length, n = 0; n < e; n++) {
                var r, i = arguments[n];
                for (r in i) t[r] = i[r];
            }
            return t;
        }, c = (h.prototype = {
            on: function(t, e, n) {
                var r = this.cStore;
                r[t] || (r[t] = []), r[t].push(function(t) {
                    return e.call(n, t);
                });
            },
            emit: function(t, e) {
                var n = this.cStore;
                if (n[t]) for (var r = n[t].length, i = 0; i < r; i++) (0, n[t][i])(e);
            }
        }, s = h, f.prototype = {
            addData: function() {
                return this.yt.addData.apply(this.yt, arguments), this;
            },
            removeData: function() {
                return this.yt.removeData && this.yt.removeData.apply(this.yt, arguments), this;
            },
            setData: function() {
                return this.yt.setData.apply(this.yt, arguments), this;
            },
            setDataMax: function() {
                return this.yt.setDataMax.apply(this.yt, arguments), this;
            },
            setDataMin: function() {
                return this.yt.setDataMin.apply(this.yt, arguments), this;
            },
            configure: function(t) {
                return this.bt = u(this.bt, t), this.gt.updateConfig(this.bt), this.J.emit("renderall", this.yt.K()), 
                this;
            },
            repaint: function() {
                return this.J.emit("renderall", this.yt.K()), this;
            },
            getData: function() {
                return this.yt.getData();
            },
            getDataURL: function() {
                return this.gt.getDataURL();
            },
            getValueAt: function(t) {
                return this.yt.getValueAt ? this.yt.getValueAt(t) : this.gt.getValueAt ? this.gt.getValueAt(t) : null;
            }
        }, f);
        function h() {
            this.cStore = {};
        }
        function f() {
            var t, r, i = this.bt = u(e, arguments[0] || {});
            if (this.J = new s(), i.plugin) {
                var o = i.plugin;
                if (!e.plugins[o]) throw new Error("Plugin '" + o + "' not found. Maybe it was not registered.");
                o = e.plugins[o];
                this.gt = new o.renderer(i), this.yt = new o.store(i);
            } else this.gt = new l(i), this.yt = new n(i);
            o = (t = this).gt, i = t.J, r = t.yt, i.on("renderpartial", o.renderPartial, o), 
            i.on("renderall", o.renderAll, o), i.on("extremachange", function(e) {
                t.bt.onExtremaChange && t.bt.onExtremaChange({
                    min: e.min,
                    max: e.max,
                    gradient: t.bt.gradient || t.bt.defaultGradient
                });
            }), r.setCoordinator(i);
        }
        return {
            create: function(t) {
                return new c(t);
            },
            register: function(t, n) {
                e.plugins[t] = n;
            }
        };
    }, t.exports ? t.exports = r() : void 0 !== (n = "function" == typeof (r = r) ? r.call(e, n, e, t) : r) && (t.exports = n);
}, function(t, e, n) {
    var r = t.exports = n(16);
    r.build = "light", r.load = function(t, e, n) {
        return (e = "function" == typeof e ? (n = e, new r.Root()) : e || new r.Root()).load(t, n);
    }, r.loadSync = function(t, e) {
        return (e = e || new r.Root()).loadSync(t);
    }, r.encoder = n(21), r.decoder = n(26), r.verifier = n(27), r.converter = n(28), 
    r.ReflectionObject = n(7), r.Namespace = n(9), r.Root = n(30), r.Enum = n(5), r.Type = n(22), 
    r.Field = n(8), r.OneOf = n(11), r.MapField = n(23), r.Service = n(24), r.Method = n(25), 
    r.Message = n(14), r.wrappers = n(29), r.types = n(10), r.util = n(3), r.ReflectionObject.M(r.Root), 
    r.Namespace.M(r.Type, r.Service, r.Enum), r.Root.M(r.Type), r.Field.M(r.Type);
}, function(t, e, n) {
    e.length = function(t) {
        var e = t.length;
        if (!e) return 0;
        for (var n = 0; 1 < --e % 4 && "=" === t.charAt(e); ) ++n;
        return Math.ceil(3 * t.length) / 4 - n;
    };
    for (var r = new Array(64), i = new Array(123), o = 0; o < 64; ) i[r[o] = o < 26 ? o + 65 : o < 52 ? o + 71 : o < 62 ? o - 4 : o - 59 | 43] = o++;
    e.encode = function(t, e, n) {
        for (var i, o = null, a = [], s = 0, l = 0; e < n; ) {
            var u = t[e++];
            switch (l) {
              case 0:
                a[s++] = r[u >> 2], i = (3 & u) << 4, l = 1;
                break;

              case 1:
                a[s++] = r[i | u >> 4], i = (15 & u) << 2, l = 2;
                break;

              case 2:
                a[s++] = r[i | u >> 6], a[s++] = r[63 & u], l = 0;
            }
            8191 < s && ((o = o || []).push(String.fromCharCode.apply(String, a)), s = 0);
        }
        return l && (a[s++] = r[i], a[s++] = 61, 1 === l) && (a[s++] = 61), o ? (s && o.push(String.fromCharCode.apply(String, a.slice(0, s))), 
        o.join("")) : String.fromCharCode.apply(String, a.slice(0, s));
    };
    var a = "invalid encoding";
    e.decode = function(t, e, n) {
        for (var r, o = n, s = 0, l = 0; l < t.length; ) {
            var u = t.charCodeAt(l++);
            if (61 === u && 1 < s) break;
            if (void 0 === (u = i[u])) throw Error(a);
            switch (s) {
              case 0:
                r = u, s = 1;
                break;

              case 1:
                e[n++] = r << 2 | (48 & u) >> 4, r = u, s = 2;
                break;

              case 2:
                e[n++] = (15 & r) << 4 | (60 & u) >> 2, r = u, s = 3;
                break;

              case 3:
                e[n++] = (3 & r) << 6 | u, s = 0;
            }
        }
        if (1 === s) throw Error(a);
        return n - o;
    }, e.test = function(t) {
        return /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t);
    };
}, function(t, e, n) {
    function r() {
        this.wt = {};
    }
    (t.exports = r).prototype.on = function(t, e, n) {
        return (this.wt[t] || (this.wt[t] = [])).push({
            fn: e,
            ctx: n || this
        }), this;
    }, r.prototype.off = function(t, e) {
        if (void 0 === t) this.wt = {}; else if (void 0 === e) this.wt[t] = []; else for (var n = this.wt[t], r = 0; r < n.length; ) n[r].fn === e ? n.splice(r, 1) : ++r;
        return this;
    }, r.prototype.emit = function(t) {
        var e = this.wt[t];
        if (e) {
            for (var n = [], r = 1; r < arguments.length; ) n.push(arguments[r++]);
            for (r = 0; r < e.length; ) e[r].fn.apply(e[r++].ctx, n);
        }
        return this;
    };
}, function(t, e, n) {
    function r(t) {
        function e(t, e, n, r) {
            var i = e < 0 ? 1 : 0;
            0 === (e = i ? -e : e) ? t(0 < 1 / e ? 0 : 2147483648, n, r) : isNaN(e) ? t(2143289344, n, r) : t(3.4028234663852886e38 < e ? (i << 31 | 2139095040) >>> 0 : e < 1.1754943508222875e-38 ? (i << 31 | Math.round(e / 1.401298464324817e-45)) >>> 0 : (i << 31 | (t = Math.floor(Math.log(e) / Math.LN2)) + 127 << 23 | 8388607 & Math.round(e * Math.pow(2, -t) * 8388608)) >>> 0, n, r);
        }
        function n(t, e, n) {
            return e = 2 * ((t = t(e, n)) >> 31) + 1, n = t >>> 23 & 255, t &= 8388607, 255 == n ? t ? NaN : 1 / 0 * e : 0 == n ? 1.401298464324817e-45 * e * t : e * Math.pow(2, n - 150) * (8388608 + t);
        }
        function r(t, e, n) {
            h[0] = t, e[n] = f[0], e[n + 1] = f[1], e[n + 2] = f[2], e[n + 3] = f[3];
        }
        function l(t, e, n) {
            h[0] = t, e[n] = f[3], e[n + 1] = f[2], e[n + 2] = f[1], e[n + 3] = f[0];
        }
        function u(t, e) {
            return f[0] = t[e], f[1] = t[e + 1], f[2] = t[e + 2], f[3] = t[e + 3], h[0];
        }
        function c(t, e) {
            return f[3] = t[e], f[2] = t[e + 1], f[1] = t[e + 2], f[0] = t[e + 3], h[0];
        }
        var h, f, p, d, y;
        function m(t, e, n, r, i, o) {
            var a, s, l = r < 0 ? 1 : 0;
            0 === (r = l ? -r : r) ? (t(0, i, o + e), t(0 < 1 / r ? 0 : 2147483648, i, o + n)) : isNaN(r) ? (t(0, i, o + e), 
            t(2146959360, i, o + n)) : 1.7976931348623157e308 < r ? (t(0, i, o + e), t((l << 31 | 2146435072) >>> 0, i, o + n)) : r < 2.2250738585072014e-308 ? (t((a = r / 5e-324) >>> 0, i, o + e), 
            t((l << 31 | a / 4294967296) >>> 0, i, o + n)) : (1024 === (s = Math.floor(Math.log(r) / Math.LN2)) && (s = 1023), 
            t(4503599627370496 * (a = r * Math.pow(2, -s)) >>> 0, i, o + e), t((l << 31 | s + 1023 << 20 | 1048576 * a & 1048575) >>> 0, i, o + n));
        }
        function v(t, e, n, r, i) {
            return e = t(r, i + e), r = 2 * ((t = t(r, i + n)) >> 31) + 1, n = 4294967296 * (1048575 & t) + e, 
            2047 == (i = t >>> 20 & 2047) ? n ? NaN : 1 / 0 * r : 0 == i ? 5e-324 * r * n : r * Math.pow(2, i - 1075) * (n + 4503599627370496);
        }
        function g(t, e, n) {
            p[0] = t, e[n] = d[0], e[n + 1] = d[1], e[n + 2] = d[2], e[n + 3] = d[3], e[n + 4] = d[4], 
            e[n + 5] = d[5], e[n + 6] = d[6], e[n + 7] = d[7];
        }
        function b(t, e, n) {
            p[0] = t, e[n] = d[7], e[n + 1] = d[6], e[n + 2] = d[5], e[n + 3] = d[4], e[n + 4] = d[3], 
            e[n + 5] = d[2], e[n + 6] = d[1], e[n + 7] = d[0];
        }
        function x(t, e) {
            return d[0] = t[e], d[1] = t[e + 1], d[2] = t[e + 2], d[3] = t[e + 3], d[4] = t[e + 4], 
            d[5] = t[e + 5], d[6] = t[e + 6], d[7] = t[e + 7], p[0];
        }
        function w(t, e) {
            return d[7] = t[e], d[6] = t[e + 1], d[5] = t[e + 2], d[4] = t[e + 3], d[3] = t[e + 4], 
            d[2] = t[e + 5], d[1] = t[e + 6], d[0] = t[e + 7], p[0];
        }
        return "undefined" != typeof Float32Array ? (h = new Float32Array([ -0 ]), y = 128 === (f = new Uint8Array(h.buffer))[3], 
        t.writeFloatLE = y ? r : l, t.writeFloatBE = y ? l : r, t.readFloatLE = y ? u : c, 
        t.readFloatBE = y ? c : u) : (t.writeFloatLE = e.bind(null, i), t.writeFloatBE = e.bind(null, o), 
        t.readFloatLE = n.bind(null, a), t.readFloatBE = n.bind(null, s)), "undefined" != typeof Float64Array ? (p = new Float64Array([ -0 ]), 
        y = 128 === (d = new Uint8Array(p.buffer))[7], t.writeDoubleLE = y ? g : b, t.writeDoubleBE = y ? b : g, 
        t.readDoubleLE = y ? x : w, t.readDoubleBE = y ? w : x) : (t.writeDoubleLE = m.bind(null, i, 0, 4), 
        t.writeDoubleBE = m.bind(null, o, 4, 0), t.readDoubleLE = v.bind(null, a, 0, 4), 
        t.readDoubleBE = v.bind(null, s, 4, 0)), t;
    }
    function i(t, e, n) {
        e[n] = 255 & t, e[n + 1] = t >>> 8 & 255, e[n + 2] = t >>> 16 & 255, e[n + 3] = t >>> 24;
    }
    function o(t, e, n) {
        e[n] = t >>> 24, e[n + 1] = t >>> 16 & 255, e[n + 2] = t >>> 8 & 255, e[n + 3] = 255 & t;
    }
    function a(t, e) {
        return (t[e] | t[e + 1] << 8 | t[e + 2] << 16 | t[e + 3] << 24) >>> 0;
    }
    function s(t, e) {
        return (t[e] << 24 | t[e + 1] << 16 | t[e + 2] << 8 | t[e + 3]) >>> 0;
    }
    t.exports = r(r);
}, function(t, e, n) {
    e.length = function(t) {
        for (var e, n = 0, r = 0; r < t.length; ++r) (e = t.charCodeAt(r)) < 128 ? n += 1 : e < 2048 ? n += 2 : 55296 == (64512 & e) && 56320 == (64512 & t.charCodeAt(r + 1)) ? (++r, 
        n += 4) : n += 3;
        return n;
    }, e.read = function(t, e, n) {
        if (n - e < 1) return "";
        for (var r, i = null, o = [], a = 0; e < n; ) (r = t[e++]) < 128 ? o[a++] = r : 191 < r && r < 224 ? o[a++] = (31 & r) << 6 | 63 & t[e++] : 239 < r && r < 365 ? (r = ((7 & r) << 18 | (63 & t[e++]) << 12 | (63 & t[e++]) << 6 | 63 & t[e++]) - 65536, 
        o[a++] = 55296 + (r >> 10), o[a++] = 56320 + (1023 & r)) : o[a++] = (15 & r) << 12 | (63 & t[e++]) << 6 | 63 & t[e++], 
        8191 < a && ((i = i || []).push(String.fromCharCode.apply(String, o)), a = 0);
        return i ? (a && i.push(String.fromCharCode.apply(String, o.slice(0, a))), i.join("")) : String.fromCharCode.apply(String, o.slice(0, a));
    }, e.write = function(t, e, n) {
        for (var r, i, o = n, a = 0; a < t.length; ++a) (r = t.charCodeAt(a)) < 128 ? e[n++] = r : (r < 2048 ? e[n++] = r >> 6 | 192 : (55296 == (64512 & r) && 56320 == (64512 & (i = t.charCodeAt(a + 1))) ? (++a, 
        e[n++] = (r = 65536 + ((1023 & r) << 10) + (1023 & i)) >> 18 | 240, e[n++] = r >> 12 & 63 | 128) : e[n++] = r >> 12 | 224, 
        e[n++] = r >> 6 & 63 | 128), e[n++] = 63 & r | 128);
        return n - o;
    };
}, function(t, e, n) {
    t.exports = function(t, e, n) {
        var r = n || 8192, i = r >>> 1, o = null, a = r;
        return function(n) {
            return n < 1 || i < n ? t(n) : (r < a + n && (o = t(r), a = 0), n = e.call(o, a, a += n), 
            7 & a && (a = 1 + (7 | a)), n);
        };
    };
}, function(t, e, n) {
    t.exports = i;
    var r = n(4);
    function i(t, e) {
        this.lo = t >>> 0, this.hi = e >>> 0;
    }
    var o = i.zero = new i(0, 0), a = (o.toNumber = function() {
        return 0;
    }, o.zzEncode = o.zzDecode = function() {
        return this;
    }, o.length = function() {
        return 1;
    }, i.zeroHash = "\0\0\0\0\0\0\0\0", i.fromNumber = function(t) {
        var e, n;
        return 0 === t ? o : (n = (t = (e = t < 0) ? -t : t) >>> 0, t = (t - n) / 4294967296 >>> 0, 
        e && (t = ~t >>> 0, n = ~n >>> 0, 4294967295 < ++n) && (n = 0, 4294967295 < ++t) && (t = 0), 
        new i(n, t));
    }, i.from = function(t) {
        if ("number" == typeof t) return i.fromNumber(t);
        if (r.isString(t)) {
            if (!r.Long) return i.fromNumber(parseInt(t, 10));
            t = r.Long.fromString(t);
        }
        return t.low || t.high ? new i(t.low >>> 0, t.high >>> 0) : o;
    }, i.prototype.toNumber = function(t) {
        var e;
        return !t && this.hi >>> 31 ? (t = 1 + ~this.lo >>> 0, e = ~this.hi >>> 0, -(t + 4294967296 * (e = t ? e : e + 1 >>> 0))) : this.lo + 4294967296 * this.hi;
    }, i.prototype.toLong = function(t) {
        return r.Long ? new r.Long(0 | this.lo, 0 | this.hi, Boolean(t)) : {
            low: 0 | this.lo,
            high: 0 | this.hi,
            unsigned: Boolean(t)
        };
    }, String.prototype.charCodeAt);
    i.fromHash = function(t) {
        return "\0\0\0\0\0\0\0\0" === t ? o : new i((a.call(t, 0) | a.call(t, 1) << 8 | a.call(t, 2) << 16 | a.call(t, 3) << 24) >>> 0, (a.call(t, 4) | a.call(t, 5) << 8 | a.call(t, 6) << 16 | a.call(t, 7) << 24) >>> 0);
    }, i.prototype.toHash = function() {
        return String.fromCharCode(255 & this.lo, this.lo >>> 8 & 255, this.lo >>> 16 & 255, this.lo >>> 24, 255 & this.hi, this.hi >>> 8 & 255, this.hi >>> 16 & 255, this.hi >>> 24);
    }, i.prototype.zzEncode = function() {
        var t = this.hi >> 31;
        return this.hi = ((this.hi << 1 | this.lo >>> 31) ^ t) >>> 0, this.lo = (this.lo << 1 ^ t) >>> 0, 
        this;
    }, i.prototype.zzDecode = function() {
        var t = -(1 & this.lo);
        return this.lo = ((this.lo >>> 1 | this.hi << 31) ^ t) >>> 0, this.hi = (this.hi >>> 1 ^ t) >>> 0, 
        this;
    }, i.prototype.length = function() {
        var t = this.lo, e = (this.lo >>> 28 | this.hi << 4) >>> 0, n = this.hi >>> 24;
        return 0 == n ? 0 == e ? t < 16384 ? t < 128 ? 1 : 2 : t < 2097152 ? 3 : 4 : e < 16384 ? e < 128 ? 5 : 6 : e < 2097152 ? 7 : 8 : n < 128 ? 9 : 10;
    };
}, function(t, e, n) {
    t.exports = o;
    var r = n(12), i = ((o.prototype = Object.create(r.prototype)).constructor = o, 
    n(4));
    function o() {
        r.call(this);
    }
    function a(t, e, n) {
        t.length < 40 ? i.utf8.write(t, e, n) : e.utf8Write ? e.utf8Write(t, n) : e.write(t, n);
    }
    o.M = function() {
        o.alloc = i.S, o.writeBytesBuffer = i.Buffer && i.Buffer.prototype instanceof Uint8Array && "set" === i.Buffer.prototype.set.name ? function(t, e, n) {
            e.set(t, n);
        } : function(t, e, n) {
            if (t.copy) t.copy(e, n, 0, t.length); else for (var r = 0; r < t.length; ) e[n++] = t[r++];
        };
    }, o.prototype.bytes = function(t) {
        var e = (t = i.isString(t) ? i._(t, "base64") : t).length >>> 0;
        return this.uint32(e), e && this.k(o.writeBytesBuffer, e, t), this;
    }, o.prototype.string = function(t) {
        var e = i.Buffer.byteLength(t);
        return this.uint32(e), e && this.k(a, e, t), this;
    }, o.M();
}, function(t, e, n) {
    t.exports = o;
    var r = n(13), i = ((o.prototype = Object.create(r.prototype)).constructor = o, 
    n(4));
    function o(t) {
        r.call(this, t);
    }
    o.M = function() {
        i.Buffer && (o.prototype.A = i.Buffer.prototype.slice);
    }, o.prototype.string = function() {
        var t = this.uint32();
        return this.buf.utf8Slice ? this.buf.utf8Slice(this.pos, this.pos = Math.min(this.pos + t, this.len)) : this.buf.toString("utf-8", this.pos, this.pos = Math.min(this.pos + t, this.len));
    }, o.M();
}, function(t, e, n) {
    t.exports = i;
    var r = n(4);
    function i(t, e, n) {
        if ("function" != typeof t) throw TypeError("rpcImpl must be a function");
        r.EventEmitter.call(this), this.rpcImpl = t, this.requestDelimited = Boolean(e), 
        this.responseDelimited = Boolean(n);
    }
    ((i.prototype = Object.create(r.EventEmitter.prototype)).constructor = i).prototype.rpcCall = function t(e, n, i, o, a) {
        if (!o) throw TypeError("request must be specified");
        var s = this;
        if (!a) return r.asPromise(t, s, e, n, i, o);
        if (s.rpcImpl) try {
            return s.rpcImpl(e, n[s.requestDelimited ? "encodeDelimited" : "encode"](o).finish(), function(t, n) {
                if (t) return s.emit("error", t, e), a(t);
                if (null !== n) {
                    if (!(n instanceof i)) try {
                        n = i[s.responseDelimited ? "decodeDelimited" : "decode"](n);
                    } catch (t) {
                        return s.emit("error", t, e), a(t);
                    }
                    return s.emit("data", n, e), a(null, n);
                }
                s.end(!0);
            });
        } catch (t) {
            s.emit("error", t, e), setTimeout(function() {
                a(t);
            }, 0);
        } else setTimeout(function() {
            a(Error("already ended"));
        }, 0);
    }, i.prototype.end = function(t) {
        return this.rpcImpl && (t || this.rpcImpl(null, null, null), this.rpcImpl = null, 
        this.emit("end").off()), this;
    };
}, function(t, e, n) {
    (t.exports = function(t, e) {
        "string" == typeof t && (e = t, t = void 0);
        var n = [];
        function r(t) {
            if ("string" != typeof t) {
                var e = "return " + i();
                if (t) {
                    for (var o = Object.keys(t), a = new Array(o.length + 1), s = new Array(o.length), l = 0; l < o.length; ) a[l] = o[l], 
                    s[l] = t[o[l++]];
                    return a[l] = e, Function.apply(null, a).apply(null, s);
                }
                return Function(e)();
            }
            for (var u = new Array(arguments.length - 1), c = 0; c < u.length; ) u[c] = arguments[++c];
            if (c = 0, t = t.replace(/%([%dfijs])/g, function(t, e) {
                var n = u[c++];
                switch (e) {
                  case "d":
                  case "f":
                    return String(Number(n));

                  case "i":
                    return String(Math.floor(n));

                  case "j":
                    return JSON.stringify(n);

                  case "s":
                    return String(n);
                }
                return "%";
            }), c !== u.length) throw Error("parameter count mismatch");
            return n.push(t), r;
        }
        function i(r) {
            return "function " + (r || e || "") + "(" + (t && t.join(",") || "") + "){\n  " + n.join("\n  ") + "\n}";
        }
        return r.toString = i, r;
    }).verbose = !1;
}, function(t, e, n) {
    t.exports = o;
    var r = n(17), i = n(18)("fs");
    function o(t, e, n) {
        return e = "function" == typeof e ? (n = e, {}) : e || {}, n ? !e.xhr && i && i.readFile ? i.readFile(t, function(r, i) {
            return r && "undefined" != typeof XMLHttpRequest ? o.xhr(t, e, n) : r ? n(r) : n(null, e.binary ? i : i.toString("utf8"));
        }) : o.xhr(t, e, n) : r(o, this, t, e);
    }
    o.xhr = function(t, e, n) {
        var r = new XMLHttpRequest();
        r.onreadystatechange = function() {
            if (4 === r.readyState) {
                if (0 !== r.status && 200 !== r.status) return n(Error("status " + r.status));
                if (e.binary) {
                    if (!(t = r.response)) for (var t = [], i = 0; i < r.responseText.length; ++i) t.push(255 & r.responseText.charCodeAt(i));
                    return n(null, "undefined" != typeof Uint8Array ? new Uint8Array(t) : t);
                }
                return n(null, r.responseText);
            }
        }, e.binary && ("overrideMimeType" in r && r.overrideMimeType("text/plain; charset=x-user-defined"), 
        r.responseType = "arraybuffer"), r.open("GET", t), r.send();
    };
}, function(t, e, n) {
    var r = e.isAbsolute = function(t) {
        return /^(?:\/|\w+:)/.test(t);
    }, i = e.normalize = function(t) {
        var e = (t = t.replace(/\\/g, "/").replace(/\/{2,}/g, "/")).split("/"), n = r(t);
        t = "";
        n && (t = e.shift() + "/");
        for (var i = 0; i < e.length; ) ".." === e[i] ? 0 < i && ".." !== e[i - 1] ? e.splice(--i, 2) : n ? e.splice(i, 1) : ++i : "." === e[i] ? e.splice(i, 1) : ++i;
        return t + e.join("/");
    };
    e.resolve = function(t, e, n) {
        return n || (e = i(e)), !r(e) && (t = (t = n ? t : i(t)).replace(/(?:\/|^)[^/]+$/, "")).length ? i(t + "/" + e) : e;
    };
}, function(t, e, n) {
    var r = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
    t.exports = function(t) {
        if (0 === arguments.length) throw new TypeError("1 argument required, but only 0 present.");
        if ((t = (t = (t = "" + t).replace(/[ \t\n\f\r]/g, "")).length % 4 == 0 ? t.replace(/==?$/, "") : t).length % 4 == 1 || /[^+/0-9A-Za-z]/.test(t)) return null;
        for (var e = "", n = 0, i = 0, o = 0; o < t.length; o++) n = (n <<= 6) | function(t) {
            return (t = r.indexOf(t)) < 0 ? void 0 : t;
        }(t[o]), 24 === (i += 6) && (e = (e = (e += String.fromCharCode((16711680 & n) >> 16)) + String.fromCharCode((65280 & n) >> 8)) + String.fromCharCode(255 & n), 
        n = i = 0);
        return 12 === i ? (n >>= 4, e += String.fromCharCode(n)) : 18 === i && (n >>= 2, 
        e = (e += String.fromCharCode((65280 & n) >> 8)) + String.fromCharCode(255 & n)), 
        e;
    };
}, function(t, e, n) {
    var r = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
    t.exports = function(t) {
        if (0 === arguments.length) throw new TypeError("1 argument required, but only 0 present.");
        var e;
        for (t = "" + t, e = 0; e < t.length; e++) if (255 < t.charCodeAt(e)) return null;
        var n = "";
        for (e = 0; e < t.length; e += 3) {
            var i = [ void 0, void 0, void 0, void 0 ];
            i[0] = t.charCodeAt(e) >> 2, i[1] = (3 & t.charCodeAt(e)) << 4, t.length > e + 1 && (i[1] |= t.charCodeAt(e + 1) >> 4, 
            i[2] = (15 & t.charCodeAt(e + 1)) << 2), t.length > e + 2 && (i[2] |= t.charCodeAt(e + 2) >> 6, 
            i[3] = 63 & t.charCodeAt(e + 2));
            for (var o = 0; o < i.length; o++) void 0 === i[o] ? n += "=" : n += function(t) {
                if (0 <= t && t < 64) return r[t];
            }(i[o]);
        }
        return n;
    };
}, function(t, e, n) {
    n.r(e);
    var r = {};
    n.r(r), n.d(r, "ShadowMaterial", function() {
        return $u;
    }), n.d(r, "SpriteMaterial", function() {
        return Cl;
    }), n.d(r, "RawShaderMaterial", function() {
        return Fl;
    }), n.d(r, "ShaderMaterial", function() {
        return Ur;
    }), n.d(r, "PointsMaterial", function() {
        return tc;
    }), n.d(r, "MeshPhysicalMaterial", function() {
        return nc;
    }), n.d(r, "MeshStandardMaterial", function() {
        return ec;
    }), n.d(r, "MeshPhongMaterial", function() {
        return rc;
    }), n.d(r, "MeshToonMaterial", function() {
        return ic;
    }), n.d(r, "MeshNormalMaterial", function() {
        return oc;
    }), n.d(r, "MeshLambertMaterial", function() {
        return ac;
    }), n.d(r, "MeshDepthMaterial", function() {
        return sa;
    }), n.d(r, "MeshDistanceMaterial", function() {
        return la;
    }), n.d(r, "MeshBasicMaterial", function() {
        return Qr;
    }), n.d(r, "MeshMatcapMaterial", function() {
        return sc;
    }), n.d(r, "LineDashedMaterial", function() {
        return lc;
    }), n.d(r, "LineBasicMaterial", function() {
        return Nl;
    }), n.d(r, "Material", function() {
        return Cr;
    });
    for (var i = "v3.1.6", o = [], a = 0; a < 256; a++) o[a] = (a < 16 ? "0" : "") + a.toString(16);
    var s = {
        DEG2RAD: Math.PI / 180,
        RAD2DEG: 180 / Math.PI,
        generateUUID: function() {
            var t = 4294967295 * Math.random() | 0, e = 4294967295 * Math.random() | 0, n = 4294967295 * Math.random() | 0, r = 4294967295 * Math.random() | 0;
            return (o[255 & t] + o[t >> 8 & 255] + o[t >> 16 & 255] + o[t >> 24 & 255] + "-" + o[255 & e] + o[e >> 8 & 255] + "-" + o[e >> 16 & 15 | 64] + o[e >> 24 & 255] + "-" + o[63 & n | 128] + o[n >> 8 & 255] + "-" + o[n >> 16 & 255] + o[n >> 24 & 255] + o[255 & r] + o[r >> 8 & 255] + o[r >> 16 & 255] + o[r >> 24 & 255]).toUpperCase();
        },
        clamp: function(t, e, n) {
            return Math.max(e, Math.min(n, t));
        },
        euclideanModulo: function(t, e) {
            return (t % e + e) % e;
        },
        mapLinear: function(t, e, n, r, i) {
            return r + (t - e) * (i - r) / (n - e);
        },
        lerp: function(t, e, n) {
            return (1 - n) * t + n * e;
        },
        smoothstep: function(t, e, n) {
            return t <= e ? 0 : n <= t ? 1 : (t = (t - e) / (n - e)) * t * (3 - 2 * t);
        },
        smootherstep: function(t, e, n) {
            return t <= e ? 0 : n <= t ? 1 : (t = (t - e) / (n - e)) * t * t * (t * (6 * t - 15) + 10);
        },
        randInt: function(t, e) {
            return t + Math.floor(Math.random() * (e - t + 1));
        },
        randFloat: function(t, e) {
            return t + Math.random() * (e - t);
        },
        randFloatSpread: function(t) {
            return t * (.5 - Math.random());
        },
        degToRad: function(t) {
            return t * s.DEG2RAD;
        },
        radToDeg: function(t) {
            return t * s.RAD2DEG;
        },
        isPowerOfTwo: function(t) {
            return 0 == (t & t - 1) && 0 !== t;
        },
        ceilPowerOfTwo: function(t) {
            return Math.pow(2, Math.ceil(Math.log(t) / Math.LN2));
        },
        floorPowerOfTwo: function(t) {
            return Math.pow(2, Math.floor(Math.log(t) / Math.LN2));
        },
        setQuaternionFromProperEuler: function(t, e, n, r, i) {
            var o = Math.cos, a = Math.sin, s = o(n / 2), l = (n = a(n / 2), o((e + r) / 2)), u = a((e + r) / 2), c = o((e - r) / 2), h = a((e - r) / 2);
            o = o((r - e) / 2), a = a((r - e) / 2);
            "XYX" === i ? t.set(s * u, n * c, n * h, s * l) : "YZY" === i ? t.set(n * h, s * u, n * c, s * l) : "ZXZ" === i ? t.set(n * c, n * h, s * u, s * l) : "XZX" === i ? t.set(s * u, n * a, n * o, s * l) : "YXY" === i ? t.set(n * o, s * u, n * a, s * l) : "ZYZ" === i ? t.set(n * a, n * o, s * u, s * l) : console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order.");
        }
    };
    function l(t, e, n, r) {
        this._t = t || 0, this.St = e || 0, this.xt = n || 0, this.Et = void 0 !== r ? r : 1;
    }
    Object.assign(l, {
        slerp: function(t, e, n, r) {
            return n.copy(t).slerp(e, r);
        },
        slerpFlat: function(t, e, n, r, i, o, a) {
            var s, l, u, c = n[r + 0], h = n[r + 1], f = n[r + 2], p = (n = n[r + 3], r = i[o + 0], 
            i[o + 1]), d = i[o + 2];
            n === (i = i[o + 3]) && c === r && h === p && f === d || (o = 1 - a, s = 0 <= (l = c * r + h * p + f * d + n * i) ? 1 : -1, 
            (u = 1 - l * l) > Number.EPSILON && (u = Math.sqrt(u), l = Math.atan2(u, l * s), 
            o = Math.sin(o * l) / u, a = Math.sin(a * l) / u), c = c * o + r * (l = a * s), 
            h = h * o + p * l, f = f * o + d * l, n = n * o + i * l, o === 1 - a && (c *= u = 1 / Math.sqrt(c * c + h * h + f * f + n * n), 
            h *= u, f *= u, n *= u)), t[e] = c, t[e + 1] = h, t[e + 2] = f, t[e + 3] = n;
        }
    }), Object.defineProperties(l.prototype, {
        x: {
            get: function() {
                return this._t;
            },
            set: function(t) {
                this._t = t, this.Mt();
            }
        },
        y: {
            get: function() {
                return this.St;
            },
            set: function(t) {
                this.St = t, this.Mt();
            }
        },
        z: {
            get: function() {
                return this.xt;
            },
            set: function(t) {
                this.xt = t, this.Mt();
            }
        },
        w: {
            get: function() {
                return this.Et;
            },
            set: function(t) {
                this.Et = t, this.Mt();
            }
        }
    }), Object.assign(l.prototype, {
        isQuaternion: !0,
        set: function(t, e, n, r) {
            return this._t = t, this.St = e, this.xt = n, this.Et = r, this.Mt(), this;
        },
        clone: function() {
            return new this.constructor(this._t, this.St, this.xt, this.Et);
        },
        copy: function(t) {
            return this._t = t.x, this.St = t.y, this.xt = t.z, this.Et = t.w, this.Mt(), this;
        },
        setFromEuler: function(t, e) {
            var n, r, i, o, a, s, l;
            if (t && t.isEuler) return a = t._t, s = t.St, n = t.xt, t = t.order, o = Math.cos, 
            l = Math.sin, r = o(a / 2), i = o(s / 2), o = o(n / 2), a = l(a / 2), s = l(s / 2), 
            l = l(n / 2), "XYZ" === t ? (this._t = a * i * o + r * s * l, this.St = r * s * o - a * i * l, 
            this.xt = r * i * l + a * s * o, this.Et = r * i * o - a * s * l) : "YXZ" === t ? (this._t = a * i * o + r * s * l, 
            this.St = r * s * o - a * i * l, this.xt = r * i * l - a * s * o, this.Et = r * i * o + a * s * l) : "ZXY" === t ? (this._t = a * i * o - r * s * l, 
            this.St = r * s * o + a * i * l, this.xt = r * i * l + a * s * o, this.Et = r * i * o - a * s * l) : "ZYX" === t ? (this._t = a * i * o - r * s * l, 
            this.St = r * s * o + a * i * l, this.xt = r * i * l - a * s * o, this.Et = r * i * o + a * s * l) : "YZX" === t ? (this._t = a * i * o + r * s * l, 
            this.St = r * s * o + a * i * l, this.xt = r * i * l - a * s * o, this.Et = r * i * o - a * s * l) : "XZY" === t && (this._t = a * i * o - r * s * l, 
            this.St = r * s * o - a * i * l, this.xt = r * i * l + a * s * o, this.Et = r * i * o + a * s * l), 
            !1 !== e && this.Mt(), this;
            throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");
        },
        setFromAxisAngle: function(t, e) {
            e /= 2;
            var n = Math.sin(e);
            return this._t = t.x * n, this.St = t.y * n, this.xt = t.z * n, this.Et = Math.cos(e), 
            this.Mt(), this;
        },
        setFromRotationMatrix: function(t) {
            var e, n = (t = t.elements)[0], r = t[4], i = t[8], o = t[1], a = t[5], s = t[9], l = t[2], u = t[6], c = n + a + (t = t[10]);
            return 0 < c ? (e = .5 / Math.sqrt(c + 1), this.Et = .25 / e, this._t = (u - s) * e, 
            this.St = (i - l) * e, this.xt = (o - r) * e) : a < n && t < n ? (e = 2 * Math.sqrt(1 + n - a - t), 
            this.Et = (u - s) / e, this._t = .25 * e, this.St = (r + o) / e, this.xt = (i + l) / e) : t < a ? (e = 2 * Math.sqrt(1 + a - n - t), 
            this.Et = (i - l) / e, this._t = (r + o) / e, this.St = .25 * e, this.xt = (s + u) / e) : (e = 2 * Math.sqrt(1 + t - n - a), 
            this.Et = (o - r) / e, this._t = (i + l) / e, this.St = (s + u) / e, this.xt = .25 * e), 
            this.Mt(), this;
        },
        setFromUnitVectors: function(t, e) {
            var n = t.dot(e) + 1;
            return n < 1e-6 ? (n = 0, Math.abs(t.x) > Math.abs(t.z) ? (this._t = -t.y, this.St = t.x, 
            this.xt = 0) : (this._t = 0, this.St = -t.z, this.xt = t.y)) : (this._t = t.y * e.z - t.z * e.y, 
            this.St = t.z * e.x - t.x * e.z, this.xt = t.x * e.y - t.y * e.x), this.Et = n, 
            this.normalize();
        },
        angleTo: function(t) {
            return 2 * Math.acos(Math.abs(s.clamp(this.dot(t), -1, 1)));
        },
        rotateTowards: function(t, e) {
            var n = this.angleTo(t);
            return 0 !== n && (e = Math.min(1, e / n), this.slerp(t, e)), this;
        },
        inverse: function() {
            return this.conjugate();
        },
        conjugate: function() {
            return this._t *= -1, this.St *= -1, this.xt *= -1, this.Mt(), this;
        },
        dot: function(t) {
            return this._t * t._t + this.St * t.St + this.xt * t.xt + this.Et * t.Et;
        },
        lengthSq: function() {
            return this._t * this._t + this.St * this.St + this.xt * this.xt + this.Et * this.Et;
        },
        length: function() {
            return Math.sqrt(this._t * this._t + this.St * this.St + this.xt * this.xt + this.Et * this.Et);
        },
        normalize: function() {
            var t = this.length();
            return 0 === t ? (this._t = 0, this.St = 0, this.xt = 0, this.Et = 1) : (this._t = this._t * (t = 1 / t), 
            this.St = this.St * t, this.xt = this.xt * t, this.Et = this.Et * t), this.Mt(), 
            this;
        },
        multiply: function(t, e) {
            return void 0 !== e ? (console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."), 
            this.multiplyQuaternions(t, e)) : this.multiplyQuaternions(this, t);
        },
        premultiply: function(t) {
            return this.multiplyQuaternions(t, this);
        },
        multiplyQuaternions: function(t, e) {
            var n = t._t, r = t.St, i = t.xt, o = (t = t.Et, e._t), a = e.St, s = e.xt;
            e = e.Et;
            return this._t = n * e + t * o + r * s - i * a, this.St = r * e + t * a + i * o - n * s, 
            this.xt = i * e + t * s + n * a - r * o, this.Et = t * e - n * o - r * a - i * s, 
            this.Mt(), this;
        },
        slerp: function(t, e) {
            if (0 !== e) {
                if (1 === e) return this.copy(t);
                var n, r = this._t, i = this.St, o = this.xt, a = this.Et, s = a * t.Et + r * t._t + i * t.St + o * t.xt;
                s < 0 ? (this.Et = -t.Et, this._t = -t._t, this.St = -t.St, this.xt = -t.xt, s = -s) : this.copy(t), 
                1 <= s ? (this.Et = a, this._t = r, this.St = i, this.xt = o) : ((t = 1 - s * s) <= Number.EPSILON ? (this.Et = (n = 1 - e) * a + e * this.Et, 
                this._t = n * r + e * this._t, this.St = n * i + e * this.St, this.xt = n * o + e * this.xt, 
                this.normalize()) : (n = Math.sqrt(t), t = Math.atan2(n, s), s = Math.sin((1 - e) * t) / n, 
                e = Math.sin(e * t) / n, this.Et = a * s + this.Et * e, this._t = r * s + this._t * e, 
                this.St = i * s + this.St * e, this.xt = o * s + this.xt * e), this.Mt());
            }
            return this;
        },
        equals: function(t) {
            return t._t === this._t && t.St === this.St && t.xt === this.xt && t.Et === this.Et;
        },
        fromArray: function(t, e) {
            return this._t = t[e = void 0 === e ? 0 : e], this.St = t[e + 1], this.xt = t[e + 2], 
            this.Et = t[e + 3], this.Mt(), this;
        },
        toArray: function(t, e) {
            return (t = void 0 === t ? [] : t)[e = void 0 === e ? 0 : e] = this._t, t[e + 1] = this.St, 
            t[e + 2] = this.xt, t[e + 3] = this.Et, t;
        },
        fromBufferAttribute: function(t, e) {
            return this._t = t.getX(e), this.St = t.getY(e), this.xt = t.getZ(e), this.Et = t.getW(e), 
            this;
        },
        Ot: function(t) {
            return this.Mt = t, this;
        },
        Mt: function() {}
    });
    var u = new h(), c = new l();
    function h(t, e, n) {
        this.x = t || 0, this.y = e || 0, this.z = n || 0;
    }
    Object.assign(h.prototype, {
        isVector3: !0,
        set: function(t, e, n) {
            return this.x = t, this.y = e, this.z = n, this;
        },
        setScalar: function(t) {
            return this.x = t, this.y = t, this.z = t, this;
        },
        setX: function(t) {
            return this.x = t, this;
        },
        setY: function(t) {
            return this.y = t, this;
        },
        setZ: function(t) {
            return this.z = t, this;
        },
        setComponent: function(t, e) {
            switch (t) {
              case 0:
                this.x = e;
                break;

              case 1:
                this.y = e;
                break;

              case 2:
                this.z = e;
                break;

              default:
                throw new Error("index is out of range: " + t);
            }
            return this;
        },
        getComponent: function(t) {
            switch (t) {
              case 0:
                return this.x;

              case 1:
                return this.y;

              case 2:
                return this.z;

              default:
                throw new Error("index is out of range: " + t);
            }
        },
        clone: function() {
            return new this.constructor(this.x, this.y, this.z);
        },
        copy: function(t) {
            return this.x = t.x, this.y = t.y, this.z = t.z, this;
        },
        add: function(t, e) {
            return void 0 !== e ? (console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), 
            this.addVectors(t, e)) : (this.x += t.x, this.y += t.y, this.z += t.z, this);
        },
        addScalar: function(t) {
            return this.x += t, this.y += t, this.z += t, this;
        },
        addVectors: function(t, e) {
            return this.x = t.x + e.x, this.y = t.y + e.y, this.z = t.z + e.z, this;
        },
        addScaledVector: function(t, e) {
            return this.x += t.x * e, this.y += t.y * e, this.z += t.z * e, this;
        },
        sub: function(t, e) {
            return void 0 !== e ? (console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), 
            this.subVectors(t, e)) : (this.x -= t.x, this.y -= t.y, this.z -= t.z, this);
        },
        subScalar: function(t) {
            return this.x -= t, this.y -= t, this.z -= t, this;
        },
        subVectors: function(t, e) {
            return this.x = t.x - e.x, this.y = t.y - e.y, this.z = t.z - e.z, this;
        },
        multiply: function(t, e) {
            return void 0 !== e ? (console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."), 
            this.multiplyVectors(t, e)) : (this.x *= t.x, this.y *= t.y, this.z *= t.z, this);
        },
        multiplyScalar: function(t) {
            return this.x *= t, this.y *= t, this.z *= t, this;
        },
        multiplyVectors: function(t, e) {
            return this.x = t.x * e.x, this.y = t.y * e.y, this.z = t.z * e.z, this;
        },
        applyEuler: function(t) {
            return t && t.isEuler || console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."), 
            this.applyQuaternion(c.setFromEuler(t));
        },
        applyAxisAngle: function(t, e) {
            return this.applyQuaternion(c.setFromAxisAngle(t, e));
        },
        applyMatrix3: function(t) {
            var e = this.x, n = this.y, r = this.z;
            t = t.elements;
            return this.x = t[0] * e + t[3] * n + t[6] * r, this.y = t[1] * e + t[4] * n + t[7] * r, 
            this.z = t[2] * e + t[5] * n + t[8] * r, this;
        },
        applyNormalMatrix: function(t) {
            return this.applyMatrix3(t).normalize();
        },
        applyMatrix4: function(t) {
            var e = this.x, n = this.y, r = this.z, i = 1 / ((t = t.elements)[3] * e + t[7] * n + t[11] * r + t[15]);
            return this.x = (t[0] * e + t[4] * n + t[8] * r + t[12]) * i, this.y = (t[1] * e + t[5] * n + t[9] * r + t[13]) * i, 
            this.z = (t[2] * e + t[6] * n + t[10] * r + t[14]) * i, this;
        },
        applyQuaternion: function(t) {
            var e = this.x, n = this.y, r = this.z, i = t.x, o = t.y, a = t.z, s = (t = t.w) * e + o * r - a * n, l = t * n + a * e - i * r, u = t * r + i * n - o * e;
            e = -i * e - o * n - a * r;
            return this.x = s * t + e * -i + l * -a - u * -o, this.y = l * t + e * -o + u * -i - s * -a, 
            this.z = u * t + e * -a + s * -o - l * -i, this;
        },
        project: function(t) {
            return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix);
        },
        unproject: function(t) {
            return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld);
        },
        transformDirection: function(t) {
            var e = this.x, n = this.y, r = this.z;
            t = t.elements;
            return this.x = t[0] * e + t[4] * n + t[8] * r, this.y = t[1] * e + t[5] * n + t[9] * r, 
            this.z = t[2] * e + t[6] * n + t[10] * r, this.normalize();
        },
        divide: function(t) {
            return this.x /= t.x, this.y /= t.y, this.z /= t.z, this;
        },
        divideScalar: function(t) {
            return this.multiplyScalar(1 / t);
        },
        min: function(t) {
            return this.x = Math.min(this.x, t.x), this.y = Math.min(this.y, t.y), this.z = Math.min(this.z, t.z), 
            this;
        },
        max: function(t) {
            return this.x = Math.max(this.x, t.x), this.y = Math.max(this.y, t.y), this.z = Math.max(this.z, t.z), 
            this;
        },
        clamp: function(t, e) {
            return this.x = Math.max(t.x, Math.min(e.x, this.x)), this.y = Math.max(t.y, Math.min(e.y, this.y)), 
            this.z = Math.max(t.z, Math.min(e.z, this.z)), this;
        },
        clampScalar: function(t, e) {
            return this.x = Math.max(t, Math.min(e, this.x)), this.y = Math.max(t, Math.min(e, this.y)), 
            this.z = Math.max(t, Math.min(e, this.z)), this;
        },
        clampLength: function(t, e) {
            var n = this.length();
            return this.divideScalar(n || 1).multiplyScalar(Math.max(t, Math.min(e, n)));
        },
        floor: function() {
            return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), 
            this;
        },
        ceil: function() {
            return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), 
            this;
        },
        round: function() {
            return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), 
            this;
        },
        roundToZero: function() {
            return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), 
            this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z), this;
        },
        negate: function() {
            return this.x = -this.x, this.y = -this.y, this.z = -this.z, this;
        },
        dot: function(t) {
            return this.x * t.x + this.y * t.y + this.z * t.z;
        },
        lengthSq: function() {
            return this.x * this.x + this.y * this.y + this.z * this.z;
        },
        length: function() {
            return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);
        },
        manhattanLength: function() {
            return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z);
        },
        normalize: function() {
            return this.divideScalar(this.length() || 1);
        },
        setLength: function(t) {
            return this.normalize().multiplyScalar(t);
        },
        lerp: function(t, e) {
            return this.x += (t.x - this.x) * e, this.y += (t.y - this.y) * e, this.z += (t.z - this.z) * e, 
            this;
        },
        lerpVectors: function(t, e, n) {
            return this.subVectors(e, t).multiplyScalar(n).add(t);
        },
        cross: function(t, e) {
            return void 0 !== e ? (console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."), 
            this.crossVectors(t, e)) : this.crossVectors(this, t);
        },
        crossVectors: function(t, e) {
            var n = t.x, r = t.y, i = (t = t.z, e.x), o = e.y;
            e = e.z;
            return this.x = r * e - t * o, this.y = t * i - n * e, this.z = n * o - r * i, this;
        },
        projectOnVector: function(t) {
            var e = t.lengthSq();
            return 0 === e ? this.set(0, 0, 0) : (e = t.dot(this) / e, this.copy(t).multiplyScalar(e));
        },
        projectOnPlane: function(t) {
            return u.copy(this).projectOnVector(t), this.sub(u);
        },
        reflect: function(t) {
            return this.sub(u.copy(t).multiplyScalar(2 * this.dot(t)));
        },
        angleTo: function(t) {
            var e = Math.sqrt(this.lengthSq() * t.lengthSq());
            return 0 === e ? Math.PI / 2 : (t = this.dot(t) / e, Math.acos(s.clamp(t, -1, 1)));
        },
        distanceTo: function(t) {
            return Math.sqrt(this.distanceToSquared(t));
        },
        distanceToSquared: function(t) {
            var e = this.x - t.x, n = this.y - t.y;
            return e * e + n * n + (t = this.z - t.z) * t;
        },
        manhattanDistanceTo: function(t) {
            return Math.abs(this.x - t.x) + Math.abs(this.y - t.y) + Math.abs(this.z - t.z);
        },
        setFromSpherical: function(t) {
            return this.setFromSphericalCoords(t.radius, t.phi, t.theta);
        },
        setFromSphericalCoords: function(t, e, n) {
            var r = Math.sin(e) * t;
            return this.x = r * Math.sin(n), this.y = Math.cos(e) * t, this.z = r * Math.cos(n), 
            this;
        },
        setFromCylindrical: function(t) {
            return this.setFromCylindricalCoords(t.radius, t.theta, t.y);
        },
        setFromCylindricalCoords: function(t, e, n) {
            return this.x = t * Math.sin(e), this.y = n, this.z = t * Math.cos(e), this;
        },
        setFromMatrixPosition: function(t) {
            return t = t.elements, this.x = t[12], this.y = t[13], this.z = t[14], this;
        },
        setFromMatrixScale: function(t) {
            var e = this.setFromMatrixColumn(t, 0).length(), n = this.setFromMatrixColumn(t, 1).length();
            t = this.setFromMatrixColumn(t, 2).length();
            return this.x = e, this.y = n, this.z = t, this;
        },
        setFromMatrixColumn: function(t, e) {
            return this.fromArray(t.elements, 4 * e);
        },
        setFromMatrix3Column: function(t, e) {
            return this.fromArray(t.elements, 3 * e);
        },
        equals: function(t) {
            return t.x === this.x && t.y === this.y && t.z === this.z;
        },
        fromArray: function(t, e) {
            return this.x = t[e = void 0 === e ? 0 : e], this.y = t[e + 1], this.z = t[e + 2], 
            this;
        },
        toArray: function(t, e) {
            return (t = void 0 === t ? [] : t)[e = void 0 === e ? 0 : e] = this.x, t[e + 1] = this.y, 
            t[e + 2] = this.z, t;
        },
        fromBufferAttribute: function(t, e, n) {
            return void 0 !== n && console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."), 
            this.x = t.getX(e), this.y = t.getY(e), this.z = t.getZ(e), this;
        }
    });
    var f = new h(), p = new b(), d = new h(0, 0, 0), y = new h(1, 1, 1), m = new h(), v = new h(), g = new h();
    function b() {
        this.elements = [ 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1 ], 0 < arguments.length && console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.");
    }
    function x() {}
    Object.assign(b.prototype, {
        isMatrix4: !0,
        set: function(t, e, n, r, i, o, a, s, l, u, c, h, f, p, d, y) {
            var m = this.elements;
            return m[0] = t, m[4] = e, m[8] = n, m[12] = r, m[1] = i, m[5] = o, m[9] = a, m[13] = s, 
            m[2] = l, m[6] = u, m[10] = c, m[14] = h, m[3] = f, m[7] = p, m[11] = d, m[15] = y, 
            this;
        },
        identity: function() {
            return this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this;
        },
        clone: function() {
            return new b().fromArray(this.elements);
        },
        copy: function(t) {
            var e = this.elements;
            t = t.elements;
            return e[0] = t[0], e[1] = t[1], e[2] = t[2], e[3] = t[3], e[4] = t[4], e[5] = t[5], 
            e[6] = t[6], e[7] = t[7], e[8] = t[8], e[9] = t[9], e[10] = t[10], e[11] = t[11], 
            e[12] = t[12], e[13] = t[13], e[14] = t[14], e[15] = t[15], this;
        },
        copyPosition: function(t) {
            var e = this.elements;
            t = t.elements;
            return e[12] = t[12], e[13] = t[13], e[14] = t[14], this;
        },
        extractBasis: function(t, e, n) {
            return t.setFromMatrixColumn(this, 0), e.setFromMatrixColumn(this, 1), n.setFromMatrixColumn(this, 2), 
            this;
        },
        makeBasis: function(t, e, n) {
            return this.set(t.x, e.x, n.x, 0, t.y, e.y, n.y, 0, t.z, e.z, n.z, 0, 0, 0, 0, 1), 
            this;
        },
        extractRotation: function(t) {
            var e = this.elements, n = t.elements, r = 1 / f.setFromMatrixColumn(t, 0).length(), i = 1 / f.setFromMatrixColumn(t, 1).length();
            t = 1 / f.setFromMatrixColumn(t, 2).length();
            return e[0] = n[0] * r, e[1] = n[1] * r, e[2] = n[2] * r, e[3] = 0, e[4] = n[4] * i, 
            e[5] = n[5] * i, e[6] = n[6] * i, e[7] = 0, e[8] = n[8] * t, e[9] = n[9] * t, e[10] = n[10] * t, 
            e[11] = 0, e[12] = 0, e[13] = 0, e[14] = 0, e[15] = 1, this;
        },
        makeRotationFromEuler: function(t) {
            t && t.isEuler || console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
            var e, n, r, i, o, a, s, l, u, c, h, f, p = this.elements, d = t.x, y = t.y, m = t.z, v = Math.cos(d), g = (d = Math.sin(d), 
            Math.cos(y)), b = (y = Math.sin(y), Math.cos(m));
            m = Math.sin(m);
            return "XYZ" === t.order ? (o = v * b, a = v * m, s = d * b, l = d * m, p[0] = g * b, 
            p[4] = -g * m, p[8] = y, p[1] = a + s * y, p[5] = o - l * y, p[9] = -d * g, p[2] = l - o * y, 
            p[6] = s + a * y, p[10] = v * g) : "YXZ" === t.order ? (n = g * m, r = y * b, p[0] = (e = g * b) + (i = y * m) * d, 
            p[4] = r * d - n, p[8] = v * y, p[1] = v * m, p[5] = v * b, p[9] = -d, p[2] = n * d - r, 
            p[6] = i + e * d, p[10] = v * g) : "ZXY" === t.order ? (n = g * m, r = y * b, p[0] = (e = g * b) - (i = y * m) * d, 
            p[4] = -v * m, p[8] = r + n * d, p[1] = n + r * d, p[5] = v * b, p[9] = i - e * d, 
            p[2] = -v * y, p[6] = d, p[10] = v * g) : "ZYX" === t.order ? (o = v * b, a = v * m, 
            s = d * b, l = d * m, p[0] = g * b, p[4] = s * y - a, p[8] = o * y + l, p[1] = g * m, 
            p[5] = l * y + o, p[9] = a * y - s, p[2] = -y, p[6] = d * g, p[10] = v * g) : "YZX" === t.order ? (u = v * g, 
            c = v * y, h = d * g, f = d * y, p[0] = g * b, p[4] = f - u * m, p[8] = h * m + c, 
            p[1] = m, p[5] = v * b, p[9] = -d * b, p[2] = -y * b, p[6] = c * m + h, p[10] = u - f * m) : "XZY" === t.order && (u = v * g, 
            c = v * y, h = d * g, f = d * y, p[0] = g * b, p[4] = -m, p[8] = y * b, p[1] = u * m + f, 
            p[5] = v * b, p[9] = c * m - h, p[2] = h * m - c, p[6] = d * b, p[10] = f * m + u), 
            p[3] = 0, p[7] = 0, p[11] = 0, p[12] = 0, p[13] = 0, p[14] = 0, p[15] = 1, this;
        },
        makeRotationFromQuaternion: function(t) {
            return this.compose(d, t, y);
        },
        lookAt: function(t, e, n) {
            var r = this.elements;
            return g.subVectors(t, e), 0 === g.lengthSq() && (g.z = 1), g.normalize(), m.crossVectors(n, g), 
            0 === m.lengthSq() && (1 === Math.abs(n.z) ? g.x += 1e-4 : g.z += 1e-4, g.normalize(), 
            m.crossVectors(n, g)), m.normalize(), v.crossVectors(g, m), r[0] = m.x, r[4] = v.x, 
            r[8] = g.x, r[1] = m.y, r[5] = v.y, r[9] = g.y, r[2] = m.z, r[6] = v.z, r[10] = g.z, 
            this;
        },
        multiply: function(t, e) {
            return void 0 !== e ? (console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."), 
            this.multiplyMatrices(t, e)) : this.multiplyMatrices(this, t);
        },
        premultiply: function(t) {
            return this.multiplyMatrices(t, this);
        },
        multiplyMatrices: function(t, e) {
            t = t.elements, e = e.elements;
            var n = this.elements, r = t[0], i = t[4], o = t[8], a = t[12], s = t[1], l = t[5], u = t[9], c = t[13], h = t[2], f = t[6], p = t[10], d = t[14], y = t[3], m = t[7], v = t[11], g = (t = t[15], 
            e[0]), b = e[4], x = e[8], w = e[12], S = e[1], _ = e[5], E = e[9], O = e[13], M = e[2], T = e[6], L = e[10], A = e[14], P = e[3], R = e[7], j = e[11];
            e = e[15];
            return n[0] = r * g + i * S + o * M + a * P, n[4] = r * b + i * _ + o * T + a * R, 
            n[8] = r * x + i * E + o * L + a * j, n[12] = r * w + i * O + o * A + a * e, n[1] = s * g + l * S + u * M + c * P, 
            n[5] = s * b + l * _ + u * T + c * R, n[9] = s * x + l * E + u * L + c * j, n[13] = s * w + l * O + u * A + c * e, 
            n[2] = h * g + f * S + p * M + d * P, n[6] = h * b + f * _ + p * T + d * R, n[10] = h * x + f * E + p * L + d * j, 
            n[14] = h * w + f * O + p * A + d * e, n[3] = y * g + m * S + v * M + t * P, n[7] = y * b + m * _ + v * T + t * R, 
            n[11] = y * x + m * E + v * L + t * j, n[15] = y * w + m * O + v * A + t * e, this;
        },
        multiplyScalar: function(t) {
            var e = this.elements;
            return e[0] *= t, e[4] *= t, e[8] *= t, e[12] *= t, e[1] *= t, e[5] *= t, e[9] *= t, 
            e[13] *= t, e[2] *= t, e[6] *= t, e[10] *= t, e[14] *= t, e[3] *= t, e[7] *= t, 
            e[11] *= t, e[15] *= t, this;
        },
        determinant: function() {
            var t = this.elements, e = t[0], n = t[4], r = t[8], i = t[12], o = t[1], a = t[5], s = t[9], l = t[13], u = t[2], c = t[6], h = t[10], f = t[14];
            return t[3] * (+i * s * c - r * l * c - i * a * h + n * l * h + r * a * f - n * s * f) + t[7] * (+e * s * f - e * l * h + i * o * h - r * o * f + r * l * u - i * s * u) + t[11] * (+e * l * c - e * a * f - i * o * c + n * o * f + i * a * u - n * l * u) + t[15] * (-r * a * u - e * s * c + e * a * h + r * o * c - n * o * h + n * s * u);
        },
        transpose: function() {
            var t = this.elements, e = t[1];
            return t[1] = t[4], t[4] = e, e = t[2], t[2] = t[8], t[8] = e, e = t[6], t[6] = t[9], 
            t[9] = e, e = t[3], t[3] = t[12], t[12] = e, e = t[7], t[7] = t[13], t[13] = e, 
            e = t[11], t[11] = t[14], t[14] = e, this;
        },
        setPosition: function(t, e, n) {
            var r = this.elements;
            return t.isVector3 ? (r[12] = t.x, r[13] = t.y, r[14] = t.z) : (r[12] = t, r[13] = e, 
            r[14] = n), this;
        },
        getInverse: function(t, e) {
            void 0 !== e && console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");
            e = this.elements;
            var n = (t = t.elements)[0], r = t[1], i = t[2], o = t[3], a = t[4], s = t[5], l = t[6], u = t[7], c = t[8], h = t[9], f = t[10], p = t[11], d = t[12], y = t[13], m = t[14], v = h * m * u - y * f * u + y * l * p - s * m * p - h * l * (t = t[15]) + s * f * t, g = d * f * u - c * m * u - d * l * p + a * m * p + c * l * t - a * f * t, b = c * y * u - d * h * u + d * s * p - a * y * p - c * s * t + a * h * t, x = d * h * l - c * y * l - d * s * f + a * y * f + c * s * m - a * h * m, w = n * v + r * g + i * b + o * x;
            return 0 == w ? this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0) : (e[0] = v * (v = 1 / w), 
            e[1] = (y * f * o - h * m * o - y * i * p + r * m * p + h * i * t - r * f * t) * v, 
            e[2] = (s * m * o - y * l * o + y * i * u - r * m * u - s * i * t + r * l * t) * v, 
            e[3] = (h * l * o - s * f * o - h * i * u + r * f * u + s * i * p - r * l * p) * v, 
            e[4] = g * v, e[5] = (c * m * o - d * f * o + d * i * p - n * m * p - c * i * t + n * f * t) * v, 
            e[6] = (d * l * o - a * m * o - d * i * u + n * m * u + a * i * t - n * l * t) * v, 
            e[7] = (a * f * o - c * l * o + c * i * u - n * f * u - a * i * p + n * l * p) * v, 
            e[8] = b * v, e[9] = (d * h * o - c * y * o - d * r * p + n * y * p + c * r * t - n * h * t) * v, 
            e[10] = (a * y * o - d * s * o + d * r * u - n * y * u - a * r * t + n * s * t) * v, 
            e[11] = (c * s * o - a * h * o - c * r * u + n * h * u + a * r * p - n * s * p) * v, 
            e[12] = x * v, e[13] = (c * y * i - d * h * i + d * r * f - n * y * f - c * r * m + n * h * m) * v, 
            e[14] = (d * s * i - a * y * i - d * r * l + n * y * l + a * r * m - n * s * m) * v, 
            e[15] = (a * h * i - c * s * i + c * r * l - n * h * l - a * r * f + n * s * f) * v, 
            this);
        },
        invert: function() {
            var t = this.elements, e = t[0], n = t[1], r = t[2], i = t[3], o = t[4], a = t[5], s = t[6], l = t[7], u = t[8], c = t[9], h = t[10], f = t[11], p = t[12], d = t[13], y = t[14], m = t[15], v = c * y * l - d * h * l + d * s * f - a * y * f - c * s * m + a * h * m, g = p * h * l - u * y * l - p * s * f + o * y * f + u * s * m - o * h * m, b = u * d * l - p * c * l + p * a * f - o * d * f - u * a * m + o * c * m, x = p * c * s - u * d * s - p * a * h + o * d * h + u * a * y - o * c * y, w = e * v + n * g + r * b + i * x;
            return 0 == w ? this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0) : (t[0] = v * (v = 1 / w), 
            t[1] = (d * h * i - c * y * i - d * r * f + n * y * f + c * r * m - n * h * m) * v, 
            t[2] = (a * y * i - d * s * i + d * r * l - n * y * l - a * r * m + n * s * m) * v, 
            t[3] = (c * s * i - a * h * i - c * r * l + n * h * l + a * r * f - n * s * f) * v, 
            t[4] = g * v, t[5] = (u * y * i - p * h * i + p * r * f - e * y * f - u * r * m + e * h * m) * v, 
            t[6] = (p * s * i - o * y * i - p * r * l + e * y * l + o * r * m - e * s * m) * v, 
            t[7] = (o * h * i - u * s * i + u * r * l - e * h * l - o * r * f + e * s * f) * v, 
            t[8] = b * v, t[9] = (p * c * i - u * d * i - p * n * f + e * d * f + u * n * m - e * c * m) * v, 
            t[10] = (o * d * i - p * a * i + p * n * l - e * d * l - o * n * m + e * a * m) * v, 
            t[11] = (u * a * i - o * c * i - u * n * l + e * c * l + o * n * f - e * a * f) * v, 
            t[12] = x * v, t[13] = (u * d * r - p * c * r + p * n * h - e * d * h - u * n * y + e * c * y) * v, 
            t[14] = (p * a * r - o * d * r - p * n * s + e * d * s + o * n * y - e * a * y) * v, 
            t[15] = (o * c * r - u * a * r + u * n * s - e * c * s - o * n * h + e * a * h) * v, 
            this);
        },
        scale: function(t) {
            var e = this.elements, n = t.x, r = t.y;
            t = t.z;
            return e[0] *= n, e[4] *= r, e[8] *= t, e[1] *= n, e[5] *= r, e[9] *= t, e[2] *= n, 
            e[6] *= r, e[10] *= t, e[3] *= n, e[7] *= r, e[11] *= t, this;
        },
        getMaxScaleOnAxis: function() {
            var t = (n = this.elements)[0] * n[0] + n[1] * n[1] + n[2] * n[2], e = n[4] * n[4] + n[5] * n[5] + n[6] * n[6], n = n[8] * n[8] + n[9] * n[9] + n[10] * n[10];
            return Math.sqrt(Math.max(t, e, n));
        },
        makeTranslation: function(t, e, n) {
            return this.set(1, 0, 0, t, 0, 1, 0, e, 0, 0, 1, n, 0, 0, 0, 1), this;
        },
        makeRotationX: function(t) {
            var e = Math.cos(t);
            t = Math.sin(t);
            return this.set(1, 0, 0, 0, 0, e, -t, 0, 0, t, e, 0, 0, 0, 0, 1), this;
        },
        makeRotationY: function(t) {
            var e = Math.cos(t);
            t = Math.sin(t);
            return this.set(e, 0, t, 0, 0, 1, 0, 0, -t, 0, e, 0, 0, 0, 0, 1), this;
        },
        makeRotationZ: function(t) {
            var e = Math.cos(t);
            t = Math.sin(t);
            return this.set(e, -t, 0, 0, t, e, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this;
        },
        makeRotationAxis: function(t, e) {
            var n = Math.cos(e), r = (e = Math.sin(e), 1 - n), i = t.x, o = t.y, a = (t = t.z, 
            r * i), s = r * o;
            return this.set(a * i + n, a * o - e * t, a * t + e * o, 0, a * o + e * t, s * o + n, s * t - e * i, 0, a * t - e * o, s * t + e * i, r * t * t + n, 0, 0, 0, 0, 1), 
            this;
        },
        makeScale: function(t, e, n) {
            return this.set(t, 0, 0, 0, 0, e, 0, 0, 0, 0, n, 0, 0, 0, 0, 1), this;
        },
        makeShear: function(t, e, n) {
            return this.set(1, e, n, 0, t, 1, n, 0, t, e, 1, 0, 0, 0, 0, 1), this;
        },
        compose: function(t, e, n) {
            var r = this.elements, i = (a = e._t) * (c = a + a), o = a * (h = (l = e.St) + l), a = a * (f = (u = e.xt) + u), s = l * h, l = l * f, u = u * f, c = (e = e.Et) * c, h = e * h, f = (e = e * f, 
            n.x), p = n.y;
            n = n.z;
            return r[0] = (1 - (s + u)) * f, r[1] = (o + e) * f, r[2] = (a - h) * f, r[3] = 0, 
            r[4] = (o - e) * p, r[5] = (1 - (i + u)) * p, r[6] = (l + c) * p, r[7] = 0, r[8] = (a + h) * n, 
            r[9] = (l - c) * n, r[10] = (1 - (i + s)) * n, r[11] = 0, r[12] = t.x, r[13] = t.y, 
            r[14] = t.z, r[15] = 1, this;
        },
        decompose: function(t, e, n) {
            var r = this.elements, i = f.set(r[0], r[1], r[2]).length(), o = f.set(r[4], r[5], r[6]).length(), a = f.set(r[8], r[9], r[10]).length(), s = (t = (this.determinant() < 0 && (i = -i), 
            t.x = r[12], t.y = r[13], t.z = r[14], p.copy(this), 1 / i), r = 1 / o, 1 / a);
            return p.elements[0] *= t, p.elements[1] *= t, p.elements[2] *= t, p.elements[4] *= r, 
            p.elements[5] *= r, p.elements[6] *= r, p.elements[8] *= s, p.elements[9] *= s, 
            p.elements[10] *= s, e.setFromRotationMatrix(p), n.x = i, n.y = o, n.z = a, this;
        },
        makePerspective: function(t, e, n, r, i, o) {
            void 0 === o && console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");
            var a = this.elements, s = 2 * i / (n - r), l = (e + t) / (e - t);
            n = (n + r) / (n - r), r = -(o + i) / (o - i), o = -2 * o * i / (o - i);
            return a[0] = 2 * i / (e - t), a[4] = 0, a[8] = l, a[12] = 0, a[1] = 0, a[5] = s, 
            a[9] = n, a[13] = 0, a[2] = 0, a[6] = 0, a[10] = r, a[14] = o, a[3] = 0, a[7] = 0, 
            a[11] = -1, a[15] = 0, this;
        },
        makeOrthographic: function(t, e, n, r, i, o) {
            var a = this.elements, s = 1 / (e - t), l = 1 / (n - r), u = 1 / (o - i);
            e = (e + t) * s, t = (n + r) * l, n = (o + i) * u;
            return a[0] = 2 * s, a[4] = 0, a[8] = 0, a[12] = -e, a[1] = 0, a[5] = 2 * l, a[9] = 0, 
            a[13] = -t, a[2] = 0, a[6] = 0, a[10] = -2 * u, a[14] = -n, a[3] = 0, a[7] = 0, 
            a[11] = 0, a[15] = 1, this;
        },
        equals: function(t) {
            for (var e = this.elements, n = t.elements, r = 0; r < 16; r++) if (e[r] !== n[r]) return !1;
            return !0;
        },
        fromArray: function(t, e) {
            void 0 === e && (e = 0);
            for (var n = 0; n < 16; n++) this.elements[n] = t[n + e];
            return this;
        },
        toArray: function(t, e) {
            var n = this.elements;
            return (t = void 0 === t ? [] : t)[e = void 0 === e ? 0 : e] = n[0], t[e + 1] = n[1], 
            t[e + 2] = n[2], t[e + 3] = n[3], t[e + 4] = n[4], t[e + 5] = n[5], t[e + 6] = n[6], 
            t[e + 7] = n[7], t[e + 8] = n[8], t[e + 9] = n[9], t[e + 10] = n[10], t[e + 11] = n[11], 
            t[e + 12] = n[12], t[e + 13] = n[13], t[e + 14] = n[14], t[e + 15] = n[15], t;
        }
    }), Object.assign(x.prototype, {
        addEventListener: function(t, e) {
            void 0 === this.wt && (this.wt = {});
            var n = this.wt;
            void 0 === n[t] && (n[t] = []), -1 === n[t].indexOf(e) && n[t].push(e);
        },
        hasEventListener: function(t, e) {
            var n;
            return void 0 !== this.wt && void 0 !== (n = this.wt)[t] && -1 !== n[t].indexOf(e);
        },
        removeEventListener: function(t, e) {
            var n;
            void 0 !== this.wt && void 0 !== (t = this.wt[t]) && -1 !== (n = t.indexOf(e)) && t.splice(n, 1);
        },
        dispatchEvent: function(t) {
            if (void 0 !== this.wt) {
                var e = this.wt[t.type];
                if (void 0 !== e) {
                    t.target = this;
                    for (var n = e.slice(0), r = 0, i = n.length; r < i; r++) n[r].call(this, t);
                }
            }
        }
    });
    var w = new b(), S = new l();
    function _(t, e, n, r) {
        this._t = t || 0, this.St = e || 0, this.xt = n || 0, this.Tt = r || _.DefaultOrder;
    }
    function E() {
        this.mask = 1;
    }
    function O() {
        this.elements = [ 1, 0, 0, 0, 1, 0, 0, 0, 1 ], 0 < arguments.length && console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.");
    }
    _.RotationOrders = [ "XYZ", "YZX", "ZXY", "XZY", "YXZ", "ZYX" ], _.DefaultOrder = "XYZ", 
    Object.defineProperties(_.prototype, {
        x: {
            get: function() {
                return this._t;
            },
            set: function(t) {
                this._t = t, this.Mt();
            }
        },
        y: {
            get: function() {
                return this.St;
            },
            set: function(t) {
                this.St = t, this.Mt();
            }
        },
        z: {
            get: function() {
                return this.xt;
            },
            set: function(t) {
                this.xt = t, this.Mt();
            }
        },
        order: {
            get: function() {
                return this.Tt;
            },
            set: function(t) {
                this.Tt = t, this.Mt();
            }
        }
    }), Object.assign(_.prototype, {
        isEuler: !0,
        set: function(t, e, n, r) {
            return this._t = t, this.St = e, this.xt = n, this.Tt = r || this.Tt, this.Mt(), 
            this;
        },
        clone: function() {
            return new this.constructor(this._t, this.St, this.xt, this.Tt);
        },
        copy: function(t) {
            return this._t = t._t, this.St = t.St, this.xt = t.xt, this.Tt = t.Tt, this.Mt(), 
            this;
        },
        setFromRotationMatrix: function(t, e, n) {
            var r = s.clamp, i = (t = t.elements)[0], o = t[4], a = t[8], l = t[1], u = t[5], c = t[9], h = t[2], f = t[6];
            t = t[10];
            return "XYZ" === (e = e || this.Tt) ? (this.St = Math.asin(r(a, -1, 1)), Math.abs(a) < .9999999 ? (this._t = Math.atan2(-c, t), 
            this.xt = Math.atan2(-o, i)) : (this._t = Math.atan2(f, u), this.xt = 0)) : "YXZ" === e ? (this._t = Math.asin(-r(c, -1, 1)), 
            Math.abs(c) < .9999999 ? (this.St = Math.atan2(a, t), this.xt = Math.atan2(l, u)) : (this.St = Math.atan2(-h, i), 
            this.xt = 0)) : "ZXY" === e ? (this._t = Math.asin(r(f, -1, 1)), Math.abs(f) < .9999999 ? (this.St = Math.atan2(-h, t), 
            this.xt = Math.atan2(-o, u)) : (this.St = 0, this.xt = Math.atan2(l, i))) : "ZYX" === e ? (this.St = Math.asin(-r(h, -1, 1)), 
            Math.abs(h) < .9999999 ? (this._t = Math.atan2(f, t), this.xt = Math.atan2(l, i)) : (this._t = 0, 
            this.xt = Math.atan2(-o, u))) : "YZX" === e ? (this.xt = Math.asin(r(l, -1, 1)), 
            Math.abs(l) < .9999999 ? (this._t = Math.atan2(-c, u), this.St = Math.atan2(-h, i)) : (this._t = 0, 
            this.St = Math.atan2(a, t))) : "XZY" === e ? (this.xt = Math.asin(-r(o, -1, 1)), 
            Math.abs(o) < .9999999 ? (this._t = Math.atan2(f, u), this.St = Math.atan2(a, i)) : (this._t = Math.atan2(-c, t), 
            this.St = 0)) : console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: " + e), 
            this.Tt = e, !1 !== n && this.Mt(), this;
        },
        setFromQuaternion: function(t, e, n) {
            return w.makeRotationFromQuaternion(t), this.setFromRotationMatrix(w, e, n);
        },
        setFromVector3: function(t, e) {
            return this.set(t.x, t.y, t.z, e || this.Tt);
        },
        reorder: function(t) {
            return S.setFromEuler(this), this.setFromQuaternion(S, t);
        },
        equals: function(t) {
            return t._t === this._t && t.St === this.St && t.xt === this.xt && t.Tt === this.Tt;
        },
        fromArray: function(t) {
            return this._t = t[0], this.St = t[1], this.xt = t[2], void 0 !== t[3] && (this.Tt = t[3]), 
            this.Mt(), this;
        },
        toArray: function(t, e) {
            return (t = void 0 === t ? [] : t)[e = void 0 === e ? 0 : e] = this._t, t[e + 1] = this.St, 
            t[e + 2] = this.xt, t[e + 3] = this.Tt, t;
        },
        toVector3: function(t) {
            return t ? t.set(this._t, this.St, this.xt) : new h(this._t, this.St, this.xt);
        },
        Ot: function(t) {
            return this.Mt = t, this;
        },
        Mt: function() {}
    }), Object.assign(E.prototype, {
        set: function(t) {
            this.mask = 1 << t | 0;
        },
        enable: function(t) {
            this.mask |= 1 << t | 0;
        },
        enableAll: function() {
            this.mask = -1;
        },
        toggle: function(t) {
            this.mask ^= 1 << t | 0;
        },
        disable: function(t) {
            this.mask &= ~(1 << t | 0);
        },
        disableAll: function() {
            this.mask = 0;
        },
        test: function(t) {
            return 0 != (this.mask & t.mask);
        }
    }), Object.assign(O.prototype, {
        isMatrix3: !0,
        set: function(t, e, n, r, i, o, a, s, l) {
            var u = this.elements;
            return u[0] = t, u[1] = r, u[2] = a, u[3] = e, u[4] = i, u[5] = s, u[6] = n, u[7] = o, 
            u[8] = l, this;
        },
        identity: function() {
            return this.set(1, 0, 0, 0, 1, 0, 0, 0, 1), this;
        },
        clone: function() {
            return new this.constructor().fromArray(this.elements);
        },
        copy: function(t) {
            var e = this.elements;
            t = t.elements;
            return e[0] = t[0], e[1] = t[1], e[2] = t[2], e[3] = t[3], e[4] = t[4], e[5] = t[5], 
            e[6] = t[6], e[7] = t[7], e[8] = t[8], this;
        },
        extractBasis: function(t, e, n) {
            return t.setFromMatrix3Column(this, 0), e.setFromMatrix3Column(this, 1), n.setFromMatrix3Column(this, 2), 
            this;
        },
        setFromMatrix4: function(t) {
            return t = t.elements, this.set(t[0], t[4], t[8], t[1], t[5], t[9], t[2], t[6], t[10]), 
            this;
        },
        multiply: function(t) {
            return this.multiplyMatrices(this, t);
        },
        premultiply: function(t) {
            return this.multiplyMatrices(t, this);
        },
        multiplyMatrices: function(t, e) {
            t = t.elements, e = e.elements;
            var n = this.elements, r = t[0], i = t[3], o = t[6], a = t[1], s = t[4], l = t[7], u = t[2], c = t[5], h = (t = t[8], 
            e[0]), f = e[3], p = e[6], d = e[1], y = e[4], m = e[7], v = e[2], g = e[5];
            e = e[8];
            return n[0] = r * h + i * d + o * v, n[3] = r * f + i * y + o * g, n[6] = r * p + i * m + o * e, 
            n[1] = a * h + s * d + l * v, n[4] = a * f + s * y + l * g, n[7] = a * p + s * m + l * e, 
            n[2] = u * h + c * d + t * v, n[5] = u * f + c * y + t * g, n[8] = u * p + c * m + t * e, 
            this;
        },
        multiplyScalar: function(t) {
            var e = this.elements;
            return e[0] *= t, e[3] *= t, e[6] *= t, e[1] *= t, e[4] *= t, e[7] *= t, e[2] *= t, 
            e[5] *= t, e[8] *= t, this;
        },
        determinant: function() {
            var t, e = (t = this.elements)[0], n = t[1], r = t[2], i = t[3], o = t[4], a = t[5], s = t[6], l = t[7];
            return e * o * (t = t[8]) - e * a * l - n * i * t + n * a * s + r * i * l - r * o * s;
        },
        getInverse: function(t, e) {
            void 0 !== e && console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");
            e = t.elements, t = this.elements;
            var n = e[0], r = e[1], i = e[2], o = e[3], a = e[4], s = e[5], l = e[6], u = e[7], c = (e = e[8]) * a - s * u, h = s * l - e * o, f = u * o - a * l, p = n * c + r * h + i * f;
            return 0 == p ? this.set(0, 0, 0, 0, 0, 0, 0, 0, 0) : (t[0] = c * (c = 1 / p), t[1] = (i * u - e * r) * c, 
            t[2] = (s * r - i * a) * c, t[3] = h * c, t[4] = (e * n - i * l) * c, t[5] = (i * o - s * n) * c, 
            t[6] = f * c, t[7] = (r * l - u * n) * c, t[8] = (a * n - r * o) * c, this);
        },
        transpose: function() {
            var t = this.elements, e = t[1];
            return t[1] = t[3], t[3] = e, e = t[2], t[2] = t[6], t[6] = e, e = t[5], t[5] = t[7], 
            t[7] = e, this;
        },
        getNormalMatrix: function(t) {
            return this.setFromMatrix4(t).getInverse(this).transpose();
        },
        transposeIntoArray: function(t) {
            var e = this.elements;
            return t[0] = e[0], t[1] = e[3], t[2] = e[6], t[3] = e[1], t[4] = e[4], t[5] = e[7], 
            t[6] = e[2], t[7] = e[5], t[8] = e[8], this;
        },
        setUvTransform: function(t, e, n, r, i, o, a) {
            var s = Math.cos(i);
            i = Math.sin(i);
            this.set(n * s, n * i, -n * (s * o + i * a) + o + t, -r * i, r * s, -r * (-i * o + s * a) + a + e, 0, 0, 1);
        },
        scale: function(t, e) {
            var n = this.elements;
            return n[0] *= t, n[3] *= t, n[6] *= t, n[1] *= e, n[4] *= e, n[7] *= e, this;
        },
        rotate: function(t) {
            var e = Math.cos(t), n = (t = Math.sin(t), this.elements), r = n[0], i = n[3], o = n[6], a = n[1], s = n[4], l = n[7];
            return n[0] = e * r + t * a, n[3] = e * i + t * s, n[6] = e * o + t * l, n[1] = -t * r + e * a, 
            n[4] = -t * i + e * s, n[7] = -t * o + e * l, this;
        },
        translate: function(t, e) {
            var n = this.elements;
            return n[0] += t * n[2], n[3] += t * n[5], n[6] += t * n[8], n[1] += e * n[2], n[4] += e * n[5], 
            n[7] += e * n[8], this;
        },
        equals: function(t) {
            for (var e = this.elements, n = t.elements, r = 0; r < 9; r++) if (e[r] !== n[r]) return !1;
            return !0;
        },
        fromArray: function(t, e) {
            void 0 === e && (e = 0);
            for (var n = 0; n < 9; n++) this.elements[n] = t[n + e];
            return this;
        },
        toArray: function(t, e) {
            var n = this.elements;
            return (t = void 0 === t ? [] : t)[e = void 0 === e ? 0 : e] = n[0], t[e + 1] = n[1], 
            t[e + 2] = n[2], t[e + 3] = n[3], t[e + 4] = n[4], t[e + 5] = n[5], t[e + 6] = n[6], 
            t[e + 7] = n[7], t[e + 8] = n[8], t;
        }
    });
    var M = 0, T = new h(), L = new l(), A = new b(), P = new h(), R = new h(), j = new h(), I = new l(), D = new h(1, 0, 0), k = new h(0, 1, 0), C = new h(0, 0, 1), N = {
        type: "added"
    }, F = {
        type: "removed"
    };
    function B() {
        Object.defineProperty(this, "id", {
            value: M++
        }), this.uuid = s.generateUUID(), this.name = "", this.type = "Object3D", this.parent = null, 
        this.children = [], this.up = B.DefaultUp.clone();
        var t = new h(), e = new _(), n = new l(), r = new h(1, 1, 1);
        e.Ot(function() {
            n.setFromEuler(e, !1);
        }), n.Ot(function() {
            e.setFromQuaternion(n, void 0, !1);
        }), Object.defineProperties(this, {
            position: {
                configurable: !0,
                enumerable: !0,
                value: t
            },
            rotation: {
                configurable: !0,
                enumerable: !0,
                value: e
            },
            quaternion: {
                configurable: !0,
                enumerable: !0,
                value: n
            },
            scale: {
                configurable: !0,
                enumerable: !0,
                value: r
            },
            modelViewMatrix: {
                value: new b()
            },
            normalMatrix: {
                value: new O()
            }
        }), this.matrix = new b(), this.matrixWorld = new b(), this.matrixAutoUpdate = B.DefaultMatrixAutoUpdate, 
        this.matrixWorldNeedsUpdate = !1, this.layers = new E(), this.visible = !0, this.castShadow = !1, 
        this.receiveShadow = !1, this.frustumCulled = !0, this.renderOrder = 0, this.userData = {};
    }
    function U() {
        B.call(this), this.type = "Camera", this.matrixWorldInverse = new b(), this.projectionMatrix = new b(), 
        this.projectionMatrixInverse = new b();
    }
    function z(t, e, n, r) {
        U.call(this), this.type = "PerspectiveCamera", this.fov = void 0 !== t ? t : 50, 
        this.zoom = 1, this.near = void 0 !== n ? n : .1, this.far = void 0 !== r ? r : 2e3, 
        this.focus = 10, this.aspect = void 0 !== e ? e : 1, this.view = null, this.filmGauge = 35, 
        this.filmOffset = 0, this.updateProjectionMatrix();
    }
    function G(t, e, n, r, i, o) {
        U.call(this), this.type = "OrthographicCamera", this.zoom = 1, this.view = null, 
        this.left = void 0 !== t ? t : -1, this.right = void 0 !== e ? e : 1, this.top = void 0 !== n ? n : 1, 
        this.bottom = void 0 !== r ? r : -1, this.near = void 0 !== i ? i : .1, this.far = void 0 !== o ? o : 2e3, 
        this.updateProjectionMatrix();
    }
    B.DefaultUp = new h(0, 1, 0), B.DefaultMatrixAutoUpdate = !0, B.prototype = Object.assign(Object.create(x.prototype), {
        constructor: B,
        isObject3D: !0,
        onBeforeRender: function() {},
        onAfterRender: function() {},
        applyMatrix4: function(t) {
            this.matrixAutoUpdate && this.updateMatrix(), this.matrix.premultiply(t), this.matrix.decompose(this.position, this.quaternion, this.scale);
        },
        applyQuaternion: function(t) {
            return this.quaternion.premultiply(t), this;
        },
        setRotationFromAxisAngle: function(t, e) {
            this.quaternion.setFromAxisAngle(t, e);
        },
        setRotationFromEuler: function(t) {
            this.quaternion.setFromEuler(t, !0);
        },
        setRotationFromMatrix: function(t) {
            this.quaternion.setFromRotationMatrix(t);
        },
        setRotationFromQuaternion: function(t) {
            this.quaternion.copy(t);
        },
        rotateOnAxis: function(t, e) {
            return L.setFromAxisAngle(t, e), this.quaternion.multiply(L), this;
        },
        rotateOnWorldAxis: function(t, e) {
            return L.setFromAxisAngle(t, e), this.quaternion.premultiply(L), this;
        },
        rotateX: function(t) {
            return this.rotateOnAxis(D, t);
        },
        rotateY: function(t) {
            return this.rotateOnAxis(k, t);
        },
        rotateZ: function(t) {
            return this.rotateOnAxis(C, t);
        },
        translateOnAxis: function(t, e) {
            return T.copy(t).applyQuaternion(this.quaternion), this.position.add(T.multiplyScalar(e)), 
            this;
        },
        translateX: function(t) {
            return this.translateOnAxis(D, t);
        },
        translateY: function(t) {
            return this.translateOnAxis(k, t);
        },
        translateZ: function(t) {
            return this.translateOnAxis(C, t);
        },
        localToWorld: function(t) {
            return t.applyMatrix4(this.matrixWorld);
        },
        worldToLocal: function(t) {
            return t.applyMatrix4(A.getInverse(this.matrixWorld));
        },
        lookAt: function(t, e, n) {
            t.isVector3 ? P.copy(t) : P.set(t, e, n), t = this.parent, this.updateWorldMatrix(!0, !1), 
            R.setFromMatrixPosition(this.matrixWorld), this.isCamera || this.isLight ? A.lookAt(R, P, this.up) : A.lookAt(P, R, this.up), 
            this.quaternion.setFromRotationMatrix(A), t && (A.extractRotation(t.matrixWorld), 
            L.setFromRotationMatrix(A), this.quaternion.premultiply(L.inverse()));
        },
        add: function(t) {
            if (1 < arguments.length) for (var e = 0; e < arguments.length; e++) this.add(arguments[e]); else t === this ? console.error("THREE.Object3D.add: object can't be added as a child of itself.", t) : t && t.isObject3D ? (null !== t.parent && t.parent.remove(t), 
            (t.parent = this).children.push(t), t.dispatchEvent(N)) : console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.", t);
            return this;
        },
        remove: function(t) {
            if (1 < arguments.length) for (var e = 0; e < arguments.length; e++) this.remove(arguments[e]); else {
                var n = this.children.indexOf(t);
                -1 !== n && (t.parent = null, this.children.splice(n, 1), t.dispatchEvent(F));
            }
            return this;
        },
        attach: function(t) {
            return this.updateWorldMatrix(!0, !1), A.getInverse(this.matrixWorld), null !== t.parent && (t.parent.updateWorldMatrix(!0, !1), 
            A.multiply(t.parent.matrixWorld)), t.applyMatrix4(A), t.updateWorldMatrix(!1, !1), 
            this.add(t), this;
        },
        getObjectById: function(t) {
            return this.getObjectByProperty("id", t);
        },
        getObjectByName: function(t) {
            return this.getObjectByProperty("name", t);
        },
        getObjectByProperty: function(t, e) {
            if (this[t] === e) return this;
            for (var n = 0, r = this.children.length; n < r; n++) {
                var i = this.children[n].getObjectByProperty(t, e);
                if (void 0 !== i) return i;
            }
        },
        getWorldPosition: function(t) {
            return void 0 === t && (console.warn("THREE.Object3D: .getWorldPosition() target is now required"), 
            t = new h()), this.updateMatrixWorld(!0), t.setFromMatrixPosition(this.matrixWorld);
        },
        getWorldQuaternion: function(t) {
            return void 0 === t && (console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"), 
            t = new l()), this.updateMatrixWorld(!0), this.matrixWorld.decompose(R, t, j), t;
        },
        getWorldScale: function(t) {
            return void 0 === t && (console.warn("THREE.Object3D: .getWorldScale() target is now required"), 
            t = new h()), this.updateMatrixWorld(!0), this.matrixWorld.decompose(R, I, t), t;
        },
        getWorldDirection: function(t) {
            void 0 === t && (console.warn("THREE.Object3D: .getWorldDirection() target is now required"), 
            t = new h()), this.updateMatrixWorld(!0);
            var e = this.matrixWorld.elements;
            return t.set(e[8], e[9], e[10]).normalize();
        },
        raycast: function() {},
        traverse: function(t) {
            t(this);
            for (var e = this.children, n = 0, r = e.length; n < r; n++) e[n].traverse(t);
        },
        traverseVisible: function(t) {
            if (!1 !== this.visible) {
                t(this);
                for (var e = this.children, n = 0, r = e.length; n < r; n++) e[n].traverseVisible(t);
            }
        },
        traverseAncestors: function(t) {
            var e = this.parent;
            null !== e && (t(e), e.traverseAncestors(t));
        },
        updateMatrix: function() {
            this.matrix.compose(this.position, this.quaternion, this.scale), this.matrixWorldNeedsUpdate = !0;
        },
        updateMatrixWorld: function(t) {
            this.matrixAutoUpdate && this.updateMatrix(), (this.matrixWorldNeedsUpdate || t) && (null === this.parent ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix), 
            t = !(this.matrixWorldNeedsUpdate = !1));
            for (var e = this.children, n = 0, r = e.length; n < r; n++) e[n].updateMatrixWorld(t);
        },
        updateWorldMatrix: function(t, e) {
            var n = this.parent;
            if (!0 === t && null !== n && n.updateWorldMatrix(!0, !1), this.matrixAutoUpdate && this.updateMatrix(), 
            null === this.parent ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix), 
            !0 === e) for (var r = this.children, i = 0, o = r.length; i < o; i++) r[i].updateWorldMatrix(!1, !0);
        },
        clone: function(t) {
            return new this.constructor().copy(this, t);
        },
        copy: function(t, e) {
            if (void 0 === e && (e = !0), this.name = t.name, this.up.copy(t.up), this.position.copy(t.position), 
            this.quaternion.copy(t.quaternion), this.scale.copy(t.scale), this.matrix.copy(t.matrix), 
            this.matrixWorld.copy(t.matrixWorld), this.matrixAutoUpdate = t.matrixAutoUpdate, 
            this.matrixWorldNeedsUpdate = t.matrixWorldNeedsUpdate, this.layers.mask = t.layers.mask, 
            this.visible = t.visible, this.castShadow = t.castShadow, this.receiveShadow = t.receiveShadow, 
            this.frustumCulled = t.frustumCulled, this.renderOrder = t.renderOrder, this.userData = JSON.parse(JSON.stringify(t.userData)), 
            !0 === e) for (var n = 0; n < t.children.length; n++) {
                var r = t.children[n];
                this.add(r.clone());
            }
            return this;
        }
    }), U.prototype = Object.assign(Object.create(B.prototype), {
        constructor: U,
        isCamera: !0,
        copy: function(t, e) {
            return B.prototype.copy.call(this, t, e), this.matrixWorldInverse.copy(t.matrixWorldInverse), 
            this.projectionMatrix.copy(t.projectionMatrix), this.projectionMatrixInverse.copy(t.projectionMatrixInverse), 
            this;
        },
        getWorldDirection: function(t) {
            void 0 === t && (console.warn("THREE.Camera: .getWorldDirection() target is now required"), 
            t = new h()), this.updateMatrixWorld(!0);
            var e = this.matrixWorld.elements;
            return t.set(-e[8], -e[9], -e[10]).normalize();
        },
        updateMatrixWorld: function(t) {
            B.prototype.updateMatrixWorld.call(this, t), this.matrixWorldInverse.getInverse(this.matrixWorld);
        },
        updateWorldMatrix: function(t, e) {
            B.prototype.updateWorldMatrix.call(this, t, e), this.matrixWorldInverse.getInverse(this.matrixWorld);
        },
        clone: function() {
            return new this.constructor().copy(this);
        }
    }), z.prototype = Object.assign(Object.create(U.prototype), {
        constructor: z,
        isPerspectiveCamera: !0,
        copy: function(t, e) {
            return U.prototype.copy.call(this, t, e), this.fov = t.fov, this.zoom = t.zoom, 
            this.near = t.near, this.far = t.far, this.focus = t.focus, this.aspect = t.aspect, 
            this.view = null === t.view ? null : Object.assign({}, t.view), this.filmGauge = t.filmGauge, 
            this.filmOffset = t.filmOffset, this;
        },
        setFocalLength: function(t) {
            t = .5 * this.getFilmHeight() / t, this.fov = 2 * s.RAD2DEG * Math.atan(t), this.updateProjectionMatrix();
        },
        getFocalLength: function() {
            var t = Math.tan(.5 * s.DEG2RAD * this.fov);
            return .5 * this.getFilmHeight() / t;
        },
        getEffectiveFOV: function() {
            return 2 * s.RAD2DEG * Math.atan(Math.tan(.5 * s.DEG2RAD * this.fov) / this.zoom);
        },
        getFilmWidth: function() {
            return this.filmGauge * Math.min(this.aspect, 1);
        },
        getFilmHeight: function() {
            return this.filmGauge / Math.max(this.aspect, 1);
        },
        setViewOffset: function(t, e, n, r, i, o) {
            this.aspect = t / e, null === this.view && (this.view = {
                enabled: !0,
                fullWidth: 1,
                fullHeight: 1,
                offsetX: 0,
                offsetY: 0,
                width: 1,
                height: 1
            }), this.view.enabled = !0, this.view.fullWidth = t, this.view.fullHeight = e, this.view.offsetX = n, 
            this.view.offsetY = r, this.view.width = i, this.view.height = o, this.updateProjectionMatrix();
        },
        clearViewOffset: function() {
            null !== this.view && (this.view.enabled = !1), this.updateProjectionMatrix();
        },
        updateProjectionMatrix: function() {
            var t, e = this.near, n = e * Math.tan(.5 * s.DEG2RAD * this.fov) / this.zoom, r = 2 * n, i = this.aspect * r, o = -.5 * i, a = this.view, l = (null !== this.view && this.view.enabled && (l = a.fullWidth, 
            t = a.fullHeight, o += a.offsetX * i / l, n -= a.offsetY * r / t, i *= a.width / l, 
            r *= a.height / t), this.filmOffset);
            0 !== l && (o += e * l / this.getFilmWidth()), this.projectionMatrix.makePerspective(o, o + i, n, n - r, e, this.far), 
            this.projectionMatrixInverse.getInverse(this.projectionMatrix);
        }
    }), G.prototype = Object.assign(Object.create(U.prototype), {
        constructor: G,
        isOrthographicCamera: !0,
        copy: function(t, e) {
            return U.prototype.copy.call(this, t, e), this.left = t.left, this.right = t.right, 
            this.top = t.top, this.bottom = t.bottom, this.near = t.near, this.far = t.far, 
            this.zoom = t.zoom, this.view = null === t.view ? null : Object.assign({}, t.view), 
            this;
        },
        setViewOffset: function(t, e, n, r, i, o) {
            null === this.view && (this.view = {
                enabled: !0,
                fullWidth: 1,
                fullHeight: 1,
                offsetX: 0,
                offsetY: 0,
                width: 1,
                height: 1
            }), this.view.enabled = !0, this.view.fullWidth = t, this.view.fullHeight = e, this.view.offsetX = n, 
            this.view.offsetY = r, this.view.width = i, this.view.height = o, this.updateProjectionMatrix();
        },
        clearViewOffset: function() {
            null !== this.view && (this.view.enabled = !1), this.updateProjectionMatrix();
        },
        updateProjectionMatrix: function() {
            var t, e = (this.right - this.left) / (2 * this.zoom), n = (this.top - this.bottom) / (2 * this.zoom), r = (i = (this.right + this.left) / 2) - e, i = i + e, o = (e = (o = (this.top + this.bottom) / 2) + n, 
            o - n);
            null !== this.view && this.view.enabled && (n = (this.right - this.left) / this.view.fullWidth / this.zoom, 
            t = (this.top - this.bottom) / this.view.fullHeight / this.zoom, i = (r += n * this.view.offsetX) + n * this.view.width, 
            o = (e -= t * this.view.offsetY) - t * this.view.height), this.projectionMatrix.makeOrthographic(r, i, e, o, this.near, this.far), 
            this.projectionMatrixInverse.getInverse(this.projectionMatrix);
        }
    });
    var H = [ new h(), new h(), new h(), new h(), new h(), new h(), new h(), new h() ], V = new h(), W = new nt(), Y = new h(), X = new h(), Z = new h(), q = new h(), K = new h(), J = new h(), Q = new h(), $ = new h(), tt = new h(), et = new h();
    function nt(t, e) {
        this.min = void 0 !== t ? t : new h(1 / 0, 1 / 0, 1 / 0), this.max = void 0 !== e ? e : new h(-1 / 0, -1 / 0, -1 / 0);
    }
    function rt(t, e, n, r, i) {
        for (var o = 0, a = t.length - 3; o <= a; o += 3) {
            et.fromArray(t, o);
            var s = i.x * Math.abs(et.x) + i.y * Math.abs(et.y) + i.z * Math.abs(et.z), l = e.dot(et), u = n.dot(et), c = r.dot(et);
            if (Math.max(-Math.max(l, u, c), Math.min(l, u, c)) > s) return !1;
        }
        return !0;
    }
    Object.assign(nt.prototype, {
        isBox3: !0,
        set: function(t, e) {
            return this.min.copy(t), this.max.copy(e), this;
        },
        setFromArray: function(t) {
            for (var e = 1 / 0, n = 1 / 0, r = 1 / 0, i = -1 / 0, o = -1 / 0, a = -1 / 0, s = 0, l = t.length; s < l; s += 3) {
                var u = t[s], c = t[s + 1], h = t[s + 2];
                u < e && (e = u), c < n && (n = c), h < r && (r = h), i < u && (i = u), o < c && (o = c), 
                a < h && (a = h);
            }
            return this.min.set(e, n, r), this.max.set(i, o, a), this;
        },
        setFromBufferAttribute: function(t) {
            for (var e = 1 / 0, n = 1 / 0, r = 1 / 0, i = -1 / 0, o = -1 / 0, a = -1 / 0, s = 0, l = t.count; s < l; s++) {
                var u = t.getX(s), c = t.getY(s), h = t.getZ(s);
                u < e && (e = u), c < n && (n = c), h < r && (r = h), i < u && (i = u), o < c && (o = c), 
                a < h && (a = h);
            }
            return this.min.set(e, n, r), this.max.set(i, o, a), this;
        },
        setFromPoints: function(t) {
            this.makeEmpty();
            for (var e = 0, n = t.length; e < n; e++) this.expandByPoint(t[e]);
            return this;
        },
        setFromCenterAndSize: function(t, e) {
            return e = V.copy(e).multiplyScalar(.5), this.min.copy(t).sub(e), this.max.copy(t).add(e), 
            this;
        },
        setFromObject: function(t) {
            return this.makeEmpty(), this.expandByObject(t);
        },
        clone: function() {
            return new this.constructor().copy(this);
        },
        copy: function(t) {
            return this.min.copy(t.min), this.max.copy(t.max), this;
        },
        makeEmpty: function() {
            return this.min.x = this.min.y = this.min.z = 1 / 0, this.max.x = this.max.y = this.max.z = -1 / 0, 
            this;
        },
        isEmpty: function() {
            return this.max.x < this.min.x || this.max.y < this.min.y || this.max.z < this.min.z;
        },
        getCenter: function(t) {
            return void 0 === t && (console.warn("THREE.Box3: .getCenter() target is now required"), 
            t = new h()), this.isEmpty() ? t.set(0, 0, 0) : t.addVectors(this.min, this.max).multiplyScalar(.5);
        },
        getSize: function(t) {
            return void 0 === t && (console.warn("THREE.Box3: .getSize() target is now required"), 
            t = new h()), this.isEmpty() ? t.set(0, 0, 0) : t.subVectors(this.max, this.min);
        },
        expandByPoint: function(t) {
            return this.min.min(t), this.max.max(t), this;
        },
        expandByVector: function(t) {
            return this.min.sub(t), this.max.add(t), this;
        },
        expandByScalar: function(t) {
            return this.min.addScalar(-t), this.max.addScalar(t), this;
        },
        expandByObject: function(t) {
            t.updateWorldMatrix(!1, !1);
            for (var e = t.geometry, n = (void 0 !== e && (null === e.boundingBox && e.computeBoundingBox(), 
            W.copy(e.boundingBox), W.applyMatrix4(t.matrixWorld), this.union(W)), t.children), r = 0, i = n.length; r < i; r++) this.expandByObject(n[r]);
            return this;
        },
        containsPoint: function(t) {
            return !(t.x < this.min.x || t.x > this.max.x || t.y < this.min.y || t.y > this.max.y || t.z < this.min.z || t.z > this.max.z);
        },
        containsBox: function(t) {
            return this.min.x <= t.min.x && t.max.x <= this.max.x && this.min.y <= t.min.y && t.max.y <= this.max.y && this.min.z <= t.min.z && t.max.z <= this.max.z;
        },
        getParameter: function(t, e) {
            return void 0 === e && (console.warn("THREE.Box3: .getParameter() target is now required"), 
            e = new h()), e.set((t.x - this.min.x) / (this.max.x - this.min.x), (t.y - this.min.y) / (this.max.y - this.min.y), (t.z - this.min.z) / (this.max.z - this.min.z));
        },
        intersectsBox: function(t) {
            return !(t.max.x < this.min.x || t.min.x > this.max.x || t.max.y < this.min.y || t.min.y > this.max.y || t.max.z < this.min.z || t.min.z > this.max.z);
        },
        intersectsSphere: function(t) {
            return this.clampPoint(t.center, V), V.distanceToSquared(t.center) <= t.radius * t.radius;
        },
        intersectsPlane: function(t) {
            var e, n = 0 < t.normal.x ? (e = t.normal.x * this.min.x, t.normal.x * this.max.x) : (e = t.normal.x * this.max.x, 
            t.normal.x * this.min.x);
            return 0 < t.normal.y ? (e += t.normal.y * this.min.y, n += t.normal.y * this.max.y) : (e += t.normal.y * this.max.y, 
            n += t.normal.y * this.min.y), 0 < t.normal.z ? (e += t.normal.z * this.min.z, n += t.normal.z * this.max.z) : (e += t.normal.z * this.max.z, 
            n += t.normal.z * this.min.z), e <= -t.constant && n >= -t.constant;
        },
        intersectsTriangle: function(t) {
            return !this.isEmpty() && (this.getCenter(Q), $.subVectors(this.max, Q), Y.subVectors(t.a, Q), 
            X.subVectors(t.b, Q), Z.subVectors(t.c, Q), q.subVectors(X, Y), K.subVectors(Z, X), 
            J.subVectors(Y, Z), !!rt([ 0, -q.z, q.y, 0, -K.z, K.y, 0, -J.z, J.y, q.z, 0, -q.x, K.z, 0, -K.x, J.z, 0, -J.x, -q.y, q.x, 0, -K.y, K.x, 0, -J.y, J.x, 0 ], Y, X, Z, $)) && !!rt([ 1, 0, 0, 0, 1, 0, 0, 0, 1 ], Y, X, Z, $) && (tt.crossVectors(q, K), 
            rt([ tt.x, tt.y, tt.z ], Y, X, Z, $));
        },
        clampPoint: function(t, e) {
            return void 0 === e && (console.warn("THREE.Box3: .clampPoint() target is now required"), 
            e = new h()), e.copy(t).clamp(this.min, this.max);
        },
        distanceToPoint: function(t) {
            return V.copy(t).clamp(this.min, this.max).sub(t).length();
        },
        getBoundingSphere: function(t) {
            return void 0 === t && console.error("THREE.Box3: .getBoundingSphere() target is now required"), 
            this.getCenter(t.center), t.radius = .5 * this.getSize(V).length(), t;
        },
        intersect: function(t) {
            return this.min.max(t.min), this.max.min(t.max), this.isEmpty() && this.makeEmpty(), 
            this;
        },
        union: function(t) {
            return this.min.min(t.min), this.max.max(t.max), this;
        },
        applyMatrix4: function(t) {
            return this.isEmpty() || (H[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(t), 
            H[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(t), H[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(t), 
            H[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(t), H[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(t), 
            H[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(t), H[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(t), 
            H[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(t), this.setFromPoints(H)), 
            this;
        },
        translate: function(t) {
            return this.min.add(t), this.max.add(t), this;
        },
        equals: function(t) {
            return t.min.equals(this.min) && t.max.equals(this.max);
        }
    });
    var it = new nt();
    function ot(t, e) {
        this.center = void 0 !== t ? t : new h(), this.radius = void 0 !== e ? e : 0;
    }
    Object.assign(ot.prototype, {
        set: function(t, e) {
            return this.center.copy(t), this.radius = e, this;
        },
        setFromPoints: function(t, e) {
            for (var n = this.center, r = (void 0 !== e ? n.copy(e) : it.setFromPoints(t).getCenter(n), 
            0), i = 0, o = t.length; i < o; i++) r = Math.max(r, n.distanceToSquared(t[i]));
            return this.radius = Math.sqrt(r), this;
        },
        clone: function() {
            return new this.constructor().copy(this);
        },
        copy: function(t) {
            return this.center.copy(t.center), this.radius = t.radius, this;
        },
        empty: function() {
            return this.radius <= 0;
        },
        containsPoint: function(t) {
            return t.distanceToSquared(this.center) <= this.radius * this.radius;
        },
        distanceToPoint: function(t) {
            return t.distanceTo(this.center) - this.radius;
        },
        intersectsSphere: function(t) {
            var e = this.radius + t.radius;
            return t.center.distanceToSquared(this.center) <= e * e;
        },
        intersectsBox: function(t) {
            return t.intersectsSphere(this);
        },
        intersectsPlane: function(t) {
            return Math.abs(t.distanceToPoint(this.center)) <= this.radius;
        },
        clampPoint: function(t, e) {
            var n = this.center.distanceToSquared(t);
            return void 0 === e && (console.warn("THREE.Sphere: .clampPoint() target is now required"), 
            e = new h()), e.copy(t), n > this.radius * this.radius && (e.sub(this.center).normalize(), 
            e.multiplyScalar(this.radius).add(this.center)), e;
        },
        getBoundingBox: function(t) {
            return void 0 === t && (console.warn("THREE.Sphere: .getBoundingBox() target is now required"), 
            t = new nt()), t.set(this.center, this.center), t.expandByScalar(this.radius), t;
        },
        applyMatrix4: function(t) {
            return this.center.applyMatrix4(t), this.radius = this.radius * t.getMaxScaleOnAxis(), 
            this;
        },
        translate: function(t) {
            return this.center.add(t), this;
        },
        equals: function(t) {
            return t.center.equals(this.center) && t.radius === this.radius;
        }
    });
    var at = new h(), st = new h(), lt = new O();
    function ut(t, e) {
        this.normal = void 0 !== t ? t : new h(1, 0, 0), this.constant = void 0 !== e ? e : 0;
    }
    Object.assign(ut.prototype, {
        isPlane: !0,
        set: function(t, e) {
            return this.normal.copy(t), this.constant = e, this;
        },
        setComponents: function(t, e, n, r) {
            return this.normal.set(t, e, n), this.constant = r, this;
        },
        setFromNormalAndCoplanarPoint: function(t, e) {
            return this.normal.copy(t), this.constant = -e.dot(this.normal), this;
        },
        setFromCoplanarPoints: function(t, e, n) {
            return n = at.subVectors(n, e).cross(st.subVectors(t, e)).normalize(), this.setFromNormalAndCoplanarPoint(n, t), 
            this;
        },
        clone: function() {
            return new this.constructor().copy(this);
        },
        copy: function(t) {
            return this.normal.copy(t.normal), this.constant = t.constant, this;
        },
        normalize: function() {
            var t = 1 / this.normal.length();
            return this.normal.multiplyScalar(t), this.constant *= t, this;
        },
        negate: function() {
            return this.constant *= -1, this.normal.negate(), this;
        },
        distanceToPoint: function(t) {
            return this.normal.dot(t) + this.constant;
        },
        distanceToSphere: function(t) {
            return this.distanceToPoint(t.center) - t.radius;
        },
        projectPoint: function(t, e) {
            return void 0 === e && (console.warn("THREE.Plane: .projectPoint() target is now required"), 
            e = new h()), e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t);
        },
        intersectLine: function(t, e) {
            void 0 === e && (console.warn("THREE.Plane: .intersectLine() target is now required"), 
            e = new h());
            var n = t.delta(at), r = this.normal.dot(n);
            return 0 === r ? 0 === this.distanceToPoint(t.start) ? e.copy(t.start) : void 0 : (r = -(t.start.dot(this.normal) + this.constant) / r) < 0 || 1 < r ? void 0 : e.copy(n).multiplyScalar(r).add(t.start);
        },
        intersectsLine: function(t) {
            var e = this.distanceToPoint(t.start);
            t = this.distanceToPoint(t.end);
            return e < 0 && 0 < t || t < 0 && 0 < e;
        },
        intersectsBox: function(t) {
            return t.intersectsPlane(this);
        },
        intersectsSphere: function(t) {
            return t.intersectsPlane(this);
        },
        coplanarPoint: function(t) {
            return void 0 === t && (console.warn("THREE.Plane: .coplanarPoint() target is now required"), 
            t = new h()), t.copy(this.normal).multiplyScalar(-this.constant);
        },
        applyMatrix4: function(t, e) {
            return e = e || lt.getNormalMatrix(t), t = this.coplanarPoint(at).applyMatrix4(t), 
            e = this.normal.applyMatrix3(e).normalize(), this.constant = -t.dot(e), this;
        },
        translate: function(t) {
            return this.constant -= t.dot(this.normal), this;
        },
        equals: function(t) {
            return t.normal.equals(this.normal) && t.constant === this.constant;
        }
    });
    var ct = new ot(), ht = new h();
    function ft(t, e, n, r, i, o) {
        this.planes = [ void 0 !== t ? t : new ut(), void 0 !== e ? e : new ut(), void 0 !== n ? n : new ut(), void 0 !== r ? r : new ut(), void 0 !== i ? i : new ut(), void 0 !== o ? o : new ut() ];
    }
    Object.assign(ft.prototype, {
        set: function(t, e, n, r, i, o) {
            var a = this.planes;
            return a[0].copy(t), a[1].copy(e), a[2].copy(n), a[3].copy(r), a[4].copy(i), a[5].copy(o), 
            this;
        },
        clone: function() {
            return new this.constructor().copy(this);
        },
        copy: function(t) {
            for (var e = this.planes, n = 0; n < 6; n++) e[n].copy(t.planes[n]);
            return this;
        },
        setFromProjectionMatrix: function(t) {
            var e = this.planes, n = (t = t.elements)[0], r = t[1], i = t[2], o = t[3], a = t[4], s = t[5], l = t[6], u = t[7], c = t[8], h = t[9], f = t[10], p = t[11], d = t[12], y = t[13], m = t[14];
            t = t[15];
            return e[0].setComponents(o - n, u - a, p - c, t - d).normalize(), e[1].setComponents(o + n, u + a, p + c, t + d).normalize(), 
            e[2].setComponents(o + r, u + s, p + h, t + y).normalize(), e[3].setComponents(o - r, u - s, p - h, t - y).normalize(), 
            e[4].setComponents(o - i, u - l, p - f, t - m).normalize(), e[5].setComponents(o + i, u + l, p + f, t + m).normalize(), 
            this;
        },
        intersectsObject: function(t) {
            var e = t.geometry;
            return null === e.boundingSphere && e.computeBoundingSphere(), ct.copy(e.boundingSphere).applyMatrix4(t.matrixWorld), 
            this.intersectsSphere(ct);
        },
        intersectsSprite: function(t) {
            return ct.center.set(0, 0, 0), ct.radius = .7071067811865476, ct.applyMatrix4(t.matrixWorld), 
            this.intersectsSphere(ct);
        },
        intersectsSphere: function(t) {
            for (var e = this.planes, n = t.center, r = -t.radius, i = 0; i < 6; i++) if (e[i].distanceToPoint(n) < r) return !1;
            return !0;
        },
        intersectsBox: function(t) {
            for (var e = this.planes, n = 0; n < 6; n++) {
                var r = e[n];
                if (ht.x = (0 < r.normal.x ? t.max : t.min).x, ht.y = (0 < r.normal.y ? t.max : t.min).y, 
                ht.z = (0 < r.normal.z ? t.max : t.min).z, r.distanceToPoint(ht) < 0) return !1;
            }
            return !0;
        },
        containsPoint: function(t) {
            for (var e = this.planes, n = 0; n < 6; n++) if (e[n].distanceToPoint(t) < 0) return !1;
            return !0;
        }
    });
    var pt = 1e3, dt = 1001, yt = 1003, mt = 1006, vt = 1015, gt = 1022, bt = 1023, xt = 2300, wt = 2301, St = 2400, _t = 2401, Et = 7681;
    function Ot(t, e, n) {
        return this.radius = void 0 !== t ? t : 1, this.phi = void 0 !== e ? e : 0, this.theta = void 0 !== n ? n : 0, 
        this;
    }
    function Mt(t, e) {
        this.x = t || 0, this.y = e || 0;
    }
    function Tt(t) {
        return (Tt = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Lt(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Tt(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Tt(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Tt(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function At(t, e, n) {
        var r, i, o, a, s, u, c = this, f = (void 0 === e && console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'), 
        e === document && console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'), 
        this.object = t, this.isScreenLock = !1, this.domElement = e, this.jt = n, this.enabled = !0, 
        this.useRange = !1, this.target = new h(), this.minDistance = 0, this.maxDistance = 1 / 0, 
        this.minZoom = 0, this.maxZoom = 1 / 0, this.minPolarAngle = 0, this.maxPolarAngle = Math.PI, 
        this.minAzimuthAngle = -1 / 0, this.maxAzimuthAngle = 1 / 0, this.enableDamping = !1, 
        this.isDamping = !1, this.dampingFactor = .25, this.enableZoom = !0, this.zoomSpeed = 1, 
        this.zoomSpeedParam = 1, this.enableRotate = !0, this.enableRotateLeft = !0, this.enableRotateUp = !0, 
        this.rotateSpeed = 2, this.enablePan = !0, this.panSpeed = 1, this.screenSpacePanning = !1, 
        this.keyPanSpeed = 7, this.autoRotate = !1, this.autoRotateSpeed = 2, this.enableKeys = !0, 
        this.keys = {
            LEFT: 37,
            UP: 38,
            RIGHT: 39,
            BOTTOM: 40
        }, this.mouseButtons = {
            LEFT: 0,
            MIDDLE: 1,
            RIGHT: 2
        }, this.touches = {
            ONE: 0,
            TWO: 2
        }, this.target0 = this.target.clone(), this.position0 = this.object.position.clone(), 
        this.zoom0 = this.object.zoom, this.rotateLeftStart = new Mt(), this.rotateLeftEnd = new Mt(), 
        this.mapStateArray = [], this.timelone = null, this.Lt = function() {
            c.isDamping && (w.theta > g || w.phi > g || _.length() > g ? (c.update(), c.jt.enableUpdateRender()) : (c.isDamping = !1, 
            c.update()));
        }, this.Lt = this.Lt.bind(this), this.jt.on("beforeRender", this.Lt), this.getPolarAngle = function() {
            return x.phi;
        }, this.getAzimuthalAngle = function() {
            return x.theta;
        }, this.panAdd = function(t) {
            _.add(t);
        }, this.saveState = function() {
            f.target0.copy(f.target), f.position0.copy(f.object.position), f.zoom0 = f.object.zoom;
        }, this.resetState = function() {
            v = m.NONE;
        }, this.reset = function() {
            f.target.copy(f.target0), f.object.position.copy(f.position0), f.object.zoom = f.zoom0, 
            f.object.updateProjectionMatrix(), f.dispatchEvent(p), f.update(), v = m.NONE;
        }, this.updateCheck = function() {
            if (this.jt.kt && this.jt.kt.enableDragRange) if (this.jt.kt.At()) this.saveMapState(); else {
                for (var t, e = this.mapStateArray.length - 1; 0 <= e; ) {
                    var n = this.mapStateArray[e];
                    if (n.viewMode = this.jt.getViewMode(), this.updateState(n), this.jt.kt.At()) break;
                    e--;
                }
                e < 0 && (t = (t = this.jt.getBuilding(this.jt.kt.Ct.Rt)).getFloor(t.level), this.jt.setCenter({
                    x: t.x,
                    y: t.y
                }));
            }
        }, this.updateState = function(t) {
            var e = this;
            this.jt.kt.pauseDamping(), this.jt.setCenter({
                animate: !1,
                x: t.center.x,
                y: t.center.y,
                finish: function() {
                    e.jt.setRotation({
                        animate: !1,
                        rotation: t.rotation,
                        finish: function() {
                            e.jt.setTilt({
                                animate: !1,
                                tilt: t.tiltAngle,
                                finish: function() {
                                    e.jt.setZoom({
                                        animate: !1,
                                        zoom: t.zoom
                                    });
                                }
                            });
                        }
                    });
                }
            });
        }, this.saveMapState = function() {
            var t = this.jt.getState();
            !function(t) {
                var e, n = !0;
                for (e in t) if ("" + e != "level" && "" + e != "visibleLevels" && "" + e != "viewBuildingID" && "" + e != "floorSpace" && "" + e != "viewMode") if ("" + e == "center") {
                    var r = t[e];
                    if (isNaN(parseFloat("" + r.x)) || isNaN(parseFloat("" + r.y))) {
                        n = !1;
                        break;
                    }
                } else if (isNaN(parseFloat("" + t[e]))) {
                    n = !1;
                    break;
                }
                return n;
            }(t) || (200 <= this.mapStateArray.length && this.mapStateArray.splice(0, 1), this.mapStateArray.push(t));
        }, this.getTarget = function(t, e) {
            var n, r;
            return 0 === this.jt.Nt.length ? t : (n = this.jt.getMapOptions().screenLockCoords, 
            r = {
                x: this.jt.getContainer().clientWidth / 2,
                y: this.jt.getContainer().clientHeight / 2
            }, n = {
                x: this.jt.getContainer().clientWidth * n.x,
                y: this.jt.getContainer().clientHeight * n.y
            }, (r = Rt.coordsScreenToMap(this.jt, r, e)).x = r.x - this.jt.x, r.y = -r.y + this.jt.y, 
            (n = Rt.coordsScreenToMap(this.jt, n, e)).x = n.x - this.jt.x, n.y = -n.y + this.jt.y, 
            e = n.x - r.x, n = n.y - r.y, r = t.clone(), isNaN(e) || isNaN(n) || 1e3 < Math.abs(n) || 1e3 < Math.abs(e) || (r.x = r.x - e, 
            r.z = r.z - n), r);
        }, this.update = (r = new h(), i = new l().setFromUnitVectors(t.up, new h(0, 1, 0)), 
        o = i.clone().inverse(), a = new h(), s = new l(), u = 0, function(t) {
            t = t || {};
            var e, n = f.object.position;
            return r.copy(n).sub(f.target), r.applyQuaternion(i), x.setFromVector3(r), f.autoRotate && v === m.NONE && C(2 * Math.PI / 60 / 60 * f.autoRotateSpeed), 
            f.enableDamping && f.isDamping ? (x.theta += w.theta * f.dampingFactor, x.phi += w.phi * f.dampingFactor) : (x.theta += w.theta, 
            x.phi += w.phi), x.theta = Math.max(f.minAzimuthAngle, Math.min(f.maxAzimuthAngle, x.theta)), 
            t && void 0 !== t.theta && (x.theta = Math.max(f.minAzimuthAngle, Math.min(f.maxAzimuthAngle, t.theta))), 
            x.phi = Math.max(f.minPolarAngle, Math.min(f.maxPolarAngle, x.phi)), t && void 0 !== t.phi && (x.phi = Math.max(f.minPolarAngle, Math.min(f.maxPolarAngle, t.phi))), 
            x.makeSafe(), x.radius *= S, x.radius = Math.max(f.minDistance, Math.min(f.maxDistance, x.radius)), 
            this.useRange ? ((e = new h().setFromMatrixPosition(f.object.matrixWorld)).add(_), 
            e = new b().copy(f.object.matrixWorld).setPosition(e), e = new b().getInverse(e), 
            new ft().setFromProjectionMatrix(new b().multiplyMatrices(f.object.projectionMatrix, e)).intersectsSphere(f.viewSphere) && f.target.add(_)) : f.enableDamping && f.isDamping ? f.target.addScaledVector(_, f.dampingFactor) : f.target.add(_), 
            r.setFromSpherical(x), r.applyQuaternion(o), t && t.offset && r.add(t.offset), this.useRange && ((e = new h().setFromMatrixPosition(f.object.matrixWorld)).add(r), 
            t = new b().copy(f.object.matrixWorld).setPosition(e), e = new b().getInverse(t), 
            !new ft().setFromProjectionMatrix(new b().multiplyMatrices(f.object.projectionMatrix, e)).intersectsSphere(f.viewSphere)) || n.copy(f.target).add(r), 
            f.isScreenLock && void 0 !== this.jt.getMapOptions().screenLockCoords ? ((t = f.object.clone()).lookAt(f.target), 
            f.object.lookAt(this.getTarget(f.target, t)), f.object.rotation.z = t.rotation.z) : f.object.lookAt(f.target), 
            f.enableDamping && f.isDamping ? (w.theta *= 1 - f.dampingFactor, w.phi *= 1 - f.dampingFactor, 
            _.multiplyScalar(1 - f.dampingFactor)) : (w.set(0, 0, 0), _.set(0, 0, 0)), S = 1, 
            !(!(E || a.distanceToSquared(f.object.position) > g || 8 * (1 - s.dot(f.object.quaternion)) > g || u !== f.object.zoom) || (f.dispatchEvent(p), 
            a.copy(f.object.position), s.copy(f.object.quaternion), u = f.object.zoom, E = !1));
        }), this.dispose = function() {
            f.domElement.removeEventListener("contextmenu", lt, !1), f.domElement.removeEventListener("mousedown", tt, !1), 
            f.domElement.removeEventListener("wheel", rt, !1), f.domElement.removeEventListener("touchstart", ot, !1), 
            f.domElement.removeEventListener("touchend", st, !1), f.domElement.removeEventListener("touchmove", at, !1), 
            jt.a.document.removeEventListener("mousemove", et, !1), jt.a.document.removeEventListener("mouseup", nt, !1), 
            f.domElement.removeEventListener("keydown", it, !1);
        }, this), p = {
            type: "change"
        }, d = {
            type: "start"
        }, y = {
            type: "end"
        }, m = {
            NONE: -1,
            ROTATE: 0,
            DOLLY: 1,
            PAN: 2,
            TOUCH_ROTATE: 3,
            TOUCH_PAN: 4,
            TOUCH_DOLLY_PAN: 5,
            TOUCH_DOLLY_ROTATE: 6
        }, v = m.NONE, g = 1e-6, x = new Ot(), w = new Ot(), S = 1, _ = new h(), E = !1, O = new Mt(), M = new Mt(), T = new Mt(), L = new Mt(), A = new Mt(), P = new Mt(), R = new Mt(), j = new Mt(), I = new Mt(), D = null;
        function k() {
            return Math.pow(.95, f.zoomSpeed);
        }
        function C(t) {
            f.enableRotateLeft && (w.theta -= t);
        }
        function N(t) {
            f.enableRotateUp && (w.phi -= t);
        }
        F = new h();
        var F, B, U, z = function(t, e) {
            F.setFromMatrixColumn(e, 0), F.multiplyScalar(-t), _.add(F);
        }, G = (B = new h(), function(t, e) {
            !0 === f.screenSpacePanning ? B.setFromMatrixColumn(e, 1) : (B.setFromMatrixColumn(e, 0), 
            B.crossVectors(f.object.up, B)), B.multiplyScalar(t), _.add(B);
        }), H = (this.panUp = function(t) {
            var e = new h(0, 1, 0);
            e.multiplyScalar(t), _.add(e);
        }, U = new h(), function(t, e) {
            var n, r = f.domElement;
            f.object.isPerspectiveCamera ? (n = f.object.position, U.copy(n).sub(f.target), 
            n = U.length(), n *= Math.tan(f.object.fov / 2 * Math.PI / 180), z(2 * t * n / r.clientHeight, f.object.matrix), 
            G(2 * e * n / r.clientHeight, f.object.matrix)) : f.object.isOrthographicCamera ? (z(t * (f.object.right - f.object.left) / f.object.zoom / r.clientWidth, f.object.matrix), 
            G(e * (f.object.top - f.object.bottom) / f.object.zoom / r.clientHeight, f.object.matrix)) : (console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."), 
            f.enablePan = !1);
        });
        function V(t) {
            f.object.isPerspectiveCamera ? S /= t : f.object.isOrthographicCamera ? (f.object.zoom = Math.max(f.minZoom, Math.min(f.maxZoom, f.object.zoom * t)), 
            f.object.updateProjectionMatrix(), S /= t, E = !0) : (console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."), 
            f.enableZoom = !1);
        }
        function W(t) {
            f.object.isPerspectiveCamera ? S *= t : f.object.isOrthographicCamera ? (f.object.zoom = Math.max(f.minZoom, Math.min(f.maxZoom, f.object.zoom / t)), 
            f.object.updateProjectionMatrix(), S *= t, E = !0) : (console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."), 
            f.enableZoom = !1);
        }
        function Y(t) {
            O.set(t.clientX, t.clientY);
        }
        function X(t) {
            L.set(t.clientX, t.clientY);
        }
        function Z(t) {
            var e, n;
            1 == t.touches.length ? O.set(t.touches[0].pageX, t.touches[0].pageY) : (e = .5 * (t.touches[0].pageX + t.touches[1].pageX), 
            n = .5 * (t.touches[0].pageY + t.touches[1].pageY), O.set(e, n), e = t.touches[0].pageX - t.touches[1].pageX, 
            n = t.touches[0].pageY - t.touches[1].pageY, f.rotateLeftStart.set(e, n));
        }
        function q(t) {
            var e;
            1 == t.touches.length ? L.set(t.touches[0].pageX, t.touches[0].pageY) : (e = .5 * (t.touches[0].pageX + t.touches[1].pageX), 
            t = .5 * (t.touches[0].pageY + t.touches[1].pageY), L.set(e, t));
        }
        function K(t) {
            var e = t.touches[0].pageX - t.touches[1].pageX;
            t = t.touches[0].pageY - t.touches[1].pageY, e = Math.sqrt(e * e + t * t);
            R.set(0, e);
        }
        function J(t) {
            1 == t.touches.length ? M.set(t.touches[0].pageX, t.touches[0].pageY) : (n = .5 * (t.touches[0].pageX + t.touches[1].pageX), 
            e = .5 * (t.touches[0].pageY + t.touches[1].pageY), M.set(n, e), n = t.touches[0].pageX - t.touches[1].pageX, 
            e = t.touches[0].pageY - t.touches[1].pageY, f.rotateLeftEnd.set(n, e), t = f.rotateLeftStart.angle(), 
            C((-f.rotateLeftEnd.angle() + t) * f.rotateSpeed), f.rotateLeftStart.copy(f.rotateLeftEnd)), 
            T.subVectors(M, O).multiplyScalar(f.rotateSpeed);
            var e, n = f.domElement;
            N(2 * Math.PI * T.y / n.clientHeight), O.copy(M);
        }
        function Q(t) {
            var e;
            1 == t.touches.length ? (A.set(t.touches[0].pageX, t.touches[0].pageY), A.x < 0 && A.copy(L)) : (e = .5 * (t.touches[0].pageX + t.touches[1].pageX), 
            t = .5 * (t.touches[0].pageY + t.touches[1].pageY), A.set(e, t)), P.subVectors(A, L).multiplyScalar(f.panSpeed), 
            H(P.x, P.y), L.copy(A);
        }
        function $(t) {
            var e;
            t.touches[0] && t.touches[1] && (e = t.touches[0].pageX - t.touches[1].pageX, t = t.touches[0].pageY - t.touches[1].pageY, 
            e = Math.sqrt(e * e + t * t), j.set(0, e), I.set(0, Math.pow(j.y / R.y, f.zoomSpeed)), 
            V(I.y), R.copy(j));
        }
        function tt(t) {
            if (!1 !== f.enabled) {
                switch (f.activeing = !0, t.preventDefault(), (f.domElement.focus ? f.domElement : window).focus(), 
                t.button) {
                  case 0:
                    switch (f.mouseButtons.LEFT) {
                      case 0:
                        if (t.ctrlKey || t.metaKey || t.shiftKey) {
                            if (!1 === f.enablePan) return;
                            X(t), v = m.PAN;
                        } else {
                            if (!1 === f.enableRotate) return;
                            Y(t), v = m.ROTATE;
                        }
                        break;

                      case 2:
                        if (t.ctrlKey || t.metaKey || t.shiftKey) {
                            if (!1 === f.enableRotate) return;
                            Y(t), v = m.ROTATE;
                        } else {
                            if (!1 === f.enablePan) return;
                            X(t), v = m.PAN;
                        }
                        break;

                      default:
                        v = m.NONE;
                    }
                    break;

                  case 1:
                    switch (f.mouseButtons.MIDDLE) {
                      case 1:
                        if (!1 === f.enableZoom) return;
                        R.set(t.clientX, t.clientY), v = m.DOLLY;
                        break;

                      case 0:
                        if (!1 === f.enableRotate) return;
                        Y(t), v = m.ROTATE;
                        break;

                      default:
                        v = m.NONE;
                    }
                    break;

                  case 2:
                    switch (f.mouseButtons.RIGHT) {
                      case 0:
                        if (!1 === f.enableRotate) return;
                        Y(t), v = m.ROTATE;
                        break;

                      case 2:
                        if (!1 === f.enablePan) return;
                        X(t), v = m.PAN;
                        break;

                      default:
                        v = m.NONE;
                    }
                }
                v !== m.NONE && (jt.a.document.addEventListener("mousemove", et, !1), jt.a.document.addEventListener("mouseup", nt, !1), 
                f.dispatchEvent(d));
            }
        }
        function et(t) {
            var e;
            if (!1 !== f.enabled) switch (t.preventDefault(), v) {
              case m.ROTATE:
                !1 !== f.enableRotate && (e = t, M.set(e.clientX, e.clientY), T.subVectors(M, O).multiplyScalar(f.rotateSpeed), 
                e = f.domElement, C(2 * Math.PI * T.x / e.clientHeight), N(2 * Math.PI * T.y / e.clientHeight), 
                O.copy(M), f.isDamping = !0, f.update(), f.updateCheck());
                break;

              case m.DOLLY:
                !1 !== f.enableZoom && (j.set(t.clientX, t.clientY), I.subVectors(j, R), 0 < I.y ? V(k()) : I.y < 0 && W(k()), 
                R.copy(j), f.isDamping = !0, f.update(), f.updateCheck());
                break;

              case m.PAN:
                !1 !== f.enablePan && (A.set(t.clientX, t.clientY), P.subVectors(A, L).multiplyScalar(f.panSpeed), 
                H(P.x, P.y), L.copy(A), f.isDamping = !0, f.update(), f.updateCheck());
            }
        }
        function nt(t) {
            !1 !== f.enabled && (f.activeing = !1, jt.a.document.removeEventListener("mousemove", et, !1), 
            jt.a.document.removeEventListener("mouseup", nt, !1), f.dispatchEvent(y), v = m.NONE);
        }
        function rt(t) {
            var e;
            !1 === f.enabled || !1 === f.enableZoom || v !== m.NONE && v !== m.ROTATE || (f.activeing = !0, 
            void 0 !== f.wheelTimer && clearTimeout(f.wheelTimer), f.wheelTimer = setTimeout(function() {
                f.activeing = !1;
            }, 100), t.preventDefault(), t.stopPropagation(), f.dispatchEvent(d), t = t, e = Math.pow(.95, f.zoomSpeed * f.zoomSpeedParam), 
            t.deltaY < 0 ? W(e) : 0 < t.deltaY && V(e), f.isDamping = !0, f.update(), f.updateCheck(), 
            f.dispatchEvent(y));
        }
        function it(t) {
            if (!1 !== f.enabled && !1 !== f.enableKeys && !1 !== f.enablePan) {
                var e = !1;
                switch (t.keyCode) {
                  case f.keys.UP:
                    H(0, f.keyPanSpeed), e = !0;
                    break;

                  case f.keys.BOTTOM:
                    H(0, -f.keyPanSpeed), e = !0;
                    break;

                  case f.keys.LEFT:
                    H(f.keyPanSpeed, 0), e = !0;
                    break;

                  case f.keys.RIGHT:
                    H(-f.keyPanSpeed, 0), e = !0;
                }
                e && (t.preventDefault(), f.isDamping = !0, f.update(), f.updateCheck());
            }
        }
        function ot(t) {
            if (!1 !== f.enabled) {
                switch (f.activeing = !0, t.preventDefault(), t.touches.length) {
                  case 1:
                    switch (f.touches.ONE) {
                      case 0:
                        if (!1 === f.enableRotate) return;
                        Z(t), v = m.TOUCH_ROTATE;
                        break;

                      case 1:
                        if (!1 === f.enablePan) return;
                        q(t), v = m.TOUCH_PAN;
                        break;

                      default:
                        v = m.NONE;
                    }
                    break;

                  case 2:
                    switch (D = t.touches[0].identifier, f.touches.TWO) {
                      case 2:
                        if (!1 === f.enableZoom && !1 === f.enablePan) return;
                        e = t, f.enableZoom && K(e), f.enablePan && q(e), v = m.TOUCH_DOLLY_PAN;
                        break;

                      case 3:
                        if (!1 === f.enableZoom && !1 === f.enableRotate) return;
                        e = t, f.enableZoom && K(e), f.enableRotate && Z(e), v = m.TOUCH_DOLLY_ROTATE;
                        break;

                      default:
                        v = m.NONE;
                    }
                    break;

                  default:
                    v = m.NONE;
                }
                var e;
                v !== m.NONE && f.dispatchEvent(d);
            }
        }
        function at(t) {
            var e, n;
            if (!1 !== f.enabled) switch (f.activeing = !0, 2 === t.touches.length && t.touches[1].identifier === D && (e = t.touches[0], 
            t.touches[0] = t.touches[1], t.touches[1] = e), t.preventDefault(), t.stopPropagation(), 
            v) {
              case m.TOUCH_ROTATE:
                !1 !== f.enableRotate && (J(t), f.isDamping = !0, f.update(), f.updateCheck());
                break;

              case m.TOUCH_PAN:
                !1 !== f.enablePan && (Q(t), f.isDamping = !0, f.update(), f.updateCheck());
                break;

              case m.TOUCH_DOLLY_PAN:
                !1 === f.enableZoom && !1 === f.enablePan || (n = t, f.enableZoom && $(n), f.enablePan && Q(n), 
                f.isDamping = !0, f.update(), f.updateCheck());
                break;

              case m.TOUCH_DOLLY_ROTATE:
                !1 === f.enableZoom && !1 === f.enableRotate || (n = t, f.enableZoom && $(n), f.enableRotate && J(n), 
                f.isDamping = !0, f.update(), f.updateCheck());
                break;

              default:
                v = m.NONE;
            }
        }
        function st(t) {
            !1 !== f.enabled && (f.activeing = !1, f.dispatchEvent(y), v = m.NONE);
        }
        function lt(t) {
            !1 !== f.enabled && t.preventDefault();
        }
        this.dollyIn = V, this.dollyOut = W, f.domElement.addEventListener("contextmenu", lt, !1), 
        f.domElement.addEventListener("mousedown", tt, !1), f.domElement.addEventListener("wheel", rt, !1), 
        f.domElement.addEventListener("touchstart", ot, !1), f.domElement.addEventListener("touchend", st, !1), 
        f.domElement.addEventListener("touchmove", at, !1), f.domElement.addEventListener("keydown", it, !1), 
        -1 === f.domElement.tabIndex && (f.domElement.tabIndex = 0), f.isDamping = !0, this.update(), 
        this.updateCheck(), this.removeEvent = function() {
            f.domElement.removeEventListener("contextmenu", lt, !1), f.domElement.removeEventListener("mousedown", tt, !1), 
            f.domElement.removeEventListener("wheel", rt, !1), f.domElement.removeEventListener("touchstart", ot, !1), 
            f.domElement.removeEventListener("touchend", st, !1), f.domElement.removeEventListener("touchmove", at, !1), 
            f.domElement.removeEventListener("keydown", it, !1), jt.a.document.removeEventListener("mousemove", et, !1), 
            jt.a.document.removeEventListener("mouseup", nt, !1);
        };
    }
    function Pt(t, e, n) {
        At.call(this, t, e, n), this.mouseButtons.LEFT = 2, this.mouseButtons.RIGHT = 0, 
        this.touches.ONE = 1, this.touches.TWO = 3, this.Pt = null;
    }
    Object.assign(Ot.prototype, {
        set: function(t, e, n) {
            return this.radius = t, this.phi = e, this.theta = n, this;
        },
        clone: function() {
            return new this.constructor().copy(this);
        },
        copy: function(t) {
            return this.radius = t.radius, this.phi = t.phi, this.theta = t.theta, this;
        },
        makeSafe: function() {
            return this.phi = Math.max(1e-6, Math.min(Math.PI - 1e-6, this.phi)), this;
        },
        setFromVector3: function(t) {
            return this.setFromCartesianCoords(t.x, t.y, t.z);
        },
        setFromCartesianCoords: function(t, e, n) {
            return this.radius = Math.sqrt(t * t + e * e + n * n), 0 === this.radius ? (this.theta = 0, 
            this.phi = 0) : (this.theta = Math.atan2(t, n), this.phi = Math.acos(s.clamp(e / this.radius, -1, 1))), 
            this;
        }
    }), Object.defineProperties(Mt.prototype, {
        width: {
            get: function() {
                return this.x;
            },
            set: function(t) {
                this.x = t;
            }
        },
        height: {
            get: function() {
                return this.y;
            },
            set: function(t) {
                this.y = t;
            }
        }
    }), Object.assign(Mt.prototype, {
        isVector2: !0,
        set: function(t, e) {
            return this.x = t, this.y = e, this;
        },
        setScalar: function(t) {
            return this.x = t, this.y = t, this;
        },
        setX: function(t) {
            return this.x = t, this;
        },
        setY: function(t) {
            return this.y = t, this;
        },
        setComponent: function(t, e) {
            switch (t) {
              case 0:
                this.x = e;
                break;

              case 1:
                this.y = e;
                break;

              default:
                throw new Error("index is out of range: " + t);
            }
            return this;
        },
        getComponent: function(t) {
            switch (t) {
              case 0:
                return this.x;

              case 1:
                return this.y;

              default:
                throw new Error("index is out of range: " + t);
            }
        },
        clone: function() {
            return new this.constructor(this.x, this.y);
        },
        copy: function(t) {
            return this.x = t.x, this.y = t.y, this;
        },
        add: function(t, e) {
            return void 0 !== e ? (console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), 
            this.addVectors(t, e)) : (this.x += t.x, this.y += t.y, this);
        },
        addScalar: function(t) {
            return this.x += t, this.y += t, this;
        },
        addVectors: function(t, e) {
            return this.x = t.x + e.x, this.y = t.y + e.y, this;
        },
        addScaledVector: function(t, e) {
            return this.x += t.x * e, this.y += t.y * e, this;
        },
        sub: function(t, e) {
            return void 0 !== e ? (console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), 
            this.subVectors(t, e)) : (this.x -= t.x, this.y -= t.y, this);
        },
        subScalar: function(t) {
            return this.x -= t, this.y -= t, this;
        },
        subVectors: function(t, e) {
            return this.x = t.x - e.x, this.y = t.y - e.y, this;
        },
        multiply: function(t) {
            return this.x *= t.x, this.y *= t.y, this;
        },
        multiplyScalar: function(t) {
            return this.x *= t, this.y *= t, this;
        },
        divide: function(t) {
            return this.x /= t.x, this.y /= t.y, this;
        },
        divideScalar: function(t) {
            return this.multiplyScalar(1 / t);
        },
        applyMatrix3: function(t) {
            var e = this.x, n = this.y;
            t = t.elements;
            return this.x = t[0] * e + t[3] * n + t[6], this.y = t[1] * e + t[4] * n + t[7], 
            this;
        },
        min: function(t) {
            return this.x = Math.min(this.x, t.x), this.y = Math.min(this.y, t.y), this;
        },
        max: function(t) {
            return this.x = Math.max(this.x, t.x), this.y = Math.max(this.y, t.y), this;
        },
        clamp: function(t, e) {
            return this.x = Math.max(t.x, Math.min(e.x, this.x)), this.y = Math.max(t.y, Math.min(e.y, this.y)), 
            this;
        },
        clampScalar: function(t, e) {
            return this.x = Math.max(t, Math.min(e, this.x)), this.y = Math.max(t, Math.min(e, this.y)), 
            this;
        },
        clampLength: function(t, e) {
            var n = this.length();
            return this.divideScalar(n || 1).multiplyScalar(Math.max(t, Math.min(e, n)));
        },
        floor: function() {
            return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this;
        },
        ceil: function() {
            return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this;
        },
        round: function() {
            return this.x = Math.round(this.x), this.y = Math.round(this.y), this;
        },
        roundToZero: function() {
            return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), 
            this;
        },
        negate: function() {
            return this.x = -this.x, this.y = -this.y, this;
        },
        dot: function(t) {
            return this.x * t.x + this.y * t.y;
        },
        cross: function(t) {
            return this.x * t.y - this.y * t.x;
        },
        lengthSq: function() {
            return this.x * this.x + this.y * this.y;
        },
        length: function() {
            return Math.sqrt(this.x * this.x + this.y * this.y);
        },
        manhattanLength: function() {
            return Math.abs(this.x) + Math.abs(this.y);
        },
        normalize: function() {
            return this.divideScalar(this.length() || 1);
        },
        angle: function() {
            return Math.atan2(-this.y, -this.x) + Math.PI;
        },
        distanceTo: function(t) {
            return Math.sqrt(this.distanceToSquared(t));
        },
        distanceToSquared: function(t) {
            var e = this.x - t.x;
            return e * e + (t = this.y - t.y) * t;
        },
        manhattanDistanceTo: function(t) {
            return Math.abs(this.x - t.x) + Math.abs(this.y - t.y);
        },
        setLength: function(t) {
            return this.normalize().multiplyScalar(t);
        },
        lerp: function(t, e) {
            return this.x += (t.x - this.x) * e, this.y += (t.y - this.y) * e, this;
        },
        lerpVectors: function(t, e, n) {
            return this.subVectors(e, t).multiplyScalar(n).add(t);
        },
        equals: function(t) {
            return t.x === this.x && t.y === this.y;
        },
        fromArray: function(t, e) {
            return this.x = t[e = void 0 === e ? 0 : e], this.y = t[e + 1], this;
        },
        toArray: function(t, e) {
            return (t = void 0 === t ? [] : t)[e = void 0 === e ? 0 : e] = this.x, t[e + 1] = this.y, 
            t;
        },
        fromBufferAttribute: function(t, e, n) {
            return void 0 !== n && console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."), 
            this.x = t.getX(e), this.y = t.getY(e), this;
        },
        rotateAround: function(t, e) {
            var n = Math.cos(e), r = (e = Math.sin(e), this.x - t.x), i = this.y - t.y;
            return this.x = r * n - i * e + t.x, this.y = r * e + i * n + t.y, this;
        }
    });
    var Rt = function() {
        function t() {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
        }
        var e, n;
        return e = t, n = [ {
            key: "coordsMapToScreen",
            value: function(t, e) {
                var n = void 0 !== e.height ? e.height : 0, r = t.getMapOptions().buildingID, i = (r = (e.buildingID && (r = e.buildingID), 
                t.getBuilding(r)), (void 0 !== e.level ? e : r).level);
                r = void 0 !== e.z ? e.z : r.getFloor(i).nt;
                return this.coordsMapToScreen_(t, {
                    x: e.x,
                    y: e.y,
                    z: r + n
                });
            }
        }, {
            key: "coordsScreenToMap",
            value: function(t, e, n) {
                var r, i, o = (void 0 !== e.buildingID ? e : t.getMapOptions()).buildingID, a = (o = t.getBuilding(o), 
                t.Dt), s = (void 0 !== e.level ? e : o).level, l = (o = void 0 !== e.z ? e.z : o.getFloor(s).nt, 
                s = null, t.It.renderer.domElement.clientWidth), u = t.It.renderer.domElement.clientHeight, c = new h(), f = new h();
                t = (null != (n = (s = n || t.kt.Ft.object).userData) && n.near ? s.userData : s).near, 
                n = (null != (n = s.userData) && n.far ? s.userData : s).far;
                return {
                    x: (e = ((l = (s.isPerspectiveCamera ? (s.updateMatrixWorld(), c.setFromMatrixPosition(s.matrixWorld), 
                    r = e.x / l * 2 - 1, i = -e.y / u * 2 + 1, f.set(r, i, t).unproject(s).sub(c).normalize()) : (r = e.x / l * 2 - 1, 
                    i = -e.y / u * 2 + 1, c.set(r, i, (t + n) / (t - n)).unproject(s), f.set(0, 0, -1).transformDirection(s.matrixWorld)), 
                    (-c.y + o) / f.y)) < 0 && (l = n), new h().copy(c).add(new h().copy(f).multiplyScalar(l)))).x + a.x,
                    y: a.y - e.z,
                    z: o
                };
            }
        }, {
            key: "coordsMapToScreen_",
            value: function(t, e) {
                var n = t.kt.Ft.object, r = (null != (r = n.userData) && r.near ? n.userData : n).near, i = (null != (i = n.userData) && i.far ? n.userData : n).far, o = n.near, a = n.far;
                n.near = r, n.far = i, n.updateProjectionMatrix(), r = t.Dt, i = new h(e.x - r.x, e.z, -e.y + r.y).project(n), 
                e = t.It.renderer.domElement.clientWidth, r = t.It.renderer.domElement.clientHeight;
                return n.near = o, n.far = a, n.updateProjectionMatrix(), i.z < -1 || 1 < i.z ? null : {
                    x: Math.round(e / 2 * i.x + e / 2),
                    y: Math.round(-r / 2 * i.y + r / 2)
                };
            }
        } ], null && Lt(e.prototype, null), n && Lt(e, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }(), jt = n(0), It = ((At.prototype = Object.create(x.prototype)).constructor = At, 
    (Pt.prototype = Object.create(x.prototype)).constructor = Pt, Object.assign(Pt.prototype, {
        setMouseMiddleButtonRotation: function() {
            this.mouseButtons.RIGHT = 3, this.mouseButtons.MIDDLE = 0;
        },
        dispose: function() {
            this.removeEvent(), this.object = null, this.domElement = null, this.jt.off("beforeRender", this.jt.Lt), 
            this.jt = null;
        },
        pauseDamping: function() {
            this.Pt = {
                dampingFactor: this.dampingFactor,
                enableDamping: this.enableDamping
            }, this.enableDamping = !1, this.dampingFactor = 1;
        },
        resumeDamping: function() {
            this.Pt && (this.enableDamping = this.Pt.enableDamping, this.dampingFactor = this.Pt.dampingFactor);
        }
    }), {
        FOV: 35,
        CAMERA_NEAR: 1,
        CAMERA_FAR: 1e5,
        ZOOM_UPPER_BOUND: 30,
        TILT_UPPER_BOUND: 90,
        THOUSAND: 1e3,
        DEG2RAD: .0174532,
        RAD2DEG: 57.2957795,
        DRAW_TIME: 500,
        EPS: .001
    }), Dt = (Object.freeze(It), It), kt = (It = {
        MODE_3D: 2,
        MODE_2D: 4
    }, Object.freeze(It), It), Ct = ((It = {
        NONE: 0,
        EXTRUDE_MARKER: 2,
        FM3DTILE_LAYER: 4,
        IMAGE_MARKER: 8,
        LOCATION_MARKER: 16,
        POLYGON_MARKER: 32,
        TEXT_MARKER: 64,
        LINE_MARKER: 128,
        LINE3D_MARKER: 256,
        HEAT_MAP_MARKER: 512,
        EXTENT: 1024,
        EXTERNAL_MODEL: 2048,
        MODEL: 4096,
        FACILITY: 8192,
        LABEL: 16384,
        DYNAMIC_MODEL_MARKER: 32768,
        DOM_MARKER: 65536,
        SPHERE_MARKER: 1 << 17,
        CAD_LAYER: 1 << 18,
        EXTENT_LAYER: 1 << 20,
        EXTERNAL_MODEL_LAYER: 1 << 21,
        MODEL_LAYER: 1 << 22,
        FACILITY_LAYER: 1 << 23,
        LABEL_LAYER: 1 << 24,
        MARKER_GROUP: 1 << 25,
        FLOW_LINE_LAYER: 1 << 27,
        FLOW_LINE_MARKER: 1 << 27,
        FIRE_MARKER: 1 << 28,
        WALL_MARKER: 1 << 29,
        TUBE_MARKER: 1 << 30
    }).LAYER_NODE_TYPE = new Map(), It.LAYER_NODE_TYPE.set(It.EXTENT_LAYER, It.EXTENT), 
    It.LAYER_NODE_TYPE.set(It.EXTERNAL_MODEL_LAYER, It.EXTERNAL_MODEL), It.LAYER_NODE_TYPE.set(It.MODEL_LAYER, It.MODEL), 
    It.LAYER_NODE_TYPE.set(It.FACILITY_LAYER, It.FACILITY), It.LAYER_NODE_TYPE.set(It.LABEL_LAYER, It.LABEL), 
    It.LAYER_NODE_TYPE.set(It.DOM_MARKER, It.DOM_MARKER), It.LAYER_NODE_TYPE.set(It.DYNAMIC_MODEL_MARKER, It.DYNAMIC_MODEL_MARKER), 
    It.LAYER_NODE_TYPE.set(It.EXTRUDE_MARKER, It.EXTRUDE_MARKER), It.LAYER_NODE_TYPE.set(It.HEAT_MAP_MARKER, It.HEAT_MAP_MARKER), 
    It.LAYER_NODE_TYPE.set(It.LINE_MARKER, It.LINE_MARKER), It.LAYER_NODE_TYPE.set(It.LOCATION_MARKER, It.LOCATION_MARKER), 
    It.LAYER_NODE_TYPE.set(It.POLYGON_MARKER, It.POLYGON_MARKER), It.LAYER_NODE_TYPE.set(It.TEXT_MARKER, It.TEXT_MARKER), 
    It.LAYER_NODE_TYPE.set(It.IMAGE_MARKER, It.IMAGE_MARKER), It.LAYER_NODE_TYPE.set(It.FLOW_LINE_LAYER, It.FLOW_LINE_MARKER), 
    It.LAYER_NODE_TYPE.set(It.FIRE_MARKER, It.FIRE_MARKER), It.LAYER_NODE_TYPE.set(It.WALL_MARKER, It.WALL_MARKER), 
    It.LAYER_NODE_TYPE.set(It.TUBE_MARKER, It.TUBE_MARKER), It.LAYER_NODE_TYPE.set(It.LINE3D_MARKER, It.LINE3D_MARKER), 
    It.LAYER_NODE_TYPE.set(It.SPHERE_MARKER, It.SPHERE_MARKER), It.LAYER_NODE_TYPE.set(It.CAD_LAYER, It.CAD_LAYER), 
    It), Nt = {
        NAME_KEY_ERROR: 0,
        MAP_ID_URL_ERROR: 2,
        THEME_ID_URL_ERROR: 4,
        LICENSE_ERROR: 8,
        PATH_ERROR: 404,
        INFO: 32,
        DEFAULT_LEVEL_ERROR: 64
    }, Ft = (It = {
        RIGHT: 2,
        LEFT: 4,
        BOTTOM: 8,
        TOP: 16,
        RIGHT_BOTTOM: 32,
        LEFT_BOTTOM: 64,
        RIGHT_TOP: 128,
        LEFT_TOP: 256,
        CENTER: 512
    }, Object.freeze(It), It);
    function Bt(t, e, n, r) {
        this.x = t || 0, this.y = e || 0, this.z = n || 0, this.w = void 0 !== r ? r : 1;
    }
    Object.defineProperties(Bt.prototype, {
        width: {
            get: function() {
                return this.z;
            },
            set: function(t) {
                this.z = t;
            }
        },
        height: {
            get: function() {
                return this.w;
            },
            set: function(t) {
                this.w = t;
            }
        }
    }), Object.assign(Bt.prototype, {
        isVector4: !0,
        set: function(t, e, n, r) {
            return this.x = t, this.y = e, this.z = n, this.w = r, this;
        },
        setScalar: function(t) {
            return this.x = t, this.y = t, this.z = t, this.w = t, this;
        },
        setX: function(t) {
            return this.x = t, this;
        },
        setY: function(t) {
            return this.y = t, this;
        },
        setZ: function(t) {
            return this.z = t, this;
        },
        setW: function(t) {
            return this.w = t, this;
        },
        setComponent: function(t, e) {
            switch (t) {
              case 0:
                this.x = e;
                break;

              case 1:
                this.y = e;
                break;

              case 2:
                this.z = e;
                break;

              case 3:
                this.w = e;
                break;

              default:
                throw new Error("index is out of range: " + t);
            }
            return this;
        },
        getComponent: function(t) {
            switch (t) {
              case 0:
                return this.x;

              case 1:
                return this.y;

              case 2:
                return this.z;

              case 3:
                return this.w;

              default:
                throw new Error("index is out of range: " + t);
            }
        },
        clone: function() {
            return new this.constructor(this.x, this.y, this.z, this.w);
        },
        copy: function(t) {
            return this.x = t.x, this.y = t.y, this.z = t.z, this.w = void 0 !== t.w ? t.w : 1, 
            this;
        },
        add: function(t, e) {
            return void 0 !== e ? (console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), 
            this.addVectors(t, e)) : (this.x += t.x, this.y += t.y, this.z += t.z, this.w += t.w, 
            this);
        },
        addScalar: function(t) {
            return this.x += t, this.y += t, this.z += t, this.w += t, this;
        },
        addVectors: function(t, e) {
            return this.x = t.x + e.x, this.y = t.y + e.y, this.z = t.z + e.z, this.w = t.w + e.w, 
            this;
        },
        addScaledVector: function(t, e) {
            return this.x += t.x * e, this.y += t.y * e, this.z += t.z * e, this.w += t.w * e, 
            this;
        },
        sub: function(t, e) {
            return void 0 !== e ? (console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), 
            this.subVectors(t, e)) : (this.x -= t.x, this.y -= t.y, this.z -= t.z, this.w -= t.w, 
            this);
        },
        subScalar: function(t) {
            return this.x -= t, this.y -= t, this.z -= t, this.w -= t, this;
        },
        subVectors: function(t, e) {
            return this.x = t.x - e.x, this.y = t.y - e.y, this.z = t.z - e.z, this.w = t.w - e.w, 
            this;
        },
        multiplyScalar: function(t) {
            return this.x *= t, this.y *= t, this.z *= t, this.w *= t, this;
        },
        applyMatrix4: function(t) {
            var e = this.x, n = this.y, r = this.z, i = this.w;
            t = t.elements;
            return this.x = t[0] * e + t[4] * n + t[8] * r + t[12] * i, this.y = t[1] * e + t[5] * n + t[9] * r + t[13] * i, 
            this.z = t[2] * e + t[6] * n + t[10] * r + t[14] * i, this.w = t[3] * e + t[7] * n + t[11] * r + t[15] * i, 
            this;
        },
        divideScalar: function(t) {
            return this.multiplyScalar(1 / t);
        },
        setAxisAngleFromQuaternion: function(t) {
            this.w = 2 * Math.acos(t.w);
            var e = Math.sqrt(1 - t.w * t.w);
            return e < 1e-4 ? (this.x = 1, this.y = 0, this.z = 0) : (this.x = t.x / e, this.y = t.y / e, 
            this.z = t.z / e), this;
        },
        setAxisAngleFromRotationMatrix: function(t) {
            var e, n, r, i, o, a, s, l, u, c, h = (t = t.elements)[0], f = t[4], p = t[8], d = t[1], y = t[5], m = t[9], v = t[2], g = t[6];
            t = t[10];
            return Math.abs(f - d) < .01 && Math.abs(p - v) < .01 && Math.abs(m - g) < .01 ? Math.abs(f + d) < .1 && Math.abs(p + v) < .1 && Math.abs(m + g) < .1 && Math.abs(h + y + t - 3) < .1 ? this.set(1, 0, 0, 0) : (i = Math.PI, 
            a = (t + 1) / 2, s = (f + d) / 4, l = (p + v) / 4, u = (m + g) / 4, (o = (y + 1) / 2) < (c = (h + 1) / 2) && a < c ? r = c < .01 ? (e = 0, 
            n = .707106781) : (n = s / (e = Math.sqrt(c)), l / e) : a < o ? r = o < .01 ? (n = 0, 
            e = .707106781) : (e = s / (n = Math.sqrt(o)), u / n) : a < .01 ? (n = e = .707106781, 
            r = 0) : (e = l / (r = Math.sqrt(a)), n = u / r), this.set(e, n, r, i)) : (c = Math.sqrt((g - m) * (g - m) + (p - v) * (p - v) + (d - f) * (d - f)), 
            Math.abs(c) < .001 && (c = 1), this.x = (g - m) / c, this.y = (p - v) / c, this.z = (d - f) / c, 
            this.w = Math.acos((h + y + t - 1) / 2)), this;
        },
        min: function(t) {
            return this.x = Math.min(this.x, t.x), this.y = Math.min(this.y, t.y), this.z = Math.min(this.z, t.z), 
            this.w = Math.min(this.w, t.w), this;
        },
        max: function(t) {
            return this.x = Math.max(this.x, t.x), this.y = Math.max(this.y, t.y), this.z = Math.max(this.z, t.z), 
            this.w = Math.max(this.w, t.w), this;
        },
        clamp: function(t, e) {
            return this.x = Math.max(t.x, Math.min(e.x, this.x)), this.y = Math.max(t.y, Math.min(e.y, this.y)), 
            this.z = Math.max(t.z, Math.min(e.z, this.z)), this.w = Math.max(t.w, Math.min(e.w, this.w)), 
            this;
        },
        clampScalar: function(t, e) {
            return this.x = Math.max(t, Math.min(e, this.x)), this.y = Math.max(t, Math.min(e, this.y)), 
            this.z = Math.max(t, Math.min(e, this.z)), this.w = Math.max(t, Math.min(e, this.w)), 
            this;
        },
        clampLength: function(t, e) {
            var n = this.length();
            return this.divideScalar(n || 1).multiplyScalar(Math.max(t, Math.min(e, n)));
        },
        floor: function() {
            return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), 
            this.w = Math.floor(this.w), this;
        },
        ceil: function() {
            return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), 
            this.w = Math.ceil(this.w), this;
        },
        round: function() {
            return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), 
            this.w = Math.round(this.w), this;
        },
        roundToZero: function() {
            return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), 
            this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z), this.w = this.w < 0 ? Math.ceil(this.w) : Math.floor(this.w), 
            this;
        },
        negate: function() {
            return this.x = -this.x, this.y = -this.y, this.z = -this.z, this.w = -this.w, this;
        },
        dot: function(t) {
            return this.x * t.x + this.y * t.y + this.z * t.z + this.w * t.w;
        },
        lengthSq: function() {
            return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;
        },
        length: function() {
            return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);
        },
        manhattanLength: function() {
            return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z) + Math.abs(this.w);
        },
        normalize: function() {
            return this.divideScalar(this.length() || 1);
        },
        setLength: function(t) {
            return this.normalize().multiplyScalar(t);
        },
        lerp: function(t, e) {
            return this.x += (t.x - this.x) * e, this.y += (t.y - this.y) * e, this.z += (t.z - this.z) * e, 
            this.w += (t.w - this.w) * e, this;
        },
        lerpVectors: function(t, e, n) {
            return this.subVectors(e, t).multiplyScalar(n).add(t);
        },
        equals: function(t) {
            return t.x === this.x && t.y === this.y && t.z === this.z && t.w === this.w;
        },
        fromArray: function(t, e) {
            return this.x = t[e = void 0 === e ? 0 : e], this.y = t[e + 1], this.z = t[e + 2], 
            this.w = t[e + 3], this;
        },
        toArray: function(t, e) {
            return (t = void 0 === t ? [] : t)[e = void 0 === e ? 0 : e] = this.x, t[e + 1] = this.y, 
            t[e + 2] = this.z, t[e + 3] = this.w, t;
        },
        fromBufferAttribute: function(t, e, n) {
            return void 0 !== n && console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."), 
            this.x = t.getX(e), this.y = t.getY(e), this.z = t.getZ(e), this.w = t.getW(e), 
            this;
        }
    });
    var Ut = n(1);
    function zt(t) {
        return (zt = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Gt(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != zt(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != zt(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == zt(t) ? t : String(t);
            }(r.key), r);
        }
    }
    var Ht = function() {
        function t() {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
        }
        var e, n;
        return e = t, n = [ {
            key: "convertPointCoordsByCenter",
            value: function(t, e) {
                return t.x = t.x - e.x, t.y = t.y - e.y, void 0 !== t.z && void 0 !== e.z && (t.z = t.z - e.z), 
                t;
            }
        }, {
            key: "convertPointsCoordsByCenter",
            value: function(t, e) {
                for (var n = 0; n < t.length; n++) this.convertPointCoordsByCenter(t[n], e);
                return t;
            }
        }, {
            key: "getMapScaleInfo",
            value: function() {
                var t, e;
                return jt.a.environment === Ut.a.WX ? 96 / 2.54 : (window.screen.deviceXDPI ? t = window.screen.deviceXDPI : ((e = document.createElement("DIV")).style.cssText = "width:1in;height:1in;position:absolute;left:0px;top:0px;z-index:99;visibility:hidden", 
                document.body.appendChild(e), t = parseInt(e.offsetWidth), e.parentNode.removeChild(e)), 
                t / 2.54);
            }
        }, {
            key: "getCenterByAnchor",
            value: function(t) {
                var e = new Mt(.5, .5);
                switch (t) {
                  case Ft.LEFT:
                    e.setX(0);
                    break;

                  case Ft.RIGHT:
                    e.setX(1);
                    break;

                  case Ft.TOP:
                    e.setY(1);
                    break;

                  case Ft.BOTTOM:
                    e.setY(0);
                    break;

                  case Ft.LEFT_TOP:
                    e.set(0, 1);
                    break;

                  case Ft.RIGHT_TOP:
                    e.set(1, 1);
                    break;

                  case Ft.LEFT_BOTTOM:
                    e.set(0, 0);
                    break;

                  case Ft.RIGHT_BOTTOM:
                    e.set(1, 0);
                }
                return e;
            }
        }, {
            key: "uniqWithArrayOne",
            value: function(t) {
                var e = [];
                return t.forEach(function(t) {
                    e.includes(t) || e.push(t);
                }), e;
            }
        }, {
            key: "uniqWithArrayTwo",
            value: function(t) {
                if (t.length < 1) return [];
                t = JSON.parse(JSON.stringify(t));
                for (var e = [], n = 0; n < t.length; n++) {
                    var r = (r = this.uniqWithArrayOne(t[n])).filter(function(t) {
                        return !e.includes(t);
                    });
                    t[n] = r, e = e.concat(r);
                }
                return t.filter(function(t) {
                    return 0 < t.length;
                });
            }
        }, {
            key: "compareArrays",
            value: function(t, e) {
                if (t.length !== e.length) return !1;
                for (var n = 0; n < t.length; n++) {
                    var r, i = t[n], o = e[n];
                    if (Object.keys(i).length !== Object.keys(o).length) return !1;
                    for (r in i) if (i[r] && o[r] && i[r] !== o[r]) return !1;
                }
                return !0;
            }
        } ], null && Gt(e.prototype, null), n && Gt(e, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }(), Vt = {
        aliceblue: 15792383,
        antiquewhite: 16444375,
        aqua: 65535,
        aquamarine: 8388564,
        azure: 15794175,
        beige: 16119260,
        bisque: 16770244,
        black: 0,
        blanchedalmond: 16772045,
        blue: 255,
        blueviolet: 9055202,
        brown: 10824234,
        burlywood: 14596231,
        cadetblue: 6266528,
        chartreuse: 8388352,
        chocolate: 13789470,
        coral: 16744272,
        cornflowerblue: 6591981,
        cornsilk: 16775388,
        crimson: 14423100,
        cyan: 65535,
        darkblue: 139,
        darkcyan: 35723,
        darkgoldenrod: 12092939,
        darkgray: 11119017,
        darkgreen: 25600,
        darkgrey: 11119017,
        darkkhaki: 12433259,
        darkmagenta: 9109643,
        darkolivegreen: 5597999,
        darkorange: 16747520,
        darkorchid: 10040012,
        darkred: 9109504,
        darksalmon: 15308410,
        darkseagreen: 9419919,
        darkslateblue: 4734347,
        darkslategray: 3100495,
        darkslategrey: 3100495,
        darkturquoise: 52945,
        darkviolet: 9699539,
        deeppink: 16716947,
        deepskyblue: 49151,
        dimgray: 6908265,
        dimgrey: 6908265,
        dodgerblue: 2003199,
        firebrick: 11674146,
        floralwhite: 16775920,
        forestgreen: 2263842,
        fuchsia: 16711935,
        gainsboro: 14474460,
        ghostwhite: 16316671,
        gold: 16766720,
        goldenrod: 14329120,
        gray: 8421504,
        green: 32768,
        greenyellow: 11403055,
        grey: 8421504,
        honeydew: 15794160,
        hotpink: 16738740,
        indianred: 13458524,
        indigo: 4915330,
        ivory: 16777200,
        khaki: 15787660,
        lavender: 15132410,
        lavenderblush: 16773365,
        lawngreen: 8190976,
        lemonchiffon: 16775885,
        lightblue: 11393254,
        lightcoral: 15761536,
        lightcyan: 14745599,
        lightgoldenrodyellow: 16448210,
        lightgray: 13882323,
        lightgreen: 9498256,
        lightgrey: 13882323,
        lightpink: 16758465,
        lightsalmon: 16752762,
        lightseagreen: 2142890,
        lightskyblue: 8900346,
        lightslategray: 7833753,
        lightslategrey: 7833753,
        lightsteelblue: 11584734,
        lightyellow: 16777184,
        lime: 65280,
        limegreen: 3329330,
        linen: 16445670,
        magenta: 16711935,
        maroon: 8388608,
        mediumaquamarine: 6737322,
        mediumblue: 205,
        mediumorchid: 12211667,
        mediumpurple: 9662683,
        mediumseagreen: 3978097,
        mediumslateblue: 8087790,
        mediumspringgreen: 64154,
        mediumturquoise: 4772300,
        mediumvioletred: 13047173,
        midnightblue: 1644912,
        mintcream: 16121850,
        mistyrose: 16770273,
        moccasin: 16770229,
        navajowhite: 16768685,
        navy: 128,
        oldlace: 16643558,
        olive: 8421376,
        olivedrab: 7048739,
        orange: 16753920,
        orangered: 16729344,
        orchid: 14315734,
        palegoldenrod: 15657130,
        palegreen: 10025880,
        paleturquoise: 11529966,
        palevioletred: 14381203,
        papayawhip: 16773077,
        peachpuff: 16767673,
        peru: 13468991,
        pink: 16761035,
        plum: 14524637,
        powderblue: 11591910,
        purple: 8388736,
        rebeccapurple: 6697881,
        red: 16711680,
        rosybrown: 12357519,
        royalblue: 4286945,
        saddlebrown: 9127187,
        salmon: 16416882,
        sandybrown: 16032864,
        seagreen: 3050327,
        seashell: 16774638,
        sienna: 10506797,
        silver: 12632256,
        skyblue: 8900331,
        slateblue: 6970061,
        slategray: 7372944,
        slategrey: 7372944,
        snow: 16775930,
        springgreen: 65407,
        steelblue: 4620980,
        tan: 13808780,
        teal: 32896,
        thistle: 14204888,
        tomato: 16737095,
        turquoise: 4251856,
        violet: 15631086,
        wheat: 16113331,
        white: 16777215,
        whitesmoke: 16119285,
        yellow: 16776960,
        yellowgreen: 10145074
    }, Wt = {
        h: 0,
        s: 0,
        l: 0
    }, Yt = {
        h: 0,
        s: 0,
        l: 0
    };
    function Xt(t, e, n) {
        return void 0 === e && void 0 === n ? this.set(t) : this.setRGB(t, e, n);
    }
    function Zt(t, e, n) {
        return n < 0 && (n += 1), 1 < n && --n, n < 1 / 6 ? t + 6 * (e - t) * n : n < .5 ? e : n < 2 / 3 ? t + 6 * (e - t) * (2 / 3 - n) : t;
    }
    function qt(t) {
        return t < .04045 ? .0773993808 * t : Math.pow(.9478672986 * t + .0521327014, 2.4);
    }
    function Kt(t) {
        return t < .0031308 ? 12.92 * t : 1.055 * Math.pow(t, .41666) - .055;
    }
    function Jt(t) {
        return (Jt = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Qt(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Jt(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Jt(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Jt(t) ? t : String(t);
            }(r.key), r);
        }
    }
    Object.assign(Xt.prototype, {
        isColor: !0,
        r: 1,
        g: 1,
        b: 1,
        set: function(t) {
            return t && t.isColor ? this.copy(t) : "number" == typeof t ? this.setHex(t) : "string" == typeof t && this.setStyle(t), 
            this;
        },
        setScalar: function(t) {
            return this.r = t, this.g = t, this.b = t, this;
        },
        setHex: function(t) {
            return t = Math.floor(t), this.r = (t >> 16 & 255) / 255, this.g = (t >> 8 & 255) / 255, 
            this.b = (255 & t) / 255, this;
        },
        setRGB: function(t, e, n) {
            return this.r = t, this.g = e, this.b = n, this;
        },
        setHSL: function(t, e, n) {
            return t = s.euclideanModulo(t, 1), e = s.clamp(e, 0, 1), n = s.clamp(n, 0, 1), 
            0 === e ? this.r = this.g = this.b = n : (this.r = Zt(e = 2 * n - (n = n <= .5 ? n * (1 + e) : n + e - n * e), n, t + 1 / 3), 
            this.g = Zt(e, n, t), this.b = Zt(e, n, t - 1 / 3)), this;
        },
        setStyle: function(t) {
            function e(e) {
                void 0 !== e && parseFloat(e) < 1 && console.warn("THREE.Color: Alpha component of " + t + " will be ignored.");
            }
            if (l = /^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)) {
                var n, r, i, o, a = l[1], s = l[2];
                switch (a) {
                  case "rgb":
                  case "rgba":
                    if (n = /^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s)) return this.r = Math.min(255, parseInt(n[1], 10)) / 255, 
                    this.g = Math.min(255, parseInt(n[2], 10)) / 255, this.b = Math.min(255, parseInt(n[3], 10)) / 255, 
                    e(n[5]), this;
                    if (n = /^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s)) return this.r = Math.min(100, parseInt(n[1], 10)) / 100, 
                    this.g = Math.min(100, parseInt(n[2], 10)) / 100, this.b = Math.min(100, parseInt(n[3], 10)) / 100, 
                    e(n[5]), this;
                    break;

                  case "hsl":
                  case "hsla":
                    if (n = /^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s)) return r = parseFloat(n[1]) / 360, 
                    i = parseInt(n[2], 10) / 100, o = parseInt(n[3], 10) / 100, e(n[5]), this.setHSL(r, i, o);
                }
            } else if (l = /^\#([A-Fa-f0-9]+)$/.exec(t)) {
                var l = (a = l[1]).length;
                if (3 === l) return this.r = parseInt(a.charAt(0) + a.charAt(0), 16) / 255, this.g = parseInt(a.charAt(1) + a.charAt(1), 16) / 255, 
                this.b = parseInt(a.charAt(2) + a.charAt(2), 16) / 255, this;
                if (6 === l) return this.r = parseInt(a.charAt(0) + a.charAt(1), 16) / 255, this.g = parseInt(a.charAt(2) + a.charAt(3), 16) / 255, 
                this.b = parseInt(a.charAt(4) + a.charAt(5), 16) / 255, this;
            }
            return t && 0 < t.length ? this.setColorName(t) : this;
        },
        setColorName: function(t) {
            var e = Vt[t];
            return void 0 !== e ? this.setHex(e) : console.warn("THREE.Color: Unknown color " + t), 
            this;
        },
        clone: function() {
            return new this.constructor(this.r, this.g, this.b);
        },
        copy: function(t) {
            return this.r = t.r, this.g = t.g, this.b = t.b, this;
        },
        copyGammaToLinear: function(t, e) {
            return void 0 === e && (e = 2), this.r = Math.pow(t.r, e), this.g = Math.pow(t.g, e), 
            this.b = Math.pow(t.b, e), this;
        },
        copyLinearToGamma: function(t, e) {
            return e = 0 < (e = void 0 === e ? 2 : e) ? 1 / e : 1, this.r = Math.pow(t.r, e), 
            this.g = Math.pow(t.g, e), this.b = Math.pow(t.b, e), this;
        },
        convertGammaToLinear: function(t) {
            return this.copyGammaToLinear(this, t), this;
        },
        convertLinearToGamma: function(t) {
            return this.copyLinearToGamma(this, t), this;
        },
        copySRGBToLinear: function(t) {
            return this.r = qt(t.r), this.g = qt(t.g), this.b = qt(t.b), this;
        },
        copyLinearToSRGB: function(t) {
            return this.r = Kt(t.r), this.g = Kt(t.g), this.b = Kt(t.b), this;
        },
        convertSRGBToLinear: function() {
            return this.copySRGBToLinear(this), this;
        },
        convertLinearToSRGB: function() {
            return this.copyLinearToSRGB(this), this;
        },
        getHex: function() {
            return 255 * this.r << 16 ^ 255 * this.g << 8 ^ 255 * this.b << 0;
        },
        getHexString: function() {
            return ("000000" + this.getHex().toString(16)).slice(-6);
        },
        getHSL: function(t) {
            void 0 === t && (console.warn("THREE.Color: .getHSL() target is now required"), 
            t = {
                h: 0,
                s: 0,
                l: 0
            });
            var e, n = this.r, r = this.g, i = this.b, o = Math.max(n, r, i), a = Math.min(n, r, i), s = (a + o) / 2;
            if (a === o) u = e = 0; else {
                var l = o - a, u = s <= .5 ? l / (o + a) : l / (2 - o - a);
                switch (o) {
                  case n:
                    e = (r - i) / l + (r < i ? 6 : 0);
                    break;

                  case r:
                    e = (i - n) / l + 2;
                    break;

                  case i:
                    e = (n - r) / l + 4;
                }
                e /= 6;
            }
            return t.h = e, t.s = u, t.l = s, t;
        },
        getStyle: function() {
            return "rgb(" + (255 * this.r | 0) + "," + (255 * this.g | 0) + "," + (255 * this.b | 0) + ")";
        },
        offsetHSL: function(t, e, n) {
            return this.getHSL(Wt), Wt.h += t, Wt.s += e, Wt.l += n, this.setHSL(Wt.h, Wt.s, Wt.l), 
            this;
        },
        add: function(t) {
            return this.r += t.r, this.g += t.g, this.b += t.b, this;
        },
        addColors: function(t, e) {
            return this.r = t.r + e.r, this.g = t.g + e.g, this.b = t.b + e.b, this;
        },
        addScalar: function(t) {
            return this.r += t, this.g += t, this.b += t, this;
        },
        sub: function(t) {
            return this.r = Math.max(0, this.r - t.r), this.g = Math.max(0, this.g - t.g), this.b = Math.max(0, this.b - t.b), 
            this;
        },
        multiply: function(t) {
            return this.r *= t.r, this.g *= t.g, this.b *= t.b, this;
        },
        multiplyScalar: function(t) {
            return this.r *= t, this.g *= t, this.b *= t, this;
        },
        lerp: function(t, e) {
            return this.r += (t.r - this.r) * e, this.g += (t.g - this.g) * e, this.b += (t.b - this.b) * e, 
            this;
        },
        lerpHSL: function(t, e) {
            this.getHSL(Wt), t.getHSL(Yt);
            t = s.lerp(Wt.h, Yt.h, e);
            var n = s.lerp(Wt.s, Yt.s, e);
            e = s.lerp(Wt.l, Yt.l, e);
            return this.setHSL(t, n, e), this;
        },
        equals: function(t) {
            return t.r === this.r && t.g === this.g && t.b === this.b;
        },
        fromArray: function(t, e) {
            return this.r = t[e = void 0 === e ? 0 : e], this.g = t[e + 1], this.b = t[e + 2], 
            this;
        },
        toArray: function(t, e) {
            return (t = void 0 === t ? [] : t)[e = void 0 === e ? 0 : e] = this.r, t[e + 1] = this.g, 
            t[e + 2] = this.b, t;
        }
    }), Xt.NAMES = Vt;
    var $t = function() {
        function t() {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
        }
        var e, n;
        return e = t, n = [ {
            key: "round",
            value: function(t) {
                return 0 < t.toFixed(2) ? Math.ceil(t.toFixed(2)) : Math.floor(t.toFixed(2));
            }
        }, {
            key: "generateUUID",
            value: function() {
                for (var t = [], e = 0; e < 256; e++) t[e] = (e < 16 ? "0" : "") + e.toString(16);
                var n = 4294967295 * Math.random() | 0, r = 4294967295 * Math.random() | 0, i = 4294967295 * Math.random() | 0, o = 4294967295 * Math.random() | 0;
                n = t[255 & n] + t[n >> 8 & 255] + t[n >> 16 & 255] + t[n >> 24 & 255] + "-" + t[255 & r] + t[r >> 8 & 255] + "-" + t[r >> 16 & 15 | 64] + t[r >> 24 & 255] + "-" + t[63 & i | 128] + t[i >> 8 & 255] + "-" + t[i >> 16 & 255] + t[i >> 24 & 255] + t[255 & o] + t[o >> 8 & 255] + t[o >> 16 & 255] + t[o >> 24 & 255];
                return t.length = 0, n.toUpperCase();
            }
        }, {
            key: "findNearNthPowerOfTwo",
            value: function(t) {
                return t -= 1, (t = (t = (t = (t = (t |= t >> 1) | t >> 2) | t >> 4) | t >> 8) | t >> 16) < 0 ? 1 : 1 + t;
            }
        }, {
            key: "rgbToArray",
            value: function(t) {
                var e = new Xt();
                return e.setStyle(t), [ e.r, e.g, e.b ];
            }
        }, {
            key: "toRgba",
            value: function(t) {
                var e;
                return void 0 === t ? t : "number" != typeof t ? 3 <= (e = t.split(",")).length ? "rgba(" + parseInt(e[0]) + "," + parseInt(e[1]) + "," + parseInt(e[2]) + ",1)" : t : "rgba(" + parseInt(255 * new Xt(t).r) + "," + parseInt(255 * new Xt(t).g) + "," + parseInt(255 * new Xt(t).b) + ",1)";
            }
        }, {
            key: "toColor",
            value: function(t) {
                var e;
                return "number" == typeof t ? t : 3 <= (e = t.split(",")).length ? parseInt(e[0]) << 16 | parseInt(e[1]) << 8 | parseInt(e[2]) : (console.error("color format error", t), 
                0);
            }
        }, {
            key: "cov",
            value: function(t) {
                for (var e = [], n = [ 0, 0 ], r = [], i = 0; i < t.length; i++) n[0] += t[i].x, 
                n[1] += t[i].y;
                n[0] = n[0] / t.length, n[1] = n[1] / t.length;
                for (var o = 0; o < t.length; o++) r.push([ t[o].x - n[0], t[o].y - n[1] ]);
                for (var a = [], s = 0; s < r[0].length; s++) {
                    for (var l = [], u = 0; u < r.length; u++) l.push(r[u][s]);
                    a.push(l);
                }
                for (var c = 0; c < a.length; c++) {
                    for (var h = [], f = 0; f < r[0].length; f++) {
                        for (var p = 0, d = 0; d < a[c].length; d++) p += a[c][d] * r[d][f];
                        p /= t.length - 1, h.push(p);
                    }
                    e.push(h);
                }
                return e;
            }
        }, {
            key: "eig",
            value: function(t) {
                var e = (t[0][0] + t[1][1]) / 2, n = t[0][0] * t[1][1] - t[1][0] * t[0][1], r = e + Math.sqrt(e * e - n);
                e -= Math.sqrt(e * e - n);
                return 0 == t[0][1] && 0 == t[1][0] ? {
                    eigValue: [ r, e ],
                    eigVect: [ [ 1, 0 ], [ 0, 1 ] ]
                } : (n = (r - t[0][0]) / t[0][1], t = (e - t[0][0]) / t[0][1], {
                    eigValue: [ r, e ],
                    eigVect: [ [ 1 / Math.sqrt(1 + n * n), n / Math.sqrt(1 + n * n) ], [ 1 / Math.sqrt(1 + t * t), t / Math.sqrt(1 + t * t) ] ]
                });
            }
        } ], null && Qt(e.prototype, null), n && Qt(e, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }();
    function te(t) {
        return (te = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function ee(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != te(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != te(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == te(t) ? t : String(t);
            }(r.key), r);
        }
    }
    It = function() {
        function t(e) {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
            this.Gt = (e = e || {}).src, this.Ut = e.dest, this.Bt = null, this.Ht = [], this.zt = 0, 
            this.Vt = 0, this.Wt = 0, this.Yt = Dt.THOUSAND, this.Xt = !1, this.Zt = !1, this.qt = !0, 
            this.Jt = null, this.Kt = null, this.Qt = $t.generateUUID();
        }
        var e, n;
        return e = t, (n = [ {
            key: "play",
            value: function() {
                return this.$t();
            }
        }, {
            key: "pause",
            value: function() {
                return this.Zt = !0, this;
            }
        }, {
            key: "resume",
            value: function() {
                return this.Zt = !1, this.zt += this.Wt, this.Wt = 0, this;
            }
        }, {
            key: "stop",
            value: function() {
                return this.qt = !0, this;
            }
        }, {
            key: "finish",
            value: function() {
                return this.qt = !0, this.Kt && this.Kt(), this.Ht = [], this;
            }
        } ]) && ee(e.prototype, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }();
    var ne = (Object.assign(It.prototype, {
        tn: function() {
            for (var t in this) this["" + t] = null, delete this["" + t];
        },
        nn: function(t) {
            return this.Gt = t, this;
        },
        en: function(t) {
            return this.Ut = t, this;
        },
        rn: function(t) {
            return this.Yt = t * Dt.THOUSAND, this;
        },
        sn: function(t) {
            return this.Vt = t * Dt.THOUSAND, this;
        },
        an: function(t) {
            return this.Jt = t, this;
        },
        un: function(t) {
            return this.Kt = t, this;
        },
        cn: function(t) {
            return this.Xt = t, this;
        },
        $t: function() {
            return this.qt = !1, this.Bt && (this.zt = this.Bt.hn), this;
        },
        ln: function() {
            var t = new this.constructor({
                src: this.Gt,
                dest: this.Ut
            });
            return t.zt = this.zt, t.Vt = this.Vt, t.Yt = this.Yt, t.Xt = this.Xt, t.Jt = this.Jt, 
            t.Kt = this.Kt, t;
        },
        dn: function() {
            var t = this.Ut.concat(), e = this.Gt.concat();
            return this.Gt = t, this.Ut = e, this;
        }
    }), It);
    function re(t) {
        return (re = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function ie(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != re(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != re(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == re(t) ? t : String(t);
            }(r.key), r);
        }
    }
    var oe = function(t, e, n) {
        return e && ie(t.prototype, e), n && ie(t, n), Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }(function t(e, n) {
        if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
        this.start = null != e ? e : 0, this.stop = null != n ? n : 0;
    });
    function ae(t) {
        return null != t;
    }
    function se(t) {
        return (se = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function le(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != se(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != se(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == se(t) ? t : String(t);
            }(r.key), r);
        }
    }
    var ue = function() {
        function t() {
            var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : null, n = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : null, r = this, i = t;
            if (!(r instanceof i)) throw new TypeError("Cannot call a class as a function");
            this.center = null == e ? void 0 : e.clone(), this.radius = n;
        }
        var e, n, r;
        return e = t, r = [ {
            key: "computePlaneDistances",
            value: function(t, e, n, r) {
                ae(r) || (r = new oe());
                var i = new h();
                i.subVectors(t.center, e), e = n.dot(i);
                return r.start = e - t.radius, r.stop = e + t.radius, r;
            }
        }, {
            key: "clone",
            value: function(e, n) {
                if (ae(e)) return ae(n) ? (n.center = e.center.clone(), n.radius = e.radius, n) : new t(e.center, e.radius);
            }
        }, {
            key: "expand",
            value: function(e, n, r) {
                return r = t.clone(e, r), (e = n.distance(r.center)) > r.radius && (r.radius = e), 
                r;
            }
        }, {
            key: "union",
            value: function(e, n, r) {
                ae(r) || (r = new t());
                var i = e.center, o = e.radius, a = n.center, s = n.radius, l = new h();
                return (a = (l.subVectors(a, i), l.length())) + s <= o ? t.clone(e, r) : a + o <= s ? t.clone(n, r) : (e = .5 * (o + a + s), 
                (n = l.clone()).multiplyScalar((e - o) / a), n.add(i), r.center = n.clone(), r.radius = e), 
                r;
            }
        }, {
            key: "equals",
            value: function(t, e) {
                return t === e || ae(t) && ae(e) && t.equals(e.center) && t.radius === e.radius;
            }
        } ], (n = [ {
            key: "valid",
            get: function() {
                return null !== this.center && null !== this.radius;
            }
        }, {
            key: "reset",
            value: function() {
                this.center = null, this.radius = null;
            }
        } ]) && le(e.prototype, n), r && le(e, r), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }();
    function ce(t) {
        return (ce = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function he(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != ce(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != ce(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == ce(t) ? t : String(t);
            }(r.key), r);
        }
    }
    var fe = function() {
        function t(e) {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
            this.Ft = e, this.vn = new oe(), this.pn = new ue();
        }
        var e, n, r;
        return e = t, r = [ {
            key: "getMeshBoudinggSphere",
            value: function(t) {
                t = new nt().setFromObject(t);
                var e = new h(), n = (t.getCenter(e), new h());
                t.getSize(n), t = .5 * n.length();
                return new ue(e, t);
            }
        }, {
            key: "getSceneBoudingSphere",
            value: function(e, n) {
                e.traverse(function(e) {
                    var r;
                    "Mesh" === e.type ? r = t.getMeshBoudinggSphere(e) : "Scene" !== e.type && "Group" !== e.type && "DirectionalLight" !== e.type && "AmbientLight" !== e.type && (r = new ue(e.position, 0)), 
                    !r || isNaN(r.radius) || isNaN(r.center.x) || isNaN(r.center.y) || isNaN(r.center.z) || (n.valid || ue.clone(r, n), 
                    ue.union(r, n, n));
                });
            }
        } ], (n = [ {
            key: "reset",
            value: function() {
                this.mn();
            }
        }, {
            key: "update",
            value: function(t) {
                this.yn(t);
            }
        } ]) && he(e.prototype, n), r && he(e, r), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }();
    function pe(t) {
        return (pe = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function de(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != pe(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != pe(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == pe(t) ? t : String(t);
            }(r.key), r);
        }
    }
    Object.assign(fe.prototype, {
        bn: function() {
            var t, e, n;
            !this.pn.valid || this.pn.radius <= 0 || (n = (t = this.Ft).target, ((t = t.object).far > Dt.CAMERA_FAR || void 0 === t.userData.far) && (t.userData.far = Math.max(t.far, null != (e = t.userData.far) ? e : 0)), 
            void 0 === t.userData.near && (t.userData.near = t.near), e = t.position, n = n.clone().sub(e).normalize(), 
            ue.computePlaneDistances(this.pn, e, n, this.vn), this.vn.start >= this.vn.stop) || (t.near = Math.max(this.vn.start, t.userData.near), 
            t.far = this.vn.stop, t.updateProjectionMatrix());
        },
        mn: function() {
            this.pn.reset();
        },
        yn: function(t) {
            var e = this;
            t.forEach(function(t) {
                t && fe.getSceneBoudingSphere(t, e.pn);
            }), this.bn();
        }
    });
    It = function(t, e, n) {
        return e && de(t.prototype, e), n && de(t, n), Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }(function t(e, n) {
        if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
        this.gn = e, this.wn = n;
    });
    var ye = (Object.assign(It.prototype, {
        _n: function(t) {
            return !1;
        },
        Sn: function(t, e) {}
    }), It), me = (It = {
        NONE: 0,
        POINT: 1,
        LINE: 2,
        POLYGON: 4,
        MULTIPOINT: 8,
        MULTILINE: 16,
        MULTIPOLYGON: 32,
        GROUP: 64,
        EXTENT: 1024,
        EXTERNALMODEL: 2048,
        MODEL: 4096,
        FACILITY: 8192,
        LABEL: 16384,
        EXTENTGROUP: 1 << 20,
        EXTERNALMODELGROUP: 1 << 21,
        MODELGROUP: 1 << 22,
        FACILITYGROUP: 1 << 23,
        LABELGROUP: 1 << 24
    }, Object.freeze(It), It), ve = function(t, e, n) {
        n = n || 2;
        var r, i, o, a, s, l = e && e.length, u = l ? e[0] * n : t.length, c = ge(t, 0, u, n, !0), h = [];
        if (c && c.next !== c.prev) {
            if (l && (c = function(t, e, n, r) {
                var i, o, a, s = [];
                for (i = 0, o = e.length; i < o; i++) (a = ge(t, a = e[i] * r, i < o - 1 ? e[i + 1] * r : t.length, r, !1)) === a.next && (a.steiner = !0), 
                s.push(function(t) {
                    for (var e = t, n = t; (e.x < n.x || e.x === n.x && e.y < n.y) && (n = e), (e = e.next) !== t; ) ;
                    return n;
                }(a));
                for (s.sort(xe), i = 0; i < s.length; i++) !function(t, e) {
                    (e = function(t, e) {
                        var n, r = e, i = t.x, o = t.y, a = -1 / 0;
                        do {
                            if (o <= r.y && o >= r.next.y && r.next.y !== r.y) {
                                var s = r.x + (o - r.y) * (r.next.x - r.x) / (r.next.y - r.y);
                                if (s <= i && a < s) {
                                    if ((a = s) === i) {
                                        if (o === r.y) return r;
                                        if (o === r.next.y) return r.next;
                                    }
                                    n = r.x < r.next.x ? r : r.next;
                                }
                            }
                        } while ((r = r.next) !== e);
                        if (!n) return null;
                        if (i !== a) {
                            var l, u = n, c = n.x, h = n.y, f = 1 / 0;
                            for (r = n; i >= r.x && r.x >= c && i !== r.x && Se(o < h ? i : a, o, c, h, o < h ? a : i, o, r.x, r.y) && (l = Math.abs(o - r.y) / (i - r.x), 
                            Le(r, t)) && (l < f || l === f && (r.x > n.x || r.x === n.x && function(t, e) {
                                return _e(t.prev, t, e.prev) < 0 && _e(e.next, t, t.next) < 0;
                            }(n, r))) && (n = r, f = l), (r = r.next) !== u; ) ;
                        }
                        return n;
                    }(t, e)) && (t = Ae(e, t), be(e, e.next), be(t, t.next));
                }(s[i], n), n = be(n, n.next);
                return n;
            }(t, e, c, n)), t.length > 80 * n) {
                for (var f = r = t[0], p = i = t[1], d = n; d < u; d += n) (o = t[d]) < f && (f = o), 
                (a = t[d + 1]) < p && (p = a), r < o && (r = o), i < a && (i = a);
                s = 0 !== (s = Math.max(r - f, i - p)) ? 1 / s : 0;
            }
            !function t(e, n, r, i, o, a, s) {
                if (e) {
                    if (!s && a) {
                        for (var l = e, u = i, c = o, h = a, f = l; null === f.z && (f.z = we(f.x, f.y, u, c, h)), 
                        f.prevZ = f.prev, f.nextZ = f.next, (f = f.next) !== l; ) ;
                        f.prevZ.nextZ = null, f.prevZ = null;
                        var p, d, y, m, v, g, b, x, w = f, S = 1;
                        do {
                            for (d = w, v = w = null, g = 0; d; ) {
                                for (g++, y = d, p = b = 0; p < S && (b++, y = y.nextZ); p++) ;
                                for (x = S; 0 < b || 0 < x && y; ) 0 !== b && (0 === x || !y || d.z <= y.z) ? (d = (m = d).nextZ, 
                                b--) : (y = (m = y).nextZ, x--), v ? v.nextZ = m : w = m, m.prevZ = v, v = m;
                                d = y;
                            }
                        } while (v.nextZ = null, S *= 2, 1 < g);
                    }
                    for (var _, E, O = e; e.prev !== e.next; ) if (_ = e.prev, E = e.next, a ? function(t, e, n, r) {
                        var i = t.prev, o = t, a = t.next;
                        if (!(0 <= _e(i, o, a))) {
                            for (var s = (i.x < o.x ? i.x < a.x ? i : a : o.x < a.x ? o : a).x, l = (i.y < o.y ? i.y < a.y ? i : a : o.y < a.y ? o : a).y, u = (i.x > o.x ? i.x > a.x ? i : a : o.x > a.x ? o : a).x, c = (i.y > o.y ? i.y > a.y ? i : a : o.y > a.y ? o : a).y, h = we(s, l, e, n, r), f = we(u, c, e, n, r), p = t.prevZ, d = t.nextZ; p && p.z >= h && d && d.z <= f; ) {
                                if (p !== t.prev && p !== t.next && Se(i.x, i.y, o.x, o.y, a.x, a.y, p.x, p.y) && 0 <= _e(p.prev, p, p.next)) return;
                                if (p = p.prevZ, d !== t.prev && d !== t.next && Se(i.x, i.y, o.x, o.y, a.x, a.y, d.x, d.y) && 0 <= _e(d.prev, d, d.next)) return;
                                d = d.nextZ;
                            }
                            for (;p && p.z >= h; ) {
                                if (p !== t.prev && p !== t.next && Se(i.x, i.y, o.x, o.y, a.x, a.y, p.x, p.y) && 0 <= _e(p.prev, p, p.next)) return;
                                p = p.prevZ;
                            }
                            for (;d && d.z <= f; ) {
                                if (d !== t.prev && d !== t.next && Se(i.x, i.y, o.x, o.y, a.x, a.y, d.x, d.y) && 0 <= _e(d.prev, d, d.next)) return;
                                d = d.nextZ;
                            }
                            return 1;
                        }
                    }(e, i, o, a) : function(t) {
                        var e = t.prev, n = t, r = t.next;
                        if (!(0 <= _e(e, n, r))) {
                            for (var i = t.next.next; i !== t.prev; ) {
                                if (Se(e.x, e.y, n.x, n.y, r.x, r.y, i.x, i.y) && 0 <= _e(i.prev, i, i.next)) return;
                                i = i.next;
                            }
                            return 1;
                        }
                    }(e)) n.push(_.i / r), n.push(e.i / r), n.push(E.i / r), Re(e), e = E.next, O = E.next; else if ((e = E) === O) {
                        s ? 1 === s ? t(e = function(t, e, n) {
                            var r = t;
                            do {
                                var i = r.prev, o = r.next.next;
                            } while (!Ee(i, o) && Oe(i, r, r.next, o) && Le(i, o) && Le(o, i) && (e.push(i.i / n), 
                            e.push(r.i / n), e.push(o.i / n), Re(r), Re(r.next), r = t = o), (r = r.next) !== t);
                            return be(r);
                        }(be(e), n, r), n, r, i, o, a, 2) : 2 === s && function(e, n, r, i, o, a) {
                            var s = e;
                            do {
                                for (var l, u = s.next.next; u !== s.prev; ) {
                                    if (s.i !== u.i && function(t, e) {
                                        return t.next.i !== e.i && t.prev.i !== e.i && !function(t, e) {
                                            var n = t;
                                            do {
                                                if (n.i !== t.i && n.next.i !== t.i && n.i !== e.i && n.next.i !== e.i && Oe(n, n.next, t, e)) return 1;
                                            } while ((n = n.next) !== t);
                                        }(t, e) && (Le(t, e) && Le(e, t) && function(t, e) {
                                            for (var n = t, r = !1, i = (t.x + e.x) / 2, o = (t.y + e.y) / 2; n.y > o != n.next.y > o && n.next.y !== n.y && i < (n.next.x - n.x) * (o - n.y) / (n.next.y - n.y) + n.x && (r = !r), 
                                            (n = n.next) !== t; ) ;
                                            return r;
                                        }(t, e) && (_e(t.prev, t, e.prev) || _e(t, e.prev, e)) || Ee(t, e) && 0 < _e(t.prev, t, t.next) && 0 < _e(e.prev, e, e.next));
                                    }(s, u)) return l = Ae(s, u), s = be(s, s.next), l = be(l, l.next), t(s, n, r, i, o, a), 
                                    t(l, n, r, i, o, a);
                                    u = u.next;
                                }
                            } while ((s = s.next) !== e);
                        }(e, n, r, i, o, a) : t(be(e), n, r, i, o, a, 1);
                        break;
                    }
                }
            }(c, h, n, f, p, s);
        }
        return h;
    };
    function ge(t, e, n, r, i) {
        var o, a;
        if (i === 0 < function(t, e, n, r) {
            for (var i = 0, o = e, a = n - r; o < n; o += r) i += (t[a] - t[o]) * (t[o + 1] + t[a + 1]), 
            a = o;
            return i;
        }(t, e, n, r)) for (o = e; o < n; o += r) a = Pe(o, t[o], t[o + 1], a); else for (o = n - r; e <= o; o -= r) a = Pe(o, t[o], t[o + 1], a);
        return a && Ee(a, a.next) && (Re(a), a = a.next), a;
    }
    function be(t, e) {
        if (!t) return t;
        e = e || t;
        var n, r = t;
        do {
            if (n = !1, r.steiner || !Ee(r, r.next) && 0 !== _e(r.prev, r, r.next)) r = r.next; else {
                if (Re(r), (r = e = r.prev) === r.next) break;
                n = !0;
            }
        } while (n || r !== e);
        return e;
    }
    function xe(t, e) {
        return t.x - e.x;
    }
    function we(t, e, n, r, i) {
        return (t = 1431655765 & ((t = 858993459 & ((t = 252645135 & ((t = 16711935 & ((t = 32767 * (t - n) * i) | t << 8)) | t << 4)) | t << 2)) | t << 1)) | (e = 1431655765 & ((e = 858993459 & ((e = 252645135 & ((e = 16711935 & ((e = 32767 * (e - r) * i) | e << 8)) | e << 4)) | e << 2)) | e << 1)) << 1;
    }
    function Se(t, e, n, r, i, o, a, s) {
        return 0 <= (i - a) * (e - s) - (t - a) * (o - s) && 0 <= (t - a) * (r - s) - (n - a) * (e - s) && 0 <= (n - a) * (o - s) - (i - a) * (r - s);
    }
    function _e(t, e, n) {
        return (e.y - t.y) * (n.x - e.x) - (e.x - t.x) * (n.y - e.y);
    }
    function Ee(t, e) {
        return t.x === e.x && t.y === e.y;
    }
    function Oe(t, e, n, r) {
        var i = Te(_e(t, e, n)), o = Te(_e(t, e, r)), a = Te(_e(n, r, t)), s = Te(_e(n, r, e));
        return i !== o && a !== s || 0 === i && Me(t, n, e) || 0 === o && Me(t, r, e) || 0 === a && Me(n, t, r) || !(0 !== s || !Me(n, e, r));
    }
    function Me(t, e, n) {
        return e.x <= Math.max(t.x, n.x) && e.x >= Math.min(t.x, n.x) && e.y <= Math.max(t.y, n.y) && e.y >= Math.min(t.y, n.y);
    }
    function Te(t) {
        return 0 < t ? 1 : t < 0 ? -1 : 0;
    }
    function Le(t, e) {
        return _e(t.prev, t, t.next) < 0 ? 0 <= _e(t, e, t.next) && 0 <= _e(t, t.prev, e) : _e(t, e, t.prev) < 0 || _e(t, t.next, e) < 0;
    }
    function Ae(t, e) {
        var n = new je(t.i, t.x, t.y), r = new je(e.i, e.x, e.y), i = t.next, o = e.prev;
        return (t.next = e).prev = t, (n.next = i).prev = n, (r.next = n).prev = r, (o.next = r).prev = o, 
        r;
    }
    function Pe(t, e, n, r) {
        return t = new je(t, e, n), r ? (t.next = r.next, (t.prev = r).next.prev = t, r.next = t) : (t.prev = t).next = t, 
        t;
    }
    function Re(t) {
        t.next.prev = t.prev, t.prev.next = t.next, t.prevZ && (t.prevZ.nextZ = t.nextZ), 
        t.nextZ && (t.nextZ.prevZ = t.prevZ);
    }
    function je(t, e, n) {
        this.i = t, this.x = e, this.y = n, this.prev = null, this.next = null, this.z = null, 
        this.prevZ = null, this.nextZ = null, this.steiner = !1;
    }
    function Ie(t) {
        return function(t) {
            if (Array.isArray(t)) return De(t);
        }(t) || function(t) {
            if ("undefined" != typeof Symbol && null != t[Symbol.iterator] || null != t["@@iterator"]) return Array.from(t);
        }(t) || function(t, e) {
            var n;
            if (t) return "string" == typeof t ? De(t, e) : "Map" === (n = "Object" === (n = Object.prototype.toString.call(t).slice(8, -1)) && t.constructor ? t.constructor.name : n) || "Set" === n ? Array.from(t) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? De(t, e) : void 0;
        }(t) || function() {
            throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
        }();
    }
    function De(t, e) {
        (null == e || e > t.length) && (e = t.length);
        for (var n = 0, r = new Array(e); n < e; n++) r[n] = t[n];
        return r;
    }
    var ke = {
        area: function(t) {
            for (var e = t.length, n = 0, r = e - 1, i = 0; i < e; r = i++) n += t[r].x * t[i].y - t[i].x * t[r].y;
            return .5 * n;
        },
        isClockWise: function(t) {
            return ke.area(t) < 0;
        },
        triangulateShape: function(t, e) {
            var n = [], r = [], i = [], o = (Ce(t), Ne(n, t), t.length);
            e.forEach(Ce);
            for (var a = 0; a < e.length; a++) r.push(o), o += e[a].length, Ne(n, e[a]);
            for (var s = ve(n, r), l = 0; l < s.length; l += 3) i.push(s.slice(l, l + 3));
            return i;
        },
        triangulate: function(t) {
            (i = []).push.apply(i, Ie(t[0]));
            for (var e = [], n = 1; n < t.length; n++) {
                var r = [];
                r.push.apply(r, Ie(t[n])), e.push(r);
            }
            if (!ke.isClockWise(i)) for (var i = i.reverse(), o = 0, a = e.length; o < a; o++) {
                var s = e[o];
                ke.isClockWise(s) && (e[o] = s.reverse());
            }
            return ke.triangulateShape(i, e);
        }
    };
    function Ce(t) {
        var e, n = t.length;
        2 < n && (n = t[n - 1], e = t[0], n.x === e.x) && n.y === e.y && t.pop();
    }
    function Ne(t, e) {
        for (var n = 0; n < e.length; n++) t.push(e[n].x), t.push(e[n].y);
    }
    function Fe(t) {
        return (Fe = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Be(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Fe(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Fe(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Fe(t) ? t : String(t);
            }(r.key), r);
        }
    }
    var Ue = 1e-5, ze = .001, Ge = Math.PI / 180, He = 180 / Math.PI;
    It = function(t, e, n) {
        return e && Be(t.prototype, e), n && Be(t, n), Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }(function t() {
        if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
    });
    Object.assign(It.prototype, {
        xn: function() {
            return Ue;
        },
        En: function() {
            return Ge;
        },
        Mn: function() {
            return He;
        },
        On: function(t) {
            return t < Ue && -Ue < t;
        },
        Tn: function(t) {
            return Ue < t;
        },
        jn: function(t) {
            return t < -Ue;
        },
        Ln: function(t, e, n) {
            return e = (t.x - n.x) * (e.y - n.y) - (e.x - n.x) * (t.y - n.y), Math.abs(e) < Ue ? 0 : e;
        },
        distanceOfTwoPoints: function(t, e) {
            return t && e ? Math.sqrt((t.x - e.x) * (t.x - e.x) + (t.y - e.y) * (t.y - e.y)) : Number.NaN;
        },
        distance: function(t, e) {
            return Math.sqrt(Math.pow(e.x - t.x, 2) + Math.pow(e.y - t.y, 2));
        },
        isPolygonContainPoint: function(t, e) {
            for (var n = 0, r = 0; r < t.length; r++) {
                var i = t[r].x, o = t[r].y, a = 0, s = (r < t.length - 1 ? (a = t[r + 1].x, t[r + 1]) : (a = t[0].x, 
                t[0])).y;
                if (i === e.x && o === e.y || a === e.x && s === e.y) return !0;
                if (s !== o) {
                    var l = i + (e.y - o) * (a - i) / (s - o);
                    if (l === e.x) return !0;
                    i !== a ? l <= Math.max(i, a) && l >= Math.min(i, a) && l > e.x && l !== i && (l === a && 0 < (o - e.y) * (s - e.y) ? n += 2 : n++) : l <= Math.max(i, a) && l >= Math.min(i, a) && l > e.x && (l === a && 0 < (o - e.y) * (s - e.y) ? n += 2 : n++);
                }
            }
            return 0 < n % 2;
        },
        isPolygonContainPoint2: function(t, e) {
            var n = t.length;
            if (n < 3) return !1;
            for (var r = n - 1, i = 0, o = 0; o < n; o++) {
                var a = t[o], s = t[r];
                a.y > e.y != s.y > e.y && e.x < (s.x - a.x) * (e.y - a.y) / (s.y - a.y) + a.x && (a.y > s.y ? i++ : i--), 
                r = o;
            }
            return 0 != i;
        },
        isPolygonInPolygon: function(t, e) {
            var n = Object.assign([], t), r = Object.assign([], e);
            n.push(n[0]), r.push(r[0]);
            for (var i = 0; i < n.length - 1; i++) {
                var o = n[i];
                if (!this.isPolygonContainPoint(r, o) && !this.isPolygonContainPoint2(r, o)) return !1;
            }
            for (var a = 0; a < n.length - 1; a++) for (var s = 0; s < r.length - 1; s++) if (this.kn(n[a], n[a + 1], r[s], r[s + 1]).isintersect && !this.An(r[s], r[s + 1], n[a]) && !this.An(r[s], r[s + 1], n[a + 1])) return !1;
            return !0;
        },
        Rn: function(t, e, n, r) {
            return !(Math.max(t.x, e.x) < Math.min(n.x, r.x) || Math.max(t.y, e.y) < Math.min(n.y, r.y) || Math.max(n.x, r.x) < Math.min(t.x, e.x) || Math.max(n.y, r.y) < Math.min(t.y, e.y));
        },
        Cn: function(t, e, n, r) {
            return !(Math.max(t.x, e.x) < Math.min(n.x, r.x) || Math.max(t.y, e.y) < Math.min(n.y, r.y) || Math.max(n.x, r.x) < Math.min(t.x, e.x) || Math.max(n.y, r.y) < Math.min(t.y, e.y) || 0 === this.Ln(n, e, t) && 0 === this.Ln(e, r, t) || this.Ln(n, e, t) * this.Ln(e, r, t) < 0 || this.Ln(t, r, n) * this.Ln(r, e, n) < 0);
        },
        Nn: function(t, e, n) {
            return !(t.x < e.x || t.y < e.y || t.x > n.x || t.y > n.y);
        },
        Pn: function(t, e, n) {
            var r = Math.min(e.x, n.x), i = Math.max(e.x, n.x), o = Math.min(e.y, n.y);
            e = Math.max(e.y, n.y);
            return !(t.x < r || t.x > i || t.y < o || t.y > e);
        },
        Dn: function(t, e, n) {
            var r = Math.min(n.x, e.x), i = Math.max(n.x, e.x), o = Math.min(n.y, e.y);
            n = Math.max(n.y, e.y);
            return !(t.x < r || t.x > i || t.y < o || t.y > n);
        },
        Fn: function(t, e, n) {
            for (var r, i, o = !1, a = 0; a < n; a++) r = e[a], i = e[(a + 1) % n], (r.y < t.y && i.y >= t.y || i.y < t.y && r.y >= t.y) && (r.x <= t.x || i.x <= t.x) && r.x + (t.y - r.y) / (i.y - r.y) * (i.x - r.x) < t.x && (o = !o);
            return o;
        },
        Gn: function(t, e, n) {
            return (t.x - e.x) * (n.y - e.y) == (n.x - e.x) * (t.y - e.y) && Math.min(e.x, n.x) <= t.x && t.x <= Math.max(e.x, n.x) && Math.min(e.y, n.y) <= t.y && t.y <= Math.max(e.y, n.y);
        },
        Un: function(t, e) {
            return Math.sqrt((t.x - e.x) * (t.x - e.x) + (t.y - e.y) * (t.y - e.y));
        },
        Bn: function(t, e) {
            return (t.x - e.x) * (t.x - e.x) + (t.y - e.y) * (t.y - e.y);
        },
        Hn: function(t, e, n) {
            var r = e.x, i = (e = e.y, n.x), o = (n = n.y, t.x), a = i - r, s = n - e, l = a * a + s * s, u = o - r, c = (t = t.y) - e, h = u * u + c * c;
            return this.On(l) ? this.On(h) ? 0 : h : (l = Math.sqrt(l), c = this.Tn(s = (a /= l) * u + (u = s / l) * c) ? this.jn(s - l) ? (c = o - (r + s * a)) * c + (l = t - (e + s * u)) * l : (r = o - i) * r + (a = t - n) * a : h, 
            this.On(c) ? 0 : c);
        },
        zn: function(t, e, n, r) {
            var i, o = e.x, a = e.y, s = n.x, l = n.y, u = t.x, c = (t = t.y, s - o), h = l - a, f = Math.sqrt(c * c + h * h), p = u - o, d = t - a, y = Math.sqrt(p * p + d * d);
            return this.On(f) ? (r.x = e.x, r.y = e.y, this.On(i = y) ? 0 : i) : (i = this.Tn(h = (c /= f) * p + (p = h / f) * d) ? this.jn(h - f) ? (f = u - (d = o + h * c), 
            c = t - (o = a + h * p), a = Math.sqrt(f * f + c * c), r.x = d, r.y = o, a) : (h = u - s, 
            p = t - l, f = Math.sqrt(h * h + p * p), r.x = n.x, r.y = n.y, f) : (r.x = e.x, 
            r.y = e.y, y), this.On(i) ? 0 : i);
        },
        Vn: function(t, e) {
            for (var n = 0, r = 0, i = 0, o = 0; o < e; o++) {
                var a = t[o], s = t[(o + 1) % e], l = (a.x * s.y - a.y * s.x) / 2;
                n += l, r += l * (a.x + s.x) / 3, i += l * (a.y + s.y) / 3;
            }
            return {
                x: r /= n,
                y: i /= n
            };
        },
        Wn: function(t) {
            for (var e = ke.triangulate([ t ]), n = 0, r = 0, i = 0, o = 0; o < e.length; o++) {
                var a = t[e[o][0]], s = t[e[o][1]], l = t[e[o][2]], u = s.x - a.x, c = s.y - a.y, h = l.x - a.x;
                n += u = (u * (l.y - a.y) - h * c) / 2, r += (a.x + s.x + l.x) / 3 * u, i += (a.y + s.y + l.y) / 3 * u;
            }
            return {
                x: r / n,
                y: i / n
            };
        },
        Yn: function(t, e) {
            if (e < 3) return 0;
            for (var n = 0, r = 0; r < e; ++r) {
                var i = t[r], o = t[(r + 1) % e];
                n += i.x * o.y - i.y * o.x;
            }
            return Math.abs(n / 2);
        },
        Xn: function(t, e, n, r, i) {
            var o, a;
            return this.Cn(t, e, n, r) ? (o = (r.x - n.x) * (t.y - e.y) - (e.x - t.x) * (n.y - r.y), 
            a = (t.y - n.y) * (e.x - t.x) * (r.x - n.x) + n.x * (r.y - n.y) * (e.x - t.x) - t.x * (e.y - t.y) * (r.x - n.x), 
            i.x = a / o, o = (t.x - e.x) * (r.y - n.y) - (e.y - t.y) * (n.x - r.x), a = e.y * (t.x - e.x) * (r.y - n.y) + (r.x - e.x) * (r.y - n.y) * (t.y - e.y) - r.y * (n.x - r.x) * (e.y - t.y), 
            i.y = a / o, 1) : 0;
        },
        Zn: function(t, e, n, r, i) {
            var o = Math.min(n.x, r.x), a = Math.max(n.x, r.x), s = Math.min(n.y, r.y), l = Math.max(n.y, r.y), u = t.x, c = t.y, h = n.x, f = n.y, p = r.x, d = r.y;
            if (90 == e) return !(t.x < o || t.x > a || (a - o < ze ? t.y >= f && t.y <= d || t.y >= d && t.y <= f ? (i.x = t.x, 
            i.y = t.y, 0) : f < d && t.x < f ? (i.x = h, i.y = f, 0) : !(d < f && t.x < d) || (i.x = p, 
            i.y = d, 0) : (i.y = y = (d - f) / (p - h) * (u - h) + f, i.x = u, y < c || !this.Dn(i, n, r))));
            if (270 == e) return !(t.x < o || t.x > a || (Math.abs(a - o < ze) ? t.y >= f && t.y <= d || t.y >= d && t.y <= f ? (i.x = t.x, 
            i.y = t.y, 0) : f < d && t.y > d ? (i.x = p, i.y = d, 0) : !(d < f && t.y > f) || (i.x = h, 
            i.y = f, 0) : (i.y = y = (d - f) / (p - h) * (u - h) + f, i.x = u, c < y || !this.Dn(i, n, r))));
            if (270 != e && 90 != e && Math.abs(a - o < ze)) {
                t = o;
                var y = Math.tan(e / 180 * Math.PI) * (t - u) + c;
                if (i.y = y, i.x = t, this.Dn(i, n, r)) return a = y - c, 0 < (o = t - u) / Math.sqrt(o * o + a * a) * Math.cos(e / 180 * Math.PI);
            }
            return Math.abs(l - s <= ze) ? (y = s, t = 1 / Math.tan(e / 180 * Math.PI) * (y - c) + u, 
            i.x = t, i.y = y, !!this.Dn(i, n, r) && (o = y - c, 0 < (a = t - u) / Math.sqrt(a * a + o * o) * Math.cos(e / 180 * Math.PI))) : (t = c + (l = Math.tan(e / 180 * Math.PI)) * ((y = (f - c - ((s = (d - f) / (p - h)) * h - l * u)) / (l - s)) - u), 
            i.x = y, i.y = t, !!this.Dn(i, n, r) && (a = y - u, o = t - c, Math.abs(a) <= ze && Math.abs(o) <= ze || 0 < a / Math.sqrt(a * a + o * o) * Math.cos(e / 180 * Math.PI)));
        },
        qn: function(t, e) {
            return Math.abs(t.x - e.x) < Ue && Math.abs(t.y - e.y) < Ue;
        },
        Jn: function(t, e, n, r) {
            var i, o, a, s, l = t.x, u = t.y, c = e.x, h = e.y, f = n.x, p = n.y;
            return this.qn(t, e) || this.qn(t, n) ? (r.x = l, r.y = u, !0) : (a = Math.min(e.x, n.x), 
            s = Math.max(e.x, n.x), i = Math.min(e.y, n.y), o = Math.max(e.y, n.y), Math.abs(c - f) < 1e-5 ? (r.x = c, 
            i <= (r.y = u) && u <= o) : Math.abs(h - p) < 1e-5 ? (r.x = l, r.y = h, a <= l && l <= s) : (s = u + (i = -1 / ((p - h) / (f - c))) * ((a = (h - u - ((o = (p - h) / (f - c)) * c - i * l)) / (i - o)) - l), 
            r.x = a, r.y = s, !!this.Dn(r, e, n) || !(!this.qn(t, e) && !this.qn(t, n))));
        },
        Kn: function(t, e) {
            return {
                x: t.y * e.z - t.z * e.y,
                y: t.z * e.x - t.x * e.z,
                z: t.x * e.y - t.y * e.x
            };
        },
        Qn: function(t, e) {
            return t.x * e.x + t.y * e.y + t.z * e.z;
        },
        $n: function(t) {
            return Math.sqrt(t.x * t.x + t.y * t.y + t.z * t.z);
        },
        te: function(t, e) {
            return t.x * e.x + t.y * e.y;
        },
        ne: function(t, e) {
            return t.x * e.y - t.y * e.x;
        },
        ee: function(t) {
            return Math.sqrt(t.x * t.x + t.y * t.y);
        },
        ie: function(t, e) {
            var n, r;
            return 0 == t.x && 0 == t.y || 0 == e.x && 0 == e.y ? 0 : (n = {
                x: t.x,
                y: t.y,
                z: 0
            }, r = {
                x: e.x,
                y: e.y,
                z: 0
            }, n = this.Kn(n, r), r = this.te(t, e), r = Math.acos(r / (this.ee(t) * this.ee(e))), 
            0 < n.z ? r / Math.PI * 180 : 360 - r / Math.PI * 180);
        },
        re: function(t, e, n, r) {
            for (var i = 0; i < n.length; i++) {
                var o = n[i], a = n[(i + 1) % n.length];
                if (1 == this.Xn(t, e, o, a, r)) return !0;
            }
            return !1;
        },
        oe: function(t, e, n, r, i) {
            var o = Math.min(t.x, n.x, r.x), a = Math.max(t.x, n.x, r.x), s = Math.min(t.y, n.y, r.y), l = Math.max(t.y, n.y, r.y);
            a = Math.sqrt((a - o) * (a - o) + (l - s) * (l - s)), o = e / 180 * Math.PI, l = a * Math.cos(o) + t.x, 
            s = a * Math.sin(o) + t.y;
            return 1 == this.Xn(t, {
                x: l,
                y: s
            }, n, r, i);
        },
        se: function(t) {
            var e = {
                x: null,
                y: null
            }, n = 0, r = 0, i = t.length;
            1 < t.length && t[0].x === t[t.length - 1].x && t[0].y === t[t.length - 1].y && i--;
            for (var o = 0; o < i; o++) n += t[o].x, r += t[o].y;
            return e.x = n / t.length, e.y = r / t.length, e;
        },
        ae: function(t, e, n, r) {
            var i = [], o = t.x - e, a = t.x + e, s = t.y - e, l = t.y + e, u = Math.min(n.x, r.x), c = Math.max(n.x, r.x), h = Math.min(n.y, r.y), f = Math.max(n.y, r.y);
            return c < o || a < u || f < s || l < h || (o = r.x - n.x, a = r.y - n.y, (s = (t = (o * (s = t.x - n.x) + a * (l = t.y - n.y)) / (r = o * o + a * a)) * t - (s * s + l * l - e * e) / r) < 0) || (l = Math.sqrt(s), 
            r = {
                x: n.x - o * (e = -t + l),
                y: n.y - a * e
            }, o = {
                x: n.x - o * (s = -t - l),
                y: n.y - a * s
            }, e !== s && (u <= r.x && r.x <= c && h <= r.y && r.y <= f && i.push(r), u <= o.x) && o.x <= c && h <= o.y && o.y <= f && i.push(o)), 
            i;
        },
        ue: function(t, e, n) {
            var r, i = {};
            if (t.x != e.x) return r = e = (e.y - t.y) / (e.x - t.x), e = t.y - e * t.x, i.x = (+n.x - -1 * r * n.y - r * e) / (r * r + 1), 
            i.y = (r * r * n.y - -1 * r * n.x - -1 * e) / (r * r + 1), i;
            i.x = t.x, i.y = n.y;
        },
        kn: function(t, e, n, r) {
            var i, o, a, s, l = {
                point: null,
                isintersect: !1
            };
            return this.distanceOfTwoPoints(t, n) < .001 || this.distanceOfTwoPoints(t, r) < .001 ? (l.isintersect = !0, 
            l.point = t) : this.distanceOfTwoPoints(e, n) < .001 || this.distanceOfTwoPoints(e, r) < .001 ? (l.isintersect = !0, 
            l.point = e) : (i = {
                x: e.x - t.x,
                y: e.y - t.y
            }, o = {
                x: r.x - n.x,
                y: r.y - n.y
            }, a = {
                x: n.x - t.x,
                y: n.y - t.y
            }, r = {
                x: r.x - t.x,
                y: r.y - t.y
            }, e = {
                x: e.x - n.x,
                y: e.y - n.y
            }, n = {
                x: -a.x,
                y: -a.y
            }, s = this.ne(o, i), Math.abs(s) <= 1e-5 || this.ne(a, i) * this.ne(r, i) <= -5e-4 && this.ne(n, o) * this.ne(e, o) < -5e-4 && (r = this.ne(o, a) / s, 
            l.point = {
                x: t.x + i.x * r,
                y: t.y + i.y * r
            }, l.isintersect = !0)), l;
        },
        ce: function(t, e, n) {
            t.x === e.x && (e.x = e.x + 1), t.y === e.y && (e.y = e.y + 1), e.x === n.x && (n.x = n.x + 1), 
            e.y === n.y && (n.y = n.y + 1);
            var r = e.x - t.x, i = (t = e.y - t.y, n.x - e.x);
            return !(0 < r * (n.y - e.y) - t * i);
        },
        getAngle: function(t) {
            var e = t.p1, n = (t = t.p2).x - e.x;
            t = t.y - e.y, e = Math.sqrt(n * n + t * t), e = Math.asin(Math.abs(t) / e);
            return 0 < n && 0 < t ? e : n < 0 && 0 < t ? Math.PI - e : n < 0 && t < 0 ? Math.PI + e : 0 < n && t < 0 ? 2 * Math.PI - e : 0 == n && 0 < t ? e : 0 == n && t < 0 ? 3 * Math.PI / 2 : 0 < n && 0 == t ? e : n < 0 && 0 == t ? Math.PI : null;
        },
        fe: function(t) {
            var e = this.distanceOfTwoPoints(t[0], t[1]), n = this.distanceOfTwoPoints(t[1], t[2]), r = (e + n + (t = this.distanceOfTwoPoints(t[0], t[2]))) / 2;
            return Math.sqrt(r * (r - e) * (r - n) * (r - t));
        },
        he: function(t, e) {
            var n, r, i, o, a;
            return this.zn(t, e[0], e[1], {}) < 1e-4 || this.zn(t, e[0], e[2], {}) < 1e-4 || this.zn(t, e[1], e[2], {}) < 1e-4 || (o = {
                x: e[1].x - e[0].x,
                y: e[1].y - e[0].y
            }, n = {
                x: e[0].x - e[2].x,
                y: e[0].y - e[2].y
            }, r = {
                x: e[2].x - e[1].x,
                y: e[2].y - e[1].y
            }, a = {
                x: t.x - e[0].x,
                y: t.y - e[0].y
            }, i = {
                x: t.x - e[1].x,
                y: t.y - e[1].y
            }, t = {
                x: t.x - e[2].x,
                y: t.y - e[2].y
            }, e = this.ne(o, a), o = this.ne(r, i), a = this.ne(n, t), Ue < e * o && Ue < o * a);
        },
        le: function(t, e, n) {
            var r = n.length, i = {
                isintersect: !1,
                start: null,
                end: null,
                type: 0,
                outer: null
            }, o = [];
            if (this.he(t, n) && (i.start = t), this.he(e, n) && (i.end = e), null != i.start && null != i.end) i.isintersect = !0, 
            i.type = 1; else {
                for (var a = (n[1].x + n[2].x) / 2, s = (n[1].y + n[2].y) / 2, l = 1; l < r; l++) {
                    var u, c = this.kn(t, e, n[l - 1], n[l]);
                    if (c.isintersect) {
                        if (null != i.start) return i.end = c.point, i.isintersect = !0, i.outer = "end", 
                        u = this.ie({
                            x: a - n[0].x,
                            y: s - n[0].y
                        }, {
                            x: e.x - n[0].x,
                            y: e.y - n[0].y
                        }), i.type = 0 < (u = u < 180 ? u : u - 360) ? 2 : 3, i;
                        if (null != i.end) return i.start = c.point, i.isintersect = !0, i.outer = "start", 
                        u = this.ie({
                            x: a - n[0].x,
                            y: s - n[0].y
                        }, {
                            x: t.x - n[0].x,
                            y: t.y - n[0].y
                        }), i.type = 0 < (u = u < 180 ? u : u - 360) ? 2 : 3, i;
                        o.push(c);
                    }
                }
                var h, f = this.kn(t, e, n[0], n[r - 1]);
                if (f.isintersect) {
                    if (null != i.start) return i.end = f.point, i.isintersect = !0, i.outer = "end", 
                    h = this.ie({
                        x: a - n[0].x,
                        y: s - n[0].y
                    }, {
                        x: e.x - n[0].x,
                        y: e.y - n[0].y
                    }), i.type = 0 < (h = h < 180 ? h : h - 360) ? 2 : 3, i;
                    if (null != i.end) return i.start = f.point, i.isintersect = !0, i.outer = "start", 
                    h = this.ie({
                        x: a - n[0].x,
                        y: s - n[0].y
                    }, {
                        x: t.x - n[0].x,
                        y: t.y - n[0].y
                    }), i.type = 0 < (h = h < 180 ? h : h - 360) ? 2 : 3, i;
                    o.push(f);
                }
                2 != o.length || this.distanceOfTwoPoints(o[0].point, o[1].point) < .01 || (this.distanceOfTwoPoints(o[0].point, t) <= this.distanceOfTwoPoints(o[0].point, e) ? (i.start = o[0].point, 
                i.end = o[1].point) : (i.start = o[1].point, i.end = o[0].point), i.isintersect = !0, 
                i.type = 4);
            }
            return i;
        },
        de: function(t, e, n) {
            var r = n.length, i = {
                isintersect: !1,
                start: null,
                end: null
            }, o = [];
            if (this.he(t, n) && (i.start = t), this.he(e, n) && (i.end = e), null != i.start && null != i.end) i.isintersect = !0; else {
                for (var a = 1; a < r; a++) {
                    var s = this.kn(t, e, n[a - 1], n[a]);
                    if (s.isintersect) {
                        if (null != i.start) return i.end = s.point, i.isintersect = !0, i;
                        if (null != i.end) return i.start = t, i.isintersect = !0, i;
                        o.push(s);
                    }
                }
                var l = this.kn(t, e, n[0], n[r - 1]);
                if (l.isintersect) {
                    if (null != i.start) return i.end = l.point, i.isintersect = !0, i;
                    if (null != i.end) return i.start = t, i.isintersect = !0, i;
                    o.push(l);
                }
                2 == o.length && (i.start = (this.distanceOfTwoPoints(o[0].point, t) <= this.distanceOfTwoPoints(o[0].point, e) ? o[0] : o[1]).point, 
                i.end = (this.distanceOfTwoPoints(o[0].point, t) > this.distanceOfTwoPoints(o[0].point, e) ? o[0] : o[1]).point, 
                i.isintersect = !0);
            }
            return i;
        },
        ve: function(t, e) {
            if (0 == e.length) return [ t ];
            var n, r, i = this.pe(e), o = [], a = (i.sort(function(e, n) {
                var r = (e.me.x - t.me.x) * (e.me.x - t.me.x) + (e.me.y - t.me.y) * (e.me.y - t.me.y), i = (n.me.x - t.me.x) * (n.me.x - t.me.x) + (n.me.y - t.me.y) * (n.me.y - t.me.y);
                return (r < (e = (e.ye.x - t.me.x) * (e.ye.x - t.me.x) + (e.ye.y - t.me.y) * (e.ye.y - t.me.y)) ? r : e) < (i < (n = (n.ye.x - t.me.x) * (n.ye.x - t.me.x) + (n.ye.y - t.me.y) * (n.ye.y - t.me.y)) ? i : n);
            }), 0);
            for (a = 0; a < i.length; a++) this.distanceOfTwoPoints(i[a].me, i[a].ye) < .01 || (n = this.distanceOfTwoPoints(i[a].me, t.me), 
            r = this.distanceOfTwoPoints(i[a].ye, t.me), n < .01 ? t.me = i[a].ye : r < .01 ? t.me = i[a].me : n < r ? .1 < this.distanceOfTwoPoints(t.me, i[a].me) && (o.push({
                be: t.be,
                me: t.me,
                ye: i[a].me,
                Un: t.Un,
                ge: t.ge
            }), t.me = i[a].ye) : .1 < this.distanceOfTwoPoints(t.me, i[a].ye) && (o.push({
                be: t.be,
                me: t.me,
                ye: i[a].ye,
                Un: t.Un,
                ge: t.ge
            }), t.me = i[a].me), i.splice(a, 1));
            return .1 < this.distanceOfTwoPoints(t.me, t.ye) && o.push(t), o;
        },
        pe: function(t) {
            var e = [];
            if (1 == t.length) return t;
            for (var n = t[0], r = 1; 0 < t.length; ) {
                if (r >= t.length) {
                    if (e.push(n), t.splice(0, 1), t.length < 1) break;
                    n = t[0], r = 1;
                }
                if (1 === t.length) {
                    e.push(n);
                    break;
                }
                this.An(n.me, n.ye, t[r].me) ? (this.An(n.me, n.ye, t[r].ye) || (n.ye = t[r].ye), 
                t.splice(r, 1)) : this.An(n.me, n.ye, t[r].ye) ? (n.me = t[r].me, t.splice(r, 1)) : this.An(t[r].me, t[r].ye, n.me) ? (this.An(t[r].me, t[r].ye, n.ye) || (t[r].ye = n.ye), 
                n = t[r], t.splice(r, 1)) : this.An(t[r].me, t[r].ye, n.ye) ? (t[r].me = n.me, n = t[r], 
                t.splice(r, 1)) : r++;
            }
            return e;
        },
        An: function(t, e, n) {
            var r = t.x - n.x, i = t.y - n.y, o = e.x - n.x, a = e.y - n.y, s = this.distanceOfTwoPoints(t, n);
            n = this.distanceOfTwoPoints(e, n), t = this.distanceOfTwoPoints(t, e);
            return r * a - i * o < 1e-5 && s + n - t < .001;
        }
    });
    var Ve = new It();
    function We(t) {
        return (We = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Ye(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != We(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != We(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == We(t) ? t : String(t);
            }(r.key), r);
        }
    }
    It = function() {
        function t() {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
            this.V = {
                x: Number.MAX_VALUE,
                y: Number.MAX_VALUE
            }, this.H = {
                x: -Number.MAX_VALUE,
                y: -Number.MAX_VALUE
            };
        }
        var e, n;
        return e = t, (n = [ {
            key: "min",
            get: function() {
                return this.V;
            }
        }, {
            key: "max",
            get: function() {
                return this.H;
            }
        }, {
            key: "center",
            get: function() {
                var t = {
                    x: Number.NaN,
                    y: Number.NaN
                };
                return this.valid() && (t.x = (this.min.x + this.max.x) / 2, t.y = (this.min.y + this.max.y) / 2), 
                t;
            }
        }, {
            key: "size",
            get: function() {
                var t = {
                    x: Number.NaN,
                    y: Number.NaN
                };
                return this.valid() && (t.x = this.max.x - this.min.x, t.y = this.max.y - this.min.y), 
                t;
            }
        }, {
            key: "copy",
            value: function(t) {
                return this.H.x = t.max.x, this.H.y = t.max.y, this.V.x = t.min.x, this.V.y = t.min.y, 
                this;
            }
        }, {
            key: "clone",
            value: function() {
                return new t().copy(this);
            }
        }, {
            key: "reset",
            value: function() {
                this.V = {
                    x: Number.MAX_VALUE,
                    y: Number.MAX_VALUE
                }, this.H = {
                    x: -Number.MAX_VALUE,
                    y: -Number.MAX_VALUE
                };
            }
        }, {
            key: "toObject",
            value: function() {
                return {
                    min: this.min,
                    max: this.max,
                    center: this.center,
                    size: this.size
                };
            }
        }, {
            key: "expand",
            value: function(t) {
                this.we(t);
            }
        }, {
            key: "expandByCoords",
            value: function(t) {
                this._e(t);
            }
        }, {
            key: "valid",
            value: function() {
                return this.Se();
            }
        }, {
            key: "isCross",
            value: function(t) {
                var e = !0;
                return t.max.x < this.min.x && (e = !1), t.min.x > this.max.x && (e = !1), t.max.y < this.min.y && (e = !1), 
                !(t.min.y > this.max.y) && e;
            }
        } ]) && Ye(e.prototype, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }();
    var Xe = (Object.assign(It.prototype, {
        Se: function() {
            return !(this.min.x > this.max.x || this.min.y > this.max.y);
        },
        we: function(t) {
            t && t.valid() && (t.min.x < this.min.x && (this.min.x = t.min.x), t.min.y < this.min.y && (this.min.y = t.min.y), 
            t.max.x > this.max.x && (this.max.x = t.max.x), t.max.y > this.max.y) && (this.max.y = t.max.y);
        },
        _e: function(t) {
            var e = this;
            t && 0 != t.length && t.forEach(function(t) {
                t.x < e.min.x && (e.min.x = t.x), t.y < e.min.y && (e.min.y = t.y), t.x > e.max.x && (e.max.x = t.x), 
                t.y > e.max.y && (e.max.y = t.y);
            });
        }
    }), It);
    function Ze(t) {
        return (Ze = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function qe(t, e, n) {
        e = Ke(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], Ke(t).constructor) : e.apply(t, n)) && ("object" === Ze(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function Ke(t) {
        return (Ke = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function Je(t, e) {
        return (Je = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    It = function() {
        var t = n, e = ye;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t, e) {
            if (this instanceof n) return (t = qe(this, n, [ t, e ])).xe = new Xe(), t.Ee = null, 
            t;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && Je(t, e), t = n, Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }();
    var Qe = (Object.assign(It.prototype, {
        _n: function(t) {
            return t.getType() != me.MODEL ? this.Me(t) : this.Oe(t);
        },
        Oe: function(t) {
            return !0;
        },
        Te: function(t) {
            return t = t.getBound(), !!Ve.Rn(this.xe.V, this.xe.H, t.min, t.max);
        },
        Sn: function(t, e) {
            var n = t.getCoordinates();
            if (t.getType() !== me.MODEL) e.Un = Math.sqrt(Ve.Bn(n[0], this.je)); else {
                for (var r = Number.MAX_VALUE, i = 0, o = n.length; i < o; i++) for (var a = 1, s = n[i].length; a < s; a++) {
                    var l = n[i][a - 1], u = n[i][a];
                    (l = Ve.Hn(this.je, l, u)) < r && (r = l);
                }
                e.Un = Math.sqrt(r);
            }
        },
        Me: function(t) {
            return t = t.getCoordinates()[0], !!Ve.Nn(t, this.xe.V, this.xe.H) && ("circle" === this.Ee ? Ve.Bn(t, this.je) < this._radiusSquare : Ve.Fn(t, this.Le, this.Le.length - 1));
        }
    }), It);
    function $e(t) {
        return ($e = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function tn(t, e, n) {
        e = en(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], en(t).constructor) : e.apply(t, n)) && ("object" === $e(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function en(t) {
        return (en = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function nn(t, e) {
        return (nn = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    It = function() {
        var t = n, e = Qe;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t, e) {
            if (this instanceof n) return (t = tn(this, n, [ t, e ])).Ee = "polygon", t.Le = t.wn, 
            t.ke = t.Le.length - 1, t.je = Ve.Wn(t.Le), t.xe._e(t.Le), t;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && nn(t, e), t = n, Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }();
    var rn = (Object.assign(It.prototype, {
        Oe: function(t) {
            if (this.Te(t)) {
                for (var e = t.getCoordinates(), n = 0, r = e.length; n < r; n++) for (var i = 0, o = e[n].length - 1; i < o; i++) if (Ve.Fn(e[n][i], this.Le, this.Le.length)) return !0;
                for (var a = 0; a < this.ke; a++) {
                    for (var s = !1, l = 0, u = e.length; l < u; l++) Ve.Fn(this.Le[a], e[l], e[l].length - 1) && (s = 0 == l);
                    if (s) return !0;
                }
                for (var c = 0; c <= this.ke; c++) for (var h = null, f = c === this.ke ? (h = this.Le[0], 
                this.Le[c]) : (h = this.Le[c], this.Le[c + 1]), p = 0, d = e.length; p < d; p++) for (var y = 0, m = e[p].length - 1; y < m; y++) {
                    var v = e[p][y], g = e[p][y + 1];
                    if (Ve.Cn(h, f, v, g)) return !0;
                }
            }
            return !1;
        }
    }), It), on = n(31), an = (It = {
        STOP: 0,
        PASS: 1,
        PUSH: 2
    }, Object.freeze(It), It);
    function sn(t) {
        return (sn = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function ln(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != sn(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != sn(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == sn(t) ? t : String(t);
            }(r.key), r);
        }
    }
    It = function() {
        function t() {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
            this.Ae = -1, this.Re = me.NONE, this.Ce = null, this.xe = null;
        }
        var e, n;
        return e = t, (n = [ {
            key: "getType",
            value: function() {
                return this.Re;
            }
        }, {
            key: "getCoordinates",
            value: function() {
                return this.Ce;
            }
        }, {
            key: "getBound",
            value: function() {
                return this.xe || this.Ne(), this.xe;
            }
        } ]) && ln(e.prototype, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }();
    var un = (Object.assign(It.prototype, {
        tn: function() {},
        Pe: function(t) {
            t._support(this) == an.PUSH && t._result.push(this);
        }
    }), It);
    function cn(t) {
        return (cn = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function hn(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != cn(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != cn(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == cn(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function fn(t, e, n) {
        e = pn(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], pn(t).constructor) : e.apply(t, n)) && ("object" === cn(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        return dn(r);
    }
    function pn(t) {
        return (pn = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function dn(t) {
        if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return t;
    }
    function yn(t, e) {
        return (yn = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    It = function() {
        var t = n, e = un;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t) {
            var e;
            if (this instanceof n) return (e = fn(this, n)).Ae = t.eid, e.Re = me.POLYGON, Object.assign(dn(e), t), 
            e;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && yn(t, e), t = n, (e = [ {
            key: "getCenter",
            value: function() {
                return this.je;
            }
        } ]) && hn(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }();
    var mn = (Object.assign(It.prototype, {
        Ne: function() {
            var t = this;
            this.xe = new Xe(), this.Ce && this.Ce.forEach(function(e) {
                t.xe._e(e);
            });
        },
        Pe: function(t) {
            t._support(this) == an.PUSH && t._result.push(this);
        }
    }), It), vn = (It = {
        NO_RIGHT_CLICK: 2,
        NORMAL: 4
    }, Object.freeze(It), It);
    function gn(t, e) {
        (null == e || e > t.length) && (e = t.length);
        for (var n = 0, r = new Array(e); n < e; n++) r[n] = t[n];
        return r;
    }
    function bn(t) {
        return (bn = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function xn(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != bn(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != bn(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == bn(t) ? t : String(t);
            }(r.key), r);
        }
    }
    It = function() {
        function t(e, n, r) {
            var i = this;
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
            this.jt = e, this.Ct = r, this.De = [ 295829355.45, 147914677.73, 73957338.86, 36978669.43, 18489334.72, 9244667.36, 4622333.68, 2311166.84, 1155583.42, 577791.71, 288895.85, 144447.93, 72223.96, 36111.98, 18056, 9028, 4514, 2257, 1128, 564, 282, 141, 70, 35, 17, 8, 4, 2, 1 ], 
            this.Nt = [], this.Ie = new Map(), this.Fe = null, this.Ge = this.Ct.Ue, this.Be = null, 
            this.Ft = new Pt(this.jt.He, n, this.jt), this.Ft.enableDamping = this.jt.ze.enableDamping, 
            this.Ft.dampingFactor = .08, this.jt.ze.mouseMode === vn.NO_RIGHT_CLICK && this.Ft.setMouseMiddleButtonRotation(), 
            this.Ve = null, this.Ft.addEventListener("change", function() {
                i.Kt(), i.jt.Ye.We({
                    type: "viewChanged"
                }), i.jt.It.Xe = 1, null !== i.Ve && clearTimeout(i.Ve), i.Ve = setTimeout(function() {
                    i.jt.It.Xe = 0, i.jt.enableUpdateRender();
                }, 10);
            }), this.Ze = new fe(this.Ft, this.jt.qe, this.jt.Je), e = !this.jt.ze.lock, this.Ft.enableZoom = e, 
            this.Ft.enablePan = e, this.Ft.enableRotate = e, this.Ft.enableRotateLeft = e, this.Ft.enableRotateUp = e, 
            this.Ke = e, this.Qe = e, this.$e = e, this.ti = e, this.ni = this.Ft.useRange, 
            this.ei = {}, this.ii = this.ii.bind(this);
        }
        var e, n;
        return e = t, (n = [ {
            key: "enableZoom",
            get: function() {
                return this.Ke;
            },
            set: function(t) {
                this.Ke = t, this.Ft.enableZoom = t;
            }
        }, {
            key: "enableDragRange",
            get: function() {
                return this.ni;
            },
            set: function(t) {
                this.ni = t;
            }
        }, {
            key: "enableDrag",
            get: function() {
                return this.Qe;
            },
            set: function(t) {
                this.Qe = t, this.Ft.enablePan = t;
            }
        }, {
            key: "enableRotate",
            get: function() {
                return this.$e;
            },
            set: function(t) {
                this.$e = t, this.Ft.enableRotateLeft = t;
            }
        }, {
            key: "enableTilt",
            get: function() {
                return this.ti;
            },
            set: function(t) {
                this.ti = t, this.Ft.enableRotateUp = t;
            }
        }, {
            key: "enableDamping",
            get: function() {
                return this.Ft.enableDamping;
            },
            set: function(t) {
                this.Ft.enableDamping = t;
            }
        }, {
            key: "controls",
            get: function() {
                return this.Ft;
            },
            set: function(t) {
                this.Ft = t;
            }
        }, {
            key: "autoCameraNearFar",
            get: function() {
                return this.Ze;
            }
        }, {
            key: "mouseMode",
            get: function() {
                return this.jt.ze.mouseMode;
            }
        }, {
            key: "zoomSpeed",
            get: function() {
                return this.Ft.zoomSpeedParam;
            },
            set: function(t) {
                this.Ft.zoomSpeedParam = t;
            }
        }, {
            key: "copyControls",
            value: function(t) {
                return (t = new Pt(t, this.Ft.domElement, this.jt)).target = new h().copy(this.Ft.target), 
                t.maxDistance = this.Ft.maxDistance, t.minDistance = this.Ft.minDistance, t.minZoom = this.Ft.minZoom, 
                t.maxZoom = this.Ft.maxZoom, t.minPolarAngle = this.Ft.minPolarAngle, t.maxPolarAngle = this.Ft.maxPolarAngle, 
                t.update({
                    theta: this.Ft.getAzimuthalAngle()
                }), t;
            }
        }, {
            key: "pauseDamping",
            value: function() {
                this.Ft && this.Ft.pauseDamping();
            }
        }, {
            key: "resumeDamping",
            value: function() {
                this.Ft && this.Ft.pauseDamping();
            }
        } ]) && xn(e.prototype, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }();
    var wn = (Object.assign(It.prototype, {
        tn: function() {
            for (var t in clearTimeout(this.Ve), this.Ft.dispose(), this) this["" + t] = null, 
            delete this["" + t];
        },
        ri: function() {
            var t, e = this.oi(this.Ct.zoom), n = this.si(e), r = this.Ct.je, i = this.jt.ui.ai(this.jt.Dt.Ae, this.jt.Dt.level);
            i ? (r.y = i.nt, this.Ft.target = new h().copy(r), this.Ft.object.lookAt(r), this.ci(), 
            this.Ct.Ue === kt.MODE_3D ? (i = (Dt.TILT_UPPER_BOUND - this.Ct.fi) * Dt.DEG2RAD, 
            t = n * Math.cos(i), i = n * Math.sin(i), this.Ft.object.position.set(r.x, r.y + t, r.z + i), 
            this.Ft.minPolarAngle = (Dt.TILT_UPPER_BOUND - this.jt.ze.maxTiltAngle) * Dt.DEG2RAD, 
            this.Ft.maxPolarAngle = (Dt.TILT_UPPER_BOUND - this.jt.ze.minTiltAngle) * Dt.DEG2RAD) : (t = this.li(e), 
            this.Ft.minPolarAngle = 0, this.Ft.maxPolarAngle = 0, this.Ft.object.position.set(r.x, r.y + n, r.z), 
            this.Ft.object.zoom = 1 / t, this.Ft.object.updateProjectionMatrix()), i = this.di(this.Ct.vi), 
            this.Ft.update({
                theta: this.Ft.getAzimuthalAngle() + i
            })) : (this.jt.pi.error.push(e = {
                type: "info",
                InfoMode: Nt.DEFAULT_LEVEL_ERROR
            }), this.jt.Ye.We(e));
        },
        mi: function(t) {
            this.Ft.target = t, this.Ft.update();
        },
        yi: function(t) {
            var e, n, r, i, o = this;
            this.Ge === t.mode ? t.mode === this.jt.getViewMode() && t.finish && t.finish() : (this.Ge = t.mode, 
            e = this.Ft, void 0 === (n = t.duration) && (n = 1), this.Be && !1 === this.Be.qt && this.Be.finish(), 
            t.mode === kt.MODE_2D ? (e.minPolarAngle = -90 * Dt.DEG2RAD, this.Ct.fi = this.jt.getTilt(), 
            this.bi({
                animate: void 0 === t.animate || t.animate,
                duration: n,
                tilt: 90,
                finish: function() {
                    e.maxPolarAngle = 0;
                    var n = o.jt.Je, r = o.gi();
                    r = o.li(r);
                    n.quaternion.copy(e.object.quaternion), n.position.copy(e.object.position), n.zoom = 1 / r, 
                    n.updateProjectionMatrix(), e.object = n, e.update(), o.jt.He = n, o.jt.It.wi(), 
                    o.jt.Ye.We({
                        type: "viewModeChanged"
                    }), t.finish && t.finish();
                }
            })) : t.mode === kt.MODE_3D && (e.maxPolarAngle = (Dt.TILT_UPPER_BOUND - this.jt.ze.minTiltAngle) * Dt.DEG2RAD, 
            r = this.jt.qe, i = this._i(), i = this.si(i), r.quaternion.copy(e.object.quaternion), 
            r.position.copy(e.object.position), r.position.setY(e.target.y + i), r.updateMatrix(), 
            e.object = r, e.update(), this.jt.He = r, this.jt.It.wi(), this.bi({
                animate: void 0 === t.animate || t.animate,
                duration: n,
                tilt: this.Ct.fi,
                finish: t.finish
            }), this.jt.Ye.We({
                type: "viewModeChanged"
            })));
        },
        Si: function(t) {
            var e;
            (e = this.Nt).push.apply(e, function(t) {
                return function(t) {
                    if (Array.isArray(t)) return gn(t);
                }(t) || function(t) {
                    if ("undefined" != typeof Symbol && null != t[Symbol.iterator] || null != t["@@iterator"]) return Array.from(t);
                }(t) || function(t, e) {
                    var n;
                    if (t) return "string" == typeof t ? gn(t, e) : "Map" === (n = "Object" === (n = Object.prototype.toString.call(t).slice(8, -1)) && t.constructor ? t.constructor.name : n) || "Set" === n ? Array.from(t) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? gn(t, e) : void 0;
                }(t) || function() {
                    throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
                }();
            }(t));
        },
        Kt: function() {
            for (var t = 0; t < this.Nt.length; t++) this.Nt[t].call(this.jt.It);
        },
        At: function() {
            try {
                var t = !1, e = this.jt.camera, n = this.jt.getBuilding(this.Ct.Rt), r = n.getFloor(n.level), i = r.getLayers(Ct.EXTENT_LAYER)[0];
                if (this.jt.ze.panRangeValue) {
                    for (var o, a, s, l, u = new ft(), c = (u.setFromProjectionMatrix(new b().multiplyMatrices(e.projectionMatrix, e.matrixWorldInverse)), 
                    null), f = 0; f < i.Nt.length; f++) i.Nt[f].xi && (c = i.Nt[f].xi);
                    return null !== c && (o = c.geometry.boundingSphere, (a = new ot()).copy(o).applyMatrix4(c.matrixWorld), 
                    l = new ot(new h((s = this.jt.ze.panRangeValue).center.x - this.jt.x, a.center.y, this.jt.y - s.center.y), s.radius), 
                    u.intersectsSphere(l));
                }
                for (var p = [], d = this.jt.ze.container.clientWidth, y = this.jt.ze.container.clientHeight, m = (p.push(Rt.coordsScreenToMap(this.jt, {
                    x: 0,
                    y: 0,
                    level: r.level,
                    buildingID: n.Ae
                })), p.push(Rt.coordsScreenToMap(this.jt, {
                    x: d,
                    y: 0,
                    level: r.level,
                    buildingID: n.Ae
                })), p.push(Rt.coordsScreenToMap(this.jt, {
                    x: d,
                    y: y,
                    level: r.level,
                    buildingID: n.Ae
                })), p.push(Rt.coordsScreenToMap(this.jt, {
                    x: 0,
                    y: y,
                    level: r.level,
                    buildingID: n.Ae
                })), new rn("polygon", p)), v = 0; v < i.Nt.length; v++) {
                    var g = function(t) {
                        for (var e = [], n = 0; n < t.length; n++) e.push([ t[n].x, t[n].y ]);
                        for (var r = Object(on.polygonScale)(e, .9), i = [], o = 0; o < r.length; o++) i.push({
                            x: r[o][0],
                            y: r[o][1]
                        });
                        return new mn({
                            eid: "1",
                            Ce: [ i ]
                        });
                    }(i.Nt[v].B.Ce[0]);
                    if (m.Oe(g)) {
                        t = !0;
                        break;
                    }
                }
                return t;
            } catch (t) {
                return !0;
            }
        },
        ii: function() {
            var t, e, n, r, i, o, a, s, l, u = this;
            this.ei.counter < this.ei.num ? (e = (t = new Date().getTime()) - this.ei.frameTime, 
            this.ei.counter + e > this.ei.num && (e = this.ei.num - this.ei.counter), n = this.ei.num - this.ei.counter, 
            s = (this.ei.targetX - this.Ft.target.x) / n, l = (this.ei.targetZ - this.Ft.target.z) / n, 
            r = this.oi(this.ei.state.zoom), o = this.si(r), a = this.Ft.object.position.distanceTo(this.Ft.target), 
            i = new h().copy(this.Ft.object.position).sub(this.Ft.target).normalize(), i = new h().copy(i).multiplyScalar(o - a), 
            this.Ft.panAdd({
                x: s * e,
                y: 0,
                z: l * e
            }), o = this.Ft.getAzimuthalAngle(), a = (Dt.TILT_UPPER_BOUND - (this.ei.tilt + e * this.ei.perTilt)) * Dt.DEG2RAD, 
            this.ei.tilt = this.ei.tilt + e * this.ei.perTilt, "OrthographicCamera" === this.jt.He.type && (s = this._i(), 
            l = this.li(s + (r - s) / n * e), this.jt.He.zoom = 1 / l, this.jt.He.updateProjectionMatrix(), 
            this.jt.Ei()), this.Ft.update({
                offset: new h(i.x / n * e, i.y / n * e, i.z / n * e)
            }), this.Ft.update({
                theta: o + this.ei.disRotation * e
            }), this.Ft.update({
                phi: a
            }), this.jt.It.wi(), this.ei.counter = this.ei.counter + e, this.ei.frameTime = t) : ("2d" === this.ei.modeUpdateType && this.jt.setViewMode({
                mode: this.ei.state.viewMode,
                animate: !1
            }), this.jt.setVisibleLevels(this.ei.state.visibleLevels, function() {
                u.jt.getLevel() !== u.ei.state.level && u.jt.setLevel({
                    level: u.ei.state.level,
                    animate: !1
                });
            }), this.jt.Oi.Mi(this.ii), this.ei.options.finish && this.ei.options.finish());
        },
        Ti: function(t, e) {
            this.jt.Oi.Mi(this.ii), this.ei = {}, this.ei.options = e, this.ei.targetX = t.center.x - this.jt.x, 
            this.ei.targetZ = -t.center.y + this.jt.y, this.ei.num = 1e3 * e.duration, this.ei.counter = 0;
            e = this.di(t.rotation, !0), this.ei.disRotation = e / this.ei.num, t.tiltAngle = s.clamp(t.tiltAngle, this.jt.ze.minTiltAngle, this.jt.ze.maxTiltAngle), 
            this.ei.state = t, e = this.jt.getTilt();
            var n, r, i = (t.tiltAngle - e) / this.ei.num;
            this.ei.tilt = e, this.ei.perTilt = i, i = "no";
            this.jt.getViewMode() !== t.viewMode && (t.viewMode === kt.MODE_3D ? (i = "3d", 
            this.Ft.maxPolarAngle = (Dt.TILT_UPPER_BOUND - this.jt.ze.minTiltAngle) * Dt.DEG2RAD, 
            n = this.jt.qe, r = this._i(), r = this.si(r), n.quaternion.copy(this.Ft.object.quaternion), 
            n.position.copy(this.Ft.object.position), n.position.setY(this.Ft.target.y + r), 
            n.updateMatrix(), this.Ft.object = n, this.Ft.update(), this.jt.He = n, this.Ge = kt.MODE_3D) : (i = "2d", 
            this.ei.perTilt = (90 - e) / this.ei.num)), this.ei.frameTime = new Date().getTime(), 
            this.ei.modeUpdateType = i, this.jt.setFloorSpace(t.floorSpace), this.jt.Oi.ji(this.ii);
        }
    }), Object.assign(It.prototype, {
        Li: function(t) {
            var e = this, n = (t = this.jt.getZoom() * t, new ne({
                src: [ this.jt.getZoom() ],
                dest: [ t ]
            }));
            t > this.Ct.ki[1] || t < this.Ct.ki[0] || (n.rn(.5).an(function(t) {
                return e.jt.setZoom({
                    animate: !1,
                    zoom: t.destination[0]
                });
            }).un(function() {
                return e.jt.Oi.Ai(n);
            }), this.jt.Oi.Si(n.$t()));
        },
        Ri: function() {
            var t = this.jt.He.isPerspectiveCamera ? this.gi() : this._i();
            return this.Ci(t);
        },
        Ni: function(t) {
            var e, n, r = this, i = (this.Ct.zoom = t.zoom, Number.isFinite(t.duration) ? t.duration : .5), o = this.oi(this.Ct.zoom), a = this.si(o), s = this.Ft.object.position.distanceTo(this.Ft.target), l = new h().copy(this.Ft.object.position).sub(this.Ft.target).normalize(), u = new h().copy(l).multiplyScalar(a - s);
            this.jt.He.isPerspectiveCamera ? "animate" in t && !t.animate ? (this.Ft.update({
                offset: u
            }), t.finish && t.finish()) : ((e = new ne({
                src: [ 0, 0, 0 ],
                dest: [ u.x, u.y, u.z ]
            })).rn(i).an(function(n) {
                "PerspectiveCamera" === r.jt.He.type ? r.Ft.update({
                    offset: new h(n.delta[0], n.delta[1], n.delta[2])
                }) : (r.jt.Oi.Ai(e), r.Ni({
                    zoom: t.zoom,
                    animate: !1,
                    finish: t.finish
                }));
            }).un(function() {
                r.jt.Oi.Ai(e), t.finish && t.finish();
            }), this.jt.Oi.Si(e.$t())) : "animate" in t && !t.animate ? (l = this.li(o), this.jt.He.zoom = 1 / l, 
            this.jt.He.updateProjectionMatrix(), this.jt.It.wi(), this.Ft.update({
                offset: u
            }), t.finish && t.finish()) : ((n = new ne({
                src: [ this._i() ],
                dest: [ o ]
            })).rn(i).an(function(e) {
                "OrthographicCamera" === r.jt.He.type ? (e = r.li(e.destination[0]), r.jt.He.zoom = 1 / e, 
                r.jt.He.updateProjectionMatrix(), r.jt.It.wi(), r.jt.enableUpdateRender(), r.jt.Ei()) : (r.jt.Oi.Ai(n), 
                r.Ni({
                    zoom: t.zoom,
                    animate: !1,
                    finish: t.finish
                }));
            }).un(function() {
                r.Ft.update({
                    offset: u
                }), r.jt.Oi.Ai(n), t.finish && t.finish();
            }), this.jt.Oi.Si(n.$t()));
        },
        Pi: function(t) {
            this.Ct.ki = t, this.ci(), this.Ft.update();
        },
        ci: function() {
            var t = this.oi(this.Ct.ki[0]), e = this.oi(this.Ct.ki[1]);
            this.Ft.maxDistance = this.si(t), this.Ft.minDistance = this.si(e), this.Ft.minZoom = 1 / this.li(t), 
            this.Ft.maxZoom = 1 / this.li(e);
        },
        oi: function(t) {
            var e = this.De.length - 1, n = (--t, t = Math.max(0, Math.min(t, e)), Math.floor(t)), r = (t = t - n, 
            Math.max(0, Math.min(n, e)));
            e = Math.max(0, Math.min(n + 1, e)), r = this.De[r] - this.De[e];
            return this.De[n] - r * t;
        },
        Ci: function(t) {
            for (var e = 0, n = .1, r = !1, i = 0; i < this.De.length - 1; i++) if (t <= this.De[i] && t > this.De[i + 1]) {
                e = i, n = (this.De[i] - t) / (this.De[i] - this.De[i + 1]), r = !0;
                break;
            }
            var o;
            return r ? parseFloat((e + 1 + n).toFixed(2)) : (o = this.De.length - 1, t <= this.De[o] ? 1 + o : 1);
        },
        si: function(t) {
            return t / 100 * (this.jt.It.renderer.domElement.clientHeight / Ht.getMapScaleInfo()) / 2 / Math.tan(Dt.FOV / 2 * Dt.DEG2RAD);
        },
        gi: function() {
            return new h().copy(this.Ft.object.position).sub(this.Ft.target).length() * (100 * Math.tan(Dt.FOV / 2 * Dt.DEG2RAD) * 2 / (this.jt.It.renderer.domElement.clientHeight / Ht.getMapScaleInfo()));
        },
        _i: function() {
            var t = this.jt.He.top, e = this.jt.He.bottom;
            return Math.abs(t - e) * Ht.getMapScaleInfo() * 100 / this.jt.It.renderer.domElement.clientHeight / this.jt.He.zoom;
        },
        li: function(t) {
            var e = this.jt.Je.top, n = this.jt.Je.bottom;
            return t / (Math.abs(e - n) * Ht.getMapScaleInfo() * 100 / this.jt.It.renderer.domElement.clientHeight);
        }
    }), Object.assign(It.prototype, {
        bi: function(t) {
            var e, n = this, r = this.Ft, i = t.finish;
            "animate" in t && !t.animate ? (r.update({
                phi: (Dt.TILT_UPPER_BOUND - t.tilt) * Dt.DEG2RAD
            }), r.update(), i && i()) : (null === this.Be && (this.Be = new ne()), e = Number.isFinite(t.duration) ? t.duration : .5, 
            this.Be.nn([ this.jt.getTilt() ]).en([ t.tilt ]).rn(e).an(function(t) {
                r.update({
                    phi: (Dt.TILT_UPPER_BOUND - t.destination[0]) * Dt.DEG2RAD
                });
            }).un(function() {
                r.update({
                    phi: (Dt.TILT_UPPER_BOUND - t.tilt) * Dt.DEG2RAD
                }), r.update(), n.jt.Oi.Ai(n.Be), i && i();
            }), this.jt.Oi.Si(this.Be.$t()));
        },
        Di: function() {
            var t = $t.round(-this.Ft.getAzimuthalAngle() * Dt.RAD2DEG);
            return 360 < (t = t < 0 ? 360 + t : t) && (t %= 360), t;
        },
        di: function(t, e) {
            var n = -t % 360 * Dt.DEG2RAD;
            return 0 !== (t = (n = !1 === e ? -t * Dt.DEG2RAD : n) - this.Ft.getAzimuthalAngle()) && e ? Math.sin(t) / Math.abs(Math.sin(t)) * Math.acos(Math.cos(t)) : t;
        },
        Ii: function(t) {
            var e, n = this, r = void 0 !== t.loop && t.loop, i = void 0 !== t.direction ? t.direction : 0, o = void 0 === t.minimumAngleTransformation || t.minimumAngleTransformation, a = this.Ft.getAzimuthalAngle();
            if (i = r ? 0 === i ? a - 2 * Math.PI : 2 * Math.PI + a : a + this.di(t.rotation, o), 
            !("animate" in t) || t.animate) return o = t && t.duration && Number.isFinite(t.duration) ? t.duration : .5, 
            (e = new ne({
                src: [ a ],
                dest: [ i ]
            })).rn(o).cn(r).an(function(t) {
                n.Ft.update({
                    theta: t.destination[0]
                });
            }).un(function() {
                r || n.jt.Oi.Ai(e), t.finish && t.finish();
            }), this.jt.Oi.Si(e.$t()), e;
            this.Ft.update({
                theta: i
            }), t.finish && t.finish();
        }
    }), Object.assign(It.prototype, {
        Fi: function() {
            var t = this.Ft.target, e = this.jt.Nt[0];
            return {
                x: parseFloat((e.x + t.x).toFixed(4)),
                y: parseFloat((e.y - t.z).toFixed(4))
            };
        },
        Gi: function(t) {
            var e, n, r, i = this, o = this.Ft, a = this.jt.Nt[0], s = t.x - a.x, l = (a = -t.y + a.y, 
            o.target.x), u = o.target.z, c = t.height;
            c && Number.isFinite(c) ? (n = o.target.y, e = c) : n = e = 0, "animate" in t && t.animate ? (c = Number.isFinite(t.duration) ? t.duration : .5, 
            (r = new ne({
                src: [ l, n, u ],
                dest: [ s, e, a ]
            })).rn(c).an(function(t) {
                o.panAdd({
                    x: t.delta[0],
                    y: t.delta[1],
                    z: t.delta[2]
                }), o.update(), i.jt.It.wi();
            }).un(function() {
                i.jt.Oi.Ai(r), i.jt.It.wi(), t.finish && t.finish();
            }), this.jt.Oi.Si(r.$t())) : (o.panAdd({
                x: s - l,
                y: e - n,
                z: a - u
            }), o.update(), t.finish && t.finish(), this.jt.It.wi());
        },
        Ui: function(t, e) {
            function n() {
                r.Ct.Bi(t.Ae).level = e.level, r.jt.It.Hi(), r.jt.ui.zi();
                var n = {
                    type: "levelChanged",
                    level: e.level
                };
                t !== r.jt.Dt && (n.buildingID = t.Ae), r.jt.Ye.We(n), r.enableDragRange && i.saveState(), 
                r.jt.It.wi(), e.finish && e.finish(e.level);
            }
            var r = this, i = this.Ft;
            t === this.jt.Dt || this.jt.Vi ? this.Wi(t, {
                level: e.level,
                animate: e.animate,
                duration: e.duration,
                callback: e.callback,
                finish: function() {
                    n();
                }
            }) : n();
        },
        Wi: function(t, e) {
            var n = void 0 !== e.duration ? e.duration : .5, r = void 0 === e.animate || e.animate, i = this.Ft, o = i.target.y, a = t.getFloor(e.level).nt;
            r ? (null === this.Fe && (this.Fe = new ne()), this.Fe.nn([ o ]).en([ a ]).rn(n).an(function(t) {
                i.panUp(t.delta[0]), i.update();
            }).un(function() {
                i.panUp(a - i.target.y), i.update(), e.finish && e.finish();
            }), this.jt.Oi.Si(this.Fe.$t()), e.callback && e.callback(this.Fe)) : (i.panUp(a - o), 
            i.update(), e.callback && e.callback(null), e.finish && e.finish());
        }
    }), It), Sn = new h(), _n = new h(), En = new h(), On = new h(), Mn = new h(), Tn = new h(), Ln = new h();
    function An(t, e) {
        this.origin = void 0 !== t ? t : new h(), this.direction = void 0 !== e ? e : new h(0, 0, -1);
    }
    function Pn(t, e, n, r) {
        this.ray = new An(t, e), this.near = n || 0, this.far = r || 1 / 0, this.camera = null, 
        this.layers = new E(), this.params = {
            Mesh: {},
            Line: {
                threshold: 1
            },
            LOD: {},
            Points: {
                threshold: 1
            },
            Sprite: {}
        }, Object.defineProperties(this.params, {
            PointCloud: {
                get: function() {
                    return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."), 
                    this.Points;
                }
            }
        });
    }
    function Rn(t, e) {
        return t.distance - e.distance;
    }
    function jn(t, e, n, r) {
        if (t.layers.test(e.layers) && t.raycast(e, n), !0 === r) for (var i = t.children, o = 0, a = i.length; o < a; o++) jn(i[o], e, n, !0);
    }
    Object.assign(An.prototype, {
        set: function(t, e) {
            return this.origin.copy(t), this.direction.copy(e), this;
        },
        clone: function() {
            return new this.constructor().copy(this);
        },
        copy: function(t) {
            return this.origin.copy(t.origin), this.direction.copy(t.direction), this;
        },
        at: function(t, e) {
            return void 0 === e && (console.warn("THREE.Ray: .at() target is now required"), 
            e = new h()), e.copy(this.direction).multiplyScalar(t).add(this.origin);
        },
        lookAt: function(t) {
            return this.direction.copy(t).sub(this.origin).normalize(), this;
        },
        recast: function(t) {
            return this.origin.copy(this.at(t, Sn)), this;
        },
        closestPointToPoint: function(t, e) {
            return void 0 === e && (console.warn("THREE.Ray: .closestPointToPoint() target is now required"), 
            e = new h()), e.subVectors(t, this.origin), (t = e.dot(this.direction)) < 0 ? e.copy(this.origin) : e.copy(this.direction).multiplyScalar(t).add(this.origin);
        },
        distanceToPoint: function(t) {
            return Math.sqrt(this.distanceSqToPoint(t));
        },
        distanceSqToPoint: function(t) {
            var e = Sn.subVectors(t, this.origin).dot(this.direction);
            return (e < 0 ? this.origin : (Sn.copy(this.direction).multiplyScalar(e).add(this.origin), 
            Sn)).distanceToSquared(t);
        },
        distanceSqToSegment: function(t, e, n, r) {
            _n.copy(t).add(e).multiplyScalar(.5), En.copy(e).sub(t).normalize(), On.copy(this.origin).sub(_n);
            t = .5 * t.distanceTo(e), e = -this.direction.dot(En);
            var i, o, a, s = On.dot(this.direction), l = -On.dot(En), u = On.lengthSq(), c = Math.abs(1 - e * e);
            return c = 0 < c ? (o = e * s - l, a = t * c, 0 <= (i = e * l - s) ? -a <= o ? o <= a ? (i *= c = 1 / c) * (i + e * (o *= c) + 2 * s) + o * (e * i + o + 2 * l) + u : (o = t, 
            -(i = Math.max(0, -(e * o + s))) * i + o * (o + 2 * l) + u) : (o = -t, -(i = Math.max(0, -(e * o + s))) * i + o * (o + 2 * l) + u) : o <= -a ? -(i = Math.max(0, -(-e * t + s))) * i + (o = 0 < i ? -t : Math.min(Math.max(-t, -l), t)) * (o + 2 * l) + u : o <= a ? (i = 0, 
            (o = Math.min(Math.max(-t, -l), t)) * (o + 2 * l) + u) : -(i = Math.max(0, -(e * t + s))) * i + (o = 0 < i ? t : Math.min(Math.max(-t, -l), t)) * (o + 2 * l) + u) : (o = 0 < e ? -t : t, 
            -(i = Math.max(0, -(e * o + s))) * i + o * (o + 2 * l) + u), n && n.copy(this.direction).multiplyScalar(i).add(this.origin), 
            r && r.copy(En).multiplyScalar(o).add(_n), c;
        },
        intersectSphere: function(t, e) {
            Sn.subVectors(t.center, this.origin);
            var n = Sn.dot(this.direction), r = Sn.dot(Sn) - n * n;
            return (t = t.radius * t.radius) < r || (r = n + (t = Math.sqrt(t - r)), (n -= t) < 0 && r < 0) ? null : n < 0 ? this.at(r, e) : this.at(n, e);
        },
        intersectsSphere: function(t) {
            return this.distanceSqToPoint(t.center) <= t.radius * t.radius;
        },
        distanceToPlane: function(t) {
            var e = t.normal.dot(this.direction);
            return 0 === e ? 0 === t.distanceToPoint(this.origin) ? 0 : null : 0 <= (t = -(this.origin.dot(t.normal) + t.constant) / e) ? t : null;
        },
        intersectPlane: function(t, e) {
            return null === (t = this.distanceToPlane(t)) ? null : this.at(t, e);
        },
        intersectsPlane: function(t) {
            var e = t.distanceToPoint(this.origin);
            return 0 === e || t.normal.dot(this.direction) * e < 0;
        },
        intersectBox: function(t, e) {
            var n, r, i, o = 1 / this.direction.x, a = 1 / this.direction.y, s = 1 / this.direction.z, l = this.origin;
            o = 0 <= o ? (n = (t.min.x - l.x) * o, (t.max.x - l.x) * o) : (n = (t.max.x - l.x) * o, 
            (t.min.x - l.x) * o);
            return (a = 0 <= a ? (i = (t.min.y - l.y) * a, (t.max.y - l.y) * a) : (i = (t.max.y - l.y) * a, 
            (t.min.y - l.y) * a)) < n || o < i || ((n < i || n != n) && (n = i), (a < o || o != o) && (o = a), 
            (i = 0 <= s ? (r = (t.min.z - l.z) * s, (t.max.z - l.z) * s) : (r = (t.max.z - l.z) * s, 
            (t.min.z - l.z) * s)) < n) || o < r || ((n < r || n != n) && (n = r), (o = i < o || o != o ? i : o) < 0) ? null : this.at(0 <= n ? n : o, e);
        },
        intersectsBox: function(t) {
            return null !== this.intersectBox(t, Sn);
        },
        intersectTriangle: function(t, e, n, r, i) {
            var o;
            if (Mn.subVectors(e, t), Tn.subVectors(n, t), Ln.crossVectors(Mn, Tn), 0 < (e = this.direction.dot(Ln))) {
                if (r) return null;
                o = 1;
            } else {
                if (!(e < 0)) return null;
                o = -1, e = -e;
            }
            return On.subVectors(this.origin, t), (n = o * this.direction.dot(Tn.crossVectors(On, Tn))) < 0 || (r = o * this.direction.dot(Mn.cross(On))) < 0 || e < n + r || (t = -o * On.dot(Ln)) < 0 ? null : this.at(t / e, i);
        },
        applyMatrix4: function(t) {
            return this.origin.applyMatrix4(t), this.direction.transformDirection(t), this;
        },
        equals: function(t) {
            return t.origin.equals(this.origin) && t.direction.equals(this.direction);
        }
    }), Object.assign(Pn.prototype, {
        set: function(t, e) {
            this.ray.set(t, e);
        },
        setFromCamera: function(t, e) {
            e && e.isPerspectiveCamera ? (this.ray.origin.setFromMatrixPosition(e.matrixWorld), 
            this.ray.direction.set(t.x, t.y, .5).unproject(e).sub(this.ray.origin).normalize(), 
            this.camera = e) : e && e.isOrthographicCamera ? (this.ray.origin.set(t.x, t.y, (e.near + e.far) / (e.near - e.far)).unproject(e), 
            this.ray.direction.set(0, 0, -1).transformDirection(e.matrixWorld), this.camera = e) : console.error("THREE.Raycaster: Unsupported camera type.");
        },
        intersectObject: function(t, e, n) {
            return jn(t, this, n = n || [], e), n.sort(Rn), n;
        },
        intersectObjects: function(t, e, n) {
            var r = n || [];
            if (!1 === Array.isArray(t)) console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."); else {
                for (var i = 0, o = t.length; i < o; i++) jn(t[i], this, r, e);
                r.sort(Rn);
            }
            return r;
        }
    });
    It = {
        CLASSIC: 2,
        REAL: 4
    };
    var In = (Object.freeze(It), It);
    function Dn(t) {
        return (Dn = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function kn(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Dn(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Dn(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Dn(t) ? t : String(t);
            }(r.key), r);
        }
    }
    It = function() {
        function t() {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
            this.Ae = -1, this.Re = Ct.NONE, this.Yi = !0, this.Bt = null, this.Nt = [], this.xe = new Xe(), 
            this.Xi = !0;
        }
        var e, n;
        return e = t, (n = [ {
            key: "type",
            get: function() {
                return this.Re;
            }
        }, {
            key: "visible",
            get: function() {
                return this.Yi;
            },
            set: function(t) {
                this.Yi = t;
            }
        }, {
            key: "children",
            get: function() {
                return this.Nt;
            }
        }, {
            key: "parent",
            get: function() {
                return this.Bt;
            },
            set: function(t) {
                this.Bt = t;
            }
        }, {
            key: "needUpdateBound",
            get: function() {
                return this.Xi;
            },
            set: function(t) {
                !0 === (this.Xi = t) && null !== this.parent && (this.parent.needUpdateBound = t);
            }
        }, {
            key: "isLayer",
            get: function() {
                return !1;
            }
        }, {
            key: "setType",
            value: function(t) {
                this.Re = t;
            }
        }, {
            key: "traverse",
            value: function(t) {
                if (this.Nt) for (var e = this.Nt.length - 1; 0 <= e; e--) t(this.Nt[e]);
            }
        }, {
            key: "remove",
            value: function(t) {
                var e = this.Nt.indexOf(t);
                -1 < e && this.Nt.splice(e, 1), t.parent = null, this.needUpdateBound = !0;
            }
        }, {
            key: "dispose",
            value: function() {
                var t, e = this;
                for (t in this.traverse(function(t) {
                    e.remove(t), t.dispose();
                }), this.parent && this.parent.remove(this), this) this["" + t] && this["" + t].tn && this["" + t].tn(), 
                this["" + t] && this["" + t].dispose && this["" + t].dispose(), this["" + t] = null, 
                delete this["" + t];
            }
        } ]) && kn(e.prototype, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }();
    var Cn = (Object.assign(It.prototype, {
        Zi: function(t) {
            for (var e = this; e; ) {
                if (e instanceof t) return e;
                e = e.Bt;
            }
            return null;
        }
    }), It);
    function Nn(t) {
        return (Nn = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Fn(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Nn(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Nn(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Nn(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function Bn(t, e, n) {
        e = Un(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], Un(t).constructor) : e.apply(t, n)) && ("object" === Nn(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function Un(t) {
        return (Un = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function zn(t, e) {
        return (zn = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    It = function() {
        var t = n, e = Cn;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t) {
            var e;
            if (this instanceof n) return (e = Bn(this, n)).Ae = t.bid, e.qi = t.bcode, e.Ji = t.mid, 
            e.Ki = t.name, e.Qi = t.ename, e.$i = t.alias, e._t = t.x, e.St = t.y, e.tr = t.levels, 
            e.nr = [], e;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && zn(t, e), t = n, (e = [ {
            key: "type",
            get: function() {
                return this.Re;
            }
        }, {
            key: "x",
            get: function() {
                return this._t;
            }
        }, {
            key: "y",
            get: function() {
                return this.St;
            }
        }, {
            key: "bound",
            get: function() {
                var t = this;
                return !0 === this.needUpdateBound && (this.xe.reset(), void 0 !== this.er && this.xe.copy(this.er), 
                this.Nt.forEach(function(e) {
                    t.xe.expand(e.bound);
                }), this.needUpdateBound = !1), this.xe.clone();
            }
        }, {
            key: "buildingID",
            get: function() {
                return this.Ae;
            }
        }, {
            key: "bcode",
            get: function() {
                return this.qi;
            }
        }, {
            key: "name",
            get: function() {
                return this.Ki;
            }
        }, {
            key: "eName",
            get: function() {
                return this.Qi;
            }
        }, {
            key: "alias",
            get: function() {
                return this.$i;
            }
        }, {
            key: "floorSpace",
            get: function() {
                return this.Bt.Ct.Bi(this.Ae).floorSpace;
            },
            set: function(t) {
                this.Bt.Ct.Bi(this.Ae).floorSpace = t, this.traverse(function(t) {
                    t.ir({
                        animate: !1
                    });
                });
            }
        }, {
            key: "level",
            get: function() {
                return this.Bt.Ct.Bi(this.Ae).level;
            }
        }, {
            key: "visibleLevels",
            get: function() {
                return this.Bt.Ct.Bi(this.Ae).visibleLevels;
            }
        }, {
            key: "getFloor",
            value: function(t) {
                var e = null;
                return this.traverse(function(n) {
                    n.rr === t && (e = n);
                }), e;
            }
        }, {
            key: "getFloorInfos",
            value: function() {
                return this.sr();
            }
        }, {
            key: "setLevel",
            value: function(t) {
                this.Bt.ui.ar(this, t);
            }
        }, {
            key: "setVisibleLevels",
            value: function(t, e) {
                this.Bt.ui.ur({
                    levels: t,
                    building: this
                }, e);
            }
        }, {
            key: "getVisibleLevels",
            value: function() {
                return this.visibleLevels;
            }
        } ]) && Fn(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }();
    var Gn = (Object.assign(It.prototype, {
        sr: function() {
            for (var t, e = this, n = (0 === this.nr.length && (t = this.Bt.hr.cr.get(this.Ji)) && (this.nr = [], 
            t.Nt.forEach(function(t) {
                e.nr.push(t);
            })), {
                alias: "alias",
                floorId: "floorID",
                gid: "level",
                gname: "name"
            }), r = Object.keys(n), i = [], o = 0; o < this.nr.length; o++) {
                var a = this.nr[o];
                i[o] = {};
                for (var s = 0; s < r.length; s++) {
                    var l = r[s], u = n[l];
                    a[l] ? i[o][u] = a[l] : i[o][u] = null;
                }
            }
            return i;
        }
    }), It);
    function Hn(t) {
        return (Hn = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Vn(t, e) {
        (null == e || e > t.length) && (e = t.length);
        for (var n = 0, r = new Array(e); n < e; n++) r[n] = t[n];
        return r;
    }
    function Wn(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Hn(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Hn(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Hn(t) ? t : String(t);
            }(r.key), r);
        }
    }
    It = function(t, e, n) {
        return e && Wn(t.prototype, e), n && Wn(t, n), Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }(function t(e, n, r) {
        if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
        this.jt = e, this.Ct = r, this.ze = n, this.lr = [], this.dr = null, this.vr = $t.generateUUID(), 
        this.pr = new Pn(), this.mr = new h(), this.yr = 0, this.br = 0, this.Kt = this.Kt.bind(this), 
        this.zt = 0, this.jt.It.renderer.domElement.addEventListener("mousedown", this.Kt, !1), 
        this.jt.It.renderer.domElement.addEventListener("mouseup", this.Kt, !1), this.jt.It.renderer.domElement.addEventListener("mousemove", this.Kt, !1), 
        this.jt.It.renderer.domElement.addEventListener("touchstart", this.Kt, !1), this.jt.It.renderer.domElement.addEventListener("touchend", this.Kt, !1), 
        this.jt.It.renderer.domElement.addEventListener("touchmove", this.Kt, !1);
    });
    var Yn = (Object.assign(It.prototype, {
        tn: function() {
            for (var t in this.jt.It.renderer.domElement.removeEventListener("mousedown", this.Kt, !1), 
            this.jt.It.renderer.domElement.removeEventListener("mouseup", this.Kt, !1), this.jt.It.renderer.domElement.removeEventListener("touchstart", this.Kt, !1), 
            this.jt.It.renderer.domElement.removeEventListener("mousemove", this.Kt, !1), this.jt.It.renderer.domElement.removeEventListener("touchmove", this.Kt, !1), 
            this.jt.It.renderer.domElement.removeEventListener("touchend", this.Kt, !1), delete this.jt, 
            delete this.Ct, delete this.ze, this) this["" + t] && this["" + t].tn && this["" + t].tn(), 
            this["" + t] = null, delete this["" + t];
        },
        Si: function(t) {
            var e;
            (e = this.lr).push.apply(e, function(t) {
                return function(t) {
                    if (Array.isArray(t)) return Vn(t);
                }(t) || function(t) {
                    if ("undefined" != typeof Symbol && null != t[Symbol.iterator] || null != t["@@iterator"]) return Array.from(t);
                }(t) || function(t, e) {
                    var n;
                    if (t) return "string" == typeof t ? Vn(t, e) : "Map" === (n = "Object" === (n = Object.prototype.toString.call(t).slice(8, -1)) && t.constructor ? t.constructor.name : n) || "Set" === n ? Array.from(t) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? Vn(t, e) : void 0;
                }(t) || function() {
                    throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
                }();
            }(t));
        },
        Kt: function(t) {
            if ((jt.a.environment !== Ut.a.WX || "touchmove" !== t.type) && (!this.Ct || "mousemove" !== t.type || this.Ct.gr)) if ("mousedown" === t.type || "touchstart" === t.type) this.zt = new Date().getTime(), 
            "touchstart" === t.type && (this.yr = t.changedTouches[0].clientX, this.br = t.changedTouches[0].clientY); else {
                if ("mouseup" === t.type || "touchend" === t.type) {
                    if (200 < new Date().getTime() - this.zt) return;
                    if ("touchend" === t.type && Math.pow(t.changedTouches[0].clientX - this.yr, 2) + Math.pow(t.changedTouches[0].clientY - this.br, 2) > Math.pow(t.changedTouches[0].radiusX, 2)) return;
                    this.zt = new Date().getTime();
                }
                for (var e = this.wr(t), n = 0; n < this.lr.length; n++) this.lr[n](e);
                var r = this._r(e), i = null, o = null, a = (r[0] && r[0].type !== Ct.FM3DTILE_LAYER && (a = r[0].Zi(Gn)) && (i = r[0].level, 
                a !== this.jt.Dt) && (o = a.Ae), this.Sr(e));
                if (null !== i) a.height = null !== o ? a.height - this.jt.getBuilding(o).getFloor(i).height : a.height - this.jt.getFloor(i).height; else {
                    var s = this.jt.getLevel();
                    if (void 0 === s) return;
                    a.height = a.height - this.jt.getFloor(s).height;
                }
                a = {
                    type: s = "mousemove" === t.type || "touchmove" === t.type ? "hover" : "click",
                    targets: r,
                    coords: a,
                    mouseEvent: t,
                    level: i,
                    buildingID: o
                }, -1 < this.ze.Er.indexOf(s) && this.Mr(r), this.jt.Ye.We(a);
            }
        },
        Mr: function(t) {
            for (var e, n = this, r = [ Ct.MODEL, Ct.EXTERNAL_MODEL ], i = 0; i < t.length && 0 !== (e = function(e) {
                if (-1 < r.indexOf(t[e].Re)) {
                    if (t[e] === n.dr) return {
                        v: void 0
                    };
                    if (t[e].xi) {
                        n.Ie && (n.Ie.stop(), n.jt.Oi.Ai(n.Ie)), o(n.dr), n.dr = t[e], n.dr.Or = n.Ct.highlightColor;
                        var i = t[e].xi;
                        if (t[e].Re === Ct.MODEL) {
                            i.userData.sourceMaterial = i.material, i.material = i.material.clone();
                            var a = i.material.color, s = new Xt(n.Ct.highlightColor);
                            n.Ie ? (n.Ie.nn([ a.r, a.g, a.b ]), n.Ie.en([ s.r, s.g, s.b ])) : n.Ie = new ne({
                                src: [ a.r, a.g, a.b ],
                                dest: [ s.r, s.g, s.b ]
                            }), n.Ie.rn(.5).an(function(t) {
                                t = new Xt(t.destination[0], t.destination[1], t.destination[2]), i && i.material && (i.material.color = t), 
                                n.jt.enableUpdateRender();
                            }).un(function() {
                                n.Ie.stop(), n.jt.Oi.Ai(n.Ie), i && i.material && (i.material.color = s), n.jt.enableUpdateRender();
                            }), n.jt.Oi.Si(n.Ie.$t());
                        } else if (t[e].Re === Ct.EXTERNAL_MODEL) if ("Mesh" === i.type) if (i.userData.sourceMaterial || (i.userData.sourceMaterial = i.material), 
                        Array.isArray(i.material)) {
                            for (var l = [], u = !0, c = 0; c < i.material.length; c++) "MeshLambertMaterial" !== i.material[c].type ? u = !1 : (l[c] = i.material[c].clone(), 
                            l[c].color = new Xt(n.Ct.highlightColor));
                            u && (i.material = l);
                        } else "MeshLambertMaterial" === i.material.type && (i.material = i.material.clone(), 
                        i.material.color = new Xt(n.Ct.highlightColor)); else "Scene" === i.type && i.traverse(function(r) {
                            if ("Mesh" === r.type) if (r.userData.sourceMaterial || (r.userData.sourceMaterial = r.material), 
                            Array.isArray(r.material)) {
                                for (var i, o = [], a = 0; a < r.material.length; a++) r.material.isBasic ? o.push(r.material) : (i = n.Tr(r.material[a]), 
                                o.push(i));
                                r.material = o;
                            } else {
                                var s, l;
                                r.material.isBasic || (s = n.Tr(r.material), t[e].jr && n.jt.getMapOptions().materialMode !== In.CLASSIC ? ((l = t[e].Lr(s)).uniforms.diffuse.value = s.uniforms.diffuse.value, 
                                l.uniforms.isMask.value = !0, l.uniforms.maskType.value = t[e].kr, l.uniforms.maskTexture.value = t[e].Ar, 
                                void 0 !== t[e].Rr && void 0 !== t[e].Cr && (l.uniforms.maskHeight.value = t[e].Rr, 
                                l.uniforms.maskExtrudeHeight.value = t[e].Cr), l.uniforms.boundCenter.value = t[e].Nr, 
                                l.uniforms.boundSize.value = t[e].Pr, l.uniformsNeedUpdate = !0, l.userData = s.userData, 
                                r.material = l) : r.material = s);
                            }
                        });
                        return n.jt.enableUpdateRender(), {
                            v: void 0
                        };
                    }
                    return 0;
                }
            }(i)); i++) if (e) return e.v;
            function o(t) {
                var e, n;
                t && (t.Or = null, e = t.xi) && (t.Re === Ct.MODEL ? e.userData.sourceMaterial && !1 !== e.userData.sourceMaterial.canDispose && (n = e.material, 
                e.material = e.userData.sourceMaterial, n.dispose(), delete e.userData.sourceMaterial) : t.Re === Ct.EXTERNAL_MODEL && ("Mesh" === e.type ? (e.material = e.userData.sourceMaterial, 
                delete e.userData.sourceMaterial) : "Scene" === e.type && e.parent && e.traverse(function(t) {
                    "Mesh" === t.type && t.userData.sourceMaterial && (t.material = t.userData.sourceMaterial, 
                    delete t.userData.sourceMaterial);
                })));
            }
            this.Ie && (this.Ie.stop(), this.jt.Oi.Ai(this.Ie)), o(this.dr), this.dr = null, 
            this.jt.enableUpdateRender();
        },
        Tr: function(t) {
            var e = this.Dr(t);
            return e.color = this.Ct.highlightColor, (e = this.jt.getMapOptions().materialMode === In.REAL ? this.jt.ui.Fr.Ir(e) : this.jt.ui.Fr.Gr(t, e)).userData = t.userData, 
            e;
        },
        Dr: function(t) {
            var e = {};
            return (e = this.jt.ze.materialMode !== In.REAL || t.isBasic ? e : {
                alphaTest: t.alphaTest,
                USE_EMISSIVEMAP: t.defines.USE_EMISSIVEMAP,
                USE_MAP: t.defines.USE_MAP,
                USE_AOMAP: t.defines.USE_AOMAP,
                USE_METALNESSMAP: t.defines.USE_METALNESSMAP,
                USE_NORMALMAP: t.defines.USE_NORMALMAP,
                TANGENTSPACE_NORMALMAP: t.defines.TANGENTSPACE_NORMALMAP,
                USE_ROUGHNESSMAP: t.defines.USE_ROUGHNESSMAP,
                aoMap: t.uniforms.aoMap.value,
                map: t.uniforms.map.value,
                color: t.uniforms.diffuse.value.getHex(),
                emissive: t.uniforms.emissive.value.getHex(),
                emissiveMap: t.uniforms.emissiveMap.value,
                metalness: t.uniforms.metalness.value,
                metalnessMap: t.uniforms.metalnessMap.value,
                roughness: t.uniforms.roughness.value,
                roughnessMap: t.uniforms.roughnessMap.value,
                normalScale: t.uniforms.normalScale.value,
                normalMap: t.uniforms.normalMap.value,
                vertexColors: t.vertexColors,
                side: t.side
            }).opacity = t.opacity, e.transparent = t.transparent, e;
        },
        _r: function(t) {
            for (var e = [], n = 0; n < t.length; n++) if (void 0 !== t[n].type && t[n].type === Ct.FM3DTILE_LAYER) e.push({
                type: Ct.FM3DTILE_LAYER,
                object: t[n].object
            }); else {
                var r = t[n].object;
                if ("LineSegments" !== r.type && !(r.isNoPickup || r.parent && r.parent.mapNode && r.parent.mapNode.Ur && r === r.parent.mapNode.Ur.top)) {
                    for (;!r.mapNode; ) r = r.parent;
                    for (var i = !0, o = 0; o < e.length; o++) if (e[o].xi && e[o].xi.uuid === r.uuid) {
                        i = !1;
                        break;
                    }
                    this.jt.pickFilterFunction({
                        type: r.mapNode.Re,
                        data: r.mapNode.B
                    }) && i && r.visible && e.push(r.mapNode);
                }
            }
            return e;
        },
        Sr: function(t) {
            for (var e, n = null, r = 0; r < t.length; r++) if ("LineSegments" !== t[r].object.type) {
                n = t[r];
                break;
            }
            return t.length < 1 || !n ? {
                x: NaN,
                y: NaN,
                z: NaN,
                height: NaN
            } : (e = n.point.clone(), {
                x: this.jt.x + e.x,
                y: this.jt.y - e.z,
                z: n.point.y,
                height: n.point.y
            });
        },
        wr: function(t) {
            var e, n, r, i = this, o = [], a = (t.touches ? (n = t.touches[0], "touchend" === t.type && (n = t.changedTouches[0]), 
            e = this.jt.It.renderer.domElement.getBoundingClientRect(), r = n.clientX - e.left, 
            n = n.clientY - e.top, this.mr.x = r / e.width * 2 - 1, this.mr.y = -n / e.height * 2 + 1) : (this.mr.x = (r = t).offsetX / this.jt.It.renderer.domElement.clientWidth * 2 - 1, 
            this.mr.y = -r.offsetY / this.jt.It.renderer.domElement.clientHeight * 2 + 1), this.mr.z = .5, 
            this.pr.setFromCamera(this.mr, this.jt.He), new Map()), s = [];
            if (this.jt.It.Br.forEach(function(t, e) {
                e = e.split("%A%B%C%D")[0];
                for (var n = a.get(e), r = (n || (a.set(e, n = []), s.unshift(e)), i.pr.intersectObject(t, !0)), o = 0; o < r.length; o++) r[o].object.visible && !r[o].object.isNoPick && n.push(r[o]);
            }), 0 < this.jt.It.Hr.length) for (var l = a.get("other1"), u = (l || (a.set("other1", l = []), 
            s.push("other1")), this.jt.It.Hr), c = 0; c < u.length; c++) if (u[c].visible) for (var h = this.pr.intersectObject(u[c], !0), f = 0; f < h.length; f++) h[c].type = Ct.FM3DTILE_LAYER, 
            l.push(h[c]);
            if (this.jt.It.zr) for (var p = a.get("other2"), d = (p || (a.set("other2", p = []), 
            s.push("other2")), this.pr.intersectObject(this.jt.It.zr, !0)), y = 0; y < d.length; y++) d[y].object.visible && (d[y].object.isNoPickup = !0, 
            p.push(d[y]));
            for (var m = 0; m < s.length; m++) {
                var v = a.get(s[m]);
                v.sort(function(t, e) {
                    return t.distance - e.distance;
                });
                for (var g = 0; g < v.length; g++) o.push(v[g]);
            }
            return o;
        }
    }), It), Xn = 0;
    function Zn(t, e, n, r, i, o, a, l, u, c) {
        Object.defineProperty(this, "id", {
            value: Xn++
        }), this.uuid = s.generateUUID(), this.name = "", this.image = void 0 !== t ? t : Zn.DEFAULT_IMAGE, 
        this.mipmaps = [], this.mapping = void 0 !== e ? e : Zn.DEFAULT_MAPPING, this.wrapS = void 0 !== n ? n : dt, 
        this.wrapT = void 0 !== r ? r : dt, this.magFilter = void 0 !== i ? i : mt, this.minFilter = void 0 !== o ? o : 1008, 
        this.anisotropy = void 0 !== u ? u : 1, this.format = void 0 !== a ? a : bt, this.internalFormat = null, 
        this.type = void 0 !== l ? l : 1009, this.offset = new Mt(0, 0), this.repeat = new Mt(1, 1), 
        this.center = new Mt(0, 0), this.rotation = 0, this.matrixAutoUpdate = !0, this.matrix = new O(), 
        this.generateMipmaps = !0, this.premultiplyAlpha = !1, this.flipY = !0, this.unpackAlignment = 4, 
        this.encoding = void 0 !== c ? c : 3e3, this.version = 0, this.onUpdate = null;
    }
    function qn(t, e, n, r, i, o, a, s, l, u, c, h) {
        Zn.call(this, null, o, a, s, l, u, r, i, c, h), this.image = {
            data: t || null,
            width: e || 1,
            height: n || 1
        }, this.magFilter = void 0 !== l ? l : yt, this.minFilter = void 0 !== u ? u : yt, 
        this.generateMipmaps = !1, this.flipY = !1, this.unpackAlignment = 1, this.needsUpdate = !0;
    }
    Zn.DEFAULT_IMAGE = void 0, Zn.DEFAULT_MAPPING = 300, Zn.prototype = Object.assign(Object.create(x.prototype), {
        constructor: Zn,
        isTexture: !0,
        updateMatrix: function() {
            this.matrix.setUvTransform(this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y);
        },
        clone: function() {
            return new this.constructor().copy(this);
        },
        copy: function(t) {
            return this.name = t.name, this.image = t.image, this.mipmaps = t.mipmaps.slice(0), 
            this.mapping = t.mapping, this.wrapS = t.wrapS, this.wrapT = t.wrapT, this.magFilter = t.magFilter, 
            this.minFilter = t.minFilter, this.anisotropy = t.anisotropy, this.format = t.format, 
            this.internalFormat = t.internalFormat, this.type = t.type, this.offset.copy(t.offset), 
            this.repeat.copy(t.repeat), this.center.copy(t.center), this.rotation = t.rotation, 
            this.matrixAutoUpdate = t.matrixAutoUpdate, this.matrix.copy(t.matrix), this.generateMipmaps = t.generateMipmaps, 
            this.premultiplyAlpha = t.premultiplyAlpha, this.flipY = t.flipY, this.unpackAlignment = t.unpackAlignment, 
            this.encoding = t.encoding, this;
        },
        dispose: function() {
            this.dispatchEvent({
                type: "dispose"
            });
        },
        transformUv: function(t) {
            if (300 === this.mapping) {
                if (t.applyMatrix3(this.matrix), t.x < 0 || 1 < t.x) switch (this.wrapS) {
                  case pt:
                    t.x = t.x - Math.floor(t.x);
                    break;

                  case dt:
                    t.x = t.x < 0 ? 0 : 1;
                    break;

                  case 1002:
                    1 === Math.abs(Math.floor(t.x) % 2) ? t.x = Math.ceil(t.x) - t.x : t.x = t.x - Math.floor(t.x);
                }
                if (t.y < 0 || 1 < t.y) switch (this.wrapT) {
                  case pt:
                    t.y = t.y - Math.floor(t.y);
                    break;

                  case dt:
                    t.y = t.y < 0 ? 0 : 1;
                    break;

                  case 1002:
                    1 === Math.abs(Math.floor(t.y) % 2) ? t.y = Math.ceil(t.y) - t.y : t.y = t.y - Math.floor(t.y);
                }
                this.flipY && (t.y = 1 - t.y);
            }
            return t;
        }
    }), Object.defineProperty(Zn.prototype, "needsUpdate", {
        set: function(t) {
            !0 === t && this.version++;
        }
    }), ((qn.prototype = Object.create(Zn.prototype)).constructor = qn).prototype.isDataTexture = !0;
    var Kn = {
        common: {
            diffuse: {
                value: new Xt(15658734)
            },
            opacity: {
                value: 1
            },
            map: {
                value: null
            },
            uvTransform: {
                value: new O()
            },
            uv2Transform: {
                value: new O()
            },
            alphaMap: {
                value: null
            }
        },
        specularmap: {
            specularMap: {
                value: null
            }
        },
        envmap: {
            envMap: {
                value: null
            },
            flipEnvMap: {
                value: -1
            },
            reflectivity: {
                value: 1
            },
            refractionRatio: {
                value: .98
            },
            maxMipLevel: {
                value: 0
            }
        },
        aomap: {
            aoMap: {
                value: null
            },
            aoMapIntensity: {
                value: 1
            }
        },
        lightmap: {
            lightMap: {
                value: null
            },
            lightMapIntensity: {
                value: 1
            }
        },
        emissivemap: {
            emissiveMap: {
                value: null
            }
        },
        bumpmap: {
            bumpMap: {
                value: null
            },
            bumpScale: {
                value: 1
            }
        },
        normalmap: {
            normalMap: {
                value: null
            },
            normalScale: {
                value: new Mt(1, 1)
            }
        },
        displacementmap: {
            displacementMap: {
                value: null
            },
            displacementScale: {
                value: 1
            },
            displacementBias: {
                value: 0
            }
        },
        roughnessmap: {
            roughnessMap: {
                value: null
            }
        },
        metalnessmap: {
            metalnessMap: {
                value: null
            }
        },
        gradientmap: {
            gradientMap: {
                value: null
            }
        },
        fog: {
            fogDensity: {
                value: 25e-5
            },
            fogNear: {
                value: 1
            },
            fogFar: {
                value: 2e3
            },
            fogColor: {
                value: new Xt(16777215)
            }
        },
        lights: {
            ambientLightColor: {
                value: []
            },
            lightProbe: {
                value: []
            },
            directionalLights: {
                value: [],
                properties: {
                    direction: {},
                    color: {}
                }
            },
            directionalLightShadows: {
                value: [],
                properties: {
                    shadowBias: {},
                    shadowRadius: {},
                    shadowMapSize: {}
                }
            },
            directionalShadowMap: {
                value: []
            },
            directionalShadowMatrix: {
                value: []
            },
            spotLights: {
                value: [],
                properties: {
                    color: {},
                    position: {},
                    direction: {},
                    distance: {},
                    coneCos: {},
                    penumbraCos: {},
                    decay: {}
                }
            },
            spotLightShadows: {
                value: [],
                properties: {
                    shadowBias: {},
                    shadowRadius: {},
                    shadowMapSize: {}
                }
            },
            spotShadowMap: {
                value: []
            },
            spotShadowMatrix: {
                value: []
            },
            pointLights: {
                value: [],
                properties: {
                    color: {},
                    position: {},
                    decay: {},
                    distance: {}
                }
            },
            pointLightShadows: {
                value: [],
                properties: {
                    shadowBias: {},
                    shadowRadius: {},
                    shadowMapSize: {},
                    shadowCameraNear: {},
                    shadowCameraFar: {}
                }
            },
            pointShadowMap: {
                value: []
            },
            pointShadowMatrix: {
                value: []
            },
            hemisphereLights: {
                value: [],
                properties: {
                    direction: {},
                    skyColor: {},
                    groundColor: {}
                }
            },
            rectAreaLights: {
                value: [],
                properties: {
                    color: {},
                    position: {},
                    width: {},
                    height: {}
                }
            }
        },
        points: {
            diffuse: {
                value: new Xt(15658734)
            },
            opacity: {
                value: 1
            },
            size: {
                value: 1
            },
            scale: {
                value: 1
            },
            map: {
                value: null
            },
            alphaMap: {
                value: null
            },
            uvTransform: {
                value: new O()
            }
        },
        sprite: {
            diffuse: {
                value: new Xt(15658734)
            },
            opacity: {
                value: 1
            },
            center: {
                value: new Mt(.5, .5)
            },
            rotation: {
                value: 0
            },
            map: {
                value: null
            },
            alphaMap: {
                value: null
            },
            uvTransform: {
                value: new O()
            }
        }
    };
    function Jn() {
        B.call(this), this.type = "Scene", this.background = null, this.environment = null, 
        this.fog = null, this.overrideMaterial = null, this.autoUpdate = !0, "undefined" != typeof __THREE_DEVTOOLS__ && __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe", {
            detail: this
        }));
    }
    function Qn() {
        var t = null, e = !1, n = null;
        function r(i, o) {
            !1 !== e && (n(i, o), t.requestAnimationFrame(r));
        }
        return {
            start: function() {
                !0 !== e && null !== n && (t.requestAnimationFrame(r), e = !0);
            },
            stop: function() {
                e = !1;
            },
            setAnimationLoop: function(t) {
                n = t;
            },
            setContext: function(e) {
                t = e;
            }
        };
    }
    function $n(t, e) {
        var n = e.isWebGL2, r = new WeakMap();
        return {
            get: function(t) {
                return t.isInterleavedBufferAttribute && (t = t.data), r.get(t);
            },
            remove: function(e) {
                e.isInterleavedBufferAttribute && (e = e.data);
                var n = r.get(e);
                n && (t.deleteBuffer(n.buffer), r.delete(e));
            },
            update: function(e, i) {
                e.isInterleavedBufferAttribute && (e = e.data);
                var o, a, s, l, u, c = r.get(e);
                void 0 === c ? r.set(e, (a = i, s = (o = e).array, l = o.usage, u = t.createBuffer(), 
                t.bindBuffer(a, u), t.bufferData(a, s, l), o.onUploadCallback(), a = t.FLOAT, s instanceof Float32Array ? a = t.FLOAT : s instanceof Float64Array ? console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.") : s instanceof Uint16Array ? a = t.UNSIGNED_SHORT : s instanceof Int16Array ? a = t.SHORT : s instanceof Uint32Array ? a = t.UNSIGNED_INT : s instanceof Int32Array ? a = t.INT : s instanceof Int8Array ? a = t.BYTE : s instanceof Uint8Array && (a = t.UNSIGNED_BYTE), 
                {
                    buffer: u,
                    type: a,
                    bytesPerElement: s.BYTES_PER_ELEMENT,
                    version: o.version
                })) : c.version < e.version && (l = c.buffer, u = i, s = (a = e).array, a = a.updateRange, 
                t.bindBuffer(u, l), -1 === a.count ? t.bufferSubData(u, 0, s) : (n ? t.bufferSubData(u, a.offset * s.BYTES_PER_ELEMENT, s, a.offset, a.count) : t.bufferSubData(u, a.offset * s.BYTES_PER_ELEMENT, s.subarray(a.offset, a.offset + a.count)), 
                a.count = -1), c.version = e.version);
            }
        };
    }
    function tr(t, e, n, r, i, o) {
        this.a = t, this.b = e, this.c = n, this.normal = r && r.isVector3 ? r : new h(), 
        this.vertexNormals = Array.isArray(r) ? r : [], this.color = i && i.isColor ? i : new Xt(), 
        this.vertexColors = Array.isArray(i) ? i : [], this.materialIndex = void 0 !== o ? o : 0;
    }
    Jn.prototype = Object.assign(Object.create(B.prototype), {
        constructor: Jn,
        isScene: !0,
        copy: function(t, e) {
            return B.prototype.copy.call(this, t, e), null !== t.background && (this.background = t.background.clone()), 
            null !== t.environment && (this.environment = t.environment.clone()), null !== t.fog && (this.fog = t.fog.clone()), 
            null !== t.overrideMaterial && (this.overrideMaterial = t.overrideMaterial.clone()), 
            this.autoUpdate = t.autoUpdate, this.matrixAutoUpdate = t.matrixAutoUpdate, this;
        },
        dispose: function() {
            this.dispatchEvent({
                type: "dispose"
            });
        }
    }), Object.assign(tr.prototype, {
        clone: function() {
            return new this.constructor().copy(this);
        },
        copy: function(t) {
            this.a = t.a, this.b = t.b, this.c = t.c, this.normal.copy(t.normal), this.color.copy(t.color), 
            this.materialIndex = t.materialIndex;
            for (var e = 0, n = t.vertexNormals.length; e < n; e++) this.vertexNormals[e] = t.vertexNormals[e].clone();
            for (e = 0, n = t.vertexColors.length; e < n; e++) this.vertexColors[e] = t.vertexColors[e].clone();
            return this;
        }
    });
    var er = 0, nr = new b(), rr = new B(), ir = new h();
    function or() {
        Object.defineProperty(this, "id", {
            value: er += 2
        }), this.uuid = s.generateUUID(), this.name = "", this.type = "Geometry", this.vertices = [], 
        this.colors = [], this.faces = [], this.faceVertexUvs = [ [] ], this.morphTargets = [], 
        this.morphNormals = [], this.skinWeights = [], this.skinIndices = [], this.lineDistances = [], 
        this.boundingBox = null, this.boundingSphere = null, this.elementsNeedUpdate = !1, 
        this.verticesNeedUpdate = !1, this.uvsNeedUpdate = !1, this.normalsNeedUpdate = !1, 
        this.colorsNeedUpdate = !1, this.lineDistancesNeedUpdate = !1, this.groupsNeedUpdate = !1;
    }
    or.prototype = Object.assign(Object.create(x.prototype), {
        constructor: or,
        isGeometry: !0,
        applyMatrix4: function(t) {
            for (var e = new O().getNormalMatrix(t), n = 0, r = this.vertices.length; n < r; n++) this.vertices[n].applyMatrix4(t);
            for (n = 0, r = this.faces.length; n < r; n++) {
                var i = this.faces[n];
                i.normal.applyMatrix3(e).normalize();
                for (var o = 0, a = i.vertexNormals.length; o < a; o++) i.vertexNormals[o].applyMatrix3(e).normalize();
            }
            return null !== this.boundingBox && this.computeBoundingBox(), null !== this.boundingSphere && this.computeBoundingSphere(), 
            this.verticesNeedUpdate = !0, this.normalsNeedUpdate = !0, this;
        },
        rotateX: function(t) {
            return nr.makeRotationX(t), this.applyMatrix4(nr), this;
        },
        rotateY: function(t) {
            return nr.makeRotationY(t), this.applyMatrix4(nr), this;
        },
        rotateZ: function(t) {
            return nr.makeRotationZ(t), this.applyMatrix4(nr), this;
        },
        translate: function(t, e, n) {
            return nr.makeTranslation(t, e, n), this.applyMatrix4(nr), this;
        },
        scale: function(t, e, n) {
            return nr.makeScale(t, e, n), this.applyMatrix4(nr), this;
        },
        lookAt: function(t) {
            return rr.lookAt(t), rr.updateMatrix(), this.applyMatrix4(rr.matrix), this;
        },
        fromBufferGeometry: function(t) {
            var e = this, n = null !== t.index ? t.index.array : void 0, r = t.attributes;
            if (void 0 === r.position) console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."); else {
                var i = r.position.array, o = void 0 !== r.normal ? r.normal.array : void 0, a = void 0 !== r.color ? r.color.array : void 0, s = void 0 !== r.uv ? r.uv.array : void 0, l = void 0 !== r.uv2 ? r.uv2.array : void 0;
                void 0 !== l && (this.faceVertexUvs[1] = []);
                for (var u = 0; u < i.length; u += 3) e.vertices.push(new h().fromArray(i, u)), 
                void 0 !== a && e.colors.push(new Xt().fromArray(a, u));
                var c = t.groups;
                if (0 < c.length) for (u = 0; u < c.length; u++) for (var f = c[u], p = f.start, d = p, y = p + f.count; d < y; d += 3) void 0 !== n ? m(n[d], n[d + 1], n[d + 2], f.materialIndex) : m(d, d + 1, d + 2, f.materialIndex); else if (void 0 !== n) for (u = 0; u < n.length; u += 3) m(n[u], n[u + 1], n[u + 2]); else for (u = 0; u < i.length / 3; u += 3) m(u, u + 1, u + 2);
                this.computeFaceNormals(), null !== t.boundingBox && (this.boundingBox = t.boundingBox.clone()), 
                null !== t.boundingSphere && (this.boundingSphere = t.boundingSphere.clone());
            }
            return this;
            function m(t, n, r, i) {
                var u = void 0 === a ? [] : [ e.colors[t].clone(), e.colors[n].clone(), e.colors[r].clone() ];
                u = new tr(t, n, r, void 0 === o ? [] : [ new h().fromArray(o, 3 * t), new h().fromArray(o, 3 * n), new h().fromArray(o, 3 * r) ], u, i);
                e.faces.push(u), void 0 !== s && e.faceVertexUvs[0].push([ new Mt().fromArray(s, 2 * t), new Mt().fromArray(s, 2 * n), new Mt().fromArray(s, 2 * r) ]), 
                void 0 !== l && e.faceVertexUvs[1].push([ new Mt().fromArray(l, 2 * t), new Mt().fromArray(l, 2 * n), new Mt().fromArray(l, 2 * r) ]);
            }
        },
        center: function() {
            return this.computeBoundingBox(), this.boundingBox.getCenter(ir).negate(), this.translate(ir.x, ir.y, ir.z), 
            this;
        },
        normalize: function() {
            this.computeBoundingSphere();
            var t = this.boundingSphere.center, e = 0 === (e = this.boundingSphere.radius) ? 1 : 1 / e, n = new b();
            return n.set(e, 0, 0, -e * t.x, 0, e, 0, -e * t.y, 0, 0, e, -e * t.z, 0, 0, 0, 1), 
            this.applyMatrix4(n), this;
        },
        computeFaceNormals: function() {
            for (var t = new h(), e = new h(), n = 0, r = this.faces.length; n < r; n++) {
                var i = this.faces[n], o = this.vertices[i.a], a = this.vertices[i.b], s = this.vertices[i.c];
                t.subVectors(s, a), e.subVectors(o, a), t.cross(e), t.normalize(), i.normal.copy(t);
            }
        },
        computeVertexNormals: function(t) {
            var e, n, r;
            for (void 0 === t && (t = !0), r = new Array(this.vertices.length), e = 0, n = this.vertices.length; e < n; e++) r[e] = new h();
            if (t) for (var i, o, a, s = new h(), l = new h(), u = 0, c = this.faces.length; u < c; u++) f = this.faces[u], 
            i = this.vertices[f.a], o = this.vertices[f.b], a = this.vertices[f.c], s.subVectors(a, o), 
            l.subVectors(i, o), s.cross(l), r[f.a].add(s), r[f.b].add(s), r[f.c].add(s); else for (this.computeFaceNormals(), 
            u = 0, c = this.faces.length; u < c; u++) r[(f = this.faces[u]).a].add(f.normal), 
            r[f.b].add(f.normal), r[f.c].add(f.normal);
            for (e = 0, n = this.vertices.length; e < n; e++) r[e].normalize();
            for (u = 0, c = this.faces.length; u < c; u++) {
                var f, p = (f = this.faces[u]).vertexNormals;
                3 === p.length ? (p[0].copy(r[f.a]), p[1].copy(r[f.b]), p[2].copy(r[f.c])) : (p[0] = r[f.a].clone(), 
                p[1] = r[f.b].clone(), p[2] = r[f.c].clone());
            }
            0 < this.faces.length && (this.normalsNeedUpdate = !0);
        },
        computeFlatVertexNormals: function() {
            var t, e;
            for (this.computeFaceNormals(), t = 0, e = this.faces.length; t < e; t++) {
                var n, r = (n = this.faces[t]).vertexNormals;
                3 === r.length ? (r[0].copy(n.normal), r[1].copy(n.normal), r[2].copy(n.normal)) : (r[0] = n.normal.clone(), 
                r[1] = n.normal.clone(), r[2] = n.normal.clone());
            }
            0 < this.faces.length && (this.normalsNeedUpdate = !0);
        },
        computeMorphNormals: function() {
            var t, e, n;
            for (a = 0, s = this.faces.length; a < s; a++) for ((n = this.faces[a]).Vr ? n.Vr.copy(n.normal) : n.Vr = n.normal.clone(), 
            n.Wr || (n.Wr = []), t = 0, e = n.vertexNormals.length; t < e; t++) n.Wr[t] ? n.Wr[t].copy(n.vertexNormals[t]) : n.Wr[t] = n.vertexNormals[t].clone();
            var r = new or();
            for (r.faces = this.faces, t = 0, e = this.morphTargets.length; t < e; t++) {
                if (!this.morphNormals[t]) {
                    this.morphNormals[t] = {}, this.morphNormals[t].faceNormals = [], this.morphNormals[t].vertexNormals = [];
                    for (var i = this.morphNormals[t].faceNormals, o = this.morphNormals[t].vertexNormals, a = 0, s = this.faces.length; a < s; a++) l = new h(), 
                    u = {
                        a: new h(),
                        b: new h(),
                        c: new h()
                    }, i.push(l), o.push(u);
                }
                var l, u, c = this.morphNormals[t];
                for (r.vertices = this.morphTargets[t].vertices, r.computeFaceNormals(), r.computeVertexNormals(), 
                a = 0, s = this.faces.length; a < s; a++) n = this.faces[a], l = c.faceNormals[a], 
                u = c.vertexNormals[a], l.copy(n.normal), u.a.copy(n.vertexNormals[0]), u.b.copy(n.vertexNormals[1]), 
                u.c.copy(n.vertexNormals[2]);
            }
            for (a = 0, s = this.faces.length; a < s; a++) (n = this.faces[a]).normal = n.Vr, 
            n.vertexNormals = n.Wr;
        },
        computeBoundingBox: function() {
            null === this.boundingBox && (this.boundingBox = new nt()), this.boundingBox.setFromPoints(this.vertices);
        },
        computeBoundingSphere: function() {
            null === this.boundingSphere && (this.boundingSphere = new ot()), this.boundingSphere.setFromPoints(this.vertices);
        },
        mergeVertices: function() {
            for (var t, e, n, r, i = {}, o = [], a = [], s = Math.pow(10, 4), l = 0, u = this.vertices.length; l < u; l++) t = this.vertices[l], 
            void 0 === i[t = Math.round(t.x * s) + "_" + Math.round(t.y * s) + "_" + Math.round(t.z * s)] ? (i[t] = l, 
            o.push(this.vertices[l]), a[l] = o.length - 1) : a[l] = a[i[t]];
            var c = [];
            for (l = 0, u = this.faces.length; l < u; l++) {
                (e = this.faces[l]).a = a[e.a], e.b = a[e.b], e.c = a[e.c];
                for (var h = [ e.a, e.b, e.c ], f = 0; f < 3; f++) if (h[f] === h[(f + 1) % 3]) {
                    c.push(l);
                    break;
                }
            }
            for (l = c.length - 1; 0 <= l; l--) {
                var p = c[l];
                for (this.faces.splice(p, 1), n = 0, r = this.faceVertexUvs.length; n < r; n++) this.faceVertexUvs[n].splice(p, 1);
            }
            var d = this.vertices.length - o.length;
            return this.vertices = o, d;
        },
        setFromPoints: function(t) {
            this.vertices = [];
            for (var e = 0, n = t.length; e < n; e++) {
                var r = t[e];
                this.vertices.push(new h(r.x, r.y, r.z || 0));
            }
            return this;
        },
        sortFacesByMaterialIndex: function() {
            for (var t = this.faces, e = t.length, n = 0; n < e; n++) t[n].Ae = n;
            t.sort(function(t, e) {
                return t.materialIndex - e.materialIndex;
            });
            var r, i, o = this.faceVertexUvs[0], a = this.faceVertexUvs[1];
            for (o && o.length === e && (r = []), a && a.length === e && (i = []), n = 0; n < e; n++) {
                var s = t[n].Ae;
                r && r.push(o[s]), i && i.push(a[s]);
            }
            r && (this.faceVertexUvs[0] = r), i && (this.faceVertexUvs[1] = i);
        },
        dispose: function() {
            this.dispatchEvent({
                type: "dispose"
            });
        }
    });
    var ar = new h();
    function sr(t, e, n) {
        if (Array.isArray(t)) throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");
        this.name = "", this.array = t, this.itemSize = e, this.count = void 0 !== t ? t.length / e : 0, 
        this.normalized = !0 === n, this.usage = 35044, this.updateRange = {
            offset: 0,
            count: -1
        }, this.version = 0;
    }
    function lr(t, e, n) {
        sr.call(this, new Int8Array(t), e, n);
    }
    function ur(t, e, n) {
        sr.call(this, new Uint8Array(t), e, n);
    }
    function cr(t, e, n) {
        sr.call(this, new Uint8ClampedArray(t), e, n);
    }
    function hr(t, e, n) {
        sr.call(this, new Int16Array(t), e, n);
    }
    function fr(t, e, n) {
        sr.call(this, new Uint16Array(t), e, n);
    }
    function pr(t, e, n) {
        sr.call(this, new Int32Array(t), e, n);
    }
    function dr(t, e, n) {
        sr.call(this, new Uint32Array(t), e, n);
    }
    function yr(t, e, n) {
        sr.call(this, new Float32Array(t), e, n);
    }
    function mr(t, e, n) {
        sr.call(this, new Float64Array(t), e, n);
    }
    function vr() {
        this.vertices = [], this.normals = [], this.colors = [], this.uvs = [], this.uvs2 = [], 
        this.groups = [], this.morphTargets = {}, this.skinWeights = [], this.skinIndices = [], 
        this.boundingBox = null, this.boundingSphere = null, this.verticesNeedUpdate = !1, 
        this.normalsNeedUpdate = !1, this.colorsNeedUpdate = !1, this.uvsNeedUpdate = !1, 
        this.groupsNeedUpdate = !1;
    }
    function gr(t) {
        if (0 === t.length) return -1 / 0;
        for (var e = t[0], n = 1, r = t.length; n < r; ++n) t[n] > e && (e = t[n]);
        return e;
    }
    Object.defineProperty(sr.prototype, "needsUpdate", {
        set: function(t) {
            !0 === t && this.version++;
        }
    }), Object.assign(sr.prototype, {
        isBufferAttribute: !0,
        onUploadCallback: function() {},
        setUsage: function(t) {
            return this.usage = t, this;
        },
        copy: function(t) {
            return this.name = t.name, this.array = new t.array.constructor(t.array), this.itemSize = t.itemSize, 
            this.count = t.count, this.normalized = t.normalized, this.usage = t.usage, this;
        },
        copyAt: function(t, e, n) {
            t *= this.itemSize, n *= e.itemSize;
            for (var r = 0, i = this.itemSize; r < i; r++) this.array[t + r] = e.array[n + r];
            return this;
        },
        copyArray: function(t) {
            return this.array.set(t), this;
        },
        copyColorsArray: function(t) {
            for (var e = this.array, n = 0, r = 0, i = t.length; r < i; r++) {
                var o = t[r];
                void 0 === o && (console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined", r), 
                o = new Xt()), e[n++] = o.r, e[n++] = o.g, e[n++] = o.b;
            }
            return this;
        },
        copyVector2sArray: function(t) {
            for (var e = this.array, n = 0, r = 0, i = t.length; r < i; r++) {
                var o = t[r];
                void 0 === o && (console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined", r), 
                o = new Mt()), e[n++] = o.x, e[n++] = o.y;
            }
            return this;
        },
        copyVector3sArray: function(t) {
            for (var e = this.array, n = 0, r = 0, i = t.length; r < i; r++) {
                var o = t[r];
                void 0 === o && (console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined", r), 
                o = new h()), e[n++] = o.x, e[n++] = o.y, e[n++] = o.z;
            }
            return this;
        },
        copyVector4sArray: function(t) {
            for (var e = this.array, n = 0, r = 0, i = t.length; r < i; r++) {
                var o = t[r];
                void 0 === o && (console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined", r), 
                o = new Bt()), e[n++] = o.x, e[n++] = o.y, e[n++] = o.z, e[n++] = o.w;
            }
            return this;
        },
        applyMatrix3: function(t) {
            for (var e = 0, n = this.count; e < n; e++) ar.x = this.getX(e), ar.y = this.getY(e), 
            ar.z = this.getZ(e), ar.applyMatrix3(t), this.setXYZ(e, ar.x, ar.y, ar.z);
            return this;
        },
        applyMatrix4: function(t) {
            for (var e = 0, n = this.count; e < n; e++) ar.x = this.getX(e), ar.y = this.getY(e), 
            ar.z = this.getZ(e), ar.applyMatrix4(t), this.setXYZ(e, ar.x, ar.y, ar.z);
            return this;
        },
        applyNormalMatrix: function(t) {
            for (var e = 0, n = this.count; e < n; e++) ar.x = this.getX(e), ar.y = this.getY(e), 
            ar.z = this.getZ(e), ar.applyNormalMatrix(t), this.setXYZ(e, ar.x, ar.y, ar.z);
            return this;
        },
        transformDirection: function(t) {
            for (var e = 0, n = this.count; e < n; e++) ar.x = this.getX(e), ar.y = this.getY(e), 
            ar.z = this.getZ(e), ar.transformDirection(t), this.setXYZ(e, ar.x, ar.y, ar.z);
            return this;
        },
        set: function(t, e) {
            return this.array.set(t, e = void 0 === e ? 0 : e), this;
        },
        getX: function(t) {
            return this.array[t * this.itemSize];
        },
        setX: function(t, e) {
            return this.array[t * this.itemSize] = e, this;
        },
        getY: function(t) {
            return this.array[t * this.itemSize + 1];
        },
        setY: function(t, e) {
            return this.array[t * this.itemSize + 1] = e, this;
        },
        getZ: function(t) {
            return this.array[t * this.itemSize + 2];
        },
        setZ: function(t, e) {
            return this.array[t * this.itemSize + 2] = e, this;
        },
        getW: function(t) {
            return this.array[t * this.itemSize + 3];
        },
        setW: function(t, e) {
            return this.array[t * this.itemSize + 3] = e, this;
        },
        setXY: function(t, e, n) {
            return t *= this.itemSize, this.array[t + 0] = e, this.array[t + 1] = n, this;
        },
        setXYZ: function(t, e, n, r) {
            return t *= this.itemSize, this.array[t + 0] = e, this.array[t + 1] = n, this.array[t + 2] = r, 
            this;
        },
        setXYZW: function(t, e, n, r, i) {
            return t *= this.itemSize, this.array[t + 0] = e, this.array[t + 1] = n, this.array[t + 2] = r, 
            this.array[t + 3] = i, this;
        },
        onUpload: function(t) {
            return this.onUploadCallback = t, this;
        },
        clone: function() {
            return new this.constructor(this.array, this.itemSize).copy(this);
        }
    }), (lr.prototype = Object.create(sr.prototype)).constructor = lr, (ur.prototype = Object.create(sr.prototype)).constructor = ur, 
    (cr.prototype = Object.create(sr.prototype)).constructor = cr, (hr.prototype = Object.create(sr.prototype)).constructor = hr, 
    fr.prototype = Object.create(sr.prototype), fr.prototype.constructor = fr, (pr.prototype = Object.create(sr.prototype)).constructor = pr, 
    dr.prototype = Object.create(sr.prototype), dr.prototype.constructor = dr, (yr.prototype = Object.create(sr.prototype)).constructor = yr, 
    (mr.prototype = Object.create(sr.prototype)).constructor = mr, Object.assign(vr.prototype, {
        computeGroups: function(t) {
            for (var e, n = [], r = void 0, i = t.faces, o = 0; o < i.length; o++) {
                var a = i[o];
                a.materialIndex !== r && (r = a.materialIndex, void 0 !== e && (e.count = 3 * o - e.start, 
                n.push(e)), e = {
                    start: 3 * o,
                    materialIndex: r
                });
            }
            void 0 !== e && (e.count = 3 * o - e.start, n.push(e)), this.groups = n;
        },
        fromGeometry: function(t) {
            var e = t.faces, n = t.vertices, r = t.faceVertexUvs, i = r[0] && 0 < r[0].length, o = r[1] && 0 < r[1].length, a = t.morphTargets, s = a.length;
            if (0 < s) {
                for (var l = [], u = 0; u < s; u++) l[u] = {
                    name: a[u].name,
                    data: []
                };
                this.morphTargets.position = l;
            }
            var c = t.morphNormals, h = c.length;
            if (0 < h) {
                var f = [];
                for (u = 0; u < h; u++) f[u] = {
                    name: c[u].name,
                    data: []
                };
                this.morphTargets.normal = f;
            }
            var p = t.skinIndices, d = t.skinWeights, y = p.length === n.length, m = d.length === n.length;
            for (0 < n.length && 0 === e.length && console.error("THREE.DirectGeometry: Faceless geometries are not supported."), 
            u = 0; u < e.length; u++) {
                var v, g, b = e[u];
                3 === (g = (3 === (g = (this.vertices.push(n[b.a], n[b.b], n[b.c]), b.vertexNormals)).length ? this.normals.push(g[0], g[1], g[2]) : (g = b.normal, 
                this.normals.push(g, g, g)), b.vertexColors)).length ? this.colors.push(g[0], g[1], g[2]) : (g = b.color, 
                this.colors.push(g, g, g)), !0 === i && (void 0 !== (v = r[0][u]) ? this.uvs.push(v[0], v[1], v[2]) : (console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ", u), 
                this.uvs.push(new Mt(), new Mt(), new Mt()))), !0 === o && (void 0 !== (v = r[1][u]) ? this.uvs2.push(v[0], v[1], v[2]) : (console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ", u), 
                this.uvs2.push(new Mt(), new Mt(), new Mt())));
                for (var x = 0; x < s; x++) {
                    var w = a[x].vertices;
                    l[x].data.push(w[b.a], w[b.b], w[b.c]);
                }
                for (x = 0; x < h; x++) {
                    var S = c[x].vertexNormals[u];
                    f[x].data.push(S.a, S.b, S.c);
                }
                y && this.skinIndices.push(p[b.a], p[b.b], p[b.c]), m && this.skinWeights.push(d[b.a], d[b.b], d[b.c]);
            }
            return this.computeGroups(t), this.verticesNeedUpdate = t.verticesNeedUpdate, this.normalsNeedUpdate = t.normalsNeedUpdate, 
            this.colorsNeedUpdate = t.colorsNeedUpdate, this.uvsNeedUpdate = t.uvsNeedUpdate, 
            this.groupsNeedUpdate = t.groupsNeedUpdate, null !== t.boundingSphere && (this.boundingSphere = t.boundingSphere.clone()), 
            null !== t.boundingBox && (this.boundingBox = t.boundingBox.clone()), this;
        }
    });
    var br = 1, xr = new b(), wr = new B(), Sr = new h(), _r = new nt(), Er = new nt(), Or = new h();
    function Mr() {
        Object.defineProperty(this, "id", {
            value: br += 2
        }), this.uuid = s.generateUUID(), this.name = "", this.type = "BufferGeometry", 
        this.index = null, this.attributes = {}, this.morphAttributes = {}, this.morphTargetsRelative = !1, 
        this.groups = [], this.boundingBox = null, this.boundingSphere = null, this.drawRange = {
            start: 0,
            count: 1 / 0
        }, this.userData = {};
    }
    function Tr(t) {
        return (Tr = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Lr(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Tr(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Tr(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Tr(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function Ar(t, e, n) {
        e = Rr(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], Rr(t).constructor) : e.apply(t, n)) && ("object" === Tr(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        return Pr(r);
    }
    function Pr(t) {
        if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return t;
    }
    function Rr(t) {
        return (Rr = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function jr(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && function(t, e) {
            (Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
                return t.__proto__ = e, t;
            })(t, e);
        }(t, e);
    }
    Mr.prototype = Object.assign(Object.create(x.prototype), {
        constructor: Mr,
        isBufferGeometry: !0,
        getIndex: function() {
            return this.index;
        },
        setIndex: function(t) {
            Array.isArray(t) ? this.index = new (65535 < gr(t) ? dr : fr)(t, 1) : this.index = t;
        },
        getAttribute: function(t) {
            return this.attributes[t];
        },
        setAttribute: function(t, e) {
            return this.attributes[t] = e, this;
        },
        deleteAttribute: function(t) {
            return delete this.attributes[t], this;
        },
        addGroup: function(t, e, n) {
            this.groups.push({
                start: t,
                count: e,
                materialIndex: void 0 !== n ? n : 0
            });
        },
        clearGroups: function() {
            this.groups = [];
        },
        setDrawRange: function(t, e) {
            this.drawRange.start = t, this.drawRange.count = e;
        },
        applyMatrix4: function(t) {
            var e, n = (void 0 !== (e = (void 0 !== (e = this.attributes.position) && (e.applyMatrix4(t), 
            e.needsUpdate = !0), this.attributes.normal)) && (n = new O().getNormalMatrix(t), 
            e.applyNormalMatrix(n), e.needsUpdate = !0), this.attributes.tangent);
            return void 0 !== n && (n.transformDirection(t), n.needsUpdate = !0), null !== this.boundingBox && this.computeBoundingBox(), 
            null !== this.boundingSphere && this.computeBoundingSphere(), this;
        },
        rotateX: function(t) {
            return xr.makeRotationX(t), this.applyMatrix4(xr), this;
        },
        rotateY: function(t) {
            return xr.makeRotationY(t), this.applyMatrix4(xr), this;
        },
        rotateZ: function(t) {
            return xr.makeRotationZ(t), this.applyMatrix4(xr), this;
        },
        translate: function(t, e, n) {
            return xr.makeTranslation(t, e, n), this.applyMatrix4(xr), this;
        },
        scale: function(t, e, n) {
            return xr.makeScale(t, e, n), this.applyMatrix4(xr), this;
        },
        lookAt: function(t) {
            return wr.lookAt(t), wr.updateMatrix(), this.applyMatrix4(wr.matrix), this;
        },
        center: function() {
            return this.computeBoundingBox(), this.boundingBox.getCenter(Sr).negate(), this.translate(Sr.x, Sr.y, Sr.z), 
            this;
        },
        setFromObject: function(t) {
            var e, n, r = t.geometry;
            return t.isPoints || t.isLine ? (n = new yr(3 * r.vertices.length, 3), e = new yr(3 * r.colors.length, 3), 
            this.setAttribute("position", n.copyVector3sArray(r.vertices)), this.setAttribute("color", e.copyColorsArray(r.colors)), 
            r.lineDistances && r.lineDistances.length === r.vertices.length && (n = new yr(r.lineDistances.length, 1), 
            this.setAttribute("lineDistance", n.copyArray(r.lineDistances))), null !== r.boundingSphere && (this.boundingSphere = r.boundingSphere.clone()), 
            null !== r.boundingBox && (this.boundingBox = r.boundingBox.clone())) : t.isMesh && r && r.isGeometry && this.fromGeometry(r), 
            this;
        },
        setFromPoints: function(t) {
            for (var e = [], n = 0, r = t.length; n < r; n++) {
                var i = t[n];
                e.push(i.x, i.y, i.z || 0);
            }
            return this.setAttribute("position", new yr(e, 3)), this;
        },
        updateFromObject: function(t) {
            var e, n = t.geometry;
            if (t.isMesh) {
                var r = n.Yr;
                if (!0 === n.elementsNeedUpdate && (r = void 0, n.elementsNeedUpdate = !1), void 0 === r) return this.fromGeometry(n);
                r.verticesNeedUpdate = n.verticesNeedUpdate, r.normalsNeedUpdate = n.normalsNeedUpdate, 
                r.colorsNeedUpdate = n.colorsNeedUpdate, r.uvsNeedUpdate = n.uvsNeedUpdate, r.groupsNeedUpdate = n.groupsNeedUpdate, 
                n.verticesNeedUpdate = !1, n.normalsNeedUpdate = !1, n.colorsNeedUpdate = !1, n.uvsNeedUpdate = !1, 
                n.groupsNeedUpdate = !1, n = r;
            }
            return !0 === n.verticesNeedUpdate && (void 0 !== (e = this.attributes.position) && (e.copyVector3sArray(n.vertices), 
            e.needsUpdate = !0), n.verticesNeedUpdate = !1), !0 === n.normalsNeedUpdate && (void 0 !== (e = this.attributes.normal) && (e.copyVector3sArray(n.normals), 
            e.needsUpdate = !0), n.normalsNeedUpdate = !1), !0 === n.colorsNeedUpdate && (void 0 !== (e = this.attributes.color) && (e.copyColorsArray(n.colors), 
            e.needsUpdate = !0), n.colorsNeedUpdate = !1), n.uvsNeedUpdate && (void 0 !== (e = this.attributes.uv) && (e.copyVector2sArray(n.uvs), 
            e.needsUpdate = !0), n.uvsNeedUpdate = !1), n.lineDistancesNeedUpdate && (void 0 !== (e = this.attributes.lineDistance) && (e.copyArray(n.lineDistances), 
            e.needsUpdate = !0), n.lineDistancesNeedUpdate = !1), n.groupsNeedUpdate && (n.computeGroups(t.geometry), 
            this.groups = n.groups, n.groupsNeedUpdate = !1), this;
        },
        fromGeometry: function(t) {
            return t.Yr = new vr().fromGeometry(t), this.fromDirectGeometry(t.Yr);
        },
        fromDirectGeometry: function(t) {
            var e, n = new Float32Array(3 * t.vertices.length);
            for (e in this.setAttribute("position", new sr(n, 3).copyVector3sArray(t.vertices)), 
            0 < t.normals.length && (n = new Float32Array(3 * t.normals.length), this.setAttribute("normal", new sr(n, 3).copyVector3sArray(t.normals))), 
            0 < t.colors.length && (n = new Float32Array(3 * t.colors.length), this.setAttribute("color", new sr(n, 3).copyColorsArray(t.colors))), 
            0 < t.uvs.length && (n = new Float32Array(2 * t.uvs.length), this.setAttribute("uv", new sr(n, 2).copyVector2sArray(t.uvs))), 
            0 < t.uvs2.length && (n = new Float32Array(2 * t.uvs2.length), this.setAttribute("uv2", new sr(n, 2).copyVector2sArray(t.uvs2))), 
            this.groups = t.groups, t.morphTargets) {
                for (var r = [], i = t.morphTargets[e], o = 0, a = i.length; o < a; o++) {
                    var s = i[o], l = new yr(3 * s.data.length, 3);
                    l.name = s.name, r.push(l.copyVector3sArray(s.data));
                }
                this.morphAttributes[e] = r;
            }
            return 0 < t.skinIndices.length && (n = new yr(4 * t.skinIndices.length, 4), this.setAttribute("skinIndex", n.copyVector4sArray(t.skinIndices))), 
            0 < t.skinWeights.length && (n = new yr(4 * t.skinWeights.length, 4), this.setAttribute("skinWeight", n.copyVector4sArray(t.skinWeights))), 
            null !== t.boundingSphere && (this.boundingSphere = t.boundingSphere.clone()), null !== t.boundingBox && (this.boundingBox = t.boundingBox.clone()), 
            this;
        },
        computeBoundingBox: function() {
            null === this.boundingBox && (this.boundingBox = new nt());
            var t = this.attributes.position, e = this.morphAttributes.position;
            if (void 0 !== t) {
                if (this.boundingBox.setFromBufferAttribute(t), e) for (var n = 0, r = e.length; n < r; n++) {
                    var i = e[n];
                    _r.setFromBufferAttribute(i), this.morphTargetsRelative ? (Or.addVectors(this.boundingBox.min, _r.min), 
                    this.boundingBox.expandByPoint(Or), Or.addVectors(this.boundingBox.max, _r.max), 
                    this.boundingBox.expandByPoint(Or)) : (this.boundingBox.expandByPoint(_r.min), this.boundingBox.expandByPoint(_r.max));
                }
            } else this.boundingBox.makeEmpty();
            (isNaN(this.boundingBox.min.x) || isNaN(this.boundingBox.min.y) || isNaN(this.boundingBox.min.z)) && console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.', this);
        },
        computeBoundingSphere: function() {
            null === this.boundingSphere && (this.boundingSphere = new ot());
            var t = this.attributes.position, e = this.morphAttributes.position;
            if (t) {
                var n = this.boundingSphere.center;
                if (_r.setFromBufferAttribute(t), e) for (var r = 0, i = e.length; r < i; r++) {
                    var o = e[r];
                    Er.setFromBufferAttribute(o), this.morphTargetsRelative ? (Or.addVectors(_r.min, Er.min), 
                    _r.expandByPoint(Or), Or.addVectors(_r.max, Er.max), _r.expandByPoint(Or)) : (_r.expandByPoint(Er.min), 
                    _r.expandByPoint(Er.max));
                }
                _r.getCenter(n);
                var a = 0;
                for (r = 0, i = t.count; r < i; r++) Or.fromBufferAttribute(t, r), a = Math.max(a, n.distanceToSquared(Or));
                if (e) for (r = 0, i = e.length; r < i; r++) {
                    o = e[r];
                    for (var s = this.morphTargetsRelative, l = 0, u = o.count; l < u; l++) Or.fromBufferAttribute(o, l), 
                    s && (Sr.fromBufferAttribute(t, l), Or.add(Sr)), a = Math.max(a, n.distanceToSquared(Or));
                }
                this.boundingSphere.radius = Math.sqrt(a), isNaN(this.boundingSphere.radius) && console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.', this);
            }
        },
        computeFaceNormals: function() {},
        computeVertexNormals: function() {
            var t = this.index, e = this.attributes;
            if (e.position) {
                var n = e.position.array;
                if (void 0 === e.normal) this.setAttribute("normal", new sr(new Float32Array(n.length), 3)); else for (var r = e.normal.array, i = 0, o = r.length; i < o; i++) r[i] = 0;
                var a, s, l, u = e.normal.array, c = new h(), f = new h(), p = new h(), d = new h(), y = new h();
                if (t) {
                    var m = t.array;
                    for (i = 0, o = t.count; i < o; i += 3) a = 3 * m[i + 0], s = 3 * m[i + 1], l = 3 * m[i + 2], 
                    c.fromArray(n, a), f.fromArray(n, s), p.fromArray(n, l), d.subVectors(p, f), y.subVectors(c, f), 
                    d.cross(y), u[a] += d.x, u[1 + a] += d.y, u[2 + a] += d.z, u[s] += d.x, u[1 + s] += d.y, 
                    u[2 + s] += d.z, u[l] += d.x, u[1 + l] += d.y, u[2 + l] += d.z;
                } else for (i = 0, o = n.length; i < o; i += 9) c.fromArray(n, i), f.fromArray(n, i + 3), 
                p.fromArray(n, i + 6), d.subVectors(p, f), y.subVectors(c, f), d.cross(y), u[i] = d.x, 
                u[i + 1] = d.y, u[i + 2] = d.z, u[i + 3] = d.x, u[i + 4] = d.y, u[i + 5] = d.z, 
                u[i + 6] = d.x, u[i + 7] = d.y, u[i + 8] = d.z;
                this.normalizeNormals(), e.normal.needsUpdate = !0;
            }
        },
        normalizeNormals: function() {
            for (var t = this.attributes.normal, e = 0, n = t.count; e < n; e++) Or.x = t.getX(e), 
            Or.y = t.getY(e), Or.z = t.getZ(e), Or.normalize(), t.setXYZ(e, Or.x, Or.y, Or.z);
        },
        dispose: function() {
            this.dispatchEvent({
                type: "dispose"
            });
        }
    });
    var Ir = function() {
        function t(e, n, r, i, o, a) {
            (function(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
            })(this, t), (s = Ar(this, t)).type = "BoxBufferGeometry", s.parameters = {
                width: e,
                height: n,
                depth: r,
                widthSegments: i,
                heightSegments: o,
                depthSegments: a
            };
            var s, l = Pr(s), u = (e = e || 1, n = n || 1, r = r || 1, i = Math.floor(i) || 1, 
            o = Math.floor(o) || 1, a = Math.floor(a) || 1, []), c = [], f = [], p = [], d = 0, y = 0;
            function m(t, e, n, r, i, o, a, s, m, v, g) {
                for (var b = o / m, x = a / v, w = o / 2, S = a / 2, _ = s / 2, E = m + 1, O = v + 1, M = 0, T = 0, L = new h(), A = 0; A < O; A++) for (var P = A * x - S, R = 0; R < E; R++) L[t] = (R * b - w) * r, 
                L[e] = P * i, L[n] = _, c.push(L.x, L.y, L.z), L[t] = 0, L[e] = 0, L[n] = 0 < s ? 1 : -1, 
                f.push(L.x, L.y, L.z), p.push(R / m), p.push(1 - A / v), M += 1;
                for (A = 0; A < v; A++) for (R = 0; R < m; R++) {
                    var j = d + R + E * A, I = d + R + E * (A + 1), D = d + (R + 1) + E * (A + 1), k = d + (R + 1) + E * A;
                    u.push(j, I, k), u.push(I, D, k), T += 6;
                }
                l.addGroup(y, T, g), y += T, d += M;
            }
            return m("z", "y", "x", -1, -1, r, n, e, a, o, 0), m("z", "y", "x", 1, -1, r, n, -e, a, o, 1), 
            m("x", "z", "y", 1, 1, e, r, n, i, a, 2), m("x", "z", "y", 1, -1, e, r, -n, i, a, 3), 
            m("x", "y", "z", 1, -1, e, n, r, i, o, 4), m("x", "y", "z", -1, -1, e, n, -r, i, o, 5), 
            s.setIndex(u), s.setAttribute("position", new yr(c, 3)), s.setAttribute("normal", new yr(f, 3)), 
            s.setAttribute("uv", new yr(p, 2)), s;
        }
        return jr(t, Mr), function(t, e, n) {
            return e && Lr(t.prototype, e), n && Lr(t, n), Object.defineProperty(t, "prototype", {
                writable: !1
            }), t;
        }(t);
    }();
    function Dr(t, e, n, r) {
        Mr.call(this), this.type = "PlaneBufferGeometry", this.parameters = {
            width: t,
            height: e,
            widthSegments: n,
            heightSegments: r
        };
        for (var i = (t = t || 1) / 2, o = (e = e || 1) / 2, a = Math.floor(n) || 1, s = Math.floor(r) || 1, l = a + 1, u = s + 1, c = t / a, h = e / s, f = [], p = [], d = [], y = [], m = 0; m < u; m++) for (var v = m * h - o, g = 0; g < l; g++) p.push(g * c - i, -v, 0), 
        d.push(0, 0, 1), y.push(g / a), y.push(1 - m / s);
        for (m = 0; m < s; m++) for (g = 0; g < a; g++) {
            var b = g + l * (m + 1), x = g + 1 + l * (m + 1), w = g + 1 + l * m;
            f.push(g + l * m, b, w), f.push(b, x, w);
        }
        this.setIndex(f), this.setAttribute("position", new yr(p, 3)), this.setAttribute("normal", new yr(d, 3)), 
        this.setAttribute("uv", new yr(y, 2));
    }
    (Dr.prototype = Object.create(Mr.prototype)).constructor = Dr;
    var kr = 0;
    function Cr() {
        Object.defineProperty(this, "id", {
            value: kr++
        }), this.uuid = s.generateUUID(), this.name = "", this.type = "Material", this.fog = !0, 
        this.blending = 1, this.side = 0, this.flatShading = !1, this.vertexColors = !1, 
        this.opacity = 1, this.transparent = !1, this.blendSrc = 204, this.blendDst = 205, 
        this.blendEquation = 100, this.blendSrcAlpha = null, this.blendDstAlpha = null, 
        this.blendEquationAlpha = null, this.depthFunc = 3, this.depthTest = !0, this.depthWrite = !0, 
        this.stencilWriteMask = 255, this.stencilFunc = 519, this.stencilRef = 0, this.stencilFuncMask = 255, 
        this.stencilFail = 7680, this.stencilZFail = 7680, this.stencilZPass = 7680, this.stencilWrite = !1, 
        this.clippingPlanes = null, this.clipIntersection = !1, this.clipShadows = !1, this.shadowSide = null, 
        this.colorWrite = !0, this.precision = null, this.polygonOffset = !1, this.polygonOffsetFactor = 0, 
        this.polygonOffsetUnits = 0, this.dithering = !1, this.alphaTest = .001, this.premultipliedAlpha = !1, 
        this.visible = !0, this.toneMapped = !0, this.userData = {}, this.version = 0;
    }
    function Nr(t) {
        var e, n = {};
        for (e in t) for (var r in n[e] = {}, t[e]) {
            var i = t[e][r];
            i && (i.isColor || i.isMatrix3 || i.isMatrix4 || i.isVector2 || i.isVector3 || i.isVector4 || i.isTexture) ? n[e][r] = i.clone() : Array.isArray(i) ? n[e][r] = i.slice() : n[e][r] = i;
        }
        return n;
    }
    function Fr(t) {
        for (var e = {}, n = 0; n < t.length; n++) {
            var r, i = Nr(t[n]);
            for (r in i) e[r] = i[r];
        }
        return e;
    }
    Cr.prototype = Object.assign(Object.create(x.prototype), {
        constructor: Cr,
        isMaterial: !0,
        onBeforeCompile: function() {},
        setValues: function(t) {
            if (void 0 !== t) for (var e in t) {
                var n, r = t[e];
                void 0 === r ? console.warn("THREE.Material: '" + e + "' parameter is undefined.") : "shading" === e ? (console.warn("THREE." + this.type + ": .shading has been removed. Use the boolean .flatShading instead."), 
                this.flatShading = 1 === r) : void 0 === (n = this[e]) ? console.warn("THREE." + this.type + ": '" + e + "' is not a property of this material.") : n && n.isColor ? n.set(r) : n && n.isVector3 && r && r.isVector3 ? n.copy(r) : this[e] = r;
            }
        },
        clone: function() {
            return new this.constructor().copy(this);
        },
        copy: function(t) {
            this.name = t.name, this.fog = t.fog, this.blending = t.blending, this.side = t.side, 
            this.flatShading = t.flatShading, this.vertexColors = t.vertexColors, this.opacity = t.opacity, 
            this.transparent = t.transparent, this.blendSrc = t.blendSrc, this.blendDst = t.blendDst, 
            this.blendEquation = t.blendEquation, this.blendSrcAlpha = t.blendSrcAlpha, this.blendDstAlpha = t.blendDstAlpha, 
            this.blendEquationAlpha = t.blendEquationAlpha, this.depthFunc = t.depthFunc, this.depthTest = t.depthTest, 
            this.depthWrite = t.depthWrite, this.stencilWriteMask = t.stencilWriteMask, this.stencilFunc = t.stencilFunc, 
            this.stencilRef = t.stencilRef, this.stencilFuncMask = t.stencilFuncMask, this.stencilFail = t.stencilFail, 
            this.stencilZFail = t.stencilZFail, this.stencilZPass = t.stencilZPass, this.stencilWrite = t.stencilWrite;
            var e = t.clippingPlanes, n = null;
            if (null !== e) for (var r = e.length, i = (n = new Array(r), 0); i !== r; ++i) n[i] = e[i].clone();
            return this.clippingPlanes = n, this.clipIntersection = t.clipIntersection, this.clipShadows = t.clipShadows, 
            this.shadowSide = t.shadowSide, this.colorWrite = t.colorWrite, this.precision = t.precision, 
            this.polygonOffset = t.polygonOffset, this.polygonOffsetFactor = t.polygonOffsetFactor, 
            this.polygonOffsetUnits = t.polygonOffsetUnits, this.dithering = t.dithering, this.alphaTest = t.alphaTest, 
            this.premultipliedAlpha = t.premultipliedAlpha, this.visible = t.visible, this.toneMapped = t.toneMapped, 
            this.userData = JSON.parse(JSON.stringify(t.userData)), this;
        },
        dispose: function() {
            this.dispatchEvent({
                type: "dispose"
            });
        }
    }), Object.defineProperty(Cr.prototype, "needsUpdate", {
        set: function(t) {
            !0 === t && this.version++;
        }
    });
    var Br = {
        clone: Nr,
        merge: Fr
    };
    function Ur(t) {
        Cr.call(this), this.type = "ShaderMaterial", this.defines = {}, this.uniforms = {}, 
        this.vertexShader = "\nvoid main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n", 
        this.fragmentShader = "\nvoid main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}\n", 
        this.linewidth = 1, this.wireframe = !1, this.wireframeLinewidth = 1, this.fog = !1, 
        this.lights = !1, this.clipping = !1, this.skinning = !1, this.morphTargets = !1, 
        this.morphNormals = !1, this.extensions = {
            derivatives: !1,
            fragDepth: !1,
            drawBuffers: !1,
            shaderTextureLOD: !1
        }, this.defaultAttributeValues = {
            color: [ 1, 1, 1 ],
            uv: [ 0, 0 ],
            uv2: [ 0, 0 ]
        }, this.index0AttributeName = void 0, this.uniformsNeedUpdate = !1, void 0 !== t && (void 0 !== t.attributes && console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."), 
        this.setValues(t));
    }
    ((Ur.prototype = Object.create(Cr.prototype)).constructor = Ur).prototype.isShaderMaterial = !0, 
    Ur.prototype.copy = function(t) {
        return Cr.prototype.copy.call(this, t), this.fragmentShader = t.fragmentShader, 
        this.vertexShader = t.vertexShader, this.uniforms = Nr(t.uniforms), this.defines = Object.assign({}, t.defines), 
        this.wireframe = t.wireframe, this.wireframeLinewidth = t.wireframeLinewidth, this.lights = t.lights, 
        this.clipping = t.clipping, this.skinning = t.skinning, this.morphTargets = t.morphTargets, 
        this.morphNormals = t.morphNormals, this.extensions = t.extensions, this;
    };
    var zr = new h(), Gr = new h(), Hr = new h(), Vr = new h(), Wr = new h(), Yr = new h(), Xr = new h(), Zr = new h(), qr = new h(), Kr = new h();
    function Jr(t, e, n) {
        this.a = void 0 !== t ? t : new h(), this.b = void 0 !== e ? e : new h(), this.c = void 0 !== n ? n : new h();
    }
    function Qr(t) {
        Cr.call(this), this.type = "MeshBasicMaterial", this.color = new Xt(16777215), this.map = null, 
        this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, 
        this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = 0, 
        this.reflectivity = 1, this.refractionRatio = .98, this.wireframe = !1, this.wireframeLinewidth = 1, 
        this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.skinning = !1, 
        this.morphTargets = !1, this.setValues(t);
    }
    Object.assign(Jr, {
        getNormal: function(t, e, n, r) {
            return void 0 === r && (console.warn("THREE.Triangle: .getNormal() target is now required"), 
            r = new h()), r.subVectors(n, e), zr.subVectors(t, e), r.cross(zr), 0 < (n = r.lengthSq()) ? r.multiplyScalar(1 / Math.sqrt(n)) : r.set(0, 0, 0);
        },
        getBarycoord: function(t, e, n, r, i) {
            zr.subVectors(r, e), Gr.subVectors(n, e), Hr.subVectors(t, e);
            r = zr.dot(zr), n = zr.dot(Gr), t = zr.dot(Hr), e = Gr.dot(Gr);
            var o = Gr.dot(Hr), a = r * e - n * n;
            return void 0 === i && (console.warn("THREE.Triangle: .getBarycoord() target is now required"), 
            i = new h()), 0 == a ? i.set(-2, -1, -1) : i.set(1 - (e = (e * t - n * o) * (i = 1 / a)) - (a = (r * o - n * t) * i), a, e);
        },
        containsPoint: function(t, e, n, r) {
            return Jr.getBarycoord(t, e, n, r, Vr), 0 <= Vr.x && 0 <= Vr.y && Vr.x + Vr.y <= 1;
        },
        getUV: function(t, e, n, r, i, o, a, s) {
            return this.getBarycoord(t, e, n, r, Vr), s.set(0, 0), s.addScaledVector(i, Vr.x), 
            s.addScaledVector(o, Vr.y), s.addScaledVector(a, Vr.z), s;
        },
        isFrontFacing: function(t, e, n, r) {
            return zr.subVectors(n, e), Gr.subVectors(t, e), zr.cross(Gr).dot(r) < 0;
        }
    }), Object.assign(Jr.prototype, {
        set: function(t, e, n) {
            return this.a.copy(t), this.b.copy(e), this.c.copy(n), this;
        },
        setFromPointsAndIndices: function(t, e, n, r) {
            return this.a.copy(t[e]), this.b.copy(t[n]), this.c.copy(t[r]), this;
        },
        clone: function() {
            return new this.constructor().copy(this);
        },
        copy: function(t) {
            return this.a.copy(t.a), this.b.copy(t.b), this.c.copy(t.c), this;
        },
        getArea: function() {
            return zr.subVectors(this.c, this.b), Gr.subVectors(this.a, this.b), .5 * zr.cross(Gr).length();
        },
        getMidpoint: function(t) {
            return void 0 === t && (console.warn("THREE.Triangle: .getMidpoint() target is now required"), 
            t = new h()), t.addVectors(this.a, this.b).add(this.c).multiplyScalar(1 / 3);
        },
        getNormal: function(t) {
            return Jr.getNormal(this.a, this.b, this.c, t);
        },
        getPlane: function(t) {
            return void 0 === t && (console.warn("THREE.Triangle: .getPlane() target is now required"), 
            t = new ut()), t.setFromCoplanarPoints(this.a, this.b, this.c);
        },
        getBarycoord: function(t, e) {
            return Jr.getBarycoord(t, this.a, this.b, this.c, e);
        },
        getUV: function(t, e, n, r, i) {
            return Jr.getUV(t, this.a, this.b, this.c, e, n, r, i);
        },
        containsPoint: function(t) {
            return Jr.containsPoint(t, this.a, this.b, this.c);
        },
        isFrontFacing: function(t) {
            return Jr.isFrontFacing(this.a, this.b, this.c, t);
        },
        intersectsBox: function(t) {
            return t.intersectsTriangle(this);
        },
        closestPointToPoint: function(t, e) {
            void 0 === e && (console.warn("THREE.Triangle: .closestPointToPoint() target is now required"), 
            e = new h());
            var n = this.a, r = this.b, i = this.c, o = (Wr.subVectors(r, n), Yr.subVectors(i, n), 
            Zr.subVectors(t, n), Wr.dot(Zr)), a = Yr.dot(Zr);
            if (o <= 0 && a <= 0) return e.copy(n);
            qr.subVectors(t, r);
            var s = Wr.dot(qr), l = Yr.dot(qr);
            if (0 <= s && l <= s) return e.copy(r);
            var u = o * l - s * a;
            if (u <= 0 && 0 <= o && s <= 0) return c = o / (o - s), e.copy(n).addScaledVector(Wr, c);
            Kr.subVectors(t, i);
            t = Wr.dot(Kr);
            var c, f, p = Yr.dot(Kr);
            return 0 <= p && t <= p ? e.copy(i) : (o = t * a - o * p) <= 0 && 0 <= a && p <= 0 ? (f = a / (a - p), 
            e.copy(n).addScaledVector(Yr, f)) : (a = s * p - t * l) <= 0 && 0 <= l - s && 0 <= t - p ? (Xr.subVectors(i, r), 
            f = (l - s) / (l - s + (t - p)), e.copy(r).addScaledVector(Xr, f)) : (c = o * (i = 1 / (a + o + u)), 
            f = u * i, e.copy(n).addScaledVector(Wr, c).addScaledVector(Yr, f));
        },
        equals: function(t) {
            return t.a.equals(this.a) && t.b.equals(this.b) && t.c.equals(this.c);
        }
    }), ((Qr.prototype = Object.create(Cr.prototype)).constructor = Qr).prototype.isMeshBasicMaterial = !0, 
    Qr.prototype.copy = function(t) {
        return Cr.prototype.copy.call(this, t), this.color.copy(t.color), this.map = t.map, 
        this.lightMap = t.lightMap, this.lightMapIntensity = t.lightMapIntensity, this.aoMap = t.aoMap, 
        this.aoMapIntensity = t.aoMapIntensity, this.specularMap = t.specularMap, this.alphaMap = t.alphaMap, 
        this.envMap = t.envMap, this.combine = t.combine, this.reflectivity = t.reflectivity, 
        this.refractionRatio = t.refractionRatio, this.wireframe = t.wireframe, this.wireframeLinewidth = t.wireframeLinewidth, 
        this.wireframeLinecap = t.wireframeLinecap, this.wireframeLinejoin = t.wireframeLinejoin, 
        this.skinning = t.skinning, this.morphTargets = t.morphTargets, this;
    };
    var $r = new b(), ti = new An(), ei = new ot(), ni = new h(), ri = new h(), ii = new h(), oi = new h(), ai = new h(), si = new h(), li = new h(), ui = new h(), ci = new h(), hi = new Mt(), fi = new Mt(), pi = new Mt(), di = new h(), yi = new h();
    function mi(t, e) {
        B.call(this), this.type = "Mesh", this.geometry = void 0 !== t ? t : new Mr(), this.material = void 0 !== e ? e : new Qr(), 
        this.updateMorphTargets();
    }
    function vi(t, e, n, r, i, o, a, s) {
        return null === (r = 1 === e.side ? r.intersectTriangle(a, o, i, !0, s) : r.intersectTriangle(i, o, a, 2 !== e.side, s)) ? null : (yi.copy(s), 
        yi.applyMatrix4(t.matrixWorld), (i = n.ray.origin.distanceTo(yi)) < n.near || i > n.far ? null : {
            distance: i,
            point: yi.clone(),
            object: t
        });
    }
    function gi(t, e, n, r, i, o, a, s, l, u, c, h) {
        ni.fromBufferAttribute(i, u), ri.fromBufferAttribute(i, c), ii.fromBufferAttribute(i, h);
        var f = t.morphTargetInfluences;
        if (e.morphTargets && o && f) {
            li.set(0, 0, 0), ui.set(0, 0, 0), ci.set(0, 0, 0);
            for (var p = 0, d = o.length; p < d; p++) {
                var y = f[p], m = o[p];
                0 !== y && (oi.fromBufferAttribute(m, u), ai.fromBufferAttribute(m, c), si.fromBufferAttribute(m, h), 
                a ? (li.addScaledVector(oi, y), ui.addScaledVector(ai, y), ci.addScaledVector(si, y)) : (li.addScaledVector(oi.sub(ni), y), 
                ui.addScaledVector(ai.sub(ri), y), ci.addScaledVector(si.sub(ii), y)));
            }
            ni.add(li), ri.add(ui), ii.add(ci);
        }
        return (i = vi(t, e, n, r, ni, ri, ii, di)) && (s && (hi.fromBufferAttribute(s, u), 
        fi.fromBufferAttribute(s, c), pi.fromBufferAttribute(s, h), i.uv = Jr.getUV(di, ni, ri, ii, hi, fi, pi, new Mt())), 
        l && (hi.fromBufferAttribute(l, u), fi.fromBufferAttribute(l, c), pi.fromBufferAttribute(l, h), 
        i.uv2 = Jr.getUV(di, ni, ri, ii, hi, fi, pi, new Mt())), t = new tr(u, c, h), Jr.getNormal(ni, ri, ii, t.normal), 
        i.face = t), i;
    }
    mi.prototype = Object.assign(Object.create(B.prototype), {
        constructor: mi,
        isMesh: !0,
        copy: function(t) {
            return B.prototype.copy.call(this, t), void 0 !== t.morphTargetInfluences && (this.morphTargetInfluences = t.morphTargetInfluences.slice()), 
            void 0 !== t.morphTargetDictionary && (this.morphTargetDictionary = Object.assign({}, t.morphTargetDictionary)), 
            this;
        },
        updateMorphTargets: function() {
            var t, e, n, r = this.geometry;
            if (r.isBufferGeometry) {
                var i = r.morphAttributes, o = Object.keys(i);
                if (0 < o.length) {
                    var a = i[o[0]];
                    if (void 0 !== a) for (this.morphTargetInfluences = [], this.morphTargetDictionary = {}, 
                    t = 0, e = a.length; t < e; t++) n = a[t].name || String(t), this.morphTargetInfluences.push(0), 
                    this.morphTargetDictionary[n] = t;
                }
            } else void 0 !== (i = r.morphTargets) && 0 < i.length && console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");
        },
        raycast: function(t, e) {
            var n = this.geometry, r = this.material, i = this.matrixWorld;
            if (void 0 !== r && (null === n.boundingSphere && n.computeBoundingSphere(), ei.copy(n.boundingSphere), 
            ei.applyMatrix4(i), !1 !== t.ray.intersectsSphere(ei) && ($r.getInverse(i), ti.copy(t.ray).applyMatrix4($r), 
            null === n.boundingBox || !1 !== ti.intersectsBox(n.boundingBox)))) if (n.isBufferGeometry) {
                var o, a, s, l, u, c, h, f, p, d = n.index, y = n.attributes.position, m = n.morphAttributes.position, v = n.morphTargetsRelative, g = n.attributes.uv, b = n.attributes.uv2, x = n.groups, w = n.drawRange;
                if (null !== d) if (Array.isArray(r)) for (l = 0, c = x.length; l < c; l++) for (p = r[(f = x[l]).materialIndex], 
                u = Math.max(f.start, w.start), h = Math.min(f.start + f.count, w.start + w.count); u < h; u += 3) o = d.getX(u), 
                a = d.getX(u + 1), s = d.getX(u + 2), (R = gi(this, p, t, ti, y, m, v, g, b, o, a, s)) && (R.faceIndex = Math.floor(u / 3), 
                R.face.materialIndex = f.materialIndex, e.push(R)); else for (l = Math.max(0, w.start), 
                c = Math.min(d.count, w.start + w.count); l < c; l += 3) o = d.getX(l), a = d.getX(l + 1), 
                s = d.getX(l + 2), (R = gi(this, r, t, ti, y, m, v, g, b, o, a, s)) && (R.faceIndex = Math.floor(l / 3), 
                e.push(R)); else if (void 0 !== y) if (Array.isArray(r)) for (l = 0, c = x.length; l < c; l++) for (p = r[(f = x[l]).materialIndex], 
                u = Math.max(f.start, w.start), h = Math.min(f.start + f.count, w.start + w.count); u < h; u += 3) (R = gi(this, p, t, ti, y, m, v, g, b, o = u, a = u + 1, s = u + 2)) && (R.faceIndex = Math.floor(u / 3), 
                R.face.materialIndex = f.materialIndex, e.push(R)); else for (l = Math.max(0, w.start), 
                c = Math.min(y.count, w.start + w.count); l < c; l += 3) (R = gi(this, r, t, ti, y, m, v, g, b, o = l, a = l + 1, s = l + 2)) && (R.faceIndex = Math.floor(l / 3), 
                e.push(R));
            } else if (n.isGeometry) {
                var S, _ = Array.isArray(r), E = n.vertices, O = n.faces;
                0 < (i = n.faceVertexUvs[0]).length && (S = i);
                for (var M = 0, T = O.length; M < T; M++) {
                    var L, A, P, R, j = O[M], I = _ ? r[j.materialIndex] : r;
                    void 0 !== I && (L = E[j.a], A = E[j.b], P = E[j.c], R = vi(this, I, t, ti, L, A, P, di)) && (S && S[M] && (I = S[M], 
                    hi.copy(I[0]), fi.copy(I[1]), pi.copy(I[2]), R.uv = Jr.getUV(di, L, A, P, hi, fi, pi, new Mt())), 
                    R.face = j, R.faceIndex = M, e.push(R));
                }
            }
        },
        clone: function() {
            return new this.constructor(this.geometry, this.material).copy(this);
        }
    });
    var bi = {
        alphamap_fragment: "\n#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n",
        alphamap_pars_fragment: "\n#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n",
        alphatest_fragment: "\n#ifdef ALPHATEST\n\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n\n#endif\n",
        aomap_fragment: "\n#ifdef USE_AOMAP\n\n\t// reads channel R, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\n\t#endif\n\n#endif\n",
        aomap_pars_fragment: "\n#ifdef USE_AOMAP\n\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n\n#endif\n",
        begin_vertex: "\nvec3 transformed = vec3( position );\n",
        beginnormal_vertex: "\nvec3 objectNormal = vec3( normal );\n\n#ifdef USE_TANGENT\n\n\tvec3 objectTangent = vec3( tangent.xyz );\n\n#endif\n",
        bsdfs: '\n\n// Analytical approximation of the DFG LUT, one half of the\n// split-sum approximation used in indirect specular lighting.\n// via \'environmentBRDF\' from "Physically Based Shading on Mobile"\n// https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile\nvec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\n\tvec4 r = roughness * c0 + c1;\n\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n\n}\n\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\n\t// based upon Frostbite 3 Moving to Physically-based Rendering\n\t// page 32, equation 26: E[window1]\n\t// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t// this is intended to be used on spot and point lights who are represented as luminous intensity\n\t// but who must be converted to luminous irradiance for surface lighting calculation\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\n\tif( cutoffDistance > 0.0 ) {\n\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\n\t}\n\n\treturn distanceFalloff;\n\n#else\n\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\n\t}\n\n\treturn 1.0;\n\n#endif\n\n}\n\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\n\treturn RECIPROCAL_PI * diffuseColor;\n\n} // validated\n\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\n\t// Original approximation by Christophe Schlick \'94\n\t// float fresnel = pow( 1.0 - dotLH, 5.0 );\n\n\t// Optimized variant (presented by Epic at SIGGRAPH \'13)\n\t// https://cdn2.unrealengine.com/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n\n} // validated\n\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\n\t// See F_Schlick\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\n\treturn Fr * fresnel + F0;\n\n}\n\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (34)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is "roughness squared" in Disneys reparameterization\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\n\t// geometry term (normalized) = G(l)G(v) / 4(nl)(nv)\n\t// also see #12151\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\n\treturn 1.0 / ( gl * gv );\n\n} // validated\n\n// Moving Frostbite to Physically Based Rendering 3.0 - page 12, listing 2\n// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\n\tfloat a2 = pow2( alpha );\n\n\t// dotNL and dotNV are explicitly swapped. This is not a mistake.\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\n\treturn 0.5 / max( gv + gl, EPSILON );\n\n}\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (33)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is "roughness squared" in Disneys reparameterization\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0; // avoid alpha = 0 with dotNH = 1\n\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n\n}\n\n// GGX Distribution, Schlick Fresnel, GGX-Smith Visibility\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\n\tfloat alpha = pow2( roughness ); // UE4\'s roughness\n\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\n\tfloat D = D_GGX( alpha, dotNH );\n\n\treturn F * ( G * D );\n\n} // validated\n\n// Rect Area Light\n\n// Real-Time Polygonal-Light Shading with Linearly Transformed Cosines\n// by Eric Heitz, Jonathan Dupuy, Stephen Hill and David Neubelt\n// code: https://github.com/selfshadow/ltc_code/\n\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\n\tfloat dotNV = saturate( dot( N, V ) );\n\n\t// texture parameterized by sqrt( GGX alpha ) and sqrt( 1 - cos( theta ) )\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\n\treturn uv;\n\n}\n\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\n\t// Real-Time Area Lighting: a Journey from Research to Production (p.102)\n\t// An approximation of the form factor of a horizon-clipped rectangle.\n\n\tfloat l = length( f );\n\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n\n}\n\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\n\tfloat x = dot( v1, v2 );\n\n\tfloat y = abs( x );\n\n\t// rational polynomial approximation to theta / sin( theta ) / 2PI\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\n\treturn cross( v1, v2 ) * theta_sintheta;\n\n}\n\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\n\t// bail if point is on back side of plane of light\n\t// assumes ccw winding order of light vertices\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\n\t// construct orthonormal basis around N\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 ); // negated from paper; possibly due to a different handedness of world coordinate system\n\n\t// compute transform\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\n\t// transform rect\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\n\t// project rect onto sphere\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\n\t// calculate vector form factor\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\n\t// adjust for horizon clipping\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\n/*\n\t// alternate method of adjusting for horizon clipping (see referece)\n\t// refactoring required\n\tfloat len = length( vectorFormFactor );\n\tfloat z = vectorFormFactor.z / len;\n\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\n\t// tabulated horizon-clipped sphere, apparently...\n\tvec2 uv = vec2( z * 0.5 + 0.5, len );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\n\tfloat scale = texture2D( ltc_2, uv ).w;\n\n\tfloat result = len * scale;\n*/\n\n\treturn vec3( result );\n\n}\n\n// End Rect Area Light\n\n// ref: https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\n\treturn specularColor * brdf.x + brdf.y;\n\n} // validated\n\n// Fdez-Agera\'s "Multiple-Scattering Microfacet Model for Real-Time Image Based Lighting"\n// Approximates multiscattering in order to preserve energy.\n// http://www.jcgt.org/published/0008/01/03/\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619; // 1/21\n\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n\n}\n\nfloat G_BlinnPhong_Implicit( /* const in float dotNL, const in float dotNV */ ) {\n\n\t// geometry term is (n dot l)(n dot v) / 4(n dot l)(n dot v)\n\treturn 0.25;\n\n}\n\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n\n}\n\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\n\t//float dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\t//float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\n\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\n\treturn F * ( G * D );\n\n} // validated\n\n// source: http://simonstechblog.blogspot.ca/2011/12/microfacet-brdf.html\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\n\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n\n#if defined( USE_SHEEN )\n\n// https://github.com/google/filament/blob/master/shaders/src/brdf.fs#L94\nfloat D_Charlie(float roughness, float NoH) {\n\t// Estevez and Kulla 2017, "Production Friendly Microfacet Sheen BRDF"\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125); // 2^(-14/2), so sin2h^2 > 0 in fp16\n\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\n\n// https://github.com/google/filament/blob/master/shaders/src/brdf.fs#L136\nfloat V_Neubelt(float NoV, float NoL) {\n\t// Neubelt and Pettineo 2013, "Crafting a Next-gen Material Pipeline for The Order: 1886"\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\n\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n\n}\n\n#endif\n',
        bumpmap_pars_fragment: "\n#ifdef USE_BUMPMAP\n\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\n\t// Bump Mapping Unparametrized Surfaces on the GPU by Morten S. Mikkelsen\n\t// http://api.unrealengine.com/attachments/Engine/Rendering/LightingAndShadows/BumpMappingWithoutTangentSpace/mm_sfgrad_bump.pdf\n\n\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n\tvec2 dHdxy_fwd() {\n\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n\t\treturn vec2( dBx, dBy );\n\n\t}\n\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\t\t// normalized\n\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t}\n\n#endif\n",
        clipping_planes_fragment: "\n#if NUM_CLIPPING_PLANES > 0\n\n\tvec4 plane;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\n\t\tbool clipped = true;\n\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\n\t\t}\n\t\t#pragma unroll_loop_end\n\n\t\tif ( clipped ) discard;\n\n\t#endif\n\n#endif\n",
        clipping_planes_pars_fragment: "\n#if NUM_CLIPPING_PLANES > 0\n\n\tvarying vec3 vClipPosition;\n\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n\n#endif\n",
        clipping_planes_pars_vertex: "\n#if NUM_CLIPPING_PLANES > 0\n\n\tvarying vec3 vClipPosition;\n\n#endif\n",
        clipping_planes_vertex: "\n#if NUM_CLIPPING_PLANES > 0\n\n\tvClipPosition = - mvPosition.xyz;\n\n#endif\n",
        color_fragment: "\n#ifdef USE_COLOR\n\n\tdiffuseColor.rgb *= vColor;\n\n#endif\n",
        color_pars_fragment: "\n#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n",
        color_pars_vertex: "\n#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n",
        color_vertex: "\n#ifdef USE_COLOR\n\n\tvColor.xyz = color.xyz;\n\n#endif\n",
        common: "\n#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n\n#ifndef saturate\n// <tonemapping_pars_fragment> may have defined saturate() already\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\n\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\n// expects values in the range of [0,1]x[0,1], returns values in the [0,1] range.\n// do not collapse into a single function per: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\n\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\n\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\n\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n}\n\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t// dir can be either a direction vector or a normal vector\n\t// upper-left 3x3 of matrix is assumed to be orthogonal\n\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n\n}\n\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\n\treturn - distance * planeNormal + point;\n\n}\n\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n\n}\n\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n\n}\n\nmat3 transposeMat3( const in mat3 m ) {\n\n\tmat3 tmp;\n\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\n\treturn tmp;\n\n}\n\n// https://en.wikipedia.org/wiki/Relative_luminance\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\n\treturn dot( weights, color.rgb );\n\n}\n\nbool isPerspectiveMatrix( mat4 m ) {\n\n  return m[ 2 ][ 3 ] == - 1.0;\n\n}\n",
        cube_uv_reflection_fragment: "\n#ifdef ENVMAP_TYPE_CUBE_UV\n\n#define cubeUV_maxMipLevel 8.0\n#define cubeUV_minMipLevel 4.0\n#define cubeUV_maxTileSize 256.0\n#define cubeUV_minTileSize 16.0\n\n// These shader functions convert between the UV coordinates of a single face of\n// a cubemap, the 0-5 integer index of a cube face, and the direction vector for\n// sampling a textureCube (not generally normalized).\n\nfloat getFace(vec3 direction) {\n    vec3 absDirection = abs(direction);\n    float face = -1.0;\n    if (absDirection.x > absDirection.z) {\n      if (absDirection.x > absDirection.y)\n        face = direction.x > 0.0 ? 0.0 : 3.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    } else {\n      if (absDirection.z > absDirection.y)\n        face = direction.z > 0.0 ? 2.0 : 5.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    }\n    return face;\n}\n\nvec2 getUV(vec3 direction, float face) {\n    vec2 uv;\n    if (face == 0.0) {\n      uv = vec2(-direction.z, direction.y) / abs(direction.x);\n    } else if (face == 1.0) {\n      uv = vec2(direction.x, -direction.z) / abs(direction.y);\n    } else if (face == 2.0) {\n      uv = direction.xy / abs(direction.z);\n    } else if (face == 3.0) {\n      uv = vec2(direction.z, direction.y) / abs(direction.x);\n    } else if (face == 4.0) {\n      uv = direction.xz / abs(direction.y);\n    } else {\n      uv = vec2(-direction.x, direction.y) / abs(direction.z);\n    }\n    return 0.5 * (uv + 1.0);\n}\n\nvec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n  float face = getFace(direction);\n  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n  mipInt = max(mipInt, cubeUV_minMipLevel);\n  float faceSize = exp2(mipInt);\n\n  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n\n  vec2 uv = getUV(direction, face) * (faceSize - 1.0);\n  vec2 f = fract(uv);\n  uv += 0.5 - f;\n  if (face > 2.0) {\n    uv.y += faceSize;\n    face -= 3.0;\n  }\n  uv.x += face * faceSize;\n  if(mipInt < cubeUV_maxMipLevel){\n    uv.y += 2.0 * cubeUV_maxTileSize;\n  }\n  uv.y += filterInt * 2.0 * cubeUV_minTileSize;\n  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n  uv *= texelSize;\n\n  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x += texelSize;\n  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.y += texelSize;\n  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x -= texelSize;\n  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  vec3 tm = mix(tl, tr, f.x);\n  vec3 bm = mix(bl, br, f.x);\n  return mix(tm, bm, f.y);\n}\n\n// These defines must match with PMREMGenerator\n\n#define r0 1.0\n#define v0 0.339\n#define m0 -2.0\n#define r1 0.8\n#define v1 0.276\n#define m1 -1.0\n#define r4 0.4\n#define v4 0.046\n#define m4 2.0\n#define r5 0.305\n#define v5 0.016\n#define m5 3.0\n#define r6 0.21\n#define v6 0.0038\n#define m6 4.0\n\nfloat roughnessToMip(float roughness) {\n  float mip = 0.0;\n  if (roughness >= r1) {\n    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n  } else if (roughness >= r4) {\n    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n  } else if (roughness >= r5) {\n    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n  } else if (roughness >= r6) {\n    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n  } else {\n    mip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25\n  }\n  return mip;\n}\n\nvec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {\n  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);\n  float mipF = fract(mip);\n  float mipInt = floor(mip);\n\n  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);\n  if (mipF == 0.0) {\n    return vec4(color0, 1.0);\n  } else {\n    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);\n    return vec4(mix(color0, color1, mipF), 1.0);\n  }\n}\n#endif\n",
        defaultnormal_vertex: "\nvec3 transformedNormal = objectNormal;\n\n#ifdef USE_INSTANCING\n\n\t// this is in lieu of a per-instance normal-matrix\n\t// shear transforms in the instance matrix are not supported\n\n\tmat3 m = mat3( instanceMatrix );\n\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\n\ttransformedNormal = m * transformedNormal;\n\n#endif\n\ntransformedNormal = normalMatrix * transformedNormal;\n\n#ifdef FLIP_SIDED\n\n\ttransformedNormal = - transformedNormal;\n\n#endif\n\n#ifdef USE_TANGENT\n\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\n\t#ifdef FLIP_SIDED\n\n\t\ttransformedTangent = - transformedTangent;\n\n\t#endif\n\n#endif\n",
        displacementmap_pars_vertex: "\n#ifdef USE_DISPLACEMENTMAP\n\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n\n#endif\n",
        displacementmap_vertex: "\n#ifdef USE_DISPLACEMENTMAP\n\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n\n#endif\n",
        emissivemap_fragment: "\n#ifdef USE_EMISSIVEMAP\n\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n\n#endif\n",
        emissivemap_pars_fragment: "\n#ifdef USE_EMISSIVEMAP\n\n\tuniform sampler2D emissiveMap;\n\n#endif\n",
        encodings_fragment: "\ngl_FragColor = linearToOutputTexel( gl_FragColor );\n",
        encodings_pars_fragment: "\n// For a discussion of what this is, please read this: http://lousodrome.net/blog/light/2013/05/26/gamma-correct-and-hdr-rendering-in-a-32-bits-buffer/\n\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\n\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\n\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\n\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\n\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\n\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\n\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n//  return vec4( value.brg, ( 3.0 + 128.0 ) / 256.0 );\n}\n\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\n\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\n\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\n\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\t// NOTE: The implementation with min causes the shader to not compile on\n\t// a common Alcatel A502DL in Chrome 78/Android 8.1. Some research suggests \n\t// that the chipset is Mediatek MT6739 w/ IMG PowerVR GE8100 GPU.\n\t// D = min( floor( D ) / 255.0, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\n\n// LogLuv reference: http://graphicrants.blogspot.ca/2009/04/rgbm-color-encoding.html\n\n// M matrix, for encoding\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\n\n// Inverse M matrix, for decoding\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}\n",
        envmap_fragment: "\n#ifdef USE_ENVMAP\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvec3 cameraToFrag;\n\t\t\n\t\tif ( isOrthographic ) {\n\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\n\t\t}  else {\n\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\n\t\t}\n\n\t\t// Transforming Normal Vectors with the Inverse Transformation\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#else\n\n\t\tvec3 reflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\n\t\tvec2 sampleUV;\n\n\t\treflectVec = normalize( reflectVec );\n\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\n\t\treflectVec = normalize( reflectVec );\n\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\n\t#else\n\n\t\tvec4 envColor = vec4( 0.0 );\n\n\t#endif\n\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\n\t\tenvColor = envMapTexelToLinear( envColor );\n\n\t#endif\n\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n\t#endif\n\n#endif\n",
        envmap_common_pars_fragment: "\n#ifdef USE_ENVMAP\n\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif\n",
        envmap_pars_fragment: "\n#ifdef USE_ENVMAP\n\n\tuniform float reflectivity;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\t#define ENV_WORLDPOS\n\n\t#endif\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n\n#endif\n",
        envmap_pars_vertex: "\n#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\n\t\t#define ENV_WORLDPOS\n\n\t#endif\n\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\n\t#endif\n\n#endif\n",
        envmap_physical_pars_fragment: "\n#if defined( USE_ENVMAP )\n\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\n\tvec3 getLightProbeIndirectIrradiance( /*const in SpecularLightProbe specularLightProbe,*/ const in GeometricContext geometry, const in int maxMIPLevel ) {\n\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\n\t\t\t// TODO: replace with properly filtered cubemaps and access the irradiance LOD level, be it the last LOD level\n\t\t\t// of a specular cubemap, or just the default level of a specially created irradiance cubemap.\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\n\t\t\t#else\n\n\t\t\t\t// force the bias high to get the last LOD level as it is the most blurred.\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\n\t\t#else\n\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\n\t\t#endif\n\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\n\t}\n\n\t// Trowbridge-Reitz distribution to Mip level, following the logic of http://casual-effects.blogspot.ca/2011/08/plausible-environment-lighting-in-two.html\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\n\t\t// clamp to allowable LOD ranges.\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\n\t}\n\n\tvec3 getLightProbeIndirectRadiance( /*const in SpecularLightProbe specularLightProbe,*/ const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\n\t\t  // Mixing the reflection with the normal is more accurate and keeps rough objects from gathering light from behind their tangent plane.\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\n\t\t#else\n\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\n\t\t#endif\n\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#endif\n\n\t\treturn envMapColor.rgb * envMapIntensity;\n\n\t}\n\n#endif\n",
        envmap_vertex: "\n#ifdef USE_ENVMAP\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvWorldPosition = worldPosition.xyz;\n\n\t#else\n\n\t\tvec3 cameraToVertex;\n\n\t\tif ( isOrthographic ) { \n\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\n\t\t} else {\n\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\t\t}\n\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t\t#else\n\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#endif\n\n#endif\n",
        fog_vertex: "\n#ifdef USE_FOG\n\n\tfogDepth = -mvPosition.z;\n\n#endif\n",
        fog_pars_vertex: "\n#ifdef USE_FOG\n\n\tvarying float fogDepth;\n\n#endif\n",
        fog_fragment: "\n#ifdef USE_FOG\n\n\t#ifdef FOG_EXP2\n\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\n\t#endif\n\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n\n#endif\n",
        fog_pars_fragment: "\n#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\n\t#endif\n\n#endif\n",
        gradientmap_pars_fragment: "\n\n#ifdef USE_GRADIENTMAP\n\n\tuniform sampler2D gradientMap;\n\n#endif\n\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\n\t// dotNL will be from -1.0 to 1.0\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\n\t#ifdef USE_GRADIENTMAP\n\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\n\t#else\n\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\n\t#endif\n\n}\n\n",
        lightmap_fragment: "\n#ifdef USE_LIGHTMAP\n\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity; // factor of PI should not be present; included here to prevent breakage\n\n#endif\n",
        lightmap_pars_fragment: "\n#ifdef USE_LIGHTMAP\n\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n\n#endif\n",
        lights_lambert_vertex: "\nvec3 diffuse = vec3( 1.0 );\n\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\n\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\n\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\n\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n\n#if NUM_POINT_LIGHTS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if NUM_SPOT_LIGHTS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n/*\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\n\t\t// TODO (abelnation): implement\n\n\t}\n\n#endif\n*/\n\n#if NUM_DIR_LIGHTS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if NUM_HEMI_LIGHTS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\n\t\t#endif\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n",
        lights_pars_begin: "\nuniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\n\n// get the irradiance (radiance convolved with cosine lobe) at the point 'normal' on the unit sphere\n// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\n\t// normal is assumed to have unit length\n\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\n\t// band 0\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\n\t// band 1\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\n\t// band 2\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\n\treturn result;\n\n}\n\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\n\treturn irradiance;\n\n}\n\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\n\tvec3 irradiance = ambientLightColor;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI;\n\n\t#endif\n\n\treturn irradiance;\n\n}\n\n#if NUM_DIR_LIGHTS > 0\n\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\n\t}\n\n#endif\n\n\n#if NUM_POINT_LIGHTS > 0\n\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\n\t}\n\n#endif\n\n\n#if NUM_SPOT_LIGHTS > 0\n\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\n\t\tif ( angleCos > spotLight.coneCos ) {\n\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\n\t\t} else {\n\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\n\t\t}\n\t}\n\n#endif\n\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\n\t// Pre-computed values of LinearTransformedCosine approximation of BRDF\n\t// BRDF approximation Texture is 64x64\n\tuniform sampler2D ltc_1; // RGBA Float\n\tuniform sampler2D ltc_2; // RGBA Float\n\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n\n#endif\n\n\n#if NUM_HEMI_LIGHTS > 0\n\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tirradiance *= PI;\n\n\t\t#endif\n\n\t\treturn irradiance;\n\n\t}\n\n#endif\n",
        lights_toon_fragment: "\nToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",
        lights_toon_pars_fragment: "\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n\nstruct ToonMaterial {\n\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n\n};\n\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n\n}\n\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n\n#define Material_LightProbeLOD( material )\t(0)\n",
        lights_phong_fragment: "\nBlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",
        lights_phong_pars_fragment: "\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n\nstruct BlinnPhongMaterial {\n\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n\n};\n\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n\n}\n\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n\n#define Material_LightProbeLOD( material )\t(0)\n",
        lights_physical_fragment: "\nPhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\n\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\n\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.\nmaterial.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n\n#ifdef REFLECTIVITY\n\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\n#else\n\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n\n#endif\n\n#ifdef CLEARCOAT\n\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\n\t#ifdef USE_CLEARCOATMAP\n\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\n\t#endif\n\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\n\t#endif\n\n\tmaterial.clearcoat = saturate( material.clearcoat ); // Burley clearcoat model\n\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n\n#endif\n\n#ifdef USE_SHEEN\n\n\tmaterial.sheenColor = sheen;\n\n#endif\n",
        lights_physical_pars_fragment: "\nstruct PhysicalMaterial {\n\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n\n};\n\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\n\n// Clear coat directional hemishperical reflectance (this approximation should be improved)\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n\n}\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight; // counterclockwise; light shines in local neg z direction\n\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\n\t\t// LTC Fresnel Approximation by Stephen Hill\n\t\t// http://blog.selfshadow.com/publications/s2016-advances/s2016_ltc_fresnel.pdf\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\n\t}\n\n#endif\n\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\n\tvec3 irradiance = dotNL * directLight.color;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\t#ifdef CLEARCOAT\n\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tccIrradiance *= PI; // punctual light\n\n\t\t#endif\n\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\n\t#else\n\n\t\tfloat clearcoatDHR = 0.0;\n\n\t#endif\n\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\n\t#ifdef CLEARCOAT\n\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\n\t#else\n\n\t\tfloat clearcoatDHR = 0.0;\n\n\t#endif\n\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\n\t// Both indirect specular and indirect diffuse light accumulate here\n\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n\n// ref: https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n\n}\n",
        lights_fragment_begin: "\n/**\n * This is a template that can be used to light a material, it uses pluggable\n * RenderEquations (RE)for specific lighting scenarios.\n *\n * Instructions for use:\n * - Ensure that both RE_Direct, RE_IndirectDiffuse and RE_IndirectSpecular are defined\n * - If you have defined an RE_IndirectSpecular, you need to also provide a Material_LightProbeLOD. <---- ???\n * - Create a material parameter that is to be passed as the third parameter to your lighting functions.\n *\n * TODO:\n * - Add area light support.\n * - Add sphere light support.\n * - Add diffuse light probe (irradiance cubemap) support.\n */\n\nGeometricContext geometry;\n\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n\n#ifdef CLEARCOAT\n\n\tgeometry.clearcoatNormal = clearcoatNormal;\n\n#endif\n\nIncidentLight directLight;\n\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tpointLight = pointLights[ i ];\n\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tspotLight = spotLights[ i ];\n\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tdirectionalLight = directionalLights[ i ];\n\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\n\tRectAreaLight rectAreaLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if defined( RE_IndirectDiffuse )\n\n\tvec3 iblIrradiance = vec3( 0.0 );\n\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\n\t\t}\n\t\t#pragma unroll_loop_end\n\n\t#endif\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n\n#endif\n",
        lights_fragment_maps: "\n#if defined( RE_IndirectDiffuse )\n\n\t#ifdef USE_LIGHTMAP\n\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tlightMapIrradiance *= PI; // factor of PI should not be present; included here to prevent breakage\n\n\t\t#endif\n\n\t\tirradiance += lightMapIrradiance;\n\n\t#endif\n\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( /*lightProbe,*/ geometry, maxMipLevel );\n\n\t#endif\n\n#endif\n\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\n\tradiance += getLightProbeIndirectRadiance( /*specularLightProbe,*/ geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\n\t#ifdef CLEARCOAT\n\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( /*specularLightProbe,*/ geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\n\t#endif\n\n#endif\n",
        lights_fragment_end: "\n#if defined( RE_IndirectDiffuse )\n\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n\n#endif\n",
        logdepthbuf_fragment: "\n#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\n\t// Doing a strict comparison with == 1.0 can cause noise artifacts\n\t// on some platforms. See issue #17623.\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n\n#endif\n",
        logdepthbuf_pars_fragment: "\n#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n\n#endif\n",
        logdepthbuf_pars_vertex: "\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\n\t#else\n\n\t\tuniform float logDepthBufFC;\n\n\t#endif\n\n#endif\n",
        logdepthbuf_vertex: "\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\n\t#else\n\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\n\t\t\tgl_Position.z *= gl_Position.w;\n\n\t\t}\n\n\t#endif\n\n#endif\n",
        map_fragment: "\n#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n\n#endif\n",
        map_fragment_1: "\n#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\ttexelColor = mapTexelToLinear( texelColor );\n\t\n\tif(mapMixColor){\n\t    diffuseColor = texelColor*texelColor.a + diffuseColor*(1.0-texelColor.a);\n\t}else {\n\t    diffuseColor *= texelColor;\n\t}\n\n#endif\n",
        map_pars_fragment: "\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif\n",
        map_particle_fragment: "\n#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\n#endif\n\n#ifdef USE_MAP\n\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n\n#endif\n\n#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n\n#endif\n",
        map_particle_pars_fragment: "\n#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\n\tuniform mat3 uvTransform;\n\n#endif\n\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif\n\n#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n",
        metalnessmap_fragment: "\nfloat metalnessFactor = metalness;\n\n#ifdef USE_METALNESSMAP\n\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\n\t// reads channel B, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tmetalnessFactor *= texelMetalness.b;\n\n#endif\n",
        metalnessmap_pars_fragment: "\n#ifdef USE_METALNESSMAP\n\n\tuniform sampler2D metalnessMap;\n\n#endif\n",
        morphnormal_vertex: "\n#ifdef USE_MORPHNORMALS\n\n\t// morphTargetBaseInfluence is set based on BufferGeometry.morphTargetsRelative value:\n\t// When morphTargetsRelative is false, this is set to 1 - sum(influences); this results in normal = sum((target - base) * influence)\n\t// When morphTargetsRelative is true, this is set to 1; as a result, all morph targets are simply added to the base after weighting\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\n#endif\n",
        morphtarget_pars_vertex: "\n#ifdef USE_MORPHTARGETS\n\n\tuniform float morphTargetBaseInfluence;\n\n\t#ifndef USE_MORPHNORMALS\n\n\tuniform float morphTargetInfluences[ 8 ];\n\n\t#else\n\n\tuniform float morphTargetInfluences[ 4 ];\n\n\t#endif\n\n#endif\n",
        morphtarget_vertex: "\n#ifdef USE_MORPHTARGETS\n\n\t// morphTargetBaseInfluence is set based on BufferGeometry.morphTargetsRelative value:\n\t// When morphTargetsRelative is false, this is set to 1 - sum(influences); this results in position = sum((target - base) * influence)\n\t// When morphTargetsRelative is true, this is set to 1; as a result, all morph targets are simply added to the base after weighting\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\n\t#ifndef USE_MORPHNORMALS\n\n\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\n\t#endif\n\n#endif\n",
        normal_fragment_begin: "\n#ifdef FLAT_SHADED\n\n\t// Workaround for Adreno/Nexus5 not able able to do dFdx( vViewPosition ) ...\n\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n\n#else\n\n\tvec3 normal = normalize( vNormal );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t#endif\n\n\t#ifdef USE_TANGENT\n\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\t#endif\n\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\n\t\t#endif\n\n\t#endif\n\n#endif\n\n// non perturbed normal for clearcoat among others\n\nvec3 geometryNormal = normal;\n\n",
        normal_fragment_maps: "\n\n#ifdef OBJECTSPACE_NORMALMAP\n\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0; // overrides both flatShading and attribute normals\n\n\t#ifdef FLIP_SIDED\n\n\t\tnormal = - normal;\n\n\t#endif\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t#endif\n\n\tnormal = normalize( normalMatrix * normal );\n\n#elif defined( TANGENTSPACE_NORMALMAP )\n\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\n\t#ifdef USE_TANGENT\n\n\t\tnormal = normalize( vTBN * mapN );\n\n\t#else\n\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\n\t#endif\n\n#elif defined( USE_BUMPMAP )\n\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n",
        normalmap_pars_fragment: "\n#ifdef USE_NORMALMAP\n\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\n#endif\n\n#ifdef OBJECTSPACE_NORMALMAP\n\n\tuniform mat3 normalMatrix;\n\n#endif\n\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\n\t// Per-Pixel Tangent Space Normal Mapping\n\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s ); // we do not care about the magnitude\n\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\n\t\tmat3 tsn = mat3( S, T, N );\n\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\treturn normalize( tsn * mapN );\n\n\t}\n\n#endif\n",
        clearcoat_normal_fragment_begin: "\n#ifdef CLEARCOAT\n\n\tvec3 clearcoatNormal = geometryNormal;\n\n#endif\n",
        clearcoat_normal_fragment_maps: "\n#ifdef USE_CLEARCOAT_NORMALMAP\n\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\n\t#ifdef USE_TANGENT\n\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\n\t#else\n\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\n\t#endif\n\n#endif\n",
        clearcoat_pars_fragment: "\n\n#ifdef USE_CLEARCOATMAP\n\n\tuniform sampler2D clearcoatMap;\n\n#endif\n\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\n\tuniform sampler2D clearcoatRoughnessMap;\n\n#endif\n\n#ifdef USE_CLEARCOAT_NORMALMAP\n\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n\n#endif\n",
        packing: "\nvec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\n\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\n\nconst float PackUpscale = 256. / 255.; // fraction -> 0..1 (including 1)\nconst float UnpackDownscale = 255. / 256.; // 0..1 -> fraction (excluding 1)\n\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\n\nconst float ShiftRight8 = 1. / 256.;\n\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8; // tidy overflow\n\treturn r * PackUpscale;\n}\n\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\n\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\n\n// NOTE: viewZ/eyeZ is < 0 when in front of the camera per OpenGL conventions\n\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\n\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",
        premultiplied_alpha_fragment: "\n#ifdef PREMULTIPLIED_ALPHA\n\n\t// Get get normal blending with premultipled, use with CustomBlending, OneFactor, OneMinusSrcAlphaFactor, AddEquation.\n\tgl_FragColor.rgb *= gl_FragColor.a;\n\n#endif\n",
        project_vertex: "\nvec4 mvPosition = vec4( transformed, 1.0 );\n\n#ifdef USE_INSTANCING\n\n\tmvPosition = instanceMatrix * mvPosition;\n\n#endif\n\nmvPosition = modelViewMatrix * mvPosition;\n\ngl_Position = projectionMatrix * mvPosition;\n",
        dithering_fragment: "\n#ifdef DITHERING\n\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n\n#endif\n",
        dithering_pars_fragment: "\n#ifdef DITHERING\n\n\t// based on https://www.shadertoy.com/view/MslGR8\n\tvec3 dithering( vec3 color ) {\n\t\t//Calculate grid position\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\n\t\t//Shift the individual colors differently, thus making it even harder to see the dithering pattern\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\n\t\t//modify shift acording to grid position.\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\n\t\t//shift the color by dither_shift\n\t\treturn color + dither_shift_RGB;\n\t}\n\n#endif\n",
        roughnessmap_fragment: "\nfloat roughnessFactor = roughness;\n\n#ifdef USE_ROUGHNESSMAP\n\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\n\t// reads channel G, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\troughnessFactor *= texelRoughness.g;\n\n#endif\n",
        roughnessmap_pars_fragment: "\n#ifdef USE_ROUGHNESSMAP\n\n\tuniform sampler2D roughnessMap;\n\n#endif\n",
        shadowmap_pars_fragment: "\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): create uniforms for area light shadows\n\n\t#endif\n\t*/\n\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\n\t}\n\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\n\t}\n\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\n\t\tfloat occlusion = 1.0;\n\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\n\t\tfloat hard_shadow = step( compare , distribution.x ); // Hard Shadow\n\n\t\tif (hard_shadow != 1.0 ) {\n\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality\n\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed\n\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\n\t\t}\n\t\treturn occlusion;\n\n\t}\n\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\n\t\tfloat shadow = 1.0;\n\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\n\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\n\t\t// if ( all( something, something ) ) using this instead\n\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n\t\tbool frustumTest = all( frustumTestVec );\n\n\t\tif ( frustumTest ) {\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n\t\t#else // no percentage-closer filtering:\n\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n\t\t#endif\n\n\t\t}\n\n\t\treturn shadow;\n\n\t}\n\n\t// cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D\n\t// vector suitable for 2D texture mapping. This code uses the following layout for the\n\t// 2D texture:\n\t//\n\t// xzXZ\n\t//  y Y\n\t//\n\t// Y - Positive y direction\n\t// y - Negative y direction\n\t// X - Positive x direction\n\t// x - Negative x direction\n\t// Z - Positive z direction\n\t// z - Negative z direction\n\t//\n\t// Source and test bed:\n\t// https://gist.github.com/tschw/da10c43c467ce8afd0c4\n\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\n\t\t// Number of texels to avoid at the edge of each square\n\n\t\tvec3 absV = abs( v );\n\n\t\t// Intersect unit cube\n\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\n\t\t// Apply scale to avoid seams\n\n\t\t// two texels less per square (one texel will do for NEAREST)\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\n\t\t// Unwrap\n\n\t\t// space: -1 ... 1 range for each square\n\t\t//\n\t\t// #X##\t\tdim    := ( 4 , 2 )\n\t\t//  # #\t\tcenter := ( 1 , 1 )\n\n\t\tvec2 planar = v.xy;\n\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\n\t\tif ( absV.z >= almostOne ) {\n\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\n\t\t} else if ( absV.x >= almostOne ) {\n\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\n\t\t} else if ( absV.y >= almostOne ) {\n\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\n\t\t}\n\n\t\t// Transform to UV space\n\n\t\t// scale := 0.5 / dim\n\t\t// translate := ( center + 0.5 ) / dim\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\n\t}\n\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\n\t\t// for point lights, the uniform @vShadowCoord is re-purposed to hold\n\t\t// the vector from the light to the world-space position of the fragment.\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\n\t\t// dp = normalized distance from light to fragment position\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?\n\t\tdp += shadowBias;\n\n\t\t// bd3D = base direction 3D\n\t\tvec3 bd3D = normalize( lightToPosition );\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#else // no percentage-closer filtering\n\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\n\t\t#endif\n\n\t}\n\n#endif\n",
        shadowmap_pars_vertex: "\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): uniforms for area light shadows\n\n\t#endif\n\t*/\n\n#endif\n",
        shadowmap_vertex: "\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): update vAreaShadowCoord with area light info\n\n\t#endif\n\t*/\n\n#endif\n",
        shadowmask_pars_fragment: "\nfloat getShadowMask() {\n\n\tfloat shadow = 1.0;\n\n\t#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\tDirectionalLightShadow directionalLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\tSpotLightShadow spotLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\tPointLightShadow pointLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): update shadow for Area light\n\n\t#endif\n\t*/\n\n\t#endif\n\n\treturn shadow;\n\n}\n",
        skinbase_vertex: "\n#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif\n",
        skinning_pars_vertex: "\n#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\t#ifdef BONE_TEXTURE\n\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\n\t\t\ty = dy * ( y + 0.5 );\n\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\t\treturn bone;\n\n\t\t}\n\n\t#else\n\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\n\t\t}\n\n\t#endif\n\n#endif\n",
        skinning_vertex: "\n#ifdef USE_SKINNING\n\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n\n#endif\n",
        skinnormal_vertex: "\n#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\n\t#ifdef USE_TANGENT\n\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\n\t#endif\n\n#endif\n",
        specularmap_fragment: "\nfloat specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif\n",
        specularmap_pars_fragment: "\n#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif\n",
        tonemapping_fragment: "\n#if defined( TONE_MAPPING )\n\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n\n#endif\n",
        tonemapping_pars_fragment: "\n#ifndef saturate\n// <common> may have defined saturate() already\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\n\n// exposure only\nvec3 LinearToneMapping( vec3 color ) {\n\n\treturn toneMappingExposure * color;\n\n}\n\n// source: https://www.cs.utah.edu/~reinhard/cdrom/\nvec3 ReinhardToneMapping( vec3 color ) {\n\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n\n}\n\n// source: http://filmicgames.com/archives/75\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\n\t// John Hable's filmic operator from Uncharted 2 video game\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n\n}\n\n// source: http://filmicgames.com/archives/75\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\n\t// optimized filmic operator by Jim Hejl and Richard Burgess-Dawson\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n\n}\n\n// source: https://knarkowicz.wordpress.com/2016/01/06/aces-filmic-tone-mapping-curve/\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n\n}\n",
        uv_pars_fragment: "\n#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\n\tvarying vec2 vUv;\n\n#endif\n",
        uv_pars_vertex: "\n#ifdef USE_UV\n\n\t#ifdef UVS_VERTEX_ONLY\n\n\t\tvec2 vUv;\n\n\t#else\n\n\t\tvarying vec2 vUv;\n\n\t#endif\n\n\tuniform mat3 uvTransform;\n\n#endif\n",
        uv_vertex: "\n#ifdef USE_UV\n\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\n#endif\n",
        uv2_pars_fragment: "\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvarying vec2 vUv2;\n\n#endif\n",
        uv2_pars_vertex: "\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\n\tuniform mat3 uv2Transform;\n\n#endif\n",
        uv2_vertex: "\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n\n#endif\n",
        worldpos_vertex: "\n#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\n\t#ifdef USE_INSTANCING\n\n\t\tworldPosition = instanceMatrix * worldPosition;\n\n\t#endif\n\n\tworldPosition = modelMatrix * worldPosition;\n\n#endif\n",
        background_frag: "\nuniform sampler2D t2D;\n\nvarying vec2 vUv;\n\nvoid main() {\n\n\tvec4 texColor = texture2D( t2D, vUv );\n\n\tgl_FragColor = mapTexelToLinear( texColor );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n",
        background_vert: "\nvarying vec2 vUv;\nuniform mat3 uvTransform;\n\nvoid main() {\n\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n\n}\n",
        cube_frag: "\n\n#include <envmap_common_pars_fragment>\nuniform float opacity;\n\nvarying vec3 vWorldDirection;\n\n#include <cube_uv_reflection_fragment>\n\nvoid main() {\n\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n",
        cube_vert: "\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n\tgl_Position.z = gl_Position.w; // set z to camera.far\n\n}\n",
        depth_frag: "\n#if DEPTH_PACKING == 3200\n\n\tuniform float opacity;\n\n#endif\n\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvarying vec2 vHighPrecisionZW;\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tdiffuseColor.a = opacity;\n\n\t#endif\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\t#include <logdepthbuf_fragment>\n\n\t// Higher precision equivalent of gl_FragCoord.z. This assumes depthRange has been left to its default values.\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\n\t#elif DEPTH_PACKING == 3201\n\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\n\t#endif\n\n}\n",
        depth_vert: "\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\n// This is used for computing an equivalent of gl_FragCoord.z that is as high precision as possible.\n// Some platforms compute gl_FragCoord at a lower precision which makes the manually computed value better for\n// depth-based postprocessing effects. Reproduced on iPad with A10 processor / iPadOS 13.3.1.\nvarying vec2 vHighPrecisionZW;\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_DISPLACEMENTMAP\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvHighPrecisionZW = gl_Position.zw;\n\n}\n",
        distanceRGBA_frag: "\n#define DISTANCE\n\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main () {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist ); // clamp to [ 0, 1 ]\n\n\tgl_FragColor = packDepthToRGBA( dist );\n\n}\n",
        distanceRGBA_vert: "\n#define DISTANCE\n\nvarying vec3 vWorldPosition;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_DISPLACEMENTMAP\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvWorldPosition = worldPosition.xyz;\n\n}\n",
        equirect_frag: "\nuniform sampler2D tEquirect;\n\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvec3 direction = normalize( vWorldDirection );\n\n\tvec2 sampleUV;\n\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\n\tgl_FragColor = mapTexelToLinear( texColor );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n",
        equirect_vert: "\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n}\n",
        linedashed_frag: "\nuniform vec3 diffuse;\nuniform float opacity;\n\nuniform float dashSize;\nuniform float totalSize;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\n\t\tdiscard;\n\n\t}\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\n\toutgoingLight = diffuseColor.rgb; // simple shader\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\n}\n",
        linedashed_vert: "\nuniform float scale;\nattribute float lineDistance;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\tvLineDistance = scale * lineDistance;\n\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n}\n",
        meshbasic_frag: "\nuniform vec3 diffuse;\nuniform float opacity;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\n\t// accumulation (baked indirect lighting only)\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\n\t#endif\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\n}\n",
        meshbasic_vert: "\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_ENVMAP\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n\n}\n",
        meshlambert_frag: "\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\n\t#endif\n\n\t#include <lightmap_fragment>\n\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\n\t#else\n\n\t\treflectedLight.directDiffuse = vLightFront;\n\n\t#endif\n\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",
        meshlambert_vert: "\n#define LAMBERT\n\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",
        meshmatcap_frag: "\n#define MATCAP\n\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks\n\n\t#ifdef USE_MATCAP\n\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\n\t#else\n\n\t\tvec4 matcapColor = vec4( 1.0 );\n\n\t#endif\n\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\n}\n",
        meshmatcap_vert: "\n#define MATCAP\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\t\tvNormal = normalize( transformedNormal );\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n}\n",
        meshtoon_frag: "\n#define TOON\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",
        meshtoon_vert: "\n#define TOON\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n",
        meshphong_frag: "\n#define PHONG\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",
        meshphong_vert: "\n#define PHONG\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n",
        meshphysical_frag: "\n#define STANDARD\n\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSPARENCY\n#endif\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n\n#ifdef TRANSPARENCY\n\tuniform float transparency;\n#endif\n\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t// this is a stub for the transparency model\n\t#ifdef TRANSPARENCY\n\t\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",
        meshphysical_vert: "\n#define STANDARD\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n\t#ifdef USE_TANGENT\n\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\n\t#endif\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n",
        normal_frag: "\n#define NORMAL\n\nuniform float opacity;\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\n}\n",
        normal_vert: "\n#define NORMAL\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n\t#ifdef USE_TANGENT\n\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\n\t#endif\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvViewPosition = - mvPosition.xyz;\n\n#endif\n\n}\n",
        points_frag: "\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\n}\n",
        points_vert: "\nuniform float size;\nuniform float scale;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\n\tgl_PointSize = size;\n\n\t#ifdef USE_SIZEATTENUATION\n\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\n\t#endif\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n\n}\n",
        shadow_frag: "\nuniform vec3 color;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n\nvoid main() {\n\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n",
        shadow_vert: "\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n\nvoid main() {\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n",
        sprite_frag: "\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n",
        sprite_vert: "\nuniform float rotation;\nuniform vec2 center;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n\t#ifndef USE_SIZEATTENUATION\n\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\n\t#endif\n\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\n\tmvPosition.xy += rotatedPosition;\n\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n}\n"
    }, xi = {
        basic: {
            uniforms: Fr([ Kn.common, Kn.specularmap, Kn.envmap, Kn.aomap, Kn.lightmap, Kn.fog ]),
            vertexShader: bi.meshbasic_vert,
            fragmentShader: bi.meshbasic_frag
        },
        lambert: {
            uniforms: Fr([ Kn.common, Kn.specularmap, Kn.envmap, Kn.aomap, Kn.lightmap, Kn.emissivemap, Kn.fog, Kn.lights, {
                emissive: {
                    value: new Xt(0)
                }
            } ]),
            vertexShader: bi.meshlambert_vert,
            fragmentShader: bi.meshlambert_frag
        },
        phong: {
            uniforms: Fr([ Kn.common, Kn.specularmap, Kn.envmap, Kn.aomap, Kn.lightmap, Kn.emissivemap, Kn.bumpmap, Kn.normalmap, Kn.displacementmap, Kn.fog, Kn.lights, {
                emissive: {
                    value: new Xt(0)
                },
                specular: {
                    value: new Xt(1118481)
                },
                shininess: {
                    value: 30
                }
            } ]),
            vertexShader: bi.meshphong_vert,
            fragmentShader: bi.meshphong_frag
        },
        standard: {
            uniforms: Fr([ Kn.common, Kn.envmap, Kn.aomap, Kn.lightmap, Kn.emissivemap, Kn.bumpmap, Kn.normalmap, Kn.displacementmap, Kn.roughnessmap, Kn.metalnessmap, Kn.fog, Kn.lights, {
                emissive: {
                    value: new Xt(0)
                },
                roughness: {
                    value: .5
                },
                metalness: {
                    value: .5
                },
                envMapIntensity: {
                    value: 1
                }
            } ]),
            vertexShader: bi.meshphysical_vert,
            fragmentShader: bi.meshphysical_frag
        },
        toon: {
            uniforms: Fr([ Kn.common, Kn.specularmap, Kn.aomap, Kn.lightmap, Kn.emissivemap, Kn.bumpmap, Kn.normalmap, Kn.displacementmap, Kn.gradientmap, Kn.fog, Kn.lights, {
                emissive: {
                    value: new Xt(0)
                },
                specular: {
                    value: new Xt(1118481)
                },
                shininess: {
                    value: 30
                }
            } ]),
            vertexShader: bi.meshtoon_vert,
            fragmentShader: bi.meshtoon_frag
        },
        matcap: {
            uniforms: Fr([ Kn.common, Kn.bumpmap, Kn.normalmap, Kn.displacementmap, Kn.fog, {
                matcap: {
                    value: null
                }
            } ]),
            vertexShader: bi.meshmatcap_vert,
            fragmentShader: bi.meshmatcap_frag
        },
        points: {
            uniforms: Fr([ Kn.points, Kn.fog ]),
            vertexShader: bi.points_vert,
            fragmentShader: bi.points_frag
        },
        dashed: {
            uniforms: Fr([ Kn.common, Kn.fog, {
                scale: {
                    value: 1
                },
                dashSize: {
                    value: 1
                },
                totalSize: {
                    value: 2
                }
            } ]),
            vertexShader: bi.linedashed_vert,
            fragmentShader: bi.linedashed_frag
        },
        depth: {
            uniforms: Fr([ Kn.common, Kn.displacementmap ]),
            vertexShader: bi.depth_vert,
            fragmentShader: bi.depth_frag
        },
        normal: {
            uniforms: Fr([ Kn.common, Kn.bumpmap, Kn.normalmap, Kn.displacementmap, {
                opacity: {
                    value: 1
                }
            } ]),
            vertexShader: bi.normal_vert,
            fragmentShader: bi.normal_frag
        },
        sprite: {
            uniforms: Fr([ Kn.sprite, Kn.fog ]),
            vertexShader: bi.sprite_vert,
            fragmentShader: bi.sprite_frag
        },
        background: {
            uniforms: {
                uvTransform: {
                    value: new O()
                },
                t2D: {
                    value: null
                }
            },
            vertexShader: bi.background_vert,
            fragmentShader: bi.background_frag
        },
        cube: {
            uniforms: Fr([ Kn.envmap, {
                opacity: {
                    value: 1
                }
            } ]),
            vertexShader: bi.cube_vert,
            fragmentShader: bi.cube_frag
        },
        equirect: {
            uniforms: {
                tEquirect: {
                    value: null
                }
            },
            vertexShader: bi.equirect_vert,
            fragmentShader: bi.equirect_frag
        },
        distanceRGBA: {
            uniforms: Fr([ Kn.common, Kn.displacementmap, {
                referencePosition: {
                    value: new h()
                },
                nearDistance: {
                    value: 1
                },
                farDistance: {
                    value: 1e3
                }
            } ]),
            vertexShader: bi.distanceRGBA_vert,
            fragmentShader: bi.distanceRGBA_frag
        },
        shadow: {
            uniforms: Fr([ Kn.lights, Kn.fog, {
                color: {
                    value: new Xt(0)
                },
                opacity: {
                    value: 1
                }
            } ]),
            vertexShader: bi.shadow_vert,
            fragmentShader: bi.shadow_frag
        }
    };
    function wi(t, e, n, r) {
        var i, o, a = new Xt(0), s = 0, l = null, u = 0, c = null;
        function h(t, n) {
            e.buffers.color.setClear(t.r, t.g, t.b, n, r);
        }
        return {
            getClearColor: function() {
                return a;
            },
            setClearColor: function(t, e) {
                a.set(t), h(a, s = void 0 !== e ? e : 1);
            },
            getClearAlpha: function() {
                return s;
            },
            setClearAlpha: function(t) {
                h(a, s = t);
            },
            render: function(e, r, f, p) {
                r = r.background;
                var d = (d = t.xr).getSession && d.getSession();
                null === (r = d && "additive" === d.environmentBlendMode ? null : r) ? h(a, s) : r && r.isColor && (h(r, 1), 
                p = !0), (t.autoClear || p) && t.clear(t.autoClearColor, t.autoClearDepth, t.autoClearStencil), 
                r && (r.isCubeTexture || r.isWebGLCubeRenderTarget || 306 === r.mapping) ? (void 0 === o && ((o = new mi(new Ir(1, 1, 1), new Ur({
                    type: "BackgroundCubeMaterial",
                    uniforms: Nr(xi.cube.uniforms),
                    vertexShader: xi.cube.vertexShader,
                    fragmentShader: xi.cube.fragmentShader,
                    side: 1,
                    depthTest: !1,
                    depthWrite: !1,
                    fog: !1
                }))).geometry.deleteAttribute("normal"), o.geometry.deleteAttribute("uv"), o.onBeforeRender = function(t, e, n) {
                    this.matrixWorld.copyPosition(n.matrixWorld);
                }, Object.defineProperty(o.material, "envMap", {
                    get: function() {
                        return this.uniforms.envMap.value;
                    }
                }), n.update(o)), d = r.isWebGLCubeRenderTarget ? r.texture : r, o.material.uniforms.envMap.value = d, 
                o.material.uniforms.flipEnvMap.value = d.isCubeTexture ? -1 : 1, l === r && u === d.version && c === t.toneMapping || (o.material.needsUpdate = !0, 
                l = r, u = d.version, c = t.toneMapping), e.unshift(o, o.geometry, o.material, 0, 0, null)) : r && r.isTexture && (void 0 === i && ((i = new mi(new Dr(2, 2), new Ur({
                    type: "BackgroundMaterial",
                    uniforms: Nr(xi.background.uniforms),
                    vertexShader: xi.background.vertexShader,
                    fragmentShader: xi.background.fragmentShader,
                    side: 0,
                    depthTest: !1,
                    depthWrite: !1,
                    fog: !1
                }))).geometry.deleteAttribute("normal"), Object.defineProperty(i.material, "map", {
                    get: function() {
                        return this.uniforms.t2D.value;
                    }
                }), n.update(i)), !0 === (i.material.uniforms.t2D.value = r).matrixAutoUpdate && r.updateMatrix(), 
                i.material.uniforms.uvTransform.value.copy(r.matrix), l === r && u === r.version && c === t.toneMapping || (i.material.needsUpdate = !0, 
                u = (l = r).version, c = t.toneMapping), e.unshift(i, i.geometry, i.material, 0, 0, null));
            }
        };
    }
    function Si(t, e, n, r) {
        var i, o = r.isWebGL2;
        this.setMode = function(t) {
            i = t;
        }, this.render = function(e, r) {
            t.drawArrays(i, e, r), n.update(r, i);
        }, this.renderInstances = function(r, a, s, l) {
            if (0 !== l) {
                var u, c;
                if (o) u = t, c = "drawArraysInstanced"; else if (c = "drawArraysInstancedANGLE", 
                null === (u = e.get("ANGLE_instanced_arrays"))) return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
                u[c](i, a, s, l), n.update(s, i, l);
            }
        };
    }
    function _i(t, e, n) {
        var r;
        function i(e) {
            if ("highp" === e) {
                if (0 < t.getShaderPrecisionFormat(t.VERTEX_SHADER, t.HIGH_FLOAT).precision && 0 < t.getShaderPrecisionFormat(t.FRAGMENT_SHADER, t.HIGH_FLOAT).precision) return "highp";
                e = "mediump";
            }
            return "mediump" === e && 0 < t.getShaderPrecisionFormat(t.VERTEX_SHADER, t.MEDIUM_FLOAT).precision && 0 < t.getShaderPrecisionFormat(t.FRAGMENT_SHADER, t.MEDIUM_FLOAT).precision ? "mediump" : "lowp";
        }
        var o = "undefined" != typeof WebGL2RenderingContext && t instanceof WebGL2RenderingContext || "undefined" != typeof WebGL2ComputeRenderingContext && t instanceof WebGL2ComputeRenderingContext, a = void 0 !== n.precision ? n.precision : "highp", s = ((s = i(a)) !== a && (console.warn("THREE.WebGLRenderer:", a, "not supported, using", s, "instead."), 
        a = s), !0 === n.logarithmicDepthBuffer), l = (n = t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS), 
        t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS)), u = t.getParameter(t.MAX_TEXTURE_SIZE), c = t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE), h = t.getParameter(t.MAX_VERTEX_ATTRIBS), f = t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS), p = t.getParameter(t.MAX_VARYING_VECTORS), d = t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS), y = 0 < l, m = o || !!e.get("OES_texture_float");
        return {
            isWebGL2: o,
            getMaxAnisotropy: function() {
                var n;
                return void 0 === r && (n = e.get("EXT_texture_filter_anisotropic"), r = null !== n ? t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 0), 
                r;
            },
            getMaxPrecision: i,
            precision: a,
            logarithmicDepthBuffer: s,
            maxTextures: n,
            maxVertexTextures: l,
            maxTextureSize: u,
            maxCubemapSize: c,
            maxAttributes: h,
            maxVertexUniforms: f,
            maxVaryings: p,
            maxFragmentUniforms: d,
            vertexTextures: y,
            floatFragmentTextures: m,
            floatVertexTextures: y && m,
            maxSamples: o ? t.getParameter(t.MAX_SAMPLES) : 0
        };
    }
    function Ei() {
        var t = this, e = null, n = 0, r = !1, i = !1, o = new ut(), a = new O(), s = {
            value: null,
            needsUpdate: !1
        };
        function l() {
            s.value !== e && (s.value = e, s.needsUpdate = 0 < n), t.numPlanes = n, t.numIntersection = 0;
        }
        function u(e, n, r, i) {
            var l = null !== e ? e.length : 0, u = null;
            if (0 !== l) {
                if (u = s.value, !0 !== i || null === u) {
                    i = r + 4 * l;
                    var c = n.matrixWorldInverse;
                    a.getNormalMatrix(c), (null === u || u.length < i) && (u = new Float32Array(i));
                    for (var h = 0, f = r; h !== l; ++h, f += 4) o.copy(e[h]).applyMatrix4(c, a), o.normal.toArray(u, f), 
                    u[f + 3] = o.constant;
                }
                s.value = u, s.needsUpdate = !0;
            }
            return t.numPlanes = l, t.numIntersection = 0, u;
        }
        this.uniform = s, this.numPlanes = 0, this.numIntersection = 0, this.init = function(t, i, o) {
            var a = 0 !== t.length || i || 0 !== n || r;
            return r = i, e = u(t, o, 0), n = t.length, a;
        }, this.beginShadows = function() {
            i = !0, u(null);
        }, this.endShadows = function() {
            i = !1, l();
        }, this.setState = function(t, o, a, c, h, f) {
            if (!r || null === t || 0 === t.length || i && !a) i ? u(null) : l(); else {
                var p = 4 * (a = i ? 0 : n), d = h.clippingState || null;
                s.value = d;
                d = u(t, c, p, f);
                for (var y = 0; y !== p; ++y) d[y] = e[y];
                h.clippingState = d, this.numIntersection = o ? this.numPlanes : 0, this.numPlanes += a;
            }
        };
    }
    function Oi(t) {
        var e = {};
        return {
            get: function(n) {
                if (void 0 !== e[n]) return e[n];
                var r;
                switch (n) {
                  case "WEBGL_depth_texture":
                    r = t.getExtension("WEBGL_depth_texture") || t.getExtension("MOZ_WEBGL_depth_texture") || t.getExtension("WEBKIT_WEBGL_depth_texture");
                    break;

                  case "EXT_texture_filter_anisotropic":
                    r = t.getExtension("EXT_texture_filter_anisotropic") || t.getExtension("MOZ_EXT_texture_filter_anisotropic") || t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
                    break;

                  case "WEBGL_compressed_texture_s3tc":
                    r = t.getExtension("WEBGL_compressed_texture_s3tc") || t.getExtension("MOZ_WEBGL_compressed_texture_s3tc") || t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");
                    break;

                  case "WEBGL_compressed_texture_pvrtc":
                    r = t.getExtension("WEBGL_compressed_texture_pvrtc") || t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
                    break;

                  default:
                    r = t.getExtension(n);
                }
                return null === r && console.warn("THREE.WebGLRenderer: " + n + " extension not supported."), 
                e[n] = r;
            }
        };
    }
    function Mi(t, e, n) {
        var r = new WeakMap(), i = new WeakMap();
        function o(t) {
            t = t.target;
            var a, s = r.get(t);
            for (a in null !== s.index && e.remove(s.index), s.attributes) e.remove(s.attributes[a]);
            t.removeEventListener("dispose", o), r.delete(t), (t = i.get(s)) && (e.remove(t), 
            i.delete(s)), n.memory.geometries--;
        }
        return {
            get: function(t, e) {
                var i = r.get(e);
                return i || (e.addEventListener("dispose", o), e.isBufferGeometry ? i = e : e.isGeometry && (void 0 === e.Xr && (e.Xr = new Mr().setFromObject(t)), 
                i = e.Xr), r.set(e, i), n.memory.geometries++), i;
            },
            update: function(n) {
                var r = n.index, i = n.attributes;
                for (o in null !== r && e.update(r, t.ELEMENT_ARRAY_BUFFER), i) e.update(i[o], t.ARRAY_BUFFER);
                var o, a = n.morphAttributes;
                for (o in a) for (var s = a[o], l = 0, u = s.length; l < u; l++) e.update(s[l], t.ARRAY_BUFFER);
            },
            getWireframeAttribute: function(n) {
                var r, o = i.get(n);
                return (!o || null !== (r = n.index) && o.version < r.version) && function(n) {
                    var r = [], o = n.index, a = n.attributes.position, s = 0;
                    if (null !== o) for (var l = o.array, u = (s = o.version, 0), c = l.length; u < c; u += 3) {
                        var h = l[u + 0], f = l[u + 1], p = l[u + 2];
                        r.push(h, f, f, p, p, h);
                    } else for (l = a.array, s = a.version, u = 0, c = l.length / 3 - 1; u < c; u += 3) h = u + 0, 
                    f = u + 1, p = u + 2, r.push(h, f, f, p, p, h);
                    (o = new (65535 < gr(r) ? dr : fr)(r, 1)).version = s, e.update(o, t.ELEMENT_ARRAY_BUFFER), 
                    (a = i.get(n)) && e.remove(a), i.set(n, o);
                }(n), i.get(n);
            }
        };
    }
    function Ti(t, e, n, r) {
        var i, o, a, s = r.isWebGL2;
        this.setMode = function(t) {
            i = t;
        }, this.setIndex = function(t) {
            o = t.type, a = t.bytesPerElement;
        }, this.render = function(e, r) {
            t.drawElements(i, r, o, e * a), n.update(r, i);
        }, this.renderInstances = function(r, l, u, c) {
            if (0 !== c) {
                var h, f;
                if (s) h = t, f = "drawElementsInstanced"; else if (f = "drawElementsInstancedANGLE", 
                null === (h = e.get("ANGLE_instanced_arrays"))) return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
                h[f](i, u, o, l * a, c), n.update(u, i, c);
            }
        };
    }
    function Li(t) {
        var e = {
            frame: 0,
            calls: 0,
            triangles: 0,
            points: 0,
            lines: 0
        };
        return {
            memory: {
                geometries: 0,
                textures: 0
            },
            render: e,
            programs: null,
            autoReset: !0,
            reset: function() {
                e.frame++, e.calls = 0, e.triangles = 0, e.points = 0, e.lines = 0;
            },
            update: function(n, r, i) {
                switch (i = i || 1, e.calls++, r) {
                  case t.TRIANGLES:
                    e.triangles += i * (n / 3);
                    break;

                  case t.LINES:
                    e.lines += i * (n / 2);
                    break;

                  case t.LINE_STRIP:
                    e.lines += i * (n - 1);
                    break;

                  case t.LINE_LOOP:
                    e.lines += i * n;
                    break;

                  case t.POINTS:
                    e.points += i * n;
                    break;

                  default:
                    console.error("THREE.WebGLInfo: Unknown draw mode:", r);
                }
            }
        };
    }
    function Ai(t, e) {
        return Math.abs(e[1]) - Math.abs(t[1]);
    }
    function Pi(t) {
        var e = {}, n = new Float32Array(8);
        return {
            update: function(r, i, o, a) {
                var s = r.morphTargetInfluences, l = void 0 === s ? 0 : s.length;
                if (void 0 === (u = e[i.id])) {
                    for (var u = [], c = 0; c < l; c++) u[c] = [ c, 0 ];
                    e[i.id] = u;
                }
                var h = o.morphTargets && i.morphAttributes.position, f = o.morphNormals && i.morphAttributes.normal;
                for (c = 0; c < l; c++) 0 !== (p = u[c])[1] && (h && i.deleteAttribute("morphTarget" + c), 
                f) && i.deleteAttribute("morphNormal" + c);
                for (c = 0; c < l; c++) (p = u[c])[0] = c, p[1] = s[c];
                u.sort(Ai);
                var p, d = 0;
                for (c = 0; c < 8; c++) {
                    if (p = u[c]) {
                        var y = p[0], m = p[1];
                        if (m) {
                            h && i.setAttribute("morphTarget" + c, h[y]), f && i.setAttribute("morphNormal" + c, f[y]), 
                            d += n[c] = m;
                            continue;
                        }
                    }
                    n[c] = 0;
                }
                r = i.morphTargetsRelative ? 1 : 1 - d, a.getUniforms().setValue(t, "morphTargetBaseInfluence", r), 
                a.getUniforms().setValue(t, "morphTargetInfluences", n);
            }
        };
    }
    function Ri(t, e, n, r) {
        var i = new WeakMap();
        return {
            update: function(o) {
                var a = r.render.frame, s = o.geometry, l = e.get(o, s);
                return i.get(l) !== a && (s.isGeometry && l.updateFromObject(o), e.update(l), i.set(l, a)), 
                o.isInstancedMesh && n.update(o.instanceMatrix, t.ARRAY_BUFFER), l;
            },
            dispose: function() {
                i = new WeakMap();
            }
        };
    }
    function ji(t, e, n, r, i, o, a, s, l, u) {
        Zn.call(this, t = void 0 !== t ? t : [], e = void 0 !== e ? e : 301, n, r, i, o, a = void 0 !== a ? a : gt, s, l, u), 
        this.flipY = !1;
    }
    function Ii(t, e, n, r) {
        Zn.call(this, null), this.image = {
            data: t || null,
            width: e || 1,
            height: n || 1,
            depth: r || 1
        }, this.magFilter = yt, this.minFilter = yt, this.wrapR = dt, this.generateMipmaps = !1, 
        this.flipY = !1, this.needsUpdate = !0;
    }
    function Di(t, e, n, r) {
        Zn.call(this, null), this.image = {
            data: t || null,
            width: e || 1,
            height: n || 1,
            depth: r || 1
        }, this.magFilter = yt, this.minFilter = yt, this.wrapR = dt, this.generateMipmaps = !1, 
        this.flipY = !1, this.needsUpdate = !0;
    }
    xi.physical = {
        uniforms: Fr([ xi.standard.uniforms, {
            clearcoat: {
                value: 0
            },
            clearcoatMap: {
                value: null
            },
            clearcoatRoughness: {
                value: 0
            },
            clearcoatRoughnessMap: {
                value: null
            },
            clearcoatNormalScale: {
                value: new Mt(1, 1)
            },
            clearcoatNormalMap: {
                value: null
            },
            sheen: {
                value: new Xt(0)
            },
            transparency: {
                value: 0
            }
        } ]),
        vertexShader: bi.meshphysical_vert,
        fragmentShader: bi.meshphysical_frag
    }, ((ji.prototype = Object.create(Zn.prototype)).constructor = ji).prototype.isCubeTexture = !0, 
    Object.defineProperty(ji.prototype, "images", {
        get: function() {
            return this.image;
        },
        set: function(t) {
            this.image = t;
        }
    }), ((Ii.prototype = Object.create(Zn.prototype)).constructor = Ii).prototype.isDataTexture2DArray = !0, 
    ((Di.prototype = Object.create(Zn.prototype)).constructor = Di).prototype.isDataTexture3D = !0;
    var ki = new Zn(), Ci = new Ii(), Ni = new Di(), Fi = new ji(), Bi = [], Ui = [], zi = new Float32Array(16), Gi = new Float32Array(9), Hi = new Float32Array(4);
    function Vi(t, e, n) {
        var r = t[0];
        if (r <= 0 || 0 < r) return t;
        var i = e * n, o = Bi[i];
        if (void 0 === o && (o = new Float32Array(i), Bi[i] = o), 0 !== e) {
            r.toArray(o, 0);
            for (var a = 1, s = 0; a !== e; ++a) t[a].toArray(o, s += n);
        }
        return o;
    }
    function Wi(t, e) {
        if (t.length === e.length) {
            for (var n = 0, r = t.length; n < r; n++) if (t[n] !== e[n]) return;
            return 1;
        }
    }
    function Yi(t, e) {
        for (var n = 0, r = e.length; n < r; n++) t[n] = e[n];
    }
    function Xi(t, e) {
        var n = Ui[e];
        void 0 === n && (n = new Int32Array(e), Ui[e] = n);
        for (var r = 0; r !== e; ++r) n[r] = t.allocateTextureUnit();
        return n;
    }
    function Zi(t, e) {
        var n = this.cache;
        n[0] !== e && (t.uniform1f(this.addr, e), n[0] = e);
    }
    function qi(t, e) {
        var n = this.cache;
        void 0 !== e.x ? n[0] === e.x && n[1] === e.y || (t.uniform2f(this.addr, e.x, e.y), 
        n[0] = e.x, n[1] = e.y) : Wi(n, e) || (t.uniform2fv(this.addr, e), Yi(n, e));
    }
    function Ki(t, e) {
        var n = this.cache;
        void 0 !== e.x ? n[0] === e.x && n[1] === e.y && n[2] === e.z || (t.uniform3f(this.addr, e.x, e.y, e.z), 
        n[0] = e.x, n[1] = e.y, n[2] = e.z) : void 0 !== e.r ? n[0] === e.r && n[1] === e.g && n[2] === e.b || (t.uniform3f(this.addr, e.r, e.g, e.b), 
        n[0] = e.r, n[1] = e.g, n[2] = e.b) : Wi(n, e) || (t.uniform3fv(this.addr, e), Yi(n, e));
    }
    function Ji(t, e) {
        var n = this.cache;
        void 0 !== e.x ? n[0] === e.x && n[1] === e.y && n[2] === e.z && n[3] === e.w || (t.uniform4f(this.addr, e.x, e.y, e.z, e.w), 
        n[0] = e.x, n[1] = e.y, n[2] = e.z, n[3] = e.w) : Wi(n, e) || (t.uniform4fv(this.addr, e), 
        Yi(n, e));
    }
    function Qi(t, e) {
        var n = this.cache, r = e.elements;
        void 0 === r ? Wi(n, e) || (t.uniformMatrix2fv(this.addr, !1, e), Yi(n, e)) : Wi(n, r) || (Hi.set(r), 
        t.uniformMatrix2fv(this.addr, !1, Hi), Yi(n, r));
    }
    function $i(t, e) {
        var n = this.cache, r = e.elements;
        void 0 === r ? Wi(n, e) || (t.uniformMatrix3fv(this.addr, !1, e), Yi(n, e)) : Wi(n, r) || (Gi.set(r), 
        t.uniformMatrix3fv(this.addr, !1, Gi), Yi(n, r));
    }
    function to(t, e) {
        var n = this.cache, r = e.elements;
        void 0 === r ? Wi(n, e) || (t.uniformMatrix4fv(this.addr, !1, e), Yi(n, e)) : Wi(n, r) || (zi.set(r), 
        t.uniformMatrix4fv(this.addr, !1, zi), Yi(n, r));
    }
    function eo(t, e, n) {
        var r = this.cache, i = n.allocateTextureUnit();
        r[0] !== i && (t.uniform1i(this.addr, i), r[0] = i), n.safeSetTexture2D(e || ki, i);
    }
    function no(t, e, n) {
        var r = this.cache, i = n.allocateTextureUnit();
        r[0] !== i && (t.uniform1i(this.addr, i), r[0] = i), n.setTexture2DArray(e || Ci, i);
    }
    function ro(t, e, n) {
        var r = this.cache, i = n.allocateTextureUnit();
        r[0] !== i && (t.uniform1i(this.addr, i), r[0] = i), n.setTexture3D(e || Ni, i);
    }
    function io(t, e, n) {
        var r = this.cache, i = n.allocateTextureUnit();
        r[0] !== i && (t.uniform1i(this.addr, i), r[0] = i), n.safeSetTextureCube(e || Fi, i);
    }
    function oo(t, e) {
        var n = this.cache;
        n[0] !== e && (t.uniform1i(this.addr, e), n[0] = e);
    }
    function ao(t, e) {
        var n = this.cache;
        Wi(n, e) || (t.uniform2iv(this.addr, e), Yi(n, e));
    }
    function so(t, e) {
        var n = this.cache;
        Wi(n, e) || (t.uniform3iv(this.addr, e), Yi(n, e));
    }
    function lo(t, e) {
        var n = this.cache;
        Wi(n, e) || (t.uniform4iv(this.addr, e), Yi(n, e));
    }
    function uo(t, e) {
        var n = this.cache;
        n[0] !== e && (t.uniform1ui(this.addr, e), n[0] = e);
    }
    function co(t, e) {
        t.uniform1fv(this.addr, e);
    }
    function ho(t, e) {
        t.uniform1iv(this.addr, e);
    }
    function fo(t, e) {
        t.uniform2iv(this.addr, e);
    }
    function po(t, e) {
        t.uniform3iv(this.addr, e);
    }
    function yo(t, e) {
        t.uniform4iv(this.addr, e);
    }
    function mo(t, e) {
        e = Vi(e, this.size, 2), t.uniform2fv(this.addr, e);
    }
    function vo(t, e) {
        e = Vi(e, this.size, 3), t.uniform3fv(this.addr, e);
    }
    function go(t, e) {
        e = Vi(e, this.size, 4), t.uniform4fv(this.addr, e);
    }
    function bo(t, e) {
        e = Vi(e, this.size, 4), t.uniformMatrix2fv(this.addr, !1, e);
    }
    function xo(t, e) {
        e = Vi(e, this.size, 9), t.uniformMatrix3fv(this.addr, !1, e);
    }
    function wo(t, e) {
        e = Vi(e, this.size, 16), t.uniformMatrix4fv(this.addr, !1, e);
    }
    function So(t, e, n) {
        var r = e.length, i = Xi(n, r);
        t.uniform1iv(this.addr, i);
        for (var o = 0; o !== r; ++o) n.safeSetTexture2D(e[o] || ki, i[o]);
    }
    function _o(t, e, n) {
        var r = e.length, i = Xi(n, r);
        t.uniform1iv(this.addr, i);
        for (var o = 0; o !== r; ++o) n.safeSetTextureCube(e[o] || Fi, i[o]);
    }
    function Eo(t, e, n) {
        this.id = t, this.addr = n, this.cache = [], this.setValue = function(t) {
            switch (t) {
              case 5126:
                return Zi;

              case 35664:
                return qi;

              case 35665:
                return Ki;

              case 35666:
                return Ji;

              case 35674:
                return Qi;

              case 35675:
                return $i;

              case 35676:
                return to;

              case 5124:
              case 35670:
                return oo;

              case 35667:
              case 35671:
                return ao;

              case 35668:
              case 35672:
                return so;

              case 35669:
              case 35673:
                return lo;

              case 5125:
                return uo;

              case 35678:
              case 36198:
              case 36298:
              case 36306:
              case 35682:
                return eo;

              case 35679:
              case 36299:
              case 36307:
                return ro;

              case 35680:
              case 36300:
              case 36308:
              case 36293:
                return io;

              case 36289:
              case 36303:
              case 36311:
              case 36292:
                return no;
            }
        }(e.type);
    }
    function Oo(t, e, n) {
        this.id = t, this.addr = n, this.cache = [], this.size = e.size, this.setValue = function(t) {
            switch (t) {
              case 5126:
                return co;

              case 35664:
                return mo;

              case 35665:
                return vo;

              case 35666:
                return go;

              case 35674:
                return bo;

              case 35675:
                return xo;

              case 35676:
                return wo;

              case 5124:
              case 35670:
                return ho;

              case 35667:
              case 35671:
                return fo;

              case 35668:
              case 35672:
                return po;

              case 35669:
              case 35673:
                return yo;

              case 35678:
              case 36198:
              case 36298:
              case 36306:
              case 35682:
                return So;

              case 35680:
              case 36300:
              case 36308:
              case 36293:
                return _o;
            }
        }(e.type);
    }
    function Mo(t) {
        this.id = t, this.seq = [], this.map = {};
    }
    Oo.prototype.updateCache = function(t) {
        var e = this.cache;
        t instanceof Float32Array && e.length !== t.length && (this.cache = new Float32Array(t.length)), 
        Yi(e, t);
    }, Mo.prototype.setValue = function(t, e, n) {
        for (var r = this.seq, i = 0, o = r.length; i !== o; ++i) {
            var a = r[i];
            a.setValue(t, e[a.id], n);
        }
    };
    var To = /([\w\d_]+)(\])?(\[|\.)?/g;
    function Lo(t, e) {
        t.seq.push(e), t.map[e.id] = e;
    }
    function Ao(t, e) {
        this.seq = [], this.map = {};
        for (var n = t.getProgramParameter(e, t.ACTIVE_UNIFORMS), r = 0; r < n; ++r) {
            var i = t.getActiveUniform(e, r), o = (p = f = h = c = s = o = void 0, i), a = t.getUniformLocation(e, i.name), s = this, l = o.name, u = l.length;
            for (To.lastIndex = 0; ;) {
                var c = To.exec(l), h = To.lastIndex, f = c[1], p = "]" === c[2];
                if (p && (f |= 0), void 0 === (c = c[3]) || "[" === c && h + 2 === u) {
                    Lo(s, new (void 0 === c ? Eo : Oo)(f, o, a));
                    break;
                }
                void 0 === (p = s.map[f]) && Lo(s, p = new Mo(f)), s = p;
            }
        }
    }
    function Po(t, e, n) {
        return e = t.createShader(e), t.shaderSource(e, n), t.compileShader(e), e;
    }
    Ao.prototype.setValue = function(t, e, n, r) {
        void 0 !== (e = this.map[e]) && e.setValue(t, n, r);
    }, Ao.prototype.setOptional = function(t, e, n) {
        void 0 !== (e = e[n]) && this.setValue(t, n, e);
    }, Ao.upload = function(t, e, n, r) {
        for (var i = 0, o = e.length; i !== o; ++i) {
            var a = e[i], s = n[a.id];
            !1 !== s.needsUpdate && a.setValue(t, s.value, r);
        }
    }, Ao.seqWithValue = function(t, e) {
        for (var n = [], r = 0, i = t.length; r !== i; ++r) {
            var o = t[r];
            o.id in e && n.push(o);
        }
        return n;
    };
    var Ro = 0;
    function jo(t) {
        switch (t) {
          case 3e3:
            return [ "Linear", "( value )" ];

          case 3001:
            return [ "sRGB", "( value )" ];

          case 3002:
            return [ "RGBE", "( value )" ];

          case 3004:
            return [ "RGBM", "( value, 7.0 )" ];

          case 3005:
            return [ "RGBM", "( value, 16.0 )" ];

          case 3006:
            return [ "RGBD", "( value, 256.0 )" ];

          case 3007:
            return [ "Gamma", "( value, float( GAMMA_FACTOR ) )" ];

          case 3003:
            return [ "LogLuv", "( value )" ];

          default:
            throw new Error("unsupported encoding: " + t);
        }
    }
    function Io(t, e, n) {
        var r = t.getShaderParameter(e, t.COMPILE_STATUS), i = t.getShaderInfoLog(e).trim();
        return r && "" === i ? "" : "THREE.WebGLShader: gl.getShaderInfoLog() " + n + "\n" + i + function(t) {
            for (var e = t.split("\n"), n = 0; n < e.length; n++) e[n] = n + 1 + ": " + e[n];
            return e.join("\n");
        }(t.getShaderSource(e));
    }
    function Do(t, e) {
        return "vec4 " + t + "( vec4 value ) { return " + (e = jo(e))[0] + "ToLinear" + e[1] + "; }";
    }
    function ko(t) {
        return "" !== t;
    }
    function Co(t, e) {
        return t.replace(/NUM_DIR_LIGHTS/g, e.numDirLights).replace(/NUM_SPOT_LIGHTS/g, e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g, e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g, e.numPointLights).replace(/NUM_HEMI_LIGHTS/g, e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g, e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g, e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g, e.numPointLightShadows);
    }
    function No(t, e) {
        return t.replace(/NUM_CLIPPING_PLANES/g, e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g, e.numClippingPlanes - e.numClipIntersection);
    }
    var Fo = /^[ \t]*#include +<([\w\d./]+)>/gm;
    function Bo(t) {
        return t.replace(Fo, Uo);
    }
    function Uo(t, e) {
        var n = bi[e];
        if (void 0 === n) throw new Error("Can not resolve #include <" + e + ">");
        return Bo(n);
    }
    var zo = /#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g, Go = /#pragma unroll_loop_start[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g;
    function Ho(t) {
        return t.replace(Go, Wo).replace(zo, Vo);
    }
    function Vo(t, e, n, r) {
        return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."), 
        Wo(0, e, n, r);
    }
    function Wo(t, e, n, r) {
        for (var i = "", o = parseInt(e); o < parseInt(n); o++) i += r.replace(/\[ i \]/g, "[ " + o + " ]").replace(/UNROLLED_LOOP_INDEX/g, o);
        return i;
    }
    function Yo(t) {
        var e = "precision " + t.precision + " float;\nprecision " + t.precision + " int;";
        return "highp" === t.precision ? e += "\n#define HIGH_PRECISION" : "mediump" === t.precision ? e += "\n#define MEDIUM_PRECISION" : "lowp" === t.precision && (e += "\n#define LOW_PRECISION"), 
        e;
    }
    function Xo(t, e, n) {
        var r, i, o, a, s, l, u = t.getContext(), c = n.defines, h = n.vertexShader, f = n.fragmentShader, p = (d = "SHADOWMAP_TYPE_BASIC", 
        1 === (p = n).shadowMapType ? d = "SHADOWMAP_TYPE_PCF" : 2 === p.shadowMapType ? d = "SHADOWMAP_TYPE_PCF_SOFT" : 3 === p.shadowMapType && (d = "SHADOWMAP_TYPE_VSM"), 
        d), d = function(t) {
            var e = "ENVMAP_TYPE_CUBE";
            if (t.envMap) switch (t.envMapMode) {
              case 301:
              case 302:
                e = "ENVMAP_TYPE_CUBE";
                break;

              case 306:
              case 307:
                e = "ENVMAP_TYPE_CUBE_UV";
                break;

              case 303:
              case 304:
                e = "ENVMAP_TYPE_EQUIREC";
                break;

              case 305:
                e = "ENVMAP_TYPE_SPHERE";
            }
            return e;
        }(n), y = function(t) {
            var e = "ENVMAP_MODE_REFLECTION";
            if (t.envMap) switch (t.envMapMode) {
              case 302:
              case 304:
                e = "ENVMAP_MODE_REFRACTION";
            }
            return e;
        }(n), m = function(t) {
            var e = "ENVMAP_BLENDING_NONE";
            if (t.envMap) switch (t.combine) {
              case 0:
                e = "ENVMAP_BLENDING_MULTIPLY";
                break;

              case 1:
                e = "ENVMAP_BLENDING_MIX";
                break;

              case 2:
                e = "ENVMAP_BLENDING_ADD";
            }
            return e;
        }(n), v = 0 < t.gammaFactor ? t.gammaFactor : 1, g = n.isWebGL2 ? "" : (b = [ (g = n).extensionDerivatives || g.envMapCubeUV || g.bumpMap || g.tangentSpaceNormalMap || g.clearcoatNormalMap || g.flatShading || "physical" === g.shaderID ? "#extension GL_OES_standard_derivatives : enable" : "", (g.extensionFragDepth || g.logarithmicDepthBuffer) && g.rendererExtensionFragDepth ? "#extension GL_EXT_frag_depth : enable" : "", g.extensionDrawBuffers && g.rendererExtensionDrawBuffers ? "#extension GL_EXT_draw_buffers : require" : "", (g.extensionShaderTextureLOD || g.envMap) && g.rendererExtensionShaderTextureLod ? "#extension GL_EXT_shader_texture_lod : enable" : "" ], 
        "FMMeshStandardMaterial" === g.shaderName && b.push("#extension GL_OES_standard_derivatives : enable"), 
        b.filter(ko).join("\n")), b = function(t) {
            var e, n = [];
            for (e in t) {
                var r = t[e];
                !1 !== r && n.push("#define " + e + " " + r);
            }
            return n.join("\n");
        }(c), x = u.createProgram();
        n.isRawShaderMaterial ? (0 < (r = [ b ].filter(ko).join("\n")).length && (r += "\n"), 
        0 < (i = [ g, b ].filter(ko).join("\n")).length && (i += "\n")) : (r = [ Yo(n), "#define SHADER_NAME " + n.shaderName, b, n.instancing ? "#define USE_INSTANCING" : "", n.supportsVertexTextures ? "#define VERTEX_TEXTURES" : "", "#define GAMMA_FACTOR " + v, "#define MAX_BONES " + n.maxBones, n.useFog && n.fog ? "#define USE_FOG" : "", n.useFog && n.fogExp2 ? "#define FOG_EXP2" : "", n.map ? "#define USE_MAP" : "", n.envMap ? "#define USE_ENVMAP" : "", n.envMap ? "#define " + y : "", n.lightMap ? "#define USE_LIGHTMAP" : "", n.aoMap ? "#define USE_AOMAP" : "", n.emissiveMap ? "#define USE_EMISSIVEMAP" : "", n.bumpMap ? "#define USE_BUMPMAP" : "", n.normalMap ? "#define USE_NORMALMAP" : "", n.normalMap && n.objectSpaceNormalMap ? "#define OBJECTSPACE_NORMALMAP" : "", n.normalMap && n.tangentSpaceNormalMap ? "#define TANGENTSPACE_NORMALMAP" : "", n.clearcoatMap ? "#define USE_CLEARCOATMAP" : "", n.clearcoatRoughnessMap ? "#define USE_CLEARCOAT_ROUGHNESSMAP" : "", n.clearcoatNormalMap ? "#define USE_CLEARCOAT_NORMALMAP" : "", n.displacementMap && n.supportsVertexTextures ? "#define USE_DISPLACEMENTMAP" : "", n.specularMap ? "#define USE_SPECULARMAP" : "", n.roughnessMap ? "#define USE_ROUGHNESSMAP" : "", n.metalnessMap ? "#define USE_METALNESSMAP" : "", n.alphaMap ? "#define USE_ALPHAMAP" : "", n.vertexTangents ? "#define USE_TANGENT" : "", n.vertexColors ? "#define USE_COLOR" : "", n.vertexUvs ? "#define USE_UV" : "", n.uvsVertexOnly ? "#define UVS_VERTEX_ONLY" : "", n.flatShading ? "#define FLAT_SHADED" : "", n.skinning ? "#define USE_SKINNING" : "", n.useVertexTexture ? "#define BONE_TEXTURE" : "", n.morphTargets ? "#define USE_MORPHTARGETS" : "", n.morphNormals && !1 === n.flatShading ? "#define USE_MORPHNORMALS" : "", n.doubleSided ? "#define DOUBLE_SIDED" : "", n.flipSided ? "#define FLIP_SIDED" : "", n.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", n.shadowMapEnabled ? "#define " + p : "", n.sizeAttenuation ? "#define USE_SIZEATTENUATION" : "", n.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", n.logarithmicDepthBuffer && n.rendererExtensionFragDepth ? "#define USE_LOGDEPTHBUF_EXT" : "", "uniform mat4 modelMatrix;", "uniform mat4 modelViewMatrix;", "uniform mat4 projectionMatrix;", "uniform mat4 viewMatrix;", "uniform mat3 normalMatrix;", "uniform vec3 cameraPosition;", "uniform bool isOrthographic;", "#ifdef USE_INSTANCING", " attribute mat4 instanceMatrix;", "#endif", "attribute vec3 position;", "attribute vec3 normal;", "attribute vec2 uv;", "#ifdef USE_TANGENT", "\tattribute vec4 tangent;", "#endif", "#ifdef USE_COLOR", "\tattribute vec3 color;", "#endif", "#ifdef USE_MORPHTARGETS", "\tattribute vec3 morphTarget0;", "\tattribute vec3 morphTarget1;", "\tattribute vec3 morphTarget2;", "\tattribute vec3 morphTarget3;", "\t#ifdef USE_MORPHNORMALS", "\t\tattribute vec3 morphNormal0;", "\t\tattribute vec3 morphNormal1;", "\t\tattribute vec3 morphNormal2;", "\t\tattribute vec3 morphNormal3;", "\t#else", "\t\tattribute vec3 morphTarget4;", "\t\tattribute vec3 morphTarget5;", "\t\tattribute vec3 morphTarget6;", "\t\tattribute vec3 morphTarget7;", "\t#endif", "#endif", "#ifdef USE_SKINNING", "\tattribute vec4 skinIndex;", "\tattribute vec4 skinWeight;", "#endif", "\n" ].filter(ko).join("\n"), 
        i = [ g, Yo(n), "#define SHADER_NAME " + n.shaderName, b, n.alphaTest ? "#define ALPHATEST " + n.alphaTest + (n.alphaTest % 1 ? "" : ".0") : "", "#define GAMMA_FACTOR " + v, n.useFog && n.fog ? "#define USE_FOG" : "", n.useFog && n.fogExp2 ? "#define FOG_EXP2" : "", n.map ? "#define USE_MAP" : "", n.matcap ? "#define USE_MATCAP" : "", n.envMap ? "#define USE_ENVMAP" : "", n.envMap ? "#define " + d : "", n.envMap ? "#define " + y : "", n.envMap ? "#define " + m : "", n.lightMap ? "#define USE_LIGHTMAP" : "", n.aoMap ? "#define USE_AOMAP" : "", n.emissiveMap ? "#define USE_EMISSIVEMAP" : "", n.bumpMap ? "#define USE_BUMPMAP" : "", n.normalMap ? "#define USE_NORMALMAP" : "", n.normalMap && n.objectSpaceNormalMap ? "#define OBJECTSPACE_NORMALMAP" : "", n.normalMap && n.tangentSpaceNormalMap ? "#define TANGENTSPACE_NORMALMAP" : "", n.clearcoatMap ? "#define USE_CLEARCOATMAP" : "", n.clearcoatRoughnessMap ? "#define USE_CLEARCOAT_ROUGHNESSMAP" : "", n.clearcoatNormalMap ? "#define USE_CLEARCOAT_NORMALMAP" : "", n.specularMap ? "#define USE_SPECULARMAP" : "", n.roughnessMap ? "#define USE_ROUGHNESSMAP" : "", n.metalnessMap ? "#define USE_METALNESSMAP" : "", n.alphaMap ? "#define USE_ALPHAMAP" : "", n.sheen ? "#define USE_SHEEN" : "", n.vertexTangents ? "#define USE_TANGENT" : "", n.vertexColors ? "#define USE_COLOR" : "", n.vertexUvs ? "#define USE_UV" : "", n.uvsVertexOnly ? "#define UVS_VERTEX_ONLY" : "", n.gradientMap ? "#define USE_GRADIENTMAP" : "", n.flatShading ? "#define FLAT_SHADED" : "", n.doubleSided ? "#define DOUBLE_SIDED" : "", n.flipSided ? "#define FLIP_SIDED" : "", n.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", n.shadowMapEnabled ? "#define " + p : "", n.premultipliedAlpha ? "#define PREMULTIPLIED_ALPHA" : "", n.physicallyCorrectLights ? "#define PHYSICALLY_CORRECT_LIGHTS" : "", n.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", n.logarithmicDepthBuffer && n.rendererExtensionFragDepth ? "#define USE_LOGDEPTHBUF_EXT" : "", (n.extensionShaderTextureLOD || n.envMap) && n.rendererExtensionShaderTextureLod ? "#define TEXTURE_LOD_EXT" : "", "uniform mat4 viewMatrix;", "uniform vec3 cameraPosition;", "uniform bool isOrthographic;", 0 !== n.toneMapping ? "#define TONE_MAPPING" : "", 0 !== n.toneMapping ? bi.tonemapping_pars_fragment : "", 0 !== n.toneMapping ? function(t, e) {
            var n;
            switch (e) {
              case 1:
                n = "Linear";
                break;

              case 2:
                n = "Reinhard";
                break;

              case 3:
                n = "Uncharted2";
                break;

              case 4:
                n = "OptimizedCineon";
                break;

              case 5:
                n = "ACESFilmic";
                break;

              default:
                throw new Error("unsupported toneMapping: " + e);
            }
            return "vec3 toneMapping( vec3 color ) { return " + n + "ToneMapping( color ); }";
        }(0, n.toneMapping) : "", n.dithering ? "#define DITHERING" : "", n.outputEncoding || n.mapEncoding || n.matcapEncoding || n.envMapEncoding || n.emissiveMapEncoding || n.lightMapEncoding ? bi.encodings_pars_fragment : "", n.mapEncoding ? Do("mapTexelToLinear", n.mapEncoding) : "", n.matcapEncoding ? Do("matcapTexelToLinear", n.matcapEncoding) : "", n.envMapEncoding ? Do("envMapTexelToLinear", n.envMapEncoding) : "", n.emissiveMapEncoding ? Do("emissiveMapTexelToLinear", n.emissiveMapEncoding) : "", n.lightMapEncoding ? Do("lightMapTexelToLinear", n.lightMapEncoding) : "", n.outputEncoding ? (c = "linearToOutputTexel", 
        v = jo(v = n.outputEncoding), "vec4 " + c + "( vec4 value ) { return LinearTo" + v[0] + v[1] + "; }") : "", n.depthPacking ? "#define DEPTH_PACKING " + n.depthPacking : "", "\n" ].filter(ko).join("\n")), 
        h = No(h = Co(h = Bo(h), n), n), f = No(f = Co(f = Bo(f), n), n), h = Ho(h), f = Ho(f), 
        n.isWebGL2 && !n.isRawShaderMaterial && (d = !1, y = /^\s*#version\s+300\s+es\s*\n/, 
        n.isShaderMaterial && null !== h.match(y) && null !== f.match(y) && (d = !0, h = h.replace(y, ""), 
        f = f.replace(y, "")), r = [ "#version 300 es\n", "#define attribute in", "#define varying out", "#define texture2D texture" ].join("\n") + "\n" + r, 
        i = [ "#version 300 es\n", "#define varying in", d ? "" : "out highp vec4 pc_fragColor;", d ? "" : "#define gl_FragColor pc_fragColor", "#define gl_FragDepthEXT gl_FragDepth", "#define texture2D texture", "#define textureCube texture", "#define texture2DProj textureProj", "#define texture2DLodEXT textureLod", "#define texture2DProjLodEXT textureProjLod", "#define textureCubeLodEXT textureLod", "#define texture2DGradEXT textureGrad", "#define texture2DProjGradEXT textureProjGrad", "#define textureCubeGradEXT textureGrad" ].join("\n") + "\n" + i), 
        m = r + h, p = i + f, c = Po(u, u.VERTEX_SHADER, m), v = Po(u, u.FRAGMENT_SHADER, p);
        return u.attachShader(x, c), u.attachShader(x, v), void 0 !== n.index0AttributeName ? u.bindAttribLocation(x, 0, n.index0AttributeName) : !0 === n.morphTargets && u.bindAttribLocation(x, 0, "position"), 
        u.linkProgram(x), t.debug.checkShaderErrors && (y = u.getProgramInfoLog(x).trim(), 
        d = u.getShaderInfoLog(c).trim(), h = u.getShaderInfoLog(v).trim(), !(t = f = !0) === u.getProgramParameter(x, u.LINK_STATUS) ? (f = !1, 
        o = Io(u, c, "vertex"), a = Io(u, v, "fragment"), console.error("THREE.WebGLProgram: shader error: ", u.getError(), "gl.VALIDATE_STATUS", u.getProgramParameter(x, u.VALIDATE_STATUS), "gl.getProgramInfoLog", y, o, a)) : "" !== y ? (console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()", y), 
        jt.a.environment === Ut.a.WX && ("" !== d && (console.error("vertexLog", d), console.error("vertexGlsl", m)), 
        "" !== h) && (console.error("fragmentLog", h), console.error("fragmentGlsl", p))) : "" !== d && "" !== h || (t = !1), 
        t) && (this.diagnostics = {
            runnable: f,
            programLog: y,
            vertexShader: {
                log: d,
                prefix: r
            },
            fragmentShader: {
                log: h,
                prefix: i
            }
        }), u.detachShader(x, c), u.detachShader(x, v), u.deleteShader(c), u.deleteShader(v), 
        this.getUniforms = function() {
            return s = void 0 === s ? new Ao(u, x) : s;
        }, this.getAttributes = function() {
            return l = void 0 === l ? function(t, e) {
                for (var n = {}, r = t.getProgramParameter(e, t.ACTIVE_ATTRIBUTES), i = 0; i < r; i++) {
                    var o = t.getActiveAttrib(e, i).name;
                    n[o] = t.getAttribLocation(e, o);
                }
                return n;
            }(u, x) : l;
        }, this.destroy = function() {
            u.deleteProgram(x), this.program = void 0;
        }, this.name = n.shaderName, this.id = Ro++, this.cacheKey = e, this.usedTimes = 1, 
        this.program = x, this.vertexShader = c, this.fragmentShader = v, this;
    }
    function Zo(t, e, n) {
        var r = [], i = n.isWebGL2, o = n.logarithmicDepthBuffer, a = n.floatVertexTextures, s = n.precision, l = n.maxVertexUniforms, u = n.vertexTextures, c = {
            MeshDepthMaterial: "depth",
            MeshDistanceMaterial: "distanceRGBA",
            MeshNormalMaterial: "normal",
            MeshBasicMaterial: "basic",
            MeshLambertMaterial: "lambert",
            MeshPhongMaterial: "phong",
            MeshToonMaterial: "toon",
            MeshStandardMaterial: "physical",
            MeshPhysicalMaterial: "physical",
            MeshMatcapMaterial: "matcap",
            LineBasicMaterial: "basic",
            LineDashedMaterial: "dashed",
            PointsMaterial: "points",
            ShadowMaterial: "shadow",
            SpriteMaterial: "sprite"
        }, h = [ "precision", "isWebGL2", "supportsVertexTextures", "outputEncoding", "instancing", "map", "mapEncoding", "matcap", "matcapEncoding", "envMap", "envMapMode", "envMapEncoding", "envMapCubeUV", "lightMap", "lightMapEncoding", "aoMap", "emissiveMap", "emissiveMapEncoding", "bumpMap", "normalMap", "objectSpaceNormalMap", "tangentSpaceNormalMap", "clearcoatMap", "clearcoatRoughnessMap", "clearcoatNormalMap", "displacementMap", "specularMap", "roughnessMap", "metalnessMap", "gradientMap", "alphaMap", "combine", "vertexColors", "vertexTangents", "vertexUvs", "uvsVertexOnly", "fog", "useFog", "fogExp2", "flatShading", "sizeAttenuation", "logarithmicDepthBuffer", "skinning", "maxBones", "useVertexTexture", "morphTargets", "morphNormals", "maxMorphTargets", "maxMorphNormals", "premultipliedAlpha", "numDirLights", "numPointLights", "numSpotLights", "numHemiLights", "numRectAreaLights", "numDirLightShadows", "numPointLightShadows", "numSpotLightShadows", "shadowMapEnabled", "shadowMapType", "toneMapping", "physicallyCorrectLights", "alphaTest", "doubleSided", "flipSided", "numClippingPlanes", "numClipIntersection", "depthPacking", "dithering", "sheen" ];
        function f(t) {
            var e;
            return t ? t.isTexture ? e = t.encoding : t.isWebGLRenderTarget && (console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."), 
            e = t.texture.encoding) : e = 3e3, e;
        }
        this.getParameters = function(r, h, p, d, y, m, v) {
            var g, b = d.fog, x = (d = r.isMeshStandardMaterial ? d.environment : null, d = r.envMap || d, 
            c[r.type]), w = v.isSkinnedMesh ? (w = (w = v).skeleton.bones, a ? 1024 : (g = Math.floor((l - 20) / 4), 
            (g = Math.min(g, w.length)) < w.length ? (console.warn("THREE.WebGLRenderer: Skeleton has " + w.length + " bones. This GPU supports " + g + "."), 
            0) : g)) : 0, S = (null !== r.precision && (s = n.getMaxPrecision(r.precision)) !== r.precision && console.warn("THREE.WebGLProgram.getParameters:", r.precision, "not supported, using", s, "instead."), 
            g = r, (S = x) ? (S = xi[S], {
                name: g.type,
                uniforms: Br.clone(S.uniforms),
                vertexShader: S.vertexShader,
                fragmentShader: S.fragmentShader
            }) : {
                name: g.type,
                uniforms: g.uniforms,
                vertexShader: g.vertexShader,
                fragmentShader: g.fragmentShader
            }), _ = (r.onBeforeCompile(S, t), t.getRenderTarget());
            return {
                isWebGL2: i,
                shaderID: x,
                shaderName: S.name,
                uniforms: S.uniforms,
                vertexShader: S.vertexShader,
                fragmentShader: S.fragmentShader,
                defines: r.defines,
                isRawShaderMaterial: r.isRawShaderMaterial,
                isShaderMaterial: r.isShaderMaterial,
                precision: s,
                instancing: !0 === v.isInstancedMesh,
                supportsVertexTextures: u,
                outputEncoding: null !== _ ? f(_.texture) : t.outputEncoding,
                map: !!r.map,
                mapEncoding: f(r.map),
                matcap: !!r.matcap,
                matcapEncoding: f(r.matcap),
                envMap: !!d,
                envMapMode: d && d.mapping,
                envMapEncoding: f(d),
                envMapCubeUV: !!d && (306 === d.mapping || 307 === d.mapping),
                lightMap: !!r.lightMap,
                lightMapEncoding: f(r.lightMap),
                aoMap: !!r.aoMap,
                emissiveMap: !!r.emissiveMap,
                emissiveMapEncoding: f(r.emissiveMap),
                bumpMap: !!r.bumpMap,
                normalMap: !!r.normalMap,
                objectSpaceNormalMap: 1 === r.normalMapType,
                tangentSpaceNormalMap: 0 === r.normalMapType,
                clearcoatMap: !!r.clearcoatMap,
                clearcoatRoughnessMap: !!r.clearcoatRoughnessMap,
                clearcoatNormalMap: !!r.clearcoatNormalMap,
                displacementMap: !!r.displacementMap,
                roughnessMap: !!r.roughnessMap,
                metalnessMap: !!r.metalnessMap,
                specularMap: !!r.specularMap,
                alphaMap: !!r.alphaMap,
                gradientMap: !!r.gradientMap,
                sheen: !!r.sheen,
                combine: r.combine,
                vertexTangents: r.normalMap && r.vertexTangents,
                vertexColors: r.vertexColors,
                vertexUvs: !!(r.map || r.bumpMap || r.normalMap || r.specularMap || r.alphaMap || r.emissiveMap || r.roughnessMap || r.metalnessMap || r.clearcoatMap || r.clearcoatRoughnessMap || r.clearcoatNormalMap || r.displacementMap),
                uvsVertexOnly: !(r.map || r.bumpMap || r.normalMap || r.specularMap || r.alphaMap || r.emissiveMap || r.roughnessMap || r.metalnessMap || r.clearcoatNormalMap || !r.displacementMap),
                fog: !!b,
                useFog: r.fog,
                fogExp2: b && b.isFogExp2,
                flatShading: r.flatShading,
                sizeAttenuation: r.sizeAttenuation,
                logarithmicDepthBuffer: o,
                skinning: r.skinning && 0 < w,
                maxBones: w,
                useVertexTexture: a,
                morphTargets: r.morphTargets,
                morphNormals: r.morphNormals,
                maxMorphTargets: t.maxMorphTargets,
                maxMorphNormals: t.maxMorphNormals,
                numDirLights: h.directional.length,
                numPointLights: h.point.length,
                numSpotLights: h.spot.length,
                numRectAreaLights: h.rectArea.length,
                numHemiLights: h.hemi.length,
                numDirLightShadows: h.directionalShadowMap.length,
                numPointLightShadows: h.pointShadowMap.length,
                numSpotLightShadows: h.spotShadowMap.length,
                numClippingPlanes: y,
                numClipIntersection: m,
                dithering: r.dithering,
                shadowMapEnabled: t.shadowMap.enabled && 0 < p.length,
                shadowMapType: t.shadowMap.type,
                toneMapping: r.toneMapped ? t.toneMapping : 0,
                physicallyCorrectLights: t.physicallyCorrectLights,
                premultipliedAlpha: r.premultipliedAlpha,
                alphaTest: r.alphaTest,
                doubleSided: 2 === r.side,
                flipSided: 1 === r.side,
                depthPacking: void 0 !== r.depthPacking && r.depthPacking,
                index0AttributeName: r.index0AttributeName,
                extensionDerivatives: r.extensions && r.extensions.derivatives,
                extensionFragDepth: r.extensions && r.extensions.fragDepth,
                extensionDrawBuffers: r.extensions && r.extensions.drawBuffers,
                extensionShaderTextureLOD: r.extensions && r.extensions.shaderTextureLOD,
                rendererExtensionFragDepth: i || null !== e.get("EXT_frag_depth"),
                rendererExtensionDrawBuffers: i || null !== e.get("WEBGL_draw_buffers"),
                rendererExtensionShaderTextureLod: i || null !== e.get("EXT_shader_texture_lod"),
                onBeforeCompile: r.onBeforeCompile
            };
        }, this.getProgramCacheKey = function(e) {
            var n = [];
            if (e.shaderID ? n.push(e.shaderID) : (n.push(e.fragmentShader), n.push(e.vertexShader)), 
            void 0 !== e.defines) for (var r in e.defines) n.push(r), n.push(e.defines[r]);
            if (void 0 === e.isRawShaderMaterial) {
                for (var i = 0; i < h.length; i++) n.push(e[h[i]]);
                n.push(t.outputEncoding), n.push(t.gammaFactor);
            }
            return n.push(e.onBeforeCompile.toString()), n.join();
        }, this.acquireProgram = function(e, n) {
            for (var i, o = 0, a = r.length; o < a; o++) {
                var s = r[o];
                if (s.cacheKey === n) {
                    ++(i = s).usedTimes;
                    break;
                }
            }
            return void 0 === i && (i = new Xo(t, n, e), r.push(i)), i;
        }, this.releaseProgram = function(t) {
            var e;
            0 == --t.usedTimes && (e = r.indexOf(t), r[e] = r[r.length - 1], r.pop(), t.destroy());
        }, this.programs = r;
    }
    function qo() {
        var t = new WeakMap();
        return {
            get: function(e) {
                var n = t.get(e);
                return void 0 === n && t.set(e, n = {}), n;
            },
            remove: function(e) {
                t.delete(e);
            },
            update: function(e, n, r) {
                t.get(e)[n] = r;
            },
            dispose: function() {
                t = new WeakMap();
            }
        };
    }
    function Ko(t, e) {
        return t.groupOrder !== e.groupOrder ? t.groupOrder - e.groupOrder : t.renderOrder !== e.renderOrder ? t.renderOrder - e.renderOrder : t.program !== e.program ? t.program.id - e.program.id : t.material.id !== e.material.id ? t.material.id - e.material.id : t.z !== e.z ? t.z - e.z : t.id - e.id;
    }
    function Jo(t, e) {
        return t.groupOrder !== e.groupOrder ? t.groupOrder - e.groupOrder : t.renderOrder !== e.renderOrder ? t.renderOrder - e.renderOrder : t.z !== e.z ? e.z - t.z : t.id - e.id;
    }
    function Qo() {
        var t = [], e = 0, n = [], r = [], i = {
            id: -1
        };
        function o(n, r, o, a, s, l) {
            var u = t[e];
            return void 0 === u ? (u = {
                id: n.id,
                object: n,
                geometry: r,
                material: o,
                program: o.program || i,
                groupOrder: a,
                renderOrder: n.renderOrder,
                z: s,
                group: l
            }, t[e] = u) : (u.id = n.id, u.object = n, u.geometry = r, u.material = o, u.program = o.program || i, 
            u.groupOrder = a, u.renderOrder = n.renderOrder, u.z = s, u.group = l), e++, u;
        }
        return {
            opaque: n,
            transparent: r,
            init: function() {
                e = 0, r.length = n.length = 0;
            },
            push: function(t, e, i, a, s, l) {
                e = o(t, e, i, a, s, l), (!1 !== t.userData.transparent && !0 === i.transparent ? r : n).push(e);
            },
            unshift: function(t, e, i, a, s, l) {
                e = o(t, e, i, a, s, l), !1 === t.userData.transparent ? n.push(e) : (!0 === i.transparent ? r : n).unshift(e);
            },
            finish: function() {
                for (var n = e, r = t.length; n < r; n++) {
                    var i = t[n];
                    if (null === i.id) break;
                    i.id = null, i.object = null, i.geometry = null, i.material = null, i.program = null, 
                    i.group = null;
                }
            },
            sort: function(t, e) {
                1 < n.length && n.sort(t || Ko), 1 < r.length && r.sort(e || Jo);
            }
        };
    }
    function $o() {
        var t = new WeakMap();
        function e(n) {
            (n = n.target).removeEventListener("dispose", e), t.delete(n);
        }
        return {
            get: function(n, r) {
                var i, o = t.get(n);
                return void 0 === o ? (i = new Qo(), t.set(n, new WeakMap()), t.get(n).set(r, i), 
                n.addEventListener("dispose", e)) : void 0 === (i = o.get(r)) && (i = new Qo(), 
                o.set(r, i)), i;
            },
            dispose: function() {
                t = new WeakMap();
            }
        };
    }
    function ta() {
        var t = {};
        return {
            get: function(e) {
                if (void 0 !== t[e.id]) return t[e.id];
                var n;
                switch (e.type) {
                  case "DirectionalLight":
                    n = {
                        direction: new h(),
                        color: new Xt()
                    };
                    break;

                  case "SpotLight":
                    n = {
                        position: new h(),
                        direction: new h(),
                        color: new Xt(),
                        distance: 0,
                        coneCos: 0,
                        penumbraCos: 0,
                        decay: 0
                    };
                    break;

                  case "PointLight":
                    n = {
                        position: new h(),
                        color: new Xt(),
                        distance: 0,
                        decay: 0
                    };
                    break;

                  case "HemisphereLight":
                    n = {
                        direction: new h(),
                        skyColor: new Xt(),
                        groundColor: new Xt()
                    };
                    break;

                  case "RectAreaLight":
                    n = {
                        color: new Xt(),
                        position: new h(),
                        halfWidth: new h(),
                        halfHeight: new h()
                    };
                }
                return t[e.id] = n;
            }
        };
    }
    var ea = 0;
    function na(t, e) {
        return (e.castShadow ? 1 : 0) - (t.castShadow ? 1 : 0);
    }
    function ra() {
        for (var t, e = new ta(), n = (t = {}, {
            get: function(e) {
                if (void 0 !== t[e.id]) return t[e.id];
                var n;
                switch (e.type) {
                  case "DirectionalLight":
                  case "SpotLight":
                    n = {
                        shadowBias: 0,
                        shadowRadius: 1,
                        shadowMapSize: new Mt()
                    };
                    break;

                  case "PointLight":
                    n = {
                        shadowBias: 0,
                        shadowRadius: 1,
                        shadowMapSize: new Mt(),
                        shadowCameraNear: 1,
                        shadowCameraFar: 1e3
                    };
                }
                return t[e.id] = n;
            }
        }), r = {
            version: 0,
            hash: {
                directionalLength: -1,
                pointLength: -1,
                spotLength: -1,
                rectAreaLength: -1,
                hemiLength: -1,
                numDirectionalShadows: -1,
                numPointShadows: -1,
                numSpotShadows: -1
            },
            ambient: [ 0, 0, 0 ],
            probe: [],
            directional: [],
            directionalShadow: [],
            directionalShadowMap: [],
            directionalShadowMatrix: [],
            spot: [],
            spotShadow: [],
            spotShadowMap: [],
            spotShadowMatrix: [],
            rectArea: [],
            point: [],
            pointShadow: [],
            pointShadowMap: [],
            pointShadowMatrix: [],
            hemi: []
        }, i = 0; i < 9; i++) r.probe.push(new h());
        var o = new h(), a = new b(), s = new b();
        return {
            setup: function(t, i, l) {
                for (var u = 0, c = 0, h = 0, f = 0; f < 9; f++) r.probe[f].set(0, 0, 0);
                var p = 0, d = 0, y = 0, m = 0, v = 0, g = 0, b = 0, x = 0, w = l.matrixWorldInverse;
                t.sort(na);
                f = 0;
                for (var S = t.length; f < S; f++) {
                    var _, E, O, M = t[f], T = M.color, L = M.intensity, A = M.distance, P = M.shadow && M.shadow.map ? M.shadow.map.texture : null;
                    if (M.isAmbientLight) u += T.r * L, c += T.g * L, h += T.b * L; else if (M.isLightProbe) for (var R = 0; R < 9; R++) r.probe[R].addScaledVector(M.sh.coefficients[R], L); else M.isDirectionalLight ? ((O = e.get(M)).color.copy(M.color).multiplyScalar(M.intensity), 
                    O.direction.setFromMatrixPosition(M.matrixWorld), o.setFromMatrixPosition(M.target.matrixWorld), 
                    O.direction.sub(o), O.direction.transformDirection(w), M.castShadow && (_ = M.shadow, 
                    (E = n.get(M)).shadowBias = _.bias, E.shadowRadius = _.radius, E.shadowMapSize = _.mapSize, 
                    r.directionalShadow[p] = E, r.directionalShadowMap[p] = P, r.directionalShadowMatrix[p] = M.shadow.matrix, 
                    g++), r.directional[p] = O, p++) : M.isSpotLight ? ((O = e.get(M)).position.setFromMatrixPosition(M.matrixWorld), 
                    O.position.applyMatrix4(w), O.color.copy(T).multiplyScalar(L), O.distance = A, O.direction.setFromMatrixPosition(M.matrixWorld), 
                    o.setFromMatrixPosition(M.target.matrixWorld), O.direction.sub(o), O.direction.transformDirection(w), 
                    O.coneCos = Math.cos(M.angle), O.penumbraCos = Math.cos(M.angle * (1 - M.penumbra)), 
                    O.decay = M.decay, M.castShadow && (_ = M.shadow, (E = n.get(M)).shadowBias = _.bias, 
                    E.shadowRadius = _.radius, E.shadowMapSize = _.mapSize, r.spotShadow[y] = E, r.spotShadowMap[y] = P, 
                    r.spotShadowMatrix[y] = M.shadow.matrix, x++), r.spot[y] = O, y++) : M.isRectAreaLight ? ((O = e.get(M)).color.copy(T).multiplyScalar(L), 
                    O.position.setFromMatrixPosition(M.matrixWorld), O.position.applyMatrix4(w), s.identity(), 
                    a.copy(M.matrixWorld), a.premultiply(w), s.extractRotation(a), O.halfWidth.set(.5 * M.width, 0, 0), 
                    O.halfHeight.set(0, .5 * M.height, 0), O.halfWidth.applyMatrix4(s), O.halfHeight.applyMatrix4(s), 
                    r.rectArea[m] = O, m++) : M.isPointLight ? ((O = e.get(M)).position.setFromMatrixPosition(M.matrixWorld), 
                    O.position.applyMatrix4(w), O.color.copy(M.color).multiplyScalar(M.intensity), O.distance = M.distance, 
                    O.decay = M.decay, M.castShadow && (_ = M.shadow, (E = n.get(M)).shadowBias = _.bias, 
                    E.shadowRadius = _.radius, E.shadowMapSize = _.mapSize, E.shadowCameraNear = _.camera.near, 
                    E.shadowCameraFar = _.camera.far, r.pointShadow[d] = E, r.pointShadowMap[d] = P, 
                    r.pointShadowMatrix[d] = M.shadow.matrix, b++), r.point[d] = O, d++) : M.isHemisphereLight && ((O = e.get(M)).direction.setFromMatrixPosition(M.matrixWorld), 
                    O.direction.transformDirection(w), O.direction.normalize(), O.skyColor.copy(M.color).multiplyScalar(L), 
                    O.groundColor.copy(M.groundColor).multiplyScalar(L), r.hemi[v] = O, v++);
                }
                r.ambient[0] = u, r.ambient[1] = c, r.ambient[2] = h, (l = r.hash).directionalLength === p && l.pointLength === d && l.spotLength === y && l.rectAreaLength === m && l.hemiLength === v && l.numDirectionalShadows === g && l.numPointShadows === b && l.numSpotShadows === x || (r.directional.length = p, 
                r.spot.length = y, r.rectArea.length = m, r.point.length = d, r.hemi.length = v, 
                r.directionalShadow.length = g, r.directionalShadowMap.length = g, r.pointShadow.length = b, 
                r.pointShadowMap.length = b, r.spotShadow.length = x, r.spotShadowMap.length = x, 
                r.directionalShadowMatrix.length = g, r.pointShadowMatrix.length = b, r.spotShadowMatrix.length = x, 
                l.directionalLength = p, l.pointLength = d, l.spotLength = y, l.rectAreaLength = m, 
                l.hemiLength = v, l.numDirectionalShadows = g, l.numPointShadows = b, l.numSpotShadows = x, 
                r.version = ea++);
            },
            state: r
        };
    }
    function ia() {
        var t = new ra(), e = [], n = [];
        return {
            init: function() {
                e.length = 0, n.length = 0;
            },
            state: {
                lightsArray: e,
                shadowsArray: n,
                lights: t
            },
            setupLights: function(r) {
                t.setup(e, n, r);
            },
            pushLight: function(t) {
                e.push(t);
            },
            pushShadow: function(t) {
                n.push(t);
            }
        };
    }
    function oa() {
        var t = new WeakMap();
        function e(n) {
            (n = n.target).removeEventListener("dispose", e), t.delete(n);
        }
        return {
            get: function(n, r) {
                var i;
                return !1 === t.has(n) ? (i = new ia(), t.set(n, new WeakMap()), t.get(n).set(r, i), 
                n.addEventListener("dispose", e)) : !1 === t.get(n).has(r) ? (i = new ia(), t.get(n).set(r, i)) : i = t.get(n).get(r), 
                i;
            },
            dispose: function() {
                t = new WeakMap();
            }
        };
    }
    function aa(t, e, n) {
        this.width = t, this.height = e, this.scissor = new Bt(0, 0, t, e), this.scissorTest = !1, 
        this.viewport = new Bt(0, 0, t, e), this.texture = new Zn(void 0, (n = n || {}).mapping, n.wrapS, n.wrapT, n.magFilter, n.minFilter, n.format, n.type, n.anisotropy, n.encoding), 
        this.texture.image = {}, this.texture.image.width = t, this.texture.image.height = e, 
        this.texture.generateMipmaps = void 0 !== n.generateMipmaps && n.generateMipmaps, 
        this.texture.minFilter = void 0 !== n.minFilter ? n.minFilter : mt, this.depthBuffer = void 0 === n.depthBuffer || n.depthBuffer, 
        this.stencilBuffer = void 0 === n.stencilBuffer || n.stencilBuffer, this.depthTexture = void 0 !== n.depthTexture ? n.depthTexture : null;
    }
    function sa(t) {
        Cr.call(this), this.type = "MeshDepthMaterial", this.depthPacking = 3200, this.skinning = !1, 
        this.morphTargets = !1, this.map = null, this.alphaMap = null, this.displacementMap = null, 
        this.displacementScale = 1, this.displacementBias = 0, this.wireframe = !1, this.wireframeLinewidth = 1, 
        this.fog = !1, this.setValues(t);
    }
    function la(t) {
        Cr.call(this), this.type = "MeshDistanceMaterial", this.referencePosition = new h(), 
        this.nearDistance = 1, this.farDistance = 1e3, this.skinning = !1, this.morphTargets = !1, 
        this.map = null, this.alphaMap = null, this.displacementMap = null, this.displacementScale = 1, 
        this.displacementBias = 0, this.fog = !1, this.setValues(t);
    }
    aa.prototype = Object.assign(Object.create(x.prototype), {
        constructor: aa,
        isWebGLRenderTarget: !0,
        setSize: function(t, e) {
            this.width === t && this.height === e || (this.width = t, this.height = e, this.texture.image.width = t, 
            this.texture.image.height = e, this.dispose()), this.viewport.set(0, 0, t, e), this.scissor.set(0, 0, t, e);
        },
        clone: function() {
            return new this.constructor().copy(this);
        },
        copy: function(t) {
            return this.width = t.width, this.height = t.height, this.viewport.copy(t.viewport), 
            this.texture = t.texture.clone(), this.depthBuffer = t.depthBuffer, this.stencilBuffer = t.stencilBuffer, 
            this.depthTexture = t.depthTexture, this;
        },
        dispose: function() {
            this.dispatchEvent({
                type: "dispose"
            });
        }
    }), ((sa.prototype = Object.create(Cr.prototype)).constructor = sa).prototype.isMeshDepthMaterial = !0, 
    sa.prototype.copy = function(t) {
        return Cr.prototype.copy.call(this, t), this.depthPacking = t.depthPacking, this.skinning = t.skinning, 
        this.morphTargets = t.morphTargets, this.map = t.map, this.alphaMap = t.alphaMap, 
        this.displacementMap = t.displacementMap, this.displacementScale = t.displacementScale, 
        this.displacementBias = t.displacementBias, this.wireframe = t.wireframe, this.wireframeLinewidth = t.wireframeLinewidth, 
        this;
    }, ((la.prototype = Object.create(Cr.prototype)).constructor = la).prototype.isMeshDistanceMaterial = !0, 
    la.prototype.copy = function(t) {
        return Cr.prototype.copy.call(this, t), this.referencePosition.copy(t.referencePosition), 
        this.nearDistance = t.nearDistance, this.farDistance = t.farDistance, this.skinning = t.skinning, 
        this.morphTargets = t.morphTargets, this.map = t.map, this.alphaMap = t.alphaMap, 
        this.displacementMap = t.displacementMap, this.displacementScale = t.displacementScale, 
        this.displacementBias = t.displacementBias, this;
    };
    function ua(t, e, n) {
        var r = new ft(), i = new Mt(), o = new Mt(), a = new Bt(), s = [], l = [], u = {}, c = {
            0: 1,
            1: 0,
            2: 2
        }, h = new Ur({
            defines: {
                SAMPLE_RATE: .25,
                HALF_SAMPLE_RATE: 1 / 8
            },
            uniforms: {
                shadow_pass: {
                    value: null
                },
                resolution: {
                    value: new Mt()
                },
                radius: {
                    value: 4
                }
            },
            vertexShader: "\n\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}\n\n",
            fragmentShader: "\nuniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n\n#include <packing>\n\nvoid main() {\n\n  float mean = 0.0;\n  float squared_mean = 0.0;\n\n\t// This seems totally useless but it's a crazy work around for a Adreno compiler bug\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\n    #ifdef HORIZONAL_PASS\n\n      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\n    #else\n\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n\n    #endif\n\n  }\n\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n\n  float std_dev = sqrt( squared_mean - mean * mean );\n\n  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n\n}\n"
        }), f = h.clone(), p = (f.defines.HORIZONAL_PASS = 1, new Mr()), d = (p.setAttribute("position", new sr(new Float32Array([ -1, -1, .5, 3, -1, .5, -1, 3, .5 ]), 3)), 
        new mi(p, h)), y = this;
        function m(t, e, n) {
            var r = s[n = t << 0 | e << 1 | n << 2];
            return void 0 === r && (r = new sa({
                depthPacking: 3201,
                morphTargets: t,
                skinning: e
            }), s[n] = r), r;
        }
        function v(t, e, n) {
            var r = l[n = t << 0 | e << 1 | n << 2];
            return void 0 === r && (r = new la({
                morphTargets: t,
                skinning: e
            }), l[n] = r), r;
        }
        function g(e, n, r, i, o, a) {
            var s, l = e.geometry, h = null, f = m, p = e.customDepthMaterial;
            return !0 === r.isPointLight && (f = v, p = e.customDistanceMaterial), h = void 0 === p ? (!(s = !1) === n.morphTargets && (!0 === l.isBufferGeometry ? s = l.morphAttributes && l.morphAttributes.position && 0 < l.morphAttributes.position.length : !0 === l.isGeometry && (s = l.morphTargets && 0 < l.morphTargets.length)), 
            !(l = !1) === e.isSkinnedMesh && (!0 === n.skinning ? l = !0 : console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:", e)), 
            f(s, l, !0 === e.isInstancedMesh)) : p, t.localClippingEnabled && !0 === n.clipShadows && 0 !== n.clippingPlanes.length && (f = h.uuid, 
            s = n.uuid, void 0 === (l = u[f]) && (u[f] = l = {}), void 0 === (e = l[s]) && (e = h.clone(), 
            l[s] = e), h = e), h.visible = n.visible, h.wireframe = n.wireframe, h.side = 3 === a ? null !== n.shadowSide ? n.shadowSide : n.side : null !== n.shadowSide ? n.shadowSide : c[n.side], 
            h.clipShadows = n.clipShadows, h.clippingPlanes = n.clippingPlanes, h.clipIntersection = n.clipIntersection, 
            h.wireframeLinewidth = n.wireframeLinewidth, h.linewidth = n.linewidth, !0 === r.isPointLight && !0 === h.isMeshDistanceMaterial && (h.referencePosition.setFromMatrixPosition(r.matrixWorld), 
            h.nearDistance = i, h.farDistance = o), h;
        }
        this.enabled = !1, this.autoUpdate = !0, this.needsUpdate = !1, this.type = 1, this.render = function(s, l, u) {
            if (!1 !== y.enabled && (!1 !== y.autoUpdate || !1 !== y.needsUpdate) && 0 !== s.length) {
                var c = t.getRenderTarget(), p = t.getActiveCubeFace(), m = t.getActiveMipmapLevel(), v = t.state;
                v.setBlending(0), v.buffers.color.setClear(1, 1, 1, 1), v.buffers.depth.setTest(!0), 
                v.setScissorTest(!1);
                for (var b, x, w = 0, S = s.length; w < S; w++) {
                    var _ = s[w], E = _.shadow;
                    if (void 0 === E) console.warn("THREE.WebGLShadowMap:", _, "has no shadow."); else {
                        i.copy(E.mapSize);
                        for (var O, M = E.getFrameExtents(), T = (i.multiply(M), o.copy(E.mapSize), (i.x > n || i.y > n) && (console.warn("THREE.WebGLShadowMap:", _, "has shadow exceeding max texture size, reducing"), 
                        i.x > n && (o.x = Math.floor(n / M.x), i.x = o.x * M.x, E.mapSize.x = o.x), i.y > n) && (o.y = Math.floor(n / M.y), 
                        i.y = o.y * M.y, E.mapSize.y = o.y), null !== E.map || E.isPointLightShadow || 3 !== this.type || (E.map = new aa(i.x, i.y, O = {
                            minFilter: mt,
                            magFilter: mt,
                            format: bt
                        }), E.map.texture.name = _.name + ".shadowMap", E.mapPass = new aa(i.x, i.y, O), 
                        E.camera.updateProjectionMatrix()), null === E.map && (E.map = new aa(i.x, i.y, O = {
                            minFilter: yt,
                            magFilter: yt,
                            format: bt
                        }), E.map.texture.name = _.name + ".shadowMap", E.camera.updateProjectionMatrix()), 
                        t.setRenderTarget(E.map), t.clear(), E.getViewportCount()), L = 0; L < T; L++) {
                            var A = E.getViewport(L);
                            a.set(o.x * A.x, o.y * A.y, o.x * A.z, o.y * A.w), v.viewport(a), E.updateMatrices(_, L), 
                            r = E.getFrustum(), function n(i, o, a, s, l) {
                                if (!1 !== i.visible) {
                                    if (i.layers.test(o.layers) && (i.isMesh || i.isLine || i.isPoints) && (i.castShadow || i.receiveShadow && 3 === l) && (!i.frustumCulled || r.intersectsObject(i))) {
                                        i.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse, i.matrixWorld);
                                        var u = e.update(i), c = i.material;
                                        if (Array.isArray(c)) for (var h = u.groups, f = 0, p = h.length; f < p; f++) {
                                            var d, y = h[f], m = c[y.materialIndex];
                                            m && m.visible && (d = g(i, m, s, a.near, a.far, l), t.renderBufferDirect(a, null, u, d, i, y));
                                        } else c.visible && (d = g(i, c, s, a.near, a.far, l), t.renderBufferDirect(a, null, u, d, i, null));
                                    }
                                    for (var v = i.children, b = 0, x = v.length; b < x; b++) n(v[b], o, a, s, l);
                                }
                            }(l, u, E.camera, _, this.type);
                        }
                        E.isPointLightShadow || 3 !== this.type || (M = E, b = u, void 0, x = e.update(d), 
                        h.uniforms.shadow_pass.value = M.map.texture, h.uniforms.resolution.value = M.mapSize, 
                        h.uniforms.radius.value = M.radius, t.setRenderTarget(M.mapPass), t.clear(), t.renderBufferDirect(b, null, x, h, d, null), 
                        f.uniforms.shadow_pass.value = M.mapPass.texture, f.uniforms.resolution.value = M.mapSize, 
                        f.uniforms.radius.value = M.radius, t.setRenderTarget(M.map), t.clear(), t.renderBufferDirect(b, null, x, f, d, null));
                    }
                }
                y.needsUpdate = !1, t.setRenderTarget(c, p, m);
            }
        };
    }
    function ca(t) {
        return (ca = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function ha(t, e, n) {
        return (e = function(t) {
            return t = function(t, e) {
                if ("object" != ca(t) || !t) return t;
                var n = t[Symbol.toPrimitive];
                if (void 0 === n) return String(t);
                if ("object" != ca(n = n.call(t, e))) return n;
                throw new TypeError("@@toPrimitive must return a primitive value.");
            }(t, "string"), "symbol" == ca(t) ? t : String(t);
        }(e)) in t ? Object.defineProperty(t, e, {
            value: n,
            enumerable: !0,
            configurable: !0,
            writable: !0
        }) : t[e] = n, t;
    }
    function fa(t, e, n) {
        var r = n.isWebGL2, i = new function() {
            var e = !1, n = new Bt(), r = null, i = new Bt(0, 0, 0, 0);
            return {
                setMask: function(n) {
                    r === n || e || (t.colorMask(n, n, n, n), r = n);
                },
                setLocked: function(t) {
                    e = t;
                },
                setClear: function(e, r, o, a, s) {
                    !0 === s && (e *= a, r *= a, o *= a), n.set(e, r, o, a), !1 === i.equals(n) && (t.clearColor(e, r, o, a), 
                    i.copy(n));
                },
                reset: function() {
                    e = !1, r = null, i.set(-1, 0, 0, 0);
                }
            };
        }(), o = new function() {
            var e = !1, n = null, r = null, i = null;
            return {
                setTest: function(e) {
                    (e ? C : N)(t.DEPTH_TEST);
                },
                setMask: function(r) {
                    n === r || e || (t.depthMask(r), n = r);
                },
                setFunc: function(e) {
                    if (r !== e) {
                        if (e) switch (e) {
                          case 0:
                            t.depthFunc(t.NEVER);
                            break;

                          case 1:
                            t.depthFunc(t.ALWAYS);
                            break;

                          case 2:
                            t.depthFunc(t.LESS);
                            break;

                          case 3:
                            t.depthFunc(t.LEQUAL);
                            break;

                          case 4:
                            t.depthFunc(t.EQUAL);
                            break;

                          case 5:
                            t.depthFunc(t.GEQUAL);
                            break;

                          case 6:
                            t.depthFunc(t.GREATER);
                            break;

                          case 7:
                            t.depthFunc(t.NOTEQUAL);
                            break;

                          default:
                            t.depthFunc(t.LEQUAL);
                        } else t.depthFunc(t.LEQUAL);
                        r = e;
                    }
                },
                setLocked: function(t) {
                    e = t;
                },
                setClear: function(e) {
                    i !== e && (t.clearDepth(e), i = e);
                },
                reset: function() {
                    e = !1, i = r = n = null;
                }
            };
        }(), a = new function() {
            var e = !1, n = null, r = null, i = null, o = null, a = null, s = null, l = null, u = null;
            return {
                setTest: function(n) {
                    e || (n ? C : N)(t.STENCIL_TEST);
                },
                setMask: function(r) {
                    n === r || e || (t.stencilMask(r), n = r);
                },
                setFunc: function(e, n, a) {
                    r === e && i === n && o === a || (t.stencilFunc(e, n, a), r = e, i = n, o = a);
                },
                setOp: function(e, n, r) {
                    a === e && s === n && l === r || (t.stencilOp(e, n, r), a = e, s = n, l = r);
                },
                setLocked: function(t) {
                    e = t;
                },
                setClear: function(e) {
                    u !== e && (t.clearStencil(e), u = e);
                },
                reset: function() {
                    e = !1, u = l = s = a = o = i = r = n = null;
                }
            };
        }(), s = (n = t.getParameter(t.MAX_VERTEX_ATTRIBS), new Uint8Array(n)), l = new Uint8Array(n), u = new Uint8Array(n), c = {}, h = null, f = null, p = null, d = null, y = null, m = null, v = null, g = null, b = null, x = !1, w = null, S = null, _ = null, E = null, O = null, M = t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS), T = !1, L = (n = 0, 
        t.getParameter(t.VERSION)), A = (-1 !== L.indexOf("WebGL") ? (n = parseFloat(/^WebGL\ ([0-9])/.exec(L)[1]), 
        T = 1 <= n) : -1 !== L.indexOf("OpenGL ES") && (n = parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(L)[1]), 
        T = 2 <= n), null), P = {}, R = new Bt(), j = new Bt();
        function I(e, n, r) {
            var i = new Uint8Array(4), o = t.createTexture();
            t.bindTexture(e, o), t.texParameteri(e, t.TEXTURE_MIN_FILTER, t.NEAREST), t.texParameteri(e, t.TEXTURE_MAG_FILTER, t.NEAREST);
            for (var a = 0; a < r; a++) t.texImage2D(n + a, 0, t.RGBA, 1, 1, 0, t.RGBA, t.UNSIGNED_BYTE, i);
            return o;
        }
        var D = {};
        function k(n, i) {
            s[n] = 1, 0 === l[n] && (t.enableVertexAttribArray(n), l[n] = 1), u[n] !== i && ((r ? t : e.get("ANGLE_instanced_arrays"))[r ? "vertexAttribDivisor" : "vertexAttribDivisorANGLE"](n, i), 
            u[n] = i);
        }
        function C(e) {
            !0 !== c[e] && (t.enable(e), c[e] = !0);
        }
        function N(e) {
            !1 !== c[e] && (t.disable(e), c[e] = !1);
        }
        D[t.TEXTURE_2D] = I(t.TEXTURE_2D, t.TEXTURE_2D, 1), D[t.TEXTURE_CUBE_MAP] = I(t.TEXTURE_CUBE_MAP, t.TEXTURE_CUBE_MAP_POSITIVE_X, 6), 
        i.setClear(0, 0, 0, 1), o.setClear(1), a.setClear(0), C(t.DEPTH_TEST), o.setFunc(3), 
        z(!1), G(1), C(t.CULL_FACE), U(0);
        var F = ha(ha(ha({}, 100, t.FUNC_ADD), 101, t.FUNC_SUBTRACT), 102, t.FUNC_REVERSE_SUBTRACT), B = (r ? (F[103] = t.MIN, 
        F[104] = t.MAX) : null !== (L = e.get("EXT_blend_minmax")) && (F[103] = L.MIN_EXT, 
        F[104] = L.MAX_EXT), ha(ha(ha(ha(ha(ha(ha(ha(ha(ha(n = {}, 200, t.ZERO), 201, t.ONE), 202, t.SRC_COLOR), 204, t.SRC_ALPHA), 210, t.SRC_ALPHA_SATURATE), 208, t.DST_COLOR), 206, t.DST_ALPHA), 203, t.ONE_MINUS_SRC_COLOR), 205, t.ONE_MINUS_SRC_ALPHA), 209, t.ONE_MINUS_DST_COLOR), 
        ha(n, 207, t.ONE_MINUS_DST_ALPHA));
        function U(e, n, r, i, o, a, s, l) {
            if (0 === e) f && (N(t.BLEND), f = !1); else if (f || (C(t.BLEND), f = !0), 5 !== e) {
                if (e !== p || l !== x) {
                    if (100 === d && 100 === v || (t.blendEquation(t.FUNC_ADD), v = d = 100), l) switch (e) {
                      case 1:
                        t.blendFuncSeparate(t.ONE, t.ONE_MINUS_SRC_ALPHA, t.ONE, t.ONE_MINUS_SRC_ALPHA);
                        break;

                      case 2:
                        t.blendFunc(t.ONE, t.ONE);
                        break;

                      case 3:
                        t.blendFuncSeparate(t.ZERO, t.ZERO, t.ONE_MINUS_SRC_COLOR, t.ONE_MINUS_SRC_ALPHA);
                        break;

                      case 4:
                        t.blendFuncSeparate(t.ZERO, t.SRC_COLOR, t.ZERO, t.SRC_ALPHA);
                        break;

                      default:
                        console.error("THREE.WebGLState: Invalid blending: ", e);
                    } else switch (e) {
                      case 1:
                        t.blendFuncSeparate(t.SRC_ALPHA, t.ONE_MINUS_SRC_ALPHA, t.ONE, t.ONE_MINUS_SRC_ALPHA);
                        break;

                      case 2:
                        t.blendFunc(t.SRC_ALPHA, t.ONE);
                        break;

                      case 3:
                        t.blendFunc(t.ZERO, t.ONE_MINUS_SRC_COLOR);
                        break;

                      case 4:
                        t.blendFunc(t.ZERO, t.SRC_COLOR);
                        break;

                      default:
                        console.error("THREE.WebGLState: Invalid blending: ", e);
                    }
                    b = g = m = y = null, p = e, x = l;
                }
            } else o = o || n, a = a || r, s = s || i, n === d && o === v || (t.blendEquationSeparate(F[n], F[o]), 
            d = n, v = o), r === y && i === m && a === g && s === b || (t.blendFuncSeparate(B[r], B[i], B[a], B[s]), 
            y = r, m = i, g = a, b = s), p = e, x = null;
        }
        function z(e) {
            w !== e && (e ? t.frontFace(t.CW) : t.frontFace(t.CCW), w = e);
        }
        function G(e) {
            0 !== e ? (C(t.CULL_FACE), e !== S && (1 === e ? t.cullFace(t.BACK) : 2 === e ? t.cullFace(t.FRONT) : t.cullFace(t.FRONT_AND_BACK))) : N(t.CULL_FACE), 
            S = e;
        }
        function H(e, n, r) {
            e ? (C(t.POLYGON_OFFSET_FILL), E === n && O === r || (t.polygonOffset(n, r), E = n, 
            O = r)) : N(t.POLYGON_OFFSET_FILL);
        }
        function V(e) {
            void 0 === e && (e = t.TEXTURE0 + M - 1), A !== e && (t.activeTexture(e), A = e);
        }
        return {
            buffers: {
                color: i,
                depth: o,
                stencil: a
            },
            initAttributes: function() {
                for (var t = 0, e = s.length; t < e; t++) s[t] = 0;
            },
            enableAttribute: function(t) {
                k(t, 0);
            },
            enableAttributeAndDivisor: k,
            disableUnusedAttributes: function() {
                for (var e = 0, n = l.length; e !== n; ++e) l[e] !== s[e] && (t.disableVertexAttribArray(e), 
                l[e] = 0);
            },
            enable: C,
            disable: N,
            useProgram: function(e) {
                return h !== e && (t.useProgram(e), h = e, !0);
            },
            setBlending: U,
            setMaterial: function(e, n, r) {
                (2 === e.side ? N : C)(t.CULL_FACE);
                var s = 1 === e.side;
                z(s = n ? !s : s), 1 !== e.blending || !1 !== e.transparent && !1 !== r.userData.transparent ? U(e.blending, e.blendEquation, e.blendSrc, e.blendDst, e.blendEquationAlpha, e.blendSrcAlpha, e.blendDstAlpha, e.premultipliedAlpha) : U(0), 
                o.setFunc(e.depthFunc), o.setTest(e.depthTest), o.setMask(e.depthWrite), i.setMask(e.colorWrite), 
                n = e.stencilWrite;
                a.setTest(n), n && (a.setMask(e.stencilWriteMask), a.setFunc(e.stencilFunc, e.stencilRef, e.stencilFuncMask), 
                a.setOp(e.stencilFail, e.stencilZFail, e.stencilZPass)), H(e.polygonOffset, e.polygonOffsetFactor, e.polygonOffsetUnits);
            },
            setFlipSided: z,
            setCullFace: G,
            setLineWidth: function(e) {
                e !== _ && (T && t.lineWidth(e), _ = e);
            },
            setPolygonOffset: H,
            setScissorTest: function(e) {
                (e ? C : N)(t.SCISSOR_TEST);
            },
            activeTexture: V,
            bindTexture: function(e, n) {
                null === A && V();
                var r = P[A];
                void 0 === r && (P[A] = r = {
                    type: void 0,
                    texture: void 0
                }), r.type === e && r.texture === n || (t.bindTexture(e, n || D[e]), r.type = e, 
                r.texture = n);
            },
            unbindTexture: function() {
                var e = P[A];
                void 0 !== e && void 0 !== e.type && (t.bindTexture(e.type, null), e.type = void 0, 
                e.texture = void 0);
            },
            compressedTexImage2D: function() {
                try {
                    t.compressedTexImage2D.apply(t, arguments);
                } catch (t) {
                    console.error("THREE.WebGLState:", t);
                }
            },
            texImage2D: function() {
                try {
                    t.texImage2D.apply(t, arguments);
                } catch (t) {
                    console.error("THREE.WebGLState:", t);
                }
            },
            texImage3D: function() {
                try {
                    t.texImage3D.apply(t, arguments);
                } catch (t) {
                    console.error("THREE.WebGLState:", t);
                }
            },
            scissor: function(e) {
                !1 === R.equals(e) && (t.scissor(e.x, e.y, e.z, e.w), R.copy(e));
            },
            viewport: function(e) {
                !1 === j.equals(e) && (t.viewport(e.x, e.y, e.z, e.w), j.copy(e));
            },
            reset: function() {
                for (var e = 0; e < l.length; e++) 1 === l[e] && (t.disableVertexAttribArray(e), 
                l[e] = 0);
                c = {}, P = {}, S = w = p = h = A = null, i.reset(), o.reset(), a.reset();
            }
        };
    }
    function pa(t) {
        return (pa = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function da(t, e, n) {
        return (e = function(t) {
            return t = function(t, e) {
                if ("object" != pa(t) || !t) return t;
                var n = t[Symbol.toPrimitive];
                if (void 0 === n) return String(t);
                if ("object" != pa(n = n.call(t, e))) return n;
                throw new TypeError("@@toPrimitive must return a primitive value.");
            }(t, "string"), "symbol" == pa(t) ? t : String(t);
        }(e)) in t ? Object.defineProperty(t, e, {
            value: n,
            enumerable: !0,
            configurable: !0,
            writable: !0
        }) : t[e] = n, t;
    }
    function ya(t, e, n, r, i, o, a) {
        var l, u = i.isWebGL2, c = i.maxTextures, h = i.maxCubemapSize, f = i.maxTextureSize, p = i.maxSamples, d = new WeakMap(), y = !1;
        try {
            y = "undefined" != typeof OffscreenCanvas && null !== new OffscreenCanvas(1, 1).getContext("2d");
        } catch (t) {}
        function m(t, e) {
            return y ? new OffscreenCanvas(t, e) : jt.a.document.createElementNS("http://www.w3.org/1999/xhtml", "canvas");
        }
        function v(t, e, n, r) {
            var i = 1;
            return (i = t.width > r || t.height > r ? r / Math.max(t.width, t.height) : i) < 1 || !0 === e ? "undefined" != typeof HTMLImageElement && t instanceof HTMLImageElement || "undefined" != typeof HTMLCanvasElement && t instanceof HTMLCanvasElement || "undefined" != typeof ImageBitmap && t instanceof ImageBitmap ? (e = (r = e ? s.floorPowerOfTwo : Math.floor)(i * t.width), 
            r = r(i * t.height), void 0 === l && (l = m(e, r)), (i = n ? m(e, r) : l).width = e, 
            i.height = r, i.getContext("2d").drawImage(t, 0, 0, e, r), console.warn("THREE.WebGLRenderer: Texture has been resized from (" + t.width + "x" + t.height + ") to (" + e + "x" + r + ")."), 
            i) : ("data" in t && console.warn("THREE.WebGLRenderer: Image in DataTexture is too big (" + t.width + "x" + t.height + ")."), 
            t) : t;
        }
        function g(t) {
            return s.isPowerOfTwo(t.width) && s.isPowerOfTwo(t.height);
        }
        function b(t, e) {
            return t.generateMipmaps && e && t.minFilter !== yt && t.minFilter !== mt;
        }
        function x(e, n, i, o) {
            t.generateMipmap(e), r.get(n).Zr = Math.log(Math.max(i, o)) * Math.LOG2E;
        }
        function w(n, r, i) {
            if (!1 === u) return r;
            if (null !== n) {
                if (void 0 !== t[n]) return t[n];
                console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '" + n + "'");
            }
            return n = r, r === t.RED && (i === t.FLOAT && (n = t.R32F), i === t.HALF_FLOAT && (n = t.R16F), 
            i === t.UNSIGNED_BYTE) && (n = t.R8), r === t.RGB && (i === t.FLOAT && (n = t.RGB32F), 
            i === t.HALF_FLOAT && (n = t.RGB16F), i === t.UNSIGNED_BYTE) && (n = t.RGB8), (n = r === t.RGBA && (i === t.FLOAT && (n = t.RGBA32F), 
            i === t.HALF_FLOAT && (n = t.RGBA16F), i === t.UNSIGNED_BYTE) ? t.RGBA8 : n) !== t.R16F && n !== t.R32F && n !== t.RGBA16F && n !== t.RGBA32F || e.get("EXT_color_buffer_float"), 
            n;
        }
        function S(e) {
            return e === yt || 1004 === e || 1005 === e ? t.NEAREST : t.LINEAR;
        }
        function _(e) {
            var n, i;
            (e = e.target).removeEventListener("dispose", _), n = e, void 0 !== (i = r.get(n)).qr && (t.deleteTexture(i.Jr), 
            r.remove(n)), e.isVideoTexture && d.delete(e), a.memory.textures--;
        }
        function E(e) {
            var n = ((e = e.target).removeEventListener("dispose", E), r.get(e)), i = r.get(e.texture);
            if (e) {
                if (void 0 !== i.Jr && t.deleteTexture(i.Jr), e.depthTexture && e.depthTexture.dispose(), 
                e.isWebGLCubeRenderTarget) for (var o = 0; o < 6; o++) t.deleteFramebuffer(n.Kr[o]), 
                n.Qr && t.deleteRenderbuffer(n.Qr[o]); else t.deleteFramebuffer(n.Kr), n.Qr && t.deleteRenderbuffer(n.Qr), 
                n.$r && t.deleteFramebuffer(n.$r), n.no && t.deleteRenderbuffer(n.no), n.eo && t.deleteRenderbuffer(n.eo);
                r.remove(e.texture), r.remove(e);
            }
            a.memory.textures--;
        }
        var O = 0;
        function M(e, i) {
            var o, s = r.get(e);
            if (e.isVideoTexture && (o = e, l = a.render.frame, d.get(o) !== l) && (d.set(o, l), 
            o.update()), 0 < e.version && s.io !== e.version) {
                var l = e.image;
                if (void 0 === l) jt.a.environment === Ut.a.BROWSER && console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined"); else {
                    if (!1 !== l.complete) return void I(s, e, i);
                    console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");
                }
            }
            n.activeTexture(t.TEXTURE0 + i), n.bindTexture(t.TEXTURE_2D, s.Jr);
        }
        function T(e, i) {
            if (6 === e.image.length) {
                var a = r.get(e);
                if (0 < e.version && a.io !== e.version) {
                    j(a, e), n.activeTexture(t.TEXTURE0 + i), n.bindTexture(t.TEXTURE_CUBE_MAP, a.Jr), 
                    t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL, e.flipY);
                    for (var s = e && (e.isCompressedTexture || e.image[0].isCompressedTexture), l = e.image[0] && e.image[0].isDataTexture, c = [], f = 0; f < 6; f++) c[f] = s || l ? l ? e.image[f].image : e.image[f] : v(e.image[f], !1, !0, h);
                    var p = c[0], d = g(p) || u, y = o.convert(e.format), m = o.convert(e.type), S = w(e.internalFormat, y, m);
                    if (R(t.TEXTURE_CUBE_MAP, e, d), s) {
                        for (f = 0; f < 6; f++) for (var _ = c[f].mipmaps, E = 0; E < _.length; E++) {
                            var O = _[E];
                            e.format !== bt && e.format !== gt ? null !== y ? n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X + f, E, S, O.width, O.height, 0, O.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()") : n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X + f, E, S, O.width, O.height, 0, y, m, O.data);
                        }
                        a.Zr = _.length - 1;
                    } else {
                        for (_ = e.mipmaps, f = 0; f < 6; f++) if (l) for (n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X + f, 0, S, c[f].width, c[f].height, 0, y, m, c[f].data), 
                        E = 0; E < _.length; E++) {
                            var M = (O = _[E]).image[f].image;
                            n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X + f, E + 1, S, M.width, M.height, 0, y, m, M.data);
                        } else for (n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X + f, 0, S, y, m, c[f]), E = 0; E < _.length; E++) O = _[E], 
                        n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X + f, E + 1, S, y, m, O.image[f]);
                        a.Zr = _.length;
                    }
                    b(e, d) && x(t.TEXTURE_CUBE_MAP, e, p.width, p.height), a.io = e.version, e.onUpdate && e.onUpdate(e);
                } else n.activeTexture(t.TEXTURE0 + i), n.bindTexture(t.TEXTURE_CUBE_MAP, a.Jr);
            }
        }
        function L(e, i) {
            n.activeTexture(t.TEXTURE0 + i), n.bindTexture(t.TEXTURE_CUBE_MAP, r.get(e).Jr);
        }
        var A = da(da(da({}, pt, t.REPEAT), dt, t.CLAMP_TO_EDGE), 1002, t.MIRRORED_REPEAT), P = da(da(da(da(da(da({}, yt, t.NEAREST), 1004, t.NEAREST_MIPMAP_NEAREST), 1005, t.NEAREST_MIPMAP_LINEAR), mt, t.LINEAR), 1007, t.LINEAR_MIPMAP_NEAREST), 1008, t.LINEAR_MIPMAP_LINEAR);
        function R(n, o, a) {
            a ? (t.texParameteri(n, t.TEXTURE_WRAP_S, A[o.wrapS]), t.texParameteri(n, t.TEXTURE_WRAP_T, A[o.wrapT]), 
            n !== t.TEXTURE_3D && n !== t.TEXTURE_2D_ARRAY || t.texParameteri(n, t.TEXTURE_WRAP_R, A[o.wrapR]), 
            t.texParameteri(n, t.TEXTURE_MAG_FILTER, P[o.magFilter]), t.texParameteri(n, t.TEXTURE_MIN_FILTER, P[o.minFilter])) : (t.texParameteri(n, t.TEXTURE_WRAP_S, t.CLAMP_TO_EDGE), 
            t.texParameteri(n, t.TEXTURE_WRAP_T, t.CLAMP_TO_EDGE), n !== t.TEXTURE_3D && n !== t.TEXTURE_2D_ARRAY || t.texParameteri(n, t.TEXTURE_WRAP_R, t.CLAMP_TO_EDGE), 
            o.wrapS === dt && o.wrapT === dt || console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."), 
            t.texParameteri(n, t.TEXTURE_MAG_FILTER, S(o.magFilter)), t.texParameteri(n, t.TEXTURE_MIN_FILTER, S(o.minFilter)), 
            o.minFilter !== yt && o.minFilter !== mt && console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")), 
            !(a = e.get("EXT_texture_filter_anisotropic")) || o.type === vt && null === e.get("OES_texture_float_linear") || 1016 === o.type && null === (u || e.get("OES_texture_half_float_linear")) || (1 < o.anisotropy || r.get(o).ro) && (t.texParameterf(n, a.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(o.anisotropy, i.getMaxAnisotropy())), 
            r.get(o).ro = o.anisotropy);
        }
        function j(e, n) {
            void 0 === e.qr && (e.qr = !0, n.addEventListener("dispose", _), e.Jr = t.createTexture(), 
            a.memory.textures++);
        }
        function I(e, r, i) {
            var a = t.TEXTURE_2D, s = (i = (r.isDataTexture2DArray && (a = t.TEXTURE_2D_ARRAY), 
            r.isDataTexture3D && (a = t.TEXTURE_3D), j(e, r), n.activeTexture(t.TEXTURE0 + i), 
            n.bindTexture(a, e.Jr), t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL, r.flipY), t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL, r.premultiplyAlpha), 
            t.pixelStorei(t.UNPACK_ALIGNMENT, r.unpackAlignment), i = r, !u && (i.wrapS !== dt || i.wrapT !== dt || i.minFilter !== yt && i.minFilter !== mt) && !1 === g(r.image)), 
            g(i = v(r.image, i, !1, f)) || u), l = o.convert(r.format), c = o.convert(r.type), h = w(r.internalFormat, l, c);
            R(a, r, s);
            var p, d = r.mipmaps;
            if (r.isDepthTexture) h = t.DEPTH_COMPONENT, u ? h = r.type === vt ? t.DEPTH_COMPONENT32F : 1014 === r.type ? t.DEPTH_COMPONENT24 : 1020 === r.type ? t.DEPTH24_STENCIL8 : t.DEPTH_COMPONENT16 : r.type === vt && console.error("WebGLRenderer: Floating point depth texture requires WebGL2."), 
            1026 === r.format && h === t.DEPTH_COMPONENT && 1012 !== r.type && 1014 !== r.type && (console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."), 
            r.type = 1012, c = o.convert(r.type)), 1027 === r.format && h === t.DEPTH_COMPONENT && (h = t.DEPTH_STENCIL, 
            1020 !== r.type) && (console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."), 
            r.type = 1020, c = o.convert(r.type)), n.texImage2D(t.TEXTURE_2D, 0, h, i.width, i.height, 0, l, c, null); else if (r.isDataTexture) if (0 < d.length && s) {
                for (var y = 0, m = d.length; y < m; y++) p = d[y], n.texImage2D(t.TEXTURE_2D, y, h, p.width, p.height, 0, l, c, p.data);
                r.generateMipmaps = !1, e.Zr = d.length - 1;
            } else n.texImage2D(t.TEXTURE_2D, 0, h, i.width, i.height, 0, l, c, i.data), e.Zr = 0; else if (r.isCompressedTexture) {
                for (y = 0, m = d.length; y < m; y++) p = d[y], r.format !== bt && r.format !== gt ? null !== l ? n.compressedTexImage2D(t.TEXTURE_2D, y, h, p.width, p.height, 0, p.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()") : n.texImage2D(t.TEXTURE_2D, y, h, p.width, p.height, 0, l, c, p.data);
                e.Zr = d.length - 1;
            } else if (r.isDataTexture2DArray) n.texImage3D(t.TEXTURE_2D_ARRAY, 0, h, i.width, i.height, i.depth, 0, l, c, i.data), 
            e.Zr = 0; else if (r.isDataTexture3D) n.texImage3D(t.TEXTURE_3D, 0, h, i.width, i.height, i.depth, 0, l, c, i.data), 
            e.Zr = 0; else if (0 < d.length && s) {
                for (y = 0, m = d.length; y < m; y++) p = d[y], n.texImage2D(t.TEXTURE_2D, y, h, l, c, p);
                r.generateMipmaps = !1, e.Zr = d.length - 1;
            } else n.texImage2D(t.TEXTURE_2D, 0, h, l, c, i), e.Zr = 0;
            b(r, s) && x(a, r, i.width, i.height), e.io = r.version, r.onUpdate && r.onUpdate(r);
        }
        function D(e, i, a, s) {
            var l = o.convert(i.texture.format), u = o.convert(i.texture.type), c = w(i.texture.internalFormat, l, u);
            n.texImage2D(s, 0, c, i.width, i.height, 0, l, u, null), t.bindFramebuffer(t.FRAMEBUFFER, e), 
            t.framebufferTexture2D(t.FRAMEBUFFER, a, s, r.get(i.texture).Jr, 0), t.bindFramebuffer(t.FRAMEBUFFER, null);
        }
        function k(e, n, r) {
            var i, a, s;
            t.bindRenderbuffer(t.RENDERBUFFER, e), n.depthBuffer && !n.stencilBuffer ? (a = t.DEPTH_COMPONENT16, 
            r ? ((s = n.depthTexture) && s.isDepthTexture && (s.type === vt ? a = t.DEPTH_COMPONENT32F : 1014 === s.type && (a = t.DEPTH_COMPONENT24)), 
            s = C(n), t.renderbufferStorageMultisample(t.RENDERBUFFER, s, a, n.width, n.height)) : t.renderbufferStorage(t.RENDERBUFFER, a, n.width, n.height), 
            t.framebufferRenderbuffer(t.FRAMEBUFFER, t.DEPTH_ATTACHMENT, t.RENDERBUFFER, e)) : n.depthBuffer && n.stencilBuffer ? (r ? (s = C(n), 
            t.renderbufferStorageMultisample(t.RENDERBUFFER, s, t.DEPTH24_STENCIL8, n.width, n.height)) : t.renderbufferStorage(t.RENDERBUFFER, t.DEPTH_STENCIL, n.width, n.height), 
            t.framebufferRenderbuffer(t.FRAMEBUFFER, t.DEPTH_STENCIL_ATTACHMENT, t.RENDERBUFFER, e)) : (e = o.convert(n.texture.format), 
            i = o.convert(n.texture.type), a = w(n.texture.internalFormat, e, i), r ? (s = C(n), 
            t.renderbufferStorageMultisample(t.RENDERBUFFER, s, a, n.width, n.height)) : t.renderbufferStorage(t.RENDERBUFFER, a, n.width, n.height)), 
            t.bindRenderbuffer(t.RENDERBUFFER, null);
        }
        function C(t) {
            return u && t.isWebGLMultisampleRenderTarget ? Math.min(p, t.samples) : 0;
        }
        var N = !1, F = !1;
        this.allocateTextureUnit = function() {
            var t = O;
            return c <= t && console.warn("THREE.WebGLTextures: Trying to use " + t + " texture units while this GPU supports only " + c), 
            O += 1, t;
        }, this.resetTextureUnits = function() {
            O = 0;
        }, this.setTexture2D = M, this.setTexture2DArray = function(e, i) {
            var o = r.get(e);
            0 < e.version && o.io !== e.version ? I(o, e, i) : (n.activeTexture(t.TEXTURE0 + i), 
            n.bindTexture(t.TEXTURE_2D_ARRAY, o.Jr));
        }, this.setTexture3D = function(e, i) {
            var o = r.get(e);
            0 < e.version && o.io !== e.version ? I(o, e, i) : (n.activeTexture(t.TEXTURE0 + i), 
            n.bindTexture(t.TEXTURE_3D, o.Jr));
        }, this.setTextureCube = T, this.setTextureCubeDynamic = L, this.setupRenderTarget = function(e) {
            var i, s = r.get(e), l = r.get(e.texture), c = (e.addEventListener("dispose", E), 
            l.Jr = t.createTexture(), a.memory.textures++, !0 === e.isWebGLCubeRenderTarget), h = !0 === e.isWebGLMultisampleRenderTarget, f = g(e) || u;
            if (!u || e.texture.format !== gt || e.texture.type !== vt && 1016 !== e.texture.type || (e.texture.format = bt, 
            console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")), 
            c) {
                s.Kr = [];
                for (var p = 0; p < 6; p++) s.Kr[p] = t.createFramebuffer();
            } else s.Kr = t.createFramebuffer(), h && (u ? (s.$r = t.createFramebuffer(), s.no = t.createRenderbuffer(), 
            t.bindRenderbuffer(t.RENDERBUFFER, s.no), h = o.convert(e.texture.format), i = o.convert(e.texture.type), 
            h = w(e.texture.internalFormat, h, i), i = C(e), t.renderbufferStorageMultisample(t.RENDERBUFFER, i, h, e.width, e.height), 
            t.bindFramebuffer(t.FRAMEBUFFER, s.$r), t.framebufferRenderbuffer(t.FRAMEBUFFER, t.COLOR_ATTACHMENT0, t.RENDERBUFFER, s.no), 
            t.bindRenderbuffer(t.RENDERBUFFER, null), e.depthBuffer && (s.eo = t.createRenderbuffer(), 
            k(s.eo, e, !0)), t.bindFramebuffer(t.FRAMEBUFFER, null)) : console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2."));
            if (c) {
                for (n.bindTexture(t.TEXTURE_CUBE_MAP, l.Jr), R(t.TEXTURE_CUBE_MAP, e.texture, f), 
                p = 0; p < 6; p++) D(s.Kr[p], e, t.COLOR_ATTACHMENT0, t.TEXTURE_CUBE_MAP_POSITIVE_X + p);
                b(e.texture, f) && x(t.TEXTURE_CUBE_MAP, e.texture, e.width, e.height), n.bindTexture(t.TEXTURE_CUBE_MAP, null);
            } else n.bindTexture(t.TEXTURE_2D, l.Jr), R(t.TEXTURE_2D, e.texture, f), D(s.Kr, e, t.COLOR_ATTACHMENT0, t.TEXTURE_2D), 
            b(e.texture, f) && x(t.TEXTURE_2D, e.texture, e.width, e.height), n.bindTexture(t.TEXTURE_2D, null);
            e.depthBuffer && function(e) {
                var n = r.get(e), i = !0 === e.isWebGLCubeRenderTarget;
                if (e.depthTexture) {
                    if (i) throw new Error("target.depthTexture not supported in Cube render targets");
                    var o = n.Kr, a = e;
                    if (a && a.isWebGLCubeRenderTarget) throw new Error("Depth Texture with cube render targets is not supported");
                    if (t.bindFramebuffer(t.FRAMEBUFFER, o), !a.depthTexture || !a.depthTexture.isDepthTexture) throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");
                    if (r.get(a.depthTexture).Jr && a.depthTexture.image.width === a.width && a.depthTexture.image.height === a.height || (a.depthTexture.image.width = a.width, 
                    a.depthTexture.image.height = a.height, a.depthTexture.needsUpdate = !0), M(a.depthTexture, 0), 
                    o = r.get(a.depthTexture).Jr, 1026 === a.depthTexture.format) t.framebufferTexture2D(t.FRAMEBUFFER, t.DEPTH_ATTACHMENT, t.TEXTURE_2D, o, 0); else {
                        if (1027 !== a.depthTexture.format) throw new Error("Unknown depthTexture format");
                        t.framebufferTexture2D(t.FRAMEBUFFER, t.DEPTH_STENCIL_ATTACHMENT, t.TEXTURE_2D, o, 0);
                    }
                } else if (i) {
                    n.Qr = [];
                    for (var s = 0; s < 6; s++) t.bindFramebuffer(t.FRAMEBUFFER, n.Kr[s]), n.Qr[s] = t.createRenderbuffer(), 
                    k(n.Qr[s], e, !1);
                } else t.bindFramebuffer(t.FRAMEBUFFER, n.Kr), n.Qr = t.createRenderbuffer(), k(n.Qr, e, !1);
                t.bindFramebuffer(t.FRAMEBUFFER, null);
            }(e);
        }, this.updateRenderTargetMipmap = function(e) {
            var i, o, a = e.texture;
            b(a, g(e) || u) && (i = e.isWebGLCubeRenderTarget ? t.TEXTURE_CUBE_MAP : t.TEXTURE_2D, 
            o = r.get(a).Jr, n.bindTexture(i, o), x(i, a, e.width, e.height), n.bindTexture(i, null));
        }, this.updateMultisampleRenderTarget = function(e) {
            var n, i, o, a;
            e.isWebGLMultisampleRenderTarget && (u ? (n = r.get(e), t.bindFramebuffer(t.READ_FRAMEBUFFER, n.$r), 
            t.bindFramebuffer(t.DRAW_FRAMEBUFFER, n.Kr), i = e.width, o = e.height, a = t.COLOR_BUFFER_BIT, 
            e.depthBuffer && (a |= t.DEPTH_BUFFER_BIT), e.stencilBuffer && (a |= t.STENCIL_BUFFER_BIT), 
            t.blitFramebuffer(0, 0, i, o, 0, 0, i, o, a, t.NEAREST), t.bindFramebuffer(t.FRAMEBUFFER, n.$r)) : console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2."));
        }, this.safeSetTexture2D = function(t, e) {
            t && t.isWebGLRenderTarget && (!1 === N && (console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."), 
            N = !0), t = t.texture), M(t, e);
        }, this.safeSetTextureCube = function(t, e) {
            t && t.isWebGLCubeRenderTarget && (!1 === F && (console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."), 
            F = !0), t = t.texture), (t && t.isCubeTexture || Array.isArray(t.image) && 6 === t.image.length ? T : L)(t, e);
        };
    }
    function ma(t, e, n) {
        var r = n.isWebGL2;
        return {
            convert: function(n) {
                var i;
                if (1009 === n) return t.UNSIGNED_BYTE;
                if (1017 === n) return t.UNSIGNED_SHORT_4_4_4_4;
                if (1018 === n) return t.UNSIGNED_SHORT_5_5_5_1;
                if (1019 === n) return t.UNSIGNED_SHORT_5_6_5;
                if (1010 === n) return t.BYTE;
                if (1011 === n) return t.SHORT;
                if (1012 === n) return t.UNSIGNED_SHORT;
                if (1013 === n) return t.INT;
                if (1014 === n) return t.UNSIGNED_INT;
                if (n === vt) return t.FLOAT;
                if (1016 === n) return r ? t.HALF_FLOAT : null !== (i = e.get("OES_texture_half_float")) ? i.HALF_FLOAT_OES : null;
                if (1021 === n) return t.ALPHA;
                if (n === gt) return t.RGB;
                if (n === bt) return t.RGBA;
                if (1024 === n) return t.LUMINANCE;
                if (1025 === n) return t.LUMINANCE_ALPHA;
                if (1026 === n) return t.DEPTH_COMPONENT;
                if (1027 === n) return t.DEPTH_STENCIL;
                if (1028 === n) return t.RED;
                if (1029 === n) return t.RED_INTEGER;
                if (1030 === n) return t.RG;
                if (1031 === n) return t.RG_INTEGER;
                if (1032 === n) return t.RGB_INTEGER;
                if (1033 === n) return t.RGBA_INTEGER;
                if (33776 === n || 33777 === n || 33778 === n || 33779 === n) {
                    if (null === (i = e.get("WEBGL_compressed_texture_s3tc"))) return null;
                    if (33776 === n) return i.COMPRESSED_RGB_S3TC_DXT1_EXT;
                    if (33777 === n) return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;
                    if (33778 === n) return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;
                    if (33779 === n) return i.COMPRESSED_RGBA_S3TC_DXT5_EXT;
                }
                if (35840 === n || 35841 === n || 35842 === n || 35843 === n) {
                    if (null === (i = e.get("WEBGL_compressed_texture_pvrtc"))) return null;
                    if (35840 === n) return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
                    if (35841 === n) return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
                    if (35842 === n) return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
                    if (35843 === n) return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;
                }
                if (36196 === n) return null !== (i = e.get("WEBGL_compressed_texture_etc1")) ? i.COMPRESSED_RGB_ETC1_WEBGL : null;
                if ((37492 === n || 37496 === n) && null !== (i = e.get("WEBGL_compressed_texture_etc"))) {
                    if (37492 === n) return i.COMPRESSED_RGB8_ETC2;
                    if (37496 === n) return i.COMPRESSED_RGBA8_ETC2_EAC;
                }
                return 37808 === n || 37809 === n || 37810 === n || 37811 === n || 37812 === n || 37813 === n || 37814 === n || 37815 === n || 37816 === n || 37817 === n || 37818 === n || 37819 === n || 37820 === n || 37821 === n || 37840 === n || 37841 === n || 37842 === n || 37843 === n || 37844 === n || 37845 === n || 37846 === n || 37847 === n || 37848 === n || 37849 === n || 37850 === n || 37851 === n || 37852 === n || 37853 === n ? null !== (i = e.get("WEBGL_compressed_texture_astc")) ? n : null : 36492 === n ? null !== (i = e.get("EXT_texture_compression_bptc")) ? n : null : 1020 === n ? r ? t.UNSIGNED_INT_24_8 : null !== (i = e.get("WEBGL_depth_texture")) ? i.UNSIGNED_INT_24_8_WEBGL : null : void 0;
            }
        };
    }
    function va(t) {
        z.call(this), this.cameras = t || [];
    }
    function ga() {
        B.call(this), this.type = "Group";
    }
    function ba(t, e) {
        var n = this, r = null, i = 1, o = null, a = "local-floor", s = null, l = [], u = new Map(), c = new z(), f = (c.layers.enable(1), 
        c.viewport = new Bt(), new z()), p = (f.layers.enable(2), f.viewport = new Bt(), 
        new va([ c, f ])), d = (p.layers.enable(1), p.layers.enable(2), null), y = null;
        function m(t) {
            var e = u.get(t.inputSource);
            e && (e.targetRay && e.targetRay.dispatchEvent({
                type: t.type
            }), e.grip) && e.grip.dispatchEvent({
                type: t.type
            });
        }
        function v() {
            u.forEach(function(t, e) {
                t.targetRay && (t.targetRay.dispatchEvent({
                    type: "disconnected",
                    data: e
                }), t.targetRay.visible = !1), t.grip && (t.grip.dispatchEvent({
                    type: "disconnected",
                    data: e
                }), t.grip.visible = !1);
            }), u.clear(), t.setFramebuffer(null), t.setRenderTarget(t.getRenderTarget()), E.stop(), 
            n.isPresenting = !1, n.dispatchEvent({
                type: "sessionend"
            });
        }
        function g(t) {
            o = t, E.setContext(r), E.start(), n.isPresenting = !0, n.dispatchEvent({
                type: "sessionstart"
            });
        }
        function b(t) {
            for (var e = r.inputSources, n = 0; n < l.length; n++) u.set(e[n], l[n]);
            for (n = 0; n < t.removed.length; n++) {
                var i = t.removed[n];
                (o = u.get(i)) && (o.targetRay && o.targetRay.dispatchEvent({
                    type: "disconnected",
                    data: i
                }), o.grip && o.grip.dispatchEvent({
                    type: "disconnected",
                    data: i
                }), u.delete(i));
            }
            for (n = 0; n < t.added.length; n++) {
                var o;
                i = t.added[n];
                (o = u.get(i)) && (o.targetRay && o.targetRay.dispatchEvent({
                    type: "connected",
                    data: i
                }), o.grip) && o.grip.dispatchEvent({
                    type: "connected",
                    data: i
                });
            }
        }
        this.enabled = !1, this.isPresenting = !1, this.getController = function(t) {
            var e = l[t];
            return void 0 === e && (l[t] = e = {}), void 0 === e.targetRay && (e.targetRay = new ga(), 
            e.targetRay.matrixAutoUpdate = !1, e.targetRay.visible = !1), e.targetRay;
        }, this.getControllerGrip = function(t) {
            var e = l[t];
            return void 0 === e && (l[t] = e = {}), void 0 === e.grip && (e.grip = new ga(), 
            e.grip.matrixAutoUpdate = !1, e.grip.visible = !1), e.grip;
        }, this.setFramebufferScaleFactor = function(t) {
            i = t, 1 == n.isPresenting && console.warn("WebXRManager: Cannot change framebuffer scale while presenting VR content");
        }, this.setReferenceSpaceType = function(t) {
            a = t;
        }, this.getReferenceSpace = function() {
            return o;
        }, this.getSession = function() {
            return r;
        }, this.setSession = function(t) {
            null !== (r = t) && (r.addEventListener("select", m), r.addEventListener("selectstart", m), 
            r.addEventListener("selectend", m), r.addEventListener("squeeze", m), r.addEventListener("squeezestart", m), 
            r.addEventListener("squeezeend", m), r.addEventListener("end", v), t = {
                antialias: (t = e.getContextAttributes()).antialias,
                alpha: t.alpha,
                depth: t.depth,
                stencil: t.stencil,
                framebufferScaleFactor: i
            }, t = new XRWebGLLayer(r, e, t), r.updateRenderState({
                baseLayer: t
            }), r.requestReferenceSpace(a).then(g), r.addEventListener("inputsourceschange", b));
        };
        var x = new h(), w = new h();
        function S(t, e) {
            null === e ? t.matrixWorld.copy(t.matrix) : t.matrixWorld.multiplyMatrices(e.matrixWorld, t.matrix), 
            t.matrixWorldInverse.getInverse(t.matrixWorld);
        }
        this.getCamera = function(t) {
            p.near = f.near = c.near = t.near, p.far = f.far = c.far = t.far, d === p.near && y === p.far || (r.updateRenderState({
                depthNear: p.near,
                depthFar: p.far
            }), d = p.near, y = p.far);
            var e = t.parent, n = p.cameras;
            S(p, e);
            for (var i = 0; i < n.length; i++) S(n[i], e);
            t.matrixWorld.copy(p.matrixWorld);
            for (var o, a, s, l, u, h, m, v, g, b, _ = t.children, E = (i = 0, _.length); i < E; i++) _[i].updateMatrixWorld(!0);
            return t = p, o = c, a = f, x.setFromMatrixPosition(o.matrixWorld), w.setFromMatrixPosition(a.matrixWorld), 
            s = x.distanceTo(w), l = o.projectionMatrix.elements, a = a.projectionMatrix.elements, 
            u = l[14] / (l[10] - 1), h = l[14] / (l[10] + 1), m = (l[9] + 1) / l[5], v = (l[9] - 1) / l[5], 
            g = u * (l = (l[8] - 1) / l[0]), b = u * (a = (a[8] + 1) / a[0]), l = (a = s / (a - l)) * -l, 
            o.matrixWorld.decompose(t.position, t.quaternion, t.scale), t.translateX(l), t.translateZ(a), 
            t.matrixWorld.compose(t.position, t.quaternion, t.scale), t.matrixWorldInverse.getInverse(t.matrixWorld), 
            o = u + a, u = h + a, t.projectionMatrix.makePerspective(g - l, s - l + b, m * h / u * o, v * h / u * o, o, u), 
            p;
        };
        var _ = null, E = new Qn();
        E.setAnimationLoop(function(e, n) {
            if (null !== (s = n.getViewerPose(o))) {
                var i = s.views, a = r.renderState.baseLayer;
                t.setFramebuffer(a.framebuffer);
                for (var u = 0; u < i.length; u++) {
                    var c = i[u], h = a.getViewport(c), f = p.cameras[u];
                    f.matrix.fromArray(c.transform.matrix), f.projectionMatrix.fromArray(c.projectionMatrix), 
                    f.viewport.set(h.x, h.y, h.width, h.height), 0 === u && p.matrix.copy(f.matrix);
                }
            }
            var d = r.inputSources;
            for (u = 0; u < l.length; u++) {
                var y = l[u], m = d[u], v = null, g = null;
                m && (y.targetRay && null !== (v = n.getPose(m.targetRaySpace, o)) && (y.targetRay.matrix.fromArray(v.transform.matrix), 
                y.targetRay.matrix.decompose(y.targetRay.position, y.targetRay.rotation, y.targetRay.scale)), 
                y.grip) && m.gripSpace && null !== (g = n.getPose(m.gripSpace, o)) && (y.grip.matrix.fromArray(g.transform.matrix), 
                y.grip.matrix.decompose(y.grip.position, y.grip.rotation, y.grip.scale)), y.targetRay && (y.targetRay.visible = null !== v), 
                y.grip && (y.grip.visible = null !== g);
            }
            _ && _(e, n);
        }), this.setAnimationLoop = function(t) {
            _ = t;
        }, this.dispose = function() {};
    }
    function xa(t) {
        var e, n, r, i, o, a, l, u, c, f, p, d, y, m, v, g, x, w, S = void 0 !== (t = t || {}).canvas ? t.canvas : document.createElementNS("http://www.w3.org/1999/xhtml", "canvas"), _ = void 0 !== t.context ? t.context : null, E = void 0 !== t.alpha && t.alpha, O = void 0 === t.depth || t.depth, M = void 0 === t.stencil || t.stencil, T = void 0 !== t.antialias && t.antialias, L = void 0 === t.premultipliedAlpha || t.premultipliedAlpha, A = void 0 !== t.preserveDrawingBuffer && t.preserveDrawingBuffer, P = void 0 !== t.powerPreference ? t.powerPreference : "default", R = void 0 !== t.failIfMajorPerformanceCaveat && t.failIfMajorPerformanceCaveat, j = void 0 !== t.useWebGL2 && t.useWebGL2, I = null, D = null, k = (this.domElement = S, 
        this.debug = {
            checkShaderErrors: !0
        }, this.autoClear = !0, this.autoClearColor = !0, this.autoClearDepth = !0, this.autoClearStencil = !0, 
        this.sortObjects = !0, this.clippingPlanes = [], this.localClippingEnabled = !1, 
        this.gammaFactor = 2, this.outputEncoding = 3e3, this.physicallyCorrectLights = !1, 
        this.toneMapping = 1, this.toneMappingExposure = 1, this.toneMappingWhitePoint = 1, 
        this.maxMorphTargets = 8, this.maxMorphNormals = 4, this), C = !1, N = null, F = 0, B = 0, U = null, z = null, G = -1, H = {
            geometry: null,
            program: null,
            wireframe: !1
        }, V = null, W = null, Y = new Bt(), X = new Bt(), Z = null, q = S.width, K = S.height, J = 1, Q = null, $ = null, tt = new Bt(0, 0, q, K), et = new Bt(0, 0, q, K), nt = !1, rt = new ft(), it = new Ei(), ot = !1, at = !1, st = new b(), lt = new h();
        function ut() {
            return null === U ? J : 1;
        }
        try {
            var ct = {
                alpha: E,
                depth: O,
                stencil: M,
                antialias: T,
                premultipliedAlpha: L,
                preserveDrawingBuffer: A,
                powerPreference: P,
                failIfMajorPerformanceCaveat: R,
                xrCompatible: !1
            };
            if (S.addEventListener("webglcontextlost", yt, !1), S.addEventListener("webglcontextrestored", mt, !1), 
            null === (e = j ? S.getContext("webgl2", ct) : _ || S.getContext("webgl", ct) || S.getContext("experimental-webgl", ct))) throw null !== S.getContext("webgl") ? new Error("Error creating WebGL context with your selected attributes.") : new Error("Error creating WebGL context.");
            void 0 === e.getShaderPrecisionFormat && (e.getShaderPrecisionFormat = function() {
                return {
                    rangeMin: 1,
                    rangeMax: 1,
                    precision: 1
                };
            });
        } catch (t) {
            throw console.error("THREE.WebGLRenderer: " + t.message), t;
        }
        function ht() {
            n = new Oi(e), !1 === (r = new _i(e, n, t)).isWebGL2 && (n.get("WEBGL_depth_texture"), 
            n.get("OES_texture_float"), n.get("OES_texture_half_float"), n.get("OES_texture_half_float_linear"), 
            n.get("OES_standard_derivatives"), n.get("OES_element_index_uint"), n.get("ANGLE_instanced_arrays")), 
            n.get("OES_texture_float_linear"), w = new ma(e, n, r), (i = new fa(e, n, r)).scissor(X.copy(et).multiplyScalar(J).floor()), 
            i.viewport(Y.copy(tt).multiplyScalar(J).floor()), o = new Li(e), a = new qo(), l = new ya(e, n, i, a, r, w, o), 
            u = new $n(e, r), c = new Mi(e, u, o), f = new Ri(e, c, u, o), v = new Pi(e), p = new Zo(k, n, r), 
            d = new $o(), y = new oa(), m = new wi(k, i, f, L), g = new Si(e, n, o, r), x = new Ti(e, n, o, r), 
            o.programs = p.programs, k.capabilities = r, k.extensions = n, k.properties = a, 
            k.renderLists = d, k.state = i, k.info = o;
        }
        ht();
        var pt = new ba(k, e), dt = (this.xr = pt, new ua(k, f, r.maxTextureSize));
        function yt(t) {
            t.preventDefault(), C = !0;
        }
        function mt() {
            C = !1, ht();
        }
        function gt(t) {
            (t = t.target).removeEventListener("dispose", gt), xt(t = t), a.remove(t);
        }
        function xt(t) {
            var e = a.get(t).program;
            (t.program = void 0) !== e && p.releaseProgram(e);
        }
        this.shadowMap = dt, this.getContext = function() {
            return e;
        }, this.getContextAttributes = function() {
            return e.getContextAttributes();
        }, this.forceContextLoss = function() {
            var t = n.get("WEBGL_lose_context");
            t && t.loseContext();
        }, this.forceContextRestore = function() {
            var t = n.get("WEBGL_lose_context");
            t && t.restoreContext();
        }, this.getPixelRatio = function() {
            return J;
        }, this.setPixelRatio = function(t) {
            void 0 !== t && (J = t, this.setSize(q, K, !1));
        }, this.getSize = function(t) {
            return void 0 === t && (console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"), 
            t = new Mt()), t.set(q, K);
        }, this.setSize = function(t, e, n) {
            pt.isPresenting ? console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.") : (q = t, 
            K = e, S.width = Math.floor(t * J), S.height = Math.floor(e * J), !1 !== n && (S.style.width = t + "px", 
            S.style.height = e + "px"), this.setViewport(0, 0, t, e));
        }, this.getDrawingBufferSize = function(t) {
            return void 0 === t && (console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"), 
            t = new Mt()), t.set(q * J, K * J).floor();
        }, this.setDrawingBufferSize = function(t, e, n) {
            q = t, K = e, J = n, S.width = Math.floor(t * n), S.height = Math.floor(e * n), 
            this.setViewport(0, 0, t, e);
        }, this.getCurrentViewport = function(t) {
            return void 0 === t && (console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"), 
            t = new Bt()), t.copy(Y);
        }, this.getViewport = function(t) {
            return t.copy(tt);
        }, this.setViewport = function(t, e, n, r) {
            t.isVector4 ? tt.set(t.x, t.y, t.z, t.w) : tt.set(t, e, n, r), i.viewport(Y.copy(tt).multiplyScalar(J).floor());
        }, this.getScissor = function(t) {
            return t.copy(et);
        }, this.setScissor = function(t, e, n, r) {
            t.isVector4 ? et.set(t.x, t.y, t.z, t.w) : et.set(t, e, n, r), i.scissor(X.copy(et).multiplyScalar(J).floor());
        }, this.getScissorTest = function() {
            return nt;
        }, this.setScissorTest = function(t) {
            i.setScissorTest(nt = t);
        }, this.setOpaqueSort = function(t) {
            Q = t;
        }, this.setTransparentSort = function(t) {
            $ = t;
        }, this.getClearColor = function() {
            return m.getClearColor();
        }, this.setClearColor = function() {
            m.setClearColor.apply(m, arguments);
        }, this.getClearAlpha = function() {
            return m.getClearAlpha();
        }, this.setClearAlpha = function() {
            m.setClearAlpha.apply(m, arguments);
        }, this.clear = function(t, n, r) {
            var i = 0;
            void 0 !== t && !t || (i |= e.COLOR_BUFFER_BIT), void 0 !== n && !n || (i |= e.DEPTH_BUFFER_BIT), 
            void 0 !== r && !r || (i |= e.STENCIL_BUFFER_BIT), e.clear(i);
        }, this.clearColor = function() {
            this.clear(!0, !1, !1);
        }, this.clearDepth = function() {
            this.clear(!1, !0, !1);
        }, this.clearStencil = function() {
            this.clear(!1, !1, !0);
        }, this.dispose = function() {
            S.removeEventListener("webglcontextlost", yt, !1), S.removeEventListener("webglcontextrestored", mt, !1), 
            d.dispose(), y.dispose(), a.dispose(), f.dispose(), pt.dispose(), _t.stop(), this.forceContextLoss();
        }, this.renderBufferImmediate = function(t, n) {
            i.initAttributes();
            var r = a.get(t);
            t.hasPositions && !r.position && (r.position = e.createBuffer()), t.hasNormals && !r.normal && (r.normal = e.createBuffer()), 
            t.hasUvs && !r.uv && (r.uv = e.createBuffer()), t.hasColors && !r.color && (r.color = e.createBuffer()), 
            n = n.getAttributes();
            t.hasPositions && (e.bindBuffer(e.ARRAY_BUFFER, r.position), e.bufferData(e.ARRAY_BUFFER, t.positionArray, e.DYNAMIC_DRAW), 
            i.enableAttribute(n.position), e.vertexAttribPointer(n.position, 3, e.FLOAT, !1, 0, 0)), 
            t.hasNormals && (e.bindBuffer(e.ARRAY_BUFFER, r.normal), e.bufferData(e.ARRAY_BUFFER, t.normalArray, e.DYNAMIC_DRAW), 
            i.enableAttribute(n.normal), e.vertexAttribPointer(n.normal, 3, e.FLOAT, !1, 0, 0)), 
            t.hasUvs && (e.bindBuffer(e.ARRAY_BUFFER, r.uv), e.bufferData(e.ARRAY_BUFFER, t.uvArray, e.DYNAMIC_DRAW), 
            i.enableAttribute(n.uv), e.vertexAttribPointer(n.uv, 2, e.FLOAT, !1, 0, 0)), t.hasColors && (e.bindBuffer(e.ARRAY_BUFFER, r.color), 
            e.bufferData(e.ARRAY_BUFFER, t.colorArray, e.DYNAMIC_DRAW), i.enableAttribute(n.color), 
            e.vertexAttribPointer(n.color, 3, e.FLOAT, !1, 0, 0)), i.disableUnusedAttributes(), 
            e.drawArrays(e.TRIANGLES, 0, t.count), t.count = 0;
        };
        var wt = new Jn();
        this.renderBufferDirect = function(t, o, a, s, l, h) {
            null === o && (o = wt);
            var f = l.isMesh && l.matrixWorld.determinant() < 0, p = (t = Lt(t, o, s, l), o = (i.setMaterial(s, f, l), 
            !1), f = (H.geometry === a.id && H.program === t.id && H.wireframe === (!0 === s.wireframe) || (H.geometry = a.id, 
            H.program = t.id, H.wireframe = !0 === s.wireframe, o = !0), (s.morphTargets || s.morphNormals) && (v.update(l, a, s, t), 
            o = !0), a.index), a.attributes.position);
            if (null === f) {
                if (void 0 === p || 0 === p.count) return;
            } else if (0 === f.count) return;
            var d = 1, y = (!0 === s.wireframe && (f = c.getWireframeAttribute(a), d = 2), g), m = (o = (null !== f && (m = u.get(f), 
            (y = x).setIndex(m)), o && (function(t, o, a, s) {
                if (!1 !== r.isWebGL2 || !t.isInstancedMesh && !o.isInstancedBufferGeometry || null !== n.get("ANGLE_instanced_arrays")) {
                    i.initAttributes();
                    var l, c = o.attributes, h = s.getAttributes(), f = a.defaultAttributeValues;
                    for (l in h) {
                        var p = h[l];
                        if (0 <= p) {
                            var d = c[l];
                            if (void 0 !== d) {
                                var y, m, v, g, b, x, w, S = d.normalized, _ = d.itemSize;
                                void 0 !== (y = u.get(d)) && (m = y.buffer, v = y.type, g = y.bytesPerElement, d.isInterleavedBufferAttribute ? (x = (b = d.data).stride, 
                                w = d.offset, b && b.isInstancedInterleavedBuffer ? (i.enableAttributeAndDivisor(p, b.meshPerAttribute), 
                                void 0 === o.maxInstancedCount && (o.maxInstancedCount = b.meshPerAttribute * b.count)) : i.enableAttribute(p), 
                                e.bindBuffer(e.ARRAY_BUFFER, m), e.vertexAttribPointer(p, _, v, S, x * g, w * g)) : (d.isInstancedBufferAttribute ? (i.enableAttributeAndDivisor(p, d.meshPerAttribute), 
                                void 0 === o.maxInstancedCount && (o.maxInstancedCount = d.meshPerAttribute * d.count)) : i.enableAttribute(p), 
                                e.bindBuffer(e.ARRAY_BUFFER, m), e.vertexAttribPointer(p, _, v, S, 0, 0)));
                            } else if ("instanceMatrix" === l) void 0 !== (y = u.get(t.instanceMatrix)) && (m = y.buffer, 
                            v = y.type, i.enableAttributeAndDivisor(p + 0, 1), i.enableAttributeAndDivisor(p + 1, 1), 
                            i.enableAttributeAndDivisor(p + 2, 1), i.enableAttributeAndDivisor(p + 3, 1), e.bindBuffer(e.ARRAY_BUFFER, m), 
                            e.vertexAttribPointer(p + 0, 4, v, !1, 64, 0), e.vertexAttribPointer(p + 1, 4, v, !1, 64, 16), 
                            e.vertexAttribPointer(p + 2, 4, v, !1, 64, 32), e.vertexAttribPointer(p + 3, 4, v, !1, 64, 48)); else if (void 0 !== f) {
                                var E = f[l];
                                if (void 0 !== E) switch (E.length) {
                                  case 2:
                                    e.vertexAttrib2fv(p, E);
                                    break;

                                  case 3:
                                    e.vertexAttrib3fv(p, E);
                                    break;

                                  case 4:
                                    e.vertexAttrib4fv(p, E);
                                    break;

                                  default:
                                    e.vertexAttrib1fv(p, E);
                                }
                            }
                        }
                    }
                    i.disableUnusedAttributes();
                }
            }(l, a, s, t), null !== f) && e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, m.buffer), (null !== f ? f : p).count), 
            t = a.drawRange.start * d, a.drawRange.count * d);
            f = null !== h ? h.start * d : 0, p = null !== h ? h.count * d : 1 / 0, h = Math.max(t, f), 
            d = Math.min(o, t + m, f + p) - 1;
            0 !== (o = Math.max(0, d - h + 1)) && (l.isMesh ? !0 === s.wireframe ? (i.setLineWidth(s.wireframeLinewidth * ut()), 
            y.setMode(e.LINES)) : y.setMode(e.TRIANGLES) : l.isLine ? (t = s.linewidth, i.setLineWidth((t = void 0 === t ? 1 : t) * ut()), 
            l.isLineSegments ? y.setMode(e.LINES) : l.isLineLoop ? y.setMode(e.LINE_LOOP) : y.setMode(e.LINE_STRIP)) : l.isPoints ? y.setMode(e.POINTS) : l.isSprite && y.setMode(e.TRIANGLES), 
            l.isInstancedMesh ? y.renderInstances(a, h, o, l.count) : a.isInstancedBufferGeometry ? y.renderInstances(a, h, o, a.maxInstancedCount) : y.render(h, o));
        }, this.compile = function(t, e) {
            (D = y.get(t, e)).init(), t.traverse(function(t) {
                t.isLight && (D.pushLight(t), t.castShadow) && D.pushShadow(t);
            }), D.setupLights(e);
            var n = {};
            t.traverse(function(e) {
                if (e.material) if (Array.isArray(e.material)) for (var r = 0; r < e.material.length; r++) e.material[r].uuid in n == 0 && (Tt(e.material[r], t, e), 
                n[e.material[r].uuid] = !0); else e.material.uuid in n == 0 && (Tt(e.material, t, e), 
                n[e.material.uuid] = !0);
            });
        };
        var St = null, _t = new Qn();
        function Et(t, e, n, r) {
            for (var o = 0, a = t.length; o < a; o++) {
                var s = t[o], l = s.object, u = s.geometry, c = void 0 === r ? s.material : r, h = s.group;
                if (n.isArrayCamera) for (var f = (W = n).cameras, p = 0, d = f.length; p < d; p++) {
                    var y = f[p];
                    l.layers.test(y.layers) && (i.viewport(Y.copy(y.viewport)), D.setupLights(y), Ot(l, e, y, u, c, h));
                } else W = null, Ot(l, e, n, u, c, h);
            }
        }
        function Ot(t, e, n, r, o, a) {
            var s, l;
            o && o.opacity < .001 || (t.onBeforeRender(k, e, n, r, o, a), D = y.get(e, W || n), 
            t.userData.resetLight && D.setupLights(n), t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse, t.matrixWorld), 
            t.normalMatrix.getNormalMatrix(t.modelViewMatrix), t.isImmediateRenderObject ? (s = Lt(n, e, o, t), 
            i.setMaterial(o), H.geometry = null, H.program = null, H.wireframe = !1, l = s, 
            t.render(function(t) {
                k.renderBufferImmediate(t, l);
            })) : k.renderBufferDirect(n, e, r, o, t, a), t.onAfterRender(k, e, n, r, o, a), 
            D = y.get(e, W || n));
        }
        function Tt(t, e, n) {
            var r = a.get(t), i = D.state.lights, o = D.state.shadowsArray, s = i.state.version, l = (o = p.getParameters(t, i.state, o, e, it.numPlanes, it.numIntersection, n), 
            n = p.getProgramCacheKey(o), r.program), u = !0;
            if (void 0 === l) t.addEventListener("dispose", gt); else if (l.cacheKey !== n) xt(t); else {
                if (r.lightsStateVersion !== s) r.lightsStateVersion = s; else if (void 0 !== o.shaderID) return;
                u = !1;
            }
            u && (l = p.acquireProgram(o, n), r.program = l, r.uniforms = o.uniforms, r.environment = t.isMeshStandardMaterial ? e.environment : null, 
            r.outputEncoding = k.outputEncoding, t.program = l);
            var c = l.getAttributes();
            if (t.morphTargets) for (var h = t.numSupportedMorphTargets = 0; h < k.maxMorphTargets; h++) 0 <= c["morphTarget" + h] && t.numSupportedMorphTargets++;
            if (t.morphNormals) for (h = t.numSupportedMorphNormals = 0; h < k.maxMorphNormals; h++) 0 <= c["morphNormal" + h] && t.numSupportedMorphNormals++;
            u = r.uniforms, (t.isShaderMaterial || t.isRawShaderMaterial) && !0 !== t.clipping || (r.numClippingPlanes = it.numPlanes, 
            r.numIntersection = it.numIntersection, u.clippingPlanes = it.uniform), r.fog = e.fog, 
            r.needsLights = (n = t).isMeshLambertMaterial || n.isMeshToonMaterial || n.isMeshPhongMaterial || n.isMeshStandardMaterial || n.isShadowMaterial || n.isShaderMaterial && !0 === n.lights, 
            r.lightsStateVersion = s, r.needsLights && (u.ambientLightColor.value = i.state.ambient, 
            u.lightProbe.value = i.state.probe, u.directionalLights.value = i.state.directional, 
            u.directionalLightShadows.value = i.state.directionalShadow, u.spotLights.value = i.state.spot, 
            u.spotLightShadows.value = i.state.spotShadow, u.rectAreaLights.value = i.state.rectArea, 
            u.pointLights.value = i.state.point, u.pointLightShadows.value = i.state.pointShadow, 
            u.hemisphereLights.value = i.state.hemi, u.directionalShadowMap.value = i.state.directionalShadowMap, 
            u.directionalShadowMatrix.value = i.state.directionalShadowMatrix, u.spotShadowMap.value = i.state.spotShadowMap, 
            u.spotShadowMatrix.value = i.state.spotShadowMatrix, u.pointShadowMap.value = i.state.pointShadowMap, 
            u.pointShadowMatrix.value = i.state.pointShadowMatrix), o = r.program.getUniforms(), 
            l = Ao.seqWithValue(o.seq, u), r.uniformsList = l;
        }
        function Lt(t, n, o, u) {
            l.resetTextureUnits();
            var c, h, f, p, d = n.fog, y = o.isMeshStandardMaterial ? n.environment : null, m = a.get(o), v = D.state.lights, g = (ot && (at || t !== V) && (g = t === V && o.id === G, 
            it.setState(o.clippingPlanes, o.clipIntersection, o.clipShadows, t, m, g)), o.version === m.io ? (void 0 === m.program || o.fog && m.fog !== d || m.environment !== y || m.needsLights && m.lightsStateVersion !== v.state.version || void 0 !== m.numClippingPlanes && (m.numClippingPlanes !== it.numPlanes || m.numIntersection !== it.numIntersection) || m.outputEncoding !== k.outputEncoding) && Tt(o, n, u) : (Tt(o, n, u), 
            m.io = o.version), !1), b = (v = !1, n = !1, m.program), x = b.getUniforms(), w = m.uniforms;
            return i.useProgram(b.program) && (n = v = g = !0), o.id !== G && (G = o.id, v = !0), 
            (g || V !== t) && (x.setValue(e, "projectionMatrix", t.projectionMatrix), r.logarithmicDepthBuffer && x.setValue(e, "logDepthBufFC", 2 / (Math.log(t.far + 1) / Math.LN2)), 
            V !== t && (V = t, n = v = !0), (o.isShaderMaterial || o.isMeshPhongMaterial || o.isMeshToonMaterial || o.isMeshStandardMaterial || o.envMap) && void 0 !== (g = x.map.cameraPosition) && g.setValue(e, lt.setFromMatrixPosition(t.matrixWorld)), 
            (o.isMeshPhongMaterial || o.isMeshToonMaterial || o.isMeshLambertMaterial || o.isMeshBasicMaterial || o.isMeshStandardMaterial || o.isShaderMaterial) && x.setValue(e, "isOrthographic", !0 === t.isOrthographicCamera), 
            o.isMeshPhongMaterial || o.isMeshToonMaterial || o.isMeshLambertMaterial || o.isMeshBasicMaterial || o.isMeshStandardMaterial || o.isShaderMaterial || o.skinning) && x.setValue(e, "viewMatrix", t.matrixWorldInverse), 
            o.skinning && (x.setOptional(e, u, "bindMatrix"), x.setOptional(e, u, "bindMatrixInverse"), 
            g = u.skeleton) && (t = g.bones, r.floatVertexTextures ? (void 0 === g.boneTexture && (t = Math.sqrt(4 * t.length), 
            t = s.ceilPowerOfTwo(t), t = Math.max(t, 4), (p = new Float32Array(t * t * 4)).set(g.boneMatrices), 
            f = new qn(p, t, t, bt, vt), g.boneMatrices = p, g.boneTexture = f, g.boneTextureSize = t), 
            x.setValue(e, "boneTexture", g.boneTexture, l), x.setValue(e, "boneTextureSize", g.boneTextureSize)) : x.setOptional(e, g, "boneMatrices")), 
            !v && m.receiveShadow === u.receiveShadow || (m.receiveShadow = u.receiveShadow, 
            x.setValue(e, "receiveShadow", u.receiveShadow)), v && (x.setValue(e, "toneMappingExposure", k.toneMappingExposure), 
            x.setValue(e, "toneMappingWhitePoint", k.toneMappingWhitePoint), m.needsLights && (p = n, 
            (f = w).ambientLightColor.needsUpdate = p, f.lightProbe.needsUpdate = p, f.directionalLights.needsUpdate = p, 
            f.directionalLightShadows.needsUpdate = p, f.pointLights.needsUpdate = p, f.pointLightShadows.needsUpdate = p, 
            f.spotLights.needsUpdate = p, f.spotLightShadows.needsUpdate = p, f.rectAreaLights.needsUpdate = p, 
            f.hemisphereLights.needsUpdate = p), d && o.fog && (t = d, (g = w).fogColor.value.copy(t.color), 
            t.isFog ? (g.fogNear.value = t.near, g.fogFar.value = t.far) : t.isFogExp2 && (g.fogDensity.value = t.density)), 
            o.isMeshBasicMaterial ? At(w, o) : o.isMeshLambertMaterial ? (At(w, o), v = w, (n = o).emissiveMap && (v.emissiveMap.value = n.emissiveMap)) : o.isMeshToonMaterial ? (At(w, o), 
            d = o, (t = w).specular.value.copy(d.specular), t.shininess.value = Math.max(d.shininess, 1e-4), 
            d.gradientMap && (t.gradientMap.value = d.gradientMap), d.emissiveMap && (t.emissiveMap.value = d.emissiveMap), 
            d.bumpMap && (t.bumpMap.value = d.bumpMap, t.bumpScale.value = d.bumpScale, 1 === d.side) && (t.bumpScale.value *= -1), 
            d.normalMap && (t.normalMap.value = d.normalMap, t.normalScale.value.copy(d.normalScale), 
            1 === d.side) && t.normalScale.value.negate(), d.displacementMap && (t.displacementMap.value = d.displacementMap, 
            t.displacementScale.value = d.displacementScale, t.displacementBias.value = d.displacementBias)) : o.isMeshPhongMaterial ? (At(w, o), 
            v = o, (n = w).specular.value.copy(v.specular), n.shininess.value = Math.max(v.shininess, 1e-4), 
            v.emissiveMap && (n.emissiveMap.value = v.emissiveMap), v.bumpMap && (n.bumpMap.value = v.bumpMap, 
            n.bumpScale.value = v.bumpScale, 1 === v.side) && (n.bumpScale.value *= -1), v.normalMap && (n.normalMap.value = v.normalMap, 
            n.normalScale.value.copy(v.normalScale), 1 === v.side) && n.normalScale.value.negate(), 
            v.displacementMap && (n.displacementMap.value = v.displacementMap, n.displacementScale.value = v.displacementScale, 
            n.displacementBias.value = v.displacementBias)) : o.isMeshStandardMaterial ? (At(w, o, y), 
            o.isMeshPhysicalMaterial ? (Pt(t = w, d = o, y), t.reflectivity.value = d.reflectivity, 
            t.clearcoat.value = d.clearcoat, t.clearcoatRoughness.value = d.clearcoatRoughness, 
            d.sheen && t.sheen.value.copy(d.sheen), d.clearcoatMap && (t.clearcoatMap.value = d.clearcoatMap), 
            d.clearcoatRoughnessMap && (t.clearcoatRoughnessMap.value = d.clearcoatRoughnessMap), 
            d.clearcoatNormalMap && (t.clearcoatNormalScale.value.copy(d.clearcoatNormalScale), 
            t.clearcoatNormalMap.value = d.clearcoatNormalMap, 1 === d.side) && t.clearcoatNormalScale.value.negate(), 
            t.transparency.value = d.transparency) : Pt(w, o, y)) : o.isMeshMatcapMaterial ? (At(w, o), 
            n = w, (v = o).matcap && (n.matcap.value = v.matcap), v.bumpMap && (n.bumpMap.value = v.bumpMap, 
            n.bumpScale.value = v.bumpScale, 1 === v.side) && (n.bumpScale.value *= -1), v.normalMap && (n.normalMap.value = v.normalMap, 
            n.normalScale.value.copy(v.normalScale), 1 === v.side) && n.normalScale.value.negate(), 
            v.displacementMap && (n.displacementMap.value = v.displacementMap, n.displacementScale.value = v.displacementScale, 
            n.displacementBias.value = v.displacementBias)) : o.isMeshDepthMaterial ? (At(w, o), 
            t = w, (d = o).displacementMap && (t.displacementMap.value = d.displacementMap, 
            t.displacementScale.value = d.displacementScale, t.displacementBias.value = d.displacementBias)) : o.isMeshDistanceMaterial ? (At(w, o), 
            y = w, (n = o).displacementMap && (y.displacementMap.value = n.displacementMap, 
            y.displacementScale.value = n.displacementScale, y.displacementBias.value = n.displacementBias), 
            y.referencePosition.value.copy(n.referencePosition), y.nearDistance.value = n.nearDistance, 
            y.farDistance.value = n.farDistance) : o.isMeshNormalMaterial ? (At(w, o), v = w, 
            (t = o).bumpMap && (v.bumpMap.value = t.bumpMap, v.bumpScale.value = t.bumpScale, 
            1 === t.side) && (v.bumpScale.value *= -1), t.normalMap && (v.normalMap.value = t.normalMap, 
            v.normalScale.value.copy(t.normalScale), 1 === t.side) && v.normalScale.value.negate(), 
            t.displacementMap && (v.displacementMap.value = t.displacementMap, v.displacementScale.value = t.displacementScale, 
            v.displacementBias.value = t.displacementBias)) : o.isLineBasicMaterial ? (d = o, 
            (y = w).diffuse.value.copy(d.color), y.opacity.value = d.opacity, o.isLineDashedMaterial && (n = o, 
            (v = w).dashSize.value = n.dashSize, v.totalSize.value = n.dashSize + n.gapSize, 
            v.scale.value = n.scale)) : o.isPointsMaterial ? (t = o, (y = w).diffuse.value.copy(t.color), 
            y.opacity.value = t.opacity, y.size.value = t.size * J, y.scale.value = .5 * K, 
            t.map && (y.map.value = t.map), t.alphaMap && (y.alphaMap.value = t.alphaMap), t.map ? c = t.map : t.alphaMap && (c = t.alphaMap), 
            void 0 !== c && (!0 === c.matrixAutoUpdate && c.updateMatrix(), y.uvTransform.value.copy(c.matrix))) : o.isSpriteMaterial ? (d = o, 
            (v = w).diffuse.value.copy(d.color), v.opacity.value = d.opacity, v.rotation.value = d.rotation, 
            d.map && (v.map.value = d.map), d.alphaMap && (v.alphaMap.value = d.alphaMap), d.map ? h = d.map : d.alphaMap && (h = d.alphaMap), 
            void 0 !== h && (!0 === h.matrixAutoUpdate && h.updateMatrix(), v.uvTransform.value.copy(h.matrix))) : o.isShadowMaterial && (w.color.value.copy(o.color), 
            w.opacity.value = o.opacity), void 0 !== w.ltc_1 && (w.ltc_1.value = Kn.LTC_1), 
            void 0 !== w.ltc_2 && (w.ltc_2.value = Kn.LTC_2), Ao.upload(e, m.uniformsList, w, l), 
            o.isShaderMaterial) && (o.uniformsNeedUpdate = !1), o.isShaderMaterial && !0 === o.uniformsNeedUpdate && (Ao.upload(e, m.uniformsList, w, l), 
            o.uniformsNeedUpdate = !1), o.isSpriteMaterial && x.setValue(e, "center", u.center), 
            x.setValue(e, "modelViewMatrix", u.modelViewMatrix), x.setValue(e, "normalMatrix", u.normalMatrix), 
            x.setValue(e, "modelMatrix", u.matrixWorld), b;
        }
        function At(t, e, n) {
            var r, i;
            t.opacity.value = e.opacity, e.color && t.diffuse.value.copy(e.color), e.emissive && t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity), 
            e.map && (t.map.value = e.map), e.alphaMap && (t.alphaMap.value = e.alphaMap), e.specularMap && (t.specularMap.value = e.specularMap), 
            (n = e.envMap || n) && (t.envMap.value = n, t.flipEnvMap.value = n.isCubeTexture ? -1 : 1, 
            t.reflectivity.value = e.reflectivity, t.refractionRatio.value = e.refractionRatio, 
            t.maxMipLevel.value = a.get(n).Zr), e.lightMap && (t.lightMap.value = e.lightMap, 
            t.lightMapIntensity.value = e.lightMapIntensity), e.aoMap && (t.aoMap.value = e.aoMap, 
            t.aoMapIntensity.value = e.aoMapIntensity), e.map ? r = e.map : e.specularMap ? r = e.specularMap : e.displacementMap ? r = e.displacementMap : e.normalMap ? r = e.normalMap : e.bumpMap ? r = e.bumpMap : e.roughnessMap ? r = e.roughnessMap : e.metalnessMap ? r = e.metalnessMap : e.alphaMap ? r = e.alphaMap : e.emissiveMap && (r = e.emissiveMap), 
            void 0 !== r && (!0 === (r = r.isWebGLRenderTarget ? r.texture : r).matrixAutoUpdate && r.updateMatrix(), 
            t.uvTransform.value.copy(r.matrix)), e.aoMap ? i = e.aoMap : e.lightMap && (i = e.lightMap), 
            void 0 !== i && (!0 === (i = i.isWebGLRenderTarget ? i.texture : i).matrixAutoUpdate && i.updateMatrix(), 
            t.uv2Transform.value.copy(i.matrix));
        }
        function Pt(t, e, n) {
            t.roughness.value = e.roughness, t.metalness.value = e.metalness, e.roughnessMap && (t.roughnessMap.value = e.roughnessMap), 
            e.metalnessMap && (t.metalnessMap.value = e.metalnessMap), e.emissiveMap && (t.emissiveMap.value = e.emissiveMap), 
            e.bumpMap && (t.bumpMap.value = e.bumpMap, t.bumpScale.value = e.bumpScale, 1 === e.side) && (t.bumpScale.value *= -1), 
            e.normalMap && (t.normalMap.value = e.normalMap, t.normalScale.value.copy(e.normalScale), 
            1 === e.side) && t.normalScale.value.negate(), e.displacementMap && (t.displacementMap.value = e.displacementMap, 
            t.displacementScale.value = e.displacementScale, t.displacementBias.value = e.displacementBias), 
            (e.envMap || n) && (t.envMapIntensity.value = e.envMapIntensity);
        }
        _t.setAnimationLoop(function(t) {
            pt.isPresenting || St && St(t);
        }), "undefined" != typeof window && _t.setContext(window), this.setAnimationLoop = function(t) {
            St = t, pt.setAnimationLoop(t), _t.start();
        }, this.render = function(t, e) {
            var n, r, a;
            void 0 !== arguments[2] && (console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."), 
            r = arguments[2]), void 0 !== arguments[3] && (console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."), 
            a = arguments[3]), e && e.isCamera ? C || (H.geometry = null, H.program = null, 
            H.wireframe = !1, G = -1, !(V = null) === t.autoUpdate && t.updateMatrixWorld(), 
            null === e.parent && e.updateMatrixWorld(), pt.enabled && pt.isPresenting && (e = pt.getCamera(e)), 
            (D = y.get(t, e)).init(), t.onBeforeRender(k, t, e, r || U), st.multiplyMatrices(e.projectionMatrix, e.matrixWorldInverse), 
            rt.setFromProjectionMatrix(st), at = this.localClippingEnabled, ot = it.init(this.clippingPlanes, at, e), 
            (I = d.get(t, e)).init(), function t(e, n, r, i) {
                if (!1 !== e.visible) {
                    if (e.layers.test(n.layers)) if (e.isGroup) r = e.renderOrder; else if (e.isLOD) !0 === e.autoUpdate && e.update(n); else if (e.isLight) D.pushLight(e), 
                    e.castShadow && D.pushShadow(e); else if (e.isSprite) e.frustumCulled && !rt.intersectsSprite(e) || (i && lt.setFromMatrixPosition(e.matrixWorld).applyMatrix4(st), 
                    a = f.update(e), (s = e.material).visible && I.push(e, a, s, r, lt.z, null)); else if (e.isImmediateRenderObject) i && lt.setFromMatrixPosition(e.matrixWorld).applyMatrix4(st), 
                    I.push(e, null, e.material, r, lt.z, null); else if ((e.isMesh || e.isLine || e.isPoints) && (e.isSkinnedMesh && e.skeleton.frame !== o.render.frame && (e.skeleton.update(), 
                    e.skeleton.frame = o.render.frame), !e.frustumCulled || rt.intersectsObject(e))) {
                        i && lt.setFromMatrixPosition(e.matrixWorld).applyMatrix4(st);
                        var a = f.update(e), s = e.material;
                        if (Array.isArray(s)) for (var l = a.groups, u = 0, c = l.length; u < c; u++) {
                            var h = l[u], p = s[h.materialIndex];
                            p && p.visible && I.push(e, a, p, r, lt.z, h);
                        } else s.visible && I.push(e, a, s, r, lt.z, null);
                    }
                    var d = e.children;
                    for (u = 0, c = d.length; u < c; u++) t(d[u], n, r, i);
                }
            }(t, e, 0, k.sortObjects), I.finish(), !0 === k.sortObjects && I.sort(Q, $), ot && it.beginShadows(), 
            n = D.state.shadowsArray, dt.render(n, t, e), D.setupLights(e), ot && it.endShadows(), 
            this.info.autoReset && this.info.reset(), void 0 !== r && this.setRenderTarget(r), 
            m.render(I, t, e, a), n = I.opaque, r = I.transparent, t.overrideMaterial ? (a = t.overrideMaterial, 
            n.length && Et(n, t, e, a), r.length && Et(r, t, e, a)) : (n.length && Et(n, t, e), 
            r.length && Et(r, t, e)), t.onAfterRender(k, t, e), null !== U && (l.updateRenderTargetMipmap(U), 
            l.updateMultisampleRenderTarget(U)), i.buffers.depth.setTest(!0), i.buffers.depth.setMask(!0), 
            i.buffers.color.setMask(!0), i.setPolygonOffset(!1), D = I = null) : console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");
        }, this.setFramebuffer = function(t) {
            N !== t && null === U && e.bindFramebuffer(e.FRAMEBUFFER, t), N = t;
        }, this.getActiveCubeFace = function() {
            return F;
        }, this.getActiveMipmapLevel = function() {
            return B;
        }, this.getRenderTarget = function() {
            return U;
        }, this.setRenderTarget = function(t, n, r) {
            F = n, B = r, (U = t) && void 0 === a.get(t).Kr && l.setupRenderTarget(t);
            var o, s = N, u = !1;
            Z = t ? (o = a.get(t).Kr, t.isWebGLCubeRenderTarget ? (s = o[n || 0], u = !0) : s = t.isWebGLMultisampleRenderTarget ? a.get(t).$r : o, 
            Y.copy(t.viewport), X.copy(t.scissor), t.scissorTest) : (Y.copy(tt).multiplyScalar(J).floor(), 
            X.copy(et).multiplyScalar(J).floor(), nt), z !== s && (e.bindFramebuffer(e.FRAMEBUFFER, s), 
            z = s), i.viewport(Y), i.scissor(X), i.setScissorTest(Z), u && (o = a.get(t.texture), 
            e.framebufferTexture2D(e.FRAMEBUFFER, e.COLOR_ATTACHMENT0, e.TEXTURE_CUBE_MAP_POSITIVE_X + (n || 0), o.Jr, r || 0));
        }, this.readRenderTargetPixels = function(t, i, o, s, l, u, c) {
            if (t && t.isWebGLRenderTarget) {
                var h = a.get(t).Kr;
                if (h = t.isWebGLCubeRenderTarget && void 0 !== c ? h[c] : h) {
                    c = !1, h !== z && (e.bindFramebuffer(e.FRAMEBUFFER, h), c = !0);
                    try {
                        var f = t.texture, p = f.format, d = f.type;
                        p !== bt && w.convert(p) !== e.getParameter(e.IMPLEMENTATION_COLOR_READ_FORMAT) ? console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.") : 1009 === d || w.convert(d) === e.getParameter(e.IMPLEMENTATION_COLOR_READ_TYPE) || d === vt && (r.isWebGL2 || n.get("OES_texture_float") || n.get("WEBGL_color_buffer_float")) || 1016 === d && (r.isWebGL2 ? n.get("EXT_color_buffer_float") : n.get("EXT_color_buffer_half_float")) ? e.checkFramebufferStatus(e.FRAMEBUFFER) === e.FRAMEBUFFER_COMPLETE ? 0 <= i && i <= t.width - s && 0 <= o && o <= t.height - l && e.readPixels(i, o, s, l, w.convert(p), w.convert(d), u) : console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.") : console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");
                    } finally {
                        c && e.bindFramebuffer(e.FRAMEBUFFER, z);
                    }
                }
            } else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");
        }, this.copyFramebufferToTexture = function(t, n, r) {
            void 0 === r && (r = 0);
            var o = Math.pow(2, -r), a = Math.floor(n.image.width * o), s = (o = Math.floor(n.image.height * o), 
            w.convert(n.format));
            l.setTexture2D(n, 0), e.copyTexImage2D(e.TEXTURE_2D, r, s, t.x, t.y, a, o, 0), i.unbindTexture();
        }, this.copyTextureToTexture = function(t, n, r, o) {
            var a = n.image.width, s = n.image.height, u = w.convert(r.format), c = w.convert(r.type);
            l.setTexture2D(r, 0), n.isDataTexture ? e.texSubImage2D(e.TEXTURE_2D, o || 0, t.x, t.y, a, s, u, c, n.image.data) : e.texSubImage2D(e.TEXTURE_2D, o || 0, t.x, t.y, u, c, n.image), 
            i.unbindTexture();
        }, this.initTexture = function(t) {
            l.setTexture2D(t, 0), i.unbindTexture();
        }, "undefined" != typeof __THREE_DEVTOOLS__ && __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe", {
            detail: this
        }));
    }
    va.prototype = Object.assign(Object.create(z.prototype), {
        constructor: va,
        isArrayCamera: !0
    }), ga.prototype = Object.assign(Object.create(B.prototype), {
        constructor: ga,
        isGroup: !0
    }), Object.assign(ba.prototype, x.prototype);
    var wa = It = {
        vert: "\n                      \n                        uniform vec2 offset;\n                        uniform float rotation;\n                        uniform vec2 scale;\n                        varying vec2 vUv;\n                        void main() {\n                          vUv = uv;\n                  \n                          \n                          vec2 rotatedPosition;\n                            rotatedPosition.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\n                            rotatedPosition.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n                      \n        \n                            rotatedPosition.x *= scale.x * abs(projectionMatrix[0][0] / projectionMatrix[1][1]);\n                            rotatedPosition.y *= scale.y;\n                          \n                          rotatedPosition.xy += offset;\n                          gl_Position = vec4(rotatedPosition,0.0,1.0);\n                        }\n                        ",
        frag: "\n                    uniform vec3 diffuse;\n                    uniform sampler2D mmap;\n                    #include <common>\n                    varying vec2 vUv;\n               \n                    void main() {\n                \n                        // vec2 muv = vec2(vUv.x , 1.0 - vUv.y);\n                        vec4 diffuseColor = texture2D( mmap, vUv );\n                       \n                        \n                        gl_FragColor = diffuseColor;\n                    }\n                    "
    };
    function Sa(t) {
        return (Sa = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function _a(t, e, n) {
        e = Ea(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], Ea(t).constructor) : e.apply(t, n)) && ("object" === Sa(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function Ea(t) {
        return (Ea = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function Oa(t, e) {
        return (Oa = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    var Ma = function() {
        var t = n, e = Ur;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t) {
            if (this instanceof n) return (t = _a(this, n, [ t ])).uniforms.offset = {
                value: new Mt()
            }, t.uniforms.rotation = {
                value: 0
            }, t.uniforms.scale = {
                value: new Mt(1, 1)
            }, t.depthTest = !1, t.vertexShader = wa.vert, t.fragmentShader = wa.frag, t;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && Oa(t, e), t = n, Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }();
    function Ta(t, e) {
        this.array = t, this.stride = e, this.count = void 0 !== t ? t.length / e : 0, this.usage = 35044, 
        this.updateRange = {
            offset: 0,
            count: -1
        }, this.version = 0;
    }
    Object.defineProperty(Ta.prototype, "needsUpdate", {
        set: function(t) {
            !0 === t && this.version++;
        }
    }), Object.assign(Ta.prototype, {
        isInterleavedBuffer: !0,
        onUploadCallback: function() {},
        setUsage: function(t) {
            return this.usage = t, this;
        },
        copy: function(t) {
            return this.array = new t.array.constructor(t.array), this.count = t.count, this.stride = t.stride, 
            this.usage = t.usage, this;
        },
        copyAt: function(t, e, n) {
            t *= this.stride, n *= e.stride;
            for (var r = 0, i = this.stride; r < i; r++) this.array[t + r] = e.array[n + r];
            return this;
        },
        set: function(t, e) {
            return this.array.set(t, e = void 0 === e ? 0 : e), this;
        },
        clone: function() {
            return new this.constructor().copy(this);
        },
        onUpload: function(t) {
            return this.onUploadCallback = t, this;
        }
    });
    var La = new h();
    function Aa(t, e, n, r) {
        this.data = t, this.itemSize = e, this.offset = n, this.normalized = !0 === r;
    }
    function Pa(t) {
        return (Pa = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Ra(t, e, n) {
        e = ja(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], ja(t).constructor) : e.apply(t, n)) && ("object" === Pa(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function ja(t) {
        return (ja = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function Ia(t, e) {
        return (Ia = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    Object.defineProperties(Aa.prototype, {
        count: {
            get: function() {
                return this.data.count;
            }
        },
        array: {
            get: function() {
                return this.data.array;
            }
        }
    }), Object.assign(Aa.prototype, {
        isInterleavedBufferAttribute: !0,
        applyMatrix4: function(t) {
            for (var e = 0, n = this.data.count; e < n; e++) La.x = this.getX(e), La.y = this.getY(e), 
            La.z = this.getZ(e), La.applyMatrix4(t), this.setXYZ(e, La.x, La.y, La.z);
            return this;
        },
        setX: function(t, e) {
            return this.data.array[t * this.data.stride + this.offset] = e, this;
        },
        setY: function(t, e) {
            return this.data.array[t * this.data.stride + this.offset + 1] = e, this;
        },
        setZ: function(t, e) {
            return this.data.array[t * this.data.stride + this.offset + 2] = e, this;
        },
        setW: function(t, e) {
            return this.data.array[t * this.data.stride + this.offset + 3] = e, this;
        },
        getX: function(t) {
            return this.data.array[t * this.data.stride + this.offset];
        },
        getY: function(t) {
            return this.data.array[t * this.data.stride + this.offset + 1];
        },
        getZ: function(t) {
            return this.data.array[t * this.data.stride + this.offset + 2];
        },
        getW: function(t) {
            return this.data.array[t * this.data.stride + this.offset + 3];
        },
        setXY: function(t, e, n) {
            return t = t * this.data.stride + this.offset, this.data.array[t + 0] = e, this.data.array[t + 1] = n, 
            this;
        },
        setXYZ: function(t, e, n, r) {
            return t = t * this.data.stride + this.offset, this.data.array[t + 0] = e, this.data.array[t + 1] = n, 
            this.data.array[t + 2] = r, this;
        },
        setXYZW: function(t, e, n, r, i) {
            return t = t * this.data.stride + this.offset, this.data.array[t + 0] = e, this.data.array[t + 1] = n, 
            this.data.array[t + 2] = r, this.data.array[t + 3] = i, this;
        }
    });
    var Da = function() {
        var t = n, e = Mr;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n() {
            var t, e;
            if (this instanceof n) return t = Ra(this, n), e = new Ta(new Float32Array([ -.5, -.5, 0, 0, 0, .5, -.5, 0, 1, 0, .5, .5, 0, 1, 1, -.5, .5, 0, 0, 1 ]), 5), 
            t.setIndex([ 0, 1, 2, 0, 2, 3 ]), t.setAttribute("position", new Aa(e, 3, 0, !1)), 
            t.setAttribute("uv", new Aa(e, 2, 3, !1)), t;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && Ia(t, e), t = n, Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }();
    function ka(t, e, n, r, i, o, a, s, l) {
        Zn.call(this, t, e, n, r, i, o, a, s, l), this.needsUpdate = !0;
    }
    function Ca(t, e, n, r, i, o) {
        var a = (t + n) / 2, s = (e + r) / 2, l = ((t - n) * (t - n) + (e - r) * (e - r)) / 4, u = (u = Math.sqrt(l)) * (u / Math.sqrt(i * i - l)), c = (i = Math.PI / 2, 
        l = (n - t) / (e - r), (t - n) / (e - r)), h = Math.sqrt(1 + l * l), f = Math.sqrt(1 + c * c);
        l = {
            x: a + u * (1 / h),
            y: s + u * (l / h),
            theta: i
        }, h = {
            x: a + u * (-1 / f),
            y: s + u * (c / f),
            theta: i
        };
        return 0 < (n - t) * (l.y - e) - (r - e) * (l.x - t) ? 0 === o ? l : h : 0 === o ? h : l;
    }
    function Na(t, e, n, r) {
        for (var i = 0; i < t.length; i++) switch (t[i]) {
          case "m":
            e.moveTo(r.x + parseFloat(t[i + 1]), r.y + parseFloat(t[i + 2])), n.x = r.x + parseFloat(t[i + 1]), 
            n.y = r.y + parseFloat(t[i + 2]), r.x = n.x, r.y = n.y, i += 2;
            break;

          case "M":
            e.moveTo(parseFloat(t[i + 1]), parseFloat(t[i + 2])), n.x = parseFloat(t[i + 1]), 
            n.y = parseFloat(t[i + 2]), r.x = n.x, r.y = n.y, i += 2;
            break;

          case "l":
            e.lineTo(n.x + parseFloat(t[i + 1]), n.y + parseFloat(t[i + 2])), n.x = n.x + parseFloat(t[i + 1]), 
            n.y = n.y + parseFloat(t[i + 2]), i += 2;
            break;

          case "L":
            e.lineTo(parseFloat(t[i + 1]), parseFloat(t[i + 2])), n.x = parseFloat(t[i + 1]), 
            n.y = parseFloat(t[i + 2]), i += 2;
            break;

          case "A":
            var o = parseFloat(t[i + 1]), a = parseFloat(t[i + 2]), s = (parseFloat(t[i + 3]), 
            Math.PI, parseFloat(t[i + 4]), parseFloat(t[i + 5])), l = n.x, u = n.y, c = parseFloat(t[i + 6]), h = parseFloat(t[i + 7]);
            o === a && (f = Ca(l, u, c, h, o, s), e.arcTo(f.x, f.y, c, h, f.theta), n.x = c, 
            n.y = h), i += 7;
            break;

          case "a":
            var f;
            o = parseFloat(t[i + 1]), a = parseFloat(t[i + 2]), s = (parseFloat(t[i + 3]), Math.PI, 
            parseFloat(t[i + 4]), parseFloat(t[i + 5])), l = n.x, u = n.y, c = l + parseFloat(t[i + 6]), 
            h = u + parseFloat(t[i + 7]);
            o === a && (f = Ca(l, u, c, h, o, s), e.arcTo(f.x, f.y, c, h, f.theta), n.x = c, 
            n.y = h), i += 7;
            break;

          case "h":
            e.lineTo(n.x + parseFloat(t[i + 1]), n.y), n.x = n.x + parseFloat(t[i + 1]), i += 1;
            break;

          case "H":
            e.lineTo(parseFloat(t[i + 1]), n.y), n.x = parseFloat(t[i + 1]), i += 1;
            break;

          case "z":
          case "Z":
            e.lineTo(r.x, r.y);
        }
    }
    ka.prototype = Object.create(Zn.prototype);
    var Fa = [ "M", "0", "15.07", "L", "0.69", "1.92", "A", "2", "2", "0", "0", "1", "2.66", "0", "L", "11.8", "0", "l", "-0.07", "1.37", "H", "3.09", "A", "1.09", "1.09", "0", "0", "0", "2", "2.44", "l", "-0.2", "4.44", "h", "9.37", "l", "-0.07", "1.37", "H", "1.72", "l", "-0.36", "6.82", "Z" ], Ba = [ "M", "13.79", "11", "l", "-0.08", "1.63", "a", "1", "1", "0", "0", "0", "1", "1.08", "h", "8.53", "l", "-0.07", "1.36", "h", "-9", "A", "1.84", "1.84", "0", "0", "1", "12.31", "13", "l", "0.48", "-9.16", "h", "8.9", "a", "2", "2", "0", "0", "1", "2", "2", "L", "23.53", "9", "A", "2.11", "2.11", "0", "0", "1", "21.47", "11", "Z", "m", "8.4", "-2.49", "l", "0.08", "-2.16", "a", "1.07", "1.07", "0", "0", "0", "-1.09", "-1.09", "H", "14.09", "l", "-0.22", "4.33", "H", "21", "A", "1.15", "1.15", "0", "0", "0", "22.19", "8.51", "Z" ], Ua = [ "M", "33.94", "3.86", "a", "1.93", "1.93", "0", "0", "1", "2", "1.95", "l", "-0.47", "9.27", "H", "34.07", "l", "0.45", "-8.72", "a", "1.09", "1.09", "0", "0", "0", "-1.09", "-1.1", "H", "26.3", "l", "-0.51", "9.82", "H", "24.41", "L", "25", "3.85", "Z" ], za = [ "M", "36.48", "17.72", "H", "45", "a", "1.16", "1.16", "0", "0", "0", "1.16", "-1.22", "l", "0.07", "-1.43", "H", "38.72", "a", "2", "2", "0", "0", "1", "-2", "-2.06", "l", "0.37", "-7.19", "a", "2", "2", "0", "0", "1", "2.15", "-2", "H", "48.2", "l", "-0.69", "13.28", "a", "2.09", "2.09", "0", "0", "1", "-2.06", "2", "h", "-9", "Z", "m", "9.85", "-4.05", "l", "0.44", "-8.45", "H", "39.53", "a", "1.07", "1.07", "0", "0", "0", "-1.08", "1.1", "l", "-0.32", "6.27", "a", "1.16", "1.16", "0", "0", "0", "1.1", "1.1", "Z" ], Ga = [ "M", "57.43", "11.59", "L", "63.48", "0", "h", "1.83", "l", "-0.79", "15.05", "H", "63.15", "l", "0.67", "-12.79", "L", "57.67", "14", "h", "-0.75", "L", "52.07", "2.34", "l", "-0.64", "12.72", "H", "50", "L", "50.83", "0", "H", "52.6", "Z" ], Ha = [ "M", "69.6", "10.2", "l", "-2.37", "4.87", "h", "-1.5", "L", "73.09", "0", "h", "1.49", "l", "5.77", "15.05", "h", "-1.5", "L", "77", "10.2", "Z", "m", "6.86", "-1.39", "L", "73.74", "1.73", "L", "70.28", "8.81", "Z" ], Va = [ "M", "82.95", "15.07", "H", "81.57", "L", "82.35", "0", "h", "10", "a", "1.94", "1.94", "0", "0", "1", "1.85", "2", "L", "93.89", "7.4", "a", "2", "2", "0", "0", "1", "-2", "1.92", "H", "83.25", "Z", "m", "8.43", "-7.15", "a", "1.13", "1.13", "0", "0", "0", "1.09", "-1.09", "l", "0.35", "-4.37", "a", "1.1", "1.1", "0", "0", "0", "-1.08", "-1.06", "H", "83.66", "l", "-0.34", "6.53", "Z" ], Wa = {
        oo: (ka.prototype.constructor = ka).prototype.isCanvasTexture = !0
    };
    function Ya(t) {
        return (Ya = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Xa(t, e) {
        (null == e || e > t.length) && (e = t.length);
        for (var n = 0, r = new Array(e); n < e; n++) r[n] = t[n];
        return r;
    }
    function Za(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Ya(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Ya(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Ya(t) ? t : String(t);
            }(r.key), r);
        }
    }
    It = function() {
        function t(e, n, r) {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
            this.so = 0, this.Xe = 0, this.jt = e, this.ze = n, this.Ct = r, this.renderer = this.ao(n.container, n.logarithmicDepthBuffer), 
            this.Br = new Map(), (r = this.jt.getMapOptions().depthPeeling) && jt.a.environment === Ut.a.BROWSER && (this.uo = new jt.a.DepthPeelingRenderer({
                map: e,
                renderManager: this,
                mode: r.mode,
                layers: r.layers,
                type: r.types
            })), this.co = JSON.parse(JSON.stringify(n.renderOrder)), this.fo = 0, this.ho = !1, 
            this.do = null, this.vo = Wa.oo, this.vo && (this.do = function(t) {
                o = (i = jt.a.document.createElement("canvas")).getContext("2d"), i.width = 500, 
                i.height = 120, i.style.width = "500px", i.style.height = "120px", r = {
                    x: 0,
                    y: 0
                }, n = {
                    x: 0,
                    y: 0
                }, o.transform(5, 0, 0, 5, 10, 10), (a = o.createLinearGradient(5.9, 15.07, 5.9, 0)).addColorStop(0, "#232323"), 
                a.addColorStop(1, "#585858"), o.fillStyle = a, o.beginPath(), Na(Fa, o, n, r), o.closePath(), 
                o.fill(), o.beginPath(), Na(Ba, o, n, r), o.closePath(), o.fill(), o.beginPath(), 
                Na(Ua, o, n, r), o.closePath(), o.fill(), o.beginPath(), Na(za, o, n, r), o.closePath(), 
                o.fill(), (a = o.createLinearGradient(57.68, 15.07, 57.68, 0)).addColorStop(0, "#77bf00"), 
                a.addColorStop(1, "#addc0c"), o.fillStyle = a, o.beginPath(), Na(Ga, o, n, r), o.closePath(), 
                o.fill(), o.beginPath(), Na(Ha, o, n, r), o.closePath(), o.fill(), o.beginPath(), 
                Na(Va, o, n, r), o.closePath(), o.fill(), jt.a.environment == Ut.a.BROWSER ? e = new ka(i) : (a = i.toDataURL("image/png"), 
                o.restore(), e = new Zn(), jt.a.textureHelper.createImage({
                    url: a,
                    onload: function(t) {
                        e.image = t, e.needsUpdate = !0;
                    }
                }));
                var e, n = e, r = new Mt(.4, .096), i = new Ma(), o = -1 * (.5 * r.x / t - 1), a = -1 * (1 - .5 * r.y);
                return n.minFilter = mt, n.generateMipmaps = !1, i.transparent = !0, i.depthTest = !1, 
                i.uniforms = {
                    scale: {
                        value: r
                    },
                    offset: {
                        value: new Mt(o, a)
                    },
                    mmap: {
                        value: n
                    }
                }, i.needsUpdate = !0, new mi(new Da(), i);
            }(this.renderer.domElement.clientWidth / this.renderer.domElement.clientHeight), 
            this.do.frustumCulled = !1, this.xx45f6 = this.do), this.po = !1, this.mo = !1, 
            this.Et = this.renderer.domElement.clientWidth, this.yo = this.renderer.domElement.clientHeight, 
            this.type = "basic", this.Xt = !0, this.zr = void 0, this.bo = void 0, this.Hr = [], 
            this.wo();
        }
        var e, n;
        return e = t, (n = [ {
            key: "setTileLayScene",
            value: function(t) {
                this.zr = t;
            }
        }, {
            key: "getTileLayScene",
            value: function() {
                return this.zr;
            }
        }, {
            key: "setGroundLayerScene",
            value: function(t) {
                this.bo = t;
            }
        }, {
            key: "getGroundLayerScene",
            value: function() {
                return this.bo;
            }
        }, {
            key: "set3DTilesLayerSceneArr",
            value: function(t) {
                this.Hr.push(t);
            }
        }, {
            key: "get3DTilesLayerSceneArr",
            value: function() {
                return this.Hr;
            }
        }, {
            key: "needLogo",
            get: function() {
                return this.vo;
            }
        }, {
            key: "render",
            value: function() {
                var t = this, e = this;
                if (this.renderer && (this.so += 1, 15e6 < this.so && (this.so = 0), jt.a.environment !== Ut.a.WX || 1 != this.Xe || this.so % 2 != 0)) {
                    this.jt.kt.Ze.mn(), this.jt.kt.Ze.yn(this.Br), this.jt.kt.Ze.yn([ this.zr, this.bo ].concat(function(t) {
                        return function(t) {
                            if (Array.isArray(t)) return Xa(t);
                        }(t) || function(t) {
                            if ("undefined" != typeof Symbol && null != t[Symbol.iterator] || null != t["@@iterator"]) return Array.from(t);
                        }(t) || function(t, e) {
                            var n;
                            if (t) return "string" == typeof t ? Xa(t, e) : "Map" === (n = "Object" === (n = Object.prototype.toString.call(t).slice(8, -1)) && t.constructor ? t.constructor.name : n) || "Set" === n ? Array.from(t) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? Xa(t, e) : void 0;
                        }(t) || function() {
                            throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
                        }();
                    }(this.Hr))), this.renderer.clear(), this.zr && this.renderer.render(this.zr, this.jt.He), 
                    this.bo && this.renderer.render(this.bo, this.jt.He);
                    for (var n = 0; n < this.Hr.length; n++) this.renderer.render(this.Hr[n], this.jt.He);
                    this.jt.getMapOptions().depthPeeling ? this.uo.render() : this.Br.forEach(function(e) {
                        return t.renderer.render(e, t.jt.He);
                    });
                    var r = {
                        min: 1 / 0,
                        max: -1 / 0
                    }, i = (this.jt._o.Nt.forEach(function(n) {
                        var i = [];
                        n.So.forEach(function(n) {
                            var o;
                            (function(t) {
                                for (var n = !1, r = Array.from(e.getRenderList()), i = 0; i < r.length; i++) if (r[i][0].split("%A%B%C%D")[0] === t) {
                                    n = !0;
                                    break;
                                }
                                return n;
                            })(n.buildingID || t.jt.getMapOptions().mapID) && n.isCross && (i.push(n), (o = Math.min(n.levelRange[0], n.levelRange[1])) < r.min && (r.min = o), 
                            o = Math.max(n.levelRange[0], n.levelRange[1]), r.max < o) && (r.max = o);
                        }), i.forEach(function(e) {
                            t.renderer.render(e.line, t.jt.He);
                        });
                    }), this.co.indexOf(Ct.LINE_MARKER));
                    this.Br.forEach(function(e, n) {
                        var o = (n = n.split("%A%B%C%D"))[1];
                        n = n[2];
                        +o === r.max && (o = t.co.indexOf(Ct.LAYER_NODE_TYPE.get(+n)), i < o) && t.renderer.render(e, t.jt.He);
                    }), this.jt._o && this.renderer.render(this.jt._o.xo, this.jt.He), this.vo && this.do && this.renderer.render(this.do, this.jt.He);
                }
            }
        }, {
            key: "resize",
            value: function() {
                this.renderer && (5 < Math.abs(this.renderer.domElement.parentElement.clientHeight - this.yo) || 5 < Math.abs(this.renderer.domElement.parentElement.clientWidth - this.Et)) && (this.Eo(this.renderer.domElement.parentElement.clientWidth, this.renderer.domElement.parentElement.clientHeight), 
                this.Et = this.renderer.domElement.clientWidth, this.yo = this.renderer.domElement.clientHeight, 
                this.jt.Ye.We({
                    type: "resize"
                }));
            }
        }, {
            key: "getRenderList",
            value: function() {
                return this.Br;
            }
        }, {
            key: "parent",
            get: function() {
                return this.jt;
            }
        }, {
            key: "getWebGLRenderer",
            value: function() {
                return xa;
            }
        } ]) && Za(e.prototype, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }();
    var qa = (Object.assign(It.prototype, {
        Mo: function() {
            for (var t in this.jt = null, this.ze = null, this.Ct = null, this) this["" + t] = null, 
            delete this["" + t];
        },
        tn: function() {
            this.Xt = !1, this.Br.clear(), jt.a.window.cancelAnimationFrame(this.Oo);
        },
        ao: function(t, e) {
            return (e = new xa({
                useWebGL2: this.jt.getMapOptions().depthPeeling,
                antialias: !0,
                alpha: !0,
                logarithmicDepthBuffer: e,
                canvas: jt.a.environment == Ut.a.BROWSER ? void 0 : t
            })).setPixelRatio(jt.a.window.devicePixelRatio), jt.a.environment === Ut.a.BROWSER && e.setSize(t.clientWidth, t.clientHeight), 
            e.autoClear = !1, e.domElement.style.position = "absolute", e.domElement.style.top = 0, 
            e.domElement.style.zIndex = 0, e.setClearAlpha(0), jt.a.environment == Ut.a.BROWSER && t.appendChild(e.domElement), 
            e;
        },
        To: function(t) {
            this.renderer = t;
        },
        jo: function(t) {
            return (t = "3D" === t ? this.jt.qe : this.jt.Je).updateMatrixWorld(!0), new ft().setFromProjectionMatrix(new b().multiplyMatrices(t.projectionMatrix, t.matrixWorldInverse));
        },
        Lo: function(t) {
            for (var e = [], n = [], r = 0; r < t.length; r++) {
                var i = this.co.indexOf(t[r]);
                -1 !== i && (e.push(i), n.push(t[r]));
            }
            e.sort(function(t, e) {
                return t - e;
            });
            for (var o = 0; o < e.length; o++) this.co[e[o]] = n[o];
            this.Hi();
        },
        ko: function(t) {
            this.co = t, this.Hi();
        },
        Ao: function(t, e) {
            var n = 1, r = this.renderer.domElement.clientHeight;
            e = this.jt.He.isPerspectiveCamera ? e ? e / (r / (2 * Math.tan(this.jt.qe.fov * Dt.DEG2RAD / 2))) : t.mapNode.Ro / (r / (2 * Math.tan(this.jt.qe.fov * Dt.DEG2RAD / 2))) : e ? e * Math.abs(this.jt.He.top - this.jt.He.bottom) / this.jt.He.zoom / r : t.mapNode.Ro * Math.abs(this.jt.He.top - this.jt.He.bottom) / this.jt.He.zoom / r;
            t.material.userData.scaleRatio && (n = t.material.userData.scaleRatio), t.scale.set(e, e / n, e);
        },
        wi: function() {
            var t = this;
            this.Br.forEach(function(e) {
                switch (e.userData.type) {
                  case "label":
                    for (var n = 0; n < e.children.length; n++) e.children[n].mapNode.Co(t.jt.ui);
                    break;

                  case "facility":
                    for (var r = 0; r < e.children.length; r++) t.Ao(e.children[r]);
                    break;

                  default:
                    for (var i = 0; i < e.children.length; i++) !e.children[i].mapNode || e.children[i].mapNode.type !== Ct.IMAGE_MARKER && e.children[i].mapNode.type !== Ct.LOCATION_MARKER || e.children[i].mapNode.No();
                }
            });
        },
        Eo: function(t, e) {
            var n = this.jt.qe, r = this.jt.Je, i = new Mt(.4, .096), o = -1 * (.5 * i.x / (t / e) - 1), a = -1 * (1 - .5 * i.y);
            for (n.aspect = t / e, n.updateProjectionMatrix(), r.left = -t / 2, r.right = t / 2, 
            r.top = e / 2, r.bottom = -e / 2, r.updateProjectionMatrix(), this.do && (this.do.material.uniforms.scale = {
                value: i
            }, this.do.material.uniforms.offset = {
                value: new Mt(o, a)
            }), this.renderer.setSize(t, e), this.wi(), this.jt.enableUpdateRender(), this.jt.enableUpdateNode(), 
            this.jt.ui.Po(); 0 < this.jt.ui.Do.length; ) this.jt.ui.Io();
        },
        Fo: function(t, e) {
            jt.a.environment === Ut.a.BROWSER && (t.updateMatrixWorld(!0), t.parent.updateMatrixWorld(!0));
            var n, r, i = this.jt.He, o = (i = new h().setFromMatrixPosition(t.matrixWorld).applyMatrix4(i.matrixWorldInverse).applyMatrix4(i.projectionMatrix), 
            t.mapNode.Ro);
            if (e) {
                if ("string" == typeof t.mapNode.text) {
                    if (!t.material.map.image) return;
                    n = t.mapNode.type === Ct.LABEL ? (o = t.material.map.image.height / 2 / 1.2, t.material.map.image.width / 2 / 1.2) : (o *= t.mapNode.text.split("%rn%").length) / t.material.userData.scaleRatio;
                } else n = (o *= t.mapNode.text.length) / t.material.userData.scaleRatio;
                void 0 !== t.material.userData.style && (e = t.material.userData.style, r = o * t.material.userData.itHeightRatio * 1.1, 
                "limage-rtext" === e || "ltext-rimage" === e ? o < r && (n = (o = r) / t.material.userData.scaleRatio) : "timage-btext" === e || "ttext-bimage" === e ? n = (o += r) / t.material.userData.scaleRatio : "overlay-text" === e && o < r && (n = (o = r) / t.material.userData.scaleRatio));
            } else n = o;
            return o = o / this.renderer.domElement.clientHeight * 2, n = n / this.renderer.domElement.clientWidth * 2, 
            {
                leftTop: new Mt(i.x - n / 2, i.y + o / 2),
                rightDown: new Mt(i.x + n / 2, i.y - o / 2)
            };
        },
        Go: function(t, e, n, r, i) {
            for (var o = 0; o < e.length; o++) {
                var a = e[o].mapNode.Uo;
                if (!e[o].mapNode.Yi || e[o].mapNode.Bo) a ? e[o].mapNode.collisionTargetShow = !1 : e[o].visible = !1; else if (e[o].mapNode.B && (e[o].mapNode.B.maxlevel <= r || e[o].mapNode.B.minlevel > r)) a ? e[o].mapNode.collisionTargetShow = !1 : e[o].visible = !1; else if (!1 === i) a ? e[o].mapNode.collisionTargetShow = !0 : e[o].visible = !0; else if (!1 === e[o].mapNode.Ho) a ? e[o].mapNode.collisionTargetShow = !0 : e[o].visible = !0; else {
                    var s = e[o].children[0] || e[o];
                    if ("Sprite" === s.type && s.material.map) {
                        var l = this.Fo(s, n);
                        if (l) {
                            e[o].userData.bounds = l;
                            for (var u = !0, c = 0; c < t.length; c++) {
                                var h = t[c].userData.bounds;
                                if (!(u = !Ve.Rn(l.leftTop, l.rightDown, h.leftTop, h.rightDown))) break;
                            }
                            u ? (a ? e[o].mapNode.collisionTargetShow = !0 : e[o].visible = !0, t.push(e[o])) : a ? e[o].mapNode.collisionTargetShow = !1 : e[o].visible = !1;
                        }
                    }
                }
            }
            for (var f = 0; f < e.length; f++) e[f].mapNode.Uo && e[f].mapNode.zo();
        },
        Vo: function(t) {
            var e = this;
            this.mo && (this.jt.traverse(function(n) {
                if (e.jt.ui.Wo(n)) for (var r = n.visibleLevels, i = [], o = null != t ? t : e.jt.getZoom(), a = e.Ct.Yo, s = 0; s < r.length; s++) {
                    var l = n.getFloor(r[s]);
                    if (l) {
                        var u, c = void 0, h = void 0;
                        0 < (u = (0 < (u = l.getLayers(Ct.LABEL_LAYER)).length && (c = u[0].scene), l.getLayers(Ct.FACILITY_LAYER))).length && (h = u[0].scene), 
                        i.length = 0, c && e.Go(i, c.children, !0, o, c.mapNode.Ho), h && e.Go(i, h.children, !1, o, h.mapNode.Ho);
                        for (var f = 0; f < a.length; f++) for (var p = a[f], d = i.length = 0; d < p.length; d++) {
                            var y = p[d], m = void 0, v = void 0, g = !1;
                            0 < (y = l.getLayers(y)).length && (v = (m = y[0]).scene, g = !0 === m.isHasText), 
                            v && void 0 !== m.collision && e.Go(i, v.children, g, o, m.collision);
                        }
                    }
                }
            }), this.mo = !1, this.jt.enableUpdateRender());
        },
        Xo: function() {
            !0 !== this.Ct.Zo && !0 !== this.Ct.qo || (this.mo = !0);
        },
        Hi: function() {
            this.po = !0;
        },
        Ai: function(t) {
            this.Br.delete(t);
        },
        ut: function() {
            this.Br.clear();
        },
        Jo: function() {
            var t, e = this;
            this.po && (this.Br.clear(), t = [], this.jt.traverse(function(n) {
                if (e.jt.ui.Wo(n)) for (var r = 0; r < n.visibleLevels.length; r++) {
                    var i = n.getFloor(n.visibleLevels[r]);
                    i && t.push(i);
                }
            }), t.sort(function(t, n) {
                return t.height < n.height ? -1 : t.height > n.height ? 1 : t.parent === e.jt.Dt ? -1 : n.parent === e.jt.Dt ? 1 : 0;
            }), t.forEach(function(t) {
                var n = [];
                t.traverse(function(t) {
                    n.unshift(t);
                }), n.sort(function(t, n) {
                    t = e.co.indexOf(Ct.LAYER_NODE_TYPE.get(t.Re)), n = e.co.indexOf(Ct.LAYER_NODE_TYPE.get(n.Re));
                    var r = e.co.length - 1;
                    return (t = -1 === t ? r : t) - (-1 === n ? r : n);
                }), n.forEach(function(t, n, r) {
                    var i = (i = t.parent).parent.Ae + "%A%B%C%D" + i.level + "%A%B%C%D" + t.Re;
                    e.Br.set(i, t.scene);
                });
            }), this.po = !1, this.wi(), this.Xo());
        },
        Jt: function() {
            this.Br && 0 < this.Br.size && !this.ho && (this.jt.Ye.We({
                type: "firstRender"
            }), this.ho = !0);
        },
        wo: function() {
            var t;
            this.jt && this.Xt && (this.Xt && (this.Oo = jt.a.window.requestAnimationFrame(this.wo.bind(this))), 
            this.jt.Ye.We({
                type: "beforeRender"
            }), this.resize(), t = {
                type: "update",
                renderType: this.Ct.Ko ? 0 : 1
            }, this.Ct.Ko && (this.render(), this.Jt(), this.Ct.Ko = !1), this.jt.Ye.We(t));
        }
    }), It), Ka = n(6);
    function Ja(t) {
        return (Ja = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Qa(t, e) {
        var n, r = Object.keys(t);
        return Object.getOwnPropertySymbols && (n = Object.getOwnPropertySymbols(t), e && (n = n.filter(function(e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
        })), r.push.apply(r, n)), r;
    }
    function $a(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, ts(r.key), r);
        }
    }
    function ts(t) {
        return t = function(t, e) {
            if ("object" != Ja(t) || !t) return t;
            var n = t[Symbol.toPrimitive];
            if (void 0 === n) return String(t);
            if ("object" != Ja(n = n.call(t, e))) return n;
            throw new TypeError("@@toPrimitive must return a primitive value.");
        }(t, "string"), "symbol" == Ja(t) ? t : String(t);
    }
    It = function(t, e, n) {
        return e && $a(t.prototype, e), n && $a(t, n), Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }(function t(e) {
        if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
        this.Qo = function(t) {
            for (var e = 1; e < arguments.length; e++) {
                var n = null != arguments[e] ? arguments[e] : {};
                e % 2 ? Qa(Object(n), !0).forEach(function(e) {
                    var r, i;
                    r = t, i = n[e = e], (e = ts(e)) in r ? Object.defineProperty(r, e, {
                        value: i,
                        enumerable: !0,
                        configurable: !0,
                        writable: !0
                    }) : r[e] = i;
                }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n)) : Qa(Object(n)).forEach(function(e) {
                    Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(n, e));
                });
            }
            return t;
        }({
            data: null,
            method: "GET",
            responseType: "json"
        }, e), this.$o = null;
    });
    var es = (Object.assign(It.prototype, {
        ts: function(t, e, n) {
            var r = this.Qo, i = r.data, o = r.method, a = r.url, s = r.responseType, l = r.header, u = null;
            if ((u = new (jt.a.environment === Ut.a.WX ? jt.a.XMLHttpRequest : "undefined" != typeof XMLHttpRequest ? XMLHttpRequest : Ka.a.global().fengmap.XMLHttpRequest)()).responseType = s, 
            u.open(o, a), "object" == Ja(l)) for (var c in l) u.setRequestHeader(c, l[c]);
            u.addEventListener("load", function() {
                200 === u.status || 0 === u.status || 201 === u.status ? t && t(u.response) : e && (404 === u.status ? e(Nt.PATH_ERROR) : 2069 === u.response.error_code ? e(Nt.NAME_KEY_ERROR) : 2063 === u.response.error_code ? e(Nt.MAP_ID_URL_ERROR) : 400 === u.response.error_code ? e(Nt.THEME_ID_URL_ERROR) : e(u.response));
            }), u.addEventListener("timeout", function(t) {
                n && n(t);
            }), u.addEventListener("error", function(t) {
                e && e(t);
            }), u.send(JSON.stringify(i)), this.$o = u;
        },
        tn: function() {
            this.$o && this.$o.abort && (this.$o.abort(), this.$o = null);
        }
    }), It), ns = (It = n(32), n.n(It));
    function rs(t) {
        return (rs = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function is(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != rs(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != rs(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == rs(t) ? t : String(t);
            }(r.key), r);
        }
    }
    for (var os = It = [ "TmF2aVNlZ21lbg==", "YWNjZXNzaWJsZQ==", "Zmlk", "bmZv", "Rmxvb3JHZW8=", "bGlmdFR5cGU=", "bGVu", "dmVs", "ZXh0ZW50TGF5ZQ==", "RXh0ZW50Qml6SQ==", "cmVhZE9ubHk=", "LnByb3RvYnVm", "aW50MzI=", "ZG9vcnR5cGU=", "R0VPUE9JTlRfTQ==", "TmF2aVpvbmU=", "ZW50cmFuY2VGbA==", "bGVuZ3Ro", "ZWxCaXpJbmZv", "c3RhaXJMYXllcg==", "dG9CaWQ=", "R2F0ZQ==", "b2Zmc2V0WQ==", "Zmlkcw==", "aXNTZWxlY3RhYg==", "ZmxhZw==", "ZXh0ZXJuYWxNbw==", "bGlmdEVudHJ5", "VklTRUdNRU5U", "SW5kZXhJbmZv", "ZGF0YQ==", "ZGVsQml6SW5mbw==", "bWlk", "cG9pTGF5ZXI=", "bW9kZWxpZA==", "cGFja2Vk", "dGhyb3VnaA==", "bmF2aVNlZ21lbg==", "bGlmdExheWVy", "cmVwZWF0ZWQ=", "ZGVmQ2VuWQ==", "b29y", "bm9kZUlk", "TmF2aU1vZGVs", "cmFuaw==", "c25vZGU=", "cHRz", "ZGVmR2lk", "aGFzaENvZGU=", "bmVzdGVk", "Ymlk", "cmVxdWlyZWQ=", "R0VPTElORV9OQQ==", "b2Zmc2V0WA==", "TmF2aU5vZGU=", "bHR5cGU=", "T1ZFUkxBWURBVA==", "ZGVmQ2VuWA==", "b3B0aW9ucw==", "YmFzZUxldmVs", "YXJlYQ==", "TGF5ZXJHcm91cA==", "ZmllbGRz", "cGFzcw==", "Zmxvb3Jz", "SUZU", "Rmxvb3JOYXZp", "amF2YV9vdXRlcg==", "UG9seWdvbkxhYg==", "ZW50cmFuY2VUeQ==", "VHlwZQ==", "bmF2aVpvbmVz", "ZWxMYXllcg==", "YWxpYXM=", "d2lkdGg=", "YXllcg==", "ZW50cnl0eXBlcw==", "TGlmdEJpekluZg==", "bm9kZXR5cGVz", "amF2YV9wYWNrYQ==", "bmF2aVR5cGU=", "ZGF0ZVZlcg==", "bGlmdEZsYWc=", "Z2lk", "bWF4WA==", "bW5hbWU=", "bWluU2NhbGVMZQ==", "Zmxvb3JJZA==", "X2NsYXNzbmFtZQ==", "TW9kZWxCaXpJbg==", "Zmxvb3I=", "bmFtZQ==", "c2NhbGVMZXZlbA==", "RXh0ZXJuYWxNbw==", "cGdpZA==", "ZmlsZVZlcg==", "VEFJUg==", "bWlubGV2ZWw=", "Rmxvb3JDb25maQ==", "R2VuZXJhbEdlbw==", "ZHJpdmU=", "Ym9vbA==", "a2V5", "R0VPUE9MWUdPTg==", "dG9HaWQ=", "ZGVmQ2VuWg==", "YnR5cGU=", "R0VPUE9JTlRfUw==", "cC5wbGF0Zm9ybQ==", "TmF2aUZsb29y", "ZmxvYXQ=", "bmF2aUV4dGVudA==", "UE9JQml6SW5mbw==", "TGFiZWxCaXpJbg==", "TGF5ZXI=", "cnVsZQ==", "bGlk", "Y29tLmZlbmdtYQ==", "c2NhbGU=", "c2VnbWVudElk", "ZGVzYw==", "ZGVsTGF5ZXI=", "R0VPUE9JTlRfUA==", "cm90YXRlQW5nbA==", "X0xBQkVM", "cG9seWdvbkxheQ==", "ZmlsZURhdGU=", "R0VPUE9JTlRfTA==", "U3RhaXJCaXpJbg==", "ZXNjYWxhdG9yTA==", "bGlua1NlZw==", "QnVmZmVy", "TmF2aUV4dGVudA==", "Z2Vv", "R0VPTElORQ==", "bmF2aU5vZGVz", "cmVqZWN0cw==", "UG9seWdvbkJpeg==", "aXNWaXNpYmxl", "b25zaGlw", "YnVmZmVycw==", "bWF4bGV2ZWw=", "ZG91Ymxl", "R0VPUE9JTlRfRQ==", "bmF2aQ==", "Rmxvb3JCaXo=", "Z1Byb3RvQnVm", "T0RFTA==", "ZW5hbWU=", "bW9kZWxMYXllcg==", "a2V5cw==", "ZWlk", "bGF5ZXJz", "QU5PUkFNQQ==", "UkRFUg==", "R0VPUE9JTlQ=", "QnVpbGRpbmc=", "bWluWA==", "TWFw", "aGVpZ2h0", "c3RyaW5n", "dHlwZQ==", "ZGVmYXVsdA==", "cG9seWdvbkxhYg==", "TmF2aVJlbGF0aQ==", "dWludDY0", "aWR4cw==", "SW5mbw==", "X0VYVEVOVA==" ], as = 218; --as; ) os.push(os.shift());
    var ss = function(t, e, n) {
        return e && is(t.prototype, e), n && is(t, n), Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }(function t() {
        if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
        this.id = {
            nested: {
                protobuf: {
                    options: {
                        java_package: "com.fengmap.platform.protobuf",
                        java_outer_classname: "FloorConfigProtoBuf"
                    },
                    nested: {
                        Map: {
                            fields: {
                                mid: {
                                    rule: "required",
                                    type: "string",
                                    id: 1
                                },
                                fileVer: {
                                    rule: "required",
                                    type: "int32",
                                    id: 2
                                },
                                dateVer: {
                                    rule: "required",
                                    type: "uint64",
                                    id: 3
                                },
                                mname: {
                                    rule: "required",
                                    type: "string",
                                    id: 4
                                },
                                hashCode: {
                                    rule: "required",
                                    type: "string",
                                    id: 5
                                },
                                key: {
                                    type: "string",
                                    id: 6
                                },
                                fileDate: {
                                    type: "string",
                                    id: 7
                                },
                                desc: {
                                    type: "string",
                                    id: 8
                                },
                                readOnly: {
                                    type: "bool",
                                    id: 9,
                                    options: {
                                        default: !1
                                    }
                                },
                                buffers: {
                                    rule: "repeated",
                                    type: "Buffer",
                                    id: 10
                                },
                                keys: {
                                    rule: "repeated",
                                    type: "string",
                                    id: 11
                                }
                            },
                            nested: {
                                Buffer: {
                                    fields: {
                                        gid: {
                                            rule: "required",
                                            type: "int32",
                                            id: 1
                                        },
                                        fileVer: {
                                            rule: "required",
                                            type: "int32",
                                            id: 2
                                        },
                                        btype: {
                                            rule: "required",
                                            type: "int32",
                                            id: 3
                                        },
                                        len: {
                                            rule: "required",
                                            type: "uint64",
                                            id: 4
                                        },
                                        data: {
                                            rule: "required",
                                            type: "bytes",
                                            id: 5
                                        }
                                    }
                                }
                            }
                        },
                        Scene: {
                            fields: {
                                mid: {
                                    rule: "required",
                                    type: "string",
                                    id: 19
                                },
                                fileVer: {
                                    rule: "required",
                                    type: "int32",
                                    id: 20
                                },
                                dateVer: {
                                    rule: "required",
                                    type: "uint64",
                                    id: 21
                                },
                                mname: {
                                    rule: "required",
                                    type: "string",
                                    id: 22
                                },
                                hashCode: {
                                    rule: "required",
                                    type: "string",
                                    id: 23
                                },
                                key: {
                                    type: "string",
                                    id: 24
                                },
                                desc: {
                                    type: "string",
                                    id: 25
                                },
                                readOnly: {
                                    type: "bool",
                                    id: 26,
                                    options: {
                                        default: !1
                                    }
                                },
                                x: {
                                    type: "float",
                                    id: 1
                                },
                                y: {
                                    type: "float",
                                    id: 2
                                },
                                z: {
                                    type: "float",
                                    id: 3
                                },
                                minX: {
                                    type: "float",
                                    id: 4
                                },
                                minY: {
                                    type: "float",
                                    id: 5
                                },
                                maxX: {
                                    type: "float",
                                    id: 6
                                },
                                maxY: {
                                    type: "float",
                                    id: 7
                                },
                                defGid: {
                                    type: "string",
                                    id: 8
                                },
                                defCenX: {
                                    type: "float",
                                    id: 9
                                },
                                defCenY: {
                                    type: "float",
                                    id: 10
                                },
                                defCenZ: {
                                    type: "float",
                                    id: 11
                                },
                                height: {
                                    type: "float",
                                    id: 12
                                },
                                rotateAngleX: {
                                    type: "float",
                                    id: 13
                                },
                                rotateAngleY: {
                                    type: "float",
                                    id: 14
                                },
                                rotateAngleZ: {
                                    type: "float",
                                    id: 15
                                },
                                scale: {
                                    type: "float",
                                    id: 16
                                },
                                scaleLevel: {
                                    type: "string",
                                    id: 17
                                },
                                naviType: {
                                    type: "int32",
                                    id: 28
                                },
                                layerGroups: {
                                    rule: "repeated",
                                    type: "LayerGroup",
                                    id: 18
                                },
                                buildings: {
                                    rule: "repeated",
                                    type: "Building",
                                    id: 27
                                }
                            },
                            nested: {
                                Layer: {
                                    fields: {
                                        lid: {
                                            type: "int32",
                                            id: 1
                                        },
                                        lname: {
                                            type: "string",
                                            id: 2
                                        },
                                        alias: {
                                            type: "string",
                                            id: 3
                                        },
                                        ltype: {
                                            type: "Type",
                                            id: 4
                                        },
                                        offsetX: {
                                            type: "float",
                                            id: 5
                                        },
                                        offsetY: {
                                            type: "float",
                                            id: 6
                                        },
                                        height: {
                                            type: "float",
                                            id: 7
                                        },
                                        rotateAngleX: {
                                            type: "float",
                                            id: 8
                                        },
                                        rotateAngleY: {
                                            type: "float",
                                            id: 9
                                        },
                                        rotateAngleZ: {
                                            type: "float",
                                            id: 10
                                        },
                                        minScaleLevel: {
                                            type: "float",
                                            id: 11
                                        },
                                        maxScaleLevel: {
                                            type: "float",
                                            id: 12
                                        },
                                        isVisible: {
                                            type: "bool",
                                            id: 13
                                        },
                                        isSelectable: {
                                            type: "bool",
                                            id: 14
                                        },
                                        isEditable: {
                                            type: "bool",
                                            id: 15
                                        },
                                        desc: {
                                            type: "string",
                                            id: 16
                                        }
                                    },
                                    nested: {
                                        Type: {
                                            values: {
                                                GEOPOINT: 1,
                                                GEOPOINT_ESCALATOR: 2,
                                                GEOPOINT_LIFT: 3,
                                                GEOPOINT_STAIR: 4,
                                                GEOPOINT_PANORAMA: 5,
                                                GEOPOINT_POI: 6,
                                                GEOPOINT_STORELABEL: 7,
                                                GEOPOINT_NAVINODE: 8,
                                                GEOPOINT_MODEL: 9,
                                                GEOLINE: 20,
                                                GEOLINE_NAVISEGMENT: 21,
                                                GEOLINE_BORDER: 22,
                                                GEOPOLYGON: 30,
                                                GEOPOLYGON_EXTENT: 31,
                                                GEOPOLYGON_STORE: 32,
                                                GEOPOLYGON_LABEL: 33,
                                                RASTERATA: 40,
                                                OVERLAYDATA: 50
                                            }
                                        }
                                    }
                                },
                                LayerGroup: {
                                    fields: {
                                        gid: {
                                            type: "int32",
                                            id: 1
                                        },
                                        gname: {
                                            type: "string",
                                            id: 2
                                        },
                                        alias: {
                                            type: "string",
                                            id: 3
                                        },
                                        height: {
                                            type: "float",
                                            id: 4
                                        },
                                        desc: {
                                            type: "string",
                                            id: 5
                                        },
                                        layers: {
                                            rule: "repeated",
                                            type: "Layer",
                                            id: 6
                                        },
                                        floorId: {
                                            type: "string",
                                            id: 7
                                        },
                                        naviType: {
                                            type: "int32",
                                            id: 8
                                        }
                                    }
                                },
                                Floor: {
                                    fields: {
                                        gid: {
                                            type: "int32",
                                            id: 1
                                        },
                                        x: {
                                            type: "float",
                                            id: 2
                                        },
                                        y: {
                                            type: "float",
                                            id: 3
                                        },
                                        offsetX: {
                                            type: "float",
                                            id: 4
                                        },
                                        offsetY: {
                                            type: "float",
                                            id: 5
                                        },
                                        angle: {
                                            type: "float",
                                            id: 6
                                        },
                                        scale: {
                                            type: "float",
                                            id: 7
                                        },
                                        fids: {
                                            rule: "repeated",
                                            type: "string",
                                            id: 8
                                        },
                                        pgid: {
                                            type: "int32",
                                            id: 9
                                        },
                                        baseLevel: {
                                            type: "bool",
                                            id: 10
                                        },
                                        minlevel: {
                                            type: "int32",
                                            id: 11
                                        },
                                        maxlevel: {
                                            type: "int32",
                                            id: 12
                                        },
                                        floorId: {
                                            type: "string",
                                            id: 13
                                        },
                                        idxs: {
                                            rule: "repeated",
                                            type: "IndexInfo",
                                            id: 14
                                        },
                                        pts: {
                                            rule: "repeated",
                                            type: "double",
                                            id: 15,
                                            options: {
                                                packed: !1
                                            }
                                        }
                                    },
                                    nested: {
                                        IndexInfo: {
                                            fields: {
                                                idxs: {
                                                    rule: "repeated",
                                                    type: "int32",
                                                    id: 1,
                                                    options: {
                                                        packed: !1
                                                    }
                                                }
                                            }
                                        }
                                    }
                                },
                                Building: {
                                    fields: {
                                        bid: {
                                            type: "string",
                                            id: 1
                                        },
                                        name: {
                                            type: "string",
                                            id: 2
                                        },
                                        ename: {
                                            type: "string",
                                            id: 3
                                        },
                                        alias: {
                                            type: "string",
                                            id: 4
                                        },
                                        x: {
                                            type: "float",
                                            id: 5
                                        },
                                        y: {
                                            type: "float",
                                            id: 6
                                        },
                                        mid: {
                                            type: "string",
                                            id: 7
                                        },
                                        version: {
                                            type: "int32",
                                            id: 8
                                        },
                                        floors: {
                                            rule: "repeated",
                                            type: "Floor",
                                            id: 9
                                        },
                                        bcode: {
                                            type: "int32",
                                            id: 10
                                        }
                                    }
                                }
                            }
                        },
                        Gate: {
                            fields: {
                                mid: {
                                    rule: "required",
                                    type: "string",
                                    id: 1
                                },
                                floors: {
                                    rule: "repeated",
                                    type: "NaviFloor",
                                    id: 2
                                }
                            },
                            nested: {
                                NaviFloor: {
                                    fields: {
                                        gid: {
                                            type: "int32",
                                            id: 1
                                        },
                                        floorId: {
                                            type: "string",
                                            id: 2
                                        },
                                        bid: {
                                            type: "string",
                                            id: 3
                                        },
                                        mid: {
                                            type: "string",
                                            id: 4
                                        },
                                        navi: {
                                            rule: "repeated",
                                            type: "NaviRelationship",
                                            id: 5
                                        },
                                        drive: {
                                            rule: "repeated",
                                            type: "NaviRelationship",
                                            id: 6
                                        },
                                        accessible: {
                                            rule: "repeated",
                                            type: "NaviRelationship",
                                            id: 7
                                        }
                                    }
                                },
                                NaviRelationship: {
                                    fields: {
                                        eid: {
                                            rule: "required",
                                            type: "int32",
                                            id: 1
                                        },
                                        type: {
                                            type: "int32",
                                            id: 2
                                        },
                                        accessible: {
                                            type: "int32",
                                            id: 3
                                        },
                                        idxs: {
                                            rule: "repeated",
                                            type: "IndexInfo",
                                            id: 4
                                        },
                                        pts: {
                                            rule: "repeated",
                                            type: "double",
                                            id: 5,
                                            options: {
                                                packed: !1
                                            }
                                        },
                                        flag: {
                                            type: "int32",
                                            id: 6
                                        },
                                        toBid: {
                                            rule: "repeated",
                                            type: "string",
                                            id: 7
                                        },
                                        toGid: {
                                            rule: "repeated",
                                            type: "string",
                                            id: 8
                                        }
                                    },
                                    nested: {
                                        IndexInfo: {
                                            fields: {
                                                idxs: {
                                                    rule: "repeated",
                                                    type: "int32",
                                                    id: 1,
                                                    options: {
                                                        packed: !1
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        FloorGeo: {
                            fields: {
                                mid: {
                                    rule: "required",
                                    type: "string",
                                    id: 1
                                },
                                gid: {
                                    rule: "required",
                                    type: "int32",
                                    id: 2
                                },
                                height: {
                                    type: "float",
                                    id: 3
                                },
                                extentLayer: {
                                    rule: "repeated",
                                    type: "GeneralGeoInfo",
                                    id: 4
                                },
                                modelLayer: {
                                    rule: "repeated",
                                    type: "GeneralGeoInfo",
                                    id: 5
                                },
                                labelLayer: {
                                    rule: "repeated",
                                    type: "GeneralGeoInfo",
                                    id: 6
                                },
                                poiLayer: {
                                    rule: "repeated",
                                    type: "GeneralGeoInfo",
                                    id: 7
                                },
                                polygonLayer: {
                                    rule: "repeated",
                                    type: "GeneralGeoInfo",
                                    id: 8
                                },
                                polygonLabelLayer: {
                                    rule: "repeated",
                                    type: "GeneralGeoInfo",
                                    id: 9
                                },
                                liftLayer: {
                                    rule: "repeated",
                                    type: "GeneralGeoInfo",
                                    id: 10
                                },
                                stairLayer: {
                                    rule: "repeated",
                                    type: "GeneralGeoInfo",
                                    id: 11
                                },
                                escalatorLayer: {
                                    rule: "repeated",
                                    type: "GeneralGeoInfo",
                                    id: 12
                                },
                                externalModelLayer: {
                                    rule: "repeated",
                                    type: "GeneralGeoInfo",
                                    id: 13
                                }
                            },
                            nested: {
                                GeneralGeoInfo: {
                                    fields: {
                                        eid: {
                                            rule: "required",
                                            type: "int32",
                                            id: 1
                                        },
                                        geo: {
                                            type: "string",
                                            id: 2
                                        },
                                        height: {
                                            type: "float",
                                            id: 3
                                        },
                                        area: {
                                            type: "float",
                                            id: 4
                                        },
                                        idxs: {
                                            rule: "repeated",
                                            type: "IndexInfo",
                                            id: 5
                                        },
                                        pts: {
                                            rule: "repeated",
                                            type: "double",
                                            id: 6,
                                            options: {
                                                packed: !1
                                            }
                                        },
                                        baseheight: {
                                            type: "float",
                                            id: 7
                                        }
                                    },
                                    nested: {
                                        IndexInfo: {
                                            fields: {
                                                idxs: {
                                                    rule: "repeated",
                                                    type: "int32",
                                                    id: 1,
                                                    options: {
                                                        packed: !1
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        FloorBiz: {
                            fields: {
                                mid: {
                                    rule: "required",
                                    type: "string",
                                    id: 1
                                },
                                gid: {
                                    rule: "required",
                                    type: "int32",
                                    id: 2
                                },
                                extentLayer: {
                                    rule: "repeated",
                                    type: "ExtentBizInfo",
                                    id: 3
                                },
                                modelLayer: {
                                    rule: "repeated",
                                    type: "ModelBizInfo",
                                    id: 4
                                },
                                labelLayer: {
                                    rule: "repeated",
                                    type: "LabelBizInfo",
                                    id: 5
                                },
                                poiLayer: {
                                    rule: "repeated",
                                    type: "POIBizInfo",
                                    id: 6
                                },
                                polygonLayer: {
                                    rule: "repeated",
                                    type: "PolygonBizInfo",
                                    id: 7
                                },
                                liftLayer: {
                                    rule: "repeated",
                                    type: "LiftBizInfo",
                                    id: 8
                                },
                                stairLayer: {
                                    rule: "repeated",
                                    type: "StairBizInfo",
                                    id: 9
                                },
                                polygonLabelLayer: {
                                    rule: "repeated",
                                    type: "PolygonLabelBizInfo",
                                    id: 10
                                },
                                externalModelLayer: {
                                    rule: "repeated",
                                    type: "ExternalModelBizInfo",
                                    id: 11
                                }
                            },
                            nested: {
                                ExtentBizInfo: {
                                    fields: {
                                        eid: {
                                            rule: "required",
                                            type: "int32",
                                            id: 1
                                        },
                                        fid: {
                                            type: "string",
                                            id: 2
                                        },
                                        type: {
                                            type: "int32",
                                            id: 3
                                        },
                                        name: {
                                            type: "string",
                                            id: 4
                                        },
                                        ename: {
                                            type: "string",
                                            id: 5
                                        },
                                        minlevel: {
                                            type: "int32",
                                            id: 6
                                        },
                                        maxlevel: {
                                            type: "int32",
                                            id: 7
                                        }
                                    }
                                },
                                ModelBizInfo: {
                                    fields: {
                                        eid: {
                                            rule: "required",
                                            type: "int32",
                                            id: 1
                                        },
                                        fid: {
                                            type: "string",
                                            id: 2
                                        },
                                        type: {
                                            type: "int32",
                                            id: 3
                                        },
                                        name: {
                                            type: "string",
                                            id: 4
                                        },
                                        ename: {
                                            type: "string",
                                            id: 5
                                        },
                                        minlevel: {
                                            type: "int32",
                                            id: 6
                                        },
                                        maxlevel: {
                                            type: "int32",
                                            id: 7
                                        },
                                        pass: {
                                            type: "int32",
                                            id: 8
                                        }
                                    }
                                },
                                LabelBizInfo: {
                                    fields: {
                                        eid: {
                                            rule: "required",
                                            type: "int32",
                                            id: 1
                                        },
                                        fid: {
                                            type: "string",
                                            id: 2
                                        },
                                        type: {
                                            type: "int32",
                                            id: 3
                                        },
                                        name: {
                                            type: "string",
                                            id: 4
                                        },
                                        ename: {
                                            type: "string",
                                            id: 5
                                        },
                                        minlevel: {
                                            type: "int32",
                                            id: 6
                                        },
                                        maxlevel: {
                                            type: "int32",
                                            id: 7
                                        }
                                    }
                                },
                                PolygonBizInfo: {
                                    fields: {
                                        eid: {
                                            rule: "required",
                                            type: "int32",
                                            id: 1
                                        },
                                        fid: {
                                            type: "string",
                                            id: 2
                                        },
                                        type: {
                                            type: "int32",
                                            id: 3
                                        },
                                        name: {
                                            type: "string",
                                            id: 4
                                        },
                                        ename: {
                                            type: "string",
                                            id: 5
                                        },
                                        minlevel: {
                                            type: "int32",
                                            id: 6
                                        },
                                        maxlevel: {
                                            type: "int32",
                                            id: 7
                                        }
                                    }
                                },
                                POIBizInfo: {
                                    fields: {
                                        eid: {
                                            rule: "required",
                                            type: "int32",
                                            id: 1
                                        },
                                        fid: {
                                            type: "string",
                                            id: 2
                                        },
                                        type: {
                                            type: "int32",
                                            id: 3
                                        },
                                        name: {
                                            type: "string",
                                            id: 4
                                        },
                                        ename: {
                                            type: "string",
                                            id: 5
                                        },
                                        minlevel: {
                                            type: "int32",
                                            id: 6
                                        },
                                        maxlevel: {
                                            type: "int32",
                                            id: 7
                                        }
                                    }
                                },
                                LiftBizInfo: {
                                    fields: {
                                        eid: {
                                            rule: "required",
                                            type: "int32",
                                            id: 1
                                        },
                                        fid: {
                                            type: "string",
                                            id: 2
                                        },
                                        type: {
                                            type: "int32",
                                            id: 3
                                        },
                                        flag: {
                                            type: "int32",
                                            id: 4
                                        },
                                        floor: {
                                            type: "string",
                                            id: 5
                                        },
                                        minlevel: {
                                            type: "int32",
                                            id: 6
                                        },
                                        maxlevel: {
                                            type: "int32",
                                            id: 7
                                        }
                                    }
                                },
                                StairBizInfo: {
                                    fields: {
                                        eid: {
                                            rule: "required",
                                            type: "int32",
                                            id: 1
                                        },
                                        fid: {
                                            type: "string",
                                            id: 2
                                        },
                                        type: {
                                            type: "int32",
                                            id: 3
                                        },
                                        flag: {
                                            type: "int32",
                                            id: 4
                                        },
                                        minlevel: {
                                            type: "int32",
                                            id: 5
                                        },
                                        maxlevel: {
                                            type: "int32",
                                            id: 6
                                        }
                                    }
                                },
                                PolygonLabelBizInfo: {
                                    fields: {
                                        eid: {
                                            rule: "required",
                                            type: "int32",
                                            id: 1
                                        },
                                        fid: {
                                            type: "string",
                                            id: 2
                                        },
                                        type: {
                                            type: "int32",
                                            id: 3
                                        },
                                        width: {
                                            type: "float",
                                            id: 4
                                        },
                                        name: {
                                            type: "string",
                                            id: 5
                                        },
                                        ename: {
                                            type: "string",
                                            id: 6
                                        },
                                        angle: {
                                            type: "float",
                                            id: 7
                                        }
                                    }
                                },
                                ExternalModelBizInfo: {
                                    fields: {
                                        eid: {
                                            rule: "required",
                                            type: "int32",
                                            id: 1
                                        },
                                        fid: {
                                            type: "string",
                                            id: 2
                                        },
                                        type: {
                                            type: "int32",
                                            id: 3
                                        },
                                        name: {
                                            type: "string",
                                            id: 4
                                        },
                                        ename: {
                                            type: "string",
                                            id: 5
                                        },
                                        minlevel: {
                                            type: "int32",
                                            id: 6
                                        },
                                        maxlevel: {
                                            type: "int32",
                                            id: 7
                                        }
                                    }
                                }
                            }
                        },
                        FloorNavi: {
                            fields: {
                                mid: {
                                    rule: "required",
                                    type: "string",
                                    id: 1
                                },
                                gid: {
                                    rule: "required",
                                    type: "int32",
                                    id: 2
                                },
                                naviNodes: {
                                    rule: "repeated",
                                    type: "NaviNode",
                                    id: 3
                                },
                                naviSegments: {
                                    rule: "repeated",
                                    type: "NaviSegment",
                                    id: 4
                                },
                                naviZones: {
                                    rule: "repeated",
                                    type: "NaviZone",
                                    id: 5
                                },
                                naviModels: {
                                    rule: "repeated",
                                    type: "NaviModel",
                                    id: 6
                                },
                                nextFloors: {
                                    rule: "repeated",
                                    type: "int32",
                                    id: 7,
                                    options: {
                                        packed: !1
                                    }
                                },
                                naviExtents: {
                                    rule: "repeated",
                                    type: "NaviExtent",
                                    id: 8
                                }
                            },
                            nested: {
                                NaviNode: {
                                    fields: {
                                        nodeId: {
                                            type: "int32",
                                            id: 1
                                        },
                                        nodeType: {
                                            type: "int32",
                                            id: 2
                                        },
                                        liftType: {
                                            type: "int32",
                                            id: 3
                                        },
                                        liftFlag: {
                                            type: "int32",
                                            id: 4
                                        },
                                        liftEntry: {
                                            type: "int32",
                                            id: 5
                                        },
                                        liftFloor: {
                                            type: "string",
                                            id: 6
                                        },
                                        linkSeg: {
                                            type: "string",
                                            id: 7
                                        },
                                        geo: {
                                            type: "string",
                                            id: 8
                                        },
                                        entranceType: {
                                            type: "int32",
                                            id: 9
                                        },
                                        entranceFloor: {
                                            type: "string",
                                            id: 10
                                        },
                                        doortype: {
                                            type: "int32",
                                            id: 11
                                        },
                                        idxs: {
                                            rule: "repeated",
                                            type: "int32",
                                            id: 12,
                                            options: {
                                                packed: !1
                                            }
                                        },
                                        pts: {
                                            rule: "repeated",
                                            type: "double",
                                            id: 13,
                                            options: {
                                                packed: !1
                                            }
                                        },
                                        accessible: {
                                            type: "int32",
                                            id: 14,
                                            options: {
                                                default: 0
                                            }
                                        }
                                    }
                                },
                                NaviSegment: {
                                    fields: {
                                        segmentId: {
                                            type: "int32",
                                            id: 1
                                        },
                                        snode: {
                                            type: "int32",
                                            id: 2
                                        },
                                        enode: {
                                            type: "int32",
                                            id: 3
                                        },
                                        length: {
                                            type: "double",
                                            id: 4
                                        },
                                        rank: {
                                            type: "int32",
                                            id: 5
                                        },
                                        name: {
                                            type: "string",
                                            id: 6
                                        },
                                        entry: {
                                            type: "int32",
                                            id: 7
                                        },
                                        desc: {
                                            type: "string",
                                            id: 8
                                        },
                                        geo: {
                                            type: "string",
                                            id: 9
                                        },
                                        through: {
                                            type: "int32",
                                            id: 10
                                        },
                                        idxs: {
                                            rule: "repeated",
                                            type: "int32",
                                            id: 11,
                                            options: {
                                                packed: !1
                                            }
                                        },
                                        pts: {
                                            rule: "repeated",
                                            type: "double",
                                            id: 12,
                                            options: {
                                                packed: !1
                                            }
                                        }
                                    }
                                },
                                NaviZone: {
                                    fields: {
                                        id: {
                                            rule: "required",
                                            type: "int32",
                                            id: 1
                                        },
                                        type: {
                                            rule: "required",
                                            type: "int32",
                                            id: 2,
                                            options: {
                                                default: 0
                                            }
                                        },
                                        geo: {
                                            type: "string",
                                            id: 3
                                        },
                                        rejects: {
                                            rule: "repeated",
                                            type: "string",
                                            id: 4
                                        },
                                        idxs: {
                                            rule: "repeated",
                                            type: "int32",
                                            id: 5,
                                            options: {
                                                packed: !1
                                            }
                                        },
                                        pts: {
                                            rule: "repeated",
                                            type: "double",
                                            id: 6,
                                            options: {
                                                packed: !1
                                            }
                                        }
                                    }
                                },
                                NaviModel: {
                                    fields: {
                                        modelid: {
                                            rule: "required",
                                            type: "int32",
                                            id: 1
                                        },
                                        doorids: {
                                            rule: "repeated",
                                            type: "int32",
                                            id: 2,
                                            options: {
                                                packed: !1
                                            }
                                        },
                                        nodetypes: {
                                            rule: "repeated",
                                            type: "int32",
                                            id: 3,
                                            options: {
                                                packed: !1
                                            }
                                        },
                                        entrytypes: {
                                            rule: "repeated",
                                            type: "int32",
                                            id: 4,
                                            options: {
                                                packed: !1
                                            }
                                        }
                                    }
                                },
                                NaviExtent: {
                                    fields: {
                                        id: {
                                            rule: "required",
                                            type: "int32",
                                            id: 1
                                        },
                                        pts: {
                                            rule: "repeated",
                                            type: "double",
                                            id: 2,
                                            options: {
                                                packed: !1
                                            }
                                        },
                                        idxs: {
                                            rule: "repeated",
                                            type: "IndexInfo",
                                            id: 3
                                        }
                                    },
                                    nested: {
                                        IndexInfo: {
                                            fields: {
                                                idxs: {
                                                    rule: "repeated",
                                                    type: "int32",
                                                    id: 1,
                                                    options: {
                                                        packed: !1
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        };
    });
    function ls(t) {
        return (ls = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function us(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != ls(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != ls(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == ls(t) ? t : String(t);
            }(r.key), r);
        }
    }
    It = function(t, e, n) {
        return e && us(t.prototype, e), n && us(t, n), Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }(function t() {
        if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
        this.ns = null;
    });
    var cs = (Object.assign(It.prototype, {
        es: function() {
            this.ns || (this.ns = ns.a.Root.fromJSON(new ("undefined" != typeof KjWzhWlSj && KjWzhWlSj.ProtoDef ? KjWzhWlSj.ProtoDef : ss)().id));
        },
        rs: function(t) {
            return this.es(), this.ns.lookup("Map").decode(t);
        },
        ss: function(t) {
            for (var e = 0; e < t.buffers.length; e++) {
                var n = t.buffers[e];
                if (1 == n.btype) return this.us(n.data);
            }
            return null;
        },
        cs: function(t) {
            for (var e = 0; e < t.buffers.length; e++) {
                var n = t.buffers[e];
                if (7 == n.btype) return this.hs(n.data);
            }
            return null;
        },
        ls: function(t, e) {
            for (var n = 0; n < t.buffers.length; n++) {
                var r = t.buffers[n];
                if (2 == r.btype && r.gid == e) return this.ds(r.data);
            }
            return null;
        },
        vs: function(t, e) {
            for (var n = 0; n < t.buffers.length; n++) {
                var r = t.buffers[n];
                if (3 == r.btype && r.gid == e) return this.ps(r.data);
            }
            return null;
        },
        ys: function(t, e) {
            for (var n = 0; n < t.buffers.length; n++) {
                var r = t.buffers[n];
                if (4 == r.btype && r.gid == e) return this.bs(r.data);
            }
            return null;
        },
        gs: function(t, e) {
            for (var n = 0; n < t.buffers.length; n++) {
                var r = t.buffers[n];
                if (5 === r.btype && r.gid === e) return this.bs(r.data);
            }
            return null;
        },
        ws: function(t, e) {
            for (var n = 0; n < t.buffers.length; n++) {
                var r = t.buffers[n];
                if (6 === r.btype && r.gid === e) return this.bs(r.data);
            }
            return null;
        },
        us: function(t) {
            this.es();
            var e = this.ns.lookup("Scene").decode(t);
            return e.levels = [], e.layerGroups.forEach(function(t) {
                e.levels.push(t.gid);
            }), e;
        },
        hs: function(t) {
            return this.es(), this.ns.lookup("Gate").decode(t);
        },
        ds: function(t) {
            return this.es(), this.ns.lookup("FloorGeo").decode(t);
        },
        ps: function(t) {
            return this.es(), this.ns.lookup("FloorBiz").decode(t);
        },
        bs: function(t) {
            return this.es(), this.ns.lookup("FloorNavi").decode(t);
        }
    }), It);
    function hs(t) {
        return (hs = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function fs(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != hs(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != hs(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == hs(t) ? t : String(t);
            }(r.key), r);
        }
    }
    It = function(t, e, n) {
        return e && fs(t.prototype, e), n && fs(t, n), Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }(function t() {
        var e;
        if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
        jt.a.environment === Ut.a.WX ? this._s = new jt.a.ProtoReaderStatic() : void 0 !== Ka.a.global().KjWzhWlSj && Ka.a.global().KjWzhWlSj.ProtoReaderStatic ? (e = Ka.a.global().KjWzhWlSj.ProtoReaderStatic, 
        this._s = new e()) : this._s = new cs();
    });
    var ps, ds, ys, ms, vs, gs = (Object.assign(It.prototype, {
        rs: function(t) {
            return this._s.rs(t);
        },
        ss: function(t) {
            return this._s.ss(t);
        },
        cs: function(t) {
            return this._s.cs(t);
        },
        ls: function(t, e) {
            return this._s.ls(t, e);
        },
        vs: function(t, e) {
            return this._s.vs(t, e);
        },
        ys: function(t, e) {
            return this._s.ys(t, e);
        },
        gs: function(t, e) {
            return this._s.gs(t, e);
        },
        ws: function(t, e) {
            return this._s.ws(t, e);
        },
        us: function(t) {
            return this._s.us(t);
        },
        hs: function(t) {
            return this._s.hs(t);
        },
        ds: function(t) {
            return this._s.ds(t);
        },
        ps: function(t) {
            return this._s.ps(t);
        },
        bs: function(t) {
            return this._s.bs(t);
        }
    }), It), bs = "https://console.fengmap.cool/api-s/", xs = {
        domain: It = "https://console.fengmap.com/api-s/",
        online: It + "sdk/check",
        check: It + "sdk/auth/web",
        download: It + "sdk/auth/obtainMapRoute",
        downloadTile: It + "sdk/authLayered/obtainMapRoute",
        collect: It + "sdk/collect",
        themeUrl: It + "webtheme/",
        externalModelURL: It + "webmodel/"
    };
    function ws(t, e) {
        var n, r = 0, i = 0;
        for (i = 0; i < 8; i++) 1 & e && (r ^= t), n = 128 & t, t <<= 1, n && (t ^= 27), 
        e >>= 1;
        return r;
    }
    function Ss(t, e, n) {
        for (var r = 0; r < 4; r++) t[0 + r] ^= e[16 * n + 4 * r], t[4 + r] ^= e[16 * n + 4 * r + 1], 
        t[8 + r] ^= e[16 * n + 4 * r + 2], t[12 + r] ^= e[16 * n + 4 * r + 3];
    }
    function _s(t) {
        for (var e, n, r, i = 1; i < 4; i++) for (n = 0; n < i; ) {
            for (r = t[4 * i + 4 - 1], e = 3; 0 < e; e--) t[4 * i + e] = t[4 * i + e - 1];
            t[4 * i + 0] = r, n++;
        }
    }
    function Es(t) {
        for (var e, n, r, i = 0; i < 4; i++) for (e = 0; e < 4; e++) n = (240 & t[4 * i + e]) >> 4, 
        r = 15 & t[4 * i + e], t[4 * i + e] = ds[16 * n + r];
    }
    function Os(t) {
        for (var e = 0; e < 4; e++) t[e] = ps[16 * ((240 & t[e]) >> 4) + (15 & t[e])];
    }
    function Ms(t) {
        return parseInt(t, 16);
    }
    ps = [ 99, 124, 119, 123, 242, 107, 111, 197, 48, 1, 103, 43, 254, 215, 171, 118, 202, 130, 201, 125, 250, 89, 71, 240, 173, 212, 162, 175, 156, 164, 114, 192, 183, 253, 147, 38, 54, 63, 247, 204, 52, 165, 229, 241, 113, 216, 49, 21, 4, 199, 35, 195, 24, 150, 5, 154, 7, 18, 128, 226, 235, 39, 178, 117, 9, 131, 44, 26, 27, 110, 90, 160, 82, 59, 214, 179, 41, 227, 47, 132, 83, 209, 0, 237, 32, 252, 177, 91, 106, 203, 190, 57, 74, 76, 88, 207, 208, 239, 170, 251, 67, 77, 51, 133, 69, 249, 2, 127, 80, 60, 159, 168, 81, 163, 64, 143, 146, 157, 56, 245, 188, 182, 218, 33, 16, 255, 243, 210, 205, 12, 19, 236, 95, 151, 68, 23, 196, 167, 126, 61, 100, 93, 25, 115, 96, 129, 79, 220, 34, 42, 144, 136, 70, 238, 184, 20, 222, 94, 11, 219, 224, 50, 58, 10, 73, 6, 36, 92, 194, 211, 172, 98, 145, 149, 228, 121, 231, 200, 55, 109, 141, 213, 78, 169, 108, 86, 244, 234, 101, 122, 174, 8, 186, 120, 37, 46, 28, 166, 180, 198, 232, 221, 116, 31, 75, 189, 139, 138, 112, 62, 181, 102, 72, 3, 246, 14, 97, 53, 87, 185, 134, 193, 29, 158, 225, 248, 152, 17, 105, 217, 142, 148, 155, 30, 135, 233, 206, 85, 40, 223, 140, 161, 137, 13, 191, 230, 66, 104, 65, 153, 45, 15, 176, 84, 187, 22 ], 
    ds = [ 82, 9, 106, 213, 48, 54, 165, 56, 191, 64, 163, 158, 129, 243, 215, 251, 124, 227, 57, 130, 155, 47, 255, 135, 52, 142, 67, 68, 196, 222, 233, 203, 84, 123, 148, 50, 166, 194, 35, 61, 238, 76, 149, 11, 66, 250, 195, 78, 8, 46, 161, 102, 40, 217, 36, 178, 118, 91, 162, 73, 109, 139, 209, 37, 114, 248, 246, 100, 134, 104, 152, 22, 212, 164, 92, 204, 93, 101, 182, 146, 108, 112, 72, 80, 253, 237, 185, 218, 94, 21, 70, 87, 167, 141, 157, 132, 144, 216, 171, 0, 140, 188, 211, 10, 247, 228, 88, 5, 184, 179, 69, 6, 208, 44, 30, 143, 202, 63, 15, 2, 193, 175, 189, 3, 1, 19, 138, 107, 58, 145, 17, 65, 79, 103, 220, 234, 151, 242, 207, 206, 240, 180, 230, 115, 150, 172, 116, 34, 231, 173, 53, 133, 226, 249, 55, 232, 28, 117, 223, 110, 71, 241, 26, 113, 29, 41, 197, 137, 111, 183, 98, 14, 170, 24, 190, 27, 252, 86, 62, 75, 198, 210, 121, 32, 154, 219, 192, 254, 120, 205, 90, 244, 31, 221, 168, 51, 136, 7, 199, 49, 177, 18, 16, 89, 39, 128, 236, 95, 96, 81, 127, 169, 25, 181, 74, 13, 45, 229, 122, 159, 147, 201, 156, 239, 160, 224, 59, 77, 174, 42, 245, 176, 200, 235, 187, 60, 131, 83, 153, 97, 23, 43, 4, 126, 186, 119, 214, 38, 225, 105, 20, 99, 85, 33, 12, 125 ], 
    vs = [ 2, ms = ys = 0, 0, 0 ];
    var Ts = function(t, e) {
        for (var n = Array(16), r = 0; r < 16; r++) n[r] = 16 * Ms(e.substr(2 * r, 1)) + Ms(e.substr(2 * r + 1, 1));
        var i = Array(16);
        for (r = 0; r < 16; r++) i[r] = 16 * Ms(t.substr(2 * r, 1)) + Ms(t.substr(2 * r + 1, 1));
        var o = Array(16);
        switch (r = [], n.length) {
          default:
          case 16:
            ys = 4, ms = 10;
            break;

          case 24:
            ys = 6, ms = 12;
            break;

          case 32:
            ys = 8, ms = 14;
        }
        for (var a = r = Array(16 * (ms + 1)), s = Array(4), l = 4 * (ms + 1), u = 0; u < ys; u++) a[4 * u + 0] = n[4 * u + 0], 
        a[4 * u + 1] = n[4 * u + 1], a[4 * u + 2] = n[4 * u + 2], a[4 * u + 3] = n[4 * u + 3];
        for (u = ys; u < l; u++) {
            if (s[0] = a[4 * (u - 1) + 0], s[1] = a[4 * (u - 1) + 1], s[2] = a[4 * (u - 1) + 2], 
            s[3] = a[4 * (u - 1) + 3], 0 == u % ys) {
                var c = void 0, h = void 0;
                for (c = (n = s)[0], h = 0; h < 3; h++) n[h] = n[h + 1];
                if (n[3] = c, Os(s), 1 == (n = u / ys)) vs[0] = 1; else if (1 < n) for (vs[0] = 2, 
                n--; 0 < n - 1; ) vs[0] = ws(vs[0], 2), n--;
                (h = n = s)[0] = n[0] ^ (c = vs)[0], h[1] = n[1] ^ c[1], h[2] = n[2] ^ c[2], h[3] = n[3] ^ c[3];
            } else 6 < ys && 4 == u % ys && Os(s);
            a[4 * u + 0] = a[4 * (u - ys) + 0] ^ s[0], a[4 * u + 1] = a[4 * (u - ys) + 1] ^ s[1], 
            a[4 * u + 2] = a[4 * (u - ys) + 2] ^ s[2], a[4 * u + 3] = a[4 * (u - ys) + 3] ^ s[3];
        }
        for (a = Array(16), s = 0; s < 4; s++) for (u = 0; u < 4; u++) a[4 * s + u] = i[s + 4 * u];
        for (Ss(a, r, ms), i = ms - 1; 1 <= i; i--) for (_s(a), Es(a), Ss(a, r, i), s = a, 
        u = [ 14, 9, 13, 11 ], l = h = void 0, n = Array(4), c = Array(4), l = 0; l < 4; l++) {
            for (h = 0; h < 4; h++) n[h] = s[4 * h + l];
            h = u;
            var f = n, p = c;
            for (p[0] = ws(h[0], f[0]) ^ ws(h[3], f[1]) ^ ws(h[2], f[2]) ^ ws(h[1], f[3]), p[1] = ws(h[1], f[0]) ^ ws(h[0], f[1]) ^ ws(h[3], f[2]) ^ ws(h[2], f[3]), 
            p[2] = ws(h[2], f[0]) ^ ws(h[1], f[1]) ^ ws(h[0], f[2]) ^ ws(h[3], f[3]), p[3] = ws(h[3], f[0]) ^ ws(h[2], f[1]) ^ ws(h[1], f[2]) ^ ws(h[0], f[3]), 
            h = 0; h < 4; h++) s[4 * h + l] = c[h];
        }
        for (_s(a), Es(a), Ss(a, r, 0), s = 0; s < 4; s++) for (u = 0; u < 4; u++) o[s + 4 * u] = a[4 * s + u];
        for (i = "", r = 0; r < 16; ++r) i += a = (a = o[r].toString(16)).length < 2 ? "0" + a : a;
        return i;
    };
    function Ls(t, e) {
        var n = (65535 & t) + (65535 & e);
        return (t >> 16) + (e >> 16) + (n >> 16) << 16 | 65535 & n;
    }
    function As(t, e, n, r, i, o) {
        return Ls((e = Ls(Ls(e, t), Ls(r, o))) << i | e >>> 32 - i, n);
    }
    function Ps(t, e, n, r, i, o, a) {
        return As(e & n | ~e & r, t, e, i, o, a);
    }
    function Rs(t, e, n, r, i, o, a) {
        return As(e & r | n & ~r, t, e, i, o, a);
    }
    function js(t, e, n, r, i, o, a) {
        return As(e ^ n ^ r, t, e, i, o, a);
    }
    function Is(t, e, n, r, i, o, a) {
        return As(n ^ (e | ~r), t, e, i, o, a);
    }
    function Ds(t, e) {
        t[e >> 5] |= 128 << e % 32, t[14 + (e + 64 >>> 9 << 4)] = e;
        for (var n, r, i, o, a = 1732584193, s = -271733879, l = -1732584194, u = 271733878, c = 0; c < t.length; c += 16) a = Ps(n = a, r = s, i = l, o = u, t[c], 7, -680876936), 
        u = Ps(u, a, s, l, t[c + 1], 12, -389564586), l = Ps(l, u, a, s, t[c + 2], 17, 606105819), 
        s = Ps(s, l, u, a, t[c + 3], 22, -1044525330), a = Ps(a, s, l, u, t[c + 4], 7, -176418897), 
        u = Ps(u, a, s, l, t[c + 5], 12, 1200080426), l = Ps(l, u, a, s, t[c + 6], 17, -1473231341), 
        s = Ps(s, l, u, a, t[c + 7], 22, -45705983), a = Ps(a, s, l, u, t[c + 8], 7, 1770035416), 
        u = Ps(u, a, s, l, t[c + 9], 12, -1958414417), l = Ps(l, u, a, s, t[c + 10], 17, -42063), 
        s = Ps(s, l, u, a, t[c + 11], 22, -1990404162), a = Ps(a, s, l, u, t[c + 12], 7, 1804603682), 
        u = Ps(u, a, s, l, t[c + 13], 12, -40341101), l = Ps(l, u, a, s, t[c + 14], 17, -1502002290), 
        a = Rs(a, s = Ps(s, l, u, a, t[c + 15], 22, 1236535329), l, u, t[c + 1], 5, -165796510), 
        u = Rs(u, a, s, l, t[c + 6], 9, -1069501632), l = Rs(l, u, a, s, t[c + 11], 14, 643717713), 
        s = Rs(s, l, u, a, t[c], 20, -373897302), a = Rs(a, s, l, u, t[c + 5], 5, -701558691), 
        u = Rs(u, a, s, l, t[c + 10], 9, 38016083), l = Rs(l, u, a, s, t[c + 15], 14, -660478335), 
        s = Rs(s, l, u, a, t[c + 4], 20, -405537848), a = Rs(a, s, l, u, t[c + 9], 5, 568446438), 
        u = Rs(u, a, s, l, t[c + 14], 9, -1019803690), l = Rs(l, u, a, s, t[c + 3], 14, -187363961), 
        s = Rs(s, l, u, a, t[c + 8], 20, 1163531501), a = Rs(a, s, l, u, t[c + 13], 5, -1444681467), 
        u = Rs(u, a, s, l, t[c + 2], 9, -51403784), l = Rs(l, u, a, s, t[c + 7], 14, 1735328473), 
        a = js(a, s = Rs(s, l, u, a, t[c + 12], 20, -1926607734), l, u, t[c + 5], 4, -378558), 
        u = js(u, a, s, l, t[c + 8], 11, -2022574463), l = js(l, u, a, s, t[c + 11], 16, 1839030562), 
        s = js(s, l, u, a, t[c + 14], 23, -35309556), a = js(a, s, l, u, t[c + 1], 4, -1530992060), 
        u = js(u, a, s, l, t[c + 4], 11, 1272893353), l = js(l, u, a, s, t[c + 7], 16, -155497632), 
        s = js(s, l, u, a, t[c + 10], 23, -1094730640), a = js(a, s, l, u, t[c + 13], 4, 681279174), 
        u = js(u, a, s, l, t[c], 11, -358537222), l = js(l, u, a, s, t[c + 3], 16, -722521979), 
        s = js(s, l, u, a, t[c + 6], 23, 76029189), a = js(a, s, l, u, t[c + 9], 4, -640364487), 
        u = js(u, a, s, l, t[c + 12], 11, -421815835), l = js(l, u, a, s, t[c + 15], 16, 530742520), 
        a = Is(a, s = js(s, l, u, a, t[c + 2], 23, -995338651), l, u, t[c], 6, -198630844), 
        u = Is(u, a, s, l, t[c + 7], 10, 1126891415), l = Is(l, u, a, s, t[c + 14], 15, -1416354905), 
        s = Is(s, l, u, a, t[c + 5], 21, -57434055), a = Is(a, s, l, u, t[c + 12], 6, 1700485571), 
        u = Is(u, a, s, l, t[c + 3], 10, -1894986606), l = Is(l, u, a, s, t[c + 10], 15, -1051523), 
        s = Is(s, l, u, a, t[c + 1], 21, -2054922799), a = Is(a, s, l, u, t[c + 8], 6, 1873313359), 
        u = Is(u, a, s, l, t[c + 15], 10, -30611744), l = Is(l, u, a, s, t[c + 6], 15, -1560198380), 
        s = Is(s, l, u, a, t[c + 13], 21, 1309151649), a = Is(a, s, l, u, t[c + 4], 6, -145523070), 
        u = Is(u, a, s, l, t[c + 11], 10, -1120210379), l = Is(l, u, a, s, t[c + 2], 15, 718787259), 
        s = Is(s, l, u, a, t[c + 9], 21, -343485551), a = Ls(a, n), s = Ls(s, r), l = Ls(l, i), 
        u = Ls(u, o);
        return [ a, s, l, u ];
    }
    function ks(t) {
        for (var e = "", n = 32 * t.length, r = 0; r < n; r += 8) e += String.fromCharCode(t[r >> 5] >>> r % 32 & 255);
        return e;
    }
    function Cs(t) {
        var e = [];
        for (e[(t.length >> 2) - 1] = void 0, r = 0; r < e.length; r += 1) e[r] = 0;
        for (var n = 8 * t.length, r = 0; r < n; r += 8) e[r >> 5] |= (255 & t.charCodeAt(r / 8)) << r % 32;
        return e;
    }
    function Ns(t) {
        for (var e, n = "0123456789abcdef", r = "", i = 0; i < t.length; i += 1) e = t.charCodeAt(i), 
        r += n.charAt(e >>> 4 & 15) + n.charAt(15 & e);
        return r;
    }
    function Fs(t) {
        return unescape(encodeURIComponent(t));
    }
    function Bs(t) {
        return ks(Ds(Cs(t = Fs(t)), 8 * t.length));
    }
    function Us(t, e) {
        t = Fs(t), e = Fs(e);
        var n, r = Cs(t), i = [], o = [];
        for (i[15] = o[15] = void 0, 16 < r.length && (r = Ds(r, 8 * t.length)), n = 0; n < 16; n += 1) i[n] = 909522486 ^ r[n], 
        o[n] = 1549556828 ^ r[n];
        return t = Ds(i.concat(Cs(e)), 512 + 8 * e.length), ks(Ds(o.concat(t), 640));
    }
    var zs = function(t) {
        return function(t, e, n) {
            return e ? n ? Us(e, t) : Ns(Us(e, t)) : n ? Bs(t) : Ns(Bs(t));
        }(t);
    };
    function Gs(t) {
        return (Gs = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Hs(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Gs(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Gs(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Gs(t) ? t : String(t);
            }(r.key), r);
        }
    }
    var Vs = "0.0.0.0";
    It = function(t, e, n) {
        return e && Hs(t.prototype, e), n && Hs(t, n), Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }(function t() {
        if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
    });
    Object.assign(It.prototype, {
        Ss: function(t, e, n, r, i) {
            void 0 === jt.a.KjWzhWlSj || !jt.a.KjWzhWlSj.license || !jt.a.KjWzhWlSj.license || "string" == typeof e && 0 != e.length && (e = Ts(e, "026685bf295f587b5dffc1f18d5dc27c"), 
            n = zs(n), e = Ts(e, n), -1 !== t.indexOf(e)) ? r && r() : i && i();
        },
        xs: function(t, e, n, r) {
            var i;
            -1 !== e.indexOf("") || -1 !== e.indexOf("aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa") || void 0 === t.mapURL || (i = zs("fengmap.localhost:" + t.appName), 
            i = Ts(t.key, i), -1 !== e.indexOf(i)) ? this.Ss(e, t.license, t.buildingID, function() {
                n && n();
            }, function() {
                r && r(Nt.LICENSE_ERROR);
            }) : r && r(Nt.NAME_KEY_ERROR);
        },
        Es: function(t, e, n) {
            var r = this;
            void 0 !== t.mapURL ? e && e() : (t.enableCollect && this.Ms(t), this.Os(function() {
                new es({
                    method: "POST",
                    url: xs.check,
                    header: {
                        "X-Requested-With": "XMLHttpRequest",
                        "Content-type": "application/json;charset=utf-8"
                    },
                    data: r.Ts(t)
                }).ts(function() {
                    e && e();
                }, function(t) {
                    n && n(t);
                }, function() {
                    e && e();
                });
            }, function() {
                e && e();
            }));
        },
        Os: function(t, e) {
            new es({
                method: "GET",
                url: xs.online
            }).ts(function() {
                t && t();
            }, function() {
                e && e();
            }, function() {
                e && e();
            });
        },
        Ts: function(t, e) {
            jt.a.environment === Ut.a.BROWSER && -1 !== (r = (n = Ka.a.global().location.host).indexOf(":")) && (n = n.slice(0, r));
            var n, r = {
                mapId: t.buildingID,
                appName: t.appName
            };
            return e ? r.keyValue = t.key : r.appKey = t.key, e ? r.webUrl = n || Vs : r.webURL = n || Vs, 
            r;
        },
        Ms: function(t) {
            if ("undefined" != typeof navigator && "undefined" != typeof document) {
                var e = {};
                -1 !== navigator.userAgent.indexOf("Opera") ? e.userAgent = "Opera" : -1 !== navigator.userAgent.indexOf("Firefox") ? e.userAgent = "FF" : -1 !== navigator.userAgent.indexOf("Chrome") ? e.userAgent = "Chrome" : -1 !== navigator.userAgent.indexOf("Safari") && 0 === navigator.userAgent.indexOf("Chrome") ? e.userAgent = "Safari" : -1 !== navigator.userAgent.indexOf("compatible") && -1 !== navigator.userAgent.indexOf("MSIE") ? e.userAgent = "IE" : -1 !== navigator.userAgent.indexOf("Trident") && (e.userAgent = "Edge"), 
                e.product = "JS", e.sdkVersion = i + ".115", e.appName = t.appName, e.appkey = t.key;
                for (var n = (t = jt.a.document.createElement("canvas").getContext("experimental-webgl")).getExtension("WEBGL_debug_renderer_info"), r = (e.gpu = n ? t.getParameter(n.UNMASKED_RENDERER_WEBGL) : null, 
                e.os = navigator.platform, !0), o = navigator.userAgent, a = [ "Android", "iPhone", "SymbianOS", "Windows Phone", "iPad", "iPod" ], s = 0; s < a.length; s++) if (0 < o.indexOf(a[s])) {
                    r = !1;
                    break;
                }
                e.device = r ? "pc" : "mobile", new es({
                    method: "POST",
                    url: xs.collect,
                    header: {
                        "X-Requested-With": "XMLHttpRequest",
                        "Content-type": "application/json;charset=utf-8"
                    },
                    data: e
                }).ts();
            }
        }
    });
    var Ws = new It();
    function Ys(t) {
        return (Ys = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Xs(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Ys(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Ys(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Ys(t) ? t : String(t);
            }(r.key), r);
        }
    }
    It = function(t, e, n) {
        return e && Xs(t.prototype, e), n && Xs(t, n), Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }(function t() {
        var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}, n = this, r = t;
        if (!(n instanceof r)) throw new TypeError("Cannot call a class as a function");
        this.js = e.disposeCallback, this.Ls = !1, this.ks = !1, this.As = void 0 !== e.enable && e.enable, 
        this.name = void 0 !== e.name ? e.name : "", this.Rs = new Map(), this.Cs = e.mapCreateTime;
    });
    var Zs = (Object.assign(It.prototype, {
        Ns: function() {
            !this.As || this.ks || this.Ls && 0 === this.Rs.size && (this.js({
                mapCreateTime: this.Cs
            }), this.ks = !0);
        },
        Ps: function(t) {
            this.As && (this.Ls = t, this.Ns());
        },
        Ds: function(t) {
            this.As && (this.Rs.has(t) && console.warn("..."), this.Rs.set(t, 0));
        },
        Is: function(t) {
            this.As && (this.Rs.has(t) ? (this.Rs.delete(t), this.Ns()) : console.warn(""));
        }
    }), It);
    function qs(t) {
        return (qs = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Ks(t) {
        return function(t) {
            if (Array.isArray(t)) return Js(t);
        }(t) || function(t) {
            if ("undefined" != typeof Symbol && null != t[Symbol.iterator] || null != t["@@iterator"]) return Array.from(t);
        }(t) || function(t, e) {
            var n;
            if (t) return "string" == typeof t ? Js(t, e) : "Map" === (n = "Object" === (n = Object.prototype.toString.call(t).slice(8, -1)) && t.constructor ? t.constructor.name : n) || "Set" === n ? Array.from(t) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? Js(t, e) : void 0;
        }(t) || function() {
            throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
        }();
    }
    function Js(t, e) {
        (null == e || e > t.length) && (e = t.length);
        for (var n = 0, r = new Array(e); n < e; n++) r[n] = t[n];
        return r;
    }
    function Qs(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != qs(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != qs(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == qs(t) ? t : String(t);
            }(r.key), r);
        }
    }
    It = function(t, e, n) {
        return e && Qs(t.prototype, e), n && Qs(t, n), Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }(function t() {
        if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
        this._s = new gs(), this.Fs = [], this.Gs = new Zs({
            enable: !0,
            name: "DataManager"
        });
    });
    var $s = (Object.assign(It.prototype, {
        tn: function(t) {
            var e = this;
            this.Gs.js = t, this.Fs.forEach(function(t) {
                200 !== t.$o.status && e.Gs.Is(t.Qo.url), t.tn();
            }), this.Fs.length = 0, this.Gs.Ps(!0);
        },
        Us: function(t, e, n, r) {
            var i;
            t.mapURL ? (i = t.isPreview ? t.isOutdoor ? t.tile ? t.mapURL + t.buildingID + "/separate/" + t.buildingID + e + ".fmap" : t.mapURL + t.buildingID + "/" + t.buildingID + e + ".fmap" : t.tile ? t.mapURL + t.mapID + "/" + t.bid + "/" + t.buildingID + "/separate/" + t.buildingID + e + ".fmap" : t.mapURL + t.mapID + "/" + t.bid + "/" + t.buildingID + "/" + t.buildingID + e + ".fmap" : t.mapURLAbsolute ? t.mapURL + t.buildingID + e + ".fmap" : t.isOutdoor ? t.mapURL + t.buildingID + "/" + t.buildingID + e + ".fmap" : t.mapURL + t.mapID + "/" + t.bid + "/" + t.buildingID + "/" + t.buildingID + e + ".fmap", 
            n && n(i)) : (i = {
                newFlag: "2",
                keyType: 3,
                isSeparate: !1
            }, t.isOutdoor || (i.bId = t.bid, i.rootMid = t.mapID), e = new es({
                method: "POST",
                url: "" === e ? xs.download : xs.downloadTile + "/" + t.buildingID + e + ".fmap",
                header: {
                    "X-Requested-With": "XMLHttpRequest",
                    "Content-type": "application/json;charset=utf-8"
                },
                data: Object.assign(i, Ws.Ts(t, !0))
            }), this.Fs.push(e), e.ts(function(t) {
                n && n(t.replace('"', "").replace('"', ""));
            }, function(t) {
                r && r(t);
            }, function(t) {
                r && r(t);
            }));
        },
        Bs: function(t, e, n) {
            var r = this;
            t.enableCollect = !0, Ws.Es(t, function() {
                r.Us(t, "", function(i) {
                    var o = new es({
                        method: "GET",
                        responseType: "arraybuffer",
                        url: i
                    });
                    r.Fs.push(o), r.Gs.Ds(i), o.ts(function(o) {
                        r.Gs.Is(i);
                        o = new Uint8Array(o);
                        var a = r._s.rs(o);
                        !t.isOutdoor || (o = [], a.keys && 0 !== a.keys.length ? o.push.apply(o, Ks(a.keys)) : o.push(a.key), 
                        t.isPreview) ? e && e(a) : Ws.xs(t, o, function() {
                            e && e(a);
                        }, function(t) {
                            n && n(t);
                        });
                    }, function(t) {
                        n && n(t === Nt.PATH_ERROR ? Nt.MAP_ID_URL_ERROR : t), r.Gs.Is(i);
                    }, function(t) {
                        n && n(t), r.Gs.Is(i);
                    });
                }, function(t) {
                    n && n(t);
                });
            }, function(t) {
                n && n(t);
            });
        },
        Hs: function(t, e, n) {
            var r = this;
            t.enableCollect = !0, Ws.Es(t, function() {
                r.Us(t, ".scene", function(i) {
                    r.Gs.Ds(i);
                    var o = new es({
                        method: "GET",
                        responseType: "arraybuffer",
                        url: i
                    });
                    r.Fs.push(o), o.ts(function(o) {
                        o = new Uint8Array(o);
                        var a = r._s.us(o);
                        r.Gs.Is(i), !t.isOutdoor || (o = [], a.keys && 0 !== a.keys.length ? o.push.apply(o, Ks(a.keys)) : o.push(a.key), 
                        t.isPreview) ? e && e(a) : Ws.xs(t, o, function() {
                            e && e(a);
                        }, function(t) {
                            n && n(t);
                        });
                    }, function(t) {
                        n && n(t), r.Gs.Is(i);
                    }, function(t) {
                        n && n(t), r.Gs.Is(i);
                    });
                }, function(t) {
                    n && n(t);
                });
            }, function(t) {
                n && n(t);
            });
        },
        zs: function(t, e, n) {
            var r = this;
            this.Us(t, ".gate", function(t) {
                r.Gs.Ds(t);
                var i = new es({
                    method: "GET",
                    responseType: "arraybuffer",
                    url: t
                });
                r.Fs.push(i), i.ts(function(n) {
                    n = new Uint8Array(n), n = r._s.hs(n), e && e(n), r.Gs.Is(t);
                }, function(e) {
                    n && n(e), r.Gs.Is(t);
                }, function(e) {
                    n && n(e), r.Gs.Is(t);
                });
            }, function(t) {
                n && n(t);
            });
        },
        Vs: function(t, e, n, r) {
            var i = this;
            this.Us(t, ".floor." + e + ".geo", function(t) {
                var e = new es({
                    method: "GET",
                    responseType: "arraybuffer",
                    url: t
                });
                i.Gs.Ds(t), i.Fs.push(e), e.ts(function(e) {
                    e = new Uint8Array(e), e = i._s.ds(e), n && n(e), i.Gs.Is(t);
                }, function(e) {
                    r && r(e), i.Gs.Is(t);
                }, function(e) {
                    r && r(e), i.Gs.Is(t);
                });
            }, function(t) {
                r && r(t);
            });
        },
        Ws: function(t, e, n, r) {
            var i = this;
            this.Us(t, ".floor." + e + ".biz", function(t) {
                var e = new es({
                    method: "GET",
                    responseType: "arraybuffer",
                    url: t
                });
                i.Gs.Ds(t), i.Fs.push(e), e.ts(function(e) {
                    e = new Uint8Array(e), e = i._s.ps(e), n && n(e), i.Gs.Is(t);
                }, function(e) {
                    r && r(e), i.Gs.Is(t);
                }, function(e) {
                    r && r(e), i.Gs.Is(t);
                });
            }, function(t) {
                r && r(t);
            });
        },
        Ys: function(t, e, n, r) {
            var i = this;
            this.Us(t, e, function(t) {
                var e = new es({
                    method: "GET",
                    responseType: "arraybuffer",
                    url: t
                });
                i.Gs.Ds(t), i.Fs.push(e), e.ts(function(e) {
                    e = new Uint8Array(e), e = i._s.bs(e), n && n(e), i.Gs.Is(t);
                }, function(e) {
                    r && r(e), i.Gs.Is(t);
                });
            }, function(t) {
                r && r(t);
            }, function(t) {
                r && r(t);
            });
        },
        Xs: function(t, e, n, r) {
            this.Ys(t, ".floor." + e + ".navi", n, r);
        },
        Zs: function(t, e, n, r) {
            this.Ys(t, ".floor." + e + ".drive.navi", n, r);
        },
        qs: function(t, e, n, r) {
            this.Ys(t, ".floor." + e + ".accessible.navi", n, r);
        }
    }), It);
    function tl(t) {
        for (var e = [], n = t.length, r = 0; r < n; r++) {
            for (var i = t[r], o = {
                x: this.Js(i.x),
                y: this.Js(i.y)
            }, a = e.length, s = !1, l = 0; l < a; l++) {
                var u = e[l];
                if (u.x == o.x && u.y == o.y) {
                    s = !0;
                    break;
                }
            }
            s || e.push(o);
        }
        return e;
    }
    function el(t) {
        return +t.toFixed(2);
    }
    function nl(t) {
        return (nl = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function rl(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != nl(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != nl(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == nl(t) ? t : String(t);
            }(r.key), r);
        }
    }
    It = function(t, e, n) {
        return e && rl(t.prototype, e), n && rl(t, n), Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }(function t() {
        if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
    }), Object.assign(It.prototype, {
        Ks: function(t, e) {
            for (var n = [], r = 0, i = 0; i < t.length; i++) {
                var o = t[i].idxs;
                if ("number" == typeof (o = o || t[i])) for (;r < o; ) n.push({
                    x: e[r],
                    y: e[r + 1]
                }), r += 2; else for (var a = 0; a < o.length; a++) for (var s = o[a]; r < s; ) n.push({
                    x: e[r],
                    y: e[r + 1]
                }), r += 2;
            }
            return n;
        },
        Qs: function(t, e) {
            for (var n = [], r = 0, i = 0; i < t.length; i++) {
                var o = t[i].idxs;
                if ("number" == typeof (o = o || t[i])) {
                    for (var a = []; r < o; ) a.push({
                        x: e[r],
                        y: e[r + 1]
                    }), r += 2;
                    n.push(a);
                } else for (var s = 0; s < o.length; s++) {
                    for (var l = o[s], u = []; r < l; ) u.push({
                        x: e[r],
                        y: e[r + 1]
                    }), r += 2;
                    n.push(u);
                }
            }
            return n;
        },
        $s: function(t, e) {
            for (var n = [], r = [], i = 0, o = 0; o < t.length; o++) {
                var a = t[o].idxs;
                if ("number" == typeof (a = a || t[o])) for (;i < a; ) n.push({
                    x: e[i],
                    y: e[i + 1]
                }), i += 2; else for (var s = 0; s < a.length; s++) if (0 === s) for (var l = a[s]; i < l; ) n.push({
                    x: e[i],
                    y: e[i + 1]
                }), i += 2; else {
                    for (var u = [], c = a[s]; i < c; ) u.push({
                        x: e[i],
                        y: e[i + 1]
                    }), i += 2;
                    r.push(u);
                }
            }
            var h = [];
            return h.push(n), h.push.apply(h, r), h;
        },
        ta: function(t) {
            return tl(t);
        },
        Js: el
    });
    var il = new It();
    function ol(t) {
        return (ol = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function al(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != ol(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != ol(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == ol(t) ? t : String(t);
            }(r.key), r);
        }
    }
    var sl = {
        G1: "MULTIPOLYGON(((",
        G2: "POINT(",
        G3: "MULTILINESTRING(("
    };
    sl.GLEN1 = "MULTIPOLYGON(((".length, sl.GLEN2 = "POINT(".length, sl.GLEN3 = "MULTILINESTRING((".length, 
    It = function(t, e, n) {
        return e && al(t.prototype, e), n && al(t, n), Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }(function t() {
        if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
    });
    Object.assign(It.prototype, {
        Ks: function(t) {
            var e = [];
            return 0 != t.indexOf(sl.G2) ? [] : (t = t.substring(sl.GLEN2, t.length - 1).split(" "), 
            e.push({
                x: parseFloat(t[0]),
                y: parseFloat(t[1])
            }), e);
        },
        na: function(t, e) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n].split(" ");
                e.push({
                    x: parseFloat(r[0]),
                    y: parseFloat(r[1])
                });
            }
        },
        Qs: function(t) {
            return 0 != t.indexOf(sl.G3) ? [] : (t = t.substring(sl.GLEN3, t.length - 2).split(","), 
            this.na(t, t = []), [ t ]);
        },
        $s: function(t) {
            var e = [], n = [];
            if (0 != t.indexOf(sl.G1)) return [];
            for (var r = t.substring(sl.GLEN1, t.length - 3).split(/\),\(/), i = 0; i < r.length; i++) {
                var o = r[i].split(/,/);
                if (0 == i) this.na(o, e); else {
                    for (var a = [], s = 0; s < o.length; s++) {
                        var l = o[s].split(" ");
                        a.push({
                            x: parseFloat(l[0]),
                            y: parseFloat(l[1])
                        });
                    }
                    n.push(a);
                }
            }
            return (t = []).push(e), t.push.apply(t, n), t;
        },
        ta: function(t) {
            return tl(t);
        },
        Js: el
    });
    var ll = new It();
    function ul(t, e) {
        (null == e || e > t.length) && (e = t.length);
        for (var n = 0, r = new Array(e); n < e; n++) r[n] = t[n];
        return r;
    }
    function cl(t) {
        return (cl = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function hl(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != cl(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != cl(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == cl(t) ? t : String(t);
            }(r.key), r);
        }
    }
    It = function() {
        function t(e) {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
            this.Re = me.GROUP, this.Nt = new Map(), this.Ae = -1, this.xe = null, Object.assign(this, e);
        }
        var e, n;
        return e = t, (n = [ {
            key: "getType",
            value: function() {
                return this.Re;
            }
        }, {
            key: "getBound",
            value: function() {
                return this.xe || this.Ne(), this.xe;
            }
        }, {
            key: "getChildren",
            value: function() {
                return this.Nt;
            }
        } ]) && hl(e.prototype, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }();
    var fl = (Object.assign(It.prototype, {
        tn: function() {
            var t, e = function(t, e) {
                var n, r, i, o, a = "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"];
                if (a) return r = !(n = !0), {
                    s: function() {
                        a = a.call(t);
                    },
                    n: function() {
                        var t = a.next();
                        return n = t.done, t;
                    },
                    e: function(t) {
                        r = !0, i = t;
                    },
                    f: function() {
                        try {
                            n || null == a.return || a.return();
                        } finally {
                            if (r) throw i;
                        }
                    }
                };
                if (Array.isArray(t) || (a = function(t, e) {
                    var n;
                    if (t) return "string" == typeof t ? ul(t, e) : "Map" === (n = "Object" === (n = Object.prototype.toString.call(t).slice(8, -1)) && t.constructor ? t.constructor.name : n) || "Set" === n ? Array.from(t) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? ul(t, e) : void 0;
                }(t)) || e && t && "number" == typeof t.length) return a && (t = a), o = 0, {
                    s: e = function() {},
                    n: function() {
                        return o >= t.length ? {
                            done: !0
                        } : {
                            done: !1,
                            value: t[o++]
                        };
                    },
                    e: function(t) {
                        throw t;
                    },
                    f: e
                };
                throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
            }(this.Nt.values());
            try {
                for (e.s(); !(t = e.n()).done; ) {
                    var n = t.value;
                    n.tn && n.tn();
                }
            } catch (t) {
                e.e(t);
            } finally {
                e.f();
            }
            this.Nt.clear();
        },
        Pe: function(t) {
            var e = t._support(this);
            e == an.PASS ? this.Nt.forEach(function(e) {
                e.Pe(t);
            }) : e == an.PUSH && t._result.push(this);
        },
        Ne: function() {
            var t = this;
            this.xe = new Xe(), 0 != this.Nt.size && this.Nt.forEach(function(e) {
                t.xe.we(e.getBound());
            });
        }
    }), It);
    function pl(t) {
        return (pl = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function dl(t, e, n) {
        e = yl(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], yl(t).constructor) : e.apply(t, n)) && ("object" === pl(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        return ml(r);
    }
    function yl(t) {
        return (yl = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function ml(t) {
        if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return t;
    }
    function vl(t, e) {
        return (vl = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    It = function() {
        var t = n, e = un;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t) {
            var e;
            if (this instanceof n) return (e = dl(this, n)).Ae = t.eid, e.Re = me.POINT, Object.assign(ml(e), t), 
            e;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && vl(t, e), t = n, Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }();
    var gl = (Object.assign(It.prototype, {
        Ne: function() {
            this.xe = new Xe(), this.Ce && this.xe._e(this.Ce);
        },
        Pe: function(t) {
            t._support(this) == an.PUSH && t._result.push(this);
        }
    }), It);
    function bl(t) {
        return (bl = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    var xl = [ "layerGroups" ], wl = [ "layers" ];
    function Sl(t, e) {
        if (null == t) return {};
        var n, r = function(t, e) {
            if (null == t) return {};
            var n, r, i = {}, o = Object.keys(t);
            for (r = 0; r < o.length; r++) n = o[r], 0 <= e.indexOf(n) || (i[n] = t[n]);
            return i;
        }(t, e);
        if (Object.getOwnPropertySymbols) for (var i = Object.getOwnPropertySymbols(t), o = 0; o < i.length; o++) n = i[o], 
        0 <= e.indexOf(n) || Object.prototype.propertyIsEnumerable.call(t, n) && (r[n] = t[n]);
        return r;
    }
    function _l(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != bl(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != bl(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == bl(t) ? t : String(t);
            }(r.key), r);
        }
    }
    It = function(t, e, n) {
        return e && _l(t.prototype, e), n && _l(t, n), Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }(function t() {
        if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
        this.ea = [ 1, 2, 3, 4 ], this.ia = [ 6, 7, 9 ], this.ra = [ 31, 32 ], this.oa = new Map(), 
        this.oa.set(31, me.EXTENTGROUP), this.oa.set(32, me.MODELGROUP), this.oa.set(6, me.FACILITYGROUP), 
        this.oa.set(7, me.LABELGROUP), this.oa.set(9, me.EXTERNALMODELGROUP), this.sa = new Map(), 
        this.sa.set(31, [ "extentLayer", null ]), this.sa.set(32, [ "modelLayer", "labelLayer" ]), 
        this.sa.set(6, [ "poiLayer", null ]), this.sa.set(7, [ "labelLayer", null ]), this.sa.set(9, [ "externalModelLayer", null ]), 
        this._s = new gs();
    });
    var El = (Object.assign(It.prototype, {
        aa: function(t) {
            var e;
            return t ? (e = t.scene, this.ua(e, t)) : null;
        },
        ua: function(t, e) {
            var n = this, r = t.layerGroups, i = Sl(t, xl), o = t.fileVer, a = new fl(i);
            return r.forEach(function(t) {
                var r = n.ca(t, e, o);
                a.Nt.set(t.gid, r);
            }), a;
        },
        ca: function(t, e, n) {
            var r = this, i = t.layers, o = Sl(t, wl), a = new fl(o), s = e && e.floors ? e.floors.get(t.gid).geo[0] : null, l = e && e.floors ? e.floors.get(t.gid).biz[0] : null;
            return i.forEach(function(t) {
                6 === t.ltype && -1 !== t.lname.indexOf("storelabel") && (t.ltype = 7);
                var e = r.fa(t, s, l, n);
                null !== e && a.Nt.set(r.oa.get(t.ltype), e);
            }), this.ha(a), a;
        },
        ha: function(t) {
            var e = Array.from(t.Nt);
            e.sort(function(t, e) {
                return t[0] - e[0];
            }), t.Nt = new Map(e);
        },
        fa: function(t, e, n, r) {
            var i;
            return -1 === this.ea.indexOf(t.ltype) && this.sa.get(t.ltype) ? (i = new fl(t), 
            this.la(i, e, n, r), i && (i.Re = this.oa.get(t.ltype)), i) : null;
        },
        la: function(t, e, n, r) {
            if (t) {
                var i = this.sa.get(t.ltype);
                if (i) {
                    var o = e ? e[i[0]] : [], a = n ? n[i[0]] : [];
                    switch (t.ltype) {
                      case 6:
                        this.da(t, o, a, r, me.FACILITY);
                        break;

                      case 7:
                        this.da(t, o, a, r, me.LABEL);
                        break;

                      case 9:
                        this.da(t, o, a, r, me.EXTERNALMODEL);
                        break;

                      case 31:
                        this.va(t, o, a, r, me.EXTENT, null);
                        break;

                      case 32:
                        this.va(t, o, a, r, me.MODEL, e ? e[i[1]] : null);
                    }
                }
            }
        },
        da: function(t, e, n, r, i) {
            for (var o = 0; o < e.length; o++) {
                var a = this.pa(e[o], n[o], r);
                a.Re = i, t.Nt.set(e[o].eid, a);
            }
        },
        pa: function(t, e, n) {
            return e = Object.assign({}, e, {
                area: t.area,
                eid: t.eid,
                height: t.height
            }), e = new gl(e), t.coordinates ? e.Ce = t.coordinates : (e.Ce = 1 == n ? ll.Ks(t.geo) : il.Ks(t.idxs, t.pts), 
            t.coordinates = e.Ce), e;
        },
        va: function(t, e, n, r, i, o) {
            for (var a = 0; a < e.length; a++) {
                var s = this.ma(e[a], n[a], r, o ? o[a] : null);
                s.Re = i, t.Nt.set(e[a].eid, s);
            }
        },
        ma: function(t, e, n, r) {
            return e = Object.assign({}, e, {
                area: t.area,
                eid: t.eid,
                height: t.height,
                baseheight: t.baseheight
            }), (e = new mn(e)).Ce = 1 === n ? ll.$s(t.geo) : il.$s(t.idxs, t.pts), r && (r.coordinates || (r.coordinates = 1 === n ? ll.Ks(r.geo) : il.Ks(r.idxs, r.pts)), 
            e.je = r.coordinates[0]), e;
        }
    }), It), Ol = 2, Ml = 4, Tl = 8;
    function Ll(t) {
        return (Ll = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Al(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Ll(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Ll(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Ll(t) ? t : String(t);
            }(r.key), r);
        }
    }
    It = function() {
        function t() {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
            this.cr = new Map(), this.ya = new Map(), this.Qo = new Map(), this.ba = new Map(), 
            this.ga = new Map(), this.wa = new Map(), this._a = [ 2, 3 ], this.Sa = !1, this._s = new gs(), 
            this.xa = new El(), this.Ea = new $s();
        }
        var e, n;
        return e = t, (n = [ {
            key: "load",
            value: function(t, e) {
                this.Ma(t, e);
            }
        }, {
            key: "loadWhole",
            value: function(t, e) {
                this.Oa(t, e);
            }
        }, {
            key: "getDecode",
            value: function(t) {
                return t = void 0 !== t.buildingID ? t.buildingID : t.mapID, this.Ta({
                    buildingID: t
                });
            }
        }, {
            key: "getData",
            value: function(t) {
                return t = void 0 !== t.buildingID ? t.buildingID : t.mapID, this.cr.get(t);
            }
        }, {
            key: "setCache",
            value: function(t) {
                this.cr = t[0], this.ya = t[1];
            }
        }, {
            key: "getCache",
            value: function() {
                return [ this.cr, this.ya ];
            }
        } ]) && Al(e.prototype, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }();
    var Pl = (Object.assign(It.prototype, {
        tn: function(t) {
            this.Ea.tn(t), this.Mo();
        },
        Mo: function() {
            this.cr.clear(), this.cr = null, this.ya.clear(), this.ya = null, this.Qo.clear(), 
            this.Qo = null, this.ba.clear(), this.ba = null, this.ga.clear(), this.ga = null, 
            this.wa.clear(), this.wa = null, this.ja && this.ja({
                name: "DataManager"
            });
        },
        La: function(t) {
            this.ba.set(t.buildingID + t.uuid, null), this.ga.set(t.buildingID + t.uuid, null), 
            this.wa.set(t.buildingID + t.uuid, 0);
        },
        Ma: function(t, e) {
            var n = this;
            this.La(t), this.Hs(t, function(r, i) {
                e && e(r, i);
                var o = n.ka(t);
                i = t.loadNavi && o.buildings && 0 < o.buildings.length;
                n.zs(t, i, function(r, i) {
                    e && e(r, i);
                    for (var a = void 0 !== t.level ? t.level : parseInt(o.defGid), s = (n.Aa(t, a, e), 
                    t.visibleLevels || o.levels), l = 0; l < s.length; l++) s[l] === a || o.levels.indexOf(s[l]) < 0 || n.Aa(t, s[l], e);
                    if (t.preLoad) for (var u = 0; u < o.levels.length; u++) o.levels[u] !== a && -1 === s.indexOf(o.levels[u]) && n.Aa(t, o.levels[u], e);
                }, function(t) {
                    e && e(r, t);
                });
            }, function(t, n) {
                e && e(t, n);
            });
        },
        zs: function(t, e, n, r) {
            var i = this;
            e ? (e = this.Ra(t)) ? n && n("gate", e) : this.Ea.zs(t, function(e) {
                i.ya.get(t.buildingID).gate = e, n && n("gate", e);
            }, function(e) {
                var o;
                t.navigationData ? ((o = i.ya.get(t.buildingID)).gate = t.navigationData, n && n("gate", o.gate)) : r("error", e);
            }) : n && n("gate", null);
        },
        Hs: function(t, e, n) {
            var r = this, i = this.ka(t);
            i ? (e && e("scene", i), t.justDecode || (i = this.cr.get(t.buildingID), e && e("building", i))) : this.Ea.Hs(t, function(n) {
                t.isOutdoor && r.Ca(n), r.ya.set(t.buildingID, {
                    scene: n
                }), e && e("scene", n), t.justDecode || (n = r.xa.ua(n), r.cr.set(t.buildingID, n), 
                e && e("building", n));
            }, function(t) {
                n && n("error", t === Nt.PATH_ERROR ? Nt.MAP_ID_URL_ERROR : t);
            });
        },
        Ca: function(t) {
            var e = t.fileVer;
            t.buildings && 1 < e && t.buildings.forEach(function(t) {
                t.floors && (t.levelChart = [], t.fids = [], t.floors.forEach(function(e) {
                    e.Ce = il.$s(e.idxs, e.pts), e.pgid && t.levelChart.push(e.pgid, e.gid), e.baseLevel && (t.minlevel = e.minlevel, 
                    t.maxlevel = e.maxlevel), e.fids && t.fids.push.apply(t.fids, e.fids);
                }));
            });
        },
        Aa: function(t, e, n, r) {
            var i = this.ba.get(t.buildingID + t.uuid);
            i || this.ba.set(t.buildingID + t.uuid, i = []), r ? i.unshift(e) : i.push(e), this.Sa && 1 !== i.length || this.Na(t, n);
        },
        Na: function(t, e) {
            var n, r, i, o = this, a = this.ka(t);
            a && (n = this.ba.get(t.buildingID + t.uuid)) && 0 !== n.length && ((r = this.ga.get(t.buildingID + t.uuid)) || this.ga.set(t.buildingID + t.uuid, r = []), 
            i = n[0], -1 !== r.indexOf(i) ? (n.splice(n.indexOf(i), 1), this.Na(t, e)) : (r.push(i), 
            this.Pa(t, i, function(r, s) {
                var l = o.wa.get(t.buildingID + t.uuid);
                "layerGroup" === r && (e && e(r, s), o.wa.set(t.buildingID + t.uuid, ++l), l === a.layerGroups.length && e && e("decode", o.Ta(t)), 
                n.splice(n.indexOf(i), 1), o.Na(t, e)), "layer" === r && e && e(r, s), "floor" === r && (e && e(r, s), 
                l === a.layerGroups.length) && e && e("complete", o.Da(t));
            }, function(t, n) {
                e && e(t, n);
            })));
        },
        Pa: function(t, e, n, r) {
            var i, o, a, s, l, u, c = this, h = this.ka(t), f = this.Ia(h, e);
            f ? (i = f.gname, f = f.naviType || 0, o = this._a[0], a = 0, s = new Map(), l = t.merge, 
            u = function(r) {
                var i, u, c;
                o === ++a && (i = s.get("geo"), u = s.get("biz"), l && l.merge(e, i, u, h.fileVer), 
                n && n("layerGroup", s), t.justDecode || ((c = r.ai(t, e)).Nt.forEach(function(t) {
                    r.xa.la(t, i, u, h.fileVer), n && n("layer", t);
                }), n && n("floor", c)));
            }, t.loadNavi && ((0 != (f & Ol) || h.fileVer < 3) && (o++, this.Xs(t, e, i, function(t, e) {
                s.set(t, e), n && n(t, e), u(c);
            }, function(t) {
                r && r(t);
            })), 0 != (f & Ml) && (o++, this.Zs(t, e, i, function(t, e) {
                s.set(t, e), n && n(t, e), u(c);
            }, function(t) {
                r && r(t);
            })), 0 != (f & Tl)) && (o++, this.qs(t, e, i, function(t, e) {
                s.set(t, e), n && n(t, e), u(c);
            }, function(t) {
                r && r(t);
            })), this.Vs(t, e, i, function(t, e) {
                s.set(t, e), n && n(t, e), u(c);
            }, function(t) {
                r && r(t);
            }), this.Ws(t, e, i, function(t, e) {
                s.set(t, e), n && n(t, e), u(c);
            }, function(t) {
                r && r(t);
            })) : r && r("error", Nt.DEFAULT_LEVEL_ERROR);
        },
        Vs: function(t, e, n, r, i) {
            var o = this, a = this.Fa(t, e, "geo");
            a ? r && r("geo", a) : this.Ea.Vs(t, n, function(n) {
                o.Ga(t, e, "geo", n), r && r("geo", n);
            }, function(t) {
                i && i("error", t);
            });
        },
        Ws: function(t, e, n, r, i) {
            var o = this, a = this.Fa(t, e, "biz");
            a ? r && r("biz", a) : this.Ea.Ws(t, n, function(n) {
                o.Ga(t, e, "biz", n), r && r("biz", n);
            }, function(t) {
                i && i("error", t);
            });
        },
        Xs: function(t, e, n, r, i) {
            var o = this, a = this.Fa(t, e, "navi");
            a ? r && r("navi", a) : this.Ea.Xs(t, n, function(n) {
                o.Ga(t, e, "navi", n), r && r("navi", n);
            }, function(t) {
                i && i("error", t);
            });
        },
        Zs: function(t, e, n, r, i) {
            var o = this, a = this.Fa(t, e, "drive_navi");
            a ? r && r("drive_navi", a) : this.Ea.Zs(t, n, function(n) {
                o.Ga(t, e, "drive_navi", n), r && r("drive_navi", n);
            }, function(t) {
                i && i("error", t);
            });
        },
        qs: function(t, e, n, r, i) {
            var o = this, a = this.Fa(t, e, "accessible_navi");
            a ? r && r("drive_navi", a) : this.Ea.qs(t, n, function(n) {
                o.Ga(t, e, "accessible_navi", n), r && r("accessible_navi", n);
            }, function(t) {
                i && i("error", t);
            });
        },
        Oa: function(t, e) {
            this.Bs(t, function(t, n) {
                e && e(t, n);
            }, function(t, n) {
                e && e(t, n);
            });
        },
        Bs: function(t, e, n) {
            var r = this, i = this.Ta(t);
            i ? e && e("decode", i) : this.Ea.Bs(t, function(n) {
                r.Ua(t, n), i = r.Ta(t), e && e("decode", i), t.justDecode || (n = r.xa.aa(i), r.cr.set(t.buildingID, n), 
                e && e("complete", n));
            }, function(t) {
                n && n("error", t);
            });
        },
        Da: function(t) {
            if (this.cr) return this.cr.get(t.buildingID) || null;
        },
        ai: function(t, e) {
            return (t = this.cr.get(t.buildingID)) ? t.Nt.get(e) : null;
        },
        Ua: function(t, e) {
            var n = {
                scene: null,
                floors: new Map()
            }, r = this._s.ss(e);
            t.isOutdoor && this.Ca(r), n.scene = r, n.gate = this._s.cs(e);
            for (var i = 0; i < r.layerGroups.length; i++) {
                var o = r.layerGroups[i], a = this._s.ls(e, o.gid), s = this._s.vs(e, o.gid), l = this._s.ys(e, o.gid), u = this._s.gs(e, o.gid), c = this._s.ws(e, o.gid), h = (t.merge && t.merge.merge(o.gid, a, s, r.fileVer), 
                new Map());
                h.set("geo", a), h.set("biz", s), h.set("navi", l), h.set("drive_navi", u), h.set("accessible_navi", c), 
                n.floors.set(o.gid, h);
            }
            this.ya.set(t.buildingID, n);
        },
        Ta: function(t) {
            if (!(n = this.ya.get(t.buildingID))) return null;
            for (var e = n.scene, n = n.gate, r = new Map(), i = (n = {
                scene: e,
                floors: r,
                gate: n
            }, 0); i < e.layerGroups.length; i++) {
                var o, a = e.layerGroups[i], s = a.gid, l = {
                    gid: s,
                    gname: a.gname,
                    level: s,
                    geo: [],
                    biz: [],
                    navi: [],
                    naviDrive: [],
                    naviAccessible: []
                };
                (o = ((o = ((o = (l.geo.push(this.Fa(t, s, "geo")), l.biz.push(this.Fa(t, s, "biz")), 
                this.Fa(t, s, "navi"))) && l.navi.push(o), this.Fa(t, s, "drive_navi"))) && l.naviDrive.push(o), 
                this.Fa(t, s, "accessible_navi"))) && l.naviAccessible.push(o), r.set(a.gid, l);
            }
            return n;
        },
        ka: function(t) {
            return (t = this.ya.get(t.buildingID)) ? t.scene : null;
        },
        Ra: function(t) {
            return (t = this.ya.get(t.buildingID)) ? t.gate : null;
        },
        Ga: function(t, e, n, r) {
            var i;
            (t = this.ya.get(t.buildingID)) && ((i = t.floors) || (i = new Map(), t.floors = i), 
            (t = i.get(e)) || (t = new Map(), i.set(e, t)), t.set(n, r));
        },
        Fa: function(t, e, n) {
            return (t = (t = this.ya.get(t.buildingID)) && t.floors) && (t = t.get(e)) ? t.get(n) : null;
        },
        Ia: function(t, e) {
            if (null != t) for (var n = t.layerGroups, r = 0; r < n.length; r++) if (n[r].gid == e) return n[r];
            return null;
        }
    }), It);
    function Rl(t, e) {
        return Ur.prototype.copy.call(t, e), t.fragmentShader = e.fragmentShader, t.vertexShader = e.vertexShader, 
        t.uniforms = Br.clone(e.uniforms), t.lights = e.lights, t;
    }
    function jl(t) {
        Object.defineProperties(t, {
            color: {
                enumerable: !0,
                get: function() {
                    return t.uniforms.diffuse.value;
                },
                set: function(e) {
                    t.uniforms.diffuse.value = e;
                }
            },
            opacity: {
                enumerable: !0,
                get: function() {
                    return t.uniforms.opacity.value;
                },
                set: function(e) {
                    t.uniforms.opacity.value = e;
                }
            },
            map: {
                enumerable: !0,
                get: function() {
                    return this.uniforms.map.value;
                },
                set: function(t) {
                    this.uniforms.map.value = t;
                }
            }
        });
    }
    function Il(t) {
        t.fmcommon = {
            diffuse: {
                value: new Xt(15658734)
            },
            opacity: {
                value: 1
            },
            map: {
                value: null
            },
            uvTransform: {
                value: new O()
            }
        };
    }
    function Dl(t) {
        Ur.call(this, {
            type: "FMLineMaterial",
            uniforms: Br.clone(xi.line.uniforms),
            vertexShader: xi.line.vertexShader,
            fragmentShader: function(t) {
                var e = xi.line.fragmentShader;
                if (!t.gradient) return (e = e.replace("#include <line_gradient_defined>", "")).replace("#include <line_gradient>", "");
                for (var n = (l = t.gradient).percent, r = l.color, i = n.length, o = new Xt(), a = "\n\t\tfloat stops[".concat(i, "];\n\t\tvec3 gradients[").concat(i, "];\n\t\tfloat fromPercent = ").concat(Number(t.distancePercent[0]).toFixed(2), ";\n\t\tfloat toPercent = ").concat(Number(t.distancePercent[1]).toFixed(2), ";\n\t\t"), s = 0; s < i; s++) a += "stops[".concat(s, "] = ").concat(Number(n[s]).toFixed(2), ";\n\t\t"), 
                o.setStyle(r[s]), a += "gradients[".concat(s, "] = vec3(").concat(Number(o.r).toFixed(2), ",").concat(Number(o.g).toFixed(2), ", ").concat(Number(o.b).toFixed(2), ");\n\t\t");
                var l = "\n\t\t#ifdef GRADIENT\n\t\t\tfloat remap(float a0,float a1,float b0,float b1,float a) {\n\t\t\t\treturn (a - a0) / (a1 - a0) * (b1 - b0) + b0;\n\t\t\t}\n\n\t\t\tvec3 getGradientColor(float gradientValue) {\n\t\t\t\t".concat(a, "\n\n\t\t\t\tgradientValue = remap(0., 1., fromPercent, toPercent, gradientValue);\n\t\t\t\tfloat t = 0.0;\n\t\t\t\tvec3 color = vec3(0.0);\n\t\t\t\tfor (int i = 0; i < ").concat(i, "; i++) {\n\t\t\t\t\t\tif (gradientValue <= stops[i + 1]) {\n\t\t\t\t\t\t\t\tt = (gradientValue - stops[i]) / (stops[i + 1] - stops[i]);\n\t\t\t\t\t\t\t\tcolor = mix(gradients[i], gradients[i + 1], t);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn color;\n\t\t\t}\n\t\t#endif\n\t\t"), u = t.isNeedArrow ? "\n\t\t#ifdef GRADIENT\n\t\t\tdiffuseColor.rgb += getGradientColor( vUv2.y);\n\t\t#endif" : "\n\t\t\t#ifdef GRADIENT\n\t\t\t\tdiffuseColor.rgb = getGradientColor( vUv2.y);\n\t\t\t#endif\n\t\t";
                return (e = e.replace("#include <line_gradient_defined>", l)).replace("#include <line_gradient>", u);
            }(t)
        }), t.gradient && (this.defines = {
            GRADIENT: !0
        }), this.dashed = !1, Object.defineProperties(this, {
            color: {
                enumerable: !0,
                get: function() {
                    return this.uniforms.diffuse.value;
                },
                set: function(t) {
                    this.uniforms.diffuse.value.copy(t);
                }
            },
            lineWidth: {
                enumerable: !0,
                get: function() {
                    return this.uniforms.lineWidth.value;
                },
                set: function(t) {
                    this.uniforms.lineWidth.value = t;
                }
            },
            dashScale: {
                enumerable: !0,
                get: function() {
                    return this.uniforms.dashScale.value;
                },
                set: function(t) {
                    this.uniforms.dashScale.value = t;
                }
            },
            dashSize: {
                enumerable: !0,
                get: function() {
                    return this.uniforms.dashSize.value;
                },
                set: function(t) {
                    this.uniforms.dashSize.value = t;
                }
            },
            gapSize: {
                enumerable: !0,
                get: function() {
                    return this.uniforms.gapSize.value;
                },
                set: function(t) {
                    this.uniforms.gapSize.value = t;
                }
            },
            resolution: {
                enumerable: !0,
                get: function() {
                    return this.uniforms.resolution.value;
                },
                set: function(t) {
                    this.uniforms.resolution.value.copy(t);
                }
            },
            pcolor: {
                enumerable: !0,
                get: function() {
                    return this.uniforms.pcolor.value;
                },
                set: function(t) {
                    this.uniforms.pcolor.value.copy(t);
                }
            },
            opacity: {
                enumerable: !0,
                get: function() {
                    return this.uniforms.opacity.value;
                },
                set: function(t) {
                    this.uniforms.opacity.value = t;
                }
            }
        }), delete t.gradient, delete t.distancePercent, delete t.isNeedArrow, this.setValues(t);
    }
    Il(Kn), Kn.line = {
        lineWidth: {
            value: 1
        },
        resolution: {
            value: new Mt(1, 1)
        },
        dashScale: {
            value: 1
        },
        dashSize: {
            value: 1
        },
        gapSize: {
            value: 1
        },
        mmap: {
            value: null
        },
        offset: {
            value: new Mt(0, 0)
        },
        repeat: {
            value: new Mt(1, 1)
        },
        miny: {
            value: 0
        },
        pcolor: {
            value: new Xt(11447982)
        },
        usePassOpacity: {
            value: 0
        },
        passOpacity: {
            value: 1
        }
    }, xi.line = {
        uniforms: Br.merge([ Kn.fmcommon, Kn.line ]),
        vertexShader: "\n\t\t#include <common>\n\t\t#include <color_pars_vertex>\n\n\t\tuniform float lineWidth;\n\t\tuniform vec2 resolution;\n\n\t\tattribute float uvyStart;\n\t\tattribute float uvyEnd;\n\n\t\tattribute vec3 instanceStart;\n\t\tattribute vec3 instanceEnd;\n\n\t\tattribute vec3 instanceColorStart;\n\t\tattribute vec3 instanceColorEnd;\n\t\tattribute vec2 uv2;\n\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec2 vUv2;\n\t\tvarying float uvScale;\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashScale;\n\t\t\tattribute float instanceDistanceStart;\n\t\t\tattribute float instanceDistanceEnd;\n\t\t\tvarying float vLineDistance;\n\n\t\t#endif\n\n\t\tvoid trimSegment( const in vec4 start, inout vec4 end ) {\n\n\t\t\t// trim end segment so it terminates between the camera plane and the near plane\n\n\t\t\t// conservative estimate of the near plane\n\t\t\tfloat a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\n\t\t\tfloat b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\n\t\t\tfloat nearEstimate = - 0.5 * b / a;\n\n\t\t\tfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n\n\t\t\tend.xyz = mix( start.xyz, end.xyz, alpha );\n\n\t\t}\n\n\t\t#include <logdepthbuf_pars_vertex>\n\n\t\tvoid main() {\n\n\t\t\t#ifdef USE_COLOR\n\n\t\t\t\tvColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n\n\t\t\t#endif\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n\n\t\t\t#endif\n\n\t\t\tfloat aspect = resolution.x / resolution.y;\n\n\t\t\tvUv = uv;\n\n\t\t\tfloat duvy = uvyEnd - uvyStart;\n\t\t\tfloat uvy = uvyStart + duvy * uv2.y;\n\t\t\t// vUv2 = vec2(uv2.x ,uvy);\n\t\t\tvUv2 = ( position.y < 0.5 ) ? vec2(uv2.x ,uvyStart) : vec2(uv2.x ,uvyEnd);\n\t\t\t// camera space\n\t\t\tvec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n\t\t\tvec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n\n\t\t\t// special case for perspective projection, and segments that terminate either in, or behind, the camera plane\n\t\t\t// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n\t\t\t// but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n\t\t\t// perhaps there is a more elegant solution -- WestLangley\n\n\t\t\tbool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column\n\n\t\t\tif ( perspective ) {\n\n\t\t\t\tif ( start.z < 0.0 && end.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( start, end );\n\n\t\t\t\t} else if ( end.z < 0.0 && start.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( end, start );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// clip space\n\t\t\tvec4 clipStart = projectionMatrix * start;\n\t\t\tvec4 clipEnd = projectionMatrix * end;\n\n\t\t\t// ndc space\n\t\t\tvec2 ndcStart = clipStart.xy / clipStart.w;\n\t\t\tvec2 ndcEnd = clipEnd.xy / clipEnd.w;\n\n\t\t\t// direction\n\t\t\tvec2 dir = ndcEnd - ndcStart;\n\n\t\t\t// account for clip-space aspect ratio\n\t\t\tdir.x *= aspect;\n\t\t\tfloat scaleDir = length(dir);\n\t\t\tuvScale = 0.05/scaleDir;\n\t\t\tdir = normalize( dir );\n\n\t\t\t// perpendicular to dir\n\t\t\tvec2 offset = vec2( dir.y, - dir.x );\n\n\t\t\t// undo aspect ratio adjustment\n\t\t\tdir.x /= aspect;\n\t\t\toffset.x /= aspect;\n\n\t\t\t// sign flip\n\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t// endcaps\n\t\t\tif ( position.y < 0.0 ) {\n\n\t\t\t\toffset += - dir;\n\n\t\t\t} else if ( position.y > 1.0 ) {\n\n\t\t\t\toffset += dir;\n\n\t\t\t}\n\n\t\t\t// adjust for lineWidth\n\t\t\toffset *= lineWidth;\n\n\t\t\t// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...\n\t\t\toffset /= resolution.y;\n\n\t\t\t// select end\n\t\t\tvec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n\n\t\t\t// back to clip space\n\t\t\toffset *= clip.w;\n\n\t\t\tclip.xy += offset;\n\n\t\t\tgl_Position = clip;\n\n\t\t\t#include <logdepthbuf_vertex>\n\n\t\t\tvec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation\n\n\t\t}\n\t\t",
        fragmentShader: "\n\t\tuniform vec3 diffuse;\n\t\tuniform float opacity;\n\t\tuniform vec2 repeat;\n\t\tuniform vec2 offset;\n\t\tuniform float miny;\n\t\tuniform vec3 pcolor;\n\t\tuniform float usePassOpacity;\n\t\tuniform float passOpacity;\n\t  #include <line_gradient_defined>\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashSize;\n\t\t\tuniform float gapSize;\n\n\t\t#endif\n\n\t\t\tuniform sampler2D mmap;\n\n\t\tvarying float vLineDistance;\n\n\t\t#include <common>\n\t\t#include <color_pars_fragment>\n\n\t\tvarying float uvScale;\n\t\tvarying vec2 vUv;\n\t\tvarying vec2 vUv2;\n\n\t\t#include <logdepthbuf_pars_fragment>\n\n\t\tvoid main() {\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tif ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps\n\n\t\t\t\tif ( mod( vLineDistance, dashSize + gapSize ) > dashSize ) discard; // todo - FIX\n\n\t\t\t#endif\n\n\t\t\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\t#ifdef USE_MMAP\n\n\t\t\t\tif(vUv2.y >= miny && miny != 1.0){\n\t\t\t\t    vec4 texColor = texture2D( mmap, vUv2 * repeat + offset );\n\t\t\t\t\tdiffuseColor = vec4(texColor.xyz,min(texColor.w, opacity));\n\t\t\t\t}else{\n\t\t\t\t\tfloat ret = opacity;\n\t\t\t\t\tif(usePassOpacity == 1.0) {\n\t\t\t\t\t\tret = passOpacity;\n\t\t\t\t\t}\n\t\t\t\t\tdiffuseColor = vec4(pcolor, ret);\n\n\t\t\t\t\tif(usePassOpacity == 1.0 && ret < 0.1) {\n\t\t\t\t\t\tdiscard;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t#endif\n\n\t\t\t#include <line_gradient>\n\n\t\t\tgl_FragColor = diffuseColor;\n\t\t\t#include <encodings_fragment>\n\t\t}\n\t\t"
    }, ((Dl.prototype = Object.create(Ur.prototype)).constructor = Dl).prototype.isFMLineMaterial = !0, 
    Dl.prototype.copy = function(t) {
        return Ur.prototype.copy.call(this, t), this.color.copy(t.color), this.lineWidth = t.lineWidth, 
        this.resolution = t.resolution, this;
    };
    var kl = Dl;
    function Cl(t) {
        Cr.call(this), this.type = "SpriteMaterial", this.color = new Xt(16777215), this.map = null, 
        this.alphaMap = null, this.rotation = 0, this.sizeAttenuation = !0, this.transparent = !0, 
        this.setValues(t);
    }
    function Nl(t) {
        Cr.call(this), this.type = "LineBasicMaterial", this.color = new Xt(16777215), this.linewidth = 1, 
        this.linecap = "round", this.linejoin = "round", this.setValues(t);
    }
    function Fl(t) {
        Ur.call(this, t), this.type = "RawShaderMaterial";
    }
    function Bl(t) {
        return (Bl = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Ul(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Bl(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Bl(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Bl(t) ? t : String(t);
            }(r.key), r);
        }
    }
    ((Cl.prototype = Object.create(Cr.prototype)).constructor = Cl).prototype.isSpriteMaterial = !0, 
    Cl.prototype.copy = function(t) {
        return Cr.prototype.copy.call(this, t), this.color.copy(t.color), this.map = t.map, 
        this.alphaMap = t.alphaMap, this.rotation = t.rotation, this.sizeAttenuation = t.sizeAttenuation, 
        this;
    }, ((Nl.prototype = Object.create(Cr.prototype)).constructor = Nl).prototype.isLineBasicMaterial = !0, 
    Nl.prototype.copy = function(t) {
        return Cr.prototype.copy.call(this, t), this.color.copy(t.color), this.linewidth = t.linewidth, 
        this.linecap = t.linecap, this.linejoin = t.linejoin, this;
    }, ((Fl.prototype = Object.create(Ur.prototype)).constructor = Fl).prototype.isRawShaderMaterial = !0;
    It = function(t, e, n) {
        return e && Ul(t.prototype, e), n && Ul(t, n), Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }(function t() {
        if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
        this.Ba = !1, this.Ha = new Map(), this.za = new Map();
    });
    var zl = (Object.assign(It.prototype, {
        Va: function(t, e) {
            this.za.has(t) || this.za.set(t, new Set()), this.za.get(t).add(e);
        },
        Wa: function() {
            this.Ha.clear(), this.Ha = null, this.za.clear(), this.za = null;
        }
    }), It);
    function Gl(t) {
        return (Gl = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Hl(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Gl(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Gl(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Gl(t) ? t : String(t);
            }(r.key), r);
        }
    }
    var Vl = function() {
        function t() {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
        }
        var e, n;
        return e = t, n = [ {
            key: "getBrowser",
            value: function() {
                if (void 0 !== navigator) {
                    var t, e, n, r, i, o, a = navigator.userAgent;
                    if (void 0 !== a) return t = -1 < a.indexOf("Opera"), o = -1 < a.indexOf("compatible") && -1 < a.indexOf("MSIE") && !t, 
                    e = -1 < a.indexOf("Edge"), n = -1 < a.indexOf("Firefox"), r = -1 < a.indexOf("Safari") && -1 === a.indexOf("Chrome"), 
                    i = -1 < a.indexOf("Chrome") && -1 < a.indexOf("Safari"), o ? (new RegExp("MSIE (\\d+\\.\\d+);").test(a), 
                    7 === (o = parseFloat(RegExp.$1)) ? "IE7" : 8 === o ? "IE8" : 9 === o ? "IE9" : 10 === o ? "IE10" : 11 === o ? "IE11" : "IE") : t ? "Opera" : e ? "Edge" : n ? "FF" : r ? "Safari" : i ? "Chrome" : void 0;
                }
            }
        } ], null && Hl(e.prototype, null), n && Hl(e, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }().getBrowser();
    function Wl(t) {
        return (Wl = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Yl(t, e, n) {
        e = Xl(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], Xl(t).constructor) : e.apply(t, n)) && ("object" === Wl(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function Xl(t) {
        return (Xl = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function Zl(t, e) {
        return (Zl = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    It = function() {
        var t = n, e = zl;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n() {
            var t;
            if (this instanceof n) return (t = Yl(this, n)).Ya = 0, t.Xa = 0, t.Za = new Map(), 
            t;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && Zl(t, e), t = n, Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }(), Object.assign(It.prototype, {
        qa: function(t, e, n) {
            var r;
            return this.Ha.has(t) ? (r = this.Ha.get(t), e && (r.isComplete ? r.isError ? e(null) : e(r) : this.Va(t, e))) : r = this.Ja(t, e, n), 
            r;
        },
        Ja: function(t, e, n) {
            var r, i = this;
            return this.Ya++, (r = jt.a.environment === Ut.a.WX ? jt.a.textureHelper.createImage(n) : new Image()).crossOrigin = "Anonymous", 
            r.onload = "IE11" === Vl ? new function() {
                this.Xa++, r.isComplete = !0, i.Ka(t, r);
            }() : function() {
                i.Xa++, r.isComplete = !0, i.Ka(t, r);
            }, r.onerror = function(e) {
                i.Xa++, r.isComplete = !0, r.isError = !0, i.Ka(t, null);
            }, r.src = t, r.isComplete = !1, this.Ha.set(t, r), e && this.Va(t, e), r;
        },
        Ka: function(t, e) {
            this.za.has(t) && (this.za.get(t).forEach(function(t, n, r) {
                n(e), r.delete(t);
            }), this.za.delete(t)), 0 < this.Za.size && this.Ya === this.Xa && this.Za.forEach(function(t, e) {
                t(e);
            });
        },
        Wa: function() {
            this.Ha.clear(), this.za.clear();
        }
    });
    var ql = new It(), Kl = {
        Left: 0,
        Center: 2,
        Right: 4
    };
    function Jl(t) {
        return (Jl = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Ql(t, e) {
        (null == e || e > t.length) && (e = t.length);
        for (var n = 0, r = new Array(e); n < e; n++) r[n] = t[n];
        return r;
    }
    function $l(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Jl(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Jl(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Jl(t) ? t : String(t);
            }(r.key), r);
        }
    }
    It = function(t, e, n) {
        return e && $l(t.prototype, e), n && $l(t, n), Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }(function t(e) {
        if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
        this.Fr = e;
    });
    var tu = (Object.assign(It.prototype, {
        Qa: function(t, e) {
            var n = jt.a.document.createElement("canvas"), r = n.getContext("2d");
            return n.width = t, n.height = e, n.style.width = t + "px", n.style.height = e + "px", 
            {
                canvas: n,
                ctx: r
            };
        },
        $a: function(t, e, n, r, i) {
            var o = i, a = {
                x: i.x + e,
                y: i.y
            }, s = {
                x: i.x,
                y: i.y + n
            }, l = (e = {
                x: i.x + e,
                y: i.y + n
            }, i = {
                x: o.x + r,
                y: o.y
            }, n = {
                x: a.x - r,
                y: a.y
            }, {
                x: a.x,
                y: a.y + r
            }), u = {
                x: e.x,
                y: e.y - r
            }, c = {
                x: e.x - r,
                y: e.y
            }, h = {
                x: s.x + r,
                y: s.y
            }, f = {
                x: s.x,
                y: s.y - r
            }, p = {
                x: o.x,
                y: o.y + r
            };
            t.beginPath(), t.moveTo(i.x, i.y), t.lineTo(n.x, n.y), t.arcTo(a.x, a.y, l.x, l.y, r), 
            t.lineTo(u.x, u.y), t.arcTo(e.x, e.y, c.x, c.y, r), t.lineTo(h.x, h.y), t.arcTo(s.x, s.y, f.x, f.y, r), 
            t.lineTo(p.x, p.y), t.arcTo(o.x, o.y, i.x, i.y, r), t.closePath();
        },
        tu: function(t, e, n, r) {
            var i, o, a, s, l, u = null != (u = r.scale) ? u : 2, c = 1, h = void 0 !== r.needSize && r.needSize, f = n.fontsize * u * 1.2, p = void 0 !== n.fontWeight ? n.fontWeight : 400, d = this.nu(r.family, n.fontFamily), y = 2 * u, m = 0, v = 0, g = (p = "".concat(p, " ").concat(f, "px ").concat(d), 
            d = void 0 !== n.space ? n.space * u : 2 * u, 0), b = (void 0 !== n.plateSize && (g = (n.plateSize - n.fontsize) / 2 * u), 
            g = Math.max(g, 3 * u), f / 3), x = [], w = 0 * u, S = 0 * u, _ = jt.a.document.createElement("canvas"), E = _.getContext("2d"), O = (E.font = p, 
            E.textBaseline = "Alphabetic", 1.2 * n.fontsize * u), M = (void 0 !== n.imageSize && (O = 1.2 * n.imageSize * u), 
            e && 0 != O || (d = O = 0), -1 < t.indexOf("%rn%"));
            if (M) {
                var T, L = function(t, e) {
                    var n, r, i, o, a = "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"];
                    if (a) return r = !(n = !0), {
                        s: function() {
                            a = a.call(t);
                        },
                        n: function() {
                            var t = a.next();
                            return n = t.done, t;
                        },
                        e: function(t) {
                            r = !0, i = t;
                        },
                        f: function() {
                            try {
                                n || null == a.return || a.return();
                            } finally {
                                if (r) throw i;
                            }
                        }
                    };
                    if (Array.isArray(t) || (a = function(t, e) {
                        var n;
                        if (t) return "string" == typeof t ? Ql(t, e) : "Map" === (n = "Object" === (n = Object.prototype.toString.call(t).slice(8, -1)) && t.constructor ? t.constructor.name : n) || "Set" === n ? Array.from(t) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? Ql(t, e) : void 0;
                    }(t)) || e && t && "number" == typeof t.length) return a && (t = a), o = 0, {
                        s: e = function() {},
                        n: function() {
                            return o >= t.length ? {
                                done: !0
                            } : {
                                done: !1,
                                value: t[o++]
                            };
                        },
                        e: function(t) {
                            throw t;
                        },
                        f: e
                    };
                    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
                }(x = t.split("%rn%"));
                try {
                    for (L.s(); !(T = L.n()).done; ) {
                        var A = T.value;
                        m = Math.max(E.measureText(A).width + y, m);
                        v += f;
                    }
                } catch (t) {
                    L.e(t);
                } finally {
                    L.f();
                }
                v += x.length * y;
            } else m = E.measureText(t).width + y, v = f + y;
            if (i = Math.ceil(v) + 2 * g, a = 2 * S + O + d + (o = Math.ceil(m) + 2 * g), s = 2 * w + Math.max(i, O), 
            n.plateStrokeColor && (a += 2 * u, s += 2 * u), !0 === r.onlyNeedSize) return {
                width: a,
                height: s
            };
            l = M ? v / x.length / 2 + b + w + g : s / 2 + b, M && (c = s / (f + 2 * w + 2 * g)), 
            _.width = a, _.height = s, _.style.width = a + "px", _.style.height = s + "px", 
            _.spriteScale = c, E.font = p, jt.a.environment === Ut.a.WX && (E.shadowOffsetX = 0, 
            E.shadowOffsetY = 0, E.shadowBlur = 0, E.shadowColor = "rgba(0,0,0,0.0)"), E.clearRect(0, 0, _.width, _.height), 
            (n.plateColor || n.plateStrokeColor) && (n.plateColor && (E.fillStyle = n.plateColor), 
            E.lineWidth = u, this.$a(E, o, i, 5 * u, {
                x: O + S + d,
                y: s / 2 - i / 2
            }), n.plateColor && E.fill(), n.plateStrokeColor && (E.strokeStyle = n.plateStrokeColor, 
            E.stroke()), E.beginPath()), e && E.drawImage(e, S, (s - O) / 2, O, O);
            var P = O + S + d + g + y / 2;
            E.lineWidth = 2 * u * (void 0 !== n.strokeWidth ? n.strokeWidth : 1), b = 1;
            if (void 0 !== n.strokeWidth && (b = parseFloat(n.strokeWidth)), n.strokeColor && 0 !== b) if (E.strokeStyle = n.strokeColor, 
            M) for (var R = l, j = 0; j < x.length; j++) j && (R += f + y), e ? (E.textAlign = "left", 
            E.strokeText(x[j], P, R)) : r.textAlign === Kl.Left ? (E.textAlign = "left", E.strokeText(x[j], 0, R)) : r.textAlign === Kl.Right ? (E.textAlign = "right", 
            E.strokeText(x[j], a, R)) : (E.textAlign = "center", E.strokeText(x[j], a / 2, R)); else e ? (E.textAlign = "left", 
            E.strokeText(t, P, l)) : r.textAlign === Kl.Left ? E.strokeText(t, 0, l) : r.textAlign === Kl.Right ? (E.textAlign = "right", 
            E.strokeText(t, a, l)) : (E.textAlign = "center", E.strokeText(t, a / 2, l));
            if (E.fillStyle = n.fillColor, M || !1 === r.drawText) {
                if (!1 !== r.drawText) for (var I = l, D = 0; D < x.length; D++) D && (I += f + y), 
                e ? (E.textAlign = "left", E.fillText(x[D], P, I)) : r.textAlign === Kl.Left ? (E.textAlign = "left", 
                E.fillText(x[D], 0, I)) : r.textAlign === Kl.Right ? (E.textAlign = "right", E.fillText(x[D], a, I)) : (E.textAlign = "center", 
                E.fillText(x[D], a / 2, I));
            } else e ? (E.textAlign = "left", E.fillText(t, P, l)) : r.textAlign === Kl.Left ? (E.textAlign = "left", 
            E.fillText(t, 0, l)) : r.textAlign === Kl.Right ? (E.textAlign = "right", E.fillText(t, a, l)) : (E.textAlign = "center", 
            E.fillText(t, a / 2, l));
            return c = 0, h && (c = M ? n.fontsize + (y * (x.length - 1) + w + g) / x.length : n.fontsize + w + g, 
            _.size = c), _.drawTextWidth = m, _.drawTextLeft = P, _;
        },
        eu: function(t) {
            var e, n = t.width, r = t.height, i = t.arrowWidth || 10, o = (e = this.Qa(n, r)).canvas, a = ((e = e.ctx).fillStyle = t.godEdgeColor, 
            e.fillRect(0, 0, n, r), n * (1 - t.godEdgePercent));
            e.fillStyle = t.godColor, e.fillRect((n - a) / 2, 0, a, r), e.fillStyle = "#ffffff", 
            e.shadowOffsetX = -2, e.shadowOffsetY = 2, e.shadowBlur = 4, e.shadowColor = "rgba(0,0,0,0.5)";
            n /= 2;
            var s = r / 2;
            r *= t.godArrowPercent, n -= (a = a * t.godArrowWidthPercent) / 2, s += r / 2;
            return e.beginPath(), e.moveTo(n, s), e.lineTo(n, s + i), e.lineTo(n + a / 2, s - r + i), 
            e.lineTo(n + a, s + i), e.lineTo(n + a, s), e.lineTo(n + a / 2, s - r), e.closePath(), 
            e.fillStyle = t.godArrowColor, e.fill(), o;
        },
        iu: function(t) {
            var e = t.width, n = t.height, r = (i = this.Qa(e, n)).canvas, i = i.ctx, o = (e = (this.ru(i, e, n), 
            t.height * t.arrowHeightPercent), n = (1 - t.arrowHeightPercent) * t.height / 2, 
            t.width * (t.arrowWidthPercent - t.arrowPercent));
            return i.beginPath(), i.moveTo(0, n), i.lineTo(o, n), i.lineTo(t.width * t.arrowWidthPercent, n + e / 2), 
            i.lineTo(o, n + e), i.lineTo(0, n + e), i.lineTo(t.width * t.arrowPercent, n + e / 2), 
            i.closePath(), i.fillStyle = t.color, i.fill(), r;
        },
        ru: function(t, e, n) {
            var r = new O(), i = (r.set(Math.cos(Math.PI / 2), -Math.sin(Math.PI / 2), +e / 2, Math.sin(Math.PI / 2), Math.cos(Math.PI / 2), +n / 2, 0, 0, 1), 
            new O());
            i.set(1, 0, -e / 2, 0, 1, -n / 2, 0, 0, 1), r.multiply(i), e = r.elements;
            t.transform(e[0], e[3], e[1], e[4], e[2], e[6]);
        },
        ou: function(t) {
            var e = t.width, n = t.height, r = t.dashArray, i = this.Qa(e, n), o = i.canvas, a = i.ctx, s = (this.ru(a, e, n), 
            r.reduce(function(t, e) {
                return t + e;
            })), l = 0;
            return r.forEach(function(e, n) {
                n % 2 == 0 && (a.fillStyle = t.color, a.fillRect(l / s * t.width, 0, e / s * t.width, t.height)), 
                l += e;
            }), o;
        },
        nu: function(t, e) {
            var n = this.Fr.ui.ze.fontFamily;
            return void 0 !== t ? t + "," + n : void 0 !== e && '"Microsoft Yahei","",Tahoma,Arial' === n ? e : n;
        },
        tn: function() {}
    }), It);
    function eu(t) {
        return (eu = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function nu(t, e, n) {
        e = ru(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], ru(t).constructor) : e.apply(t, n)) && ("object" === eu(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function ru(t) {
        return (ru = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function iu(t, e) {
        return (iu = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    It = function() {
        var t = n, e = zl;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n() {
            if (this instanceof n) return nu(this, n);
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && iu(t, e), t = n, Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }();
    var ou = (Object.assign(It.prototype, {
        su: function(t) {
            var e, n = [];
            for (e in t) n.push(t[e]);
            return n.join();
        }
    }), It);
    function au(t) {
        return (au = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function su(t, e, n) {
        e = lu(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], lu(t).constructor) : e.apply(t, n)) && ("object" === au(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        return uu(r);
    }
    function lu(t) {
        return (lu = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function uu(t) {
        if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return t;
    }
    function cu(t, e) {
        return (cu = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    function hu(t) {
        Ur.call(this), this.type = "FMMeshLambertMaterial", this.uniforms = Br.clone(xi.fmLambert.uniforms), 
        this.vertexShader = xi.fmLambert.vertexShader, this.fragmentShader = xi.fmLambert.fragmentShader, 
        this.lights = !0, this.fog = !0, jl(this), Object.defineProperties(this, {
            emissive: {
                enumerable: !0,
                get: function() {
                    return this.uniforms.emissive.value;
                },
                set: function(t) {
                    this.uniforms.emissive.value = t;
                }
            },
            mapMixColor: {
                enumerable: !0,
                get: function() {
                    return this.uniforms.mapMixColor.value;
                },
                set: function(t) {
                    this.uniforms.mapMixColor.value = t;
                }
            }
        }), this.setValues(t);
    }
    It = function() {
        var t = n, e = ou;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t) {
            var e;
            if (this instanceof n) return (e = su(this, n)).ja = null, e.Mo = e.Mo.bind(uu(e)), 
            e.Gs = new Zs({
                disposeCallback: e.Mo,
                enable: !0,
                name: "TextureManager",
                mapCreateTime: t.mapCreateTime
            }), e;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && cu(t, e), t = n, Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }();
    var fu = (Object.assign(It.prototype, {
        au: function(t, e) {
            if (jt.a.environment == Ut.a.BROWSER) r = new ka(t); else {
                var n = e.paramKey, r = new Zn();
                if (e.labelImageCatch[n].image) return r.image = e.labelImageCatch[n].image, r.minFilter = mt, 
                r.generateMipmaps = !1, r.needsUpdate = !0, i = e.labelImageCatch[n].texture, r.scaleRatio = i.scaleRatio, 
                r.mspriteScale = i.mspriteScale, e.needSize && (r.size = i.size), r.needsUpdate = !0, 
                e && e.callback && e.callback(r), r.useCatch = !0, r;
                e.labelImageCatch[n].texture = {
                    scaleRatio: t.height / t.width,
                    mspriteScale: t.spriteScale,
                    size: t.size
                };
                var i = t.toDataURL("image/png");
                jt.a.textureHelper.createImage({
                    url: i,
                    onload: function(i) {
                        r.image = i, r.needsUpdate = !0, e && e.callback && e.callback(r), e.labelImageCatch[n].canvas = {
                            size: t.size,
                            spriteScale: t.spriteScale,
                            width: t.width,
                            height: t.height
                        }, e.labelImageCatch[n].image = i;
                    }
                });
            }
            return r.minFilter = mt, r.generateMipmaps = !1, r.needsUpdate = !0, r;
        },
        uu: function(t) {
            var e = new Zn();
            return e.minFilter = mt, e.generateMipmaps = !1, e.flipY = t.flipY, e;
        },
        cu: function(t, e) {
            var n, r, i = this, o = (void 0 === t.flipY && (t.flipY = !0), this.su(t));
            return this.Ha.has(o) ? this.za.has(o) ? this.Va(o, e) : e(n = this.Ha.get(o)) : (n = this.uu(t), 
            this.Ha.set(o, n), this.Va(o, e), r = "_getTexture" + s.generateUUID(), this.Gs.Ds(r), 
            ql.qa(t.url, function(t) {
                n.image = t, n.needsUpdate = !0, i.za.get(o).forEach(function(e, r, i) {
                    t && r(n), i.delete(e);
                }), i.za.delete(o), i.Gs.Is(r);
            }, {
                needDraw: t.needDraw
            })), n;
        },
        fu: function(t, e) {
            var n = this.au(t, e);
            return n.useCatch || (n.scaleRatio = t.height / t.width, n.mspriteScale = t.spriteScale, 
            e.needSize && (n.size = t.size)), n;
        },
        tn: function(t) {
            this.ja = t, this.Gs.Ps(!0);
        },
        Mo: function() {
            this.Ha.forEach(function(t, e, n) {
                t.dispose(), n.delete(e);
            }), this.Ha.clear(), this.Ha = null, this.za.forEach(function(t, e, n) {
                t.forEach(function(t, e, n) {
                    n.delete(e);
                }), n.delete(e);
            }), this.za.clear(), this.za = null, this.ja && this.ja({
                name: "TextureManager"
            });
        }
    }), It), pu = (Il(Kn), xi.fmLambert = {
        uniforms: Br.merge([ Kn.fmcommon, Kn.lights, {
            emissive: {
                value: new Xt(0)
            },
            mapMixColor: {
                value: !1
            },
            fogColor: {
                value: new Xt(0)
            },
            fogDensity: {
                value: 0
            },
            isMask: {
                value: !1
            },
            maskType: {
                value: 0
            },
            maskTexture: {
                value: null
            },
            maskHeight: {
                value: 0
            },
            maskExtrudeHeight: {
                value: -1
            }
        } ]),
        vertexShader: "\n#define LAMBERT\n\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\nvarying vec2 vUvMask;\nvarying vec3 v_positionMask;\nvarying float v_positionHeight;\n\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n \n#include <common>             \n#include <uv_pars_vertex>     \n#include <bsdfs>              \n#include <lights_pars_begin>  \n#include <logdepthbuf_pars_vertex>\n#include <fog_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>    \n\tvUvMask=uv;\n\tv_positionMask = vec3(modelMatrix * vec4( position, 1.0 ));\n\tv_positionHeight = vec3(modelMatrix*vec4(0.0,0.0,0.0,1.0)).y;\n\t#include <beginnormal_vertex>    \n\t#include <morphnormal_vertex>    \n\t#include <defaultnormal_vertex>  \n\n\t#include <begin_vertex>            \n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>   \n\t#include <clipping_planes_vertex>      \n\t\n\t#include <worldpos_vertex>        \n\t#include <lights_lambert_vertex>  \n\t#include <fog_vertex>\n\t\n}\n",
        fragmentShader: "\nuniform bool mapMixColor;\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\nuniform bool isMask;\nuniform float maskType;\nuniform sampler2D maskTexture;\nuniform float maskHeight;\nuniform float maskExtrudeHeight;\nvarying vec2 vUvMask;\nvarying vec3 v_positionMask;\nvarying float v_positionHeight;\n\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n\n\n#include <common>                    \n#include <packing>                  \n#include <uv_pars_fragment>        \n#include <map_pars_fragment>         \n#include <bsdfs>                        \n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>       \n#include <fog_pars_fragment>   \n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif(isMask){\n\t\tvec4 maskColor=texture2D(maskTexture,vUvMask);\n\t\tif(maskType==0.0){\n\t\t\tif(maskColor.r==1.0&&maskColor.g==1.0&&maskColor.b==1.0){\n\t\t\t\tif(maskExtrudeHeight>0.0){\n\t\t\t\t\tif(v_positionMask.y >= v_positionHeight + maskHeight && v_positionMask.y <= v_positionHeight + maskHeight+maskExtrudeHeight){\n\t\t\t\t\t\tdiscard;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tdiscard;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t} else {\n\t\t\tif(maskColor.r==0.0&&maskColor.g==0.0&&maskColor.b==0.0){\n\t\t\t\tif(maskExtrudeHeight>0.0){\n\t\t\t\t\tif(v_positionMask.y >= v_positionHeight + maskHeight && v_positionMask.y <= v_positionHeight + maskHeight+maskExtrudeHeight){\n\t\t\t\t\t\tdiscard;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tdiscard;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n    #include <logdepthbuf_fragment>\n\t#include <map_fragment_1>     \n\t  \n\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\n\t#endif\n\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\n\t#else\n\n\t\treflectedLight.directDiffuse = vLightFront;\n\n\t#endif\n\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <fog_fragment>  \n}\n"
    }, ((hu.prototype = Object.create(Ur.prototype)).constructor = hu).prototype.isFMMeshLambertMaterial = !0, 
    hu.prototype.copy = function(t) {
        return Rl(this, t);
    }, hu);
    function du(t) {
        Ur.call(this), this.type = "FMMeshBasicMaterial", this.uniforms = Br.clone(xi.fmBasic.uniforms), 
        this.vertexShader = xi.fmBasic.vertexShader, this.fragmentShader = xi.fmBasic.fragmentShader, 
        jl(this), this.setValues(t);
    }
    function yu(t) {
        return (yu = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function mu(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != yu(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != yu(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == yu(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function vu(t, e, n) {
        e = gu(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], gu(t).constructor) : e.apply(t, n)) && ("object" === yu(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function gu(t) {
        return (gu = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function bu(t, e) {
        return (bu = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    Il(Kn), xi.fmBasic = {
        uniforms: Br.merge([ Kn.fmcommon, {
            isMask: {
                value: !1
            },
            maskType: {
                value: 0
            },
            maskTexture: {
                value: null
            },
            maskHeight: {
                value: 0
            },
            maskExtrudeHeight: {
                value: -1
            },
            boundCenter: {
                value: new Mt(0, 0)
            },
            boundSize: {
                value: new Mt(0, 0)
            }
        } ]),
        vertexShader: "\n#include <common> \n#include <uv_pars_vertex> \n#include <logdepthbuf_pars_vertex>\n#include <fog_pars_vertex>\nvarying vec2 vUvMask;\nvarying vec3 v_positionMask;\nvarying float v_positionHeight;\n\nvoid main() {\n\n\t#include <uv_vertex> \n\n\tvUvMask=uv;\n\tv_positionMask = vec3(modelMatrix * vec4( position, 1.0 ));\n\tv_positionHeight = vec3(modelMatrix*vec4(0.0,0.0,0.0,1.0)).y;\n\n\t#include <begin_vertex>       \n\t#include <project_vertex>   \n\t#include <logdepthbuf_vertex>     \n\n\t#include <worldpos_vertex>    \n\t#include <fog_vertex>\n}\n",
        fragmentShader: "\nuniform vec3 diffuse;\nuniform float opacity;\n\nuniform bool isMask;\nuniform float maskType;\nuniform sampler2D maskTexture;\nuniform float maskHeight;\nuniform float maskExtrudeHeight;\nuniform vec2 boundCenter;\nuniform vec2 boundSize;\nvarying vec2 vUvMask;\nvarying vec3 v_positionMask;\nvarying float v_positionHeight;\n\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>                \n#include <uv_pars_fragment>       \n#include <map_pars_fragment>   \n#include <logdepthbuf_pars_fragment>       \n#include <fog_pars_fragment>     \n \n\nvoid main() {\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tif(isMask){\n\t\tvec2 uvMesk=vec2((v_positionMask.x -  (boundCenter.x - boundSize.x/2.0)) / boundSize.x , (v_positionMask.z - (boundCenter.y-boundSize.y/2.0)) / boundSize.y);\n\t\tvec4 maskColor=texture2D(maskTexture,uvMesk);\n\t\tif(maskType==0.0){\n\t\t\tif(maskColor.r==1.0&&maskColor.g==1.0&&maskColor.b==1.0){\n\t\t\t\tif(maskExtrudeHeight>0.0){\n\t\t\t\t\tif(v_positionMask.y >= v_positionHeight + maskHeight && v_positionMask.y <= v_positionHeight + maskHeight+maskExtrudeHeight){\n\t\t\t\t\t\tdiscard;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tdiscard;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t} else {\n\t\t\tif(maskColor.r==0.0&&maskColor.g==0.0&&maskColor.b==0.0){\n\t\t\t\tif(maskExtrudeHeight>0.0){\n\t\t\t\t\tif(v_positionMask.y >= v_positionHeight + maskHeight && v_positionMask.y <= v_positionHeight + maskHeight+maskExtrudeHeight){\n\t\t\t\t\t\tdiscard;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tdiscard;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t#include <map_fragment>    \n\t#include <logdepthbuf_fragment>\n\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\n\t#ifdef USE_LIGHTMAP\n\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\n\t#endif\n\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <fog_fragment>  \n \n}\n"
    }, ((du.prototype = Object.create(Ur.prototype)).constructor = du).prototype.isFMMeshBasicMaterial = !0, 
    du.prototype.copy = function(t) {
        return Ur.prototype.copy.call(this, t), this.fragmentShader = t.fragmentShader, 
        this.vertexShader = t.vertexShader, this.uniforms = Br.clone(t.uniforms), this;
    };
    var xu = Br.merge([ {
        sweepW: {
            value: 0
        },
        sweepH: {
            value: 0
        },
        se2N: {
            value: new Mt(0, 0)
        },
        se2RN: {
            value: new Mt(0, 0)
        },
        moveP: {
            value: new Mt(0, 0)
        },
        color_r: {
            value: new Xt(16711935)
        },
        color_a: {
            value: new Xt(16776960)
        },
        isRect: {
            value: !1
        },
        isAnnulus: {
            value: !1
        },
        isEnable: {
            value: !1
        },
        circleC: {
            value: new Mt(0, 0)
        },
        maxR: {
            value: 0
        },
        minR: {
            value: 0
        },
        isSweepTexture: {
            value: !1
        },
        sweepTexture: {
            value: null
        },
        sweepStrength: {
            value: 1
        },
        isMask: {
            value: !1
        },
        maskType: {
            value: 0
        },
        maskTexture: {
            value: null
        },
        maskHeight: {
            value: 0
        },
        maskExtrudeHeight: {
            value: -1
        },
        boundCenter: {
            value: new Mt(0, 0)
        },
        boundSize: {
            value: new Mt(0, 0)
        }
    }, xi.standard.uniforms, {
        clearcoat: {
            value: 0
        },
        clearcoatMap: {
            value: null
        },
        clearcoatRoughness: {
            value: 0
        },
        clearcoatRoughnessMap: {
            value: null
        },
        clearcoatNormalScale: {
            value: new Mt(1, 1)
        },
        clearcoatNormalMap: {
            value: null
        },
        sheen: {
            value: new Xt(0)
        },
        transparency: {
            value: 0
        }
    } ]), wu = ((It = function() {
        var t = n, e = Ur;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n() {
            var t;
            if (this instanceof n) return (t = vu(this, n)).type = "FMMeshStandardMaterial", 
            t.uniforms = Br.clone(xu), t.vertexShader = "\n    #define STANDARD\n    \n    varying vec3 vViewPosition;\n    varying vec3 v_position;\n\n    varying float v_positionHeight;\n    \n    #ifndef FLAT_SHADED\n\n        varying vec3 vNormal;\n    \n        #ifdef USE_TANGENT\n    \n            varying vec3 vTangent;\n            varying vec3 vBitangent;\n    \n        #endif\n    \n    #endif\n    \n    #include <common>\n    #include <uv_pars_vertex>\n    #include <uv2_pars_vertex>\n    #include <displacementmap_pars_vertex>\n    #include <color_pars_vertex>\n    #include <fog_pars_vertex>\n    #include <morphtarget_pars_vertex>\n    #include <skinning_pars_vertex>\n    #include <shadowmap_pars_vertex>\n    #include <logdepthbuf_pars_vertex>\n    #include <clipping_planes_pars_vertex>\n\n    void main() {\n      \t#include <uv_vertex>\n        #include <uv2_vertex>\n        #include <color_vertex>\n    \n        #include <beginnormal_vertex>\n        #include <morphnormal_vertex>\n        #include <skinbase_vertex>\n        #include <skinnormal_vertex>\n        #include <defaultnormal_vertex>\n        \n        #ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n        \n            vNormal = normalize( transformedNormal );\n        \n            #ifdef USE_TANGENT\n        \n                vTangent = normalize( transformedTangent );\n                vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n        \n            #endif\n        \n        #endif\n        \n        #include <begin_vertex>\n        #include <morphtarget_vertex>\n        #include <skinning_vertex>\n        #include <displacementmap_vertex>\n        #include <project_vertex>\n        #include <logdepthbuf_vertex>\n        #include <clipping_planes_vertex>\n    \n        vViewPosition = - mvPosition.xyz;\n    \n        vec4 pos = vec4(position, 1.0);\n        v_position = vec3(modelMatrix * vec4( position, 1.0 ));\n\n        v_positionHeight = vec3(modelMatrix*vec4(0.0,0.0,0.0,1.0)).y;\n    \n        #include <worldpos_vertex>\n        #include <shadowmap_vertex>\n        #include <fog_vertex>\n    }\n ", 
            t.fragmentShader = "\n\n\n\t#define STANDARD\n\n\t#ifdef PHYSICAL\n\t\t#define REFLECTIVITY\n\t\t#define CLEARCOAT\n\t\t#define TRANSPARENCY\n\t#endif\n\n\tvarying vec3 v_position;\n\tvarying vec2 vUvMask;\n    varying float v_positionHeight;\n\n\tuniform bool isRect;\n\tuniform bool isAnnulus;\n\n\tuniform float sweepW;\n\tuniform float sweepH;\n\tuniform vec2 se2N;\n\tuniform vec2 se2RN;\n\tuniform vec2 moveP;\n\tuniform vec3 color_r;\n\n\tuniform vec2 circleC;\n\tuniform float maxR;\n\tuniform float minR;\n\tuniform vec3 color_a;\n\n\tuniform bool isSweepTexture;\n\tuniform sampler2D sweepTexture;\n\tuniform float sweepStrength;\n\n\tuniform bool isMask;\n\tuniform float maskType;\n\tuniform sampler2D maskTexture;\n\tuniform float maskHeight;\n\tuniform float maskExtrudeHeight;\n\tuniform vec2 boundCenter;\n\tuniform vec2 boundSize;\n\n\tbool isInRectW(vec2 v, vec2 a, float w){\n\t\tfloat a1 = abs(dot(v,a));\n\t\treturn a1 < w;\n\t}\n\tbool isInRectH(vec2 v, vec2 a, float h){\n\t\tfloat a1 = abs(dot(v,a));\n\t\treturn a1 < h;\n\t}\n\n\tbool isMaxCircle(vec3 a, vec2 b, float r){\n\t\tfloat c = pow((a.x-b.x),2.0)+pow((a.z-b.y),2.0);\n\t\treturn c <= pow(r,2.0);\n\t}\n\n\tbool isMinCircle(vec3 a, vec2 b, float r){\n\t\tfloat c = pow((a.x-b.x),2.0)+pow((a.z-b.y),2.0);\n\t\treturn c > pow(r,2.0);\n\t}\n\n\tuniform vec3 diffuse;\n\tuniform vec3 emissive;\n\tuniform float roughness;\n\tuniform float metalness;\n\tuniform float opacity;\n\tuniform bool isEnable;\n\n\t#ifdef TRANSPARENCY\n\t\tuniform float transparency;\n\t#endif\n\n\t#ifdef REFLECTIVITY\n\t\tuniform float reflectivity;\n\t#endif\n\n\t#ifdef CLEARCOAT\n\t\tuniform float clearcoat;\n\t\tuniform float clearcoatRoughness;\n\t#endif\n\n\t#ifdef USE_SHEEN\n\t\tuniform vec3 sheen;\n\t#endif\n\n\tvarying vec3 vViewPosition;\n\n\t#ifndef FLAT_SHADED\n\n\t\tvarying vec3 vNormal;\n\n\t\t#ifdef USE_TANGENT\n\n\t\t\tvarying vec3 vTangent;\n\t\t\tvarying vec3 vBitangent;\n\n\t\t#endif\n\n\t#endif\n\n\t#include <common>\n\t#include <packing>\n\t#include <dithering_pars_fragment>\n\t#include <color_pars_fragment>\n\t#include <uv_pars_fragment>\n\t#include <uv2_pars_fragment>\n\t#include <map_pars_fragment>\n\t#include <alphamap_pars_fragment>\n\t#include <aomap_pars_fragment>\n\t#include <lightmap_pars_fragment>\n\t#include <emissivemap_pars_fragment>\n\t#include <bsdfs>\n\t#include <cube_uv_reflection_fragment>\n\t#include <envmap_common_pars_fragment>\n\t#include <envmap_physical_pars_fragment>\n\t#include <fog_pars_fragment>\n\t#include <lights_pars_begin>\n\t#include <lights_physical_pars_fragment>\n\t#include <shadowmap_pars_fragment>\n\t#include <bumpmap_pars_fragment>\n\t#include <normalmap_pars_fragment>\n\t#include <clearcoat_pars_fragment>\n\t#include <roughnessmap_pars_fragment>\n\t#include <metalnessmap_pars_fragment>\n\t#include <logdepthbuf_pars_fragment>\n\t#include <clipping_planes_pars_fragment>\n\n\tvoid main() {\n\t\t#include <clipping_planes_fragment>\n\t\tif(isMask){\n\t\t\tvec2 uvMesk=vec2((v_position.x -  (boundCenter.x - boundSize.x/2.0)) / boundSize.x , (v_position.z - (boundCenter.y-boundSize.y/2.0)) / boundSize.y);\n\t\t\tvec4 maskColor=texture2D(maskTexture,uvMesk);\n\t\t\tif(maskType==0.0){\n\t\t\t\tif(maskColor.r==1.0&&maskColor.g==1.0&&maskColor.b==1.0){\n\t\t\t\t\tif(maskExtrudeHeight>0.0){\n\t\t\t\t\t\tif(v_position.y >= v_positionHeight + maskHeight && v_position.y <= v_positionHeight + maskHeight+maskExtrudeHeight){\n\t\t\t\t\t\t\tdiscard;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdiscard;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif(maskColor.r==0.0&&maskColor.g==0.0&&maskColor.b==0.0){\n\t\t\t\t\tif(maskExtrudeHeight>0.0){\n\t\t\t\t\t\tif(v_position.y >= v_positionHeight + maskHeight && v_position.y <= v_positionHeight + maskHeight+maskExtrudeHeight){\n\t\t\t\t\t\t\tdiscard;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdiscard;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\t\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t\tvec3 totalEmissiveRadiance = emissive;\n\n\t\t#include <logdepthbuf_fragment>\n\t\t#include <map_fragment>\n\t\t#include <color_fragment>\n\t\t#include <alphamap_fragment>\n\t\t#include <alphatest_fragment>\n\t\t#include <roughnessmap_fragment>\n\t\t#include <metalnessmap_fragment>\n\t\t#include <normal_fragment_begin>\n\t\t#include <normal_fragment_maps>\n\t\t#include <clearcoat_normal_fragment_begin>\n\t\t#include <clearcoat_normal_fragment_maps>\n\t\t#include <emissivemap_fragment>\n\n\t\t// accumulation\n\t\t#include <lights_physical_fragment>\n\t\t#include <lights_fragment_begin>\n\t\t#include <lights_fragment_maps>\n\t\t#include <lights_fragment_end>\n\n\t\t// modulation\n\t\t#include <aomap_fragment>\n\n\t\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t\t// this is a stub for the transparency model\n\t\t#ifdef TRANSPARENCY\n\t\t\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t\t#endif\n\n\t\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t\tif(isRect&&isEnable){\n\n\t\t\tvec2 v = vec2(v_position.x - moveP.x, v_position.z - moveP.y);\n\t\t\tif(isInRectW(v,se2N,sweepW) && isInRectH(v,se2RN,sweepH)){\n\t\t\t\tgl_FragColor = vec4(mix(gl_FragColor.rgb, sweepStrength*color_a.rgb, 0.5),gl_FragColor.a);\n\t\t\t}\n\t\t}\n\t\tif(isAnnulus&&isEnable){\n\t\t\tif(isMaxCircle(v_position.xyz,circleC,maxR) && isMinCircle(v_position.xyz,circleC,minR)){\n\t\t\t\tif(isSweepTexture){\n\t\t\t\t\tvec2 uv = vec2((v_position.x-(circleC.x-maxR))/(2.0*maxR),(v_position.z-(circleC.y-maxR))/(2.0*maxR));\n\t\t\t\t\tvec4 tex = texture2D( sweepTexture, uv );\n\t\t\t\t\ttex = mapTexelToLinear( tex );\n\t\t\t\t\tfloat d2 = pow(v_position.x-circleC.x,2.0) + pow(v_position.z-circleC.y,2.0);\n\t\t\t\t\tfloat a = smoothstep(0.0, pow(maxR,2.0), d2);\n\t\t\t\t\ta = 1.0 - a;\n\t\t\t\t\ttex.a = a;\n\t\t\t\t\tgl_FragColor = vec4(mix(gl_FragColor.rgb, sweepStrength*tex.rgb, 0.2),gl_FragColor.a);\n\t\t\t\t} else {\n\t\t\t\t\tgl_FragColor = vec4(mix(gl_FragColor.rgb, sweepStrength*color_a.rgb, 0.5),gl_FragColor.a);\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\t#include <tonemapping_fragment>\n\t\t#include <encodings_fragment>\n\t\t#include <fog_fragment>\n\t\t#include <premultiplied_alpha_fragment>\n\t\t#include <dithering_fragment>\n\t}\n", 
            t.lights = !0, t.fog = !0, t;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && bu(t, e), t = n, (e = [ {
            key: "copy",
            value: function(t) {
                return Rl(this, t);
            }
        } ]) && mu(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }()).prototype.isFMMeshStandardMaterial = !0, It);
    function Su(t) {
        return (Su = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function _u(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Su(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Su(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Su(t) ? t : String(t);
            }(r.key), r);
        }
    }
    var Eu = function() {
        function t() {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
        }
        var e, n;
        return e = t, n = [ {
            key: "setPixel",
            value: function(t) {
                var e = t.x, n = t.y, r = t.color, i = t.d;
                i[4 * (n * (t = t.width) + e) + 0] = r[0], i[4 * (n * t + e) + 1] = r[1], i[4 * (n * t + e) + 2] = r[2], 
                i[4 * (n * t + e) + 3] = r[3];
            }
        }, {
            key: "getPowerOfTwoSizeCanvas",
            value: function(t) {
                var e = s.floorPowerOfTwo(t.width), n = s.floorPowerOfTwo(t.height), r = jt.a.document.createElementNS("http://www.w3.org/1999/xhtml", "canvas");
                return r.width = e, r.height = n, r.getContext("2d").drawImage(t, 0, 0, e, n), r;
            }
        }, {
            key: "sizeCanvas",
            value: function(t, e, n) {
                var r = jt.a.document.createElementNS("http://www.w3.org/1999/xhtml", "canvas"), i = (e = (r.width = e, 
                r.height = n, r.getContext("2d")), n = r.width / 2, r.height / 2), o = Math.min(r.width / t.width, r.height / t.height), a = t.width * o;
                n -= a / 2, i -= (o = t.height * o) / 2;
                return e.clearRect(0, 0, r.width, r.height), e.drawImage(t, 0, 0, t.width, t.height, n, i, a, o), 
                r;
            }
        } ], null && _u(e.prototype, null), n && _u(e, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }();
    function Ou(t, e) {
        return function(t) {
            if (Array.isArray(t)) return t;
        }(t) || function(t, e) {
            var n = null == t ? null : "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"];
            if (null != n) {
                var r, i, o, a, s = [], l = !0, u = !1;
                try {
                    if (o = (n = n.call(t)).next, 0 === e) {
                        if (Object(n) !== n) return;
                        l = !1;
                    } else for (;!(l = (r = o.call(n)).done) && (s.push(r.value), s.length !== e); l = !0) ;
                } catch (t) {
                    u = !0, i = t;
                } finally {
                    try {
                        if (!l && null != n.return && (a = n.return(), Object(a) !== a)) return;
                    } finally {
                        if (u) throw i;
                    }
                }
                return s;
            }
        }(t, e) || Mu(t, e) || function() {
            throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
        }();
    }
    function Mu(t, e) {
        var n;
        if (t) return "string" == typeof t ? Tu(t, e) : "Map" === (n = "Object" === (n = Object.prototype.toString.call(t).slice(8, -1)) && t.constructor ? t.constructor.name : n) || "Set" === n ? Array.from(t) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? Tu(t, e) : void 0;
    }
    function Tu(t, e) {
        (null == e || e > t.length) && (e = t.length);
        for (var n = 0, r = new Array(e); n < e; n++) r[n] = t[n];
        return r;
    }
    function Lu(t, e) {
        var n, r = Object.keys(t);
        return Object.getOwnPropertySymbols && (n = Object.getOwnPropertySymbols(t), e && (n = n.filter(function(e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
        })), r.push.apply(r, n)), r;
    }
    function Au(t) {
        for (var e = 1; e < arguments.length; e++) {
            var n = null != arguments[e] ? arguments[e] : {};
            e % 2 ? Lu(Object(n), !0).forEach(function(e) {
                var r, i;
                r = t, i = n[e = e], (e = ju(e)) in r ? Object.defineProperty(r, e, {
                    value: i,
                    enumerable: !0,
                    configurable: !0,
                    writable: !0
                }) : r[e] = i;
            }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n)) : Lu(Object(n)).forEach(function(e) {
                Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(n, e));
            });
        }
        return t;
    }
    function Pu(t) {
        return (Pu = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Ru(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, ju(r.key), r);
        }
    }
    function ju(t) {
        return t = function(t, e) {
            if ("object" != Pu(t) || !t) return t;
            var n = t[Symbol.toPrimitive];
            if (void 0 === n) return String(t);
            if ("object" != Pu(n = n.call(t, e))) return n;
            throw new TypeError("@@toPrimitive must return a primitive value.");
        }(t, "string"), "symbol" == Pu(t) ? t : String(t);
    }
    It = function() {
        function t(e) {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
            this.ui = e, this.hu = new tu(this), this.lu = new fu({
                mapCreateTime: this.ui.jt.du
            }), this.vu = {}, this.pu = new Map(), this.mu = new Map(), this.yu = new Map(), 
            this.bu = new Map(), this.gu = new Map(), this.wu = new Map(), this._u = {}, this.Su = {}, 
            this.ja = null, this.Mo = this.Mo.bind(this), this.Gs = new Zs({
                disposeCallback: this.Mo,
                enable: !0,
                name: "MaterialManager",
                mapCreateTime: this.ui.jt.du
            }), this.xu = null, this.Eu = {}, this.Mu();
        }
        var e, n;
        return e = t, (n = [ {
            key: "lamberMaterials",
            get: function() {
                return this.mu;
            }
        }, {
            key: "getMaterialCacheKey",
            value: function(t) {
                return this.Ou(t);
            }
        }, {
            key: "regHook",
            value: function(t, e) {
                this.Eu[t] || (this.Eu[t] = []), this.Eu[t].push(e);
            }
        }, {
            key: "callHook",
            value: function(t) {
                for (var e = arguments.length, n = new Array(1 < e ? e - 1 : 0), r = 1; r < e; r++) n[r - 1] = arguments[r];
                (t = this.Eu[t]) && t.forEach(function(t) {
                    return t.apply(void 0, n);
                });
            }
        } ]) && Ru(e.prototype, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }();
    var Iu = (Object.assign(It.prototype, {
        Tu: function(t, e) {
            this._u[e.uuid] || (this._u[e.uuid] = []), this._u[e.uuid].push(t.uuid);
        },
        ju: function(t, e) {
            var n = null == (n = this._u[e.uuid]) ? void 0 : n.indexOf(t.uuid);
            if (void 0 !== n && (-1 !== n && this._u[e.uuid].splice(n, 1), 0 === this._u[e.uuid].length)) {
                var r = [];
                if (e instanceof wu) {
                    this.gu.forEach(function(t, n) {
                        t.uuid === e.uuid && r.push(n);
                    });
                    for (var i = 0; i < r.length; i++) this.gu.delete(r[i]);
                }
                delete this._u[e.uuid];
            }
        },
        Ou: function(t) {
            var e, n = [];
            for (e in t) t[e] ? t[e].constructor === Zn ? n.push(t[e].uuid) : t[e].constructor === Mt ? (n.push(t[e].x), 
            n.push(t[e].y)) : n.push(t[e]) : n.push(t[e]);
            return n.join();
        },
        Lu: function(t, e) {
            var n = this.Ou(t);
            return this.pu.has(n) || (t = this.ku(t, e), this.pu.set(n, t)), this.pu.get(n);
        },
        ku: function(t, e) {
            var n;
            return t.isline ? new Nl({
                color: t.color,
                linewidth: 1,
                transparent: !0,
                opacity: t.opacity
            }) : (n = new du(), void 0 !== t.color && (n.color = new Xt(t.color)), void 0 !== t.opacity && (n.opacity = t.opacity), 
            void 0 !== t.url && this.lu.cu({
                url: t.url,
                flipY: t.flipY
            }, function(t) {
                t.image && (n.map = t, n.needsUpdate = !0), e && e();
            }), t = void 0 !== t.needDepth && t.needDepth, n.transparent = !0, n.depthTest = t, 
            n.depthWrite = t, n);
        },
        Au: function(t) {
            var e = this.Ou(t);
            return this.mu.has(e) || (t = this.Ru(t), this.mu.set(e, t)), this.mu.get(e);
        },
        Ir: function(t) {
            var e = this.Ou(t);
            return this.gu.has(e) || (t = this.Cu(t), this.gu.set(e, t)), this.gu.get(e);
        },
        Cu: function(t) {
            var e = new wu();
            return e.defines.USE_UV = !0, e.uniforms.diffuse.value = new Xt(t.color), e.uniforms.emissive.value = new Xt(t.emissive), 
            e.defines.USE_METALNESSMAP = t.USE_METALNESSMAP, e.defines.USE_ROUGHNESSMAP = t.USE_ROUGHNESSMAP, 
            e.uniforms.metalness.value = t.metalness, e.uniforms.metalnessMap.value = t.metalnessMap, 
            e.uniforms.roughness.value = t.roughness, e.uniforms.roughnessMap.value = t.roughnessMap, 
            e.defines.USE_NORMALMAP = t.USE_NORMALMAP, e.defines.TANGENTSPACE_NORMALMAP = t.TANGENTSPACE_NORMALMAP, 
            e.uniforms.normalScale.value = t.normalScale, e.uniforms.normalMap.value = t.normalMap, 
            e.defines.USE_EMISSIVEMAP = t.USE_EMISSIVEMAP, e.uniforms.emissiveMap.value = t.emissiveMap, 
            e.defines.USE_MAP = t.USE_MAP, e.uniforms.map.value = t.map, t.aoMap && (e.defines.USE_AOMAP = !0, 
            e.uniforms.aoMap.value = t.aoMap), e.alphaTest = t.alphaTest, e.transparent = t.transparent, 
            e.uniforms.opacity.value = t.opacity, e.skinning = t.skinning, e.side = t.side, 
            e.vertexColors = t.vertexColors, this.xu && (e.uniforms.envMap.value = this.xu, 
            e.envMap = this.xu), e.needsUpdate = !0, e;
        },
        Gr: function(t, e) {
            (e = e || {}).uuid = t.uuid;
            var n = this.Ou(e);
            return this.wu.has(n) || (t = t.clone(), e.color && (t.color = new Xt(e.color)), 
            e.opacity && (t.opacity = e.opacity), e.transparent && (t.transparent = e.transparent), 
            this.wu.set(n, t)), this.wu.get(n);
        },
        Ru: function(t) {
            var e = new pu();
            return e.color = new Xt(t.color), e.opacity = t.alpha, e.transparent = e.opacity < 1, 
            void 0 !== t.url && this.lu.cu({
                url: t.url
            }, function(n) {
                n.image && (e.map = n, e.needsUpdate = !0), t.finish && t.finish(e);
            }), e;
        },
        Nu: function(t) {
            var e = void 0 === t.needDepth || t.needDepth;
            (t = new kl({
                color: t.color,
                opacity: t.opacity,
                lineWidth: t.lineWidth,
                vertexColors: 2,
                dashed: !1,
                transparent: !0,
                gradient: t.gradient
            })).depthWrite = e, t.depthTest = e, e = this.ui.jt;
            return jt.a.environment === Ut.a.BROWSER ? t.resolution.set(e.It.renderer.domElement.clientWidth, e.It.renderer.domElement.clientHeight) : t.resolution.set(e.It.renderer.domElement.width, e.It.renderer.domElement.height), 
            t;
        },
        Pu: function(t) {
            var e = this.Ou(t);
            return this.yu.has(e) || (t = this.Nu(t), this.yu.set(e, t)), this.yu.get(e);
        },
        Du: function(t, e, n) {
            var r = new Cl();
            r.sizeAttenuation = !1, r.depthTest = !1, r.depthWrite = !1, r.transparent = !0, 
            r.opacity = n.opacity, r.side = 2, t = this.Iu(t, null, e, n);
            return r.map = t, n.needSize && (r.size = t.size), r.userData.scaleRatio = t.scaleRatio, 
            r.userData.mspriteScale = t.mspriteScale, r.needsUpdate = !0, r;
        },
        Fu: function(t, e, n, r) {
            var i, o, a, l = this, u = new Cl();
            return u.sizeAttenuation = !1, u.depthTest = !1, u.depthWrite = !1, u.opacity = n.opacity, 
            u.transparent = !0, n.imageUrl ? (u.visible = !1, i = "_createLabelMaterial" + s.generateUUID(), 
            this.Gs.Ds(i), o = this, ql.qa(n.imageUrl, function(a) {
                a = l.Iu(t, a, e, Au(Au({}, n), {}, {
                    callback: function(t) {
                        u.map = t, u.visible = !0, u.userData.scaleRatio = t.scaleRatio, u.userData.mspriteScale = t.mspriteScale, 
                        r && r(u), u.needsUpdate = !0;
                    }
                })), jt.a.environment === Ut.a.BROWSER && (u.map = a, u.visible = !0, u.needsUpdate = !0, 
                u.userData.scaleRatio = a.scaleRatio, u.userData.mspriteScale = a.mspriteScale, 
                r) && r(u), o.Gs.Is(i);
            }, {
                needDraw: !0
            })) : (a = this.Iu(t, null, e, Au(Au({}, n), {}, {
                callback: function(t) {
                    u.map = t, u.needsUpdate = !0, u.userData.scaleRatio = t.scaleRatio, u.userData.mspriteScale = t.mspriteScale, 
                    r && r(u), u.visible = !0;
                }
            })), jt.a.environment === Ut.a.BROWSER ? (u.map = a, u.needsUpdate = !0, u.userData.scaleRatio = a.scaleRatio, 
            u.userData.mspriteScale = a.mspriteScale, r && r(u)) : u.map || (u.visible = !1)), 
            u;
        },
        Gu: function(t, e, n) {
            return this.Uu(t, n.imageUrl, e, n);
        },
        Bu: function(t, e, n, r) {
            var i, o, a, l = this, u = new Qr({
                transparent: !0
            });
            return n.imageUrl ? (u.visible = !1, i = "_createLabelTopMaterial" + s.generateUUID(), 
            this.Gs.Ds(i), o = this, ql.qa(n.imageUrl, function(a) {
                a = l.Iu(t, a, e, Au(Au({}, n), {}, {
                    scale: n.scale,
                    callback: function(t) {
                        u.map = t, u.visible = !0, r && r(u), u.needsUpdate = !0;
                    }
                })), jt.a.environment === Ut.a.BROWSER && (u.map = a, u.visible = !0, u.needsUpdate = !0, 
                r) && r(u), o.Gs.Is(i);
            }, {
                needDraw: !0
            })) : (a = this.Iu(t, null, e, Au(Au({}, n), {}, {
                scale: n.scale,
                callback: function(t) {
                    t.magFilter = mt, t.minFilter = 1008, u.map = t, u.needsUpdate = !0, r && r(u), 
                    u.visible = !0;
                }
            })), jt.a.environment === Ut.a.BROWSER ? (u.map = a, u.needsUpdate = !0, r && r(u)) : u.map || (u.visible = !1)), 
            u;
        },
        Iu: function(t, e, n, r) {
            var i = this.Hu(t, n);
            return this.Su[i] || (this.Su[i] = {}), t = this.Su[i].canvas || this.hu.tu(t, e, n, r), 
            null == (e = this.lu) ? void 0 : e.fu(t, {
                paramKey: i,
                labelImageCatch: this.Su,
                needSize: r.needSize,
                callback: r.callback
            });
        },
        Uu: function(t, e, n, r) {
            return this.hu.tu(t, e, n, r);
        },
        Hu: function(t, e) {
            return [ t, e.alpha, e.fontsize, e.fillColor, e.image ].join();
        },
        zu: function(t, e) {
            var n = this.Ou(t);
            return this.bu.has(n) || (t = this.Vu(t, e), this.bu.set(n, t)), e && e(this.bu.get(n)), 
            this.bu.get(n);
        },
        Vu: function(t, e) {
            var n = void 0 !== t.opacity ? t.opacity : 1, r = new Cl();
            return r.sizeAttenuation = !1, r.depthTest = t.needDepth, r.depthWrite = t.needDepth, 
            r.transparent = !0, r.opacity = n, r.visible = !1, this.lu.cu({
                url: t.url
            }, function(t) {
                t.image && (r.map = t, r.needsUpdate = !0, r.visible = !0, r.userData.scaleRatio = t.image.width / t.image.height), 
                e && e(r);
            }), r;
        },
        createArrowWidthBackTexture: function(t) {
            var e, n = this.hu.eu(t);
            return jt.a.environment === Ut.a.BROWSER ? new ka(Eu.getPowerOfTwoSizeCanvas(n)) : (n = n.toDataURL("image/png"), 
            e = new Zn(), jt.a.textureHelper.createImage({
                url: n,
                onload: function(n) {
                    e.image = n, e.needsUpdate = !0, t.callback && t.callback();
                }
            }), e);
        },
        createNormalLineTexture: function(t) {
            var e, n = this.hu.ou(t);
            return jt.a.environment === Ut.a.BROWSER ? new ka(Eu.getPowerOfTwoSizeCanvas(n)) : (n = n.toDataURL("image/png"), 
            e = new Zn(), jt.a.textureHelper.createImage({
                url: n,
                onload: function(n) {
                    e.image = n, e.needsUpdate = !0, t.callback && t.callback();
                }
            }), e);
        },
        Wu: function(t) {
            var e, n = this.hu.iu(t);
            return jt.a.environment === Ut.a.BROWSER ? new ka(Eu.getPowerOfTwoSizeCanvas(n)) : (n = n.toDataURL("image/png"), 
            e = new Zn(), jt.a.textureHelper.createImage({
                url: n,
                onload: function(n) {
                    e.image = n, e.needsUpdate = !0, t.callback && t.callback();
                }
            }), e);
        },
        Yu: function(t, e) {
            var n;
            return this.vu[t + e] || ((n = new Fl({
                uniforms: {
                    color: {
                        value: new Xt(t)
                    },
                    alpha: {
                        value: e
                    }
                },
                vertexShader: "\nprecision mediump float;\nprecision mediump int;\n\nattribute vec3 position;\n\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n\nvoid main() {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n ",
                fragmentShader: "\nprecision mediump float;\nprecision mediump int;\n\nuniform vec3 color;\nuniform float alpha;\n\nvoid main() {\n    gl_FragColor = vec4(color,alpha);\n}\n "
            })).transparent = !0, this.vu[t + e] = n);
        },
        Xu: function(t, e) {
            return (t = new Ur({
                uniforms: {
                    color: {
                        value: new Xt(t)
                    },
                    alpha: {
                        value: e
                    }
                },
                vertexShader: "\nattribute float gradientAlpha;\n\nvarying float v_gradientAlpha;\n\nvoid main() {\n  v_gradientAlpha = gradientAlpha;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n ",
                fragmentShader: "\n\nuniform vec3 color;\nuniform float alpha;\n\nvarying float v_gradientAlpha;\n\nvoid main() {\n  gl_FragColor = vec4(color, alpha * v_gradientAlpha);\n}\n "
            })).depthTest = !0, t.depthWrite = !1, t.transparent = !0, t;
        },
        Zu: function(t, e) {
            var n = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : {}, r = new Zn(), i = (r.minFilter = n.generateMipmaps ? 1008 : mt, 
            r.generateMipmaps = !!n.generateMipmaps, r.anisotropy = 4, r.wrapS = pt, r.wrapT = pt, 
            "_loadTexture" + s.generateUUID()), o = (this.Gs.Ds(i), this);
            return ql.qa(t, function(t) {
                t && (r.image = t, r.needsUpdate = !0), e(r), o.Gs.Is(i);
            }), r;
        },
        tn: function(t) {
            var e = this;
            this.ja = t, this.lu.tn(function() {
                e.lu = null, e.Gs.Ps(!0);
            }), this.Su = {};
        },
        Mo: function() {
            ql.Wa(), this.hu.tn(), this.hu = null, this.pu.clear(), this.mu.clear(), this.yu.clear(), 
            this.bu.clear(), this.ja && this.ja({
                name: "MaterialManager"
            });
        },
        Mu: function() {
            var t = this;
            this.ui.jt.ze.hdr && this.ui.jt.ze.hdr.load(this.ui.jt, function(e) {
                t.xu = e;
                var n, r = function(t, e) {
                    var n, r, i, o, a = "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"];
                    if (a) return r = !(n = !0), {
                        s: function() {
                            a = a.call(t);
                        },
                        n: function() {
                            var t = a.next();
                            return n = t.done, t;
                        },
                        e: function(t) {
                            r = !0, i = t;
                        },
                        f: function() {
                            try {
                                n || null == a.return || a.return();
                            } finally {
                                if (r) throw i;
                            }
                        }
                    };
                    if (Array.isArray(t) || (a = Mu(t)) || e && t && "number" == typeof t.length) return a && (t = a), 
                    o = 0, {
                        s: e = function() {},
                        n: function() {
                            return o >= t.length ? {
                                done: !0
                            } : {
                                done: !1,
                                value: t[o++]
                            };
                        },
                        e: function(t) {
                            throw t;
                        },
                        f: e
                    };
                    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
                }(t.gu);
                try {
                    for (r.s(); !(n = r.n()).done; ) {
                        var i = Ou(n.value, 2), o = (i[0], i[1]);
                        o.envMap || (o.uniforms.envMap.value = t.xu, o.envMap = t.xu);
                    }
                } catch (e) {
                    r.e(e);
                } finally {
                    r.f();
                }
            });
        }
    }), It);
    function Du(t, e) {
        var n, r, i, o, a = "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"];
        if (a) return r = !(n = !0), {
            s: function() {
                a = a.call(t);
            },
            n: function() {
                var t = a.next();
                return n = t.done, t;
            },
            e: function(t) {
                r = !0, i = t;
            },
            f: function() {
                try {
                    n || null == a.return || a.return();
                } finally {
                    if (r) throw i;
                }
            }
        };
        if (Array.isArray(t) || (a = function(t, e) {
            var n;
            if (t) return "string" == typeof t ? ku(t, e) : "Map" === (n = "Object" === (n = Object.prototype.toString.call(t).slice(8, -1)) && t.constructor ? t.constructor.name : n) || "Set" === n ? Array.from(t) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? ku(t, e) : void 0;
        }(t)) || e && t && "number" == typeof t.length) return a && (t = a), o = 0, {
            s: e = function() {},
            n: function() {
                return o >= t.length ? {
                    done: !0
                } : {
                    done: !1,
                    value: t[o++]
                };
            },
            e: function(t) {
                throw t;
            },
            f: e
        };
        throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }
    function ku(t, e) {
        (null == e || e > t.length) && (e = t.length);
        for (var n = 0, r = new Array(e); n < e; n++) r[n] = t[n];
        return r;
    }
    function Cu(t) {
        return (Cu = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Nu(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Cu(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Cu(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Cu(t) ? t : String(t);
            }(r.key), r);
        }
    }
    It = function() {
        function t() {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
            this.qu = {
                clearColor: 16777215,
                clearAlpha: 1
            }, this.Ju = null, this.Ku = new Map(), this.Qu = new Map(), this.$u = new Map(), 
            this.tc = new Map(), this.nc = new Map(), this.ec = new Map(), this.ic = new Map(), 
            this.rc = new Map(), this.oc = new Map(), this.sc = new Map(), this.ac = new Map(), 
            this.uc = new Map(), this.cc = new Map(), this.fc = null;
        }
        var e, n;
        return e = t, (n = [ {
            key: "resize",
            value: function() {
                this.qu = {
                    clearColor: 16777215,
                    clearAlpha: 1
                }, this.Ku.clear(), this.Qu.clear(), this.$u.clear(), this.tc.clear(), this.nc.clear(), 
                this.ec.clear(), this.ic.clear(), this.rc.clear(), this.oc.clear(), this.sc.clear(), 
                this.ac.clear(), this.uc.clear(), this.cc.clear();
            }
        } ]) && Nu(e.prototype, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }();
    var Fu = (Object.assign(It.prototype, {
        hc: function(t, e, n) {
            for (var r in e) t[r] = e[r];
            if (n) for (var i in n) {
                var o = t[i];
                if (o) {
                    if (n[i].type) switch (n[i].type) {
                      case "toColor":
                        o = $t.toColor(o);
                        break;

                      case "toFloat":
                        o = parseFloat(o);
                        break;

                      case "toRgba":
                        o = $t.toRgba(o);
                        break;

                      case "toString":
                        o += "";
                    }
                    n[i].name ? (t[n[i].name] = o, delete t[i]) : t[i] = o;
                }
            }
            return t;
        },
        lc: function(t) {
            this.resize(), t && (this.sysPath = t.sysPath, this.userPath = t.userPath, this.logoPath = t.logoPath, 
            this.sysModelPath = t.sysModelPath, this.userModelPath = t.userModelPath, this.dc(t), 
            this.vc(t.extenttheme, Ct.EXTENT), this.vc(t.storetheme, Ct.MODEL), this.mc(t.floorapply, Ct.MODEL), 
            this.yc(t.storeapply, Ct.MODEL), this.vc(t.storelabeltheme, Ct.LABEL), this.mc(t.floorstorelabelapply, Ct.LABEL), 
            this.yc(t.storelabelapply, Ct.LABEL), this.vc(t.poiimagetheme, Ct.FACILITY), this.mc(t.floorpoiimageapply, Ct.FACILITY), 
            this.yc(t.poiimageapply, Ct.FACILITY), this.vc(t.externalmodeltheme, Ct.EXTERNAL_MODEL), 
            this.mc(t.floorexternalapply, Ct.EXTERNAL_MODEL), this.yc(t.externalmodelapply, Ct.EXTERNAL_MODEL), 
            this.bc());
        },
        dc: function(t) {
            t.viewtheme && ((t = t.viewtheme).clearcolor && (this.qu.clearColor = $t.toColor(t.clearcolor)), 
            t.clearalpha && (this.qu.clearAlpha = parseFloat(t.clearalpha)), t.lighttheme) && (this.Ju = t.lighttheme);
        },
        vc: function(t, e) {
            if (t) {
                var n, r = Du(t);
                try {
                    for (r.s(); !(n = r.n()).done; ) {
                        var i = n.value;
                        if (i.id) switch (e) {
                          case Ct.EXTERNAL_MODEL:
                            this.ac.set(i.id, this.hc({}, i, {
                                color: {
                                    type: "toColor"
                                }
                            }));
                            break;

                          case Ct.FACILITY:
                            i.imagename && this.rc.set(i.id, this.hc({}, i, {
                                imagename: {
                                    name: "imageName"
                                }
                            }));
                            break;

                          case Ct.LABEL:
                            this.nc.set(i.id, this.hc({}, i, {
                                alpha: {
                                    type: "toFloat"
                                },
                                fillcolor: {
                                    name: "fillColor",
                                    type: "toRgba"
                                },
                                strokecolor: {
                                    name: "strokeColor",
                                    type: "toRgba"
                                },
                                platesize: {
                                    name: "plateSize"
                                },
                                platestrokecolor: {
                                    name: "plateStrokeColor",
                                    type: "toRgba"
                                },
                                platecolor: {
                                    name: "plateColor",
                                    type: "toRgba"
                                },
                                strokewidth: {
                                    name: "strokeWidth",
                                    type: "toFloat"
                                },
                                space: {
                                    type: "toFloat"
                                },
                                fontfamily: {
                                    name: "fontFamily"
                                },
                                fontweight: {
                                    name: "fontWeight",
                                    type: "toFloat"
                                },
                                imagesize: {
                                    name: "imageSize",
                                    type: "toFloat"
                                }
                            }));
                            break;

                          case Ct.MODEL:
                            this.Ku.set(i.id, this.hc({}, i, {
                                color: {
                                    type: "toColor"
                                },
                                alpha: {
                                    type: "toFloat"
                                },
                                strokecolor: {
                                    name: "strokeColor",
                                    type: "toColor"
                                },
                                strokewidth: {
                                    name: "strokeWidth",
                                    type: "toFloat"
                                }
                            }));
                            break;

                          case Ct.EXTENT:
                            this.tc.set(i.id, this.hc({}, i, {
                                color: {
                                    type: "toColor"
                                },
                                alpha: {
                                    type: "toFloat"
                                }
                            }));
                        }
                    }
                } catch (t) {
                    r.e(t);
                } finally {
                    r.f();
                }
            }
        },
        mc: function(t, e) {
            if (t) {
                var n, r = Du(t);
                try {
                    for (r.s(); !(n = r.n()).done; ) {
                        var i, o = Du(n.value.typeapply);
                        try {
                            for (o.s(); !(i = o.n()).done; ) {
                                var a, s = i.value, l = this.hc({}, s, {
                                    normalid: {
                                        name: "normalID",
                                        type: "toString"
                                    },
                                    selectedid: {
                                        name: "selectID",
                                        type: "toString"
                                    }
                                }), u = Du(s.type.split(","));
                                try {
                                    for (u.s(); !(a = u.n()).done; ) {
                                        var c = a.value;
                                        this.gc(e).set(c, l);
                                    }
                                } catch (t) {
                                    u.e(t);
                                } finally {
                                    u.f();
                                }
                            }
                        } catch (t) {
                            o.e(t);
                        } finally {
                            o.f();
                        }
                    }
                } catch (t) {
                    r.e(t);
                } finally {
                    r.f();
                }
            }
        },
        yc: function(t, e) {
            if (t) {
                var n, r = Du(t);
                try {
                    for (r.s(); !(n = r.n()).done; ) {
                        var i = n.value;
                        if (i.fids) {
                            var o, a = this.hc({}, i, {
                                normalid: {
                                    name: "normalID",
                                    type: "toString"
                                },
                                selectedid: {
                                    name: "selectID",
                                    type: "toString"
                                }
                            }), s = Du(i.fids.split(","));
                            try {
                                for (s.s(); !(o = s.n()).done; ) {
                                    var l = o.value;
                                    this.wc(e).set(l, a);
                                }
                            } catch (t) {
                                s.e(t);
                            } finally {
                                s.f();
                            }
                        }
                    }
                } catch (t) {
                    r.e(t);
                } finally {
                    r.f();
                }
            }
        },
        bc: function() {
            this.Qu.get("0") && this.Ku.get(this.Qu.get("0").selectID) && (this.fc = this.Ku.get(this.Qu.get("0").selectID).color);
        },
        wc: function(t) {
            switch (t) {
              case Ct.LABEL:
                return this.ic;

              case Ct.FACILITY:
                return this.sc;

              case Ct.MODEL:
                return this.$u;

              case Ct.EXTERNAL_MODEL:
                return this.cc;
            }
        },
        gc: function(t) {
            switch (t) {
              case Ct.LABEL:
                return this.ec;

              case Ct.FACILITY:
                return this.oc;

              case Ct.MODEL:
                return this.Qu;

              case Ct.EXTERNAL_MODEL:
                return this.uc;
            }
        },
        _c: function(t) {
            switch (t) {
              case Ct.LABEL:
                return this.nc;

              case Ct.FACILITY:
                return this.rc;

              case Ct.MODEL:
                return this.Ku;

              case Ct.EXTERNAL_MODEL:
                return this.ac;
            }
        },
        tn: function() {
            for (var t in this.resize(), this) this["" + t] = null, delete this["" + t];
        }
    }), It);
    function Bu(t) {
        return (Bu = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Uu(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Bu(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Bu(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Bu(t) ? t : String(t);
            }(r.key), r);
        }
    }
    It = function(t, e, n) {
        return e && Uu(t.prototype, e), n && Uu(t, n), Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }(function t(e) {
        if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
        this.ui = e;
    });
    var zu = (Object.assign(It.prototype, {
        Sc: function(t) {
            t = this.ui.xc.get(t);
            var e = this.ui.xc.get(this.ui.ze.buildingID), n = {};
            return (n = t ? {
                theme: t.theme,
                themeExtension: t.themeExtension
            } : n).theme || (n.theme = e.theme), n.themeExtension || (n.themeExtension = e.themeExtension), 
            n;
        },
        Ec: function(t) {
            return t = this.Sc(t), Object.assign({}, t.theme.qu, t.themeExtension.qu);
        },
        Mc: function(t) {
            return t = this.Sc(t), Object.assign({}, t.theme.tc.get("0"), t.themeExtension.tc.get("0"));
        },
        Oc: function(t) {
            return this.Tc(Ct.MODEL, t);
        },
        jc: function(t) {
            return this.Tc(Ct.FACILITY, t);
        },
        Lc: function(t) {
            return this.Tc(Ct.LABEL, t);
        },
        kc: function(t) {
            return this.Tc(Ct.EXTERNAL_MODEL, t);
        },
        Tc: function(t, e) {
            var n = this.Sc(e.bid), r = {}, i = {}, o = n.themeExtension.wc(t).get(e.fid), a = n.theme.wc(t).get(e.fid);
            if (o || a) {
                var s = (o && void 0 !== o.normalID ? o : a).normalID, l = n.themeExtension._c(t).get(s);
                s = n.theme._c(t).get(s);
                if (l || s) return i.themeUseDetail = {
                    content: e.fid,
                    name: "fid",
                    isExtension: !!o
                }, Object.assign(i, s, l, a, o);
            }
            return o = n.themeExtension.gc(t).get(e.typeID), a = n.theme.gc(t).get(e.typeID), 
            (o || a) && (i.themeUseDetail = {
                content: e.typeID,
                name: "typeId",
                isExtension: !!o
            }, Object.assign(r, a, o)), r.normalID || (o = n.themeExtension.gc(t).get("0"), 
            a = n.theme.gc(t).get("0"), Object.assign(r, o, a)), l = n.themeExtension._c(t).get(r.normalID), 
            s = n.theme._c(t).get(r.normalID), Object.assign(i, s, l);
        },
        Ac: function(t) {
            return (t = this.Sc(t)).themeExtension.fc || t.theme.fc;
        },
        tn: function() {
            this.ui = null;
        },
        Rc: function(t) {
            var e = this, n = t.ze.buildingOptions, r = n.buildings || n.theme, i = null;
            !function o() {
                var a = t.getBuildings(), s = a.map(function(t) {
                    return t.Ae;
                });
                if (!1 === t.Cc) i = setTimeout(o, 1); else {
                    null !== i && clearTimeout(i);
                    var l = [];
                    if (r) for (var u = 0; u < n.buildings.length; u++) {
                        var c, h = n.buildings[u], f = h.buildingID;
                        s.includes(f) && (c = e.ui.Ct.Bi(f), e.ui.xc.set(f, {
                            theme: new Fu()
                        }), c.themeLoaded = !0, c.themeNeedLoad = !1, e.ui.Nc({
                            bid: f,
                            theme: h.theme || n.theme,
                            themeExtension: h.themeExtension || n.themeExtension
                        }), l.push(f));
                    }
                    if (l.length !== a.length) for (var p = 0; p < a.length; p++) {
                        var d = a[p].buildingID;
                        l.includes(d) || ((d = e.ui.Ct.Bi(d)).themeLoaded = !0, d.themeNeedLoad = !1);
                    }
                    e.ui.Ct.Pc = e.ui.Dc();
                }
            }();
        }
    }), It);
    function Gu(t, e, n) {
        var r = this, i = !1, o = 0, a = 0, s = void 0, l = [];
        this.onStart = void 0, this.onLoad = t, this.onProgress = e, this.onError = n, this.record = new Map(), 
        this.itemStart = function(t) {
            this.record.has(t) || this.record.set(t, {}), a++, !1 === i && void 0 !== r.onStart && r.onStart(t, o, a), 
            i = !0;
        }, this.itemEnd = function(t) {
            this.record.delete(t), o++, void 0 !== r.onProgress && r.onProgress(t, o, a), o === a && (i = !1, 
            void 0 !== r.onLoad) && r.onLoad();
        }, this.itemError = function(t) {
            this.record.delete(t), void 0 !== r.onError && r.onError(t);
        }, this.resolveURL = function(t) {
            return s ? s(t) : t;
        }, this.setURLModifier = function(t) {
            return s = t, this;
        }, this.addHandler = function(t, e) {
            return l.push(t, e), this;
        }, this.removeHandler = function(t) {
            return -1 !== (t = l.indexOf(t)) && l.splice(t, 2), this;
        }, this.getHandler = function(t) {
            for (var e = 0, n = l.length; e < n; e += 2) {
                var r = l[e], i = l[e + 1];
                if (r.global && (r.lastIndex = 0), r.test(t)) return i;
            }
            return null;
        }, this.isLoaded = function() {
            return 0 === this.record.size;
        };
    }
    var Hu, Vu, Wu, Yu, Xu = new Gu(), Zu = function(t) {
        if ("undefined" != typeof TextDecoder) return new TextDecoder().decode(t);
        for (var e = "", n = 0, r = t.length; n < r; n++) e += String.fromCharCode(t[n]);
        try {
            return decodeURIComponent(escape(e));
        } catch (t) {
            return e;
        }
    }, qu = function(t) {
        var e = t.lastIndexOf("/");
        return -1 === e ? "./" : t.substr(0, e + 1);
    }, Ku = {
        enabled: !1,
        files: {},
        add: function(t, e) {
            !1 !== this.enabled && (this.files[t] = e);
        },
        get: function(t) {
            if (!1 !== this.enabled) return this.files[t];
        },
        remove: function(t) {
            delete this.files[t];
        },
        clear: function() {
            this.files = {};
        }
    };
    function Ju(t) {
        cc.call(this, t);
    }
    function Qu(t) {
        cc.call(this, t);
    }
    function $u(t) {
        Cr.call(this), this.type = "ShadowMaterial", this.color = new Xt(0), this.transparent = !0, 
        this.setValues(t);
    }
    function tc(t) {
        Cr.call(this), this.type = "PointsMaterial", this.color = new Xt(16777215), this.map = null, 
        this.alphaMap = null, this.size = 1, this.sizeAttenuation = !0, this.morphTargets = !1, 
        this.setValues(t);
    }
    function ec(t) {
        Cr.call(this), this.defines = {
            STANDARD: ""
        }, this.type = "MeshStandardMaterial", this.color = new Xt(16777215), this.roughness = 1, 
        this.metalness = 0, this.map = null, this.lightMap = null, this.lightMapIntensity = 1, 
        this.aoMap = null, this.aoMapIntensity = 1, this.emissive = new Xt(0), this.emissiveIntensity = 1, 
        this.emissiveMap = null, this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, 
        this.normalMapType = 0, this.normalScale = new Mt(1, 1), this.displacementMap = null, 
        this.displacementScale = 1, this.displacementBias = 0, this.roughnessMap = null, 
        this.metalnessMap = null, this.alphaMap = null, this.envMap = null, this.envMapIntensity = 1, 
        this.refractionRatio = .98, this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", 
        this.wireframeLinejoin = "round", this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, 
        this.vertexTangents = !1, this.setValues(t);
    }
    function nc(t) {
        ec.call(this), this.defines = {
            STANDARD: "",
            PHYSICAL: ""
        }, this.type = "MeshPhysicalMaterial", this.clearcoat = 0, this.clearcoatMap = null, 
        this.clearcoatRoughness = 0, this.clearcoatRoughnessMap = null, this.clearcoatNormalScale = new Mt(1, 1), 
        this.clearcoatNormalMap = null, this.reflectivity = .5, this.sheen = null, this.transparency = 0, 
        this.setValues(t);
    }
    function rc(t) {
        Cr.call(this), this.type = "MeshPhongMaterial", this.color = new Xt(16777215), this.specular = new Xt(1118481), 
        this.shininess = 30, this.map = null, this.lightMap = null, this.lightMapIntensity = 1, 
        this.aoMap = null, this.aoMapIntensity = 1, this.emissive = new Xt(0), this.emissiveIntensity = 1, 
        this.emissiveMap = null, this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, 
        this.normalMapType = 0, this.normalScale = new Mt(1, 1), this.displacementMap = null, 
        this.displacementScale = 1, this.displacementBias = 0, this.specularMap = null, 
        this.alphaMap = null, this.envMap = null, this.combine = 0, this.reflectivity = 1, 
        this.refractionRatio = .98, this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", 
        this.wireframeLinejoin = "round", this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, 
        this.setValues(t);
    }
    function ic(t) {
        Cr.call(this), this.defines = {
            TOON: ""
        }, this.type = "MeshToonMaterial", this.color = new Xt(16777215), this.specular = new Xt(1118481), 
        this.shininess = 30, this.map = null, this.gradientMap = null, this.lightMap = null, 
        this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.emissive = new Xt(0), 
        this.emissiveIntensity = 1, this.emissiveMap = null, this.bumpMap = null, this.bumpScale = 1, 
        this.normalMap = null, this.normalMapType = 0, this.normalScale = new Mt(1, 1), 
        this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, 
        this.specularMap = null, this.alphaMap = null, this.wireframe = !1, this.wireframeLinewidth = 1, 
        this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.skinning = !1, 
        this.morphTargets = !1, this.morphNormals = !1, this.setValues(t);
    }
    function oc(t) {
        Cr.call(this), this.type = "MeshNormalMaterial", this.bumpMap = null, this.bumpScale = 1, 
        this.normalMap = null, this.normalMapType = 0, this.normalScale = new Mt(1, 1), 
        this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, 
        this.wireframe = !1, this.wireframeLinewidth = 1, this.fog = !1, this.skinning = !1, 
        this.morphTargets = !1, this.morphNormals = !1, this.setValues(t);
    }
    function ac(t) {
        Cr.call(this), this.type = "MeshLambertMaterial", this.color = new Xt(16777215), 
        this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, 
        this.aoMapIntensity = 1, this.emissive = new Xt(0), this.emissiveIntensity = 1, 
        this.emissiveMap = null, this.specularMap = null, this.alphaMap = null, this.envMap = null, 
        this.combine = 0, this.reflectivity = 1, this.refractionRatio = .98, this.wireframe = !1, 
        this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", 
        this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.setValues(t);
    }
    function sc(t) {
        Cr.call(this), this.defines = {
            MATCAP: ""
        }, this.type = "MeshMatcapMaterial", this.color = new Xt(16777215), this.matcap = null, 
        this.map = null, this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, 
        this.normalMapType = 0, this.normalScale = new Mt(1, 1), this.displacementMap = null, 
        this.displacementScale = 1, this.displacementBias = 0, this.alphaMap = null, this.skinning = !1, 
        this.morphTargets = !1, this.morphNormals = !1, this.setValues(t);
    }
    function lc(t) {
        Nl.call(this), this.type = "LineDashedMaterial", this.scale = 1, this.dashSize = 3, 
        this.gapSize = 1, this.setValues(t);
    }
    function uc(t) {
        cc.call(this, t), this.textures = {};
    }
    function cc(t) {
        this.manager = void 0 !== t ? t : Xu, this.crossOrigin = "anonymous", this.path = "", 
        this.resourcePath = "";
    }
    Ju.prototype = Object.assign(Object.create(cc.prototype), {
        constructor: Ju,
        load: function(t, e, n, r) {
            void 0 !== this.path && (t = this.path + t), t = this.manager.resolveURL(t);
            var i, o, a, s = this, l = Ku.get(t);
            return void 0 !== l ? (s.manager.itemStart(t), setTimeout(function() {
                e && e(l), s.manager.itemEnd(t);
            }, 0), l) : jt.a.environment === Ut.a.WX ? (t.includes(wx.env.USER_DATA_PATH) ? (o = wx.getFileSystemManager()).readFile({
                filePath: t,
                encoding: "base64",
                success: function(n) {
                    n = "data:image/png;base64,".concat(n.data);
                    var r = jt.a.textureHelper.createImage({
                        url: n,
                        onload: function() {
                            Ku.add(t, r), e && e(r), s.manager.itemEnd(t), o.unlink({
                                filePath: t,
                                fail: function(t) {},
                                success: function() {}
                            });
                        }
                    });
                },
                fail: function(e) {
                    console.error(e), r && r(e), s.manager.itemError(t), s.manager.itemEnd(t);
                }
            }) : i = jt.a.textureHelper.createImage({
                url: t,
                onload: function() {
                    Ku.add(t, i), e && e(i), s.manager.itemEnd(t);
                },
                onerror: function(e) {
                    console.error(e), r && r(e), s.manager.itemError(t), s.manager.itemEnd(t);
                }
            }), i) : ((a = jt.a.document.createElementNS("http://www.w3.org/1999/xhtml", "img")).addEventListener("load", u, !1), 
            a.addEventListener("error", c, !1), "data:" !== t.substr(0, 5) && void 0 !== this.crossOrigin && (a.crossOrigin = this.crossOrigin), 
            s.manager.itemStart(t), a.src = t, a);
            function u() {
                a.removeEventListener("load", u, !1), a.removeEventListener("error", c, !1), Ku.add(t, this), 
                e && e(this), s.manager.itemEnd(t);
            }
            function c(e) {
                a.removeEventListener("load", u, !1), a.removeEventListener("error", c, !1), r && r(e), 
                s.manager.itemError(t), s.manager.itemEnd(t);
            }
        }
    }), Qu.prototype = Object.assign(Object.create(cc.prototype), {
        constructor: Qu,
        load: function(t, e, n, r) {
            var i = new Zn(), o = new Ju(this.manager);
            return o.setCrossOrigin(this.crossOrigin), o.setPath(this.path), o.load(t, function(n) {
                i.image = n, n = 0 < t.search(/\.jpe?g($|\?)/i) || 0 === t.search(/^data\:image\/jpeg/), 
                i.format = n ? gt : bt, i.needsUpdate = !0, void 0 !== e && e(i);
            }, n, r), i;
        }
    }), (($u.prototype = Object.create(Cr.prototype)).constructor = $u).prototype.isShadowMaterial = !0, 
    $u.prototype.copy = function(t) {
        return Cr.prototype.copy.call(this, t), this.color.copy(t.color), this;
    }, ((tc.prototype = Object.create(Cr.prototype)).constructor = tc).prototype.isPointsMaterial = !0, 
    tc.prototype.copy = function(t) {
        return Cr.prototype.copy.call(this, t), this.color.copy(t.color), this.map = t.map, 
        this.alphaMap = t.alphaMap, this.size = t.size, this.sizeAttenuation = t.sizeAttenuation, 
        this.morphTargets = t.morphTargets, this;
    }, ((ec.prototype = Object.create(Cr.prototype)).constructor = ec).prototype.isMeshStandardMaterial = !0, 
    ec.prototype.copy = function(t) {
        return Cr.prototype.copy.call(this, t), this.defines = {
            STANDARD: ""
        }, this.color.copy(t.color), this.roughness = t.roughness, this.metalness = t.metalness, 
        this.map = t.map, this.lightMap = t.lightMap, this.lightMapIntensity = t.lightMapIntensity, 
        this.aoMap = t.aoMap, this.aoMapIntensity = t.aoMapIntensity, this.emissive.copy(t.emissive), 
        this.emissiveMap = t.emissiveMap, this.emissiveIntensity = t.emissiveIntensity, 
        this.bumpMap = t.bumpMap, this.bumpScale = t.bumpScale, this.normalMap = t.normalMap, 
        this.normalMapType = t.normalMapType, this.normalScale.copy(t.normalScale), this.displacementMap = t.displacementMap, 
        this.displacementScale = t.displacementScale, this.displacementBias = t.displacementBias, 
        this.roughnessMap = t.roughnessMap, this.metalnessMap = t.metalnessMap, this.alphaMap = t.alphaMap, 
        this.envMap = t.envMap, this.envMapIntensity = t.envMapIntensity, this.refractionRatio = t.refractionRatio, 
        this.wireframe = t.wireframe, this.wireframeLinewidth = t.wireframeLinewidth, this.wireframeLinecap = t.wireframeLinecap, 
        this.wireframeLinejoin = t.wireframeLinejoin, this.skinning = t.skinning, this.morphTargets = t.morphTargets, 
        this.morphNormals = t.morphNormals, this.vertexTangents = t.vertexTangents, this;
    }, ((nc.prototype = Object.create(ec.prototype)).constructor = nc).prototype.isMeshPhysicalMaterial = !0, 
    nc.prototype.copy = function(t) {
        return ec.prototype.copy.call(this, t), this.defines = {
            STANDARD: "",
            PHYSICAL: ""
        }, this.clearcoat = t.clearcoat, this.clearcoatMap = t.clearcoatMap, this.clearcoatRoughness = t.clearcoatRoughness, 
        this.clearcoatRoughnessMap = t.clearcoatRoughnessMap, this.clearcoatNormalMap = t.clearcoatNormalMap, 
        this.clearcoatNormalScale.copy(t.clearcoatNormalScale), this.reflectivity = t.reflectivity, 
        t.sheen ? this.sheen = (this.sheen || new Xt()).copy(t.sheen) : this.sheen = null, 
        this.transparency = t.transparency, this;
    }, ((rc.prototype = Object.create(Cr.prototype)).constructor = rc).prototype.isMeshPhongMaterial = !0, 
    rc.prototype.copy = function(t) {
        return Cr.prototype.copy.call(this, t), this.color.copy(t.color), this.specular.copy(t.specular), 
        this.shininess = t.shininess, this.map = t.map, this.lightMap = t.lightMap, this.lightMapIntensity = t.lightMapIntensity, 
        this.aoMap = t.aoMap, this.aoMapIntensity = t.aoMapIntensity, this.emissive.copy(t.emissive), 
        this.emissiveMap = t.emissiveMap, this.emissiveIntensity = t.emissiveIntensity, 
        this.bumpMap = t.bumpMap, this.bumpScale = t.bumpScale, this.normalMap = t.normalMap, 
        this.normalMapType = t.normalMapType, this.normalScale.copy(t.normalScale), this.displacementMap = t.displacementMap, 
        this.displacementScale = t.displacementScale, this.displacementBias = t.displacementBias, 
        this.specularMap = t.specularMap, this.alphaMap = t.alphaMap, this.envMap = t.envMap, 
        this.combine = t.combine, this.reflectivity = t.reflectivity, this.refractionRatio = t.refractionRatio, 
        this.wireframe = t.wireframe, this.wireframeLinewidth = t.wireframeLinewidth, this.wireframeLinecap = t.wireframeLinecap, 
        this.wireframeLinejoin = t.wireframeLinejoin, this.skinning = t.skinning, this.morphTargets = t.morphTargets, 
        this.morphNormals = t.morphNormals, this;
    }, ((ic.prototype = Object.create(Cr.prototype)).constructor = ic).prototype.isMeshToonMaterial = !0, 
    ic.prototype.copy = function(t) {
        return Cr.prototype.copy.call(this, t), this.color.copy(t.color), this.specular.copy(t.specular), 
        this.shininess = t.shininess, this.map = t.map, this.gradientMap = t.gradientMap, 
        this.lightMap = t.lightMap, this.lightMapIntensity = t.lightMapIntensity, this.aoMap = t.aoMap, 
        this.aoMapIntensity = t.aoMapIntensity, this.emissive.copy(t.emissive), this.emissiveMap = t.emissiveMap, 
        this.emissiveIntensity = t.emissiveIntensity, this.bumpMap = t.bumpMap, this.bumpScale = t.bumpScale, 
        this.normalMap = t.normalMap, this.normalMapType = t.normalMapType, this.normalScale.copy(t.normalScale), 
        this.displacementMap = t.displacementMap, this.displacementScale = t.displacementScale, 
        this.displacementBias = t.displacementBias, this.specularMap = t.specularMap, this.alphaMap = t.alphaMap, 
        this.wireframe = t.wireframe, this.wireframeLinewidth = t.wireframeLinewidth, this.wireframeLinecap = t.wireframeLinecap, 
        this.wireframeLinejoin = t.wireframeLinejoin, this.skinning = t.skinning, this.morphTargets = t.morphTargets, 
        this.morphNormals = t.morphNormals, this;
    }, ((oc.prototype = Object.create(Cr.prototype)).constructor = oc).prototype.isMeshNormalMaterial = !0, 
    oc.prototype.copy = function(t) {
        return Cr.prototype.copy.call(this, t), this.bumpMap = t.bumpMap, this.bumpScale = t.bumpScale, 
        this.normalMap = t.normalMap, this.normalMapType = t.normalMapType, this.normalScale.copy(t.normalScale), 
        this.displacementMap = t.displacementMap, this.displacementScale = t.displacementScale, 
        this.displacementBias = t.displacementBias, this.wireframe = t.wireframe, this.wireframeLinewidth = t.wireframeLinewidth, 
        this.skinning = t.skinning, this.morphTargets = t.morphTargets, this.morphNormals = t.morphNormals, 
        this;
    }, ((ac.prototype = Object.create(Cr.prototype)).constructor = ac).prototype.isMeshLambertMaterial = !0, 
    ac.prototype.copy = function(t) {
        return Cr.prototype.copy.call(this, t), this.color.copy(t.color), this.map = t.map, 
        this.lightMap = t.lightMap, this.lightMapIntensity = t.lightMapIntensity, this.aoMap = t.aoMap, 
        this.aoMapIntensity = t.aoMapIntensity, this.emissive.copy(t.emissive), this.emissiveMap = t.emissiveMap, 
        this.emissiveIntensity = t.emissiveIntensity, this.specularMap = t.specularMap, 
        this.alphaMap = t.alphaMap, this.envMap = t.envMap, this.combine = t.combine, this.reflectivity = t.reflectivity, 
        this.refractionRatio = t.refractionRatio, this.wireframe = t.wireframe, this.wireframeLinewidth = t.wireframeLinewidth, 
        this.wireframeLinecap = t.wireframeLinecap, this.wireframeLinejoin = t.wireframeLinejoin, 
        this.skinning = t.skinning, this.morphTargets = t.morphTargets, this.morphNormals = t.morphNormals, 
        this;
    }, ((sc.prototype = Object.create(Cr.prototype)).constructor = sc).prototype.isMeshMatcapMaterial = !0, 
    sc.prototype.copy = function(t) {
        return Cr.prototype.copy.call(this, t), this.defines = {
            MATCAP: ""
        }, this.color.copy(t.color), this.matcap = t.matcap, this.map = t.map, this.bumpMap = t.bumpMap, 
        this.bumpScale = t.bumpScale, this.normalMap = t.normalMap, this.normalMapType = t.normalMapType, 
        this.normalScale.copy(t.normalScale), this.displacementMap = t.displacementMap, 
        this.displacementScale = t.displacementScale, this.displacementBias = t.displacementBias, 
        this.alphaMap = t.alphaMap, this.skinning = t.skinning, this.morphTargets = t.morphTargets, 
        this.morphNormals = t.morphNormals, this;
    }, ((lc.prototype = Object.create(Nl.prototype)).constructor = lc).prototype.isLineDashedMaterial = !0, 
    lc.prototype.copy = function(t) {
        return Nl.prototype.copy.call(this, t), this.scale = t.scale, this.dashSize = t.dashSize, 
        this.gapSize = t.gapSize, this;
    }, uc.prototype = Object.assign(Object.create(cc.prototype), {
        constructor: uc,
        load: function(t, e, n, r) {
            var i = this, o = new fc(i.manager);
            o.setPath(i.path), o.load(t, function(t) {
                e(i.parse(JSON.parse(t)));
            }, n, r);
        },
        parse: function(t) {
            var e = this.textures;
            function n(t) {
                return void 0 === e[t] && console.warn("THREE.MaterialLoader: Undefined texture", t), 
                e[t];
            }
            var i, o = new r[t.type]();
            if (void 0 !== t.uuid && (o.uuid = t.uuid), void 0 !== t.name && (o.name = t.name), 
            void 0 !== t.color && o.color.setHex(t.color), void 0 !== t.roughness && (o.roughness = t.roughness), 
            void 0 !== t.metalness && (o.metalness = t.metalness), void 0 !== t.sheen && (o.sheen = new Xt().setHex(t.sheen)), 
            void 0 !== t.emissive && o.emissive.setHex(t.emissive), void 0 !== t.specular && o.specular.setHex(t.specular), 
            void 0 !== t.shininess && (o.shininess = t.shininess), void 0 !== t.clearcoat && (o.clearcoat = t.clearcoat), 
            void 0 !== t.clearcoatRoughness && (o.clearcoatRoughness = t.clearcoatRoughness), 
            void 0 !== t.fog && (o.fog = t.fog), void 0 !== t.flatShading && (o.flatShading = t.flatShading), 
            void 0 !== t.blending && (o.blending = t.blending), void 0 !== t.combine && (o.combine = t.combine), 
            void 0 !== t.side && (o.side = t.side), void 0 !== t.opacity && (o.opacity = t.opacity), 
            void 0 !== t.transparent && (o.transparent = t.transparent), void 0 !== t.alphaTest && (o.alphaTest = t.alphaTest), 
            void 0 !== t.depthTest && (o.depthTest = t.depthTest), void 0 !== t.depthWrite && (o.depthWrite = t.depthWrite), 
            void 0 !== t.colorWrite && (o.colorWrite = t.colorWrite), void 0 !== t.stencilWrite && (o.stencilWrite = t.stencilWrite), 
            void 0 !== t.stencilWriteMask && (o.stencilWriteMask = t.stencilWriteMask), void 0 !== t.stencilFunc && (o.stencilFunc = t.stencilFunc), 
            void 0 !== t.stencilRef && (o.stencilRef = t.stencilRef), void 0 !== t.stencilFuncMask && (o.stencilFuncMask = t.stencilFuncMask), 
            void 0 !== t.stencilFail && (o.stencilFail = t.stencilFail), void 0 !== t.stencilZFail && (o.stencilZFail = t.stencilZFail), 
            void 0 !== t.stencilZPass && (o.stencilZPass = t.stencilZPass), void 0 !== t.wireframe && (o.wireframe = t.wireframe), 
            void 0 !== t.wireframeLinewidth && (o.wireframeLinewidth = t.wireframeLinewidth), 
            void 0 !== t.wireframeLinecap && (o.wireframeLinecap = t.wireframeLinecap), void 0 !== t.wireframeLinejoin && (o.wireframeLinejoin = t.wireframeLinejoin), 
            void 0 !== t.rotation && (o.rotation = t.rotation), 1 !== t.linewidth && (o.linewidth = t.linewidth), 
            void 0 !== t.dashSize && (o.dashSize = t.dashSize), void 0 !== t.gapSize && (o.gapSize = t.gapSize), 
            void 0 !== t.scale && (o.scale = t.scale), void 0 !== t.polygonOffset && (o.polygonOffset = t.polygonOffset), 
            void 0 !== t.polygonOffsetFactor && (o.polygonOffsetFactor = t.polygonOffsetFactor), 
            void 0 !== t.polygonOffsetUnits && (o.polygonOffsetUnits = t.polygonOffsetUnits), 
            void 0 !== t.skinning && (o.skinning = t.skinning), void 0 !== t.morphTargets && (o.morphTargets = t.morphTargets), 
            void 0 !== t.morphNormals && (o.morphNormals = t.morphNormals), void 0 !== t.dithering && (o.dithering = t.dithering), 
            void 0 !== t.vertexTangents && (o.vertexTangents = t.vertexTangents), void 0 !== t.visible && (o.visible = t.visible), 
            void 0 !== t.toneMapped && (o.toneMapped = t.toneMapped), void 0 !== t.userData && (o.userData = t.userData), 
            void 0 !== t.vertexColors && ("number" == typeof t.vertexColors ? o.vertexColors = 0 < t.vertexColors : o.vertexColors = t.vertexColors), 
            void 0 !== t.uniforms) for (var a in t.uniforms) {
                var s = t.uniforms[a];
                switch (o.uniforms[a] = {}, s.type) {
                  case "t":
                    o.uniforms[a].value = n(s.value);
                    break;

                  case "c":
                    o.uniforms[a].value = new Xt().setHex(s.value);
                    break;

                  case "v2":
                    o.uniforms[a].value = new Mt().fromArray(s.value);
                    break;

                  case "v3":
                    o.uniforms[a].value = new h().fromArray(s.value);
                    break;

                  case "v4":
                    o.uniforms[a].value = new Bt().fromArray(s.value);
                    break;

                  case "m3":
                    o.uniforms[a].value = new O().fromArray(s.value);

                  case "m4":
                    o.uniforms[a].value = new b().fromArray(s.value);
                    break;

                  default:
                    o.uniforms[a].value = s.value;
                }
            }
            if (void 0 !== t.defines && (o.defines = t.defines), void 0 !== t.vertexShader && (o.vertexShader = t.vertexShader), 
            void 0 !== t.fragmentShader && (o.fragmentShader = t.fragmentShader), void 0 !== t.extensions) for (var l in t.extensions) o.extensions[l] = t.extensions[l];
            return void 0 !== t.shading && (o.flatShading = 1 === t.shading), void 0 !== t.size && (o.size = t.size), 
            void 0 !== t.sizeAttenuation && (o.sizeAttenuation = t.sizeAttenuation), void 0 !== t.map && (o.map = n(t.map)), 
            void 0 !== t.matcap && (o.matcap = n(t.matcap)), void 0 !== t.alphaMap && (o.alphaMap = n(t.alphaMap)), 
            void 0 !== t.bumpMap && (o.bumpMap = n(t.bumpMap)), void 0 !== t.bumpScale && (o.bumpScale = t.bumpScale), 
            void 0 !== t.normalMap && (o.normalMap = n(t.normalMap)), void 0 !== t.normalMapType && (o.normalMapType = t.normalMapType), 
            void 0 !== t.normalScale && (i = t.normalScale, !1 === Array.isArray(i) && (i = [ i, i ]), 
            o.normalScale = new Mt().fromArray(i)), void 0 !== t.displacementMap && (o.displacementMap = n(t.displacementMap)), 
            void 0 !== t.displacementScale && (o.displacementScale = t.displacementScale), void 0 !== t.displacementBias && (o.displacementBias = t.displacementBias), 
            void 0 !== t.roughnessMap && (o.roughnessMap = n(t.roughnessMap)), void 0 !== t.metalnessMap && (o.metalnessMap = n(t.metalnessMap)), 
            void 0 !== t.emissiveMap && (o.emissiveMap = n(t.emissiveMap)), void 0 !== t.emissiveIntensity && (o.emissiveIntensity = t.emissiveIntensity), 
            void 0 !== t.specularMap && (o.specularMap = n(t.specularMap)), void 0 !== t.envMap && (o.envMap = n(t.envMap)), 
            void 0 !== t.envMapIntensity && (o.envMapIntensity = t.envMapIntensity), void 0 !== t.reflectivity && (o.reflectivity = t.reflectivity), 
            void 0 !== t.refractionRatio && (o.refractionRatio = t.refractionRatio), void 0 !== t.lightMap && (o.lightMap = n(t.lightMap)), 
            void 0 !== t.lightMapIntensity && (o.lightMapIntensity = t.lightMapIntensity), void 0 !== t.aoMap && (o.aoMap = n(t.aoMap)), 
            void 0 !== t.aoMapIntensity && (o.aoMapIntensity = t.aoMapIntensity), void 0 !== t.gradientMap && (o.gradientMap = n(t.gradientMap)), 
            void 0 !== t.clearcoatMap && (o.clearcoatMap = n(t.clearcoatMap)), void 0 !== t.clearcoatRoughnessMap && (o.clearcoatRoughnessMap = n(t.clearcoatRoughnessMap)), 
            void 0 !== t.clearcoatNormalMap && (o.clearcoatNormalMap = n(t.clearcoatNormalMap)), 
            void 0 !== t.clearcoatNormalScale && (o.clearcoatNormalScale = new Mt().fromArray(t.clearcoatNormalScale)), 
            o;
        },
        setTextures: function(t) {
            return this.textures = t, this;
        }
    }), Object.assign(cc.prototype, {
        load: function() {},
        parse: function() {},
        setCrossOrigin: function(t) {
            return this.crossOrigin = t, this;
        },
        setPath: function(t) {
            return this.path = t, this;
        },
        setResourcePath: function(t) {
            return this.resourcePath = t, this;
        }
    }), Object.assign(cc.prototype, {
        crossOrigin: "anonymous",
        onLoadStart: function() {},
        onLoadProgress: function() {},
        onLoadComplete: function() {},
        initMaterials: function(t, e, n) {
            for (var r = [], i = 0; i < t.length; ++i) r[i] = this.createMaterial(t[i], e, n);
            return r;
        },
        createMaterial: (Hu = {
            NoBlending: 0,
            NormalBlending: 1,
            AdditiveBlending: 2,
            SubtractiveBlending: 3,
            MultiplyBlending: 4,
            CustomBlending: 5
        }, Vu = new Xt(), Wu = new Qu(), Yu = new uc(), function(t, e, n) {
            var r = {};
            function i(t, i, o, a, l) {
                t = e + t;
                var u = (null !== (u = new Gu().getHandler(t)) ? u : (Wu.setCrossOrigin(n), Wu)).load(t);
                void 0 !== i && (u.repeat.fromArray(i), 1 !== i[0] && (u.wrapS = 1e3), 1 !== i[1]) && (u.wrapT = 1e3), 
                void 0 !== o && u.offset.fromArray(o), void 0 !== a && ("repeat" === a[0] && (u.wrapS = 1e3), 
                "mirror" === a[0] && (u.wrapS = 1002), "repeat" === a[1] && (u.wrapT = 1e3), "mirror" === a[1]) && (u.wrapT = 1002), 
                void 0 !== l && (u.anisotropy = l), t = s.generateUUID();
                return r[t] = u, t;
            }
            var o, a = {
                uuid: s.generateUUID(),
                type: "MeshLambertMaterial"
            };
            for (o in t) {
                var l = t[o];
                switch (o) {
                  case "DbgColor":
                  case "DbgIndex":
                  case "opticalDensity":
                  case "illumination":
                    break;

                  case "DbgName":
                    a.name = l;
                    break;

                  case "blending":
                    a.blending = Hu[l];
                    break;

                  case "colorAmbient":
                  case "mapAmbient":
                    break;

                  case "colorDiffuse":
                    a.color = Vu.fromArray(l).getHex();
                    break;

                  case "colorSpecular":
                    a.specular = Vu.fromArray(l).getHex();
                    break;

                  case "colorEmissive":
                    a.emissive = Vu.fromArray(l).getHex();
                    break;

                  case "specularCoef":
                    a.shininess = l;
                    break;

                  case "shading":
                    "basic" === l.toLowerCase() && (a.type = "MeshBasicMaterial"), "phong" === l.toLowerCase() && (a.type = "MeshPhongMaterial"), 
                    "standard" === l.toLowerCase() && (a.type = "MeshStandardMaterial");
                    break;

                  case "mapDiffuse":
                    a.map = i(l, t.mapDiffuseRepeat, t.mapDiffuseOffset, t.mapDiffuseWrap, t.mapDiffuseAnisotropy);
                    break;

                  case "mapDiffuseRepeat":
                  case "mapDiffuseOffset":
                  case "mapDiffuseWrap":
                  case "mapDiffuseAnisotropy":
                    break;

                  case "mapEmissive":
                    a.emissiveMap = i(l, t.mapEmissiveRepeat, t.mapEmissiveOffset, t.mapEmissiveWrap, t.mapEmissiveAnisotropy);
                    break;

                  case "mapEmissiveRepeat":
                  case "mapEmissiveOffset":
                  case "mapEmissiveWrap":
                  case "mapEmissiveAnisotropy":
                    break;

                  case "mapLight":
                    a.lightMap = i(l, t.mapLightRepeat, t.mapLightOffset, t.mapLightWrap, t.mapLightAnisotropy);
                    break;

                  case "mapLightRepeat":
                  case "mapLightOffset":
                  case "mapLightWrap":
                  case "mapLightAnisotropy":
                    break;

                  case "mapAO":
                    a.aoMap = i(l, t.mapAORepeat, t.mapAOOffset, t.mapAOWrap, t.mapAOAnisotropy);
                    break;

                  case "mapAORepeat":
                  case "mapAOOffset":
                  case "mapAOWrap":
                  case "mapAOAnisotropy":
                    break;

                  case "mapBump":
                    a.bumpMap = i(l, t.mapBumpRepeat, t.mapBumpOffset, t.mapBumpWrap, t.mapBumpAnisotropy);
                    break;

                  case "mapBumpScale":
                    a.bumpScale = l;
                    break;

                  case "mapBumpRepeat":
                  case "mapBumpOffset":
                  case "mapBumpWrap":
                  case "mapBumpAnisotropy":
                    break;

                  case "mapNormal":
                    a.normalMap = i(l, t.mapNormalRepeat, t.mapNormalOffset, t.mapNormalWrap, t.mapNormalAnisotropy);
                    break;

                  case "mapNormalFactor":
                    a.normalScale = l;
                    break;

                  case "mapNormalRepeat":
                  case "mapNormalOffset":
                  case "mapNormalWrap":
                  case "mapNormalAnisotropy":
                    break;

                  case "mapSpecular":
                    a.specularMap = i(l, t.mapSpecularRepeat, t.mapSpecularOffset, t.mapSpecularWrap, t.mapSpecularAnisotropy);
                    break;

                  case "mapSpecularRepeat":
                  case "mapSpecularOffset":
                  case "mapSpecularWrap":
                  case "mapSpecularAnisotropy":
                    break;

                  case "mapMetalness":
                    a.metalnessMap = i(l, t.mapMetalnessRepeat, t.mapMetalnessOffset, t.mapMetalnessWrap, t.mapMetalnessAnisotropy);
                    break;

                  case "mapMetalnessRepeat":
                  case "mapMetalnessOffset":
                  case "mapMetalnessWrap":
                  case "mapMetalnessAnisotropy":
                    break;

                  case "mapRoughness":
                    a.roughnessMap = i(l, t.mapRoughnessRepeat, t.mapRoughnessOffset, t.mapRoughnessWrap, t.mapRoughnessAnisotropy);
                    break;

                  case "mapRoughnessRepeat":
                  case "mapRoughnessOffset":
                  case "mapRoughnessWrap":
                  case "mapRoughnessAnisotropy":
                    break;

                  case "mapAlpha":
                    a.alphaMap = i(l, t.mapAlphaRepeat, t.mapAlphaOffset, t.mapAlphaWrap, t.mapAlphaAnisotropy);
                    break;

                  case "mapAlphaRepeat":
                  case "mapAlphaOffset":
                  case "mapAlphaWrap":
                  case "mapAlphaAnisotropy":
                    break;

                  case "flipSided":
                    a.side = 1;
                    break;

                  case "doubleSided":
                    a.side = 2;
                    break;

                  case "transparency":
                    a.opacity = l;
                    break;

                  case "depthTest":
                  case "depthWrite":
                  case "colorWrite":
                  case "opacity":
                  case "reflectivity":
                  case "transparent":
                  case "visible":
                  case "wireframe":
                    a[o] = l;
                    break;

                  case "vertexColors":
                    !0 === l && (a.vertexColors = 2), "face" === l && (a.vertexColors = 1);
                }
            }
            return "MeshBasicMaterial" === a.type && delete a.emissive, "MeshPhongMaterial" !== a.type && delete a.specular, 
            a.opacity < 1 && (a.transparent = !0), Yu.setTextures(r), Yu.parse(a);
        })
    });
    var hc = {};
    function fc(t) {
        cc.call(this, t);
    }
    fc.prototype = Object.assign(Object.create(cc.prototype), {
        constructor: fc,
        load: function(t, e, n, r) {
            void 0 === t && (t = ""), void 0 !== this.path && (t = this.path + t), t = this.manager.resolveURL(t);
            var i = this, o = Ku.get(t);
            if (void 0 !== o) return setTimeout(function() {
                e && e(o);
            }, 0), o;
            if (void 0 === hc[t]) {
                var a = t.match(/^data:(.*?)(;base64)?,(.*)$/);
                if (a) {
                    var s = a[1], l = !!a[2], u = a[3];
                    u = decodeURIComponent(u);
                    l && (u = atob(u));
                    try {
                        var c = (this.responseType || "").toLowerCase();
                        switch (c) {
                          case "arraybuffer":
                          case "blob":
                            for (var h = new Uint8Array(u.length), f = 0; f < u.length; f++) h[f] = u.charCodeAt(f);
                            p = "blob" === c ? new Blob([ h.buffer ], {
                                type: s
                            }) : h.buffer;
                            break;

                          case "document":
                            var p = new DOMParser().parseFromString(u, s);
                            break;

                          case "json":
                            p = JSON.parse(u);
                            break;

                          default:
                            p = u;
                        }
                        setTimeout(function() {
                            e && e(p), i.manager.itemEnd(t);
                        }, 0);
                    } catch (e) {
                        setTimeout(function() {
                            r && r(e), i.manager.itemError(t), i.manager.itemEnd(t);
                        }, 0);
                    }
                } else {
                    hc[t] = [], hc[t].push({
                        onLoad: e,
                        onProgress: n,
                        onError: r
                    });
                    var d, y = new jt.a.XMLHttpRequest();
                    for (d in y.open("GET", t, !0), y.addEventListener("load", function(e) {
                        var n = this.response, r = hc[t];
                        if (delete hc[t], 200 === this.status || 0 === this.status) {
                            0 === this.status && console.warn("THREE.FileLoader: HTTP Status 0 received."), 
                            Ku.add(t, n);
                            for (var o = 0, a = r.length; o < a; o++) (s = r[o]).onLoad && s.onLoad(n);
                        } else {
                            var s;
                            for (o = 0, a = r.length; o < a; o++) (s = r[o]).onError && s.onError(e);
                            i.manager.itemError(t);
                        }
                        i.manager.itemEnd(t);
                    }, !1), y.addEventListener("progress", function(e) {
                        for (var n = hc[t], r = 0, i = n.length; r < i; r++) {
                            var o = n[r];
                            o.onProgress && o.onProgress(e);
                        }
                    }, !1), y.addEventListener("error", function(e) {
                        var n = hc[t];
                        delete hc[t];
                        for (var r = 0, o = n.length; r < o; r++) {
                            var a = n[r];
                            a.onError && a.onError(e);
                        }
                        i.manager.itemError(t), i.manager.itemEnd(t);
                    }, !1), y.addEventListener("abort", function(e) {
                        var n = hc[t];
                        delete hc[t];
                        for (var r = 0, o = n.length; r < o; r++) {
                            var a = n[r];
                            a.onError && a.onError(e);
                        }
                        i.manager.itemError(t), i.manager.itemEnd(t);
                    }, !1), void 0 !== this.responseType && (y.responseType = this.responseType), void 0 !== this.withCredentials && (y.withCredentials = this.withCredentials), 
                    y.overrideMimeType && y.overrideMimeType(void 0 !== this.mimeType ? this.mimeType : "text/plain"), 
                    this.requestHeader) y.setRequestHeader(d, this.requestHeader[d]);
                    y.send(null);
                }
                return i.manager.itemStart(t), y;
            }
            hc[t].push({
                onLoad: e,
                onProgress: n,
                onError: r
            });
        },
        setResponseType: function(t) {
            return this.responseType = t, this;
        },
        setWithCredentials: function(t) {
            return this.withCredentials = t, this;
        },
        setMimeType: function(t) {
            return this.mimeType = t, this;
        },
        setRequestHeader: function(t) {
            return this.requestHeader = t, this;
        },
        dispose: function() {
            hc = {};
        }
    });
    var pc = {
        arraySlice: function(t, e, n) {
            return pc.isTypedArray(t) ? new t.constructor(t.subarray(e, void 0 !== n ? n : t.length)) : t.slice(e, n);
        },
        convertArray: function(t, e, n) {
            return !t || !n && t.constructor === e ? t : "number" == typeof e.BYTES_PER_ELEMENT ? new e(t) : Array.prototype.slice.call(t);
        },
        isTypedArray: function(t) {
            return ArrayBuffer.isView(t) && !(t instanceof DataView);
        },
        getKeyframeOrder: function(t) {
            for (var e = t.length, n = new Array(e), r = 0; r !== e; ++r) n[r] = r;
            return n.sort(function(e, n) {
                return t[e] - t[n];
            }), n;
        },
        sortedArray: function(t, e, n) {
            for (var r = t.length, i = new t.constructor(r), o = 0, a = 0; a !== r; ++o) for (var s = n[o] * e, l = 0; l !== e; ++l) i[a++] = t[s + l];
            return i;
        },
        flattenJSON: function(t, e, n, r) {
            for (var i = 1, o = t[0]; void 0 !== o && void 0 === o[r]; ) o = t[i++];
            if (void 0 !== o) {
                var a = o[r];
                if (void 0 !== a) if (Array.isArray(a)) for (;void 0 !== (a = o[r]) && (e.push(o.time), 
                n.push.apply(n, a)), void 0 !== (o = t[i++]); ) ; else if (void 0 !== a.toArray) for (;void 0 !== (a = o[r]) && (e.push(o.time), 
                a.toArray(n, n.length)), void 0 !== (o = t[i++]); ) ; else for (;void 0 !== (a = o[r]) && (e.push(o.time), 
                n.push(a)), void 0 !== (o = t[i++]); ) ;
            }
        },
        subclip: function(t, e, n, r, i) {
            i = i || 30;
            for (var o = t.clone(), a = (o.name = e, []), s = 0; s < o.tracks.length; ++s) {
                for (var l = o.tracks[s], u = l.getValueSize(), c = [], h = [], f = 0; f < l.times.length; ++f) {
                    var p = l.times[f] * i;
                    if (!(p < n || r <= p)) {
                        c.push(l.times[f]);
                        for (var d = 0; d < u; ++d) h.push(l.values[f * u + d]);
                    }
                }
                0 !== c.length && (l.times = pc.convertArray(c, l.times.constructor), l.values = pc.convertArray(h, l.values.constructor), 
                a.push(l));
            }
            o.tracks = a;
            var y = 1 / 0;
            for (s = 0; s < o.tracks.length; ++s) y > o.tracks[s].times[0] && (y = o.tracks[s].times[0]);
            for (s = 0; s < o.tracks.length; ++s) o.tracks[s].shift(-1 * y);
            return o.resetDuration(), o;
        }
    };
    function dc(t, e, n, r) {
        this.parameterPositions = t, this.Ic = 0, this.resultBuffer = void 0 !== r ? r : new e.constructor(n), 
        this.sampleValues = e, this.valueSize = n;
    }
    function yc(t, e, n, r) {
        dc.call(this, t, e, n, r), this.Fc = -0, this.Gc = -0, this.Uc = -0, this.Bc = -0;
    }
    function mc(t, e, n, r) {
        dc.call(this, t, e, n, r);
    }
    function vc(t, e, n, r) {
        dc.call(this, t, e, n, r);
    }
    function gc(t, e, n, r) {
        if (void 0 === t) throw new Error("THREE.KeyframeTrack: track name is undefined");
        if (void 0 === e || 0 === e.length) throw new Error("THREE.KeyframeTrack: no keyframes in track named " + t);
        this.name = t, this.times = pc.convertArray(e, this.TimeBufferType), this.values = pc.convertArray(n, this.ValueBufferType), 
        this.setInterpolation(r || this.DefaultInterpolation);
    }
    function bc(t, e, n) {
        gc.call(this, t, e, n);
    }
    function xc(t, e, n, r) {
        gc.call(this, t, e, n, r);
    }
    function wc(t, e, n, r) {
        gc.call(this, t, e, n, r);
    }
    function Sc(t, e, n, r) {
        dc.call(this, t, e, n, r);
    }
    function _c(t, e, n, r) {
        gc.call(this, t, e, n, r);
    }
    function Ec(t, e, n, r) {
        gc.call(this, t, e, n, r);
    }
    function Oc(t, e, n, r) {
        gc.call(this, t, e, n, r);
    }
    function Mc(t, e, n) {
        this.name = t, this.tracks = n, this.duration = void 0 !== e ? e : -1, this.uuid = s.generateUUID(), 
        this.duration < 0 && this.resetDuration();
    }
    function Tc(t) {
        if (void 0 === t.type) throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");
        var e, n, r = function(t) {
            switch (t.toLowerCase()) {
              case "scalar":
              case "double":
              case "float":
              case "number":
              case "integer":
                return wc;

              case "vector":
              case "vector2":
              case "vector3":
              case "vector4":
                return Oc;

              case "color":
                return xc;

              case "quaternion":
                return _c;

              case "bool":
              case "boolean":
                return bc;

              case "string":
                return Ec;
            }
            throw new Error("THREE.KeyframeTrack: Unsupported typeName: " + t);
        }(t.type);
        return void 0 === t.times && (pc.flattenJSON(t.keys, e = [], n = [], "value"), t.times = e, 
        t.values = n), void 0 !== r.parse ? r.parse(t) : new r(t.name, t.times, t.values, t.interpolation);
    }
    function Lc(t) {
        "boolean" == typeof t && (console.warn("JSONLoader: showStatus parameter has been removed from constructor."), 
        t = void 0), this.manager = void 0 !== t ? t : Xu, this.withCredentials = !1;
    }
    Object.assign(dc.prototype, {
        evaluate: function(t) {
            var e, n = this.parameterPositions, r = this.Ic, i = n[r], o = n[r - 1];
            t: {
                e: {
                    n: {
                        r: if (!(t < i)) {
                            for (var a = r + 2; ;) {
                                if (void 0 === i) {
                                    if (t < o) break r;
                                    return r = n.length, this.Ic = r, this.afterEnd_(r - 1, t, o);
                                }
                                if (r === a) break;
                                if (o = i, t < (i = n[++r])) break e;
                            }
                            e = n.length;
                            break n;
                        }
                        if (o <= t) break t;
                        var s = n[1];
                        for (t < s && (r = 2, o = s), a = r - 2; ;) {
                            if (void 0 === o) return this.Ic = 0, this.beforeStart_(0, t, i);
                            if (r === a) break;
                            if (i = o, (o = n[--r - 1]) <= t) break e;
                        }
                        e = r, r = 0;
                    }
                    for (;r < e; ) {
                        var l = r + e >>> 1;
                        t < n[l] ? e = l : r = 1 + l;
                    }
                    if (i = n[r], void 0 === (o = n[r - 1])) return this.Ic = 0, this.beforeStart_(0, t, i);
                    if (void 0 === i) return r = n.length, this.Ic = r, this.afterEnd_(r - 1, o, t);
                }
                this.Ic = r, this.intervalChanged_(r, o, i);
            }
            return this.interpolate_(r, o, t, i);
        },
        settings: null,
        DefaultSettings_: {},
        getSettings_: function() {
            return this.settings || this.DefaultSettings_;
        },
        copySampleValue_: function(t) {
            for (var e = this.resultBuffer, n = this.sampleValues, r = this.valueSize, i = t * r, o = 0; o !== r; ++o) e[o] = n[i + o];
            return e;
        },
        interpolate_: function() {
            throw new Error("call to abstract method");
        },
        intervalChanged_: function() {}
    }), Object.assign(dc.prototype, {
        beforeStart_: dc.prototype.copySampleValue_,
        afterEnd_: dc.prototype.copySampleValue_
    }), yc.prototype = Object.assign(Object.create(dc.prototype), {
        constructor: yc,
        DefaultSettings_: {
            endingStart: St,
            endingEnd: St
        },
        intervalChanged_: function(t, e, n) {
            var r = this.parameterPositions, i = t - 2, o = t + 1, a = r[i], s = r[o];
            if (void 0 === a) switch (this.getSettings_().endingStart) {
              case _t:
                i = t, a = 2 * e - n;
                break;

              case 2402:
                a = e + r[i = r.length - 2] - r[i + 1];
                break;

              default:
                i = t, a = n;
            }
            if (void 0 === s) switch (this.getSettings_().endingEnd) {
              case _t:
                o = t, s = 2 * n - e;
                break;

              case 2402:
                s = n + r[o = 1] - r[0];
                break;

              default:
                o = t - 1, s = e;
            }
            var l = .5 * (n - e), u = this.valueSize;
            this.Fc = l / (e - a), this.Uc = l / (s - n), this.Gc = i * u, this.Bc = o * u;
        },
        interpolate_: function(t, e, n, r) {
            for (var i = this.resultBuffer, o = this.sampleValues, a = this.valueSize, s = t * a, l = s - a, u = this.Gc, c = this.Bc, h = (t = this.Fc, 
            this.Uc), f = -t * (e = (r = (n = (n - e) / (r - e)) * n) * n) + 2 * t * r - t * n, p = (1 + t) * e + (-1.5 - 2 * t) * r + (-.5 + t) * n + 1, d = (-1 - h) * e + (1.5 + h) * r + .5 * n, y = h * e - h * r, m = 0; m !== a; ++m) i[m] = f * o[u + m] + p * o[l + m] + d * o[s + m] + y * o[c + m];
            return i;
        }
    }), mc.prototype = Object.assign(Object.create(dc.prototype), {
        constructor: mc,
        interpolate_: function(t, e, n, r) {
            for (var i = this.resultBuffer, o = this.sampleValues, a = this.valueSize, s = t * a, l = s - a, u = (n - e) / (r - e), c = 1 - u, h = 0; h !== a; ++h) i[h] = o[l + h] * c + o[s + h] * u;
            return i;
        }
    }), vc.prototype = Object.assign(Object.create(dc.prototype), {
        constructor: vc,
        interpolate_: function(t) {
            return this.copySampleValue_(t - 1);
        }
    }), Object.assign(gc.prototype, {
        constructor: gc,
        TimeBufferType: Float32Array,
        ValueBufferType: Float32Array,
        DefaultInterpolation: wt,
        InterpolantFactoryMethodDiscrete: function(t) {
            return new vc(this.times, this.values, this.getValueSize(), t);
        },
        InterpolantFactoryMethodLinear: function(t) {
            return new mc(this.times, this.values, this.getValueSize(), t);
        },
        InterpolantFactoryMethodSmooth: function(t) {
            return new yc(this.times, this.values, this.getValueSize(), t);
        },
        setInterpolation: function(t) {
            var e;
            switch (t) {
              case xt:
                e = this.InterpolantFactoryMethodDiscrete;
                break;

              case wt:
                e = this.InterpolantFactoryMethodLinear;
                break;

              case 2302:
                e = this.InterpolantFactoryMethodSmooth;
            }
            if (void 0 === e) {
                var n = "unsupported interpolation for " + this.ValueTypeName + " keyframe track named " + this.name;
                if (void 0 === this.createInterpolant) {
                    if (t === this.DefaultInterpolation) throw new Error(n);
                    this.setInterpolation(this.DefaultInterpolation);
                }
                console.warn("THREE.KeyframeTrack:", n);
            } else this.createInterpolant = e;
            return this;
        },
        getInterpolation: function() {
            switch (this.createInterpolant) {
              case this.InterpolantFactoryMethodDiscrete:
                return xt;

              case this.InterpolantFactoryMethodLinear:
                return wt;

              case this.InterpolantFactoryMethodSmooth:
                return 2302;
            }
        },
        getValueSize: function() {
            return this.values.length / this.times.length;
        },
        shift: function(t) {
            if (0 !== t) for (var e = this.times, n = 0, r = e.length; n !== r; ++n) e[n] += t;
            return this;
        },
        scale: function(t) {
            if (1 !== t) for (var e = this.times, n = 0, r = e.length; n !== r; ++n) e[n] *= t;
            return this;
        },
        trim: function(t, e) {
            for (var n, r = this.times, i = r.length, o = 0, a = i - 1; o !== i && r[o] < t; ) ++o;
            for (;-1 !== a && r[a] > e; ) --a;
            return ++a, 0 === o && a === i || (a <= o && (o = (a = Math.max(a, 1)) - 1), n = this.getValueSize(), 
            this.times = pc.arraySlice(r, o, a), this.values = pc.arraySlice(this.values, o * n, a * n)), 
            this;
        },
        validate: function() {
            for (var t = !0, e = this.getValueSize(), n = (e - Math.floor(e) != 0 && (console.error("THREE.KeyframeTrack: Invalid value size in track.", this), 
            t = !1), this.times), r = this.values, i = n.length, o = (0 === i && (console.error("THREE.KeyframeTrack: Track is empty.", this), 
            t = !1), null), a = 0; a !== i; a++) {
                var s = n[a];
                if ("number" == typeof s && isNaN(s)) {
                    console.error("THREE.KeyframeTrack: Time is not a valid number.", this, a, s), t = !1;
                    break;
                }
                if (null !== o && s < o) {
                    console.error("THREE.KeyframeTrack: Out of order keys.", this, a, s, o), t = !1;
                    break;
                }
                o = s;
            }
            if (void 0 !== r && pc.isTypedArray(r)) {
                a = 0;
                for (var l = r.length; a !== l; ++a) {
                    var u = r[a];
                    if (isNaN(u)) {
                        console.error("THREE.KeyframeTrack: Value is not a valid number.", this, a, u), 
                        t = !1;
                        break;
                    }
                }
            }
            return t;
        },
        optimize: function() {
            for (var t = pc.arraySlice(this.times), e = pc.arraySlice(this.values), n = this.getValueSize(), r = 2302 === this.getInterpolation(), i = 1, o = t.length - 1, a = 1; a < o; ++a) {
                var s = !1, l = t[a];
                if (l !== t[a + 1] && (1 !== a || l !== l[0])) if (r) s = !0; else for (var u = a * n, c = u - n, h = u + n, f = 0; f !== n; ++f) {
                    var p = e[u + f];
                    if (p !== e[c + f] || p !== e[h + f]) {
                        s = !0;
                        break;
                    }
                }
                if (s) {
                    if (a !== i) {
                        t[i] = t[a];
                        var d = a * n, y = i * n;
                        for (f = 0; f !== n; ++f) e[y + f] = e[d + f];
                    }
                    ++i;
                }
            }
            if (0 < o) {
                for (t[i] = t[o], d = o * n, y = i * n, f = 0; f !== n; ++f) e[y + f] = e[d + f];
                ++i;
            }
            return i !== t.length ? (this.times = pc.arraySlice(t, 0, i), this.values = pc.arraySlice(e, 0, i * n)) : (this.times = t, 
            this.values = e), this;
        },
        clone: function() {
            var t = pc.arraySlice(this.times, 0), e = pc.arraySlice(this.values, 0);
            return (t = new this.constructor(this.name, t, e)).createInterpolant = this.createInterpolant, 
            t;
        }
    }), bc.prototype = Object.assign(Object.create(gc.prototype), {
        constructor: bc,
        ValueTypeName: "bool",
        ValueBufferType: Array,
        DefaultInterpolation: xt,
        InterpolantFactoryMethodLinear: void 0,
        InterpolantFactoryMethodSmooth: void 0
    }), xc.prototype = Object.assign(Object.create(gc.prototype), {
        constructor: xc,
        ValueTypeName: "color"
    }), wc.prototype = Object.assign(Object.create(gc.prototype), {
        constructor: wc,
        ValueTypeName: "number"
    }), Sc.prototype = Object.assign(Object.create(dc.prototype), {
        constructor: Sc,
        interpolate_: function(t, e, n, r) {
            for (var i = this.resultBuffer, o = this.sampleValues, a = this.valueSize, s = t * a, u = (n - e) / (r - e), c = s + a; s !== c; s += 4) l.slerpFlat(i, 0, o, s - a, o, s, u);
            return i;
        }
    }), _c.prototype = Object.assign(Object.create(gc.prototype), {
        constructor: _c,
        ValueTypeName: "quaternion",
        DefaultInterpolation: wt,
        InterpolantFactoryMethodLinear: function(t) {
            return new Sc(this.times, this.values, this.getValueSize(), t);
        },
        InterpolantFactoryMethodSmooth: void 0
    }), Ec.prototype = Object.assign(Object.create(gc.prototype), {
        constructor: Ec,
        ValueTypeName: "string",
        ValueBufferType: Array,
        DefaultInterpolation: xt,
        InterpolantFactoryMethodLinear: void 0,
        InterpolantFactoryMethodSmooth: void 0
    }), Oc.prototype = Object.assign(Object.create(gc.prototype), {
        constructor: Oc,
        ValueTypeName: "vector"
    }), Object.assign(Mc, {
        parse: function(t) {
            for (var e = [], n = t.tracks, r = 1 / (t.fps || 1), i = 0, o = n.length; i !== o; ++i) e.push(Tc(n[i]).scale(r));
            return new Mc(t.name, t.duration, e);
        },
        CreateFromMorphTargetSequence: function(t, e, n, r) {
            for (var i = e.length, o = [], a = 0; a < i; a++) {
                var s = [], l = ((u = []).push((a + i - 1) % i, a, (a + 1) % i), s.push(0, 1, 0), 
                pc.getKeyframeOrder(u)), u = pc.sortedArray(u, 1, l);
                s = pc.sortedArray(s, 1, l);
                r || 0 !== u[0] || (u.push(i), s.push(s[0])), o.push(new wc(".morphTargetInfluences[" + e[a].name + "]", u, s).scale(1 / n));
            }
            return new Mc(t, -1, o);
        },
        findByName: function(t, e) {
            var n = t;
            Array.isArray(t) || (n = t.geometry && t.geometry.animations || t.animations);
            for (var r = 0; r < n.length; r++) if (n[r].name === e) return n[r];
            return null;
        },
        CreateClipsFromMorphTargetSequences: function(t, e, n) {
            for (var r = {}, i = /^([\w-]*?)([\d]+)$/, o = 0, a = t.length; o < a; o++) {
                var s = t[o], l = s.name.match(i);
                l && 1 < l.length && ((l = r[u = l[1]]) || (r[u] = l = []), l.push(s));
            }
            var u, c = [];
            for (u in r) c.push(Mc.CreateFromMorphTargetSequence(u, r[u], e, n));
            return c;
        },
        parseAnimation: function(t, e) {
            if (!t) return console.error("THREE.AnimationClip: No animation in JSONLoader data."), 
            null;
            for (var n = function(t, e, n, r, i) {
                var o;
                0 !== n.length && (pc.flattenJSON(n, n = [], o = [], r), 0 !== n.length) && i.push(new t(e, n, o));
            }, r = [], i = t.name || "default", o = t.length || -1, a = t.fps || 30, s = t.hierarchy || [], l = 0; l < s.length; l++) {
                var u = s[l].keys;
                if (u && 0 !== u.length) if (u[0].morphTargets) {
                    for (var c, h = {}, f = 0; f < u.length; f++) if (u[f].morphTargets) for (var p = 0; p < u[f].morphTargets.length; p++) h[u[f].morphTargets[p]] = -1;
                    for (c in h) {
                        var d = [], y = [];
                        for (p = 0; p !== u[f].morphTargets.length; ++p) {
                            var m = u[f];
                            d.push(m.time), y.push(m.morphTarget === c ? 1 : 0);
                        }
                        r.push(new wc(".morphTargetInfluence[" + c + "]", d, y));
                    }
                    o = h.length * (a || 1);
                } else {
                    var v = ".bones[" + e[l].name + "]";
                    n(Oc, v + ".position", u, "pos", r), n(_c, v + ".quaternion", u, "rot", r), n(Oc, v + ".scale", u, "scl", r);
                }
            }
            return 0 === r.length ? null : new Mc(i, o, r);
        }
    }), Object.assign(Mc.prototype, {
        resetDuration: function() {
            for (var t = 0, e = 0, n = this.tracks.length; e !== n; ++e) {
                var r = this.tracks[e];
                t = Math.max(t, r.times[r.times.length - 1]);
            }
            return this.duration = t, this;
        },
        trim: function() {
            for (var t = 0; t < this.tracks.length; t++) this.tracks[t].trim(0, this.duration);
            return this;
        },
        validate: function() {
            for (var t = !0, e = 0; e < this.tracks.length; e++) t = t && this.tracks[e].validate();
            return t;
        },
        optimize: function() {
            for (var t = 0; t < this.tracks.length; t++) this.tracks[t].optimize();
            return this;
        },
        clone: function() {
            for (var t = [], e = 0; e < this.tracks.length; e++) t.push(this.tracks[e].clone());
            return new Mc(this.name, this.duration, t);
        }
    }), Object.assign(Lc.prototype, {
        crossOrigin: "anonymous",
        load: function(t, e, n, r) {
            var i = this, o = void 0 === this.path ? qu(t) : this.path, a = (this.resourcePath = o + "maps/", 
            new fc(this.manager));
            a.setPath(this.path), a.setWithCredentials(this.withCredentials), a.load(t, function(n) {
                var r = (n = JSON.parse(n)).metadata;
                void 0 === r || void 0 === (r = r.type) || "object" !== r.toLowerCase() ? (r = i.parse(n, o), 
                e(r.geometry, r.materials)) : console.error("JSONLoader: " + t + " should be loaded with ObjectLoader instead.");
            }, n, r);
        },
        setPath: function(t) {
            return this.path = t, this;
        },
        setResourcePath: function(t) {
            return this.resourcePath = t, this;
        },
        setCrossOrigin: function(t) {
            return this.crossOrigin = t, this;
        },
        parse: function(t, e) {
            void 0 !== (t = void 0 !== t.data ? t.data : t).scale ? t.scale = 1 / t.scale : t.scale = 1;
            var n, r, i, o, a, s, l, u, c, f, p, d, y, m, v, g, b, x, w, S, _, E, O, M, T = new or(), L = t, A = T, P = L.faces, R = L.vertices, j = L.normals, I = L.colors, D = L.scale, k = 0;
            if (void 0 !== L.uvs) {
                for (n = 0; n < L.uvs.length; n++) L.uvs[n].length && k++;
                for (n = 0; n < k; n++) A.faceVertexUvs[n] = [];
            }
            for (o = 0, a = R.length; o < a; ) (b = new h()).x = R[o++] * D, b.y = R[o++] * D, 
            b.z = R[o++] * D, A.vertices.push(b);
            for (o = 0, a = P.length; o < a; ) if (p = 2 & (f = P[o++]), d = 8 & f, y = 16 & f, 
            m = 32 & f, v = 64 & f, g = 128 & f, 1 & f) {
                if ((w = new tr()).a = P[o], w.b = P[o + 1], w.c = P[o + 3], (S = new tr()).a = P[o + 1], 
                S.b = P[o + 2], S.c = P[o + 3], o += 4, p && (c = P[o++], w.materialIndex = c, S.materialIndex = c), 
                i = A.faces.length, d) for (n = 0; n < k; n++) for (O = L.uvs[n], A.faceVertexUvs[n][i] = [], 
                A.faceVertexUvs[n][i + 1] = [], r = 0; r < 4; r++) M = new Mt(O[2 * (u = P[o++])], O[2 * u + 1]), 
                2 !== r && A.faceVertexUvs[n][i].push(M), 0 !== r && A.faceVertexUvs[n][i + 1].push(M);
                if (y && (l = 3 * P[o++], w.normal.set(j[l++], j[l++], j[l]), S.normal.copy(w.normal)), 
                m) for (n = 0; n < 4; n++) l = 3 * P[o++], E = new h(j[l++], j[l++], j[l]), 2 !== n && w.vertexNormals.push(E), 
                0 !== n && S.vertexNormals.push(E);
                if (v && (_ = I[s = P[o++]], w.color.setHex(_), S.color.setHex(_)), g) for (n = 0; n < 4; n++) _ = I[s = P[o++]], 
                2 !== n && w.vertexColors.push(new Xt(_)), 0 !== n && S.vertexColors.push(new Xt(_));
                A.faces.push(w), A.faces.push(S);
            } else {
                if ((x = new tr()).a = P[o++], x.b = P[o++], x.c = P[o++], p && (c = P[o++], x.materialIndex = c), 
                i = A.faces.length, d) for (n = 0; n < k; n++) for (O = L.uvs[n], A.faceVertexUvs[n][i] = [], 
                r = 0; r < 3; r++) M = new Mt(O[2 * (u = P[o++])], O[2 * u + 1]), A.faceVertexUvs[n][i].push(M);
                if (y && (l = 3 * P[o++], x.normal.set(j[l++], j[l++], j[l])), m) for (n = 0; n < 3; n++) l = 3 * P[o++], 
                E = new h(j[l++], j[l++], j[l]), x.vertexNormals.push(E);
                if (v && (s = P[o++], x.color.setHex(I[s])), g) for (n = 0; n < 3; n++) s = P[o++], 
                x.vertexColors.push(new Xt(I[s]));
                A.faces.push(x);
            }
            var C = t, N = T, F = void 0 !== C.influencesPerVertex ? C.influencesPerVertex : 2;
            if (C.skinWeights) for (var B = 0, U = C.skinWeights.length; B < U; B += F) {
                var z = C.skinWeights[B], G = 1 < F ? C.skinWeights[B + 1] : 0, H = 2 < F ? C.skinWeights[B + 2] : 0, V = 3 < F ? C.skinWeights[B + 3] : 0;
                N.skinWeights.push(new Bt(z, G, H, V));
            }
            if (C.skinIndices) for (B = 0, U = C.skinIndices.length; B < U; B += F) {
                var W = C.skinIndices[B], Y = 1 < F ? C.skinIndices[B + 1] : 0, X = 2 < F ? C.skinIndices[B + 2] : 0, Z = 3 < F ? C.skinIndices[B + 3] : 0;
                N.skinIndices.push(new Bt(W, Y, X, Z));
            }
            N.bones = C.bones, N.bones && 0 < N.bones.length && (N.skinWeights.length !== N.skinIndices.length || N.skinIndices.length !== N.vertices.length) && console.warn("When skinning, number of vertices (" + N.vertices.length + "), skinIndices (" + N.skinIndices.length + "), and skinWeights (" + N.skinWeights.length + ") should match.");
            var q = t, K = T, J = q.scale;
            if (void 0 !== q.morphTargets) for (var Q = 0, $ = q.morphTargets.length; Q < $; Q++) {
                K.morphTargets[Q] = {}, K.morphTargets[Q].name = q.morphTargets[Q].name, K.morphTargets[Q].vertices = [];
                for (var tt = K.morphTargets[Q].vertices, et = q.morphTargets[Q].vertices, nt = 0, rt = et.length; nt < rt; nt += 3) {
                    var it = new h();
                    it.x = et[nt] * J, it.y = et[nt + 1] * J, it.z = et[nt + 2] * J, tt.push(it);
                }
            }
            if (void 0 !== q.morphColors && 0 < q.morphColors.length) {
                console.warn('fm.JSONLoader: "morphColors" no longer supported. Using them as face colors.');
                var ot = K.faces, at = q.morphColors[0].colors;
                for (Q = 0, $ = ot.length; Q < $; Q++) ot[Q].color.fromArray(at, 3 * Q);
            }
            var st = t, lt = T, ut = [], ct = [];
            void 0 !== st.animation && ct.push(st.animation), void 0 !== st.animations && (st.animations.length ? ct = ct.concat(st.animations) : ct.push(st.animations));
            for (var ht = 0; ht < ct.length; ht++) {
                var ft = Mc.parseAnimation(ct[ht], lt.bones);
                ft && ut.push(ft);
            }
            return lt.morphTargets && (st = Mc.CreateClipsFromMorphTargetSequences(lt.morphTargets, 10), 
            ut = ut.concat(st)), 0 < ut.length && (lt.animations = ut), T.computeFaceNormals(), 
            T.computeBoundingSphere(), void 0 === t.materials || 0 === t.materials.length ? {
                geometry: T
            } : {
                geometry: T,
                materials: cc.prototype.initMaterials(t.materials, this.resourcePath || e, this.crossOrigin)
            };
        }
    });
    var Ac = Lc;
    function Pc(t, e) {
        B.call(this), this.type = "Light", this.color = new Xt(t), this.intensity = void 0 !== e ? e : 1, 
        this.receiveShadow = void 0;
    }
    function Rc(t) {
        this.camera = t, this.bias = 0, this.radius = 1, this.mapSize = new Mt(512, 512), 
        this.map = null, this.mapPass = null, this.matrix = new b(), this.Hc = new ft(), 
        this.zc = new Mt(1, 1), this.Vc = 1, this.Wc = [ new Bt(0, 0, 1, 1) ];
    }
    function jc() {
        Rc.call(this, new G(-5, 5, 5, -5, .5, 500));
    }
    function Ic(t, e) {
        Pc.call(this, t, e), this.type = "DirectionalLight", this.position.copy(B.DefaultUp), 
        this.updateMatrix(), this.target = new B(), this.shadow = new jc();
    }
    function Dc() {
        Rc.call(this, new z(90, 1, .5, 500)), this.zc = new Mt(4, 2), this.Vc = 6, this.Wc = [ new Bt(2, 1, 1, 1), new Bt(0, 1, 1, 1), new Bt(3, 1, 1, 1), new Bt(1, 1, 1, 1), new Bt(3, 0, 1, 1), new Bt(1, 0, 1, 1) ], 
        this.Yc = [ new h(1, 0, 0), new h(-1, 0, 0), new h(0, 0, 1), new h(0, 0, -1), new h(0, 1, 0), new h(0, -1, 0) ], 
        this.Xc = [ new h(0, 1, 0), new h(0, 1, 0), new h(0, 1, 0), new h(0, 1, 0), new h(0, 0, 1), new h(0, 0, -1) ];
    }
    function kc(t, e, n, r) {
        Pc.call(this, t, e), this.type = "PointLight", Object.defineProperty(this, "power", {
            get: function() {
                return 4 * this.intensity * Math.PI;
            },
            set: function(t) {
                this.intensity = t / (4 * Math.PI);
            }
        }), this.distance = void 0 !== n ? n : 0, this.decay = void 0 !== r ? r : 1, this.shadow = new Dc();
    }
    function Cc() {
        Rc.call(this, new z(50, 1, .5, 500));
    }
    function Nc(t, e, n, r, i, o) {
        Pc.call(this, t, e), this.type = "SpotLight", this.position.copy(B.DefaultUp), this.updateMatrix(), 
        this.target = new B(), Object.defineProperty(this, "power", {
            get: function() {
                return this.intensity * Math.PI;
            },
            set: function(t) {
                this.intensity = t / Math.PI;
            }
        }), this.distance = void 0 !== n ? n : 0, this.angle = void 0 !== r ? r : Math.PI / 3, 
        this.penumbra = void 0 !== i ? i : 0, this.decay = void 0 !== o ? o : 1, this.shadow = new Cc();
    }
    function Fc(t, e) {
        t && t.isGeometry && console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."), 
        mi.call(this, t, e), this.type = "SkinnedMesh", this.bindMode = "attached", this.bindMatrix = new b(), 
        this.bindMatrixInverse = new b();
    }
    Pc.prototype = Object.assign(Object.create(B.prototype), {
        constructor: Pc,
        isLight: !0,
        copy: function(t) {
            return B.prototype.copy.call(this, t), this.color.copy(t.color), this.intensity = t.intensity, 
            this;
        }
    }), Object.assign(Rc.prototype, {
        Zc: new b(),
        qc: new h(),
        Jc: new h(),
        getViewportCount: function() {
            return this.Vc;
        },
        getFrustum: function() {
            return this.Hc;
        },
        updateMatrices: function(t) {
            var e = this.camera, n = this.matrix, r = this.Zc, i = this.Jc, o = this.qc;
            o.setFromMatrixPosition(t.matrixWorld), e.position.copy(o), i.setFromMatrixPosition(t.target.matrixWorld), 
            e.lookAt(i), e.updateMatrixWorld(), r.multiplyMatrices(e.projectionMatrix, e.matrixWorldInverse), 
            this.Hc.setFromProjectionMatrix(r), n.set(.5, 0, 0, .5, 0, .5, 0, .5, 0, 0, .5, .5, 0, 0, 0, 1), 
            n.multiply(e.projectionMatrix), n.multiply(e.matrixWorldInverse);
        },
        getViewport: function(t) {
            return this.Wc[t];
        },
        getFrameExtents: function() {
            return this.zc;
        },
        copy: function(t) {
            return this.camera = t.camera.clone(), this.bias = t.bias, this.radius = t.radius, 
            this.mapSize.copy(t.mapSize), this;
        },
        clone: function() {
            return new this.constructor().copy(this);
        }
    }), jc.prototype = Object.assign(Object.create(Rc.prototype), {
        constructor: jc,
        isDirectionalLightShadow: !0,
        updateMatrices: function(t) {
            Rc.prototype.updateMatrices.call(this, t);
        }
    }), Ic.prototype = Object.assign(Object.create(Pc.prototype), {
        constructor: Ic,
        isDirectionalLight: !0,
        copy: function(t) {
            return Pc.prototype.copy.call(this, t), this.target = t.target.clone(), this.shadow = t.shadow.clone(), 
            this;
        }
    }), Dc.prototype = Object.assign(Object.create(Rc.prototype), {
        constructor: Dc,
        isPointLightShadow: !0,
        updateMatrices: function(t, e) {
            void 0 === e && (e = 0);
            var n = this.camera, r = this.matrix, i = this.qc, o = this.Jc, a = this.Zc;
            i.setFromMatrixPosition(t.matrixWorld), n.position.copy(i), o.copy(n.position), 
            o.add(this.Yc[e]), n.up.copy(this.Xc[e]), n.lookAt(o), n.updateMatrixWorld(), r.makeTranslation(-i.x, -i.y, -i.z), 
            a.multiplyMatrices(n.projectionMatrix, n.matrixWorldInverse), this.Hc.setFromProjectionMatrix(a);
        }
    }), kc.prototype = Object.assign(Object.create(Pc.prototype), {
        constructor: kc,
        isPointLight: !0,
        copy: function(t) {
            return Pc.prototype.copy.call(this, t), this.distance = t.distance, this.decay = t.decay, 
            this.shadow = t.shadow.clone(), this;
        }
    }), Cc.prototype = Object.assign(Object.create(Rc.prototype), {
        constructor: Cc,
        isSpotLightShadow: !0,
        updateMatrices: function(t) {
            var e = this.camera, n = 2 * s.RAD2DEG * t.angle, r = this.mapSize.width / this.mapSize.height, i = t.distance || e.far;
            n === e.fov && r === e.aspect && i === e.far || (e.fov = n, e.aspect = r, e.far = i, 
            e.updateProjectionMatrix()), Rc.prototype.updateMatrices.call(this, t);
        }
    }), Nc.prototype = Object.assign(Object.create(Pc.prototype), {
        constructor: Nc,
        isSpotLight: !0,
        copy: function(t) {
            return Pc.prototype.copy.call(this, t), this.distance = t.distance, this.angle = t.angle, 
            this.penumbra = t.penumbra, this.decay = t.decay, this.target = t.target.clone(), 
            this.shadow = t.shadow.clone(), this;
        }
    }), Fc.prototype = Object.assign(Object.create(mi.prototype), {
        constructor: Fc,
        isSkinnedMesh: !0,
        bind: function(t, e) {
            this.skeleton = t, void 0 === e && (this.updateMatrixWorld(!0), this.skeleton.calculateInverses(), 
            e = this.matrixWorld), this.bindMatrix.copy(e), this.bindMatrixInverse.getInverse(e);
        },
        pose: function() {
            this.skeleton.pose();
        },
        normalizeSkinWeights: function() {
            for (var t = new Bt(), e = this.geometry.attributes.skinWeight, n = 0, r = e.count; n < r; n++) {
                t.x = e.getX(n), t.y = e.getY(n), t.z = e.getZ(n), t.w = e.getW(n);
                var i = 1 / t.manhattanLength();
                i != 1 / 0 ? t.multiplyScalar(i) : t.set(1, 0, 0, 0), e.setXYZW(n, t.x, t.y, t.z, t.w);
            }
        },
        updateMatrixWorld: function(t) {
            mi.prototype.updateMatrixWorld.call(this, t), "attached" === this.bindMode ? this.bindMatrixInverse.getInverse(this.matrixWorld) : "detached" === this.bindMode ? this.bindMatrixInverse.getInverse(this.bindMatrix) : console.warn("THREE.SkinnedMesh: Unrecognized bindMode: " + this.bindMode);
        },
        clone: function() {
            return new this.constructor(this.geometry, this.material).copy(this);
        }
    });
    var Bc = new h(), Uc = new h(), zc = new b(), Gc = new An(), Hc = new ot();
    function Vc(t, e, n) {
        1 === n && console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."), 
        B.call(this), this.type = "Line", this.geometry = void 0 !== t ? t : new Mr(), this.material = void 0 !== e ? e : new Nl();
    }
    Vc.prototype = Object.assign(Object.create(B.prototype), {
        constructor: Vc,
        isLine: !0,
        computeLineDistances: function() {
            var t = this.geometry;
            if (t.isBufferGeometry) if (null === t.index) {
                for (var e = t.attributes.position, n = [ 0 ], r = 1, i = e.count; r < i; r++) Bc.fromBufferAttribute(e, r - 1), 
                Uc.fromBufferAttribute(e, r), n[r] = n[r - 1], n[r] += Bc.distanceTo(Uc);
                t.setAttribute("lineDistance", new yr(n, 1));
            } else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry."); else if (t.isGeometry) {
                var o = t.vertices;
                for ((n = t.lineDistances)[0] = 0, r = 1, i = o.length; r < i; r++) n[r] = n[r - 1], 
                n[r] += o[r - 1].distanceTo(o[r]);
            }
            return this;
        },
        raycast: function(t, e) {
            var n = this.geometry, r = this.matrixWorld, i = t.params.Line.threshold;
            if (null === n.boundingSphere && n.computeBoundingSphere(), Hc.copy(n.boundingSphere), 
            Hc.applyMatrix4(r), Hc.radius += i, !1 !== t.ray.intersectsSphere(Hc)) {
                zc.getInverse(r), Gc.copy(t.ray).applyMatrix4(zc);
                var o = (r = i / ((this.scale.x + this.scale.y + this.scale.z) / 3)) * r, a = new h(), s = new h(), l = new h(), u = new h(), c = this && this.isLineSegments ? 2 : 1;
                if (n.isBufferGeometry) {
                    i = n.index;
                    var f = n.attributes.position.array;
                    if (null !== i) for (var p = i.array, d = 0, y = p.length - 1; d < y; d += c) {
                        var m = p[d], v = p[d + 1];
                        a.fromArray(f, 3 * m), s.fromArray(f, 3 * v), o < Gc.distanceSqToSegment(a, s, u, l) || (u.applyMatrix4(this.matrixWorld), 
                        (g = t.ray.origin.distanceTo(u)) < t.near) || g > t.far || e.push({
                            distance: g,
                            point: l.clone().applyMatrix4(this.matrixWorld),
                            index: d,
                            face: null,
                            faceIndex: null,
                            object: this
                        });
                    } else for (d = 0, y = f.length / 3 - 1; d < y; d += c) a.fromArray(f, 3 * d), s.fromArray(f, 3 * d + 3), 
                    o < Gc.distanceSqToSegment(a, s, u, l) || (u.applyMatrix4(this.matrixWorld), (g = t.ray.origin.distanceTo(u)) < t.near) || g > t.far || e.push({
                        distance: g,
                        point: l.clone().applyMatrix4(this.matrixWorld),
                        index: d,
                        face: null,
                        faceIndex: null,
                        object: this
                    });
                } else if (n.isGeometry) {
                    var g, b = n.vertices, x = b.length;
                    for (d = 0; d < x - 1; d += c) o < Gc.distanceSqToSegment(b[d], b[d + 1], u, l) || (u.applyMatrix4(this.matrixWorld), 
                    (g = t.ray.origin.distanceTo(u)) < t.near) || g > t.far || e.push({
                        distance: g,
                        point: l.clone().applyMatrix4(this.matrixWorld),
                        index: d,
                        face: null,
                        faceIndex: null,
                        object: this
                    });
                }
            }
        },
        clone: function() {
            return new this.constructor(this.geometry, this.material).copy(this);
        }
    });
    var Wc = new h(), Yc = new h();
    function Xc(t, e) {
        Vc.call(this, t, e), this.type = "LineSegments";
    }
    function Zc(t, e) {
        Vc.call(this, t, e), this.type = "LineLoop";
    }
    Xc.prototype = Object.assign(Object.create(Vc.prototype), {
        constructor: Xc,
        isLineSegments: !0,
        computeLineDistances: function() {
            var t = this.geometry;
            if (t.isBufferGeometry) if (null === t.index) {
                for (var e = t.attributes.position, n = [], r = 0, i = e.count; r < i; r += 2) Wc.fromBufferAttribute(e, r), 
                Yc.fromBufferAttribute(e, r + 1), n[r] = 0 === r ? 0 : n[r - 1], n[r + 1] = n[r] + Wc.distanceTo(Yc);
                t.setAttribute("lineDistance", new yr(n, 1));
            } else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry."); else if (t.isGeometry) {
                var o = t.vertices;
                for (n = t.lineDistances, r = 0, i = o.length; r < i; r += 2) Wc.copy(o[r]), Yc.copy(o[r + 1]), 
                n[r] = 0 === r ? 0 : n[r - 1], n[r + 1] = n[r] + Wc.distanceTo(Yc);
            }
            return this;
        }
    }), Zc.prototype = Object.assign(Object.create(Vc.prototype), {
        constructor: Zc,
        isLineLoop: !0
    });
    var qc = new b(), Kc = new An(), Jc = new ot(), Qc = new h();
    function $c(t, e) {
        B.call(this), this.type = "Points", this.geometry = void 0 !== t ? t : new Mr(), 
        this.material = void 0 !== e ? e : new tc(), this.updateMorphTargets();
    }
    function th(t, e, n, r, i, o, a) {
        var s = Kc.distanceSqToPoint(t);
        s < n && (n = new h(), Kc.closestPointToPoint(t, n), n.applyMatrix4(r), (t = i.ray.origin.distanceTo(n)) < i.near || t > i.far || o.push({
            distance: t,
            distanceToRay: Math.sqrt(s),
            point: n,
            index: e,
            face: null,
            object: a
        }));
    }
    function eh() {
        B.call(this), this.type = "Bone";
    }
    $c.prototype = Object.assign(Object.create(B.prototype), {
        constructor: $c,
        isPoints: !0,
        raycast: function(t, e) {
            var n = this.geometry, r = this.matrixWorld, i = t.params.Points.threshold;
            if (null === n.boundingSphere && n.computeBoundingSphere(), Jc.copy(n.boundingSphere), 
            Jc.applyMatrix4(r), Jc.radius += i, !1 !== t.ray.intersectsSphere(Jc)) {
                qc.getInverse(r), Kc.copy(t.ray).applyMatrix4(qc);
                var o = (i = i / ((this.scale.x + this.scale.y + this.scale.z) / 3)) * i;
                if (n.isBufferGeometry) {
                    i = n.index;
                    var a = n.attributes.position.array;
                    if (null !== i) for (var s = i.array, l = 0, u = s.length; l < u; l++) {
                        var c = s[l];
                        Qc.fromArray(a, 3 * c), th(Qc, c, o, r, t, e, this);
                    } else {
                        l = 0;
                        for (var h = a.length / 3; l < h; l++) Qc.fromArray(a, 3 * l), th(Qc, l, o, r, t, e, this);
                    }
                } else {
                    var f = n.vertices;
                    for (l = 0, h = f.length; l < h; l++) th(f[l], l, o, r, t, e, this);
                }
            }
        },
        updateMorphTargets: function() {
            var t, e, n, r = this.geometry;
            if (r.isBufferGeometry) {
                var i = r.morphAttributes, o = Object.keys(i);
                if (0 < o.length) {
                    var a = i[o[0]];
                    if (void 0 !== a) for (this.morphTargetInfluences = [], this.morphTargetDictionary = {}, 
                    t = 0, e = a.length; t < e; t++) n = a[t].name || String(t), this.morphTargetInfluences.push(0), 
                    this.morphTargetDictionary[n] = t;
                }
            } else void 0 !== (i = r.morphTargets) && 0 < i.length && console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.");
        },
        clone: function() {
            return new this.constructor(this.geometry, this.material).copy(this);
        }
    }), eh.prototype = Object.assign(Object.create(B.prototype), {
        constructor: eh,
        isBone: !0
    });
    It = "\\[\\]\\.:\\/";
    var nh = new RegExp("[" + It + "]", "g"), rh = "[^" + It + "]", ih = (It = "[^" + It.replace("\\.", "") + "]", 
    /((?:WC+[\/:])*)/.source.replace("WC", rh)), oh = (It = /(WCOD+)?/.source.replace("WCOD", It), 
    /(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC", rh)), ah = (rh = /\.(WC+)(?:\[(.+)\])?/.source.replace("WC", rh), 
    new RegExp("^" + ih + It + oh + rh + "$")), sh = [ "material", "materials", "bones" ];
    function lh(t, e, n) {
        n = n || uh.parseTrackName(e), this.Kc = t, this.Qc = t.subscribe_(e, n);
    }
    function uh(t, e, n) {
        this.path = e, this.parsedPath = n || uh.parseTrackName(e), this.node = uh.findNode(t, this.parsedPath.nodeName) || t, 
        this.rootNode = t;
    }
    Object.assign(lh.prototype, {
        getValue: function(t, e) {
            this.bind();
            var n = this.Kc.nCachedObjects_;
            void 0 !== (n = this.Qc[n]) && n.getValue(t, e);
        },
        setValue: function(t, e) {
            for (var n = this.Qc, r = this.Kc.nCachedObjects_, i = n.length; r !== i; ++r) n[r].setValue(t, e);
        },
        bind: function() {
            for (var t = this.Qc, e = this.Kc.nCachedObjects_, n = t.length; e !== n; ++e) t[e].bind();
        },
        unbind: function() {
            for (var t = this.Qc, e = this.Kc.nCachedObjects_, n = t.length; e !== n; ++e) t[e].unbind();
        }
    }), Object.assign(uh, {
        Composite: lh,
        create: function(t, e, n) {
            return new (t && t.isAnimationObjectGroup ? uh.Composite : uh)(t, e, n);
        },
        sanitizeNodeName: function(t) {
            return t.replace(/\s/g, "_").replace(nh, "");
        },
        parseTrackName: function(t) {
            if (!(n = ah.exec(t))) throw new Error("PropertyBinding: Cannot parse trackName: " + t);
            var e, n, r = (n = {
                nodeName: n[2],
                objectName: n[3],
                objectIndex: n[4],
                propertyName: n[5],
                propertyIndex: n[6]
            }).nodeName && n.nodeName.lastIndexOf(".");
            if (void 0 !== r && -1 !== r && (e = n.nodeName.substring(r + 1), -1 !== sh.indexOf(e)) && (n.nodeName = n.nodeName.substring(0, r), 
            n.objectName = e), null === n.propertyName || 0 === n.propertyName.length) throw new Error("PropertyBinding: can not parse propertyName from trackName: " + t);
            return n;
        },
        findNode: function(t, e) {
            if (!e || "" === e || "." === e || -1 === e || e === t.name || e === t.uuid) return t;
            if (t.skeleton) {
                var n = t.skeleton.getBoneByName(e);
                if (void 0 !== n) return n;
            }
            return t.children && (n = function t(n) {
                for (var r = 0; r < n.length; r++) {
                    var i = n[r];
                    if (i.name === e || i.uuid === e) return i;
                    if (i = t(i.children)) return i;
                }
                return null;
            }(t.children)) ? n : null;
        }
    }), Object.assign(uh.prototype, {
        $c: function() {},
        tf: function() {},
        BindingType: {
            Direct: 0,
            EntireArray: 1,
            ArrayElement: 2,
            HasFromToArray: 3
        },
        Versioning: {
            None: 0,
            NeedsUpdate: 1,
            MatrixWorldNeedsUpdate: 2
        },
        GetterByBindingType: [ function(t, e) {
            t[e] = this.node[this.propertyName];
        }, function(t, e) {
            for (var n = this.resolvedProperty, r = 0, i = n.length; r !== i; ++r) t[e++] = n[r];
        }, function(t, e) {
            t[e] = this.resolvedProperty[this.propertyIndex];
        }, function(t, e) {
            this.resolvedProperty.toArray(t, e);
        } ],
        SetterByBindingTypeAndVersioning: [ [ function(t, e) {
            this.targetObject[this.propertyName] = t[e];
        }, function(t, e) {
            this.targetObject[this.propertyName] = t[e], this.targetObject.needsUpdate = !0;
        }, function(t, e) {
            this.targetObject[this.propertyName] = t[e], this.targetObject.matrixWorldNeedsUpdate = !0;
        } ], [ function(t, e) {
            for (var n = this.resolvedProperty, r = 0, i = n.length; r !== i; ++r) n[r] = t[e++];
        }, function(t, e) {
            for (var n = this.resolvedProperty, r = 0, i = n.length; r !== i; ++r) n[r] = t[e++];
            this.targetObject.needsUpdate = !0;
        }, function(t, e) {
            for (var n = this.resolvedProperty, r = 0, i = n.length; r !== i; ++r) n[r] = t[e++];
            this.targetObject.matrixWorldNeedsUpdate = !0;
        } ], [ function(t, e) {
            this.resolvedProperty[this.propertyIndex] = t[e];
        }, function(t, e) {
            this.resolvedProperty[this.propertyIndex] = t[e], this.targetObject.needsUpdate = !0;
        }, function(t, e) {
            this.resolvedProperty[this.propertyIndex] = t[e], this.targetObject.matrixWorldNeedsUpdate = !0;
        } ], [ function(t, e) {
            this.resolvedProperty.fromArray(t, e);
        }, function(t, e) {
            this.resolvedProperty.fromArray(t, e), this.targetObject.needsUpdate = !0;
        }, function(t, e) {
            this.resolvedProperty.fromArray(t, e), this.targetObject.matrixWorldNeedsUpdate = !0;
        } ] ],
        getValue: function(t, e) {
            this.bind(), this.getValue(t, e);
        },
        setValue: function(t, e) {
            this.bind(), this.setValue(t, e);
        },
        bind: function() {
            var t = this.node, e = (s = this.parsedPath).objectName, n = s.propertyName, r = s.propertyIndex;
            if (t || (t = uh.findNode(this.rootNode, s.nodeName) || this.rootNode, this.node = t), 
            this.getValue = this.$c, this.setValue = this.tf, t) {
                if (e) {
                    var i = s.objectIndex;
                    switch (e) {
                      case "materials":
                        if (!t.material) return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.", this);
                        if (!t.material.materials) return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.", this);
                        t = t.material.materials;
                        break;

                      case "bones":
                        if (!t.skeleton) return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.", this);
                        t = t.skeleton.bones;
                        for (var o = 0; o < t.length; o++) if (t[o].name === i) {
                            i = o;
                            break;
                        }
                        break;

                      default:
                        if (void 0 === t[e]) return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.", this);
                        t = t[e];
                    }
                    if (void 0 !== i) {
                        if (void 0 === t[i]) return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.", this, t);
                        t = t[i];
                    }
                }
                var a = t[n];
                if (void 0 === a) s = s.nodeName, console.error("THREE.PropertyBinding: Trying to update property for track: " + s + "." + n + " but it wasn't found.", t); else {
                    var s = this.Versioning.None, l = (void 0 !== (this.targetObject = t).needsUpdate ? s = this.Versioning.NeedsUpdate : void 0 !== t.matrixWorldNeedsUpdate && (s = this.Versioning.MatrixWorldNeedsUpdate), 
                    this.BindingType.Direct);
                    if (void 0 !== r) {
                        if ("morphTargetInfluences" === n) {
                            if (!t.geometry) return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.", this);
                            if (t.geometry.isBufferGeometry) {
                                if (!t.geometry.morphAttributes) return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.", this);
                                for (o = 0; o < this.node.geometry.morphAttributes.position.length; o++) if (t.geometry.morphAttributes.position[o].name === r) {
                                    r = o;
                                    break;
                                }
                            } else {
                                if (!t.geometry.morphTargets) return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.", this);
                                for (o = 0; o < this.node.geometry.morphTargets.length; o++) if (t.geometry.morphTargets[o].name === r) {
                                    r = o;
                                    break;
                                }
                            }
                        }
                        l = this.BindingType.ArrayElement, this.resolvedProperty = a, this.propertyIndex = r;
                    } else void 0 !== a.fromArray && void 0 !== a.toArray ? (l = this.BindingType.HasFromToArray, 
                    this.resolvedProperty = a) : Array.isArray(a) ? (l = this.BindingType.EntireArray, 
                    this.resolvedProperty = a) : this.propertyName = n;
                    this.getValue = this.GetterByBindingType[l], this.setValue = this.SetterByBindingTypeAndVersioning[l][s];
                }
            } else console.error("THREE.PropertyBinding: Trying to update node for track: " + this.path + " but it wasn't found.");
        },
        unbind: function() {
            this.node = null, this.getValue = this.nf, this.setValue = this.ef;
        }
    }), Object.assign(uh.prototype, {
        nf: uh.prototype.getValue,
        ef: uh.prototype.setValue
    });
    var ch, hh, fh, ph, dh, yh, mh, vh, gh, bh, xh, wh, Sh, _h = new b(), Eh = new b();
    function Oh(t, e) {
        if (this.bones = (t = t || []).slice(0), this.boneMatrices = new Float32Array(16 * this.bones.length), 
        this.frame = -1, void 0 === e) this.calculateInverses(); else if (this.bones.length === e.length) this.boneInverses = e.slice(0); else {
            console.warn("THREE.Skeleton boneInverses is the wrong length."), this.boneInverses = [];
            for (var n = 0, r = this.bones.length; n < r; n++) this.boneInverses.push(new b());
        }
    }
    function Mh(t) {
        return (Mh = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Th(t) {
        cc.call(this, t), this.dracoLoader = null, this.ddsLoader = null, this.fileLoaders = [];
    }
    function Lh() {
        var t = {};
        return {
            get: function(e) {
                return t[e];
            },
            add: function(e, n) {
                t[e] = n;
            },
            remove: function(e) {
                delete t[e];
            },
            removeAll: function() {
                t = {};
            }
        };
    }
    function Ah(t) {
        if (!t) throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");
        this.name = ch.MSFT_TEXTURE_DDS, this.ddsLoader = t;
    }
    function Ph(t) {
        this.name = ch.KHR_LIGHTS_PUNCTUAL, t = t.extensions && t.extensions[ch.KHR_LIGHTS_PUNCTUAL] || {}, 
        this.lightDefs = t.lights || [];
    }
    function Rh() {
        this.name = ch.KHR_MATERIALS_UNLIT;
    }
    function jh() {
        this.name = ch.KHR_MATERIALS_CLEARCOAT;
    }
    function Ih(t) {
        this.name = ch.KHR_BINARY_GLTF, this.content = null, this.body = null;
        var e = new DataView(t, 0, fh);
        if (this.header = {
            magic: Zu(new Uint8Array(t.slice(0, 4))),
            version: e.getUint32(4, !0),
            length: e.getUint32(8, !0)
        }, this.header.magic !== hh) throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");
        if (this.header.version < 2) throw new Error("THREE.GLTFLoader: Legacy binary file detected.");
        for (var n = new DataView(t, fh), r = 0; r < n.byteLength; ) {
            var i, o = n.getUint32(r, !0), a = (r += 4, n.getUint32(r, !0));
            r += 4, a === ph.JSON ? (i = new Uint8Array(t, fh + r, o), this.content = Zu(i)) : a === ph.BIN && (this.body = t.slice(i = fh + r, i + o)), 
            r += o;
        }
        if (null === this.content) throw new Error("THREE.GLTFLoader: JSON content not found.");
    }
    function Dh(t, e) {
        if (!e) throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");
        this.name = ch.KHR_DRACO_MESH_COMPRESSION, this.json = t, this.dracoLoader = e, 
        this.dracoLoader.preload();
    }
    function kh() {
        this.name = ch.KHR_TEXTURE_TRANSFORM;
    }
    function Ch(t) {
        ec.call(this), this.isGLTFSpecularGlossinessMaterial = !0, [ "#ifdef USE_SPECULARMAP", "\tuniform sampler2D specularMap;", "#endif" ].join("\n");
        var e = [ "#ifdef USE_GLOSSINESSMAP", "\tuniform sampler2D glossinessMap;", "#endif" ].join("\n"), n = [ "vec3 specularFactor = specular;", "#ifdef USE_SPECULARMAP", "\tvec4 texelSpecular = texture2D( specularMap, vUv );", "\ttexelSpecular = sRGBToLinear( texelSpecular );", "\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture", "\tspecularFactor *= texelSpecular.rgb;", "#endif" ].join("\n"), r = [ "float glossinessFactor = glossiness;", "#ifdef USE_GLOSSINESSMAP", "\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );", "\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture", "\tglossinessFactor *= texelGlossiness.a;", "#endif" ].join("\n"), i = [ "PhysicalMaterial material;", "material.diffuseColor = diffuseColor.rgb;", "vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );", "float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );", "material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.", "material.specularRoughness += geometryRoughness;", "material.specularRoughness = min( material.specularRoughness, 1.0 );", "material.specularColor = specularFactor.rgb;" ].join("\n"), o = {
            specular: {
                value: new Xt().setHex(16777215)
            },
            glossiness: {
                value: 1
            },
            specularMap: {
                value: null
            },
            glossinessMap: {
                value: null
            }
        };
        this.if = o, this.onBeforeCompile = function(t) {
            for (var a in o) t.uniforms[a] = o[a];
            t.fragmentShader = t.fragmentShader.replace("uniform float roughness;", "uniform vec3 specular;"), 
            t.fragmentShader = t.fragmentShader.replace("uniform float metalness;", "uniform float glossiness;"), 
            t.fragmentShader = t.fragmentShader.replace("#include <metalnessmap_pars_fragment>", e), 
            t.fragmentShader = t.fragmentShader.replace("#include <roughnessmap_fragment>", n), 
            t.fragmentShader = t.fragmentShader.replace("#include <metalnessmap_fragment>", r), 
            t.fragmentShader = t.fragmentShader.replace("#include <lights_physical_fragment>", i);
        }, Object.defineProperties(this, {
            specular: {
                get: function() {
                    return o.specular.value;
                },
                set: function(t) {
                    o.specular.value = t;
                }
            },
            specularMap: {
                get: function() {
                    return o.specularMap.value;
                },
                set: function(t) {
                    o.specularMap.value = t;
                }
            },
            glossiness: {
                get: function() {
                    return o.glossiness.value;
                },
                set: function(t) {
                    o.glossiness.value = t;
                }
            },
            glossinessMap: {
                get: function() {
                    return o.glossinessMap.value;
                },
                set: function(t) {
                    (o.glossinessMap.value = t) ? (this.defines.USE_GLOSSINESSMAP = "", this.defines.USE_ROUGHNESSMAP = "") : (delete this.defines.USE_ROUGHNESSMAP, 
                    delete this.defines.USE_GLOSSINESSMAP);
                }
            }
        }), delete this.metalness, delete this.roughness, delete this.metalnessMap, delete this.roughnessMap, 
        this.setValues(t);
    }
    function Nh() {
        return {
            name: ch.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,
            specularGlossinessParams: [ "color", "map", "lightMap", "lightMapIntensity", "aoMap", "aoMapIntensity", "emissive", "emissiveIntensity", "emissiveMap", "bumpMap", "bumpScale", "normalMap", "normalMapType", "displacementMap", "displacementScale", "displacementBias", "specularMap", "specular", "glossinessMap", "glossiness", "alphaMap", "envMap", "envMapIntensity", "refractionRatio" ],
            getMaterialType: function() {
                return Ch;
            },
            extendParams: function(t, e, n) {
                e = e.extensions[this.name];
                var r, i = (t.color = new Xt(1, 1, 1), t.opacity = 1, []);
                return Array.isArray(e.diffuseFactor) && (r = e.diffuseFactor, t.color.fromArray(r), 
                t.opacity = r[3]), void 0 !== e.diffuseTexture && i.push(n.assignTexture(t, "map", e.diffuseTexture)), 
                t.emissive = new Xt(0, 0, 0), t.glossiness = void 0 !== e.glossinessFactor ? e.glossinessFactor : 1, 
                t.specular = new Xt(1, 1, 1), Array.isArray(e.specularFactor) && t.specular.fromArray(e.specularFactor), 
                void 0 !== e.specularGlossinessTexture && (r = e.specularGlossinessTexture, i.push(n.assignTexture(t, "glossinessMap", r)), 
                i.push(n.assignTexture(t, "specularMap", r))), Promise.all(i);
            },
            createMaterial: function(t) {
                var e = new Ch(t);
                return e.fog = !0, e.color = t.color, e.map = void 0 === t.map ? null : t.map, e.lightMap = null, 
                e.lightMapIntensity = 1, e.aoMap = void 0 === t.aoMap ? null : t.aoMap, e.aoMapIntensity = 1, 
                e.emissive = t.emissive, e.emissiveIntensity = 1, e.emissiveMap = void 0 === t.emissiveMap ? null : t.emissiveMap, 
                e.bumpMap = void 0 === t.bumpMap ? null : t.bumpMap, e.bumpScale = 1, e.normalMap = void 0 === t.normalMap ? null : t.normalMap, 
                e.normalMapType = 0, t.normalScale && (e.normalScale = t.normalScale), e.displacementMap = null, 
                e.displacementScale = 1, e.displacementBias = 0, e.specularMap = void 0 === t.specularMap ? null : t.specularMap, 
                e.specular = t.specular, e.glossinessMap = void 0 === t.glossinessMap ? null : t.glossinessMap, 
                e.glossiness = t.glossiness, e.alphaMap = null, e.envMap = void 0 === t.envMap ? null : t.envMap, 
                e.envMapIntensity = 1, e.refractionRatio = .98, e;
            }
        };
    }
    function Fh() {
        this.name = ch.KHR_MESH_QUANTIZATION;
    }
    function Bh(t, e, n, r) {
        dc.call(this, t, e, n, r);
    }
    function Uh(t, e) {
        return "string" != typeof t || "" === t ? "" : (/^https?:\/\//i.test(e) && /^\//.test(t) && (e = e.replace(/(^https?:\/\/[^\/]+).*/i, "$1")), 
        /^(https?:)?\/\//i.test(t) || jt.a.environment == Ut.a.WX && jt.a.WX_USER_DATA_PATH.test(t) || /^data:.*,.*$/i.test(t) || /^blob:.*$/i.test(t) ? t : e + t);
    }
    function zh(t, e, n) {
        for (var r in n.extensions) void 0 === t[r] && (e.userData.gltfExtensions = e.userData.gltfExtensions || {}, 
        e.userData.gltfExtensions[r] = n.extensions[r]);
    }
    function Gh(t, e) {
        void 0 !== e.extras && ("object" === Mh(e.extras) ? Object.assign(t.userData, e.extras) : console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, " + e.extras));
    }
    function Hh(t) {
        for (var e = "", n = Object.keys(t).sort(), r = 0, i = n.length; r < i; r++) e += n[r] + ":" + t[n[r]] + ";";
        return e;
    }
    function Vh(t, e, n) {
        this.json = t || {}, this.extensions = e || {}, this.options = n || {}, this.cache = new Lh(), 
        this.primitiveCache = {}, this.textureLoader = new Qu(this.options.manager), this.textureLoader.setCrossOrigin(this.options.crossOrigin), 
        this.fileLoader = new fc(this.options.manager), this.fileLoader.setResponseType("arraybuffer"), 
        "use-credentials" === this.options.crossOrigin && this.fileLoader.setWithCredentials(!0);
    }
    function Wh(t, e, n) {
        var r, i = e.attributes, o = [];
        for (r in i) {
            var a = gh[r] || r.toLowerCase();
            a in t.attributes || o.push(function(e, r) {
                return n.getDependency("accessor", e).then(function(e) {
                    t.setAttribute(r, e);
                });
            }(i[r], a));
        }
        void 0 === e.indices || t.index || (s = n.getDependency("accessor", e.indices).then(function(e) {
            t.setIndex(e);
        }), o.push(s)), Gh(t, e);
        var s = t, l = e, u = n, c = l.attributes, f = new nt();
        if (void 0 !== c.POSITION) {
            var p = (x = u.json.accessors[c.POSITION]).min, d = x.max;
            if (void 0 === p || void 0 === d) console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION."); else {
                f.set(new h(p[0], p[1], p[2]), new h(d[0], d[1], d[2]));
                var y = l.targets;
                if (void 0 !== y) {
                    for (var m = new h(), v = new h(), g = 0, b = y.length; g < b; g++) {
                        var x, w = y[g];
                        void 0 !== w.POSITION && (p = (x = u.json.accessors[w.POSITION]).min, d = x.max, 
                        void 0 !== p && void 0 !== d ? (v.setX(Math.max(Math.abs(p[0]), Math.abs(d[0]))), 
                        v.setY(Math.max(Math.abs(p[1]), Math.abs(d[1]))), v.setZ(Math.max(Math.abs(p[2]), Math.abs(d[2]))), 
                        m.max(v)) : console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION."));
                    }
                    f.expandByVector(m);
                }
                s.boundingBox = f, c = new ot(), f.getCenter(c.center), c.radius = f.min.distanceTo(f.max) / 2, 
                s.boundingSphere = c;
            }
        }
        return Promise.all(o).then(function() {
            if (void 0 === e.targets) return t;
            for (var r = t, i = e.targets, o = n, a = !1, s = !1, l = 0, u = i.length; l < u && (void 0 !== (p = i[l]).POSITION && (a = !0), 
            void 0 !== p.NORMAL && (s = !0), !a || !s); l++) ;
            if (!a && !s) return Promise.resolve(r);
            var c = [], h = [];
            for (l = 0, u = i.length; l < u; l++) {
                var f, p = i[l];
                a && (f = void 0 !== p.POSITION ? o.getDependency("accessor", p.POSITION) : r.attributes.position, 
                c.push(f)), s && (f = void 0 !== p.NORMAL ? o.getDependency("accessor", p.NORMAL) : r.attributes.normal, 
                h.push(f));
            }
            return Promise.all([ Promise.all(c), Promise.all(h) ]).then(function(t) {
                var e = t[0];
                t = t[1];
                return a && (r.morphAttributes.position = e), s && (r.morphAttributes.normal = t), 
                r.morphTargetsRelative = !0, r;
            });
        });
    }
    function Yh(t, e) {
        var n = t.getIndex();
        if (null === n) {
            var r = [], i = t.getAttribute("position");
            if (void 0 === i) return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."), 
            t;
            for (var o = 0; o < i.count; o++) r.push(o);
            t.setIndex(r), n = t.getIndex();
        }
        var a = n.count - 2, s = [];
        if (2 === e) for (o = 1; o <= a; o++) s.push(n.getX(0)), s.push(n.getX(o)), s.push(n.getX(o + 1)); else for (o = 0; o < a; o++) o % 2 == 0 ? (s.push(n.getX(o)), 
        s.push(n.getX(o + 1)), s.push(n.getX(o + 2))) : (s.push(n.getX(o + 2)), s.push(n.getX(o + 1)), 
        s.push(n.getX(o)));
        return s.length / 3 != a && console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles."), 
        (e = t.clone()).setIndex(s), e;
    }
    Object.assign(Oh.prototype, {
        calculateInverses: function() {
            this.boneInverses = [];
            for (var t = 0, e = this.bones.length; t < e; t++) {
                var n = new b();
                this.bones[t] && n.getInverse(this.bones[t].matrixWorld), this.boneInverses.push(n);
            }
        },
        pose: function() {
            for (var t, e = 0, n = this.bones.length; e < n; e++) (t = this.bones[e]) && t.matrixWorld.getInverse(this.boneInverses[e]);
            for (e = 0, n = this.bones.length; e < n; e++) (t = this.bones[e]) && (t.parent && t.parent.isBone ? (t.matrix.getInverse(t.parent.matrixWorld), 
            t.matrix.multiply(t.matrixWorld)) : t.matrix.copy(t.matrixWorld), t.matrix.decompose(t.position, t.quaternion, t.scale));
        },
        update: function() {
            for (var t = this.bones, e = this.boneInverses, n = this.boneMatrices, r = this.boneTexture, i = 0, o = t.length; i < o; i++) {
                var a = t[i] ? t[i].matrixWorld : Eh;
                _h.multiplyMatrices(a, e[i]), _h.toArray(n, 16 * i);
            }
            void 0 !== r && (r.needsUpdate = !0);
        },
        clone: function() {
            return new Oh(this.bones, this.boneInverses);
        },
        getBoneByName: function(t) {
            for (var e = 0, n = this.bones.length; e < n; e++) {
                var r = this.bones[e];
                if (r.name === t) return r;
            }
        },
        dispose: function() {
            this.boneTexture && (this.boneTexture.dispose(), this.boneTexture = void 0);
        }
    }), Th.prototype = Object.assign(Object.create(cc.prototype), {
        constructor: Th,
        load: function(t, e, n, r) {
            function i(t) {
                r ? r(t) : console.error(t);
            }
            var o = this, a = "" !== this.resourcePath ? this.resourcePath : "" !== this.path ? this.path : qu(t), s = (o.manager.itemStart(t), 
            new fc(o.manager));
            return this.fileLoaders.push(s), s.setPath(this.path), s.setResponseType("arraybuffer"), 
            "use-credentials" === o.crossOrigin && s.setWithCredentials(!0), s.load(t, function(t) {
                try {
                    o.parse(t, a, function(n) {
                        e(n, t);
                    }, i);
                } catch (t) {
                    i(t);
                }
            }, n, i);
        },
        setDRACOLoader: function(t) {
            return this.dracoLoader = t, this;
        },
        setDDSLoader: function(t) {
            return this.ddsLoader = t, this;
        },
        parse: function(t, e, n, r) {
            var i, o = {};
            if ("string" == typeof t) i = t; else if (Zu(new Uint8Array(t, 0, 4)) === hh) {
                try {
                    o[ch.KHR_BINARY_GLTF] = new Ih(t);
                } catch (t) {
                    return void (r && r(t));
                }
                i = o[ch.KHR_BINARY_GLTF].content;
            } else i = Zu(new Uint8Array(t));
            var a = JSON.parse(i);
            if (void 0 === a.asset || a.asset.version[0] < 2) r && r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")); else {
                if (a.extensionsUsed) for (var s = 0; s < a.extensionsUsed.length; ++s) {
                    var l = a.extensionsUsed[s], u = a.extensionsRequired || [];
                    switch (l) {
                      case ch.KHR_LIGHTS_PUNCTUAL:
                        o[l] = new Ph(a);
                        break;

                      case ch.KHR_MATERIALS_CLEARCOAT:
                        o[l] = new jh();
                        break;

                      case ch.KHR_MATERIALS_UNLIT:
                        o[l] = new Rh();
                        break;

                      case ch.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:
                        o[l] = new Nh();
                        break;

                      case ch.KHR_DRACO_MESH_COMPRESSION:
                        o[l] = new Dh(a, this.dracoLoader);
                        break;

                      case ch.MSFT_TEXTURE_DDS:
                        o[l] = new Ah(this.ddsLoader);
                        break;

                      case ch.KHR_TEXTURE_TRANSFORM:
                        o[l] = new kh();
                        break;

                      case ch.KHR_MESH_QUANTIZATION:
                        o[l] = new Fh();
                        break;

                      default:
                        0 <= u.indexOf(l) && console.warn('THREE.GLTFLoader: Unknown extension "' + l + '".');
                    }
                }
                new Vh(a, o, {
                    path: e || this.resourcePath || "",
                    crossOrigin: this.crossOrigin,
                    manager: this.manager
                }).parse(n, r);
            }
        }
    }), ch = {
        KHR_BINARY_GLTF: "KHR_binary_glTF",
        KHR_DRACO_MESH_COMPRESSION: "KHR_draco_mesh_compression",
        KHR_LIGHTS_PUNCTUAL: "KHR_lights_punctual",
        KHR_MATERIALS_CLEARCOAT: "KHR_materials_clearcoat",
        KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: "KHR_materials_pbrSpecularGlossiness",
        KHR_MATERIALS_UNLIT: "KHR_materials_unlit",
        KHR_TEXTURE_TRANSFORM: "KHR_texture_transform",
        KHR_MESH_QUANTIZATION: "KHR_mesh_quantization",
        MSFT_TEXTURE_DDS: "MSFT_texture_dds"
    }, Ph.prototype.loadLight = function(t) {
        var e, n = this.lightDefs[t], r = new Xt(16777215), i = (void 0 !== n.color && r.fromArray(n.color), 
        void 0 !== n.range ? n.range : 0);
        switch (n.type) {
          case "directional":
            (e = new Ic(r)).target.position.set(0, 0, -1), e.add(e.target);
            break;

          case "point":
            (e = new kc(r)).distance = i;
            break;

          case "spot":
            (e = new Nc(r)).distance = i, n.spot = n.spot || {}, n.spot.innerConeAngle = void 0 !== n.spot.innerConeAngle ? n.spot.innerConeAngle : 0, 
            n.spot.outerConeAngle = void 0 !== n.spot.outerConeAngle ? n.spot.outerConeAngle : Math.PI / 4, 
            e.angle = n.spot.outerConeAngle, e.penumbra = 1 - n.spot.innerConeAngle / n.spot.outerConeAngle, 
            e.target.position.set(0, 0, -1), e.add(e.target);
            break;

          default:
            throw new Error('THREE.GLTFLoader: Unexpected light type, "' + n.type + '".');
        }
        return e.position.set(0, 0, 0), e.decay = 2, void 0 !== n.intensity && (e.intensity = n.intensity), 
        e.name = n.name || "light_" + t, Promise.resolve(e);
    }, Rh.prototype.getMaterialType = function() {
        return Qr;
    }, Rh.prototype.extendParams = function(t, e, n) {
        var r, i = [];
        return (e = (t.color = new Xt(1, 1, 1), t.opacity = 1, e.pbrMetallicRoughness)) && (Array.isArray(e.baseColorFactor) && (r = e.baseColorFactor, 
        t.color.fromArray(r), t.opacity = r[3]), void 0 !== e.baseColorTexture) && i.push(n.assignTexture(t, "map", e.baseColorTexture)), 
        Promise.all(i);
    }, jh.prototype.getMaterialType = function() {
        return nc;
    }, jh.prototype.extendParams = function(t, e, n) {
        var r = [];
        return void 0 !== (e = e.extensions[this.name]).clearcoatFactor && (t.clearcoat = e.clearcoatFactor), 
        void 0 !== e.clearcoatTexture && r.push(n.assignTexture(t, "clearcoatMap", e.clearcoatTexture)), 
        void 0 !== e.clearcoatRoughnessFactor && (t.clearcoatRoughness = e.clearcoatRoughnessFactor), 
        void 0 !== e.clearcoatRoughnessTexture && r.push(n.assignTexture(t, "clearcoatRoughnessMap", e.clearcoatRoughnessTexture)), 
        void 0 !== e.clearcoatNormalTexture && (r.push(n.assignTexture(t, "clearcoatNormalMap", e.clearcoatNormalTexture)), 
        void 0 !== e.clearcoatNormalTexture.scale) && (n = e.clearcoatNormalTexture.scale, 
        t.clearcoatNormalScale = new Mt(n, n)), Promise.all(r);
    }, hh = "glTF", fh = 12, ph = {
        JSON: 1313821514,
        BIN: 5130562
    }, Dh.prototype.decodePrimitive = function(t, e) {
        var n, r = this.json, i = this.dracoLoader, o = t.extensions[this.name].bufferView, a = t.extensions[this.name].attributes, s = {}, l = {}, u = {};
        for (n in a) {
            var c = gh[n] || n.toLowerCase();
            s[c] = a[n];
        }
        for (n in t.attributes) {
            var h, f;
            c = gh[n] || n.toLowerCase();
            void 0 !== a[n] && (h = r.accessors[t.attributes[n]], f = dh[h.componentType], u[c] = f, 
            l[c] = !0 === h.normalized);
        }
        return e.getDependency("bufferView", o).then(function(t) {
            return new Promise(function(e) {
                i.decodeDracoFile(t, function(t) {
                    for (var n in t.attributes) {
                        var r = t.attributes[n];
                        void 0 !== (n = l[n]) && (r.normalized = n);
                    }
                    e(t);
                }, s, u);
            });
        });
    }, kh.prototype.extendTexture = function(t, e) {
        return t = t.clone(), void 0 !== e.offset && t.offset.fromArray(e.offset), void 0 !== e.rotation && (t.rotation = e.rotation), 
        void 0 !== e.scale && t.repeat.fromArray(e.scale), void 0 !== e.texCoord && console.warn('THREE.GLTFLoader: Custom UV sets in "' + this.name + '" extension not yet supported.'), 
        t.needsUpdate = !0, t;
    }, ((Ch.prototype = Object.create(ec.prototype)).constructor = Ch).prototype.copy = function(t) {
        return ec.prototype.copy.call(this, t), this.specularMap = t.specularMap, this.specular.copy(t.specular), 
        this.glossinessMap = t.glossinessMap, this.glossiness = t.glossiness, delete this.metalness, 
        delete this.roughness, delete this.metalnessMap, delete this.roughnessMap, this;
    }, ((Bh.prototype = Object.create(dc.prototype)).constructor = Bh).prototype.beforeStart_ = Bh.prototype.copySampleValue_ = function(t) {
        for (var e = this.resultBuffer, n = this.sampleValues, r = this.valueSize, i = t * r * 3 + r, o = 0; o !== r; o++) e[o] = n[i + o];
        return e;
    }, Bh.prototype.afterEnd_ = Bh.prototype.copySampleValue_, Bh.prototype.interpolate_ = function(t, e, n, r) {
        for (var i = this.resultBuffer, o = this.sampleValues, a = this.valueSize, s = 2 * a, l = 3 * a, u = r - e, c = t * l, h = c - l, f = -2 * (e = (n = (r = (n - e) / u) * r) * r) + 3 * n, p = e - n, d = 1 - f, y = p - n + r, m = 0; m !== a; m++) {
            var v = o[h + m + a], g = o[h + m + s] * u, b = o[c + m + a], x = o[c + m] * u;
            i[m] = d * v + y * g + f * b + p * x;
        }
        return i;
    }, dh = {
        5120: Int8Array,
        5121: Uint8Array,
        5122: Int16Array,
        5123: Uint16Array,
        5125: Uint32Array,
        5126: Float32Array
    }, yh = {
        9728: yt,
        9729: mt,
        9984: 1004,
        9985: 1007,
        9986: 1005,
        9987: 1008
    }, mh = {
        33071: dt,
        33648: 1002,
        10497: pt
    }, vh = {
        SCALAR: 1,
        VEC2: 2,
        VEC3: 3,
        VEC4: 4,
        MAT2: 4,
        MAT3: 9,
        MAT4: 16
    }, gh = {
        POSITION: "position",
        NORMAL: "normal",
        TANGENT: "tangent",
        TEXCOORD_0: "uv",
        TEXCOORD_1: "uv2",
        COLOR_0: "color",
        WEIGHTS_0: "skinWeight",
        JOINTS_0: "skinIndex"
    }, bh = {
        scale: "scale",
        translation: "position",
        rotation: "quaternion",
        weights: "morphTargetInfluences"
    }, xh = {
        CUBICSPLINE: void 0,
        LINEAR: wt,
        STEP: xt
    }, wh = {
        "image/png": bt,
        "image/jpeg": gt
    }, Vh.prototype.parse = function(t, e) {
        var n = this, r = this.json, i = this.extensions;
        this.cache.removeAll(), this.markDefs(), Promise.all([ this.getDependencies("scene"), this.getDependencies("animation"), this.getDependencies("camera") ]).then(function(e) {
            e = {
                scene: e[0][r.scene || 0],
                scenes: e[0],
                animations: e[1],
                cameras: e[2],
                asset: r.asset,
                parser: n,
                userData: {}
            }, zh(i, e, r), Gh(e, r), t(e);
        }).catch(e);
    }, Vh.prototype.markDefs = function() {
        for (var t = this.json.nodes || [], e = this.json.skins || [], n = this.json.meshes || [], r = {}, i = {}, o = 0, a = e.length; o < a; o++) for (var s = e[o].joints, l = 0, u = s.length; l < u; l++) t[s[l]].isBone = !0;
        for (var c = 0, h = t.length; c < h; c++) {
            var f = t[c];
            void 0 !== f.mesh && (void 0 === r[f.mesh] && (r[f.mesh] = i[f.mesh] = 0), r[f.mesh]++, 
            void 0 !== f.skin) && (n[f.mesh].isSkinnedMesh = !0);
        }
        this.json.meshReferences = r, this.json.meshUses = i;
    }, Vh.prototype.getDependency = function(t, e) {
        var n = t + ":" + e, r = this.cache.get(n);
        if (!r) {
            switch (t) {
              case "scene":
                r = this.loadScene(e);
                break;

              case "node":
                r = this.loadNode(e);
                break;

              case "mesh":
                r = this.loadMesh(e);
                break;

              case "accessor":
                r = this.loadAccessor(e);
                break;

              case "bufferView":
                r = this.loadBufferView(e);
                break;

              case "buffer":
                r = this.loadBuffer(e);
                break;

              case "material":
                r = this.loadMaterial(e);
                break;

              case "texture":
                r = this.loadTexture(e);
                break;

              case "skin":
                r = this.loadSkin(e);
                break;

              case "animation":
                r = this.loadAnimation(e);
                break;

              case "camera":
                r = this.loadCamera(e);
                break;

              case "light":
                r = this.extensions[ch.KHR_LIGHTS_PUNCTUAL].loadLight(e);
                break;

              default:
                throw new Error("Unknown type: " + t);
            }
            this.cache.add(n, r);
        }
        return r;
    }, Vh.prototype.getDependencies = function(t) {
        var e, n, r = this.cache.get(t);
        return r || (n = (e = this).json[t + ("mesh" === t ? "es" : "s")] || [], r = Promise.all(n.map(function(n, r) {
            return e.getDependency(t, r);
        })), this.cache.add(t, r)), r;
    }, Vh.prototype.loadBuffer = function(t) {
        var e, n = this.json.buffers[t], r = this.fileLoader;
        if (n.type && "arraybuffer" !== n.type) throw new Error("THREE.GLTFLoader: " + n.type + " buffer type is not supported.");
        return void 0 === n.uri && 0 === t ? Promise.resolve(this.extensions[ch.KHR_BINARY_GLTF].body) : (e = this.options, 
        new Promise(function(t, i) {
            r.load(Uh(n.uri, e.path), t, void 0, function() {
                i(new Error('THREE.GLTFLoader: Failed to load buffer "' + n.uri + '".'));
            });
        }));
    }, Vh.prototype.loadBufferView = function(t) {
        var e = this.json.bufferViews[t];
        return this.getDependency("buffer", e.buffer).then(function(t) {
            var n = e.byteLength || 0, r = e.byteOffset || 0;
            return t.slice(r, r + n);
        });
    }, Vh.prototype.loadAccessor = function(t) {
        var e = this, n = this.json, r = this.json.accessors[t];
        return void 0 === r.bufferView && void 0 === r.sparse ? Promise.resolve(null) : (t = [], 
        void 0 !== r.bufferView ? t.push(this.getDependency("bufferView", r.bufferView)) : t.push(null), 
        void 0 !== r.sparse && (t.push(this.getDependency("bufferView", r.sparse.indices.bufferView)), 
        t.push(this.getDependency("bufferView", r.sparse.values.bufferView))), Promise.all(t).then(function(t) {
            var i = t[0], o = vh[r.type], a = dh[r.componentType], s = a.BYTES_PER_ELEMENT, l = r.byteOffset || 0, u = void 0 !== r.bufferView ? n.bufferViews[r.bufferView].byteStride : void 0, c = !0 === r.normalized, h = u && u !== s * o ? (f = Math.floor(l / u), 
            p = "InterleavedBuffer:" + r.bufferView + ":" + r.componentType + ":" + f + ":" + r.count, 
            (d = e.cache.get(p)) || (d = new Ta(new a(i, f * u, r.count * u / s), u / s), e.cache.add(p, d)), 
            new Aa(d, o, l % u / s, c)) : new sr(null === i ? new a(r.count * o) : new a(i, l, r.count * o), o, c);
            if (void 0 !== r.sparse) {
                var f = dh[r.sparse.indices.componentType], p = r.sparse.indices.byteOffset || 0, d = r.sparse.values.byteOffset || 0, y = new f(t[1], p, r.sparse.count * vh.SCALAR), m = new a(t[2], d, r.sparse.count * o);
                null !== i && (h = new sr(h.array.slice(), h.itemSize, h.normalized));
                for (var v = 0, g = y.length; v < g; v++) {
                    var b = y[v];
                    if (h.setX(b, m[v * o]), 2 <= o && h.setY(b, m[v * o + 1]), 3 <= o && h.setZ(b, m[v * o + 2]), 
                    4 <= o && h.setW(b, m[v * o + 3]), 5 <= o) throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.");
                }
            }
            return h;
        }));
    }, Sh = 0, Vh.prototype.loadTexture = function(t) {
        var e, n = this, r = this.json, i = this.options, o = this.textureLoader, a = (jt.a.environment === Ut.a.BROWSER && (e = self.URL || self.webkitURL), 
        r.textures[t]), s = a.extensions || {}, l = s[ch.MSFT_TEXTURE_DDS] ? r.images[s[ch.MSFT_TEXTURE_DDS].source] : r.images[a.source], u = l.uri, c = !1;
        return void 0 !== l.bufferView && (u = n.getDependency("bufferView", l.bufferView).then(function(t) {
            var n, r;
            return jt.a.environment === Ut.a.BROWSER ? (c = !0, n = new Blob([ t ], {
                type: l.mimeType
            }), u = e.createObjectURL(n)) : (r = wx.getFileSystemManager(), new Promise(function(e, n) {
                var i = wx.env.USER_DATA_PATH + "/" + Sh + ".png";
                Sh++, r.writeFile({
                    filePath: i,
                    data: t,
                    encoding: "binary",
                    success: function(t) {
                        e(i);
                    },
                    fail: function(t) {
                        console.error("******", i, t), n(i);
                    }
                });
            }));
        })), Promise.resolve(u).then(function(t) {
            var e = (e = i.manager.getHandler(t)) || (s[ch.MSFT_TEXTURE_DDS] ? n.extensions[ch.MSFT_TEXTURE_DDS].ddsLoader : o);
            return new Promise(function(n, r) {
                e.load(Uh(t, i.path), n, void 0, r);
            });
        }).then(function(t) {
            !0 === c && e.revokeObjectURL(u), t.flipY = !1, a.name && (t.name = a.name), l.mimeType in wh && (t.format = wh[l.mimeType]);
            var n = (r.samplers || {})[a.sampler] || {};
            return t.magFilter = yh[n.magFilter] || mt, t.minFilter = yh[n.minFilter] || 1008, 
            t.wrapS = mh[n.wrapS] || pt, t.wrapT = mh[n.wrapT] || pt, t;
        });
    }, Vh.prototype.assignTexture = function(t, e, n) {
        var r = this;
        return this.getDependency("texture", n.index).then(function(i) {
            if (!i.isCompressedTexture) switch (e) {
              case "aoMap":
              case "emissiveMap":
              case "metalnessMap":
              case "normalMap":
              case "roughnessMap":
                i.format = gt;
            }
            var o;
            void 0 === n.texCoord || 0 == n.texCoord || "aoMap" === e && 1 == n.texCoord || console.warn("THREE.GLTFLoader: Custom UV set " + n.texCoord + " for texture " + e + " not yet supported."), 
            r.extensions[ch.KHR_TEXTURE_TRANSFORM] && (o = void 0 !== n.extensions ? n.extensions[ch.KHR_TEXTURE_TRANSFORM] : void 0) && (i = r.extensions[ch.KHR_TEXTURE_TRANSFORM].extendTexture(i, o)), 
            t[e] = i;
        });
    }, Vh.prototype.assignFinalMaterial = function(t) {
        var e, n, r = t.geometry, i = t.material, o = void 0 !== r.attributes.tangent, a = void 0 !== r.attributes.color, s = void 0 === r.attributes.normal, l = !0 === t.isSkinnedMesh, u = 0 < Object.keys(r.morphAttributes).length, c = u && void 0 !== r.morphAttributes.normal;
        t.isPoints ? (e = "PointsMaterial:" + i.uuid, (n = this.cache.get(e)) || (n = new tc(), 
        Cr.prototype.copy.call(n, i), n.color.copy(i.color), n.map = i.map, n.sizeAttenuation = !1, 
        this.cache.add(e, n)), i = n) : t.isLine && (e = "LineBasicMaterial:" + i.uuid, 
        (n = this.cache.get(e)) || (n = new Nl(), Cr.prototype.copy.call(n, i), n.color.copy(i.color), 
        this.cache.add(e, n)), i = n), (o || a || s || l || u) && (e = "ClonedMaterial:" + i.uuid + ":", 
        i.isGLTFSpecularGlossinessMaterial && (e += "specular-glossiness:"), l && (e += "skinning:"), 
        o && (e += "vertex-tangents:"), a && (e += "vertex-colors:"), s && (e += "flat-shading:"), 
        u && (e += "morph-targets:"), c && (e += "morph-normals:"), (n = this.cache.get(e)) || (n = i.clone(), 
        l && (n.skinning = !0), o && (n.vertexTangents = !0), a && (n.vertexColors = !0), 
        s && (n.flatShading = !0), u && (n.morphTargets = !0), c && (n.morphNormals = !0), 
        this.cache.add(e, n)), i = n), i.aoMap && void 0 === r.attributes.uv2 && void 0 !== r.attributes.uv && r.setAttribute("uv2", new sr(r.attributes.uv.array, 2)), 
        i.normalScale && !o && (i.normalScale.y = -i.normalScale.y), i.clearcoatNormalScale && !o && (i.clearcoatNormalScale.y = -i.clearcoatNormalScale.y), 
        t.material = i;
    }, Vh.prototype.loadMaterial = function(t) {
        var e, n, r = this.json, i = this.extensions, o = r.materials[t], a = {}, s = (t = [], 
        (r = o.extensions || {})[ch.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS] ? (n = i[ch.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS], 
        e = n.getMaterialType(), t.push(n.extendParams(a, o, this))) : r[ch.KHR_MATERIALS_UNLIT] ? (n = i[ch.KHR_MATERIALS_UNLIT], 
        e = n.getMaterialType(), t.push(n.extendParams(a, o, this))) : (e = ec, n = o.pbrMetallicRoughness || {}, 
        a.color = new Xt(1, 1, 1), a.opacity = 1, Array.isArray(n.baseColorFactor) && (s = n.baseColorFactor, 
        a.color.fromArray(s), a.opacity = s[3]), void 0 !== n.baseColorTexture && t.push(this.assignTexture(a, "map", n.baseColorTexture)), 
        a.metalness = void 0 !== n.metallicFactor ? n.metallicFactor : 1, a.roughness = void 0 !== n.roughnessFactor ? n.roughnessFactor : 1, 
        void 0 !== n.metallicRoughnessTexture && (t.push(this.assignTexture(a, "metalnessMap", n.metallicRoughnessTexture)), 
        t.push(this.assignTexture(a, "roughnessMap", n.metallicRoughnessTexture)))), !0 === o.doubleSided && (a.side = 2), 
        o.alphaMode || "OPAQUE");
        return "BLEND" === s ? (a.transparent = !0, a.depthWrite = !1) : (a.transparent = !1, 
        "MASK" === s && (a.alphaTest = void 0 !== o.alphaCutoff ? o.alphaCutoff : .5)), 
        void 0 !== o.normalTexture && e !== Qr && (t.push(this.assignTexture(a, "normalMap", o.normalTexture)), 
        a.normalScale = new Mt(1, 1), void 0 !== o.normalTexture.scale) && a.normalScale.set(o.normalTexture.scale, o.normalTexture.scale), 
        void 0 !== o.occlusionTexture && e !== Qr && (t.push(this.assignTexture(a, "aoMap", o.occlusionTexture)), 
        void 0 !== o.occlusionTexture.strength) && (a.aoMapIntensity = o.occlusionTexture.strength), 
        void 0 !== o.emissiveFactor && e !== Qr && (a.emissive = new Xt().fromArray(o.emissiveFactor)), 
        void 0 !== o.emissiveTexture && e !== Qr && t.push(this.assignTexture(a, "emissiveMap", o.emissiveTexture)), 
        r[ch.KHR_MATERIALS_CLEARCOAT] && (n = i[ch.KHR_MATERIALS_CLEARCOAT], e = n.getMaterialType(), 
        t.push(n.extendParams(a, {
            extensions: r
        }, this))), Promise.all(t).then(function() {
            var t = e === Ch ? i[ch.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a) : new e(a);
            return o.name && (t.name = o.name), t.map && (t.map.encoding = 3001), t.emissiveMap && (t.emissiveMap.encoding = 3001), 
            Gh(t, o), o.extensions && zh(i, t, o), t;
        });
    }, Vh.prototype.loadGeometries = function(t) {
        for (var e = this, n = this.extensions, r = this.primitiveCache, i = [], o = 0, a = t.length; o < a; o++) {
            var s = t[o], l = (u = void 0, u = (u = (l = s).extensions && l.extensions[ch.KHR_DRACO_MESH_COMPRESSION]) ? "draco:" + u.bufferView + ":" + u.indices + ":" + Hh(u.attributes) : l.indices + ":" + Hh(l.attributes) + ":" + l.mode), u = r[l];
            u ? i.push(u.promise) : (u = s.extensions && s.extensions[ch.KHR_DRACO_MESH_COMPRESSION] ? function(t) {
                return n[ch.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(t, e).then(function(n) {
                    return Wh(n, t, e);
                });
            }(s) : Wh(new Mr(), s, e), r[l] = {
                primitive: s,
                promise: u
            }, i.push(u));
        }
        return Promise.all(i);
    }, Vh.prototype.loadMesh = function(t) {
        for (var e = this, n = this.json.meshes[t], r = n.primitives, i = [], o = 0, a = r.length; o < a; o++) {
            var s = void 0 === r[o].material ? (void 0 === (s = this.cache).DefaultMaterial && (s.DefaultMaterial = new ec({
                color: 16777215,
                emissive: 0,
                metalness: 1,
                roughness: 1,
                transparent: !1,
                depthTest: !0,
                side: 0
            })), s.DefaultMaterial) : this.getDependency("material", r[o].material);
            i.push(s);
        }
        return i.push(e.loadGeometries(r)), Promise.all(i).then(function(i) {
            for (var o = i.slice(0, i.length - 1), a = i[i.length - 1], s = [], l = 0, u = a.length; l < u; l++) {
                var c, h = a[l], f = r[l], p = o[l];
                if (4 === f.mode || 5 === f.mode || 6 === f.mode || void 0 === f.mode) !0 !== (c = new (!0 === n.isSkinnedMesh ? Fc : mi)(h, p)).isSkinnedMesh || c.geometry.attributes.skinWeight.normalized || c.normalizeSkinWeights(), 
                5 === f.mode ? c.geometry = Yh(c.geometry, 1) : 6 === f.mode && (c.geometry = Yh(c.geometry, 2)); else if (1 === f.mode) c = new Xc(h, p); else if (3 === f.mode) c = new Vc(h, p); else if (2 === f.mode) c = new Zc(h, p); else {
                    if (0 !== f.mode) throw new Error("THREE.GLTFLoader: Primitive mode unsupported: " + f.mode);
                    c = new $c(h, p);
                }
                if (0 < Object.keys(c.geometry.morphAttributes).length) {
                    g = v = m = d = void 0;
                    var d = c, y = n;
                    if (d.updateMorphTargets(), void 0 !== y.weights) for (var m = 0, v = y.weights.length; m < v; m++) d.morphTargetInfluences[m] = y.weights[m];
                    if (y.extras && Array.isArray(y.extras.targetNames)) {
                        var g = y.extras.targetNames;
                        if (d.morphTargetInfluences.length === g.length) for (d.morphTargetDictionary = {}, 
                        m = 0, v = g.length; m < v; m++) d.morphTargetDictionary[g[m]] = m; else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.");
                    }
                }
                c.name = n.name || "mesh_" + t, 1 < a.length && (c.name += "_" + l), Gh(c, n), e.assignFinalMaterial(c), 
                s.push(c);
            }
            if (1 === s.length) return s[0];
            var b = new ga();
            for (l = 0, u = s.length; l < u; l++) b.add(s[l]);
            return b;
        });
    }, Vh.prototype.loadCamera = function(t) {
        var e, n = (t = this.json.cameras[t])[t.type];
        if (n) return "perspective" === t.type ? e = new z(s.radToDeg(n.yfov), n.aspectRatio || 1, n.znear || 1, n.zfar || 2e6) : "orthographic" === t.type && (e = new G(n.xmag / -2, n.xmag / 2, n.ymag / 2, n.ymag / -2, n.znear, n.zfar)), 
        t.name && (e.name = t.name), Gh(e, t), Promise.resolve(e);
        console.warn("THREE.GLTFLoader: Missing camera parameters.");
    }, Vh.prototype.loadSkin = function(t) {
        var e = {
            joints: (t = this.json.skins[t]).joints
        };
        return void 0 === t.inverseBindMatrices ? Promise.resolve(e) : this.getDependency("accessor", t.inverseBindMatrices).then(function(t) {
            return e.inverseBindMatrices = t, e;
        });
    }, Vh.prototype.loadAnimation = function(t) {
        for (var e = this.json.animations[t], n = [], r = [], i = [], o = [], a = [], s = 0, l = e.channels.length; s < l; s++) {
            var u = e.channels[s], c = e.samplers[u.sampler], h = void 0 !== (u = u.target).node ? u.node : u.id, f = void 0 !== e.parameters ? e.parameters[c.input] : c.input, p = void 0 !== e.parameters ? e.parameters[c.output] : c.output;
            n.push(this.getDependency("node", h)), r.push(this.getDependency("accessor", f)), 
            i.push(this.getDependency("accessor", p)), o.push(c), a.push(u);
        }
        return Promise.all([ Promise.all(n), Promise.all(r), Promise.all(i), Promise.all(o), Promise.all(a) ]).then(function(n) {
            for (var r = n[0], i = n[1], o = n[2], a = n[3], s = n[4], l = [], u = 0, c = r.length; u < c; u++) {
                var h, f = r[u], p = i[u], d = o[u], y = a[u], m = s[u];
                if (void 0 !== f) {
                    switch (f.updateMatrix(), f.matrixAutoUpdate = !0, bh[m.path]) {
                      case bh.weights:
                        h = wc;
                        break;

                      case bh.rotation:
                        h = _c;
                        break;

                      default:
                        h = Oc;
                    }
                    var v, g = f.name || f.uuid, b = void 0 !== y.interpolation ? xh[y.interpolation] : wt, x = [], w = (bh[m.path] === bh.weights ? f.traverse(function(t) {
                        !0 === t.isMesh && t.morphTargetInfluences && x.push(t.name || t.uuid);
                    }) : x.push(g), d.array);
                    if (d.normalized) {
                        if (w.constructor === Int8Array) v = 1 / 127; else if (w.constructor === Uint8Array) v = 1 / 255; else if (w.constructor == Int16Array) v = 1 / 32767; else {
                            if (w.constructor !== Uint16Array) throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");
                            v = 1 / 65535;
                        }
                        for (var S = new Float32Array(w.length), _ = 0, E = w.length; _ < E; _++) S[_] = w[_] * v;
                        w = S;
                    }
                    for (_ = 0, E = x.length; _ < E; _++) {
                        var O = new h(x[_] + "." + bh[m.path], p.array, w, b);
                        "CUBICSPLINE" === y.interpolation && (O.createInterpolant = function(t) {
                            return new Bh(this.times, this.values, this.getValueSize() / 3, t);
                        }, O.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = !0), l.push(O);
                    }
                }
            }
            return new Mc(e.name || "animation_" + t, void 0, l);
        });
    }, Vh.prototype.loadNode = function(t) {
        var e = this.json, n = this.extensions, r = this, i = e.meshReferences, o = e.meshUses, a = e.nodes[t];
        return e = [], void 0 !== a.mesh && e.push(r.getDependency("mesh", a.mesh).then(function(t) {
            var e, n;
            return 1 < i[a.mesh] ? (e = o[a.mesh]++, (n = t.clone()).name += "_instance_" + e) : n = t, 
            void 0 !== a.weights && n.traverse(function(t) {
                if (t.isMesh) for (var e = 0, n = a.weights.length; e < n; e++) t.morphTargetInfluences[e] = a.weights[e];
            }), n;
        })), void 0 !== a.camera && e.push(r.getDependency("camera", a.camera)), a.extensions && a.extensions[ch.KHR_LIGHTS_PUNCTUAL] && void 0 !== a.extensions[ch.KHR_LIGHTS_PUNCTUAL].light && e.push(r.getDependency("light", a.extensions[ch.KHR_LIGHTS_PUNCTUAL].light)), 
        Promise.all(e).then(function(t) {
            var e, r = !0 === a.isBone ? new eh() : 1 < t.length ? new ga() : 1 === t.length ? t[0] : new B();
            if (r !== t[0]) for (var i = 0, o = t.length; i < o; i++) r.add(t[i]);
            return a.name && (r.userData.name = a.name, r.name = uh.sanitizeNodeName(a.name)), 
            Gh(r, a), a.extensions && zh(n, r, a), void 0 !== a.matrix ? ((e = new b()).fromArray(a.matrix), 
            r.applyMatrix4(e)) : (void 0 !== a.translation && r.position.fromArray(a.translation), 
            void 0 !== a.rotation && r.quaternion.fromArray(a.rotation), void 0 !== a.scale && r.scale.fromArray(a.scale)), 
            r;
        });
    }, Vh.prototype.loadScene = function(t) {
        for (var e = this.json, n = this.extensions, r = (t = this.json.scenes[t], new Jn()), i = (t.name && (r.name = t.name), 
        Gh(r, t), t.extensions && zh(n, r, t), t.nodes || []), o = [], a = 0, s = i.length; a < s; a++) o.push(function t(e, n, r, i) {
            var o = r.nodes[e];
            return i.getDependency("node", e).then(function(t) {
                var e;
                return void 0 === o.skin ? t : i.getDependency("skin", o.skin).then(function(t) {
                    for (var n = [], r = 0, o = (e = t).joints.length; r < o; r++) n.push(i.getDependency("node", e.joints[r]));
                    return Promise.all(n);
                }).then(function(n) {
                    return t.traverse(function(t) {
                        if (t.isMesh) {
                            for (var r = [], i = [], o = 0, a = n.length; o < a; o++) {
                                var s = n[o];
                                s ? (r.push(s), s = new b(), void 0 !== e.inverseBindMatrices && s.fromArray(e.inverseBindMatrices.array, 16 * o), 
                                i.push(s)) : console.warn('THREE.GLTFLoader: Joint "%s" could not be found.', e.joints[o]);
                            }
                            t.bind(new Oh(r, i), t.matrixWorld);
                        }
                    }), t;
                });
            }).then(function(e) {
                n.add(e);
                var a = [];
                if (o.children) for (var s = o.children, l = 0, u = s.length; l < u; l++) {
                    var c = s[l];
                    a.push(t(c, e, r, i));
                }
                return Promise.all(a);
            });
        }(i[a], r, e, this));
        return Promise.all(o).then(function() {
            return r;
        });
    };
    var Xh = Th;
    function Zh(t) {
        return (Zh = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function qh(t) {
        cc.call(this, t), this.decoderPath = "", this.decoderConfig = {}, this.decoderBinary = null, 
        this.decoderPending = null, this.workerLimit = 4, this.workerPool = [], this.workerNextTaskID = 1, 
        this.workerSourceURL = "", this.defaultAttributeIDs = {
            position: "POSITION",
            normal: "NORMAL",
            color: "COLOR",
            uv: "TEX_COORD"
        }, this.defaultAttributeTypes = {
            position: "Float32Array",
            normal: "Float32Array",
            color: "Float32Array",
            uv: "Float32Array"
        };
    }
    function Kh(t) {
        return (Kh = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Jh(t, e) {
        (null == e || e > t.length) && (e = t.length);
        for (var n = 0, r = new Array(e); n < e; n++) r[n] = t[n];
        return r;
    }
    function Qh(t, e, n) {
        e = $h(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], $h(t).constructor) : e.apply(t, n)) && ("object" === Kh(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function $h(t) {
        return ($h = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function tf(t, e) {
        return (tf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    qh.prototype = Object.assign(Object.create(cc.prototype), {
        constructor: qh,
        setDecoderPath: function(t) {
            return this.decoderPath = t, this;
        },
        setDecoderConfig: function(t) {
            return this.decoderConfig = t, this;
        },
        setWorkerLimit: function(t) {
            return this.workerLimit = t, this;
        },
        setVerbosity: function() {
            console.warn("THREE.DRACOLoader: The .setVerbosity() method has been removed.");
        },
        setDrawMode: function() {
            console.warn("THREE.DRACOLoader: The .setDrawMode() method has been removed.");
        },
        setSkipDequantization: function() {
            console.warn("THREE.DRACOLoader: The .setSkipDequantization() method has been removed.");
        },
        load: function(t, e, n, r) {
            var i = this, o = new fc(this.manager);
            o.setPath(this.path), o.setResponseType("arraybuffer"), "use-credentials" === this.crossOrigin && o.setWithCredentials(!0), 
            o.load(t, function(t) {
                var n = {
                    attributeIDs: i.defaultAttributeIDs,
                    attributeTypes: i.defaultAttributeTypes,
                    useUniqueIDs: !1
                };
                i.decodeGeometry(t, n).then(e).catch(r);
            }, n, r);
        },
        decodeDracoFile: function(t, e, n, r) {
            r = {
                attributeIDs: n || this.defaultAttributeIDs,
                attributeTypes: r || this.defaultAttributeTypes,
                useUniqueIDs: !!n
            }, this.decodeGeometry(t, r).then(e);
        },
        decodeGeometry: function(t, e) {
            var n, r = this;
            for (n in e.attributeTypes) {
                var i = e.attributeTypes[n];
                void 0 !== i.BYTES_PER_ELEMENT && (e.attributeTypes[n] = i.name);
            }
            var o, a = JSON.stringify(e);
            if (qh.taskCache.has(t)) {
                if ((l = qh.taskCache.get(t)).key === a) return l.promise;
                if (0 === t.byteLength) throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.");
            }
            var s = this.workerNextTaskID++, l = t.byteLength;
            return (l = this.rf(s, l).then(function(n) {
                return o = n, new Promise(function(n, r) {
                    o.sf[s] = {
                        resolve: n,
                        reject: r
                    }, o.postMessage({
                        type: "decode",
                        id: s,
                        taskConfig: e,
                        buffer: t
                    }, [ t ]);
                });
            }).then(function(t) {
                return r.af(t.geometry);
            })).finally(function() {
                o && s && r.uf(o, s);
            }), qh.taskCache.set(t, {
                key: a,
                promise: l
            }), l;
        },
        af: function(t) {
            var e = new Mr();
            t.index && e.setIndex(new sr(t.index.array, 1));
            for (var n = 0; n < t.attributes.length; n++) {
                var r = (o = t.attributes[n]).name, i = o.array, o = o.itemSize;
                e.setAttribute(r, new sr(i, o));
            }
            return e;
        },
        cf: function(t, e) {
            var n = new fc(this.manager);
            return n.setPath(this.decoderPath), n.setResponseType(e), new Promise(function(e, r) {
                n.load(t, e, void 0, r);
            });
        },
        preload: function() {
            return this.ff(), this;
        },
        ff: function() {
            var t, e, n = this;
            return this.decoderPending || (e = [], (t = "object" !== ("undefined" == typeof WebAssembly ? "undefined" : Zh(WebAssembly)) || "js" === this.decoderConfig.type) ? e.push(this.cf("draco_decoder.js", "text")) : (e.push(this.cf("draco_wasm_wrapper.js", "text")), 
            e.push(this.cf("draco_decoder.wasm", "arraybuffer"))), this.decoderPending = Promise.all(e).then(function(e) {
                var r = [ "/* draco decoder */", r = e[0], "", "/* worker */", (e = (t || (n.decoderConfig.wasmBinary = e[1]), 
                qh.DRACOWorker.toString())).substring(e.indexOf("{") + 1, e.lastIndexOf("}")) ].join("\n");
                n.workerSourceURL = URL.createObjectURL(new Blob([ r ]));
            })), this.decoderPending;
        },
        rf: function(t, e) {
            var n = this;
            return this.ff().then(function() {
                n.workerPool.length < n.workerLimit ? ((r = new Worker(n.workerSourceURL)).sf = {}, 
                r.hf = {}, r.lf = 0, r.postMessage({
                    type: "init",
                    decoderConfig: n.decoderConfig
                }), r.onmessage = function(t) {
                    var e = t.data;
                    switch (e.type) {
                      case "decode":
                        r.sf[e.id].resolve(e);
                        break;

                      case "error":
                        r.sf[e.id].reject(e);
                        break;

                      default:
                        console.error('THREE.DRACOLoader: Unexpected message, "' + e.type + '"');
                    }
                }, n.workerPool.push(r)) : n.workerPool.sort(function(t, e) {
                    return t.lf > e.lf ? -1 : 1;
                });
                var r = n.workerPool[n.workerPool.length - 1];
                return r.hf[t] = e, r.lf += e, r;
            });
        },
        uf: function(t, e) {
            t.lf -= t.hf[e], delete t.sf[e], delete t.hf[e];
        },
        debug: function() {
            this.workerPool.map(function(t) {
                return t.lf;
            });
        },
        dispose: function() {
            for (var t = 0; t < this.workerPool.length; ++t) this.workerPool[t].terminate();
            return this.workerPool.length = 0, this;
        }
    }), qh.DRACOWorker = function() {
        var t, e;
        onmessage = function(n) {
            var r = n.data;
            switch (r.type) {
              case "init":
                t = r.decoderConfig, e = new Promise(function(e) {
                    t.onModuleLoaded = function(t) {
                        e({
                            draco: t
                        });
                    }, DracoDecoderModule(t);
                });
                break;

              case "decode":
                var i = r.buffer, o = r.taskConfig;
                e.then(function(t) {
                    var e = new (t = t.draco).Decoder(), n = new t.DecoderBuffer();
                    n.Init(new Int8Array(i), i.byteLength);
                    try {
                        var a = function(t, e, n, r) {
                            var i, o, a = r.attributeIDs, s = r.attributeTypes, l = e.GetEncodedGeometryType(n);
                            if (l === t.TRIANGULAR_MESH) i = new t.Mesh(), o = e.DecodeBufferToMesh(n, i); else {
                                if (l !== t.POINT_CLOUD) throw new Error("THREE.DRACOLoader: Unexpected geometry type.");
                                i = new t.PointCloud(), o = e.DecodeBufferToPointCloud(n, i);
                            }
                            if (!o.ok() || 0 === i.ptr) throw new Error("THREE.DRACOLoader: Decoding failed: " + o.error_msg());
                            var u, c, h, f = {
                                index: null,
                                attributes: []
                            };
                            for (u in a) {
                                var p = self[s[u]];
                                if (r.useUniqueIDs) h = a[u], c = e.GetAttributeByUniqueId(i, h); else {
                                    if (-1 === (h = e.GetAttributeId(i, t[a[u]]))) continue;
                                    c = e.GetAttribute(i, h);
                                }
                                f.attributes.push(function(t, e, n, r, i, o) {
                                    var a, s, l = o.num_components(), u = n.num_points() * l;
                                    switch (i) {
                                      case Float32Array:
                                        a = new t.DracoFloat32Array(), e.GetAttributeFloatForAllPoints(n, o, a), s = new Float32Array(u);
                                        break;

                                      case Int8Array:
                                        a = new t.DracoInt8Array(), e.GetAttributeInt8ForAllPoints(n, o, a), s = new Int8Array(u);
                                        break;

                                      case Int16Array:
                                        a = new t.DracoInt16Array(), e.GetAttributeInt16ForAllPoints(n, o, a), s = new Int16Array(u);
                                        break;

                                      case Int32Array:
                                        a = new t.DracoInt32Array(), e.GetAttributeInt32ForAllPoints(n, o, a), s = new Int32Array(u);
                                        break;

                                      case Uint8Array:
                                        a = new t.DracoUInt8Array(), e.GetAttributeUInt8ForAllPoints(n, o, a), s = new Uint8Array(u);
                                        break;

                                      case Uint16Array:
                                        a = new t.DracoUInt16Array(), e.GetAttributeUInt16ForAllPoints(n, o, a), s = new Uint16Array(u);
                                        break;

                                      case Uint32Array:
                                        a = new t.DracoUInt32Array(), e.GetAttributeUInt32ForAllPoints(n, o, a), s = new Uint32Array(u);
                                        break;

                                      default:
                                        throw new Error("THREE.DRACOLoader: Unexpected attribute type.");
                                    }
                                    for (var c = 0; c < u; c++) s[c] = a.GetValue(c);
                                    return t.destroy(a), {
                                        name: r,
                                        array: s,
                                        itemSize: l
                                    };
                                }(t, e, i, u, p, c));
                            }
                            if (l === t.TRIANGULAR_MESH) {
                                for (var d = i.num_faces(), y = new Uint32Array(3 * d), m = new t.DracoInt32Array(), v = 0; v < d; ++v) {
                                    e.GetFaceFromMesh(i, v, m);
                                    for (var g = 0; g < 3; ++g) y[3 * v + g] = m.GetValue(g);
                                }
                                f.index = {
                                    array: y,
                                    itemSize: 1
                                }, t.destroy(m);
                            }
                            return t.destroy(i), f;
                        }(t, e, n, o), s = a.attributes.map(function(t) {
                            return t.array.buffer;
                        });
                        a.index && s.push(a.index.array.buffer), self.postMessage({
                            type: "decode",
                            id: r.id,
                            geometry: a
                        }, s);
                    } catch (t) {
                        console.error(t), self.postMessage({
                            type: "error",
                            id: r.id,
                            error: t.message
                        });
                    } finally {
                        t.destroy(n), t.destroy(e);
                    }
                });
            }
        };
    }, qh.taskCache = new WeakMap(), qh.setDecoderPath = function() {
        console.warn("THREE.DRACOLoader: The .setDecoderPath() method has been removed. Use instance methods.");
    }, qh.setDecoderConfig = function() {
        console.warn("THREE.DRACOLoader: The .setDecoderConfig() method has been removed. Use instance methods.");
    }, qh.releaseDecoderModule = function() {
        console.warn("THREE.DRACOLoader: The .releaseDecoderModule() method has been removed. Use instance methods.");
    }, qh.getDecoderModule = function() {
        console.warn("THREE.DRACOLoader: The .getDecoderModule() method has been removed. Use instance methods.");
    };
    ih = function() {
        var t = n, e = zl;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t) {
            var e;
            if (this instanceof n) return (e = Qh(this, n)).jt = t, e.df = new Ac(), e.vf = new Xh(), 
            e.pf = !1, e.mf = !1, e.jt.ze.decoderURL && ((t = new qh()).setDecoderPath(e.jt.ze.decoderURL), 
            e.vf.setDRACOLoader(t)), e;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && tf(t, e), t = n, Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }();
    var ef = (Object.assign(ih.prototype, {
        Ma: function(t, e, n) {
            var r, i, o = this;
            if (!this.Ha.has(t)) return this.Ha.set(t, {
                loadComplete: !1
            }), r = -1 === t.indexOf(".js"), i = this.vf, (i = r ? i : this.df).load(t, function(n, i) {
                if (!0 !== o.mf) {
                    if (r) o.Ha.set(t, {
                        gltf: n,
                        data: i,
                        isAnimate: 0 < n.animations.length,
                        isGltf: !0,
                        loadComplete: !0
                    }), e && e(r, n); else {
                        if (Array.isArray(i)) {
                            var a, s = function(t, e) {
                                var n, r, i, o, a = "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"];
                                if (a) return r = !(n = !0), {
                                    s: function() {
                                        a = a.call(t);
                                    },
                                    n: function() {
                                        var t = a.next();
                                        return n = t.done, t;
                                    },
                                    e: function(t) {
                                        r = !0, i = t;
                                    },
                                    f: function() {
                                        try {
                                            n || null == a.return || a.return();
                                        } finally {
                                            if (r) throw i;
                                        }
                                    }
                                };
                                if (Array.isArray(t) || (a = function(t, e) {
                                    var n;
                                    if (t) return "string" == typeof t ? Jh(t, e) : "Map" === (n = "Object" === (n = Object.prototype.toString.call(t).slice(8, -1)) && t.constructor ? t.constructor.name : n) || "Set" === n ? Array.from(t) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? Jh(t, e) : void 0;
                                }(t)) || e && t && "number" == typeof t.length) return a && (t = a), o = 0, {
                                    s: e = function() {},
                                    n: function() {
                                        return o >= t.length ? {
                                            done: !0
                                        } : {
                                            done: !1,
                                            value: t[o++]
                                        };
                                    },
                                    e: function(t) {
                                        throw t;
                                    },
                                    f: e
                                };
                                throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
                            }(i);
                            try {
                                for (s.s(); !(a = s.n()).done; ) {
                                    var l = a.value;
                                    l.map && o.pf && l.color.setScalar(1);
                                }
                            } catch (n) {
                                s.e(n);
                            } finally {
                                s.f();
                            }
                        } else i.map && o.pf && i.color.setScalar(1);
                        o.Ha.set(t, {
                            geometry: n,
                            material: i,
                            isGltf: !1,
                            loadComplete: !0
                        }), e && e(r, n, i);
                    }
                    o.jt.ui.yf(), o.bf(t, !1);
                }
            }, function(t) {}, function(e) {
                !0 !== o.mf && (o.Ha.delete(t), n && n(e), o.bf(t, e));
            });
            this.Va(t, {
                success: e,
                fail: n
            }), !0 === this.Ha.get(t).loadComplete && this.bf(t);
        },
        bf: function(t, e) {
            var n, r = this;
            this.za.has(t) && (n = this.Ha.get(t)) && (this.za.get(t).forEach(function(i, o, a) {
                var s;
                e ? o.fail && o.fail(e) : n.isGltf ? n.isAnimate ? r.vf.parse(n.data, qu(t), function(t) {
                    o.success && o.success(!0, t);
                }, function(t) {
                    o.fail && o.fail(t);
                }) : ((s = {
                    animations: []
                }).scene = n.gltf.scene.clone(), s.scene.traverse(function(t) {
                    "Mesh" === t.type && delete t.userData.sourceMaterial;
                }), o.success && o.success(!0, s)) : o.success && o.success(!1, n.geometry, n.material), 
                a.delete(i);
            }), this.za.delete(t));
        },
        tn: function() {
            this.mf = !0, this.Ha.clear(), this.za.clear(), this.df = null, this.vf.fileLoaders.forEach(function(t) {
                t.dispose();
            }), this.vf.fileLoaders.length = 0, this.vf = null;
        }
    }), ih);
    function nf(t) {
        return (nf = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function rf(t, e, n) {
        e = of(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], of(t).constructor) : e.apply(t, n)) && ("object" === nf(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function of(t) {
        return (of = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function af(t, e) {
        return (af = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    It = function() {
        var t = n, e = zl;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t) {
            var e, r;
            if (this instanceof n) return (e = rf(this, n)).vf = new Xh(), t.ze.decoderURL && ((r = new qh()).setDecoderPath(t.ze.decoderURL), 
            e.vf.setDRACOLoader(r)), e;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && af(t, e), t = n, Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }();
    var sf = (Object.assign(It.prototype, {
        Ma: function(t, e, n) {
            var r = this;
            this.Ha.has(t) ? (this.Va(t, {
                success: e,
                fail: n
            }), !0 === this.Ha.get(t).loadComplete && this.bf(t)) : (this.Ha.set(t, {
                loadComplete: !1
            }), this.vf.load(t, function(i, o) {
                i.scene.userData.sourceScale = i.scene.scale.clone(), r.Ha.set(t, {
                    gltf: i,
                    isAnimate: 0 < i.animations.length,
                    data: 0 < i.animations.length ? o : null,
                    loadComplete: !0
                }), r.Va(t, {
                    success: e,
                    fail: n
                }), r.bf(t);
            }, function(t) {}, function(e) {
                r.Ha.delete(t), n && n(e), r.bf(t, e);
            }));
        },
        bf: function(t, e) {
            var n, r = this;
            this.za.has(t) && (n = this.Ha.get(t)) && (this.za.get(t).forEach(function(i, o, a) {
                var s;
                e ? o.fail && o.fail(e) : n.isAnimate ? r.vf.parse(n.data, qu(t), function(t) {
                    t.scene.userData.sourceScale = t.scene.scale.clone(), o.success && o.success(t);
                }, function(t) {
                    o.fail && o.fail(t);
                }) : ((s = {
                    animations: []
                }).scene = n.gltf.scene.clone(!0), o.success && o.success(s)), a.delete(i);
            }), this.za.delete(t));
        },
        tn: function() {
            this.vf = null, this.Ha.clear(), this.Ha = null, this.za.clear(), this.za = null;
        }
    }), It);
    function lf() {
        this.type = "Curve", this.arcLengthDivisions = 200;
    }
    function uf(t, e, n, r, i, o, a, s) {
        lf.call(this), this.type = "EllipseCurve", this.aX = t || 0, this.aY = e || 0, this.xRadius = n || 1, 
        this.yRadius = r || 1, this.aStartAngle = i || 0, this.aEndAngle = o || 2 * Math.PI, 
        this.aClockwise = a || !1, this.aRotation = s || 0;
    }
    function cf(t, e, n, r, i, o) {
        uf.call(this, t, e, n, n, r, i, o), this.type = "ArcCurve";
    }
    function hf() {
        var t = 0, e = 0, n = 0, r = 0;
        function i(i, o, a, s) {
            n = -3 * (t = i) + 3 * o - 2 * (e = a) - s, r = 2 * i - 2 * o + a + s;
        }
        return {
            initCatmullRom: function(t, e, n, r, o) {
                i(e, n, o * (n - t), o * (r - e));
            },
            initNonuniformCatmullRom: function(t, e, n, r, o, a, s) {
                t = (e - t) / o - (n - t) / (o + a) + (n - e) / a, o = (n - e) / a - (r - e) / (a + s) + (r - n) / s, 
                i(e, n, t *= a, o *= a);
            },
            calc: function(i) {
                var o = i * i;
                return t + e * i + n * o + r * (o * i);
            }
        };
    }
    Object.assign(lf.prototype, {
        getPoint: function() {
            return console.warn("THREE.Curve: .getPoint() not implemented."), null;
        },
        getPointAt: function(t, e) {
            return t = this.getUtoTmapping(t), this.getPoint(t, e);
        },
        getPoints: function(t) {
            void 0 === t && (t = 5);
            for (var e = [], n = 0; n <= t; n++) e.push(this.getPoint(n / t));
            return e;
        },
        getSpacedPoints: function(t) {
            void 0 === t && (t = 5);
            for (var e = [], n = 0; n <= t; n++) e.push(this.getPointAt(n / t));
            return e;
        },
        getLength: function() {
            var t = this.getLengths();
            return t[t.length - 1];
        },
        getLengths: function(t) {
            if (void 0 === t && (t = this.arcLengthDivisions), this.cacheArcLengths && this.cacheArcLengths.length === t + 1 && !this.needsUpdate) return this.cacheArcLengths;
            this.needsUpdate = !1;
            var e, n, r = [], i = this.getPoint(0), o = 0;
            for (r.push(0), n = 1; n <= t; n++) o += (e = this.getPoint(n / t)).distanceTo(i), 
            r.push(o), i = e;
            return this.cacheArcLengths = r;
        },
        updateArcLengths: function() {
            this.needsUpdate = !0, this.getLengths();
        },
        getUtoTmapping: function(t, e) {
            for (var n, r = this.getLengths(), i = 0, o = r.length, a = e || t * r[o - 1], s = 0, l = o - 1; s <= l; ) if ((n = r[i = Math.floor(s + (l - s) / 2)] - a) < 0) s = i + 1; else {
                if (!(0 < n)) {
                    l = i;
                    break;
                }
                l = i - 1;
            }
            return r[i = l] === a ? i / (o - 1) : (i + (a - (e = r[i])) / (r[i + 1] - e)) / (o - 1);
        },
        getTangent: function(t) {
            var e = t - 1e-4;
            1 < (t = t + 1e-4) && (t = 1), e = this.getPoint(e = e < 0 ? 0 : e);
            return this.getPoint(t).clone().sub(e).normalize();
        },
        getTangentAt: function(t) {
            return t = this.getUtoTmapping(t), this.getTangent(t);
        },
        computeFrenetFrames: function(t, e) {
            for (var n, r = new h(), i = [], o = [], a = [], l = new h(), u = new b(), c = 0; c <= t; c++) i[c] = this.getTangentAt(c / t), 
            i[c].normalize();
            o[0] = new h(), a[0] = new h();
            var f = Number.MAX_VALUE, p = Math.abs(i[0].x), d = Math.abs(i[0].y), y = Math.abs(i[0].z);
            for (p <= f && (f = p, r.set(1, 0, 0)), d <= f && (f = d, r.set(0, 1, 0)), y <= f && r.set(0, 0, 1), 
            l.crossVectors(i[0], r).normalize(), o[0].crossVectors(i[0], l), a[0].crossVectors(i[0], o[0]), 
            c = 1; c <= t; c++) o[c] = o[c - 1].clone(), a[c] = a[c - 1].clone(), l.crossVectors(i[c - 1], i[c]), 
            l.length() > Number.EPSILON && (l.normalize(), n = Math.acos(s.clamp(i[c - 1].dot(i[c]), -1, 1)), 
            o[c].applyMatrix4(u.makeRotationAxis(l, n))), a[c].crossVectors(i[c], o[c]);
            if (!0 === e) for (n = Math.acos(s.clamp(o[0].dot(o[t]), -1, 1)), n /= t, 0 < i[0].dot(l.crossVectors(o[0], o[t])) && (n = -n), 
            c = 1; c <= t; c++) o[c].applyMatrix4(u.makeRotationAxis(i[c], n * c)), a[c].crossVectors(i[c], o[c]);
            return {
                tangents: i,
                normals: o,
                binormals: a
            };
        },
        clone: function() {
            return new this.constructor().copy(this);
        },
        copy: function(t) {
            return this.arcLengthDivisions = t.arcLengthDivisions, this;
        }
    }), ((uf.prototype = Object.create(lf.prototype)).constructor = uf).prototype.isEllipseCurve = !0, 
    uf.prototype.getPoint = function(t, e) {
        e = e || new Mt();
        for (var n = 2 * Math.PI, r = this.aEndAngle - this.aStartAngle, i = Math.abs(r) < Number.EPSILON; r < 0; ) r += n;
        for (;n < r; ) r -= n;
        r < Number.EPSILON && (r = i ? 0 : n), !0 !== this.aClockwise || i || (r === n ? r = -n : r -= n);
        var o, a, s, l;
        i = this.aStartAngle + t * r, t = this.aX + this.xRadius * Math.cos(i), i = this.aY + this.yRadius * Math.sin(i);
        return 0 !== this.aRotation && (o = Math.cos(this.aRotation), a = Math.sin(this.aRotation), 
        t = (s = t - this.aX) * o - (l = i - this.aY) * a + this.aX, i = s * a + l * o + this.aY), 
        e.set(t, i);
    }, uf.prototype.copy = function(t) {
        return lf.prototype.copy.call(this, t), this.aX = t.aX, this.aY = t.aY, this.xRadius = t.xRadius, 
        this.yRadius = t.yRadius, this.aStartAngle = t.aStartAngle, this.aEndAngle = t.aEndAngle, 
        this.aClockwise = t.aClockwise, this.aRotation = t.aRotation, this;
    }, ((cf.prototype = Object.create(uf.prototype)).constructor = cf).prototype.isArcCurve = !0;
    var ff = new h(), pf = new hf(), df = new hf(), yf = new hf();
    function mf(t, e, n, r) {
        lf.call(this), this.type = "CatmullRomCurve3", this.points = t || [], this.closed = e || !1, 
        this.curveType = n || "centripetal", this.tension = r || .5;
    }
    function vf(t, e, n, r, i) {
        var o = t * t;
        return (2 * n - 2 * r + (e = .5 * (r - e)) + (i = .5 * (i - n))) * (t * o) + (-3 * n + 3 * r - 2 * e - i) * o + e * t + n;
    }
    function gf(t, e, n, r) {
        return (i = 1 - (i = t)) * i * e + 2 * (1 - t) * t * n + t * t * r;
        var i;
    }
    function bf(t, e, n, r, i) {
        return (o = 1 - (o = t)) * o * o * e + 3 * (o = 1 - t) * o * t * n + 3 * (1 - t) * t * t * r + t * t * t * i;
        var o;
    }
    function xf(t, e, n, r) {
        lf.call(this), this.type = "CubicBezierCurve", this.v0 = t || new Mt(), this.v1 = e || new Mt(), 
        this.v2 = n || new Mt(), this.v3 = r || new Mt();
    }
    function wf(t, e, n, r) {
        lf.call(this), this.type = "CubicBezierCurve3", this.v0 = t || new h(), this.v1 = e || new h(), 
        this.v2 = n || new h(), this.v3 = r || new h();
    }
    function Sf(t, e) {
        lf.call(this), this.type = "LineCurve", this.v1 = t || new Mt(), this.v2 = e || new Mt();
    }
    function _f(t, e) {
        lf.call(this), this.type = "LineCurve3", this.v1 = t || new h(), this.v2 = e || new h();
    }
    function Ef(t, e, n) {
        lf.call(this), this.type = "QuadraticBezierCurve", this.v0 = t || new Mt(), this.v1 = e || new Mt(), 
        this.v2 = n || new Mt();
    }
    function Of(t, e, n) {
        lf.call(this), this.type = "QuadraticBezierCurve3", this.v0 = t || new h(), this.v1 = e || new h(), 
        this.v2 = n || new h();
    }
    function Mf(t) {
        lf.call(this), this.type = "SplineCurve", this.points = t || [];
    }
    function Tf() {
        lf.call(this), this.type = "CurvePath", this.curves = [], this.autoClose = !1;
    }
    function Lf(t) {
        Tf.call(this), this.type = "Path", this.currentPoint = new Mt(), t && this.setFromPoints(t);
    }
    function Af(t) {
        Lf.call(this, t), this.uuid = s.generateUUID(), this.type = "Shape", this.holes = [];
    }
    ((mf.prototype = Object.create(lf.prototype)).constructor = mf).prototype.isCatmullRomCurve3 = !0, 
    mf.prototype.getPoint = function(t, e) {
        e = e || new h();
        var n, r, i, o, a = this.points, s = a.length, l = (t = (s - (this.closed ? 0 : 1)) * t, 
        Math.floor(t));
        t -= l;
        return this.closed ? l += 0 < l ? 0 : (Math.floor(Math.abs(l) / s) + 1) * s : 0 === t && l === s - 1 && (l = s - 2, 
        t = 1), n = this.closed || 0 < l ? a[(l - 1) % s] : (ff.subVectors(a[0], a[1]).add(a[0]), 
        ff), r = a[l % s], i = a[(l + 1) % s], l = this.closed || l + 2 < s ? a[(l + 2) % s] : (ff.subVectors(a[s - 1], a[s - 2]).add(a[s - 1]), 
        ff), "centripetal" === this.curveType || "chordal" === this.curveType ? (a = "chordal" === this.curveType ? .5 : .25, 
        s = Math.pow(n.distanceToSquared(r), a), (o = Math.pow(r.distanceToSquared(i), a)) < 1e-4 && (o = 1), 
        s < 1e-4 && (s = o), (a = Math.pow(i.distanceToSquared(l), a)) < 1e-4 && (a = o), 
        pf.initNonuniformCatmullRom(n.x, r.x, i.x, l.x, s, o, a), df.initNonuniformCatmullRom(n.y, r.y, i.y, l.y, s, o, a), 
        yf.initNonuniformCatmullRom(n.z, r.z, i.z, l.z, s, o, a)) : "catmullrom" === this.curveType && (pf.initCatmullRom(n.x, r.x, i.x, l.x, this.tension), 
        df.initCatmullRom(n.y, r.y, i.y, l.y, this.tension), yf.initCatmullRom(n.z, r.z, i.z, l.z, this.tension)), 
        e.set(pf.calc(t), df.calc(t), yf.calc(t)), e;
    }, mf.prototype.copy = function(t) {
        lf.prototype.copy.call(this, t), this.points = [];
        for (var e = 0, n = t.points.length; e < n; e++) {
            var r = t.points[e];
            this.points.push(r.clone());
        }
        return this.closed = t.closed, this.curveType = t.curveType, this.tension = t.tension, 
        this;
    }, ((xf.prototype = Object.create(lf.prototype)).constructor = xf).prototype.isCubicBezierCurve = !0, 
    xf.prototype.getPoint = function(t, e) {
        e = e || new Mt();
        var n = this.v0, r = this.v1, i = this.v2, o = this.v3;
        return e.set(bf(t, n.x, r.x, i.x, o.x), bf(t, n.y, r.y, i.y, o.y)), e;
    }, xf.prototype.copy = function(t) {
        return lf.prototype.copy.call(this, t), this.v0.copy(t.v0), this.v1.copy(t.v1), 
        this.v2.copy(t.v2), this.v3.copy(t.v3), this;
    }, ((wf.prototype = Object.create(lf.prototype)).constructor = wf).prototype.isCubicBezierCurve3 = !0, 
    wf.prototype.getPoint = function(t, e) {
        e = e || new h();
        var n = this.v0, r = this.v1, i = this.v2, o = this.v3;
        return e.set(bf(t, n.x, r.x, i.x, o.x), bf(t, n.y, r.y, i.y, o.y), bf(t, n.z, r.z, i.z, o.z)), 
        e;
    }, wf.prototype.copy = function(t) {
        return lf.prototype.copy.call(this, t), this.v0.copy(t.v0), this.v1.copy(t.v1), 
        this.v2.copy(t.v2), this.v3.copy(t.v3), this;
    }, ((Sf.prototype = Object.create(lf.prototype)).constructor = Sf).prototype.isLineCurve = !0, 
    Sf.prototype.getPoint = function(t, e) {
        return e = e || new Mt(), 1 === t ? e.copy(this.v2) : (e.copy(this.v2).sub(this.v1), 
        e.multiplyScalar(t).add(this.v1)), e;
    }, Sf.prototype.getPointAt = function(t, e) {
        return this.getPoint(t, e);
    }, Sf.prototype.getTangent = function() {
        return this.v2.clone().sub(this.v1).normalize();
    }, Sf.prototype.copy = function(t) {
        return lf.prototype.copy.call(this, t), this.v1.copy(t.v1), this.v2.copy(t.v2), 
        this;
    }, ((_f.prototype = Object.create(lf.prototype)).constructor = _f).prototype.isLineCurve3 = !0, 
    _f.prototype.getPoint = function(t, e) {
        return e = e || new h(), 1 === t ? e.copy(this.v2) : (e.copy(this.v2).sub(this.v1), 
        e.multiplyScalar(t).add(this.v1)), e;
    }, _f.prototype.getPointAt = function(t, e) {
        return this.getPoint(t, e);
    }, _f.prototype.copy = function(t) {
        return lf.prototype.copy.call(this, t), this.v1.copy(t.v1), this.v2.copy(t.v2), 
        this;
    }, ((Ef.prototype = Object.create(lf.prototype)).constructor = Ef).prototype.isQuadraticBezierCurve = !0, 
    Ef.prototype.getPoint = function(t, e) {
        e = e || new Mt();
        var n = this.v0, r = this.v1, i = this.v2;
        return e.set(gf(t, n.x, r.x, i.x), gf(t, n.y, r.y, i.y)), e;
    }, Ef.prototype.copy = function(t) {
        return lf.prototype.copy.call(this, t), this.v0.copy(t.v0), this.v1.copy(t.v1), 
        this.v2.copy(t.v2), this;
    }, Of.prototype.getPoint = function(t, e) {
        e = e || new h();
        var n = this.v0, r = this.v1, i = this.v2;
        return e.set(gf(t, n.x, r.x, i.x), gf(t, n.y, r.y, i.y), gf(t, n.z, r.z, i.z)), 
        e;
    }, ((Mf.prototype = Object.create(lf.prototype)).constructor = Mf).prototype.isSplineCurve = !0, 
    Mf.prototype.getPoint = function(t, e) {
        e = e || new Mt(), t = ((a = this.points).length - 1) * t;
        var n = Math.floor(t), r = (t = t - n, a[0 === n ? n : n - 1]), i = a[n], o = a[n > a.length - 2 ? a.length - 1 : n + 1], a = a[n > a.length - 3 ? a.length - 1 : n + 2];
        return e.set(vf(t, r.x, i.x, o.x, a.x), vf(t, r.y, i.y, o.y, a.y)), e;
    }, Mf.prototype.copy = function(t) {
        lf.prototype.copy.call(this, t), this.points = [];
        for (var e = 0, n = t.points.length; e < n; e++) {
            var r = t.points[e];
            this.points.push(r.clone());
        }
        return this;
    }, Tf.prototype = Object.assign(Object.create(lf.prototype), {
        constructor: Tf,
        add: function(t) {
            this.curves.push(t);
        },
        closePath: function() {
            var t = this.curves[0].getPoint(0), e = this.curves[this.curves.length - 1].getPoint(1);
            t.equals(e) || this.curves.push(new Sf(e, t));
        },
        getPoint: function(t) {
            for (var e, n, r, i = t * this.getLength(), o = this.getCurveLengths(), a = 0; a < o.length; ) {
                if (o[a] >= i) return e = o[a] - i, r = (n = this.curves[a]).getLength(), n.getPointAt(0 === r ? 0 : 1 - e / r);
                a++;
            }
            return null;
        },
        getLength: function() {
            var t = this.getCurveLengths();
            return t[t.length - 1];
        },
        updateArcLengths: function() {
            this.needsUpdate = !0, this.cacheLengths = null, this.getCurveLengths();
        },
        getCurveLengths: function() {
            if (this.cacheLengths && this.cacheLengths.length === this.curves.length) return this.cacheLengths;
            for (var t = [], e = 0, n = 0, r = this.curves.length; n < r; n++) e += this.curves[n].getLength(), 
            t.push(e);
            return this.cacheLengths = t;
        },
        getSpacedPoints: function(t) {
            void 0 === t && (t = 40);
            for (var e = [], n = 0; n <= t; n++) e.push(this.getPoint(n / t));
            return this.autoClose && e.push(e[0]), e;
        },
        getPoints: function(t) {
            t = t || 12;
            for (var e, n = [], r = 0, i = this.curves; r < i.length; r++) for (var o = i[r], a = o && o.isEllipseCurve ? 2 * t : o && (o.isLineCurve || o.isLineCurve3) ? 1 : o && o.isSplineCurve ? t * o.points.length : t, s = o.getPoints(a), l = 0; l < s.length; l++) {
                var u = s[l];
                e && e.equals(u) || (n.push(u), e = u);
            }
            return this.autoClose && 1 < n.length && !n[n.length - 1].equals(n[0]) && n.push(n[0]), 
            n;
        },
        copy: function(t) {
            lf.prototype.copy.call(this, t), this.curves = [];
            for (var e = 0, n = t.curves.length; e < n; e++) {
                var r = t.curves[e];
                this.curves.push(r.clone());
            }
            return this.autoClose = t.autoClose, this;
        }
    }), Lf.prototype = Object.assign(Object.create(Tf.prototype), {
        constructor: Lf,
        setFromPoints: function(t) {
            this.moveTo(t[0].x, t[0].y);
            for (var e = 1, n = t.length; e < n; e++) this.lineTo(t[e].x, t[e].y);
            return this;
        },
        moveTo: function(t, e) {
            return this.currentPoint.set(t, e), this;
        },
        lineTo: function(t, e) {
            var n = new Sf(this.currentPoint.clone(), new Mt(t, e));
            return this.curves.push(n), this.currentPoint.set(t, e), this;
        },
        quadraticCurveTo: function(t, e, n, r) {
            return t = new Ef(this.currentPoint.clone(), new Mt(t, e), new Mt(n, r)), this.curves.push(t), 
            this.currentPoint.set(n, r), this;
        },
        bezierCurveTo: function(t, e, n, r, i, o) {
            return t = new xf(this.currentPoint.clone(), new Mt(t, e), new Mt(n, r), new Mt(i, o)), 
            this.curves.push(t), this.currentPoint.set(i, o), this;
        },
        splineThru: function(t) {
            var e = new Mf([ this.currentPoint.clone() ].concat(t));
            return this.curves.push(e), this.currentPoint.copy(t[t.length - 1]), this;
        },
        arc: function(t, e, n, r, i, o) {
            var a = this.currentPoint.x, s = this.currentPoint.y;
            return this.absarc(t + a, e + s, n, r, i, o), this;
        },
        absarc: function(t, e, n, r, i, o) {
            return this.absellipse(t, e, n, n, r, i, o), this;
        },
        ellipse: function(t, e, n, r, i, o, a, s) {
            var l = this.currentPoint.x, u = this.currentPoint.y;
            return this.absellipse(t + l, e + u, n, r, i, o, a, s), this;
        },
        absellipse: function(t, e, n, r, i, o, a, s) {
            return t = new uf(t, e, n, r, i, o, a, s), 0 < this.curves.length && ((e = t.getPoint(0)).equals(this.currentPoint) || this.lineTo(e.x, e.y)), 
            this.curves.push(t), n = t.getPoint(1), this.currentPoint.copy(n), this;
        },
        copy: function(t) {
            return Tf.prototype.copy.call(this, t), this.currentPoint.copy(t.currentPoint), 
            this;
        }
    }), Af.prototype = Object.assign(Object.create(Lf.prototype), {
        constructor: Af,
        getPointsHoles: function(t) {
            for (var e = [], n = 0, r = this.holes.length; n < r; n++) e[n] = this.holes[n].getPoints(t);
            return e;
        },
        extractPoints: function(t) {
            return {
                shape: this.getPoints(t),
                holes: this.getPointsHoles(t)
            };
        },
        copy: function(t) {
            Lf.prototype.copy.call(this, t), this.holes = [];
            for (var e = 0, n = t.holes.length; e < n; e++) {
                var r = t.holes[e];
                this.holes.push(r.clone());
            }
            return this;
        }
    });
    var Pf = function(t, e, n) {
        n = n || 2;
        var r, i, o, a, s, l = e && e.length, u = l ? e[0] * n : t.length, c = Rf(t, 0, u, n, !0), h = [];
        if (c && c.next !== c.prev) {
            if (l && (c = function(t, e, n, r) {
                var i, o, a, s = [];
                for (i = 0, o = e.length; i < o; i++) (a = Rf(t, a = e[i] * r, i < o - 1 ? e[i + 1] * r : t.length, r, !1)) === a.next && (a.steiner = !0), 
                s.push(function(t) {
                    for (var e = t, n = t; (e.x < n.x || e.x === n.x && e.y < n.y) && (n = e), (e = e.next) !== t; ) ;
                    return n;
                }(a));
                for (s.sort(If), i = 0; i < s.length; i++) !function(t, e) {
                    (e = function(t, e) {
                        var n, r = e, i = t.x, o = t.y, a = -1 / 0;
                        do {
                            if (o <= r.y && o >= r.next.y && r.next.y !== r.y) {
                                var s = r.x + (o - r.y) * (r.next.x - r.x) / (r.next.y - r.y);
                                if (s <= i && a < s) {
                                    if ((a = s) === i) {
                                        if (o === r.y) return r;
                                        if (o === r.next.y) return r.next;
                                    }
                                    n = r.x < r.next.x ? r : r.next;
                                }
                            }
                        } while ((r = r.next) !== e);
                        if (!n) return null;
                        if (i === a) return n.prev;
                        var l, u = n, c = n.x, h = n.y, f = 1 / 0;
                        for (r = n.next; r !== u; ) i >= r.x && r.x >= c && i !== r.x && kf(o < h ? i : a, o, c, h, o < h ? a : i, o, r.x, r.y) && ((l = Math.abs(o - r.y) / (i - r.x)) < f || l === f && r.x > n.x) && Bf(r, t) && (n = r, 
                        f = l), r = r.next;
                        return n;
                    }(t, e)) && jf(e = Uf(e, t), e.next);
                }(s[i], n), n = jf(n, n.next);
                return n;
            }(t, e, c, n)), t.length > 80 * n) {
                for (var f = r = t[0], p = i = t[1], d = n; d < u; d += n) (o = t[d]) < f && (f = o), 
                (a = t[d + 1]) < p && (p = a), r < o && (r = o), i < a && (i = a);
                s = 0 !== (s = Math.max(r - f, i - p)) ? 1 / s : 0;
            }
            !function t(e, n, r, i, o, a, s) {
                if (e) {
                    if (!s && a) {
                        for (var l = e, u = i, c = o, h = a, f = l; null === f.z && (f.z = Df(f.x, f.y, u, c, h)), 
                        f.prevZ = f.prev, f.nextZ = f.next, (f = f.next) !== l; ) ;
                        f.prevZ.nextZ = null, f.prevZ = null;
                        var p, d, y, m, v, g, b, x, w = f, S = 1;
                        do {
                            for (d = w, v = w = null, g = 0; d; ) {
                                for (g++, y = d, p = b = 0; p < S && (b++, y = y.nextZ); p++) ;
                                for (x = S; 0 < b || 0 < x && y; ) 0 !== b && (0 === x || !y || d.z <= y.z) ? (d = (m = d).nextZ, 
                                b--) : (y = (m = y).nextZ, x--), v ? v.nextZ = m : w = m, m.prevZ = v, v = m;
                                d = y;
                            }
                        } while (v.nextZ = null, S *= 2, 1 < g);
                    }
                    for (var _, E, O = e; e.prev !== e.next; ) if (_ = e.prev, E = e.next, a ? function(t, e, n, r) {
                        var i = t.prev, o = t, a = t.next;
                        if (!(0 <= Cf(i, o, a))) {
                            for (var s = (i.x < o.x ? i.x < a.x ? i : a : o.x < a.x ? o : a).x, l = (i.y < o.y ? i.y < a.y ? i : a : o.y < a.y ? o : a).y, u = (i.x > o.x ? i.x > a.x ? i : a : o.x > a.x ? o : a).x, c = (i.y > o.y ? i.y > a.y ? i : a : o.y > a.y ? o : a).y, h = Df(s, l, e, n, r), f = Df(u, c, e, n, r), p = t.prevZ, d = t.nextZ; p && p.z >= h && d && d.z <= f; ) {
                                if (p !== t.prev && p !== t.next && kf(i.x, i.y, o.x, o.y, a.x, a.y, p.x, p.y) && 0 <= Cf(p.prev, p, p.next)) return;
                                if (p = p.prevZ, d !== t.prev && d !== t.next && kf(i.x, i.y, o.x, o.y, a.x, a.y, d.x, d.y) && 0 <= Cf(d.prev, d, d.next)) return;
                                d = d.nextZ;
                            }
                            for (;p && p.z >= h; ) {
                                if (p !== t.prev && p !== t.next && kf(i.x, i.y, o.x, o.y, a.x, a.y, p.x, p.y) && 0 <= Cf(p.prev, p, p.next)) return;
                                p = p.prevZ;
                            }
                            for (;d && d.z <= f; ) {
                                if (d !== t.prev && d !== t.next && kf(i.x, i.y, o.x, o.y, a.x, a.y, d.x, d.y) && 0 <= Cf(d.prev, d, d.next)) return;
                                d = d.nextZ;
                            }
                            return 1;
                        }
                    }(e, i, o, a) : function(t) {
                        var e = t.prev, n = t, r = t.next;
                        if (!(0 <= Cf(e, n, r))) {
                            for (var i = t.next.next; i !== t.prev; ) {
                                if (kf(e.x, e.y, n.x, n.y, r.x, r.y, i.x, i.y) && 0 <= Cf(i.prev, i, i.next)) return;
                                i = i.next;
                            }
                            return 1;
                        }
                    }(e)) n.push(_.i / r), n.push(e.i / r), n.push(E.i / r), Gf(e), e = E.next, O = E.next; else if ((e = E) === O) {
                        s ? 1 === s ? t(e = function(t, e, n) {
                            var r = t;
                            do {
                                var i = r.prev, o = r.next.next;
                            } while (!Nf(i, o) && Ff(i, r, r.next, o) && Bf(i, o) && Bf(o, i) && (e.push(i.i / n), 
                            e.push(r.i / n), e.push(o.i / n), Gf(r), Gf(r.next), r = t = o), (r = r.next) !== t);
                            return r;
                        }(e, n, r), n, r, i, o, a, 2) : 2 === s && function(e, n, r, i, o, a) {
                            var s = e;
                            do {
                                for (var l, u = s.next.next; u !== s.prev; ) {
                                    if (s.i !== u.i && function(t, e) {
                                        return t.next.i !== e.i && t.prev.i !== e.i && !function(t, e) {
                                            var n = t;
                                            do {
                                                if (n.i !== t.i && n.next.i !== t.i && n.i !== e.i && n.next.i !== e.i && Ff(n, n.next, t, e)) return 1;
                                            } while ((n = n.next) !== t);
                                        }(t, e) && Bf(t, e) && Bf(e, t) && function(t, e) {
                                            for (var n = t, r = !1, i = (t.x + e.x) / 2, o = (t.y + e.y) / 2; n.y > o != n.next.y > o && n.next.y !== n.y && i < (n.next.x - n.x) * (o - n.y) / (n.next.y - n.y) + n.x && (r = !r), 
                                            (n = n.next) !== t; ) ;
                                            return r;
                                        }(t, e);
                                    }(s, u)) return l = Uf(s, u), s = jf(s, s.next), l = jf(l, l.next), t(s, n, r, i, o, a), 
                                    t(l, n, r, i, o, a);
                                    u = u.next;
                                }
                            } while ((s = s.next) !== e);
                        }(e, n, r, i, o, a) : t(jf(e), n, r, i, o, a, 1);
                        break;
                    }
                }
            }(c, h, n, f, p, s);
        }
        return h;
    };
    function Rf(t, e, n, r, i) {
        var o, a;
        if (i === 0 < function(t, e, n, r) {
            for (var i = 0, o = e, a = n - r; o < n; o += r) i += (t[a] - t[o]) * (t[o + 1] + t[a + 1]), 
            a = o;
            return i;
        }(t, e, n, r)) for (o = e; o < n; o += r) a = zf(o, t[o], t[o + 1], a); else for (o = n - r; e <= o; o -= r) a = zf(o, t[o], t[o + 1], a);
        return a && Nf(a, a.next) && (Gf(a), a = a.next), a;
    }
    function jf(t, e) {
        if (!t) return t;
        e = e || t;
        var n, r = t;
        do {
            if (n = !1, r.steiner || !Nf(r, r.next) && 0 !== Cf(r.prev, r, r.next)) r = r.next; else {
                if (Gf(r), (r = e = r.prev) === r.next) break;
                n = !0;
            }
        } while (n || r !== e);
        return e;
    }
    function If(t, e) {
        return t.x - e.x;
    }
    function Df(t, e, n, r, i) {
        return (t = 1431655765 & ((t = 858993459 & ((t = 252645135 & ((t = 16711935 & ((t = 32767 * (t - n) * i) | t << 8)) | t << 4)) | t << 2)) | t << 1)) | (e = 1431655765 & ((e = 858993459 & ((e = 252645135 & ((e = 16711935 & ((e = 32767 * (e - r) * i) | e << 8)) | e << 4)) | e << 2)) | e << 1)) << 1;
    }
    function kf(t, e, n, r, i, o, a, s) {
        return 0 <= (i - a) * (e - s) - (t - a) * (o - s) && 0 <= (t - a) * (r - s) - (n - a) * (e - s) && 0 <= (n - a) * (o - s) - (i - a) * (r - s);
    }
    function Cf(t, e, n) {
        return (e.y - t.y) * (n.x - e.x) - (e.x - t.x) * (n.y - e.y);
    }
    function Nf(t, e) {
        return t.x === e.x && t.y === e.y;
    }
    function Ff(t, e, n, r) {
        return Nf(t, n) && Nf(e, r) || Nf(t, r) && Nf(n, e) || 0 < Cf(t, e, n) != 0 < Cf(t, e, r) && 0 < Cf(n, r, t) != 0 < Cf(n, r, e);
    }
    function Bf(t, e) {
        return Cf(t.prev, t, t.next) < 0 ? 0 <= Cf(t, e, t.next) && 0 <= Cf(t, t.prev, e) : Cf(t, e, t.prev) < 0 || Cf(t, t.next, e) < 0;
    }
    function Uf(t, e) {
        var n = new Hf(t.i, t.x, t.y), r = new Hf(e.i, e.x, e.y), i = t.next, o = e.prev;
        return (t.next = e).prev = t, (n.next = i).prev = n, (r.next = n).prev = r, (o.next = r).prev = o, 
        r;
    }
    function zf(t, e, n, r) {
        return t = new Hf(t, e, n), r ? (t.next = r.next, (t.prev = r).next.prev = t, r.next = t) : (t.prev = t).next = t, 
        t;
    }
    function Gf(t) {
        t.next.prev = t.prev, t.prev.next = t.next, t.prevZ && (t.prevZ.nextZ = t.nextZ), 
        t.nextZ && (t.nextZ.prevZ = t.prevZ);
    }
    function Hf(t, e, n) {
        this.i = t, this.x = e, this.y = n, this.prev = null, this.next = null, this.z = null, 
        this.prevZ = null, this.nextZ = null, this.steiner = !1;
    }
    var Vf = {
        area: function(t) {
            for (var e = t.length, n = 0, r = e - 1, i = 0; i < e; r = i++) n += t[r].x * t[i].y - t[i].x * t[r].y;
            return .5 * n;
        },
        isClockWise: function(t) {
            return Vf.area(t) < 0;
        },
        triangulateShape: function(t, e) {
            var n = [], r = [], i = [], o = (Wf(t), Yf(n, t), t.length);
            e.forEach(Wf);
            for (var a = 0; a < e.length; a++) r.push(o), o += e[a].length, Yf(n, e[a]);
            var s = Pf(n, r);
            for (a = 0; a < s.length; a += 3) i.push(s.slice(a, a + 3));
            return i;
        }
    };
    function Wf(t) {
        var e = t.length;
        2 < e && t[e - 1].equals(t[0]) && t.pop();
    }
    function Yf(t, e) {
        for (var n = 0; n < e.length; n++) t.push(e[n].x), t.push(e[n].y);
    }
    function Xf(t) {
        return (Xf = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Zf(t, e) {
        or.call(this), this.type = "ShapeGeometry", "object" === Xf(e) && (console.warn("THREE.ShapeGeometry: Options parameter has been removed."), 
        e = e.curveSegments), this.parameters = {
            shapes: t,
            curveSegments: e
        }, this.fromBufferGeometry(new qf(t, e)), this.mergeVertices();
    }
    function qf(t, e) {
        Mr.call(this), this.type = "ShapeBufferGeometry", this.parameters = {
            shapes: t,
            curveSegments: e
        }, e = e || 12;
        var n = [], r = [], i = [], o = [], a = 0, s = 0;
        if (!1 === Array.isArray(t)) u(t); else for (var l = 0; l < t.length; l++) u(t[l]), 
        this.addGroup(a, s, l), a += s, s = 0;
        function u(t) {
            var a, l = r.length / 3, u = (t = t.extractPoints(e)).shape, c = t.holes;
            for (!1 === Vf.isClockWise(u) && (u = u.reverse()), f = 0, p = c.length; f < p; f++) a = c[f], 
            !0 === Vf.isClockWise(a) && (c[f] = a.reverse());
            for (var h = Vf.triangulateShape(u, c), f = 0, p = c.length; f < p; f++) a = c[f], 
            u = u.concat(a);
            for (f = 0, p = u.length; f < p; f++) {
                var d = u[f];
                r.push(d.x, d.y, 0), i.push(0, 0, 1), o.push(d.x, d.y);
            }
            for (f = 0, p = h.length; f < p; f++) {
                var y = (v = h[f])[0] + l, m = v[1] + l, v = v[2] + l;
                n.push(y, m, v), s += 3;
            }
        }
        this.setIndex(n), this.setAttribute("position", new yr(r, 3)), this.setAttribute("normal", new yr(i, 3)), 
        this.setAttribute("uv", new yr(o, 2));
    }
    function Kf(t, e) {
        or.call(this), this.type = "ExtrudeGeometry", this.parameters = {
            shapes: t,
            options: e
        }, this.fromBufferGeometry(new Jf(t, e)), this.mergeVertices();
    }
    function Jf(t, e) {
        Mr.call(this), this.type = "ExtrudeBufferGeometry", this.parameters = {
            shapes: t,
            options: e
        }, t = Array.isArray(t) ? t : [ t ];
        for (var n = this, r = [], i = [], o = 0, a = t.length; o < a; o++) !function(t) {
            var o = [], a = void 0 !== e.curveSegments ? e.curveSegments : 12, s = void 0 !== e.steps ? e.steps : 1, l = void 0 !== e.depth ? e.depth : 100, u = void 0 === e.bevelEnabled || e.bevelEnabled, c = void 0 !== e.bevelThickness ? e.bevelThickness : 6, f = void 0 !== e.bevelSize ? e.bevelSize : c - 2, p = void 0 !== e.bevelOffset ? e.bevelOffset : 0, d = void 0 !== e.bevelSegments ? e.bevelSegments : 3, y = e.extrudePath, m = void 0 !== e.UVGenerator ? e.UVGenerator : Qf;
            void 0 !== e.amount && (console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."), 
            l = e.amount);
            var v, g, b, x, w, S, _, E, O = !1;
            y && (v = y.getSpacedPoints(s), u = !(O = !0), g = y.computeFrenetFrames(s, !1), 
            b = new h(), x = new h(), w = new h()), u || (p = f = c = d = 0);
            var M = (y = t.extractPoints(a)).shape, T = y.holes;
            if (!Vf.isClockWise(M)) for (M = M.reverse(), _ = 0, E = T.length; _ < E; _++) S = T[_], 
            Vf.isClockWise(S) && (T[_] = S.reverse());
            var L = Vf.triangulateShape(M, T), A = M;
            for (_ = 0, E = T.length; _ < E; _++) S = T[_], M = M.concat(S);
            function P(t, e, n) {
                return e || console.error("THREE.ExtrudeGeometry: vec does not exist"), e.clone().multiplyScalar(n).add(t);
            }
            var R, j, I, D, k, C, N = M.length, F = L.length;
            function B(t, e, n) {
                var r = t.x - e.x, i = t.y - e.y, o = n.x - t.x, a = n.y - t.y, s = r * r + i * i;
                if (Math.abs(r * a - i * o) > Number.EPSILON) {
                    var l = Math.sqrt(s), u = Math.sqrt(o * o + a * a), c = e.x - i / l;
                    e = e.y + r / l;
                    if ((n = (u = c + r * (l = ((n.x - a / u - c) * a - (n.y + o / u - e) * o) / (r * a - i * o)) - t.x) * u + (c = e + i * l - t.y) * c) <= 2) return new Mt(u, c);
                    l = Math.sqrt(n / 2);
                } else e = !1, r > Number.EPSILON ? o > Number.EPSILON && (e = !0) : r < -Number.EPSILON ? o < -Number.EPSILON && (e = !0) : Math.sign(i) === Math.sign(a) && (e = !0), 
                l = e ? (u = -i, c = r, Math.sqrt(s)) : (u = r, c = i, Math.sqrt(s / 2));
                return new Mt(u / l, c / l);
            }
            for (var U = [], z = 0, G = A.length, H = G - 1, V = z + 1; z < G; z++, H++, V++) H === G && (H = 0), 
            V === G && (V = 0), U[z] = B(A[z], A[H], A[V]);
            var W, Y, X = [], Z = U.concat();
            for (_ = 0, E = T.length; _ < E; _++) {
                for (S = T[_], W = [], z = 0, H = (G = S.length) - 1, V = z + 1; z < G; z++, H++, 
                V++) H === G && (H = 0), V === G && (V = 0), W[z] = B(S[z], S[H], S[V]);
                X.push(W), Z = Z.concat(W);
            }
            for (R = 0; R < d; R++) {
                for (I = R / d, D = c * Math.cos(I * Math.PI / 2), j = f * Math.sin(I * Math.PI / 2) + p, 
                z = 0, G = A.length; z < G; z++) K((k = P(A[z], U[z], j)).x, k.y, -D);
                for (_ = 0, E = T.length; _ < E; _++) for (S = T[_], W = X[_], z = 0, G = S.length; z < G; z++) K((k = P(S[z], W[z], j)).x, k.y, -D);
            }
            for (j = f + p, z = 0; z < N; z++) k = u ? P(M[z], Z[z], j) : M[z], O ? (x.copy(g.normals[0]).multiplyScalar(k.x), 
            b.copy(g.binormals[0]).multiplyScalar(k.y), w.copy(v[0]).add(x).add(b), K(w.x, w.y, w.z)) : K(k.x, k.y, 0);
            for (Y = 1; Y <= s; Y++) for (z = 0; z < N; z++) k = u ? P(M[z], Z[z], j) : M[z], 
            O ? (x.copy(g.normals[Y]).multiplyScalar(k.x), b.copy(g.binormals[Y]).multiplyScalar(k.y), 
            w.copy(v[Y]).add(x).add(b), K(w.x, w.y, w.z)) : K(k.x, k.y, l / s * Y);
            for (R = d - 1; 0 <= R; R--) {
                for (I = R / d, D = c * Math.cos(I * Math.PI / 2), j = f * Math.sin(I * Math.PI / 2) + p, 
                z = 0, G = A.length; z < G; z++) K((k = P(A[z], U[z], j)).x, k.y, l + D);
                for (_ = 0, E = T.length; _ < E; _++) for (S = T[_], W = X[_], z = 0, G = S.length; z < G; z++) k = P(S[z], W[z], j), 
                O ? K(k.x, k.y + v[s - 1].y, v[s - 1].x + D) : K(k.x, k.y, l + D);
            }
            function q(t, e) {
                var i, o;
                for (z = t.length; 0 <= --z; ) {
                    (o = (i = z) - 1) < 0 && (o = t.length - 1);
                    var a = 0, l = s + 2 * d;
                    for (a = 0; a < l; a++) {
                        var u = N * a, c = N * (a + 1), h = (f = h = void 0, e + i + u), f = e + o + u, p = e + o + c, y = e + i + c;
                        Q(h), Q(f), Q(y), Q(f), Q(p), Q(y), h = r.length / 3, $((f = m.generateSideWallUV(n, r, h - 6, h - 3, h - 2, h - 1))[0]), 
                        $(f[1]), $(f[3]), $(f[1]), $(f[2]), $(f[3]);
                    }
                }
            }
            function K(t, e, n) {
                o.push(t), o.push(e), o.push(n);
            }
            function J(t, e, i) {
                Q(t), Q(e), Q(i), t = r.length / 3, $((e = m.generateTopUV(n, r, t - 3, t - 2, t - 1))[0]), 
                $(e[1]), $(e[2]);
            }
            function Q(t) {
                r.push(o[3 * t + 0]), r.push(o[3 * t + 1]), r.push(o[3 * t + 2]);
            }
            function $(t) {
                i.push(t.x), i.push(t.y);
            }
            (function() {
                var t = r.length / 3;
                if (u) {
                    var e = 0 * N;
                    for (z = 0; z < F; z++) J((C = L[z])[2] + e, C[1] + e, C[0] + e);
                    for (e = N * (s + 2 * d), z = 0; z < F; z++) J((C = L[z])[0] + e, C[1] + e, C[2] + e);
                } else {
                    for (z = 0; z < F; z++) J((C = L[z])[2], C[1], C[0]);
                    for (z = 0; z < F; z++) J((C = L[z])[0] + N * s, C[1] + N * s, C[2] + N * s);
                }
                n.addGroup(t, r.length / 3 - t, 0);
            })(), function() {
                var t = r.length / 3, e = 0;
                for (q(A, e), e += A.length, _ = 0, E = T.length; _ < E; _++) q(S = T[_], e), e += S.length;
                n.addGroup(t, r.length / 3 - t, 1);
            }();
        }(t[o]);
        this.setAttribute("position", new yr(r, 3)), this.setAttribute("uv", new yr(i, 2)), 
        this.computeVertexNormals();
    }
    (Zf.prototype = Object.create(or.prototype)).constructor = Zf, (qf.prototype = Object.create(Mr.prototype)).constructor = qf, 
    (Kf.prototype = Object.create(or.prototype)).constructor = Kf, (Jf.prototype = Object.create(Mr.prototype)).constructor = Jf;
    var Qf = {
        generateTopUV: function(t, e, n, r, i) {
            var o = e[3 * n], a = (n = e[3 * n + 1], e[3 * r]), s = (r = e[3 * r + 1], e[3 * i]);
            e = e[3 * i + 1];
            return [ new Mt(o, n), new Mt(a, r), new Mt(s, e) ];
        },
        generateSideWallUV: function(t, e, n, r, i, o) {
            var a = e[3 * n], s = e[3 * n + 1], l = (n = e[3 * n + 2], e[3 * r]), u = e[3 * r + 1], c = (r = e[3 * r + 2], 
            e[3 * i]), h = e[3 * i + 1], f = (i = e[3 * i + 2], e[3 * o]), p = e[3 * o + 1];
            e = e[3 * o + 2];
            return Math.abs(s - u) < .01 ? [ new Mt(a, 1 - n), new Mt(l, 1 - r), new Mt(c, 1 - i), new Mt(f, 1 - e) ] : [ new Mt(s, 1 - n), new Mt(u, 1 - r), new Mt(h, 1 - i), new Mt(p, 1 - e) ];
        }
    }, $f = new Mt();
    function tp(t, e) {
        this.min = void 0 !== t ? t : new Mt(1 / 0, 1 / 0), this.max = void 0 !== e ? e : new Mt(-1 / 0, -1 / 0);
    }
    function ep(t) {
        return (ep = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function np(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != ep(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != ep(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == ep(t) ? t : String(t);
            }(r.key), r);
        }
    }
    Object.assign(tp.prototype, {
        set: function(t, e) {
            return this.min.copy(t), this.max.copy(e), this;
        },
        setFromPoints: function(t) {
            this.makeEmpty();
            for (var e = 0, n = t.length; e < n; e++) this.expandByPoint(t[e]);
            return this;
        },
        setFromCenterAndSize: function(t, e) {
            return e = $f.copy(e).multiplyScalar(.5), this.min.copy(t).sub(e), this.max.copy(t).add(e), 
            this;
        },
        clone: function() {
            return new this.constructor().copy(this);
        },
        copy: function(t) {
            return this.min.copy(t.min), this.max.copy(t.max), this;
        },
        makeEmpty: function() {
            return this.min.x = this.min.y = 1 / 0, this.max.x = this.max.y = -1 / 0, this;
        },
        isEmpty: function() {
            return this.max.x < this.min.x || this.max.y < this.min.y;
        },
        getCenter: function(t) {
            return void 0 === t && (console.warn("THREE.Box2: .getCenter() target is now required"), 
            t = new Mt()), this.isEmpty() ? t.set(0, 0) : t.addVectors(this.min, this.max).multiplyScalar(.5);
        },
        getSize: function(t) {
            return void 0 === t && (console.warn("THREE.Box2: .getSize() target is now required"), 
            t = new Mt()), this.isEmpty() ? t.set(0, 0) : t.subVectors(this.max, this.min);
        },
        expandByPoint: function(t) {
            return this.min.min(t), this.max.max(t), this;
        },
        expandByVector: function(t) {
            return this.min.sub(t), this.max.add(t), this;
        },
        expandByScalar: function(t) {
            return this.min.addScalar(-t), this.max.addScalar(t), this;
        },
        containsPoint: function(t) {
            return !(t.x < this.min.x || t.x > this.max.x || t.y < this.min.y || t.y > this.max.y);
        },
        containsBox: function(t) {
            return this.min.x <= t.min.x && t.max.x <= this.max.x && this.min.y <= t.min.y && t.max.y <= this.max.y;
        },
        getParameter: function(t, e) {
            return void 0 === e && (console.warn("THREE.Box2: .getParameter() target is now required"), 
            e = new Mt()), e.set((t.x - this.min.x) / (this.max.x - this.min.x), (t.y - this.min.y) / (this.max.y - this.min.y));
        },
        intersectsBox: function(t) {
            return !(t.max.x < this.min.x || t.min.x > this.max.x || t.max.y < this.min.y || t.min.y > this.max.y);
        },
        clampPoint: function(t, e) {
            return void 0 === e && (console.warn("THREE.Box2: .clampPoint() target is now required"), 
            e = new Mt()), e.copy(t).clamp(this.min, this.max);
        },
        distanceToPoint: function(t) {
            return $f.copy(t).clamp(this.min, this.max).sub(t).length();
        },
        intersect: function(t) {
            return this.min.max(t.min), this.max.min(t.max), this;
        },
        union: function(t) {
            return this.min.min(t.min), this.max.max(t.max), this;
        },
        translate: function(t) {
            return this.min.add(t), this.max.add(t), this;
        },
        equals: function(t) {
            return t.min.equals(this.min) && t.max.equals(this.max);
        }
    });
    var rp = function() {
        function t() {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
        }
        var e, n;
        return e = t, n = [ {
            key: "findNearNthPowerOfTwo",
            value: function(t) {
                return t -= 1, (t = (t = (t = (t = (t |= t >> 1) | t >> 2) | t >> 4) | t >> 8) | t >> 16) < 0 ? 1 : 1 + t;
            }
        }, {
            key: "polygonArea",
            value: function(t) {
                if (t.length < 3) return 0;
                var e = t.length;
                if (t[0].x === t[e - 1].x && t[0].y === t[e - 1].y && --e, e < 3) return 0;
                t[0].y, t[e - 1].x, t[1].x;
                for (var n = 1; n < e - 1; ++n) t[n].y, t[n - 1].x, t[n + 1].x;
                return t[e - 1].y * (t[e - 2].x - t[0].x) * .5;
            }
        }, {
            key: "closedPoints",
            value: function(t) {
                var e = t.length;
                return !(e < 3 || (t[0].x === t[e - 1].x && t[0].y === t[e - 1].y || (t[e] = {
                    x: t[e - 1].x,
                    y: t[e - 1].y
                }), 0));
            }
        }, {
            key: "IsRectCross",
            value: function(t, e, n, r) {
                return Math.min(t.x, e.x) <= Math.max(n.x, r.x) && Math.min(n.x, r.x) <= Math.max(t.x, e.x) && Math.min(t.y, e.y) <= Math.max(n.y, r.y) && Math.min(n.y, r.y) <= Math.max(t.y, e.y);
            }
        }, {
            key: "IsLineSegmentCross",
            value: function(t, e, n, r) {
                var i = t.x * (n.y - e.y) + e.x * (t.y - n.y) + n.x * (e.y - t.y), o = t.x * (r.y - e.y) + e.x * (t.y - r.y) + r.x * (e.y - t.y);
                return !(0 <= (i ^ o) && (0 != i || 0 != o) || 0 <= ((i = n.x * (t.y - r.y) + r.x * (n.y - t.y) + t.x * (r.y - n.y)) ^ (o = n.x * (e.y - r.y) + r.x * (n.y - e.y) + e.x * (r.y - n.y))) && (0 != i || 0 != o));
            }
        }, {
            key: "computerFocus",
            value: function(t, e, n, r) {
                var i, o = (r.x - n.x) * (t.y - e.y) - (e.x - t.x) * (n.y - r.y), a = (t.y - n.y) * (e.x - t.x) * (r.x - n.x) + n.x * (r.y - n.y) * (e.x - t.x) - t.x * (e.y - t.y) * (r.x - n.x);
                return 0 == o || (i = a / o, o = (t.x - e.x) * (r.y - n.y) - (e.y - t.y) * (n.x - r.x), 
                a = e.y * (t.x - e.x) * (r.y - n.y) + (r.x - e.x) * (r.y - n.y) * (t.y - e.y) - r.y * (n.x - r.x) * (e.y - t.y), 
                0 == o) ? null : {
                    x: i,
                    y: a / o
                };
            }
        }, {
            key: "GetLineSegmentCrossPoint",
            value: function(t, e, n, r) {
                return this.IsRectCross(t, e, n, r) ? this.computerFocus(t, e, n, r) : null;
            }
        }, {
            key: "IsPointInPolygon",
            value: function(t, e) {
                for (var n = !1, r = 0, i = t.length - 1; r < t.length; i = r++) (t[r].y <= e.y && e.y < t[i].y || t[i].y <= e.y && e.y < t[r].y) && e.x < (t[i].x - t[r].x) * (e.y - t[r].y) / (t[i].y - t[r].y) + t[r].x && (n = !n);
                return n;
            }
        }, {
            key: "PointCmp",
            value: function(t, e, n) {
                var r;
                return 0 <= t.x && e.x < 0 || (0 === t.x && 0 === e.x ? t.y > e.y : (r = (t.x - n.x) * (e.y - n.y) - (e.x - n.x) * (t.y - n.y)) < 0 || !(0 < r) && (r = (t.x - n.x) * (t.x - n.x) + (t.y - n.y) * (t.y - n.y), 
                (e.x - n.x) * (e.x - n.y) + (e.y - n.y) * (e.y - n.y) < r));
            }
        }, {
            key: "ClockwiseSortPoints",
            value: function(t) {
                for (var e = {
                    x: 0,
                    y: 0
                }, n = 0, r = 0, i = 0; i < t.length; i++) n += t[i].x, r += t[i].y;
                e.x = n / t.length, e.y = r / t.length;
                for (var o = 0; o < t.length - 1; o++) for (var a, s = 0; s < t.length - o - 1; s++) this.PointCmp(t[s], t[s + 1], e) && (a = t[s], 
                t[s] = t[s + 1], t[s + 1] = a);
            }
        }, {
            key: "PolygonClip",
            value: function(t, e, n) {
                if (t.length < 3 || e.length < 3) return !1;
                for (var r = 0; r < t.length; r++) for (var i = (r + 1) % t.length, o = 0; o < e.length; o++) {
                    var a = (o + 1) % e.length;
                    (a = this.GetLineSegmentCrossPoint(t[r], t[i], e[o], e[a])) && n.push(a);
                }
                for (var s = 0; s < t.length; s++) this.IsPointInPolygon(e, t[s]) && n.push(t[s]);
                for (var l = 0; l < e.length; l++) this.IsPointInPolygon(t, e[l]) && n.push(e[l]);
                return !(n.length <= 0 || (this.ClockwiseSortPoints(n), 0));
            }
        } ], null && np(e.prototype, null), n && np(e, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }();
    function ip(t) {
        return (ip = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function op(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != ip(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != ip(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == ip(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function ap(t, e, n) {
        e = lp(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], lp(t).constructor) : e.apply(t, n)) && ("object" === ip(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function sp() {
        return (sp = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function(t, e, n) {
            var r = function(t, e) {
                for (;!Object.prototype.hasOwnProperty.call(t, e) && null !== (t = lp(t)); ) ;
                return t;
            }(t, e);
            if (r) return (r = Object.getOwnPropertyDescriptor(r, e)).get ? r.get.call(arguments.length < 3 ? t : n) : r.value;
        }).apply(this, arguments);
    }
    function lp(t) {
        return (lp = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function up(t, e) {
        return (up = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    var cp = function() {
        var t = n, e = Fu;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n() {
            var t;
            if (this instanceof n) return (t = ap(this, n)).qu = {}, t;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && up(t, e), t = n, (e = [ {
            key: "resize",
            value: function() {
                sp(lp(n.prototype), "resize", this).call(this), this.qu = {};
            }
        } ]) && op(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }();
    function hp(t) {
        return (hp = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function fp(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != hp(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != hp(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == hp(t) ? t : String(t);
            }(r.key), r);
        }
    }
    oh = function(t, e, n) {
        return e && fp(t.prototype, e), n && fp(t, n), Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }(function t() {
        if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
    }), Object.assign(oh.prototype, {
        ts: function(t, e, n, r, i) {
            return i = void 0 !== i ? "?contentVersion=".concat(i) : "", (t = new es({
                method: "GET",
                url: t + e + "/" + e + ".theme" + i
            })).ts(function(t) {
                n && n(t);
            }, function(t) {
                r && r(t === Nt.PATH_ERROR ? Nt.THEME_ID_URL_ERROR : t);
            }), t;
        }
    });
    var pp, dp = new oh(), yp = (rh = {
        NORMAL: 1,
        INDOOR: 2,
        OUTDOOR: 4
    }, Object.freeze(rh), rh), mp = new h(), vp = new h(), gp = new h(), bp = new Mt(), xp = new Mt(), wp = new b(), Sp = new h(), _p = new h(), Ep = new h(), Op = new Mt(), Mp = new Mt(), Tp = new Mt();
    function Lp(t) {
        var e;
        B.call(this), this.type = "Sprite", void 0 === pp && (pp = new Mr(), e = new Ta(new Float32Array([ -.5, -.5, 0, 0, 0, .5, -.5, 0, 1, 0, .5, .5, 0, 1, 1, -.5, .5, 0, 0, 1 ]), 5), 
        pp.setIndex([ 0, 1, 2, 0, 2, 3 ]), pp.setAttribute("position", new Aa(e, 3, 0, !1)), 
        pp.setAttribute("uv", new Aa(e, 2, 3, !1))), this.geometry = pp, this.material = void 0 !== t ? t : new Cl(), 
        this.center = new Mt(.5, .5);
    }
    function Ap(t, e, n, r, i, o) {
        bp.subVectors(t, n).addScalar(.5).multiply(r), void 0 !== i ? (xp.x = o * bp.x - i * bp.y, 
        xp.y = i * bp.x + o * bp.y) : xp.copy(bp), t.copy(e), t.x += xp.x, t.y += xp.y, 
        t.applyMatrix4(wp);
    }
    function Pp(t) {
        return (Pp = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Rp(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Pp(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Pp(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Pp(t) ? t : String(t);
            }(r.key), r);
        }
    }
    Lp.prototype = Object.assign(Object.create(B.prototype), {
        constructor: Lp,
        isSprite: !0,
        raycast: function(t, e) {
            null === t.camera && console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'), 
            vp.setFromMatrixScale(this.matrixWorld), wp.copy(t.camera.matrixWorld), this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse, this.matrixWorld), 
            gp.setFromMatrixPosition(this.modelViewMatrix), t.camera.isPerspectiveCamera && !1 === this.material.sizeAttenuation && vp.multiplyScalar(-gp.z);
            var n, r, i = (0 !== (i = this.material.rotation) && (r = Math.cos(i), n = Math.sin(i)), 
            this.center);
            Ap(Sp.set(-.5, -.5, 0), gp, i, vp, n, r), Ap(_p.set(.5, -.5, 0), gp, i, vp, n, r), 
            Ap(Ep.set(.5, .5, 0), gp, i, vp, n, r), Op.set(0, 0), Mp.set(1, 0), Tp.set(1, 1), 
            null === t.ray.intersectTriangle(Sp, _p, Ep, !1, mp) && (Ap(_p.set(-.5, .5, 0), gp, i, vp, n, r), 
            Mp.set(0, 1), null === t.ray.intersectTriangle(Sp, Ep, _p, !1, mp)) || (i = t.ray.origin.distanceTo(mp)) < t.near || i > t.far || e.push({
                distance: i,
                point: mp.clone(),
                uv: Jr.getUV(mp, Sp, _p, Ep, Op, Mp, Tp, new Mt()),
                face: null,
                object: this
            });
        },
        clone: function() {
            return new this.constructor(this.material).copy(this);
        },
        copy: function(t) {
            return B.prototype.copy.call(this, t), void 0 !== t.center && this.center.copy(t.center), 
            this;
        }
    });
    ih = function() {
        function t(e) {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
            this.gf = e, this.Yi = !0, this.wf = new Map(), this._f = {
                x: 1,
                y: 1,
                z: 1
            }, this.Sf = !0, this.Ie = null;
        }
        var e, n;
        return e = t, (n = [ {
            key: "visible",
            get: function() {
                return this.Yi;
            },
            set: function(t) {
                this.Yi = t, this.wf.forEach(function(t) {
                    t.xf();
                });
            }
        }, {
            key: "show",
            get: function() {
                return this.Sf;
            },
            set: function(t) {
                t !== this.Sf && (this.Sf = t, this.Ef({
                    opacity: t ? 1 : 0,
                    duration: 1,
                    finish: function() {}
                }));
            }
        }, {
            key: "setFacadeNode",
            value: function(t) {
                var e = t.FID;
                t.type === Ct.LABEL && (e = "label" + t.FID), this.wf.set(e, t);
            }
        } ]) && Rp(e.prototype, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }();
    var jp = (Object.assign(ih.prototype, {
        lc: function(t) {
            var e;
            this.Sf = !this.gf.parent.ui.Wo(this.gf), this.gf.Mf === yp.NORMAL && (this.gf.Of(), 
            e = this.gf.parent.Ct.Bi(this.gf.Ae), this._f.z = e.isZoomLimit ? .2 : 1), t.xi && (t.Re === Ct.EXTERNAL_MODEL ? (t.xi.scale.x = this._f.x, 
            t.xi.scale.y = this._f.z, t.xi.scale.z = this._f.y) : t.Re === Ct.MODEL && (t.xi.scale.x = this._f.x, 
            t.xi.scale.y = this._f.y, t.xi.scale.z = this._f.z)), this.Ef({
                opacity: this.Sf ? 1 : 0,
                duration: 1,
                finish: function() {}
            });
        },
        Tf: function(t, e) {
            var n;
            e.scale.z === this._f.z && e.scale.y === this._f.y || (n = void 0 !== e.duration ? e.duration : .5, 
            this._f = e.scale, this.wf.forEach(function(r) {
                var i, o, a, s, l;
                r.Re !== Ct.MODEL && r.Re !== Ct.EXTERNAL_MODEL || r.xi && (i = r.xi.scale.x, o = r.xi.scale.y, 
                a = r.xi.scale.z, s = {
                    x: e.scale.x - i,
                    y: e.scale.z - o,
                    z: e.scale.y - a
                }, r.Re === Ct.MODEL && (s = {
                    x: e.scale.x - i,
                    y: e.scale.y - o,
                    z: e.scale.z - a
                }), (l = new ne({
                    src: [ 0 ],
                    dest: [ 1 ]
                })).rn(n).an(function(e) {
                    e = e.destination[0], r.xi ? (r.xi.scale.x = s.x * e + i, r.xi.scale.y = s.y * e + o, 
                    r.xi.scale.z = s.z * e + a, t.enableUpdateRender()) : t.Oi.Ai(l);
                }).un(function() {
                    t.Oi.Ai(l), e.finish && e.finish();
                }), t.Oi.Si(l.$t()));
            }));
        },
        Ef: function(t) {
            var e = this, n = (this.Ie ? this.Ie.finish() : this.Ie = new ne(), this.visible = !0, 
            this.gf.parent), r = [];
            if (this.wf.forEach(function(e) {
                e.xi && e.xi.traverse(function(n) {
                    var i;
                    n.constructor !== mi && n.constructor !== Lp || (e.Re === Ct.MODEL && (i = n.material.clone(), 
                    n.material.dispose(), n.material = i), i = n.material, Array.isArray(i) || (i = [ i ]), 
                    e.jf && i.push(e.jf.material), i.forEach(function(e) {
                        "FMMeshStandardMaterial" === e.type ? r.push({
                            material: e,
                            offset: t.opacity - e.uniforms.opacity.value,
                            opacity: e.uniforms.opacity.value
                        }) : r.push({
                            material: e,
                            offset: t.opacity - e.opacity,
                            opacity: e.opacity
                        });
                    }));
                });
            }), this.Ie.nn([ 0 ]).en([ 1 ]).rn(t.duration).an(function(t) {
                for (var e = t.destination[0], i = 0; i < r.length; i++) "FMMeshStandardMaterial" === r[i].material.type ? r[i].material.uniforms.opacity.value = r[i].offset * e + r[i].opacity : r[i].material.opacity = r[i].offset * e + r[i].opacity, 
                r[i].material.transparent = !0, r[i].needsUpdate = !0;
                n.enableUpdateRender();
            }).un(function() {
                e.visible = e.Sf;
                for (var i = 0; i < r.length; i++) "FMMeshStandardMaterial" === r[i].material.type ? r[i].material.uniforms.opacity.value = r[i].opacity : r[i].material.opacity = r[i].opacity, 
                r[i].needsUpdate = !0;
                n.Oi.Ai(e.Ie), t.finish && t.finish(), n.enableUpdateRender();
            }).play(), n.Oi.Si(this.Ie), 0 === t.duration) {
                this.Ie.finish();
                for (var i = 0; i < r.length; i++) "FMMeshStandardMaterial" === r[i].material.type ? r[i].material.uniforms.opacity.value = t.opacity : r[i].material.opacity = t.opacity, 
                r[i].needsUpdate = !0, n.enableUpdateRender();
            }
        }
    }), ih);
    function Ip(t) {
        return (Ip = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Dp(t, e) {
        (null == e || e > t.length) && (e = t.length);
        for (var n = 0, r = new Array(e); n < e; n++) r[n] = t[n];
        return r;
    }
    function kp(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Ip(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Ip(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Ip(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function Cp(t, e, n) {
        e = Bp(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], Bp(t).constructor) : e.apply(t, n)) && ("object" === Ip(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        return Np(r);
    }
    function Np(t) {
        if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return t;
    }
    function Fp() {
        return (Fp = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function(t, e, n) {
            var r = function(t, e) {
                for (;!Object.prototype.hasOwnProperty.call(t, e) && null !== (t = Bp(t)); ) ;
                return t;
            }(t, e);
            if (r) return (r = Object.getOwnPropertyDescriptor(r, e)).get ? r.get.call(arguments.length < 3 ? t : n) : r.value;
        }).apply(this, arguments);
    }
    function Bp(t) {
        return (Bp = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function Up(t, e) {
        return (Up = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    It = function() {
        var t = n, e = Gn;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t) {
            var e;
            if (this instanceof n) return (e = Cp(this, n, [ t ])).Lf = t.minlevel, e.kf = t.maxlevel, 
            e.Af = t.levelChart, e.Rf = t.fids, e.Mf = yp.NORMAL, e.Cf = new jp(Np(e)), e.Nf = !1, 
            e.Pf = new Map(), e.Df = !0, e;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && Up(t, e), t = n, (e = [ {
            key: "zoomRange",
            get: function() {
                return {
                    minLevel: this.Lf,
                    maxLevel: this.kf
                };
            }
        }, {
            key: "alignHeight",
            get: function() {
                return this.Df && (this.If(), this.Df = !1), this.Pf;
            }
        }, {
            key: "overviewMode",
            get: function() {
                return this.Mf;
            }
        }, {
            key: "visible",
            get: function() {
                return this.Yi;
            },
            set: function(t) {
                this.Yi = t, this.Bt.ui.Ff(this), this.Bt.enableUpdateNode();
            }
        }, {
            key: "levelChart",
            get: function() {
                return this.Af;
            }
        }, {
            key: "setTheme",
            value: function(t) {
                this.Bt.ui.Gf({
                    themeID: t,
                    bid: this.Ae
                });
            }
        }, {
            key: "setThemeExtension",
            value: function(t) {
                this.Bt.ui.Uf({
                    data: t,
                    bid: this.Ae
                });
            }
        }, {
            key: "clearThemeExtension",
            value: function() {
                this.Bt.ui.Uf({
                    bid: this.Ae
                });
            }
        }, {
            key: "getFadeFeatures",
            value: function() {
                var t, e = [], n = function(t, e) {
                    var n, r, i, o, a = "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"];
                    if (a) return r = !(n = !0), {
                        s: function() {
                            a = a.call(t);
                        },
                        n: function() {
                            var t = a.next();
                            return n = t.done, t;
                        },
                        e: function(t) {
                            r = !0, i = t;
                        },
                        f: function() {
                            try {
                                n || null == a.return || a.return();
                            } finally {
                                if (r) throw i;
                            }
                        }
                    };
                    if (Array.isArray(t) || (a = function(t, e) {
                        var n;
                        if (t) return "string" == typeof t ? Dp(t, e) : "Map" === (n = "Object" === (n = Object.prototype.toString.call(t).slice(8, -1)) && t.constructor ? t.constructor.name : n) || "Set" === n ? Array.from(t) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? Dp(t, e) : void 0;
                    }(t)) || e && t && "number" == typeof t.length) return a && (t = a), o = 0, {
                        s: e = function() {},
                        n: function() {
                            return o >= t.length ? {
                                done: !0
                            } : {
                                done: !1,
                                value: t[o++]
                            };
                        },
                        e: function(t) {
                            throw t;
                        },
                        f: e
                    };
                    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
                }(this.Cf.wf.values());
                try {
                    for (n.s(); !(t = n.n()).done; ) {
                        var r = t.value;
                        e.push(r);
                    }
                } catch (t) {
                    n.e(t);
                } finally {
                    n.f();
                }
                return e;
            }
        }, {
            key: "dispose",
            value: function() {
                Fp(Bp(n.prototype), "dispose", this).call(this);
            }
        } ]) && kp(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }();
    var zp = (Object.assign(It.prototype, {
        Si: function(t) {
            (t.Bt = this).Nt.push(t);
        },
        Of: function() {
            var t, e = this.parent.Ct.Bi(this.Ae);
            this.Mf === yp.OUTDOOR ? e.isZoomLimit = !1 : (t = this.parent.getZoom(), e.isZoomLimit = !(t < this.Lf || t >= this.kf));
        },
        Bf: function() {
            var t = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}, e = (this.Of(), 
            this.parent.Ct.Bi(this.Ae));
            this.Cf.Tf(this.parent, {
                scale: {
                    x: 1,
                    y: 1,
                    z: e.isZoomLimit ? .2 : 1
                },
                duration: void 0 !== t.duration ? t.duration : 1,
                finish: function() {}
            });
        },
        If: function() {
            if (this.Bt) for (var t = this.Bt.Dt, e = 0; e < this.Af.length; e += 2) {
                var n = t.floorSpace * this.Af[e];
                this.Pf.set(this.Af[e + 1], n);
            }
        },
        Hf: function(t) {
            if (void 0 === this.level || null === this.level) for (var e, n = 0; n < this.Af.length; n += 2) this.Af[n] === t && ((e = this.parent.Ct.Bi(this.Ae)).level = this.Af[n + 1], 
            e.visibleLevels = [ this.Af[n + 1] ]);
        }
    }), It);
    function Gp(t, e) {
        return Object.assign({}, e.ze, {
            buildingID: t.Ji,
            level: t.level,
            visibleLevels: t.visibleLevels,
            bid: t.Ae
        });
    }
    oh = {
        NAME: 2,
        ENAME: 4,
        FID: 8
    };
    var Hp = (Object.freeze(oh), oh);
    function Vp(t) {
        return (Vp = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Wp(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, Zp(r.key), r);
        }
    }
    function Yp(t, e, n) {
        e = Jp(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], Jp(t).constructor) : e.apply(t, n)) && ("object" === Vp(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function Xp(t, e, n, r) {
        return (Xp = "undefined" != typeof Reflect && Reflect.set ? Reflect.set : function(t, e, n, r) {
            var i;
            if (t = Kp(t, e)) {
                if ((i = Object.getOwnPropertyDescriptor(t, e)).set) return i.set.call(r, n), !0;
                if (!i.writable) return !1;
            }
            if (i = Object.getOwnPropertyDescriptor(r, e)) {
                if (!i.writable) return !1;
                i.value = n, Object.defineProperty(r, e, i);
            } else t = r, i = n, (r = Zp(r = e)) in t ? Object.defineProperty(t, r, {
                value: i,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : t[r] = i;
            return !0;
        })(t, e, n, r);
    }
    function Zp(t) {
        return t = function(t, e) {
            if ("object" != Vp(t) || !t) return t;
            var n = t[Symbol.toPrimitive];
            if (void 0 === n) return String(t);
            if ("object" != Vp(n = n.call(t, e))) return n;
            throw new TypeError("@@toPrimitive must return a primitive value.");
        }(t, "string"), "symbol" == Vp(t) ? t : String(t);
    }
    function qp() {
        return (qp = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function(t, e, n) {
            var r = Kp(t, e);
            if (r) return (r = Object.getOwnPropertyDescriptor(r, e)).get ? r.get.call(arguments.length < 3 ? t : n) : r.value;
        }).apply(this, arguments);
    }
    function Kp(t, e) {
        for (;!Object.prototype.hasOwnProperty.call(t, e) && null !== (t = Jp(t)); ) ;
        return t;
    }
    function Jp(t) {
        return (Jp = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function Qp(t, e) {
        return (Qp = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    rh = function() {
        var t = n, e = Gn;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t) {
            var e;
            if (this instanceof n) return (e = Yp(this, n, [ t ])).nt = t.height, e.er = t.bounds, 
            e.zf = t.zoom, e;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && Qp(t, e), t = n, (e = [ {
            key: "height",
            get: function() {
                return this.nt;
            }
        }, {
            key: "floorSpace",
            get: function() {
                return qp(Jp(n.prototype), "floorSpace", this);
            },
            set: function(t) {
                var e = this, r = Jp(n.prototype);
                if (!Xp(r, "floorSpace", t, this || r)) throw new TypeError("failed to set property");
                this.Bt.traverse(function(t) {
                    t !== e && (t.Df = !0, t.traverse(function(t) {
                        t.ir({
                            animate: !1
                        });
                    }));
                }), this.Bt.kt.Wi(this, {
                    level: this.level,
                    animate: !1,
                    finish: function() {
                        e.parent.It.wi(), e.parent.It.Hi(), e.parent.It.render();
                    }
                });
            }
        }, {
            key: "getFloors",
            value: function() {
                return this.Nt;
            }
        } ]) && Wp(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }();
    var $p = (Object.assign(rh.prototype, {
        Si: function(t) {
            (t.Bt = this).Nt.push(t);
        }
    }), rh);
    function td(t) {
        return (td = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function ed(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != td(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != td(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == td(t) ? t : String(t);
            }(r.key), r);
        }
    }
    var nd = function() {
        function t() {
            var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : 0, n = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : 0, r = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : 0, i = this, o = t;
            if (!(i instanceof o)) throw new TypeError("Cannot call a class as a function");
            Object.defineProperty(this, "isVector3", {
                value: !0
            }), this.x = e, this.y = n, this.z = r;
        }
        var e, n;
        return e = t, (n = [ {
            key: "set",
            value: function(t, e, n) {
                return void 0 === n && (n = this.z), this.x = t, this.y = e, this.z = n, this;
            }
        }, {
            key: "clone",
            value: function() {
                return new this.constructor(this.x, this.y, this.z);
            }
        }, {
            key: "copy",
            value: function(t) {
                return this.x = t.x, this.y = t.y, this.z = t.z, this;
            }
        }, {
            key: "sub",
            value: function(t, e) {
                return void 0 !== e ? (console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), 
                this.subVectors(t, e)) : (this.x -= t.x, this.y -= t.y, this.z -= t.z, this);
            }
        }, {
            key: "subVectors",
            value: function(t, e) {
                return this.x = t.x - e.x, this.y = t.y - e.y, this.z = t.z - e.z, this;
            }
        }, {
            key: "multiplyScalar",
            value: function(t) {
                return this.x *= t, this.y *= t, this.z *= t, this;
            }
        }, {
            key: "dot",
            value: function(t) {
                return this.x * t.x + this.y * t.y + this.z * t.z;
            }
        }, {
            key: "lengthSq",
            value: function() {
                return this.x * this.x + this.y * this.y + this.z * this.z;
            }
        }, {
            key: "length",
            value: function() {
                return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);
            }
        }, {
            key: "cross",
            value: function(t, e) {
                return void 0 !== e ? (console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."), 
                this.crossVectors(t, e)) : this.crossVectors(this, t);
            }
        }, {
            key: "crossVectors",
            value: function(t, e) {
                var n = t.x, r = t.y, i = (t = t.z, e.x), o = e.y;
                e = e.z;
                return this.x = r * e - t * o, this.y = t * i - n * e, this.z = n * o - r * i, this;
            }
        }, {
            key: "angleTo",
            value: function(t) {
                var e = Math.sqrt(this.lengthSq() * t.lengthSq());
                return 0 === e ? Math.PI / 2 : (t = this.dot(t) / e, e = Math.max(-1, Math.min(1, t)), 
                Math.acos(e));
            }
        }, {
            key: "normalize",
            value: function() {
                return this.divideScalar(this.length() || 1);
            }
        }, {
            key: "divideScalar",
            value: function(t) {
                return this.multiplyScalar(1 / t);
            }
        } ]) && ed(e.prototype, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }();
    function rd(t) {
        return (rd = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function id(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != rd(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != rd(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == rd(t) ? t : String(t);
            }(r.key), r);
        }
    }
    var od = function() {
        function t(e) {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
            this.Ro = e.size, this.je = e.center, this.Vf = e.points;
        }
        var e, n;
        return e = t, (n = [ {
            key: "size",
            get: function() {
                return this.Ro;
            }
        }, {
            key: "min",
            get: function() {
                return {
                    x: this.je.x - this.Ro.x / 2,
                    y: this.je.y - this.Ro.y / 2
                };
            }
        }, {
            key: "max",
            get: function() {
                return {
                    x: this.je.x + this.Ro.x / 2,
                    y: this.je.y + this.Ro.y / 2
                };
            }
        }, {
            key: "center",
            get: function() {
                return {
                    x: this.je.x,
                    y: this.je.y
                };
            }
        }, {
            key: "points",
            get: function() {
                return this.Vf;
            }
        } ]) && id(e.prototype, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }();
    function ad(t) {
        return (ad = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function sd(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != ad(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != ad(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == ad(t) ? t : String(t);
            }(r.key), r);
        }
    }
    var ld = function() {
        function t() {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
        }
        var e, n;
        return e = t, n = [ {
            key: "distance",
            value: function(t, e) {
                return Ve.distance(t, e);
            }
        }, {
            key: "isContain",
            value: function(t, e) {
                return Ve.isPolygonContainPoint(t, e);
            }
        }, {
            key: "bound",
            value: function(t) {
                for (var e = -Number.MAX_VALUE, n = -Number.MAX_VALUE, r = Number.MAX_VALUE, i = Number.MAX_VALUE, o = 0; o < t.length; o++) t[o].x > e && (e = t[o].x), 
                t[o].y > n && (n = t[o].y), t[o].x < r && (r = t[o].x), t[o].y < i && (i = t[o].y);
                return {
                    max: {
                        x: e,
                        y: n
                    },
                    min: {
                        x: r,
                        y: i
                    },
                    size: {
                        x: e - r,
                        y: n - i
                    },
                    center: {
                        x: (e + r) / 2,
                        y: (n + i) / 2
                    }
                };
            }
        }, {
            key: "orientedBound",
            value: function(t) {
                var e = {
                    center: {
                        x: 0,
                        y: 0
                    },
                    size: {
                        x: 0,
                        y: 0
                    },
                    rotation: {
                        x: 0,
                        y: 0
                    },
                    corners: []
                };
                if (t && 0 != t.length) {
                    for (var n = $t.cov(t), r = $t.eig(n).eigVect, i = [], o = Number.MAX_VALUE, a = Number.MAX_VALUE, s = -Number.MAX_VALUE, l = -Number.MAX_VALUE, u = 0; u < t.length; u++) {
                        var c = t[u].x * r[0][0] + t[u].y * r[0][1], h = t[u].x * r[1][0] + t[u].y * r[1][1];
                        c < o && (o = c), h < a && (a = h), s < c && (s = c), l < h && (l = h), i.push([ c, h ]);
                    }
                    n = [ (s + o) / 2, (l + a) / 2 ];
                    var f = r[0][0] * r[1][1] - r[1][0] * r[0][1], p = (n = [ (f = [ [ r[1][1] / f, -r[0][1] / f ], [ -r[1][0] / f, r[0][0] / f ] ])[0][0] * n[0] + f[0][1] * n[1], f[1][0] * n[0] + f[1][1] * n[1] ], 
                    n = (e.center.x = n[0], e.center.y = n[1], e.size.x = s - o, e.size.y = l - a, [ [ o, a ], [ o, l ], [ s, l ], [ s, a ] ]), 
                    [ [], [], [], [] ]), d = (f = (p[0] = [ f[0][0] * n[0][0] + f[0][1] * n[0][1], f[1][0] * n[0][0] + f[1][1] * n[0][1] ], 
                    p[1] = [ f[0][0] * n[1][0] + f[0][1] * n[1][1], f[1][0] * n[1][0] + f[1][1] * n[1][1] ], 
                    p[2] = [ f[0][0] * n[2][0] + f[0][1] * n[2][1], f[1][0] * n[2][0] + f[1][1] * n[2][1] ], 
                    p[3] = [ f[0][0] * n[3][0] + f[0][1] * n[3][1], f[1][0] * n[3][0] + f[1][1] * n[3][1] ], 
                    new nd(1, 0, 0)), n = new nd(p[0][0], 0, p[0][1]), (n = new nd(p[3][0], 0, p[3][1]).clone().sub(n).normalize()).angleTo(f) * Ve.Mn()), y = (n = 0 < n.clone().cross(f).y ? d : 360 - d, 
                    d = new nd(p[0][0], 0, p[0][1]), (d = new nd(p[1][0], 0, p[1][1]).clone().sub(d).normalize()).angleTo(f) * Ve.Mn());
                    d = 0 < d.clone().cross(f).y;
                    return e.rotation = {
                        x: n,
                        y: d ? y : 360 - y
                    }, e.corners = [ {
                        x: p[0][0],
                        y: p[0][1]
                    }, {
                        x: p[1][0],
                        y: p[1][1]
                    }, {
                        x: p[2][0],
                        y: p[2][1]
                    }, {
                        x: p[3][0],
                        y: p[3][1]
                    } ], e;
                }
            }
        }, {
            key: "scaleBound",
            value: function(t, e) {
                var n = t.max, r = (t = t.min, n = new Mt(n.x, n.y), t = new Mt(t.x, t.y), n.clone().add(t).multiplyScalar(.5));
                t = (n = n.clone().sub(t)).clone().normalize(), n = n.clone().length() * e, e = r.clone().add(t.clone().multiplyScalar(n / 2)), 
                r = r.clone().add(t.clone().multiplyScalar(-n / 2));
                return {
                    max: {
                        x: t = e.x,
                        y: n = e.y
                    },
                    min: {
                        x: e = r.x,
                        y: r = r.y
                    },
                    size: {
                        x: Math.abs(t - e),
                        y: Math.abs(n - r)
                    },
                    center: {
                        x: (t + e) / 2,
                        y: (n + r) / 2
                    }
                };
            }
        }, {
            key: "rectangleBuilder",
            value: function(t, e, n) {
                var r = [];
                return r.push({
                    x: n.x - t / 2,
                    y: n.y + e / 2
                }), r.push({
                    x: n.x + t / 2,
                    y: n.y + e / 2
                }), r.push({
                    x: n.x + t / 2,
                    y: n.y - e / 2
                }), r.push({
                    x: n.x - t / 2,
                    y: n.y - e / 2
                }), r;
            }
        }, {
            key: "circleBuilder",
            value: function(t, e, n) {
                for (var r = [], i = 0; i <= n; i++) {
                    var o = i / n * Math.PI * 2;
                    r.push({
                        x: e.x + t * Math.cos(o),
                        y: e.y + t * Math.sin(o)
                    });
                }
                return r;
            }
        }, {
            key: "fanBuilder",
            value: function(t, e, n, r) {
                for (var i = [], o = (i.push(e), [ r[0] / 180 * Math.PI, r[1] / 180 * Math.PI ]), a = (o[1] - o[0]) / n, s = 0; s <= n; s++) {
                    var l = o[0] + s * a;
                    i.push({
                        x: e.x + t * Math.sin(l),
                        y: e.y + t * Math.cos(l)
                    });
                }
                return i;
            }
        }, {
            key: "area",
            value: function(t) {
                return Ve.Yn(t, t.length);
            }
        }, {
            key: "TriangleCentroid",
            value: function(t, e, n, r) {
                var i = e.x - t.x, o = e.y - t.y, a = n.x - t.x, s = n.y - t.y;
                return r.area = (i * s - a * o) / 2, r.centroid = {}, r.centroid.x = (t.x + e.x + n.x) / 3, 
                r.centroid.y = (t.y + e.y + n.y) / 3, !0;
            }
        }, {
            key: "calculatorInsideCentroid",
            value: function(t, e) {
                var n = t.length;
                if (n < 3) return !1;
                for (var r = [], i = 1; i < n - 1; i++) {
                    var o = {};
                    this.TriangleCentroid(t[0], t[i], t[i + 1], o), r.push(o);
                }
                var a = [], s = (r.forEach(function(t, e, n) {
                    a.push(t);
                }), !1);
                for (a.sort(function(t, e) {
                    return (0 < t.area ? t.area : -t.area) - (0 < e.area ? e.area : -e.area);
                }); 0 < a.length && !(s = this.calculatorCentroid(t, a, e)); ) a.shift();
                if (!s) {
                    var l = [];
                    for (r.forEach(function(t, e, n) {
                        l.push(t);
                    }); 0 < l.length && !(s = this.calculatorCentroid(t, l, e)); ) l.shift();
                }
                return s;
            }
        }, {
            key: "calculatorCentroid",
            value: function(t, e, n) {
                for (var r = 0, i = {
                    x: 0,
                    y: 0
                }, o = 0; o < e.length; o++) i.x += e[o].centroid.x * e[o].area, i.y += e[o].centroid.y * e[o].area, 
                r += e[o].area;
                return n.x = i.x / r, n.y = i.y / r, this.isContain(t, n);
            }
        }, {
            key: "latlngToMapCoordinate",
            value: function(t) {
                return {
                    x: 20037508.34 * parseFloat(t.x) / 180,
                    y: Math.log(Math.tan((90 + parseFloat(t.y)) * Math.PI / 360)) / (Math.PI / 180) * 20037508.34 / 180
                };
            }
        }, {
            key: "mapCoordinateToLatlng",
            value: function(t) {
                var e = parseFloat(t.y) / 20037508.34 * 180;
                return {
                    x: parseFloat(t.x) / 20037508.34 * 180,
                    y: 180 / Math.PI * (2 * Math.atan(Math.exp(e * Math.PI / 180)) - Math.PI / 2)
                };
            }
        }, {
            key: "maxInnerRect",
            value: function(t, e) {
                if (t && 0 != t.length) {
                    for (var n = new nd(0, 0, 1), r = {
                        center: {
                            x: 0,
                            y: 0
                        },
                        size: {
                            x: 0,
                            y: 0
                        },
                        rotation: {
                            x: 0,
                            y: 0
                        },
                        corners: []
                    }, i = Number.MAX_VALUE, o = Number.MAX_VALUE, a = -Number.MAX_VALUE, s = -Number.MAX_VALUE, l = [], u = 0; u < t.length; u++) {
                        var c = t[u].x, h = t[u].y;
                        c < i && (i = c), h < o && (o = h), a < c && (a = c), s < h && (s = h), l.push({
                            x: c,
                            y: h
                        });
                    }
                    for (var f = (a - i < s - o ? a - i : s - o) / 100, p = Math.ceil((a - i) / f), d = Math.ceil((s - o) / f), y = [], m = 0; m < d - 1; m++) {
                        for (var v = new Array(p - 1).fill(0), g = 0; g < p - 1; g++) {
                            var b = i + f * g, x = i + f * (g + 1), w = o + f * m, S = o + f * (m + 1);
                            Ve.isPolygonInPolygon([ {
                                x: b,
                                y: w
                            }, {
                                x: b,
                                y: S
                            }, {
                                x: x,
                                y: S
                            }, {
                                x: x,
                                y: w
                            } ], l) && (v[g] = 1);
                        }
                        y.push(v);
                    }
                    for (var _ = new Array(p).fill(0), E = 0, O = 0, M = 0, T = 0, L = 0, A = 0; A < d - 1; A++) for (var P = [], R = 0; R < p; R++) {
                        for (_[p - 1] = 0, R < p - 1 && (_[R] = 1 == y[A][R] ? _[R] + 1 : 0); 0 < P.length && _[P[P.length - 1]] >= _[R]; ) {
                            var j = P[P.length - 1], I = (P.pop(), _[j] * (0 == P.length ? R : R - P[P.length - 1] - 1));
                            E < I && (E = I, O = 0 == P.length ? 0 : P[P.length - 1] + 1, M = R, L = (T = A) - _[j] + 1);
                        }
                        P.push(R);
                    }
                    for (var D = [ [ G = i + O * f, H = o + L * f ], [ G, U = o + (T + 1) * f ], [ z = i + (M + 1) * f, U ], [ z, H ] ], k = 0, C = 2, N = Number.MAX_VALUE, F = -Number.MAX_VALUE, B = 0; B < D.length; B++) D[B][0] * D[B][0] + D[B][1] * D[B][1] < N && (N = D[k = B][0] * D[B][0] + D[B][1] * D[B][1]), 
                    D[B][0] * D[B][0] + D[B][1] * D[B][1] > F && (F = D[C = B][0] * D[B][0] + D[B][1] * D[B][1]);
                    r.corners = [ {
                        x: D[0][0],
                        y: D[0][1]
                    }, {
                        x: D[1][0],
                        y: D[1][1]
                    }, {
                        x: D[2][0],
                        y: D[2][1]
                    }, {
                        x: D[3][0],
                        y: D[3][1]
                    } ], r.center.x = (D[C][0] + D[k][0]) / 2, r.center.y = (D[C][1] + D[k][1]) / 2;
                    var U, z, G = new nd(D[k][0], 0, D[k][1]), H = ((z = (U = new nd(D[(k + C) / 2][0], 0, D[(k + C) / 2][1])).clone().sub(G).normalize()).angleTo(n), 
                    Ve.Mn(), z.clone().cross(n).y, new nd(D[(k + C) / 2][0], 0, D[(k + C) / 2][1])), V = new nd(D[C][0], 0, D[C][1]), W = V.clone().sub(H).normalize();
                    return W.angleTo(n), Ve.Mn(), W.clone().cross(n).y, z.clone().cross(W).y < 0 ? (r.size.x = U.clone().sub(G).length(), 
                    r.size.y = V.clone().sub(H).length()) : (r.size.x = V.clone().sub(H).length(), r.size.y = U.clone().sub(G).length()), 
                    new od({
                        center: r.center,
                        size: r.size,
                        points: r.corners
                    });
                }
            }
        } ], null && sd(e.prototype, null), n && sd(e, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }();
    function ud(t, e) {
        var n, r = void 0 !== (e = e || {}).duration ? e.duration : 1, i = void 0 !== e.size ? e.size : 8, o = e.times || void 0, a = void 0 !== e.delay ? e.delay : 0, s = 1, l = t.Zi(vx);
        if (l) return t.Ie.has("boost") ? ((n = t.Ie.get("boost")).stop(), l.Oi.Ai(n)) : (n = new ne({
            src: [ t.Ro ],
            dest: [ i ]
        }), t.Ie.set("boost", n)), n.rn(r).$t().an(function(e) {
            t.xi && l.It.Ao(t.xi, e.destination[0]), l.enableUpdateRender();
        }).un(function() {
            var t;
            o < s || (t = 0 < s % 1 ? 0 : a, n.dn().sn(t).$t(), l.enableUpdateRender(), s += .5);
        }), l.Oi.Si(n), n;
    }
    function cd(t) {
        var e = t.Zi(vx), n = t.Ie.get("boost");
        n && e && (e.Oi.Ai(n), t.Ie.delete("boost"), t.xi && e.It.Ao(t.xi, t.Ro), e.enableUpdateRender());
    }
    function hd(t, e) {
        var n, r, i, o, a, s = t.Zi(vx);
        if (s) return n = void 0 !== e.duration ? e.duration : 1, r = void 0 !== e.times ? e.times : 1 / 0, 
        i = void 0 !== e.delay ? e.delay : 0, 0 === r && (r = 1 / 0), o = 0, t.Ie.has("jump") ? ((a = t.Ie.get("jump")).nn([ t.nt ]), 
        a.en([ t.nt + e.height ])) : (a = new ne({
            src: [ t.nt ],
            dest: [ t.nt + e.height ]
        }), t.Ie.set("jump", a), s.Oi.Si(a)), a.rn(n).sn(0).an(function(e) {
            t.xi && (t.xi.position.y = e.destination[0]), s.enableUpdateRender();
        }).un(function() {
            var t;
            (o += .5) < r && (t = o % 1 == 0 ? 0 : i, a.dn().sn(t), a.$t());
        }), a.$t(), a;
    }
    function fd(t) {
        var e, n;
        t.xi && (e = t.Zi(vx)) && ((n = t.Ie.get("jump")) && (e.Oi.Ai(n), t.Ie.delete("jump")), 
        t.xi.position.y = t.nt, e.enableUpdateRender());
    }
    function pd(t, e) {
        var n;
        e.xi && (t = t.Wf(e.size || e.Ro), n = 1, e.xi.material.userData.scaleRatio && (n = e.xi.material.userData.scaleRatio), 
        e.xi.scale.set(t, t / n, t));
    }
    function dd(t) {
        return !0 === t.needUpdateBound && (t.xe.reset(), t.Nt.forEach(function(e) {
            t.xe.expand(e.bound);
        }), t.needUpdateBound = !1), t.xe.clone();
    }
    function yd(t) {
        return (yd = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function md(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, bd(r.key), r);
        }
    }
    function vd(t, e, n) {
        e = Sd(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], Sd(t).constructor) : e.apply(t, n)) && ("object" === yd(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function gd(t, e, n, r) {
        return (gd = "undefined" != typeof Reflect && Reflect.set ? Reflect.set : function(t, e, n, r) {
            var i;
            if (t = wd(t, e)) {
                if ((i = Object.getOwnPropertyDescriptor(t, e)).set) return i.set.call(r, n), !0;
                if (!i.writable) return !1;
            }
            if (i = Object.getOwnPropertyDescriptor(r, e)) {
                if (!i.writable) return !1;
                i.value = n, Object.defineProperty(r, e, i);
            } else t = r, i = n, (r = bd(r = e)) in t ? Object.defineProperty(t, r, {
                value: i,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : t[r] = i;
            return !0;
        })(t, e, n, r);
    }
    function bd(t) {
        return t = function(t, e) {
            if ("object" != yd(t) || !t) return t;
            var n = t[Symbol.toPrimitive];
            if (void 0 === n) return String(t);
            if ("object" != yd(n = n.call(t, e))) return n;
            throw new TypeError("@@toPrimitive must return a primitive value.");
        }(t, "string"), "symbol" == yd(t) ? t : String(t);
    }
    function xd() {
        return (xd = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function(t, e, n) {
            var r = wd(t, e);
            if (r) return (r = Object.getOwnPropertyDescriptor(r, e)).get ? r.get.call(arguments.length < 3 ? t : n) : r.value;
        }).apply(this, arguments);
    }
    function wd(t, e) {
        for (;!Object.prototype.hasOwnProperty.call(t, e) && null !== (t = Sd(t)); ) ;
        return t;
    }
    function Sd(t) {
        return (Sd = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function _d(t, e) {
        return (_d = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    var Ed = function() {
        var t = n, e = Cn;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n() {
            var t;
            if (this instanceof n) return (t = vd(this, n)).xo = new Jn(), t;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && _d(t, e), t = n, (e = [ {
            key: "scene",
            get: function() {
                return this.xo;
            }
        }, {
            key: "bound",
            get: function() {
                return dd(this);
            }
        }, {
            key: "isLayer",
            get: function() {
                return !0;
            }
        }, {
            key: "visible",
            get: function() {
                return xd(Sd(n.prototype), "visible", this);
            },
            set: function(t) {
                var e = Sd(n.prototype);
                if (!gd(e, "visible", t, this || e)) throw new TypeError("failed to set property");
                t ? this.xo.parent || this.parent.effectScene.add(this.xo) : this.xo.parent && this.parent.effectScene.remove(this.xo);
            }
        }, {
            key: "init",
            value: function() {
                this.xo.position.y = this.parent.nt;
            }
        } ]) && md(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }();
    function Od(t) {
        return (Od = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Md(t, e) {
        var n, r, i, o, a = "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"];
        if (a) return r = !(n = !0), {
            s: function() {
                a = a.call(t);
            },
            n: function() {
                var t = a.next();
                return n = t.done, t;
            },
            e: function(t) {
                r = !0, i = t;
            },
            f: function() {
                try {
                    n || null == a.return || a.return();
                } finally {
                    if (r) throw i;
                }
            }
        };
        if (Array.isArray(t) || (a = function(t, e) {
            var n;
            if (t) return "string" == typeof t ? Td(t, e) : "Map" === (n = "Object" === (n = Object.prototype.toString.call(t).slice(8, -1)) && t.constructor ? t.constructor.name : n) || "Set" === n ? Array.from(t) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? Td(t, e) : void 0;
        }(t)) || e && t && "number" == typeof t.length) return a && (t = a), o = 0, {
            s: e = function() {},
            n: function() {
                return o >= t.length ? {
                    done: !0
                } : {
                    done: !1,
                    value: t[o++]
                };
            },
            e: function(t) {
                throw t;
            },
            f: e
        };
        throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }
    function Td(t, e) {
        (null == e || e > t.length) && (e = t.length);
        for (var n = 0, r = new Array(e); n < e; n++) r[n] = t[n];
        return r;
    }
    function Ld(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Od(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Od(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Od(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function Ad(t, e, n) {
        e = Pd(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], Pd(t).constructor) : e.apply(t, n)) && ("object" === Od(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function Pd(t) {
        return (Pd = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function Rd(t, e) {
        return (Rd = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    ih = function() {
        var t = n, e = Ed;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t) {
            var e;
            if (this instanceof n) return (e = Ad(this, n)).Yf = [], void 0 !== t && void 0 !== t.type && (e.Re = t.type), 
            e;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && Rd(t, e), t = n, (e = [ {
            key: "getMarkers",
            value: function() {
                return this.Nt;
            }
        }, {
            key: "add",
            value: function(t) {
                t.Bt = this, t.Xf || t.lc() ? this.k(t) : this.Yf.push(t), this.needUpdateBound = !0;
            }
        }, {
            key: "remove",
            value: function(t) {
                var e;
                this.Zf(t), t.dispose(), -1 < (e = (-1 < (e = this.Nt.indexOf(t)) && this.Nt.splice(e, 1), 
                this.Yf.indexOf(t))) && this.Yf.splice(e, 1), this.needUpdateBound = !0;
            }
        }, {
            key: "clear",
            value: function() {
                var t, e = Md(this.Nt);
                try {
                    for (e.s(); !(t = e.n()).done; ) {
                        var n = t.value;
                        this.Zf(n), n.dispose();
                    }
                } catch (t) {
                    e.e(t);
                } finally {
                    e.f();
                }
                this.Nt.length = 0;
            }
        }, {
            key: "traverse",
            value: function(t) {
                var e, n = Md(this.Nt);
                try {
                    for (n.s(); !(e = n.n()).done; ) {
                        var r = e.value;
                        t && t(r);
                    }
                } catch (t) {
                    n.e(t);
                } finally {
                    n.f();
                }
            }
        }, {
            key: "dispose",
            value: function() {
                var t, e = Md(this.Nt);
                try {
                    for (e.s(); !(t = e.n()).done; ) {
                        var n = t.value;
                        this.Zf(n), n.dispose();
                    }
                } catch (t) {
                    e.e(t);
                } finally {
                    e.f();
                }
                this.Nt.length = 0, this.xo = void 0;
            }
        } ]) && Ld(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }();
    var jd = (Object.assign(ih.prototype, {
        qf: function() {
            var t, e = Md(this.Yf);
            try {
                for (e.s(); !(t = e.n()).done; ) {
                    var n, r = t.value;
                    r.lc() && (-1 < (n = this.Yf.indexOf(r)) && this.Yf.splice(n, 1), this.k(r));
                }
            } catch (t) {
                e.e(t);
            } finally {
                e.f();
            }
        },
        k: function(t) {
            this.Nt.push(t), t.xi && this.xo.add(t.xi);
        },
        Zf: function(t) {
            t.Bt = void 0, this.xo.remove(t.xi);
        }
    }), ih);
    function Id(t) {
        return (Id = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Dd(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Id(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Id(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Id(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function kd(t, e, n) {
        e = Cd(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], Cd(t).constructor) : e.apply(t, n)) && ("object" === Id(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function Cd(t) {
        return (Cd = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function Nd(t, e) {
        return (Nd = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    function Fd(t) {
        return (Fd = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Bd(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Fd(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Fd(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Fd(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function Ud(t, e, n) {
        e = zd(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], zd(t).constructor) : e.apply(t, n)) && ("object" === Fd(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function zd(t) {
        return (zd = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function Gd(t, e) {
        return (Gd = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    function Hd(t) {
        return (Hd = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Vd(t, e, n) {
        e = Wd(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], Wd(t).constructor) : e.apply(t, n)) && ("object" === Hd(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function Wd(t) {
        return (Wd = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function Yd(t, e) {
        return (Yd = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    function Xd(t) {
        return (Xd = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Zd(t, e, n) {
        e = qd(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], qd(t).constructor) : e.apply(t, n)) && ("object" === Xd(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function qd(t) {
        return (qd = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function Kd(t, e) {
        return (Kd = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    function Jd(t) {
        return (Jd = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Qd(t, e) {
        (null == e || e > t.length) && (e = t.length);
        for (var n = 0, r = new Array(e); n < e; n++) r[n] = t[n];
        return r;
    }
    function $d(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Jd(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Jd(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Jd(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function ty(t, e, n) {
        e = ry(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], ry(t).constructor) : e.apply(t, n)) && ("object" === Jd(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        return ey(r);
    }
    function ey(t) {
        if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return t;
    }
    function ny() {
        return (ny = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function(t, e, n) {
            var r = function(t, e) {
                for (;!Object.prototype.hasOwnProperty.call(t, e) && null !== (t = ry(t)); ) ;
                return t;
            }(t, e);
            if (r) return (r = Object.getOwnPropertyDescriptor(r, e)).get ? r.get.call(arguments.length < 3 ? t : n) : r.value;
        }).apply(this, arguments);
    }
    function ry(t) {
        return (ry = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function iy(t, e) {
        return (iy = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    It = function() {
        var t = n, e = jd;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n() {
            var t;
            if (this instanceof n) return (t = kd(this, n)).Re = Ct.IMAGE_MARKER, t.Ho = !0, 
            t;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && Nd(t, e), t = n, (e = [ {
            key: "collision",
            get: function() {
                return this.Ho;
            }
        } ]) && Dd(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }(), oh = function() {
        var t = n, e = jd;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n() {
            var t;
            if (this instanceof n) return (t = Ud(this, n)).Re = Ct.TEXT_MARKER, t.isHasText = !0, 
            t.Ho = !0, t;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && Gd(t, e), t = n, (e = [ {
            key: "collision",
            get: function() {
                return this.Ho;
            }
        } ]) && Bd(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }(), rh = function() {
        var t = n, e = jd;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n() {
            var t;
            if (this instanceof n) return (t = Vd(this, n)).Re = Ct.POLYGON_MARKER, t;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && Yd(t, e), t = n, Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }(), ih = function() {
        var t = n, e = jd;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n() {
            var t;
            if (this instanceof n) return (t = Zd(this, n)).Re = Ct.EXTRUDE_MARKER, t;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && Kd(t, e), t = n, Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }();
    var oy = function() {
        var t = n, e = jd;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n() {
            var t;
            if (this instanceof n) return (t = ty(this, n)).Re = Ct.HEAT_MAP_MARKER, t.Jf = !1, 
            t.Kf = t.Kf.bind(ey(t)), t;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && iy(t, e), t = n, (e = [ {
            key: "add",
            value: function(t) {
                ny(ry(n.prototype), "add", this).call(this, t), t.Xf && !t.Qf && this.$f(t.th), 
                0 < this.Yf.length && this.Zi(vx).on("update", this.Kf);
            }
        }, {
            key: "remove",
            value: function(t) {
                ny(ry(n.prototype), "remove", this).call(this, t), this.Jf && this.$f(null);
            }
        } ]) && $d(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }();
    function ay(t, e) {
        Pc.call(this, t, e), this.type = "AmbientLight", this.castShadow = void 0;
    }
    function sy(t) {
        return (sy = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function ly(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != sy(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != sy(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == sy(t) ? t : String(t);
            }(r.key), r);
        }
    }
    Object.assign(oy.prototype, {
        qf: function() {
            var t, e = function(t, e) {
                var n, r, i, o, a = "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"];
                if (a) return r = !(n = !0), {
                    s: function() {
                        a = a.call(t);
                    },
                    n: function() {
                        var t = a.next();
                        return n = t.done, t;
                    },
                    e: function(t) {
                        r = !0, i = t;
                    },
                    f: function() {
                        try {
                            n || null == a.return || a.return();
                        } finally {
                            if (r) throw i;
                        }
                    }
                };
                if (Array.isArray(t) || (a = function(t, e) {
                    var n;
                    if (t) return "string" == typeof t ? Qd(t, e) : "Map" === (n = "Object" === (n = Object.prototype.toString.call(t).slice(8, -1)) && t.constructor ? t.constructor.name : n) || "Set" === n ? Array.from(t) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? Qd(t, e) : void 0;
                }(t)) || e && t && "number" == typeof t.length) return a && (t = a), o = 0, {
                    s: e = function() {},
                    n: function() {
                        return o >= t.length ? {
                            done: !0
                        } : {
                            done: !1,
                            value: t[o++]
                        };
                    },
                    e: function(t) {
                        throw t;
                    },
                    f: e
                };
                throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
            }(this.Yf);
            try {
                for (e.s(); !(t = e.n()).done; ) {
                    var n, r = t.value;
                    r.lc() && (-1 < (n = this.Yf.indexOf(r)) && this.Yf.splice(n, 1), this.k(r), r.Qf || this.$f(r.th), 
                    r.needUpdateBound = !0);
                }
            } catch (t) {
                e.e(t);
            } finally {
                e.f();
            }
        },
        $f: function(t) {
            var e = this.Zi(Db), n = e.getExtendMesh(), r = n.material.map;
            (n.material.map = t) ? (n.material.mapMixColor = !0, n.material.map.needsUpdate = !0) : n.material.mapMixColor = !1, 
            n.material.needsUpdate = !0, e.getModelMeshs().forEach(function(e) {
                if (e) if ("MultiMaterial" === e.material.type) for (var n = e.material.materials.length, r = 0; r < n; ) (e.material.materials[r].map = t) ? (e.material.materials[r].map.needsUpdate = !0, 
                e.material.materials[r].mapMixColor = !0) : (e.material.materials[r].mapMixColor = !1, 
                e.material.materials[r].transparent = !0), e.material.materials[r].needsUpdate = !0, 
                r += 0 === r ? 3 : 2; else (e.material.map = t) ? (e.material.mapMixColor = !0, 
                e.material.map.needsUpdate = !0, 1 === e.material.opacity && (e.material.transparent = !1)) : (e.material.mapMixColor = !1, 
                e.material.transparent = !0), e.material.needsUpdate = !0;
            }), r && (r.dispose(), r = null), this.Jf = !0;
        },
        Kf: function() {
            this.qf(), 0 === this.Yf.length && this.Zi(vx).off("update", this.Kf);
        }
    }), ay.prototype = Object.assign(Object.create(Pc.prototype), {
        constructor: ay,
        isAmbientLight: !0
    });
    var uy = function() {
        function t(e) {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
            this.jt = e, this.nh = null, this.eh = null, this.ih = null, this.rh = null, this.createLight = this.createLight.bind(this);
        }
        var e, n;
        return e = t, (n = [ {
            key: "createLight",
            value: function(t, e) {
                var n = (r = this.jt.getMapOptions()).lockedLight, r = r.lightConfig[e];
                return t.oh = new ay(r[1].color, r[1].intensity), t.sh = new B(), t.ah = new Ic(r[0].color, r[0].intensity), 
                t.ah.position.set(r[0].position.x, r[0].position.y, r[0].position.z), t.ah.target = t.sh, 
                t.uh = new Ic(r[2].color, r[2].intensity), t.uh.position.set(r[2].position.x, r[2].position.y, r[2].position.z), 
                t.uh.target = t.sh, this.nh = t, this.eh = e, n && (this.fh = this.fh.bind(this), 
                this.jt.on("viewChanged", this.fh)), this;
            }
        }, {
            key: "createLightByTheme",
            value: function(t, e, n) {
                return t.oh = new ay(new Xt("rgb(" + n[1].color + ")"), n[1].intensity), t.ah = new Ic(new Xt("rgb(" + n[0].color + ")"), n[0].intensity), 
                t.ah.position.set(n[0].position.x, n[0].position.y, n[0].position.z), t.sh = new B(), 
                t.sh.position.set(n[0].target.x, n[0].target.y, n[0].target.z), t.ah.target = t.sh, 
                t.uh = new Ic(new Xt("rgb(" + n[2].color + ")"), n[2].intensity), t.uh.position.set(n[2].position.x, n[2].position.y, n[2].position.z), 
                t.hh = new B(), t.hh.position.set(n[2].target.x, n[2].target.y, n[2].target.z), 
                t.uh.target = t.hh, this.nh = t, this.eh = e, this;
            }
        } ]) && ly(e.prototype, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }();
    function cy(t, e, n) {
        n.xi = new mi(t, e), (n.xi.mapNode = n).xi.rotation.set(-Math.PI / 2, 0, 0, "XYZ");
    }
    function hy(t) {
        var e = t.Zi(vx);
        e.ze.hdr && e.ze.hdr.load(e, function(n) {
            t.xo.environment = n, e.enableUpdateRender();
        });
    }
    function fy(t) {
        return (fy = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function py(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != fy(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != fy(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == fy(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function dy(t, e, n) {
        e = my(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], my(t).constructor) : e.apply(t, n)) && ("object" === fy(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function yy() {
        return (yy = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function(t, e, n) {
            var r = function(t, e) {
                for (;!Object.prototype.hasOwnProperty.call(t, e) && null !== (t = my(t)); ) ;
                return t;
            }(t, e);
            if (r) return (r = Object.getOwnPropertyDescriptor(r, e)).get ? r.get.call(arguments.length < 3 ? t : n) : r.value;
        }).apply(this, arguments);
    }
    function my(t) {
        return (my = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function vy(t, e) {
        return (vy = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    Object.assign(uy.prototype, {
        lh: function(t) {
            var e = new Ot();
            return e.setFromVector3(t), e.theta;
        },
        dh: function(t, e) {
            var n = new Ot();
            (e = (n.setFromVector3(t), n.theta = e, new h())).setFromSpherical(n), t.copy(e);
        },
        fh: function() {
            var t, e, n;
            this.nh && (t = this.lh(this.jt.camera.position), null === this.ih && (e = this.lh(this.nh.ah.position), 
            n = this.lh(this.nh.uh.position), this.ih = e - t, this.rh = n - t), e = t + this.ih, 
            this.dh(this.nh.ah.position, e), n = t + this.rh, this.dh(this.nh.uh.position, n));
        },
        tn: function() {
            this.jt.getMapOptions().lockedLight && this.jt.off("viewChanged", this.fh);
        }
    });
    var gy = function() {
        var t = n, e = jd;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n() {
            var t;
            if (this instanceof n) return (t = dy(this, n)).scene.name = "dynamicModel", t.Re = Ct.DYNAMIC_MODEL_MARKER, 
            t;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && vy(t, e), t = n, (e = [ {
            key: "init",
            value: function() {
                yy(my(n.prototype), "init", this).call(this), this.ph(), this.mh(), hy(this);
            }
        }, {
            key: "remove",
            value: function(t) {
                var e, r = this;
                t.yh ? t.bh({
                    src: [ 1 ],
                    dest: [ 0 ],
                    duration: 1,
                    callback: function() {
                        var e = null == (e = t.xi) ? void 0 : e.parent;
                        e && e.remove(t.xi), yy(my(n.prototype), "remove", r).call(r, t);
                    }
                }) : ((e = null == (e = t.xi) ? void 0 : e.parent) && e.remove(t.xi), yy(my(n.prototype), "remove", this).call(this, t));
            }
        } ]) && py(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }();
    function by(t) {
        return (by = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function xy(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != by(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != by(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == by(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function wy(t, e, n) {
        e = _y(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], _y(t).constructor) : e.apply(t, n)) && ("object" === by(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function Sy() {
        return (Sy = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function(t, e, n) {
            var r = function(t, e) {
                for (;!Object.prototype.hasOwnProperty.call(t, e) && null !== (t = _y(t)); ) ;
                return t;
            }(t, e);
            if (r) return (r = Object.getOwnPropertyDescriptor(r, e)).get ? r.get.call(arguments.length < 3 ? t : n) : r.value;
        }).apply(this, arguments);
    }
    function _y(t) {
        return (_y = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function Ey(t, e) {
        return (Ey = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    Object.assign(gy.prototype, {
        ph: function() {
            var t = this.Zi(vx);
            this.gh = new uy(t).createLight(this, "FMDynamicModelLayer");
        },
        mh: function() {
            var t = this;
            this.xo.add(this.ah), this.xo.add(this.oh), this.xo.add(this.uh), this.xo.add(this.sh), 
            this.xo.removeLight = function() {
                t.wh();
            };
        },
        wh: function() {
            this.xo.remove(this.ah), this.xo.remove(this.oh), this.xo.remove(this.uh), this.gh.tn();
        }
    });
    var Oy = function() {
        var t = n, e = jd;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n() {
            var t;
            if (this instanceof n) return (t = wy(this, n)).Re = Ct.LINE_MARKER, t;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && Ey(t, e), t = n, (e = [ {
            key: "init",
            value: function() {
                Sy(_y(n.prototype), "init", this).call(this), this.xo.position.y = 0;
            }
        } ]) && xy(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }();
    function My(t) {
        return (My = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Ty(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != My(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != My(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == My(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function Ly(t, e, n) {
        e = Py(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], Py(t).constructor) : e.apply(t, n)) && ("object" === My(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function Ay() {
        return (Ay = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function(t, e, n) {
            var r = function(t, e) {
                for (;!Object.prototype.hasOwnProperty.call(t, e) && null !== (t = Py(t)); ) ;
                return t;
            }(t, e);
            if (r) return (r = Object.getOwnPropertyDescriptor(r, e)).get ? r.get.call(arguments.length < 3 ? t : n) : r.value;
        }).apply(this, arguments);
    }
    function Py(t) {
        return (Py = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function Ry(t, e) {
        return (Ry = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    var jy = function() {
        var t = n, e = jd;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n() {
            var t;
            if (this instanceof n) return (t = Ly(this, n)).Re = Ct.LOCATION_MARKER, t;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && Ry(t, e), t = n, (e = [ {
            key: "init",
            value: function() {
                Ay(Py(n.prototype), "init", this).call(this), this.xo.position.y = 0;
            }
        } ]) && Ty(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }();
    function Iy(t) {
        return (Iy = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Dy(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Iy(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Iy(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Iy(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function ky(t, e, n) {
        e = Cy(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], Cy(t).constructor) : e.apply(t, n)) && ("object" === Iy(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function Cy(t) {
        return (Cy = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function Ny(t, e) {
        return (Ny = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    var Fy = function() {
        var t = n, e = jd;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n() {
            var t;
            if (this instanceof n) return (t = ky(this, n)).Re = Ct.DOM_MARKER, t;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && Ny(t, e), t = n, (e = [ {
            key: "init",
            value: function() {}
        }, {
            key: "add",
            value: function(t) {
                this.Nt.push(t), this.needUpdateBound = !0;
            }
        }, {
            key: "remove",
            value: function(t) {
                -1 < (t = this.Nt.indexOf(t)) && this.Nt.splice(t, 1), this.needUpdateBound = !0;
            }
        }, {
            key: "clear",
            value: function() {
                for (;0 < this.Nt.length; ) this.Nt[0].dispose();
                this.Nt.length = 0, this.needUpdateBound = !0;
            }
        }, {
            key: "dispose",
            value: function() {
                this.Nt.length = 0, this.xo = void 0;
            }
        }, {
            key: "visible",
            get: function() {
                return this.Yi;
            },
            set: function(t) {
                for (var e = 0; e < this.Nt.length; e++) this.Nt[e].visible = t;
            }
        } ]) && Dy(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }();
    function By(t) {
        return (By = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Uy(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != By(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != By(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == By(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function zy(t, e, n) {
        e = Hy(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], Hy(t).constructor) : e.apply(t, n)) && ("object" === By(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function Gy() {
        return (Gy = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function(t, e, n) {
            var r = function(t, e) {
                for (;!Object.prototype.hasOwnProperty.call(t, e) && null !== (t = Hy(t)); ) ;
                return t;
            }(t, e);
            if (r) return (r = Object.getOwnPropertyDescriptor(r, e)).get ? r.get.call(arguments.length < 3 ? t : n) : r.value;
        }).apply(this, arguments);
    }
    function Hy(t) {
        return (Hy = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function Vy(t, e) {
        return (Vy = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    var Wy = function() {
        var t = n, e = Cn;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t) {
            if (this instanceof n) return (t = zy(this, n, [ t ]))._h = void 0, t.jr = !1, t.Sh = null, 
            t.kr = 0, t.Rr = void 0, t.Cr = void 0, t.Nr = null, t.Pr = null, t;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && Vy(t, e), t = n, (e = [ {
            key: "isbloom",
            get: function() {
                return this._h;
            },
            set: function(t) {
                this._h = t;
            }
        }, {
            key: "ID",
            get: function() {
                return this.B.Ae;
            }
        }, {
            key: "level",
            get: function() {
                return this.Bt.Bt.rr;
            }
        }, {
            key: "x",
            get: function() {
                return this.bound.center.x;
            }
        }, {
            key: "y",
            get: function() {
                return this.bound.center.y;
            }
        }, {
            key: "height",
            get: function() {
                return this.B.height;
            }
        }, {
            key: "bound",
            get: function() {
                return !0 === this.Xi && (this.B.xe = null, this.xe = this.B.getBound(), this.Xi = !1), 
                this.xe.clone();
            }
        }, {
            key: "boundNoClone",
            get: function() {
                return 1 == this.Xi && (this.B.xe = null, this.xe = this.B.getBound(), this.Xi = !1), 
                this.xe;
            }
        }, {
            key: "zoomRange",
            get: function() {
                return {
                    maxLevel: this.B.maxlevel,
                    minLevel: this.B.minlevel
                };
            }
        }, {
            key: "visible",
            get: function() {
                return this.Yi;
            },
            set: function(t) {
                this.Yi = t, this.xf();
            }
        }, {
            key: "getData",
            value: function() {
                var t = this.B;
                return {
                    ID: t.Ae,
                    typeID: t.type,
                    FID: t.fid,
                    height: t.height,
                    name: t.name,
                    eName: t.ename,
                    minLevel: t.minlevel,
                    maxLevel: t.maxlevel
                };
            }
        }, {
            key: "getBound",
            value: function() {
                var t = this.bound;
                return {
                    maxY: t.max.y,
                    maxX: t.max.x,
                    minX: t.min.x,
                    minY: t.min.y
                };
            }
        }, {
            key: "getRenderNode",
            value: function() {
                return this.xi;
            }
        }, {
            key: "dispose",
            value: function() {
                this.xh(), this.jt = null, Gy(Hy(n.prototype), "dispose", this).call(this);
            }
        } ]) && Uy(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }(), Yy = (Object.assign(Wy.prototype, {
        xf: function() {
            var t, e, n;
            this.Re === Ct.LABEL || this.Re === Ct.FACILITY ? (n = (e = this).Zi(vx)) && (e.xi && n.ui.Xo(), 
            n.enableUpdateNode(), n.enableUpdateRender()) : (n = (e = this).Zi(vx)) && (e.xi && (t = n.getZoom(), 
            n.ui.Eh(e, t)), n.enableUpdateNode(), n.enableUpdateRender());
        },
        xh: function() {
            var t;
            (t = this).xi && (t.xi.parent && t.xi.parent.remove(t.xi), t.xi instanceof ga ? t.xi.children.forEach(function(t) {
                t.geometry && t.geometry.dispose(), t.geometry = void 0, t.material = void 0, t.mapNode = void 0;
            }) : (t.xi.geometry.dispose(), t.xi.geometry = void 0, t.xi.material = void 0, t.xi.mapNode = void 0), 
            t.xi = void 0);
        }
    }), Wy);
    function Xy(t) {
        return (Xy = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Zy(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Xy(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Xy(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Xy(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function qy(t, e, n) {
        e = Ky(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], Ky(t).constructor) : e.apply(t, n)) && ("object" === Xy(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function Ky(t) {
        return (Ky = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function Jy(t, e) {
        return (Jy = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    Wy = function() {
        var t = n, e = Yy;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t) {
            var e;
            if (this instanceof n) return (e = qy(this, n)).B = t, e.nt = t.height, e.Re = Ct.EXTENT, 
            e.Mh = null, e.Oh = null, e.xi = null, e;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && Jy(t, e), t = n, (e = [ {
            key: "zoomRange",
            get: function() {}
        }, {
            key: "getData",
            value: function() {
                var t = this.B;
                return {
                    ID: t.Ae,
                    height: t.height,
                    area: t.area
                };
            }
        }, {
            key: "getArea",
            value: function() {
                return ld.area(this.B.Ce[0]);
            }
        }, {
            key: "coordinates",
            get: function() {
                return this.B.Ce;
            }
        } ]) && Zy(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }();
    var Qy = (Object.assign(Wy.prototype, {
        lc: function() {
            var t, e, n, r;
            this.xi || (t = this.Zi(vx)) && (r = this.Zi(Gn), e = t.ui.af(this.B, this.nt, r), 
            this.Mh = t.ui.Th.Mc(r.Ae), n = this.Tr(t, r.Ae), r !== t.Dt && (n.polygonOffset = !0, 
            n.polygonOffsetFactor = -1, n.polygonOffsetUnits = -1), r === t.Dt && 1 !== t.children.length && 1 === t.Dt.Nt.length && (n.stencilWrite = !0, 
            n.stencilRef = 1, n.stencilFunc = 516, n.stencilFail = Et, n.stencilZFail = Et, 
            n.stencilZPass = Et), r = this.B.getBound(), this.xi = new mi(e.geometry, n), this.xi.rotation.set(-Math.PI / 2, 0, 0, "XYZ"), 
            this.xi.position.set(r.center.x - t._t, -this.nt, t.St - r.center.y), this.xi.receiveShadow = !0, 
            this.xi.visible = this.Yi, (this.xi.mapNode = this).Bt.xo.add(this.xi));
        },
        jh: function(t, e) {
            var n;
            this.xi && (n = this.Zi(Gn), this.Mh = e.Mc(n.Ae), this.Lh());
        },
        kh: function(t) {
            t !== this.Oh && (this.Oh = t, this.Lh());
        },
        Lh: function() {
            var t, e;
            this.xi && (t = this.Zi(vx)) && (e = this.Zi(Gn), this.xi.material = this.Tr(t, e.Ae), 
            t.enableUpdateRender());
        },
        Tr: function(t, e) {
            var n = this.Zi(Db);
            n = {
                color: this.Mh.color,
                alpha: this.Mh.alpha * n.ht,
                buildingID: e
            };
            return (e = (this.Oh && (n.url = this.Oh, n.finish = function() {
                t.enableUpdateRender();
            }), t.ui.Fr.Au(n))).polygonOffset = !0, e.polygonOffsetFactor = 1, e.polygonOffsetUnits = 4, 
            e.userData.opacity = e.opacity, this.jr ? ((n = e.clone()).userData.opacity = n.opacity, 
            n.uniforms.isMask.value = !0, n.uniforms.maskType.value = this.kr, n.uniforms.maskTexture.value = this.Sh, 
            void 0 !== this.Rr && void 0 !== this.Cr && (n.uniforms.maskHeight.value = this.Rr, 
            n.uniforms.maskExtrudeHeight.value = this.Cr), n.uniformsNeedUpdate = !0, n) : e;
        },
        xf: function() {
            var t = this.Zi(vx);
            t && (this.xi && (this.xi.visible = this.Yi), t.enableUpdateNode(), t.enableUpdateRender());
        },
        updateMaterialByThemeTool: function(t) {
            this.Mh = t, this.Lh();
        }
    }), Wy), $y = new nt();
    function tm(t, e) {
        this.object = t, void 0 === e && (e = 16776960);
        t = new Uint16Array([ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ]);
        var n = new Float32Array(24), r = new Mr();
        r.setIndex(new sr(t, 1)), r.setAttribute("position", new sr(n, 3)), Xc.call(this, r, new Nl({
            color: e,
            toneMapped: !1
        })), this.matrixAutoUpdate = !1, this.update();
    }
    function em(t, e, n) {
        this.Ah = t, this.Rh = e, this.Ch = n || null;
        for (var r = e.tracks, i = r.length, o = new Array(i), a = {
            endingStart: St,
            endingEnd: St
        }, s = 0; s !== i; ++s) {
            var l = r[s].createInterpolant(null);
            (o[s] = l).settings = a;
        }
        this.Nh = a, this.Ph = o, this.Dh = new Array(i), this.Ih = null, this.Fh = null, 
        this.Gh = null, this.Uh = null, this.loop = 2201, this.Bh = -1, this.Hh = null, 
        this.time = 0, this.timeScale = 1, this.zh = 1, this.weight = 1, this.Vh = 1, this.repetitions = 1 / 0, 
        this.paused = !1, this.enabled = !0, this.clampWhenFinished = !1, this.zeroSlopeAtStart = !0, 
        this.zeroSlopeAtEnd = !0;
    }
    function nm(t, e, n) {
        this.binding = t, this.valueSize = n;
        var r, i = Float64Array;
        switch (e) {
          case "quaternion":
            r = this.Wh;
            break;

          case "string":
          case "bool":
            i = Array, r = this.Yh;
            break;

          default:
            r = this.Xh;
        }
        this.buffer = new i(4 * n), this.Zh = r, this.cumulativeWeight = 0, this.useCount = 0, 
        this.referenceCount = 0;
    }
    function rm(t) {
        this.ns = t, this.qh(), this.Jh = 0, this.time = 0, this.timeScale = 1;
    }
    ((tm.prototype = Object.create(Xc.prototype)).constructor = tm).prototype.update = function(t) {
        var e, n, r;
        void 0 !== t && console.warn("THREE.BoxHelper: .update() has no longer arguments."), 
        void 0 !== this.object && $y.setFromObject(this.object), $y.isEmpty() || (t = $y.min, 
        e = $y.max, (r = (n = this.geometry.attributes.position).array)[0] = e.x, r[1] = e.y, 
        r[2] = e.z, r[3] = t.x, r[4] = e.y, r[5] = e.z, r[6] = t.x, r[7] = t.y, r[8] = e.z, 
        r[9] = e.x, r[10] = t.y, r[11] = e.z, r[12] = e.x, r[13] = e.y, r[14] = t.z, r[15] = t.x, 
        r[16] = e.y, r[17] = t.z, r[18] = t.x, r[19] = t.y, r[20] = t.z, r[21] = e.x, r[22] = t.y, 
        r[23] = t.z, n.needsUpdate = !0, this.geometry.computeBoundingSphere());
    }, tm.prototype.setFromObject = function(t) {
        return this.object = t, this.update(), this;
    }, tm.prototype.copy = function(t) {
        return Xc.prototype.copy.call(this, t), this.object = t.object, this;
    }, tm.prototype.clone = function() {
        return new this.constructor().copy(this);
    }, Object.assign(em.prototype, {
        play: function() {
            return this.Ah.Kh(this), this;
        },
        stop: function() {
            return this.Ah.Qh(this), this.reset();
        },
        reset: function() {
            return this.paused = !1, this.enabled = !0, this.time = 0, this.Bh = -1, this.Hh = null, 
            this.stopFading().stopWarping();
        },
        isRunning: function() {
            return this.enabled && !this.paused && 0 !== this.timeScale && null === this.Hh && this.Ah.$h(this);
        },
        isScheduled: function() {
            return this.Ah.$h(this);
        },
        startAt: function(t) {
            return this.Hh = t, this;
        },
        setLoop: function(t, e) {
            return this.loop = t, this.repetitions = e, this;
        },
        setEffectiveWeight: function(t) {
            return this.weight = t, this.Vh = this.enabled ? t : 0, this.stopFading();
        },
        getEffectiveWeight: function() {
            return this.Vh;
        },
        fadeIn: function(t) {
            return this.tl(t, 0, 1);
        },
        fadeOut: function(t) {
            return this.tl(t, 1, 0);
        },
        crossFadeFrom: function(t, e, n) {
            var r, i;
            return t.fadeOut(e), this.fadeIn(e), n && (i = (n = this.Rh.duration) / (r = t.Rh.duration), 
            t.warp(1, r / n, e), this.warp(i, 1, e)), this;
        },
        crossFadeTo: function(t, e, n) {
            return t.crossFadeFrom(this, e, n);
        },
        stopFading: function() {
            var t = this.Uh;
            return null !== t && (this.Uh = null, this.Ah.nl(t)), this;
        },
        setEffectiveTimeScale: function(t) {
            return this.timeScale = t, this.zh = this.paused ? 0 : t, this.stopWarping();
        },
        getEffectiveTimeScale: function() {
            return this.zh;
        },
        setDuration: function(t) {
            return this.timeScale = this.Rh.duration / t, this.stopWarping();
        },
        syncWith: function(t) {
            return this.time = t.time, this.timeScale = t.timeScale, this.stopWarping();
        },
        halt: function(t) {
            return this.warp(this.zh, 0, t);
        },
        warp: function(t, e, n) {
            var r = (a = this.Ah).time, i = this.Gh, o = this.timeScale, a = (null === i && (i = a.el(), 
            this.Gh = i), i.parameterPositions);
            i = i.sampleValues;
            return a[0] = r, a[1] = r + n, i[0] = t / o, i[1] = e / o, this;
        },
        stopWarping: function() {
            var t = this.Gh;
            return null !== t && (this.Gh = null, this.Ah.nl(t)), this;
        },
        getMixer: function() {
            return this.Ah;
        },
        getClip: function() {
            return this.Rh;
        },
        getRoot: function() {
            return this.Ch || this.Ah.ns;
        },
        Jt: function(t, e, n, r) {
            if (this.enabled) {
                var i = this.Hh;
                if (null !== i) {
                    if ((i = (t - i) * n) < 0 || 0 === n) return;
                    this.Hh = null, e = n * i;
                }
                e *= this.il(t);
                var o = this.rl(e), a = this.ol(t);
                if (0 < a) for (var s = this.Ph, l = this.Dh, u = 0, c = s.length; u !== c; ++u) s[u].evaluate(o), 
                l[u].accumulate(r, a);
            } else this.ol(t);
        },
        ol: function(t) {
            var e, n, r = 0;
            return this.enabled && (r = this.weight, null !== (e = this.Uh)) && (r *= n = e.evaluate(t)[0], 
            t > e.parameterPositions[1]) && (this.stopFading(), 0 === n) && (this.enabled = !1), 
            this.Vh = r;
        },
        il: function(t) {
            var e, n = 0;
            return this.paused || (n = this.timeScale, null !== (e = this.Gh) && (n *= e.evaluate(t)[0], 
            t > e.parameterPositions[1]) && (this.stopWarping(), 0 === n ? this.paused = !0 : this.timeScale = n)), 
            this.zh = n;
        },
        rl: function(t) {
            var e, n = this.time + t, r = this.Rh.duration, i = this.loop, o = this.Bh, a = 2202 === i;
            if (0 === t) return -1 !== o && a && 1 == (1 & o) ? r - n : n;
            if (2200 === i) {
                -1 === o && (this.Bh = 0, this.sl(!0, !0, !1));
                t: {
                    if (r <= n) n = r; else {
                        if (!(n < 0)) {
                            this.time = n;
                            break t;
                        }
                        n = 0;
                    }
                    this.clampWhenFinished ? this.paused = !0 : this.enabled = !1, this.time = n, this.Ah.dispatchEvent({
                        type: "finished",
                        action: this,
                        direction: t < 0 ? -1 : 1
                    });
                }
            } else if (-1 === o && (0 <= t ? this.sl(!(o = 0), 0 === this.repetitions, a) : this.sl(0 === this.repetitions, !0, a)), 
            r <= n || n < 0 ? (n -= r * (i = Math.floor(n / r)), o += Math.abs(i), (e = this.repetitions - o) <= 0 ? (this.clampWhenFinished ? this.paused = !0 : this.enabled = !1, 
            this.time = n = 0 < t ? r : 0, this.Ah.dispatchEvent({
                type: "finished",
                action: this,
                direction: 0 < t ? 1 : -1
            })) : (1 == e ? this.sl(e = t < 0, !e, a) : this.sl(!1, !1, a), this.Bh = o, this.time = n, 
            this.Ah.dispatchEvent({
                type: "loop",
                action: this,
                loopDelta: i
            }))) : this.time = n, a && 1 == (1 & o)) return r - n;
            return n;
        },
        sl: function(t, e, n) {
            var r = this.Nh;
            n ? (r.endingStart = _t, r.endingEnd = _t) : (r.endingStart = t ? this.zeroSlopeAtStart ? _t : St : 2402, 
            r.endingEnd = e ? this.zeroSlopeAtEnd ? _t : St : 2402);
        },
        tl: function(t, e, n) {
            var r = (i = this.Ah).time, i = (null === (o = this.Uh) && (o = i.el(), this.Uh = o), 
            o.parameterPositions), o = o.sampleValues;
            return i[0] = r, o[0] = e, i[1] = r + t, o[1] = n, this;
        }
    }), Object.assign(nm.prototype, {
        accumulate: function(t, e) {
            var n = this.buffer, r = this.valueSize, i = t * r + r;
            if (0 === (t = this.cumulativeWeight)) {
                for (var o = 0; o !== r; ++o) n[i + o] = n[o];
                t = e;
            } else this.Zh(n, i, 0, e / (t += e), r);
            this.cumulativeWeight = t;
        },
        apply: function(t) {
            var e = this.valueSize, n = this.buffer, r = t * e + e, i = (t = this.cumulativeWeight, 
            this.binding);
            this.cumulativeWeight = 0, t < 1 && this.Zh(n, r, 3 * e, 1 - t, e);
            for (var o = e, a = e + e; o !== a; ++o) if (n[o] !== n[o + e]) {
                i.setValue(n, r);
                break;
            }
        },
        saveOriginalState: function() {
            var t = this.binding, e = this.buffer, n = this.valueSize, r = 3 * n;
            t.getValue(e, r);
            for (var i = n, o = r; i !== o; ++i) e[i] = e[r + i % n];
            this.cumulativeWeight = 0;
        },
        restoreOriginalState: function() {
            var t = 3 * this.valueSize;
            this.binding.setValue(this.buffer, t);
        },
        Yh: function(t, e, n, r, i) {
            if (.5 <= r) for (var o = 0; o !== i; ++o) t[e + o] = t[n + o];
        },
        Wh: function(t, e, n, r) {
            l.slerpFlat(t, e, t, e, t, n, r);
        },
        Xh: function(t, e, n, r, i) {
            for (var o = 1 - r, a = 0; a !== i; ++a) {
                var s = e + a;
                t[s] = t[s] * o + t[n + a] * r;
            }
        }
    }), rm.prototype = Object.assign(Object.create(x.prototype), {
        constructor: rm,
        al: function(t, e) {
            var n = t.Ch || this.ns, r = t.Rh.tracks, i = r.length, o = t.Dh, a = t.Ph, s = n.uuid, l = (t = this.ul)[s];
            void 0 === l && (t[s] = l = {});
            for (var u = 0; u !== i; ++u) {
                var c = r[u], h = c.name, f = l[h];
                if (void 0 === f) {
                    if (void 0 !== (f = o[u])) {
                        null === f.Ih && (++f.referenceCount, this.cl(f, s, h));
                        continue;
                    }
                    var p = e && e.Dh[u].binding.parsedPath;
                    ++(f = new nm(uh.create(n, h, p), c.ValueTypeName, c.getValueSize())).referenceCount, 
                    this.cl(f, s, h);
                }
                o[u] = f, a[u].resultBuffer = f.buffer;
            }
        },
        Kh: function(t) {
            if (!this.$h(t)) {
                null === t.Ih && (e = (t.Ch || this.ns).uuid, n = t.Rh.uuid, r = this.fl[n], this.al(t, r && r.knownActions[0]), 
                this.hl(t, n, e));
                for (var e, n, r, i = t.Dh, o = 0, a = i.length; o !== a; ++o) {
                    var s = i[o];
                    0 == s.useCount++ && (this.ll(s), s.saveOriginalState());
                }
                this.dl(t);
            }
        },
        Qh: function(t) {
            if (this.$h(t)) {
                for (var e = t.Dh, n = 0, r = e.length; n !== r; ++n) {
                    var i = e[n];
                    0 == --i.useCount && (i.restoreOriginalState(), this.vl(i));
                }
                this.pl(t);
            }
        },
        qh: function() {
            this.ml = [], this.yl = 0, this.fl = {}, this.Qc = [], this.bl = 0, this.ul = {}, 
            this.gl = [], this.wl = 0;
            var t = this;
            this.stats = {
                actions: {
                    get total() {
                        return t.ml.length;
                    },
                    get inUse() {
                        return t.yl;
                    }
                },
                bindings: {
                    get total() {
                        return t.Qc.length;
                    },
                    get inUse() {
                        return t.bl;
                    }
                },
                controlInterpolants: {
                    get total() {
                        return t.gl.length;
                    },
                    get inUse() {
                        return t.wl;
                    }
                }
            };
        },
        $h: function(t) {
            return null !== (t = t.Ih) && t < this.yl;
        },
        hl: function(t, e, n) {
            var r = this.ml, i = this.fl, o = i[e];
            void 0 === o ? (o = {
                knownActions: [ t ],
                actionByRoot: {}
            }, t.Fh = 0, i[e] = o) : (i = o.knownActions, t.Fh = i.length, i.push(t)), t.Ih = r.length, 
            r.push(t), o.actionByRoot[n] = t;
        },
        _l: function(t) {
            var e, n = (e = this.ml)[e.length - 1], r = t.Ih, i = (r = (e[n.Ih = r] = n, e.pop(), 
            t.Ih = null, t.Rh.uuid), (e = (n = this.fl)[r]).knownActions), o = i[i.length - 1], a = t.Fh;
            i[o.Fh = a] = o, i.pop(), t.Fh = null, delete e.actionByRoot[(t.Ch || this.ns).uuid], 
            0 === i.length && delete n[r], this.Sl(t);
        },
        Sl: function(t) {
            for (var e = t.Dh, n = 0, r = e.length; n !== r; ++n) {
                var i = e[n];
                0 == --i.referenceCount && this.xl(i);
            }
        },
        dl: function(t) {
            var e = this.ml, n = t.Ih, r = this.yl++, i = e[r];
            e[t.Ih = r] = t, e[i.Ih = n] = i;
        },
        pl: function(t) {
            var e = this.ml, n = t.Ih, r = --this.yl, i = e[r];
            e[t.Ih = r] = t, e[i.Ih = n] = i;
        },
        cl: function(t, e, n) {
            var r = this.ul, i = r[e], o = this.Qc;
            void 0 === i && (r[e] = i = {}), (i[n] = t).Ih = o.length, o.push(t);
        },
        xl: function(t) {
            var e = this.Qc, n = (r = t.binding).rootNode.uuid, r = r.path, i = this.ul, o = i[n], a = e[e.length - 1];
            t = t.Ih;
            e[a.Ih = t] = a, e.pop(), delete o[r], 0 === Object.keys(o).length && delete i[n];
        },
        ll: function(t) {
            var e = this.Qc, n = t.Ih, r = this.bl++, i = e[r];
            e[t.Ih = r] = t, e[i.Ih = n] = i;
        },
        vl: function(t) {
            var e = this.Qc, n = t.Ih, r = --this.bl, i = e[r];
            e[t.Ih = r] = t, e[i.Ih = n] = i;
        },
        el: function() {
            var t = this.gl, e = this.wl++, n = t[e];
            return void 0 === n && (t[(n = new mc(new Float32Array(2), new Float32Array(2), 1, this.Ml)).El = e] = n), 
            n;
        },
        nl: function(t) {
            var e = this.gl, n = t.El, r = --this.wl, i = e[r];
            e[t.El = r] = t, e[i.El = n] = i;
        },
        Ml: new Float32Array(1),
        clipAction: function(t, e) {
            var n, r = (n = e || this.ns).uuid, i = (t = null !== (n = "string" == typeof t ? Mc.findByName(n, t) : t) ? n.uuid : t, 
            this.fl[t]), o = null;
            if (void 0 !== i) {
                var a = i.actionByRoot[r];
                if (void 0 !== a) return a;
                o = i.knownActions[0], null === n && (n = o.Rh);
            }
            return null === n ? null : (a = new em(this, n, e), this.al(a, o), this.hl(a, t, r), 
            a);
        },
        existingAction: function(t, e) {
            var n = (e = e || this.ns).uuid;
            e = (e = "string" == typeof t ? Mc.findByName(e, t) : t) ? e.uuid : t;
            return void 0 !== (t = this.fl[e]) && t.actionByRoot[n] || null;
        },
        stopAllAction: function() {
            var t = this.ml, e = this.yl, n = this.Qc, r = this.bl;
            this.yl = 0;
            for (var i = this.bl = 0; i !== e; ++i) t[i].reset();
            for (i = 0; i !== r; ++i) n[i].useCount = 0;
            return this;
        },
        update: function(t) {
            t *= this.timeScale;
            for (var e = this.ml, n = this.yl, r = this.time += t, i = Math.sign(t), o = this.Jh ^= 1, a = 0; a !== n; ++a) e[a].Jt(r, t, i, o);
            var s = this.Qc, l = this.bl;
            for (a = 0; a !== l; ++a) s[a].apply(o);
            return this;
        },
        setTime: function(t) {
            for (var e = this.time = 0; e < this.ml.length; e++) this.ml[e].time = 0;
            return this.update(t);
        },
        getRoot: function() {
            return this.ns;
        },
        uncacheClip: function(t) {
            var e = this.ml, n = (t = t.uuid, this.fl), r = n[t];
            if (void 0 !== r) {
                for (var i = r.knownActions, o = 0, a = i.length; o !== a; ++o) {
                    var s = i[o], l = (this.Qh(s), s.Ih), u = e[e.length - 1];
                    s.Ih = null, s.Fh = null, e[u.Ih = l] = u, e.pop(), this.Sl(s);
                }
                delete n[t];
            }
        },
        uncacheRoot: function(t) {
            var e, n = t.uuid, r = this.fl;
            for (e in r) {
                var i = r[e].actionByRoot[n];
                void 0 !== i && (this.Qh(i), this._l(i));
            }
            var o = this.ul[n];
            if (void 0 !== o) for (var a in o) (a = o[a]).restoreOriginalState(), this.xl(a);
        },
        uncacheAction: function(t, e) {
            null !== (t = this.existingAction(t, e)) && (this.Qh(t), this._l(t));
        }
    });
    Wy = n(33);
    var im = n.n(Wy);
    function om(t) {
        return (om = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function am(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != om(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != om(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == om(t) ? t : String(t);
            }(r.key), r);
        }
    }
    Wy = function() {
        function t(e) {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
            this.Qo = e, this.jt = this.Qo.map, this.Ol = {}, this.Oh = null, this.Tl = {}, 
            this.jl = 0, this.nt = 512, this.tt = 512, this.Ll = !1, this.zt = null, this.Jt = this.Jt.bind(this);
        }
        var e, n;
        return e = t, (n = [ {
            key: "isAdded",
            get: function() {
                return this.Ll;
            }
        }, {
            key: "add",
            value: function(t) {
                var e = this;
                null === this.Oh && (this.Oh = t), this.kl(function(t) {
                    e.Al(t);
                });
            }
        }, {
            key: "dispose",
            value: function(t) {
                this.jt.off("update", this.Jt), t && t();
            }
        }, {
            key: "stop",
            value: function() {
                this.jt.off("update", this.Jt);
            }
        } ]) && am(e.prototype, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }();
    var sm = (Object.assign(Wy.prototype, {
        kl: function(t) {
            var e = this.Qo.externalModel.getRenderNode();
            e.renderOrder = 1, this.Qo.externalModel.Rl ? e.traverse(function(e) {
                "Mesh" === e.type && (e.renderOrder = 1, t(e));
            }) : t(e);
        },
        Al: function(t) {
            var e = this, n = this, r = 0, i = null;
            Array.isArray(t.material) ? (this.Ol[t.name] = [], function e() {
                r < t.material.length ? n.Lh(t.material[r], function(o, a) {
                    n.Ol[t.name].push(t.material[r].clone()), a && (t.material[r].dispose(), t.material[r] = o), 
                    r++, i = setTimeout(e, 0);
                }) : (null !== i && clearTimeout(i), n.zt = new Date().getTime(), n.jt.on("update", n.Jt));
            }()) : this.Lh(t.material, function(r, i) {
                e.Ol[t.name] = t.material.clone(), i && (t.material.dispose(), t.material = r), 
                e.zt = new Date().getTime(), e.jt.on("update", n.Jt);
            });
        },
        Lh: function(t, e) {
            var n, r = null;
            t && (this.Qo.externalModel.Rl ? t.uniforms && t.uniforms.map && t.uniforms.map.value ? r = t.uniforms.map.value.name : t.map && (r = "" + t.map.name) : t.map && (r = "" + t.map.name).indexOf(".gif") < 0 && (r = t.name)), 
            null !== r && this.Qo.parent.Cl && this.Qo.parent.Cl[r] || null === r || !(0 <= r.indexOf(".gif")) ? e(null, !1) : (t = (t = r.split("."))[0] + "." + t[1], 
            (n = this.Tl[t]) ? n.canvasArray && 0 < n.canvasArray.length && (n = new ka(n.canvasArray[n.canvascount]), 
            this.Qo.externalModel.Rl && (n.flipY = !1), n.repeat.set(1, 1), n.name = r, n.magFilter = mt, 
            n.minFilter = 1008, (r = new Qr({
                map: n
            })).isBasic = !0, r.gifname = t, r.transparent = !0, e(r, !0)) : this.Nl(this.Oh + t, t, function(t) {
                e(t, !0);
            }));
        },
        Nl: function(t, e, n) {
            var r = this, i = document.createElement("div"), o = (i.style.display = "none", 
            document.body.appendChild(i), new Image());
            o.crossOrigin = "Anonymous", o.onload = function() {
                n && ((t = document.createElement("canvas")).width = r.tt, t.height = r.nt, t.getContext("2d").drawImage(o, 0, 0, r.tt, r.nt), 
                t = new ka(t), r.Qo.externalModel.Rl && (t.flipY = !1), t.repeat.set(1, 1), t.magFilter = mt, 
                t.minFilter = 1008, (t = new Qr({
                    map: t
                })).transparent = !0, t.isBasic = !0, t.gifname = e, n(t)), r.Tl[e] = {
                    canvascount: 0,
                    canvasArray: []
                }, i.appendChild(o);
                var t, a = new im.a({
                    gif: o
                });
                a.load(function() {
                    r.Pl(a, e, i);
                });
            }, o.src = t;
        },
        Pl: function(t, e, n) {
            var r = this, i = null, o = t.get_length(), a = 1;
            this.Tl[e].canvascount = 0, function s() {
                var l;
                o < a ? (document.body.removeChild(n), null !== i && clearTimeout(i)) : (t.move_to(a), 
                (l = document.createElement("canvas")).width = r.tt, l.height = r.nt, l.getContext("2d").drawImage(t.get_canvas(), 0, 0, r.tt, r.nt), 
                r.Tl[e].canvasArray.push(l), a++, i = setTimeout(s, 0));
            }();
        },
        Dl: function(t, e) {
            t = (t = t.split("."))[0] + "." + t[1], this.Tl[t] && (this.Tl[t].canvasArray.length = 0, 
            this.Tl[t].canvascount = 0), this.Nl(e, t), this.Jt(), this.Ll || (this.Ll = !0, 
            this.jt.on("update", this.Jt));
        },
        La: function(t) {
            var e = (e = t.split("."))[0] + "." + e[1];
            this.Dl(t, this.Oh + e);
        },
        Jt: function() {
            function t(t) {
                50 <= r && t && (t.canvascount < t.canvasArray.length - 1 ? t.canvascount++ : t.canvascount = 0);
            }
            var e = this, n = new Date().getTime(), r = n - this.zt;
            50 <= r && (this.zt = n), this.Qo.externalModel.getRenderNode() && (this.kl(function(n) {
                var r;
                if (Array.isArray(n.material)) for (var i = n.material, o = 0; o < i.length; o++) !function(r) {
                    var o;
                    !i[r].isBasic || n.material[r].isupdate ? e.Lh(e.Ol[n.name][r], function(t, e) {
                        e && (n.material[r].dispose(), n.material[r] = t);
                    }) : ((o = e.Tl[i[r].gifname]) && o.canvasArray[o.canvascount] && (n.material.isupdate ? e.Lh(e.Ol[n.name][r], function(t, e) {
                        e && (n.material[r].dispose(), n.material[r] = t);
                    }) : (n.material[r].map.image = o.canvasArray[o.canvascount], n.material[r].map.needsUpdate = !0)), 
                    t(o));
                }(o); else n.material.isBasic && !n.material.isupdate ? ((r = e.Tl[n.material.gifname]) && r.canvasArray[r.canvascount] && (n.material.isupdate ? e.Lh(e.Ol[n.name], function(t, e) {
                    e && (n.material.dispose(), n.material = t);
                }) : (n.material.map.image = r.canvasArray[r.canvascount], n.material.map.needsUpdate = !0)), 
                t(r)) : e.Lh(e.Ol[n.name], function(t, e) {
                    e && (n.material.dispose(), n.material = t);
                });
            }), this.jt.enableUpdateRender());
        }
    }), Wy);
    function lm(t, e, n, r, i, o, a, s, l) {
        Zn.call(this, t, e, n, r, i, o, a, s, l), this.format = void 0 !== a ? a : gt, this.minFilter = void 0 !== o ? o : mt, 
        this.magFilter = void 0 !== i ? i : mt, this.generateMipmaps = !1;
    }
    function um(t) {
        return (um = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function cm(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != um(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != um(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == um(t) ? t : String(t);
            }(r.key), r);
        }
    }
    lm.prototype = Object.assign(Object.create(Zn.prototype), {
        constructor: lm,
        isVideoTexture: !0,
        update: function() {
            var t = this.image;
            t.readyState >= t.HAVE_CURRENT_DATA && (this.needsUpdate = !0);
        }
    });
    Wy = function() {
        function t(e) {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
            this.Qo = e, this.Il = e.externalModel, this.jt = this.Qo.map, this.Fl = [], this.Gl = null, 
            this.Ul = {}, this.Bl = null, this.Ll = !1, this.oldmaterial = {}, this.Oh = null, 
            this.Hl = {}, this.Jt = this.Jt.bind(this);
        }
        var e, n;
        return e = t, (n = [ {
            key: "isAdded",
            get: function() {
                return this.Ll;
            }
        }, {
            key: "add",
            value: function(t) {
                var e = this;
                null === this.Oh && (this.Oh = t), this.kl(function(t) {
                    e.Al(t);
                }), this.jt.on("update", this.Jt);
            }
        }, {
            key: "dispose",
            value: function() {
                for (var t = 0; t < this.Fl.length; t++) {
                    var e = this.Fl[t];
                    null !== document.getElementById(e) && document.getElementById(e).parentNode.removeChild(document.getElementById(e));
                }
                this.jt.off("update", this.Jt);
            }
        }, {
            key: "stop",
            value: function() {
                this.jt.off("update", this.Jt);
            }
        } ]) && cm(e.prototype, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }();
    var hm = (Object.assign(Wy.prototype, {
        kl: function(t) {
            var e = this.Qo.externalModel.getRenderNode();
            this.Il.Rl ? e.traverse(function(e) {
                "Mesh" === e.type && t(e);
            }) : t(e);
        },
        Al: function(t) {
            var e = this, n = this, r = t.material, i = 0, o = null;
            Array.isArray(r) ? (this.oldmaterial[t.name] = [], function e() {
                i < r.length ? n.Lh(r[i], function(a, s) {
                    n.oldmaterial[t.name].push(r[i].clone()), s && (t.material[i].dispose(), t.material[i] = a), 
                    i++, o = setTimeout(e, 0);
                }) : null !== o && clearTimeout(o);
            }()) : this.Lh(r, function(n, i) {
                e.oldmaterial[t.name] = r.clone(), i && (t.material.dispose(), t.material = n);
            });
        },
        Lh: function(t, e) {
            var n, r = this, i = null;
            t && (this.Il.Rl ? t.uniforms && t.uniforms.map && t.uniforms.map.value ? i = t.uniforms.map.value.name : t.map && (i = "" + t.map.name) : t.map && (i = "" + t.map.name).indexOf(".mp4") < 0 && i.indexOf(".webm") < 0 && i.indexOf(".ogg") < 0 && (i = t.name)), 
            null !== i && this.Qo.parent.Cl && this.Qo.parent.Cl[i] || null === i || !(0 <= i.indexOf(".mp4") || 0 <= i.indexOf(".webm") || 0 <= i.indexOf(".ogg")) ? e(null, !1) : (n = i.split("."), 
            (t = (t = this.Hl[i]) || this.Ul[n[0] + "." + n[1]]) ? ((t = new Qr({
                map: t.clone()
            })).isBasic = !0, e && e(t, !0)) : this.zl(this.Oh + n[0] + "." + n[1], function(t) {
                t.name = i, (t = new Qr({
                    map: (r.Ul[n[0] + "." + n[1]] = t).clone()
                })).isBasic = !0, e(t, !0);
            }));
        },
        zl: function(t, e) {
            var n = this, r = (this.Bl = t, null), i = document.createElement("div"), o = (i.style.display = "none", 
            "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(t) {
                var e = 16 * Math.random() | 0;
                return ("x" == t ? e : 3 & e | 8).toString(16);
            }));
            this.Gl = o + "_div", this.Fl.push(this.Gl), i.setAttribute("id", this.Gl), i.innerHTML = '<video id="' + o + '" loop crossOrigin="anonymous" muted><source src="' + t + '"></video>', 
            document.body.appendChild(i), function t() {
                var i = document.getElementById(o);
                i ? (null !== r && clearTimeout(r), i.addEventListener("loadeddata", function() {
                    var t = new lm(i);
                    t.video_id = o + "_div", n.Il.Rl && (t.flipY = !1), e && e(t), i.play();
                })) : r = setTimeout(t, 0);
            }();
        },
        Vl: function(t) {
            var e = this;
            this.Qo.externalModel.getRenderNode() && this.kl(function(n) {
                var r = n.material;
                if (Array.isArray(r)) for (var i = 0; i < r.length; i++) !function(r) {
                    e.Lh(e.oldmaterial[n.name][r], function(e) {
                        e && e.map && e.map.name === t && (n.material[r].dispose(), n.material[r] = e);
                    });
                }(i); else e.Lh(e.oldmaterial[n.name], function(e) {
                    e && e.map && e.map.name === t && (n.material.dispose(), n.material = e);
                });
            });
        },
        La: function(t) {
            var e;
            this.Hl[t] && (e = this.Hl[t].video_id, null !== document.getElementById(e) && document.getElementById(e).parentNode.removeChild(document.getElementById(e)), 
            this.Hl[t].dispose(), this.Hl[t] = void 0, this.Vl(t));
        },
        Dl: function(t, e) {
            var n = this;
            this.zl(e, function(e) {
                n.Hl[t] && n.La(t), e.name = t, n.Hl[t] = e, n.Vl(t);
            }), this.Ll || (this.Ll = !0, this.jt.on("update", this.Jt));
        },
        Jt: function() {
            var t = this;
            this.Qo.externalModel.getRenderNode() && (this.kl(function(e) {
                var n = e.material;
                if (Array.isArray(n)) for (var r = 0; r < n.length; r++) !function(r) {
                    n[r].isBasic && !n[r].isupdate || t.Lh(t.oldmaterial[e.name][r], function(t) {
                        t && (e.material[r].dispose(), e.material[r] = t);
                    });
                }(r); else n.isBasic ? n.isupdate && t.Lh(t.oldmaterial[e.name], function(t) {
                    t && (e.material.dispose(), e.material = t);
                }) : t.Lh(t.oldmaterial[e.name], function(t) {
                    t && (e.material.dispose(), e.material = t);
                });
            }), this.jt.enableUpdateRender());
        }
    }), Wy);
    function fm(t) {
        return (fm = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function pm(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != fm(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != fm(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == fm(t) ? t : String(t);
            }(r.key), r);
        }
    }
    Wy = function() {
        function t(e) {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
            this.jt = e.parent.parent.parent.parent, this.Il = e, this.Jt = this.Jt.bind(this), 
            this.Re = "no", this.Wl = new sm({
                map: this.jt,
                externalModel: e,
                parent: this
            }), this.Yl = new hm({
                map: this.jt,
                externalModel: e,
                parent: this
            }), this.Cl = null, this.Xl = [], this.Zl = {}, this.jt.on("update", this.Jt);
        }
        var e, n;
        return e = t, (n = [ {
            key: "gifTool",
            get: function() {
                return this.Wl;
            }
        }, {
            key: "videoTool",
            get: function() {
                return this.Yl;
            }
        }, {
            key: "isGltf",
            get: function() {
                return this.Il.Rl;
            }
        }, {
            key: "textureNames",
            get: function() {
                return this.Xl;
            }
        }, {
            key: "oldMaterial",
            get: function() {
                return this.Zl;
            }
        }, {
            key: "replace",
            value: function(t, e) {
                null === this.Cl && (this.Cl = {}), this.Cl[t] = !0;
            }
        }, {
            key: "reset",
            value: function(t) {
                this.Cl[t] = !1;
            }
        }, {
            key: "dispose",
            value: function() {
                this.Wl.Ll && this.Wl.dispose(), this.Yl.Ll && this.Yl.dispose();
            }
        } ]) && pm(e.prototype, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }();
    var dm = (Object.assign(Wy.prototype, {
        Jt: function() {
            function t(t, e) {
                (t = n.ql(t)).needgif && !n.Wl.Ll && (n.Wl.add(e), n.Wl.Ll = !0), t.needvideo && !n.Yl.Ll && (n.Yl.add(e), 
                n.Yl.Ll = !0);
            }
            var e, n = this, r = this.Il.getRenderNode();
            r && (this.jt.off("update", this.Jt), e = this.Il.Jl, this.Il.Rl ? r.traverse(function(n) {
                "Mesh" === n.type && t(n, e);
            }) : t(r, e));
        },
        ql: function(t) {
            function e(t) {
                0 <= t.indexOf(".gif") ? (a = !0, i.Xl.push(t)) : (0 <= t.indexOf(".mp4") || 0 <= t.indexOf(".webm") || 0 <= t.indexOf(".ogg")) && (s = !0, 
                i.Xl.push(t));
            }
            function n(t, e) {
                0 <= t.indexOf(".gif") || 0 <= e.indexOf(".gif") ? (a = !0, 0 <= t.indexOf(".gif") ? i.Xl.push(t) : i.Xl.push(e)) : (0 <= t.indexOf(".mp4") || 0 <= t.indexOf(".webm") || 0 <= t.indexOf(".ogg") || 0 <= e.indexOf(".mp4") || 0 <= e.indexOf(".webm") || 0 <= e.indexOf(".ogg")) && (s = !0, 
                0 <= t.indexOf(".mp4") || 0 <= t.indexOf(".webm") || 0 <= t.indexOf(".ogg") ? i.Xl.push(t) : i.Xl.push(e));
            }
            var r, i = this, o = {
                needgif: !1,
                needvideo: !1
            }, a = !1, s = !1, l = t.material;
            if (Array.isArray(l)) {
                this.Zl[t.name] = [];
                for (var u, c = 0; c < l.length; c++) this.Zl[t.name].push(l[c].clone()), this.Il.Rl ? l[c].uniforms && l[c].uniforms.map && l[c].uniforms.map.value ? l[c].uniforms.map.value.name : l[c].map && e(l[c].map.name) : (u = "", 
                n(u = l[c].map ? "" + l[c].map.name : u, "" + l[c].name));
            } else this.Zl[t.name] = l.clone(), this.Il.Rl ? (r = "", l.uniforms && l.uniforms.map && l.uniforms.map.value ? r = l.uniforms.map.value.name : l.map && (r = l.map.name), 
            e(r)) : (r = "", n(r = l.map ? "" + l.map.name : r, "" + l.name));
            return o.needgif = a, o.needvideo = s, o;
        }
    }), Wy);
    function ym(t) {
        return (ym = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function mm() {
        mm = function() {
            return e;
        };
        var t, e = {}, n = Object.prototype, r = n.hasOwnProperty, i = Object.defineProperty || function(t, e, n) {
            t[e] = n.value;
        }, o = (b = "function" == typeof Symbol ? Symbol : {}).iterator || "@@iterator", a = b.asyncIterator || "@@asyncIterator", s = b.toStringTag || "@@toStringTag";
        function l(t, e, n) {
            return Object.defineProperty(t, e, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }), t[e];
        }
        try {
            l({}, "");
        } catch (t) {
            l = function(t, e, n) {
                return t[e] = n;
            };
        }
        function u(e, n, r, o) {
            var a, s, l, u;
            n = n && n.prototype instanceof m ? n : m, n = Object.create(n.prototype), o = new M(o || []);
            return i(n, "_invoke", {
                value: (a = e, s = r, l = o, u = h, function(e, n) {
                    if (u === p) throw new Error("Generator is already running");
                    if (u === d) {
                        if ("throw" === e) throw n;
                        return {
                            value: t,
                            done: !0
                        };
                    }
                    for (l.method = e, l.arg = n; ;) {
                        var r = l.delegate;
                        if (r && (r = function e(n, r) {
                            var i = r.method, o = n.iterator[i];
                            return o === t ? (r.delegate = null, "throw" === i && n.iterator.return && (r.method = "return", 
                            r.arg = t, e(n, r), "throw" === r.method) || "return" !== i && (r.method = "throw", 
                            r.arg = new TypeError("The iterator does not provide a '" + i + "' method")), y) : "throw" === (i = c(o, n.iterator, r.arg)).type ? (r.method = "throw", 
                            r.arg = i.arg, r.delegate = null, y) : (o = i.arg) ? o.done ? (r[n.resultName] = o.value, 
                            r.next = n.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, 
                            y) : o : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), 
                            r.delegate = null, y);
                        }(r, l))) {
                            if (r === y) continue;
                            return r;
                        }
                        if ("next" === l.method) l.sent = l.Kl = l.arg; else if ("throw" === l.method) {
                            if (u === h) throw u = d, l.arg;
                            l.dispatchException(l.arg);
                        } else "return" === l.method && l.abrupt("return", l.arg);
                        if (u = p, "normal" === (r = c(a, s, l)).type) {
                            if (u = l.done ? d : f, r.arg === y) continue;
                            return {
                                value: r.arg,
                                done: l.done
                            };
                        }
                        "throw" === r.type && (u = d, l.method = "throw", l.arg = r.arg);
                    }
                })
            }), n;
        }
        function c(t, e, n) {
            try {
                return {
                    type: "normal",
                    arg: t.call(e, n)
                };
            } catch (t) {
                return {
                    type: "throw",
                    arg: t
                };
            }
        }
        e.wrap = u;
        var h = "suspendedStart", f = "suspendedYield", p = "executing", d = "completed", y = {};
        function m() {}
        function v() {}
        function g() {}
        var b, x, w = ((x = (x = (l(b = {}, o, function() {
            return this;
        }), Object.getPrototypeOf)) && x(x(T([])))) && x !== n && r.call(x, o) && (b = x), 
        g.prototype = m.prototype = Object.create(b));
        function S(t) {
            [ "next", "throw", "return" ].forEach(function(e) {
                l(t, e, function(t) {
                    return this._invoke(e, t);
                });
            });
        }
        function _(t, e) {
            var n;
            i(this, "_invoke", {
                value: function(i, o) {
                    function a() {
                        return new e(function(n, a) {
                            !function n(i, o, a, s) {
                                var l;
                                if ("throw" !== (i = c(t[i], t, o)).type) return (o = (l = i.arg).value) && "object" == ym(o) && r.call(o, "__await") ? e.resolve(o.Ql).then(function(t) {
                                    n("next", t, a, s);
                                }, function(t) {
                                    n("throw", t, a, s);
                                }) : e.resolve(o).then(function(t) {
                                    l.value = t, a(l);
                                }, function(t) {
                                    return n("throw", t, a, s);
                                });
                                s(i.arg);
                            }(i, o, n, a);
                        });
                    }
                    return n = n ? n.then(a, a) : a();
                }
            });
        }
        function E(t) {
            var e = {
                tryLoc: t[0]
            };
            1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), 
            this.tryEntries.push(e);
        }
        function O(t) {
            var e = t.completion || {};
            e.type = "normal", delete e.arg, t.completion = e;
        }
        function M(t) {
            this.tryEntries = [ {
                tryLoc: "root"
            } ], t.forEach(E, this), this.reset(!0);
        }
        function T(e) {
            if (e || "" === e) {
                var n, i = e[o];
                if (i) return i.call(e);
                if ("function" == typeof e.next) return e;
                if (!isNaN(e.length)) return n = -1, (i = function i() {
                    for (;++n < e.length; ) if (r.call(e, n)) return i.value = e[n], i.done = !1, i;
                    return i.value = t, i.done = !0, i;
                }).next = i;
            }
            throw new TypeError(ym(e) + " is not iterable");
        }
        return i(w, "constructor", {
            value: v.prototype = g,
            configurable: !0
        }), i(g, "constructor", {
            value: v,
            configurable: !0
        }), v.displayName = l(g, s, "GeneratorFunction"), e.isGeneratorFunction = function(t) {
            return !!(t = "function" == typeof t && t.constructor) && (t === v || "GeneratorFunction" === (t.displayName || t.name));
        }, e.mark = function(t) {
            return Object.setPrototypeOf ? Object.setPrototypeOf(t, g) : (t.__proto__ = g, l(t, s, "GeneratorFunction")), 
            t.prototype = Object.create(w), t;
        }, e.awrap = function(t) {
            return {
                Ql: t
            };
        }, S(_.prototype), l(_.prototype, a, function() {
            return this;
        }), e.AsyncIterator = _, e.async = function(t, n, r, i, o) {
            void 0 === o && (o = Promise);
            var a = new _(u(t, n, r, i), o);
            return e.isGeneratorFunction(n) ? a : a.next().then(function(t) {
                return t.done ? t.value : a.next();
            });
        }, S(w), l(w, s, "Generator"), l(w, o, function() {
            return this;
        }), l(w, "toString", function() {
            return "[object Generator]";
        }), e.keys = function(t) {
            var e, n = Object(t), r = [];
            for (e in n) r.push(e);
            return r.reverse(), function t() {
                for (;r.length; ) {
                    var e = r.pop();
                    if (e in n) return t.value = e, t.done = !1, t;
                }
                return t.done = !0, t;
            };
        }, e.values = T, M.prototype = {
            constructor: M,
            reset: function(e) {
                if (this.prev = 0, this.next = 0, this.sent = this.Kl = t, this.done = !1, this.delegate = null, 
                this.method = "next", this.arg = t, this.tryEntries.forEach(O), !e) for (var n in this) "t" === n.charAt(0) && r.call(this, n) && !isNaN(+n.slice(1)) && (this[n] = t);
            },
            stop: function() {
                this.done = !0;
                var t = this.tryEntries[0].completion;
                if ("throw" === t.type) throw t.arg;
                return this.rval;
            },
            dispatchException: function(e) {
                if (this.done) throw e;
                var n = this;
                function i(r, i) {
                    return s.type = "throw", s.arg = e, n.next = r, i && (n.method = "next", n.arg = t), 
                    !!i;
                }
                for (var o = this.tryEntries.length - 1; 0 <= o; --o) {
                    var a = this.tryEntries[o], s = a.completion;
                    if ("root" === a.tryLoc) return i("end");
                    if (a.tryLoc <= this.prev) {
                        var l = r.call(a, "catchLoc"), u = r.call(a, "finallyLoc");
                        if (l && u) {
                            if (this.prev < a.catchLoc) return i(a.catchLoc, !0);
                            if (this.prev < a.finallyLoc) return i(a.finallyLoc);
                        } else if (l) {
                            if (this.prev < a.catchLoc) return i(a.catchLoc, !0);
                        } else {
                            if (!u) throw new Error("try statement without catch or finally");
                            if (this.prev < a.finallyLoc) return i(a.finallyLoc);
                        }
                    }
                }
            },
            abrupt: function(t, e) {
                for (var n = this.tryEntries.length - 1; 0 <= n; --n) {
                    var i = this.tryEntries[n];
                    if (i.tryLoc <= this.prev && r.call(i, "finallyLoc") && this.prev < i.finallyLoc) {
                        var o = i;
                        break;
                    }
                }
                var a = (o = o && ("break" === t || "continue" === t) && o.tryLoc <= e && e <= o.finallyLoc ? null : o) ? o.completion : {};
                return a.type = t, a.arg = e, o ? (this.method = "next", this.next = o.finallyLoc, 
                y) : this.complete(a);
            },
            complete: function(t, e) {
                if ("throw" === t.type) throw t.arg;
                return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, 
                this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), 
                y;
            },
            finish: function(t) {
                for (var e = this.tryEntries.length - 1; 0 <= e; --e) {
                    var n = this.tryEntries[e];
                    if (n.finallyLoc === t) return this.complete(n.completion, n.afterLoc), O(n), y;
                }
            },
            catch: function(t) {
                for (var e = this.tryEntries.length - 1; 0 <= e; --e) {
                    var n, r, i = this.tryEntries[e];
                    if (i.tryLoc === t) return "throw" === (n = i.completion).type && (r = n.arg, O(i)), 
                    r;
                }
                throw new Error("illegal catch attempt");
            },
            delegateYield: function(e, n, r) {
                return this.delegate = {
                    iterator: T(e),
                    resultName: n,
                    nextLoc: r
                }, "next" === this.method && (this.arg = t), y;
            }
        }, e;
    }
    function vm(t, e, n, r, i, o, a) {
        try {
            var s = t[o](a), l = s.value;
        } catch (t) {
            return void n(t);
        }
        s.done ? e(l) : Promise.resolve(l).then(r, i);
    }
    function gm(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != ym(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != ym(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == ym(t) ? t : String(t);
            }(r.key), r);
        }
    }
    var bm = function(t, e, n) {
        return e && gm(t.prototype, e), n && gm(t, n), Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }(function t(e, n) {
        if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
        this.jt = e, this.Il = n, this.$l = null, this.td = null, this.nd = null, this.ed = null, 
        this.rd = null, this.od = new fc(Xu), this.od.setResponseType("json"), this.sd = this.sd.bind(this), 
        this.jt.on("zoom", this.sd);
    });
    function xm(t) {
        return (xm = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function wm(t, e) {
        var n, r, i, o, a = "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"];
        if (a) return r = !(n = !0), {
            s: function() {
                a = a.call(t);
            },
            n: function() {
                var t = a.next();
                return n = t.done, t;
            },
            e: function(t) {
                r = !0, i = t;
            },
            f: function() {
                try {
                    n || null == a.return || a.return();
                } finally {
                    if (r) throw i;
                }
            }
        };
        if (Array.isArray(t) || (a = function(t, e) {
            var n;
            if (t) return "string" == typeof t ? Sm(t, e) : "Map" === (n = "Object" === (n = Object.prototype.toString.call(t).slice(8, -1)) && t.constructor ? t.constructor.name : n) || "Set" === n ? Array.from(t) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? Sm(t, e) : void 0;
        }(t)) || e && t && "number" == typeof t.length) return a && (t = a), o = 0, {
            s: e = function() {},
            n: function() {
                return o >= t.length ? {
                    done: !0
                } : {
                    done: !1,
                    value: t[o++]
                };
            },
            e: function(t) {
                throw t;
            },
            f: e
        };
        throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }
    function Sm(t, e) {
        (null == e || e > t.length) && (e = t.length);
        for (var n = 0, r = new Array(e); n < e; n++) r[n] = t[n];
        return r;
    }
    function _m(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != xm(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != xm(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == xm(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function Em(t, e, n) {
        e = Tm(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], Tm(t).constructor) : e.apply(t, n)) && ("object" === xm(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        return Om(r);
    }
    function Om(t) {
        if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return t;
    }
    function Mm() {
        return (Mm = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function(t, e, n) {
            var r = function(t, e) {
                for (;!Object.prototype.hasOwnProperty.call(t, e) && null !== (t = Tm(t)); ) ;
                return t;
            }(t, e);
            if (r) return (r = Object.getOwnPropertyDescriptor(r, e)).get ? r.get.call(arguments.length < 3 ? t : n) : r.value;
        }).apply(this, arguments);
    }
    function Tm(t) {
        return (Tm = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function Lm(t, e) {
        return (Lm = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    Object.assign(bm.prototype, {
        ad: function() {
            var t = this;
            this.Il.ud({
                needFadeIn: !1,
                needFadeOut: !1,
                initLODMesh: !1,
                lodName: this.td,
                callback: function(e) {
                    e !== t.td && t.ad();
                }
            });
        },
        sd: function() {
            var t, e = this;
            return t = mm().mark(function t() {
                var n;
                return mm().wrap(function(t) {
                    for (;;) switch (t.prev = t.next) {
                      case 0:
                        n = e.fd(e.$l, e.jt.getZoom()), e.td !== n && null !== n && (e.td = n, null !== e.rd && clearTimeout(e.rd), 
                        e.ad(), e.rd = setTimeout(function() {}, 50));

                      case 2:
                      case "end":
                        return t.stop();
                    }
                }, t);
            }), function() {
                var e = this, n = arguments;
                return new Promise(function(r, i) {
                    var o = t.apply(e, n);
                    function a(t) {
                        vm(o, r, i, a, s, "next", t);
                    }
                    function s(t) {
                        vm(o, r, i, a, s, "throw", t);
                    }
                    a(void 0);
                });
            }();
        },
        fd: function(t, e) {
            if (!t) return null;
            var n = this.Il.B, r = n.maxlevel;
            if (e < n.minlevel || r < e) return null;
            for (var i = null, o = 0; o < t.length; o++) {
                var a = t[o], s = a.maxlevel;
                if (a.minlevel <= e && e <= s) {
                    i = a.name;
                    break;
                }
            }
            return i;
        },
        hd: function(t) {
            var e = this;
            return this.ed !== t && (this.ed = t, this.nd = null), new Promise(function(n, r) {
                e.ld(t).then(function(i) {
                    i.lod && Array.isArray(i.lod) || r("lod format error");
                    var o = e.fd(i.lod, e.jt.getZoom()), a = (null === o && r(null), qu(t));
                    e.$l = i.lod, n("".concat(a).concat(o));
                }).catch(r);
            });
        },
        ld: function(t) {
            var e = this;
            return new Promise(function(n, r) {
                e.nd ? n(e.nd) : e.od.load(t, function(t) {
                    e.nd = t, n(e.nd);
                }, null, r);
            });
        },
        tn: function() {
            this.jt.off("zoom", this.sd), this.od = null;
        }
    });
    Wy = function() {
        var t = n, e = Yy;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t) {
            var e;
            if (this instanceof n) return (e = Em(this, n)).B = t, e.Re = Ct.EXTERNAL_MODEL, 
            e.Mh = null, e.xi = null, e.dd = null, e.vd = null, e.ht = null, e.pd = !1, e.Or = null, 
            e.Rl = null, e.Ah = null, e.ml = [], e.Cf = null, e.md = e.md.bind(Om(e)), e.yd = new ne(), 
            e.bd = !0, e.gd = null, e.Jl = null, e.wd = !1, e._d = null, e.Sd = null, e.xd = !1, 
            e.Ed = null, e.Xl = [], e.Md = !1, e.Ar = null, e;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && Lm(t, e), t = n, (e = [ {
            key: "multiMediaTool",
            get: function() {
                return this.gd;
            }
        }, {
            key: "fading",
            get: function() {
                return !this.yd.qt;
            }
        }, {
            key: "FID",
            get: function() {
                return this.B.fid;
            }
        }, {
            key: "typeID",
            get: function() {
                return this.B.type;
            }
        }, {
            key: "name",
            get: function() {
                return this.B.name;
            }
        }, {
            key: "eName",
            get: function() {
                return this.B.ename;
            }
        }, {
            key: "color",
            get: function() {
                return this.vd;
            },
            set: function(t) {
                this.vd = t, this.Lh();
            }
        }, {
            key: "opacity",
            get: function() {
                return this.ht;
            },
            set: function(t) {
                this.ht = t, this.Lh();
            }
        }, {
            key: "canDispose",
            get: function() {
                return this._canDispose;
            }
        }, {
            key: "show",
            get: function() {
                return this.Sf;
            },
            set: function(t) {
                t ? this.Cf && !this.Cf.show || this.Od() : this.Td();
            }
        }, {
            key: "isGltf",
            get: function() {
                return this.Rl;
            }
        }, {
            key: "boundNoClone",
            get: function() {
                var t = this.getBound();
                return t ? {
                    min: {
                        x: t.minX,
                        y: t.minY
                    },
                    max: {
                        x: t.maxX,
                        y: t.maxY
                    }
                } : null;
            }
        }, {
            key: "resetColor",
            value: function() {
                this.pd = !0, this.Lh();
            }
        }, {
            key: "setColor",
            value: function(t, e) {
                this.vd = t, this.ht = e, this.Lh();
            }
        }, {
            key: "beforRemove",
            value: function() {
                var t = null == (t = this.parent) || null == (t = t.parent) ? void 0 : t.parent;
                this.wd = !t || !t.visibleLevels.includes(this.level);
            }
        }, {
            key: "getBound",
            value: function() {
                if (this.dd) return this.dd;
                var t = {};
                if (this.xi) {
                    for (var e = (s = new tm(this.xi, 16776960)).geometry.attributes.position.array, n = s.geometry.attributes.position.count, r = 0; r < n; r++) {
                        var i = e[3 * r], o = e[3 * r + 2], a = e[3 * r + 1];
                        (!t.minX || i < t.minX) && (t.minX = i), (!t.maxX || t.maxX < i) && (t.maxX = i), 
                        (!t.minY || o < t.minY) && (t.minY = o), (!t.maxY || t.maxY < o) && (t.maxY = o), 
                        (!t.minH || a < t.minH) && (t.minH = a), (!t.maxH || t.maxH < a) && (t.maxH = a);
                    }
                    s.material.dispose(), s.geometry.dispose(), s.material = void 0, s.geometry = void 0;
                    var s = this.Zi(vx);
                    return t.minX = t.minX + s.x, t.maxX = t.maxX + s.x, t.minY = s.y - t.minY, t.maxY = s.y - t.maxY, 
                    t.maxY < t.minY && (s = t.minY, t.minY = t.maxY, t.maxY = s), this.dd = t, this.dd;
                }
            }
        }, {
            key: "startAction",
            value: function(t, e, n) {
                var r = this.ml[t];
                if (r) {
                    if (e) {
                        for (var i = this.getActionNames(), o = 0; o < i.length; o++) i[o] !== t && !0 === this.ml[i[o]].clampWhenFinished && !0 === this.ml[i[o]].paused && this.ml[i[o]].stop();
                        r.loop = 2200, r.clampWhenFinished = !0;
                    } else r.clampWhenFinished = !1, r.loop = 2201;
                    this._d && this._d === t ? this._d === t && (e = !1, r.time = this.Sd, n ? this.xd ? e = !0 : (e = !1, 
                    this._d = null, this.Sd = null) : (this._d = null, this.Sd = null, this.xd = !1), 
                    r.paused = e, r.play()) : r.reset().setEffectiveTimeScale(1).setEffectiveWeight(1).play();
                }
                (n = this.Zi(vx)) && n.on("beforeRender", this.md);
            }
        }, {
            key: "getActionNames",
            value: function() {
                return Object.keys(this.ml);
            }
        }, {
            key: "stopAction",
            value: function(t, e) {
                var n;
                (n = ((n = this.Zi(vx)) && n.off("beforeRender", this.md), this.ml[t])) && (n.paused = !0, 
                this._d = t, this.Sd = n.time, this.Ed = n.loop, e || (this.xd = !0));
            }
        }, {
            key: "dispose",
            value: function() {
                null !== this.gd && this.gd.dispose(), this.xh(), Mm(Tm(n.prototype), "dispose", this).call(this);
            }
        }, {
            key: "getTextureNames",
            value: function() {
                return this.Xl;
            }
        } ]) && _m(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }();
    var Am = (Object.assign(Wy.prototype, {
        lc: function(t) {
            var e = this;
            this.wd = !1, !this.xi && this.B && this.jd(function() {
                e.Cf && e.Cf.lc(e), t && t();
            }, {
                initLODMesh: !0
            });
        },
        ad: function() {
            var t = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {
                needFadeIn: !0,
                needFadeOut: !0,
                initLODMesh: !0
            };
            this.xi && this.Bt.xo.remove(this.xi), this.xi = null, this.jd(null, t);
        },
        ud: function() {
            var t = this, e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {
                needFadeIn: !0,
                needFadeOut: !0,
                initLODMesh: !1
            };
            this.jd(function(n) {
                e.onLoaded = function() {
                    t.xi && t.Bt.xo.remove(t.xi), t.xi = null;
                }, t.Ld(n, function() {
                    e.callback && e.callback(e.lodName);
                }, e);
            }, e);
        },
        jh: function() {
            this.ad();
        },
        Ld: function(t, e) {
            var n = this, r = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : {}, i = this.Zi(vx), o = i.ui.kd.Ma(t, function(t, o, a) {
                n.Rl = t, r.onLoaded && r.onLoaded(), n.Rl ? n.Ad(o, r) : n.Rd(o, a, n.Mh), jt.a.environment === Ut.a.BROWSER && null === n.gd && (n.gd = new dm(n)), 
                i.enableUpdateRender(), e && e();
            });
            o && i.Cd.add(t, o);
        },
        jd: function(t, e) {
            var n, r = this, i = (e = e || {}, this.Zi(vx)), o = this.Zi(Gn);
            this.Mh = i.ui.Th.kc({
                fid: this.B.fid,
                typeID: this.B.type + "",
                bid: o.Ae
            }), this.Mh && this.Mh.normalID && (n = i.ui.Nd(this.Mh, "model", o.buildingID) + this.Mh.model + "?keyValue=" + i.ze.key, 
            null === this.Jl && (this.Jl = i.ui.Nd(this.Mh, "model", o.buildingID)), n.includes(".json") ? (this.Pd || (this.Pd = new bm(i, this)), 
            this.Pd.hd(n).then(function(n) {
                !1 !== e.initLODMesh ? r.Ld(n, t, e) : t && t(n);
            })) : this.Ld(n, t));
        },
        Dd: function(t, e) {
            this.pd && void 0 !== t.userData.originColor && (this.vd = t.userData.originColor, 
            t.color = t.userData.originColor, void 0 !== t.userData.originOpacity) && (t.opacity = t.userData.originOpacity * e.ht, 
            this.ht = t.userData.originOpacity);
        },
        Rd: function(t, e, n) {
            if (!this.xi) {
                var r = this.Zi(Db);
                if (r) {
                    var i = r.Zi(vx);
                    if (Array.isArray(e)) {
                        var o, a = wm(e);
                        try {
                            for (a.s(); !(o = a.n()).done; ) {
                                var s = o.value;
                                s.map && (s.map.wrapS = pt, s.map.wrapT = pt), s.userData.sourceTransparent = s.transparent, 
                                s.userData.sourceOpacity = s.opacity, void 0 === s.userData.originColor && (s.userData.originColor = s.color), 
                                void 0 === s.userData.originOpacity && (s.userData.originOpacity = s.opacity), s.opacity = s.userData.sourceOpacity * r.ht, 
                                s.opacity < 1 && (s.transparent = !0);
                            }
                        } catch (t) {
                            a.e(t);
                        } finally {
                            a.f();
                        }
                    } else e.map && (e.map.wrapS = pt, e.map.wrapT = pt), e.userData.sourceOpacity = e.opacity, 
                    e.userData.sourceTransparent = e.transparent, void 0 === e.userData.originColor && (e.userData.originColor = e.color), 
                    void 0 === e.userData.originOpacity && (e.userData.originOpacity = e.opacity), e.opacity = e.userData.sourceOpacity * r.ht, 
                    e.opacity < 1 && (e.transparent = !0);
                    var l = [];
                    if (void 0 !== e.length) for (var u = 0; u < e.length; u++) {
                        var c = e[u].clone();
                        this.vd && (c.color = new Xt(this.vd)), null !== this.ht && (c.opacity = this.ht), 
                        this.Dd(c, r), l.push(c);
                    } else {
                        var f = e.clone();
                        this.vd && (f.color = new Xt(this.vd)), null !== this.ht && (f.opacity = this.ht), 
                        this.Dd(f, r), l.push(f);
                    }
                    if (this.pd = !1, !this.Md) {
                        for (var p = 0; p < l.length; p++) l[p].map && this.Xl.push(l[p].name);
                        this.Md = !0;
                    }
                    this.xi = new mi(t, l), this.Or && this.Lh(), this.Cf || this.Od();
                    f = n.scale.split(","), t = (this.xi.scale.set(parseFloat(f[0]), parseFloat(f[2]), parseFloat(f[1])), 
                    n.rotate.split(",")), f = new h();
                    var d = Math.PI / 180;
                    t = (f.set(parseFloat(t[0]) * d, parseFloat(t[2]) * d, parseFloat(t[1]) * d), this.xi.rotation.setFromVector3(f, "YXZ"), 
                    n.translate.split(","));
                    (d = new h(this.B.Ce[0].x - i._t, this.B.Ce[0].y - i.St, 0).applyEuler(new _(-Math.PI / 2, 0, 0, "XYZ")).add(new h(0, -1 === this.B.height ? 2.2 : this.B.height, 0))).add(new h(parseFloat(t[0]), parseFloat(t[2]), parseFloat(t[1]))), 
                    this.xi.position.set(d.x, d.y, d.z), (this.xi.mapNode = this).Bt.xo.add(this.xi);
                }
            }
        },
        Ad: function(t, e) {
            var n = this, r = this;
            if (e = e || {}, !this.xi) {
                var i = this.Zi(vx);
                if (i) {
                    var o = t.scene, a = this.Mh.rotate.split(","), s = new h(), l = Math.PI / 180;
                    a = (s.set(parseFloat(a[0]) * l, parseFloat(a[2]) * l, parseFloat(a[1]) * l), o.rotation.setFromVector3(s, "YXZ"), 
                    this.Mh.scale.split(",")), l = (o.scale.set(parseFloat(a[0]), parseFloat(a[2]), parseFloat(a[1])), 
                    this.Mh.translate.split(","));
                    if ((s = new h(this.B.Ce[0].x - i._t, this.B.Ce[0].y - i.St, 0).applyEuler(new _(-Math.PI / 2, 0, 0, "XYZ")).add(new h(0, -1 === this.B.height ? 2.2 : this.B.height, 0))).add(new h(parseFloat(l[0]), parseFloat(l[2]), parseFloat(l[1]))), 
                    o.position.set(s.x, s.y, s.z), this.xi = o, (this.xi.mapNode = this).Md || (function t(e) {
                        "Mesh" === e.type && e.material.map && r.Xl.push(e.material.map.name);
                        for (var n = e.children, i = 0; i < n.length; i++) t(n[i]);
                    }(this.xi), this.Md = !0), this.Lh(), this.Id(function() {
                        n.Bt.xo.add(n.xi), n.Yi && (n.xi.visible = !0), n.Cf || n.jr || n.Od({
                            duration: !1 === e.needFadeIn ? 0 : void 0
                        });
                    }), 0 < t.animations.length) {
                        this.Ah = new rm(this.xi);
                        var u, c = wm(t.animations);
                        try {
                            for (c.s(); !(u = c.n()).done; ) {
                                var f = u.value;
                                this.ml[f.name] = this.Ah.clipAction(f);
                            }
                        } catch (t) {
                            c.e(t);
                        } finally {
                            c.f();
                        }
                        (a = this.Zi(vx)).Oi.Fd(this.Ah), a.ze.autoPlay && (i = !1, null !== this.Ed && 2200 === this.Ed && (i = !0), 
                        this.startAction(this.getActionNames()[0], i, !0));
                    }
                }
            }
        },
        Id: function(t) {
            var e = [], n = null;
            this.jr ? (function t(n) {
                "Mesh" === n.type && e.push(n);
                for (var r = n.children, i = 0; i < r.length; i++) t(r[i]);
            }(this.xi), function r() {
                for (var i = !0, o = 0; o < e.length; o++) if (!e[o].isUpdateComplete) {
                    i = !1;
                    break;
                }
                i ? (t && t(), null !== n && clearTimeout(n)) : n = setTimeout(r, 10);
            }()) : t && t();
        },
        Lr: function(t) {
            var e = this.Zi(vx), n = this.Zi(Db);
            return (e = e.getMapOptions().materialMode === In.REAL ? (n = this.Dr(t, n), e.ui.Fr.Cu(n)) : t.clone()).userData = t.userData, 
            e;
        },
        Gd: function() {
            var t = this, e = [], n = this.xi;
            if (this.Rl) this.xi.traverse(function(n) {
                if ("Mesh" === n.type) if (n.userData.sourceMaterial || (n.userData.sourceMaterial = n.material), 
                Array.isArray(n.material)) {
                    for (var r = [], i = 0; i < n.material.length; i++) {
                        var o = t.Lr(n.material[i]);
                        o.transparent = !0, r.push(o);
                    }
                    n.material = r, e = e.concat(r);
                } else {
                    var a = t.Lr(n.material);
                    a.transparent = !0, n.material = a, e.push(a);
                }
            }); else if (n.userData.sourceMaterial || (n.userData.sourceMaterial = n.material), 
            Array.isArray(this.xi.material)) {
                for (var r = [], i = 0; i < this.xi.material.length; i++) {
                    var o = this.xi.material[i];
                    o.transparent = !0, r.push(o.clone());
                }
                this.xi.material = r, e = e.concat(r);
            } else (n = this.xi.material.clone()).transparent = !0, e.push(n), this.xi.material = n;
            return e;
        },
        Ud: function() {
            function t(t) {
                var e;
                t && t.userData.sourceMaterial && (e = t.material, t.material = t.userData.sourceMaterial, 
                delete t.userData.sourceMaterial, Array.isArray(e) ? e.forEach(function(t) {
                    t.dispose();
                }) : e.dispose());
            }
            var e = this.xi;
            this.Rl && e ? this.xi.traverse(function(e) {
                "Mesh" === e.type && t(e);
            }) : t(e), this.Lh();
        },
        Od: function(t) {
            var e = this, n = (t = void 0 !== (t = t || {}).duration ? t.duration : .5, this.Zi(Db)), r = n.Zi(vx);
            if (this.yd && !1 === this.yd.qt) {
                if (this.bd) return;
                this.yd.stop();
            }
            this.bd = !0;
            var i = this.Gd();
            this.yd.nn([ 0 ]).en([ 1 ]).rn(t).an(function(t) {
                for (var o = t.destination[0], a = 0; a < i.length; a++) {
                    var s = i[a], l = void 0 !== e.ht ? e.ht : s.userData.sourceOpacity;
                    e.Rl && r.getMapOptions().materialMode === In.REAL ? s.uniforms.opacity.value = o * l * n.ht : s.opacity = o * l * n.ht;
                }
                r.enableUpdateRender();
            }).un(function() {
                r.Oi.Ai(e.yd), e.Ud();
            }), r.Oi.Si(this.yd.play());
        },
        Td: function(t) {
            var e = this, n = void 0 !== (t = t || {}).duration ? t.duration : .5, r = this.Zi(Db), i = r.Zi(vx);
            if (this.yd && !1 === this.yd.qt) {
                if (!this.bd) return;
                this.yd.stop();
            }
            this.bd = !1;
            var o = this.Gd();
            this.yd.nn([ 1 ]).en([ 0 ]).rn(n).an(function(t) {
                for (var n = t.destination[0], a = 0; a < o.length; a++) {
                    var s = void 0 !== e.ht ? e.ht : o[a].userData.sourceOpacity;
                    e.Rl && i.getMapOptions().materialMode === In.REAL ? o[a].uniforms.opacity.value = n * s * r.ht : o[a].opacity = n * s * r.ht;
                }
                i.enableUpdateRender();
            }).un(function() {
                i.Oi.Ai(e.yd), e.xh(), i.enableUpdateNode(), t.finish && t.finish();
            }), i.Oi.Si(this.yd.play());
        },
        Bd: function(t, e) {
            e = this.Dr(t, e), t.color = new Xt(e.color), t.opacity = e.opacity, t.transparent = e.transparent;
        },
        Lh: function() {
            var t = this;
            if (this.xi) {
                var e = this.Zi(vx), n = this.Zi(Db);
                if (e) {
                    if (this.Rl) this.xi.traverse(function(r) {
                        if ("Mesh" === r.type) {
                            var i = t.Dr(r.material, n);
                            if (e.ze.materialMode === In.REAL) {
                                var o = null;
                                t.jr ? (o = e.ui.Fr.Cu(i), t.Hd(o)) : o = e.ui.Fr.Ir(i), o.userData = r.material.userData, 
                                r.material = o, t.Or && (i.color = t.Or, (o = e.ui.Fr.Ir(i)).userData = r.material.userData, 
                                t.jr && t.Hd(o), r.userData.sourceMaterial = r.material, r.material = o);
                            } else if (Array.isArray(r.material.length)) for (var a = 0; a < r.material.length; a++) r.material[a].depthWrite = !0, 
                            r.material[a] = e.ui.Fr.Gr(r.material[a], i), t.Or && (i.color = t.Or, r.userData.sourceMaterial = r.material, 
                            r.material[a] = e.ui.Fr.Gr(r.material[a], i)); else r.material.depthWrite = !0, 
                            r.material = e.ui.Fr.Gr(r.material, i), t.Or && (i.color = t.Or, r.userData.sourceMaterial = r.material, 
                            r.material = e.ui.Fr.Gr(r.material, i));
                            t.jr && (r.isUpdateComplete = !0);
                        }
                    }); else {
                        var r = this.xi.material;
                        if (Array.isArray(r)) {
                            var i, o = [], a = wm(r);
                            try {
                                for (a.s(); !(i = a.n()).done; ) {
                                    var s, l = i.value;
                                    this.Bd(l, n), this.Or && ((s = l.clone()).color = new Xt(this.Or), o.push(s));
                                }
                            } catch (r) {
                                a.e(r);
                            } finally {
                                a.f();
                            }
                            this.Or && (this.xi.userData.sourceMaterial = this.xi.material, this.xi.material = o);
                        } else this.Bd(r, n), this.Or && ((r = r.clone()).color = new Xt(this.Or), this.xi.userData.sourceMaterial = this.xi.material, 
                        this.xi.material = r);
                    }
                    this.pd && (this.pd = !1), e.enableUpdateRender();
                }
            }
        },
        Hd: function(t) {
            t.uniforms.isMask.value = !0, t.uniforms.maskType.value = this.kr, t.uniforms.maskTexture.value = this.Ar, 
            void 0 !== this.Rr && void 0 !== this.Cr && (t.uniforms.maskHeight.value = this.Rr, 
            t.uniforms.maskExtrudeHeight.value = this.Cr), t.uniforms.boundCenter.value = this.Nr, 
            t.uniforms.boundSize.value = this.Pr, t.uniformsNeedUpdate = !0;
        },
        Dr: function(t, e) {
            var n = {}, r = (this.Zi(vx).ze.materialMode === In.REAL ? (t.constructor === ec ? (t.userData.sourceOpacity = t.opacity, 
            t.userData.sourceTransparent = t.transparent, void 0 === t.userData.originColor && (t.userData.originColor = t.color), 
            void 0 === t.userData.originOpacity && (t.userData.originOpacity = t.opacity), null === this.ht && (this.ht = t.opacity), 
            n = {
                alphaTest: t.alphaTest,
                color: t.color.getHex(),
                USE_EMISSIVEMAP: !!t.emissiveMap,
                USE_METALNESSMAP: !!t.metalnessMap,
                USE_NORMALMAP: !!t.normalMap,
                TANGENTSPACE_NORMALMAP: !!t.normalMap,
                USE_ROUGHNESSMAP: !!t.roughnessMap,
                USE_MAP: !!t.map,
                USE_AOMAP: !!t.aoMap,
                map: i(t.map, null),
                aoMap: i(t.aoMap, null),
                emissive: t.emissive.getHex(),
                emissiveMap: i(t.emissiveMap, null),
                metalness: i(t.metalness, 0),
                metalnessMap: i(t.metalnessMap, null),
                roughness: i(t.roughness, 1),
                roughnessMap: i(t.roughnessMap, null),
                normalScale: i(t.normalScale, new Mt(1, 1)),
                normalMap: i(t.normalMap, null),
                vertexColors: t.vertexColors,
                side: t.side,
                skinning: t.skinning
            }) : t.constructor === wu && (n = {
                alphaTest: t.alphaTest,
                USE_EMISSIVEMAP: t.defines.USE_EMISSIVEMAP,
                USE_MAP: t.defines.USE_MAP,
                USE_AOMAP: t.defines.USE_AOMAP,
                USE_METALNESSMAP: t.defines.USE_METALNESSMAP,
                USE_NORMALMAP: t.defines.USE_NORMALMAP,
                TANGENTSPACE_NORMALMAP: t.defines.TANGENTSPACE_NORMALMAP,
                USE_ROUGHNESSMAP: t.defines.USE_ROUGHNESSMAP,
                aoMap: i(t.uniforms.aoMap.value, null),
                map: i(t.uniforms.map.value, null),
                color: t.uniforms.diffuse.value.getHex(),
                emissive: t.uniforms.emissive.value.getHex(),
                emissiveMap: i(t.uniforms.emissiveMap.value, null),
                metalness: i(t.uniforms.metalness.value, 0),
                metalnessMap: i(t.uniforms.metalnessMap.value, null),
                roughness: i(t.uniforms.roughness.value, 1),
                roughnessMap: i(t.uniforms.roughnessMap.value, null),
                normalScale: i(t.uniforms.normalScale.value, new Mt(1, 1)),
                normalMap: i(t.uniforms.normalMap.value, null),
                vertexColors: t.vertexColors,
                side: t.side,
                skinning: t.skinning
            }, void 0 === t.userData.originColor && (t.userData.originColor = t.uniforms.diffuse.value), 
            void 0 === t.userData.originOpacity && (t.userData.originOpacity = t.uniforms.opacity.value), 
            null === this.ht) && (this.ht = t.uniforms.opacity.value), null === this.vd && (this.vd = n.color)) : (void 0 === t.userData.sourceOpacity && (t.userData.sourceOpacity = t.opacity), 
            void 0 === t.userData.sourceTransparent && (t.userData.sourceTransparent = t.transparent), 
            void 0 === t.userData.originColor && (t.userData.originColor = t.color), void 0 === t.userData.originOpacity && (t.userData.originOpacity = t.opacity), 
            null === this.vd && (this.vd = t.color), null === this.ht && (this.ht = t.opacity)), 
            this.vd && (n.color = this.vd), void 0 !== t.userData.sourceOpacity ? t.userData.sourceOpacity : t.opacity);
            return null !== this.ht && (r = this.ht), this.Dd(t, e), n.opacity = r * e.ht, n.transparent = t.userData.sourceTransparent || n.opacity < 1, 
            n;
            function i(t, e) {
                return void 0 !== t ? t : e;
            }
        },
        xh: function() {
            var t;
            if (this.Ah && (this.stopAction(this.getActionNames()[0], !0), (t = this.Zi(vx)) && t.Oi.zd(this.Ah), 
            this.Ah = null), this.yd && !1 === this.yd.qt && this.yd.finish(), this.xi && "Mesh" === this.xi.type) {
                if (this.xi.parent && this.xi.parent.remove(this.xi), Array.isArray(this.xi.material)) {
                    var e, n = wm(this.xi.material);
                    try {
                        for (n.s(); !(e = n.n()).done; ) {
                            var r = e.value;
                            r.map && this.wd && r.map.dispose(), r.dispose();
                        }
                    } catch (t) {
                        n.e(t);
                    } finally {
                        n.f();
                    }
                } else this.xi.material.map && this.wd && this.xi.material.map.dispose(), this.xi.material.dispose();
                this.xi.geometry.dispose(), this.xi.geometry = void 0, this.xi.material = void 0, 
                this.xi.mapNode = void 0, this.xi = void 0;
            } else this.xi && "Scene" === this.xi.type && (this.xi.parent && this.xi.parent.remove(this.xi), 
            this.xi.mapNode = void 0, this.xi = void 0);
        },
        md: function() {
            var t = this.Zi(vx);
            t && t.enableUpdateRender();
        }
    }), Wy);
    function Pm(t) {
        return (Pm = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Rm(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Pm(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Pm(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Pm(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function jm(t, e, n) {
        e = Im(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], Im(t).constructor) : e.apply(t, n)) && ("object" === Pm(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function Im(t) {
        return (Im = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function Dm(t, e) {
        return (Dm = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    Wy = function() {
        var t = n, e = Yy;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t) {
            var e;
            if (this instanceof n) return (e = jm(this, n)).B = t, e.nt = t.height, e.Re = Ct.FACILITY, 
            e.Ro = 0, e.Vd = null, e.Ie = new Map(), e.Mh = null, e;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && Dm(t, e), t = n, (e = [ {
            key: "FID",
            get: function() {
                return this.B.fid;
            }
        }, {
            key: "typeID",
            get: function() {
                return this.B.type;
            }
        }, {
            key: "eName",
            get: function() {
                return this.B.ename;
            }
        }, {
            key: "name",
            get: function() {
                return this.B.name;
            }
        }, {
            key: "size",
            get: function() {
                return this.Vd || this.Mh.height;
            },
            set: function(t) {
                var e;
                this.Vd = t, this.Vd ? this.Ro = this.Vd : (t = this.Zi(vx), e = this.Zi(Gn), this.Mh = t.ui.Th.jc({
                    fid: this.B.fid,
                    typeID: "" + this.B.type,
                    bid: e.Ae
                }), this.Ro = this.Mh.height), this.Lh();
            }
        }, {
            key: "scaleSize",
            get: function() {
                return this.size / this.Ro || 1;
            }
        }, {
            key: "jump",
            value: function(t) {
                return hd(this, t);
            }
        }, {
            key: "stopJump",
            value: function() {
                return fd(this);
            }
        }, {
            key: "boost",
            value: function(t) {
                return ud(this, t);
            }
        }, {
            key: "stopBoost",
            value: function() {
                return cd(this);
            }
        }, {
            key: "getPosition",
            value: function() {
                return {
                    x: this.B.Ce[0].x,
                    y: this.B.Ce[0].y,
                    z: this.nt
                };
            }
        }, {
            key: "updateMaterialByThemeTool",
            value: function(t) {
                this.Mh = t, this.Ro = parseInt(this.Mh.height), this.Vd && (this.Ro = this.Vd), 
                this.Lh(), this.xi.userData.size = this.Ro;
            }
        } ]) && Rm(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }();
    var km = (Object.assign(Wy.prototype, {
        lc: function() {
            var t, e;
            if (!this.xi) return t = this.Zi(vx), e = this.Zi(Gn), this.Mh = t.ui.Th.jc({
                fid: this.B.fid,
                typeID: "" + this.B.type,
                bid: e.Ae
            }), this.Ro = parseInt(this.Mh.height), (e = this.Tr(t)).userData.opacity = e.opacity, 
            this.xi = new Lp(e), e = new h((e = this.B.Ce[0]).x - t._t, -e.y + t.St, 0).applyEuler(new _(Math.PI / 2, 0, 0, "XYZ")).add(new h(0, this.nt, 0)), 
            this.xi.position.copy(e), this.Co(t.ui), this.xi.userData.size = this.Ro, (this.xi.mapNode = this).Bt.xo.add(this.xi), 
            !0;
        },
        jh: function(t, e) {
            var n;
            this.xi && (n = this.Zi(Gn), this.Mh = e.jc({
                fid: this.B.fid,
                typeID: "" + this.B.type,
                bid: n.Ae
            }), this.Ro = parseInt(this.Mh.height), this.Lh(), this.xi.userData.size = this.Ro);
        },
        Lh: function() {
            var t;
            this.xi && (t = this.Zi(vx)) && (this.xi.material = this.Tr(t));
        },
        Tr: function(t) {
            var e = this, n = this.Zi(Db), r = n.parent;
            return t.ui.Fr.zu({
                opacity: n.ht,
                needDepth: !1,
                url: t.ui.Nd(this.Mh, "path", r.buildingID) + this.Mh.imageName
            }, function() {
                e.Co(t.ui), t.ui.Xo(), t.enableUpdateRender();
            });
        },
        Co: function(t) {
            pd(t, this);
        }
    }), Wy);
    function Cm(t) {
        return (Cm = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Nm(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Cm(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Cm(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Cm(t) ? t : String(t);
            }(r.key), r);
        }
    }
    Wy = function() {
        function t(e) {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
            this.Wd = e, this.Yd = 0, this.Xd = "", e = this.Wd.parent.parent.Zd(this.Wd.FID), 
            this.qd = e.getArea(), this.Jd = ld.maxInnerRect(e.B.Ce[0]);
        }
        var e, n;
        return e = t, (n = [ {
            key: "renderNode",
            get: function() {
                return this.Kd;
            }
        } ]) && Nm(e.prototype, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }();
    var Fm = (Object.assign(Wy.prototype, {
        tn: function() {
            this.Kd && (this.Jd = null, this.Kd = null);
        },
        Qd: function(t) {
            var e = this.Jd, n = e.size.x, r = e.size.y;
            return n <= 0 || r <= 0 ? {
                x: 1,
                y: 1
            } : (n / r < (t = t.width / t.height) ? r = n / t : n = r * t, {
                x: n / e.size.x,
                y: r / e.size.y
            });
        },
        lc: function(t) {
            var e;
            "MeshBasicMaterial" === t.type && 0 < this.Wd.$d.length && (e = new Dr(this.Jd.size.x, this.Jd.size.y, 1, 1), 
            this.Kd = new mi(e, t), this.Kd.renderOrder = 10, this.Yd = 0, this.tv = this.Wd.B.xe.center, 
            this.Kd.rotation.set(-Math.PI / 2, 0, 0, "XYZ"), this.nv(t));
        },
        nv: function(t) {
            var e, n;
            this.Kd && t && "MeshBasicMaterial" === t.type && t.map && (this.Kd.material = t, 
            e = this.Wd.Mh, t = this.Qd(t.map.image), e.sizes && (n = e.sizes.split(","), t = {
                x: t.x * parseFloat(n[0]),
                y: t.y * parseFloat(n[1])
            }), n = void 0 !== e.angle ? e.angle : 0, this.Kd.scale.set(t.x, t.y, 1), this.Kd.rotation.z = -n * Math.PI / 180, 
            t = this.Wd.jt, n = [ this.Jd.center.x - t.x, t.y - this.Jd.center.y ], e.coords && (e = e.coords.split(","), 
            n = [ parseFloat(e[0]) - t.x, t.y - parseFloat(e[1]) ]), null != (t = this.Wd)) && null != (t = t.xi) && t.position.set(n[0], this.Wd.B.height + .01, n[1]);
        }
    }), Wy), Bm = Object.freeze({
        Cubic: Object.freeze({
            In: function(t) {
                return t * t * t;
            },
            Out: function(t) {
                return --t * t * t + 1;
            },
            InOut: function(t) {
                return (t *= 2) < 1 ? .5 * t * t * t : .5 * ((t -= 2) * t * t + 2);
            }
        })
    });
    function Um(t) {
        return (Um = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function zm(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Um(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Um(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Um(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function Gm(t, e, n) {
        e = Hm(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], Hm(t).constructor) : e.apply(t, n)) && ("object" === Um(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        return Vm(r);
    }
    function Hm(t) {
        return (Hm = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function Vm(t) {
        if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return t;
    }
    function Wm(t, e) {
        return (Wm = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    Wy = function() {
        var t = n, e = Yy;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t, e) {
            var r;
            if (this instanceof n) return (r = Gm(this, n)).B = t, r.jt = e, r.Re = Ct.LABEL, 
            r.Mh = null, r.ev = null, r.Bo = !1, r.Cf = null, e.Ct.iv === Hp.ENAME ? r.$d = t.ename : e.Ct.iv === Hp.FID ? r.$d = t.fid : r.$d = t.name, 
            r.$d || (r.$d = "", r.Bo = !0), r.rv = e.ze.HDText, !0 === r.rv && jt.a.environment === Ut.a.BROWSER && (r.ov = new jt.a.LabelCollection(), 
            r.Wd = null), r.sv = null, r.av = !0, r.cv = !0, r.fv = !0, r.hv = !0, r.lv = !0, 
            r.dv = !0, r.vv = {
                show: !0,
                state: 0
            }, r.Uo = r.jt.getMapOptions().labelFade, r.xh = r.xh.bind(Vm(r)), r.pv = new ne(), 
            r;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && Wm(t, e), t = n, (e = [ {
            key: "FID",
            get: function() {
                return this.B.fid;
            }
        }, {
            key: "typeID",
            get: function() {
                return this.B.type;
            }
        }, {
            key: "name",
            get: function() {
                return this.B.name;
            }
        }, {
            key: "eName",
            get: function() {
                return this.B.ename;
            }
        }, {
            key: "text",
            get: function() {
                return this.$d;
            },
            set: function(t) {
                t ? (this.$d = t, this.Bo = !1) : (this.$d = "", this.Bo = !0), this.xi && (this.Lh(), 
                this.xf()), this.lv = !0, this.dv = !0;
            }
        }, {
            key: "fontSize",
            get: function() {
                return this.sv || this.Mh.fontsize;
            },
            set: function(t) {
                this.sv = t, this.sv ? this.Mh.fontsize = this.sv : this.mv(this.jt.ui, this.jt.ui.Th), 
                this.xi && this.Lh(), this.lv = !0, this.dv = !0;
            }
        }, {
            key: "setText",
            value: function(t) {
                this.text = t;
            }
        }, {
            key: "fading",
            get: function() {
                return !this.pv.qt;
            }
        }, {
            key: "initTargetShow",
            get: function() {
                return this.cv;
            },
            set: function(t) {
                t !== this.cv && (this.cv = t, this.dv = !0);
            }
        }, {
            key: "collisionTargetShow",
            get: function() {
                return this.hv;
            },
            set: function(t) {
                t !== this.hv && (this.hv = t, this.lv = !0);
            }
        } ]) && zm(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }();
    var Ym = (Object.assign(Wy.prototype, {
        zo: function() {
            var t, e;
            !this.Uo || !0 === this.jt.It.mo && !0 === this.dv && 1 == (0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : 0) || !1 === this.dv && 0 == this.lv || (e = null, 
            this.cv && this.hv ? e = this.yv(0, 1) : !1 === this.fv && !0 === this.av && 1 == this.vv.show && 0 === this.vv.state ? e = this.yv(0, 0) : (1 == this.av && !1 === this.hv || !1 === this.cv && !0 === this.fv) && (t = this.dv ? this.xh : null, 
            e = this.yv(1, 0, t)), e && (this.dv && (this.dv = !1, this.av = this.cv), this.lv) && (this.lv = !1, 
            this.fv = this.hv));
        },
        bv: function(t) {
            var e = this;
            return this.fontSize = t, new Promise(function(t) {
                !1 === e.rv && t(), e.readyCallback = t;
            });
        },
        gv: function() {
            var t = this;
            return new Promise(function(e) {
                !1 === t.rv || t.rv && t.xi && 1 < t.xi.children.length ? e() : t.readyCallback = e;
            });
        },
        wv: function(t, e) {
            var n, r, i, o, a = this;
            t && e && (this.ov || (this.ov = new jt.a.LabelCollection(), this.Wd = null), n = e.width, 
            r = e.drawTextWidth, i = e.drawTextLeft, e = this.fontSize, this.ov.map = t, this.Wd ? (o = this.Wd).labelMeshInstance && (this.xi.remove(o.labelMeshInstance.mesh), 
            this.xi.remove(o.labelOutlineMeshInstance.mesh)) : (o = this.ov.add(), this.Wd = o), 
            o._v = !0, o.Sv = [], o.xv = !0, o.rootNode = this.xi, o.text = this.$d, o.font = "".concat(e, "px ").concat(this.Mh.fontFamily || '"Microsoft Yahei","",Tahoma,Arial'), 
            o.Ev = $t.rgbToArray(this.Mh.fillColor), o.outlineWidth = void 0 !== this.Mh.strokeWidth ? 2 * this.Mh.strokeWidth : 4, 
            o.outlineColor = $t.rgbToArray(this.Mh.strokeColor), o.pixelRatio = t.It.renderer.getPixelRatio(), 
            this.Mv = e = function e() {
                a.ov.update(), !1 === o._v && (o.pixelOffset = [ (i + r / 2 - n / 2) / 2 / 1.2, 0 ], 
                t.enableUpdateRender(), t.off("update", e), a.readyCallback) && a.readyCallback();
            }, t.on("update", e), t.on("pixelRatioChanged", function() {
                o.pixelRatio = t.It.renderer.getPixelRatio();
            }));
        },
        Ov: function() {
            var t = this.Tr(), e = (t.userData.opacity = t.opacity, this.Tv && (this.Tv.tn(), 
            this.Tv = null), new Lp(t));
            e.scale.set(0, 0, 0), this.xi.add(e), this.Uo && (t.opacity = 0, this.hv = !1, this.zo(1)), 
            t = (e.mapNode = this).Zi(Db).Bt.Bt, e = new h((e = this.B.Ce[0]).x - t._t, -e.y + t.St, 0).applyEuler(new _(Math.PI / 2, 0, 0, "XYZ")).add(new h(0, this.B.height, 0)), 
            this.xi.position.copy(e);
        },
        initTopMesh: function() {
            this.Tv || (this.Tv = new Fm(this, this.jt));
            var t = this.Tr();
            t.userData.opacity = t.opacity, this.Tv.lc(t), this.Tv.renderNode && (this.Tv.renderNode.mapNode = this).xi.add(this.Tv.renderNode), 
            this.Uo && (this.hv = !0, t.opacity = 0, this.zo(1));
        },
        lc: function() {
            var t;
            this.xi || (t = this.Zi(Db).Bt.Bt, this.mv(this.jt.ui, t.ui.Th), this.xi = new ga(), 
            "1" === (this.xi.mapNode = this).Mh.mode ? (this.rv = !1, this.Wd && (this.Wd.labelMeshInstance && (this.xi.remove(this.Wd.labelMeshInstance.mesh), 
            this.xi.remove(this.Wd.labelOutlineMeshInstance.mesh)), this.Wd = null, t.off("update", this.Mv)), 
            0 < this.$d.length && this.initTopMesh()) : (this.rv = t.ze.HDText, this.Ov()), 
            this.Co(this.jt.ui), this.Bt.xo.add(this.xi), this.Cf && this.Cf.lc(this));
        },
        jh: function(t, e) {
            this.xi && (this.dv = !0, this.lv = !0, this.mv(t, e), this.Lh());
        },
        Lh: function() {
            var t, e, n = this;
            this.xi.children[0] && this.Zi(vx) && (t = "1" === this.Mh.mode ? "Mesh" : "Sprite", 
            "Mesh" === (e = this.xi.children[0].type) && "Mesh" != t || "Sprite" === e && "Sprite" != t ? (this.xh(), 
            this.lc()) : this.Tr(function(t) {
                var e;
                n.xi && (e = n.xi.children[0].material, n.xi.children[0].material = t, e.map && (e.map.dispose(), 
                e.map = null), e.dispose());
            }));
        },
        yv: function() {
            var t, e, n = this, r = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : 0, i = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : 1, o = 2 < arguments.length ? arguments[2] : void 0;
            return !this.xi || this.xi.children.length < 1 ? null : this.$d.length < 1 ? (this.xi.visible = !1, 
            null) : (t = this.Zi(Db), e = this.Mh.alpha * t.ht, this.jt.kt.controls.activeing ? (1 === i && (this.xi.visible = !0), 
            this.pv.stop(), 0 === r && 0 === i ? (this.xi.children.forEach(function(t) {
                t.material.opacity = 0;
            }), this.jt.enableUpdateRender()) : (this.vv.show = 1 == i, 1 === r ? r = e : 1 === i && (i = e), 
            this.vv.state = 0, this.pv.nn([ r ]).en([ i ]).rn(.2).an(function(t) {
                var e = t.destination[0];
                n.xi.children.forEach(function(t) {
                    t.material.opacity = e, n.jt.enableUpdateRender();
                }), t = Bm.Cubic.In(e / Math.max(r, i));
                n.Wd && (n.Wd.opacity = t);
            }).un(function() {
                n.vv.state = 1, o && o(n), n.jt.Oi.Ai(n.pv);
            }).$t(), this.jt.Oi.Si(this.pv))) : (this.xi.visible = 1 == i, this.xi.children.forEach(function(t) {
                t.material.opacity = e;
            }), this.Wd && (this.Wd.opacity = e), this.jt.enableUpdateRender()), 1);
        },
        Tr: function(t) {
            var e = this, n = this.Zi(Db), r = {
                scale: 2,
                needSize: !0,
                opacity: this.Mh.alpha * n.ht,
                drawText: !this.rv
            };
            this.Mh.image && (r.imageUrl = this.ev + this.Mh.image), n = this.jt.ui.Fr;
            return ("1" === this.Mh.mode ? n.Bu : n.Fu).bind(n)(this.$d, this.Mh, r, function(n) {
                t && t(n), e.xi && e.Co(e.jt.ui), void 0 !== r.imageUrl && e.jt.ui.Xo(), jt.a.environment === Ut.a.WX && e.jt.ui.Xo(), 
                e.Tv && e.Tv.nv(n), !0 === e.rv ? e.wv(e.jt, null == (n = n.map) ? void 0 : n.image) : e.readyCallback && e.readyCallback(), 
                e.zo(1), e.jt.enableUpdateRender();
            });
        },
        Co: function(t) {
            var e, n, r = this.xi.children[0];
            r && r.material.map && r.material.map.image && (e = r.material).userData.mspriteScale && (t = t.Wf(this.fontSize), 
            n = 2 * this.fontSize * 1.2, n = e.map.image.height / n, e.userData.mspriteScale = Math.max(n, e.userData.mspriteScale), 
            r.scale.set(t, t, t), r.scale.multiplyScalar(e.userData.mspriteScale), r.scale.setX(r.scale.x / e.userData.scaleRatio));
        },
        mv: function(t, e) {
            var n = this.Zi(Gn);
            this.Mh = e.Lc({
                fid: this.B.fid,
                typeID: this.B.type + "",
                bid: n.Ae
            }), this.sv && (this.Mh.fontsize = this.sv), this.ev = t.Nd(this.Mh, "path", n.buildingID), 
            e = parseInt(this.fontSize);
            isNaN(e);
        },
        updateMaterialByThemeTool: function(t) {
            this.Mh = t;
            var e = (t = this.Zi(Db).Bt).Bt.ui;
            this.ev = e.Nd(this.Mh, "path", t.buildingID), this.Lh();
        }
    }), Wy);
    function Xm(t) {
        return (Xm = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Zm(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Xm(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Xm(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Xm(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function qm(t, e, n) {
        e = Km(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], Km(t).constructor) : e.apply(t, n)) && ("object" === Xm(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function Km(t) {
        return (Km = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function Jm(t, e) {
        return (Jm = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    Wy = function() {
        var t = n, e = Cn;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t) {
            var e;
            if (this instanceof n) return (e = qm(this, n)).nt = void 0 !== (t = t || {}).height ? t.height : 1, 
            e._t = t.x, e.St = t.y, e.xi = null, e.Xf = !1, e._h = void 0, e.jv = t.userID, 
            void 0 === e.jv && (e.jv = "" + $t.generateUUID()), e;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && Jm(t, e), t = n, (e = [ {
            key: "userID",
            get: function() {
                return this.jv;
            },
            set: function(t) {
                this.jv = t;
            }
        }, {
            key: "isInit",
            get: function() {
                return this.Xf;
            },
            set: function(t) {
                this.Xf = t;
            }
        }, {
            key: "isbloom",
            get: function() {
                return this._h;
            },
            set: function(t) {
                this._h = t;
            }
        }, {
            key: "x",
            get: function() {
                return this._t;
            }
        }, {
            key: "y",
            get: function() {
                return this.St;
            }
        }, {
            key: "height",
            get: function() {
                return this.nt;
            },
            set: function(t) {
                this.nt = t, this.Lv();
            }
        }, {
            key: "level",
            get: function() {
                var t = this.Zi(Db);
                return t ? t.level : null;
            }
        }, {
            key: "visible",
            get: function() {
                return this.Yi;
            },
            set: function(t) {
                this.Yi = t, this.xi && (this.xi.visible = this.Yi, t = this.Zi(vx)) && t.enableUpdateRender();
            }
        }, {
            key: "opacity",
            get: function() {
                return this.ht;
            },
            set: function(t) {
                this.ht = t, this.xi && (this.xi.material.opacity = this.ht);
            }
        }, {
            key: "isMarker",
            get: function() {
                return !0;
            }
        }, {
            key: "bound",
            get: function() {
                var t = this;
                return [ Ct.IMAGE_MARKER, Ct.DOM_MARKER, Ct.DYNAMIC_MODEL_MARKER, Ct.LOCATION_MARKER, Ct.TEXT_MARKER ].find(function(e) {
                    return e === t.Re;
                }) ? !0 === this.needUpdateBound && (this.xe.reset(), void 0 !== this._t) && void 0 !== this.St && (this.xe.expandByCoords([ {
                    x: this._t,
                    y: this.St
                } ]), this.needUpdateBound = !1) : !0 === this.needUpdateBound && (this.xe.reset(), 
                this.xe.expandByCoords(this.Vf), this.needUpdateBound = !1), this.xe.clone();
            }
        }, {
            key: "addTo",
            value: function(t) {
                t.getOrCreateLayer(this.Re).add(this), this.xi && (null != (t = this.xi) && t.updateMatrixWorld(!0), 
                null != (t = this.xi)) && null != (t = t.parent) && t.updateMatrixWorld(!0);
            }
        }, {
            key: "remove",
            value: function() {
                var t = this.Zi(vx);
                this.Bt && this.Bt.remove(this), t && t.enableUpdateRender();
            }
        }, {
            key: "dispose",
            value: function() {
                var t = this;
                this.remove(), this.xi && (this.xi.traverse(function(e) {
                    e instanceof mi && (e.geometry.dispose(), e.geometry = void 0, Array.isArray(e.material) ? e.material.forEach(function(e) {
                        t.kv(e);
                    }) : t.kv(e.material)), "SkinnedMesh" === e.type && (e.skeleton.boneTexture && e.skeleton.boneTexture.dispose(), 
                    e.skeleton.dispose());
                }), this.xi.mapNode = void 0, this.xi = void 0), this.Xf = !1;
            }
        } ]) && Zm(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }();
    var Qm = (Object.assign(Wy.prototype, {
        kv: function(t) {
            if (t) {
                if (t instanceof wu) {
                    var e, n = t.uniforms;
                    for (e in n) n[e] && n[e].value instanceof Zn && n[e].value.dispose();
                    t.dispose();
                } else for (var r in t) t[r] && t[r] instanceof Zn && t[r].dispose();
                t.dispose();
            }
        },
        Av: function() {
            var t;
            void 0 !== this._t && void 0 !== this.St || (t = this.Zi(Db), this._t = t.center.x, 
            this.St = t.center.y);
        },
        lc: function() {
            return !1;
        },
        Lv: function() {}
    }), Wy);
    function $m() {
        Mr.call(this), this.type = "InstancedBufferGeometry", this.maxInstancedCount = void 0;
    }
    function tv(t, e, n) {
        Ta.call(this, t, e), this.meshPerAttribute = n || 1;
    }
    function ev(t) {
        Mr.call(this), this.type = "WireframeGeometry";
        var e, n, r, i, o, a, s = [], l = [ 0, 0 ], u = {}, c = [ "a", "b", "c" ];
        if (t && t.isGeometry) {
            for (var f = t.faces, p = 0, d = f.length; p < d; p++) for (var y = f[p], m = 0; m < 3; m++) i = y[c[m]], 
            o = y[c[(m + 1) % 3]], l[0] = Math.min(i, o), l[1] = Math.max(i, o), void 0 === u[a = l[0] + "," + l[1]] && (u[a] = {
                index1: l[0],
                index2: l[1]
            });
            for (a in u) w = t.vertices[(r = u[a]).index1], s.push(w.x, w.y, w.z), w = t.vertices[r.index2], 
            s.push(w.x, w.y, w.z);
        } else if (t && t.isBufferGeometry) {
            var v, g, b, x, w = new h();
            if (null !== t.index) {
                for (v = t.attributes.position, g = t.index, n = (b = (e = 0) === (b = t.groups).length ? [ {
                    start: 0,
                    count: g.count,
                    materialIndex: 0
                } ] : b).length; e < n; ++e) for (d = (p = (x = b[e]).start) + x.count; p < d; p += 3) for (m = 0; m < 3; m++) i = g.getX(p + m), 
                o = g.getX(p + (m + 1) % 3), l[0] = Math.min(i, o), l[1] = Math.max(i, o), void 0 === u[a = l[0] + "," + l[1]] && (u[a] = {
                    index1: l[0],
                    index2: l[1]
                });
                for (a in u) w.fromBufferAttribute(v, (r = u[a]).index1), s.push(w.x, w.y, w.z), 
                w.fromBufferAttribute(v, r.index2), s.push(w.x, w.y, w.z);
            } else for (p = 0, d = (v = t.attributes.position).count / 3; p < d; p++) for (m = 0; m < 3; m++) w.fromBufferAttribute(v, 3 * p + m), 
            s.push(w.x, w.y, w.z), w.fromBufferAttribute(v, 3 * p + (m + 1) % 3), s.push(w.x, w.y, w.z);
        }
        this.setAttribute("position", new yr(s, 3));
    }
    function nv(t) {
        return (nv = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function rv(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != nv(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != nv(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == nv(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function iv(t, e, n) {
        e = ov(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], ov(t).constructor) : e.apply(t, n)) && ("object" === nv(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function ov(t) {
        return (ov = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function av(t, e) {
        return (av = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    $m.prototype = Object.assign(Object.create(Mr.prototype), {
        constructor: $m,
        isInstancedBufferGeometry: !0,
        copy: function(t) {
            return Mr.prototype.copy.call(this, t), this.maxInstancedCount = t.maxInstancedCount, 
            this;
        },
        clone: function() {
            return new this.constructor().copy(this);
        }
    }), tv.prototype = Object.assign(Object.create(Ta.prototype), {
        constructor: tv,
        isInstancedInterleavedBuffer: !0,
        copy: function(t) {
            return Ta.prototype.copy.call(this, t), this.meshPerAttribute = t.meshPerAttribute, 
            this;
        }
    }), (ev.prototype = Object.create(Mr.prototype)).constructor = ev;
    var sv = function() {
        var t = n, e = $m;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n() {
            var t;
            if (!(this instanceof n)) throw new TypeError("Cannot call a class as a function");
            return (t = iv(this, n)).type = "LineSegmentsGeometry", t.isLineSegmentsGeometry = !0, 
            t.setIndex([ 0, 2, 1, 2, 3, 1, 2, 4, 3, 4, 5, 3, 4, 6, 5, 6, 7, 5 ]), t.setAttribute("position", new yr([ -1, 2, 0, 1, 2, 0, -1, 1, 0, 1, 1, 0, -1, 0, 0, 1, 0, 0, -1, -1, 0, 1, -1, 0 ], 3)), 
            t.setAttribute("uv", new yr([ -1, 2, 1, 2, -1, 1, 1, 1, -1, -1, 1, -1, -1, -2, 1, -2 ], 2)), 
            t.setAttribute("uv2", new yr([ 0, 0, 1, 0, 0, 1 / 3, 1, 1 / 3, 0, 2 / 3, 1, 2 / 3, 0, 1, 1, 1 ], 2)), 
            t;
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && av(t, e), t = n, (e = [ {
            key: "applyMatrix",
            value: function(t) {
                var e = this.attributes.instanceStart, n = this.attributes.instanceEnd;
                return void 0 !== e && (t.applyToBufferAttribute(e), t.applyToBufferAttribute(n), 
                e.data.needsUpdate = !0), null !== this.boundingBox && this.computeBoundingBox(), 
                null !== this.boundingSphere && this.computeBoundingSphere(), this;
            }
        }, {
            key: "setPositions",
            value: function(t) {
                t instanceof Float32Array ? e = t : Array.isArray(t) && (e = new Float32Array(t));
                var e;
                t = new tv(e, 6, 1);
                return this.setAttribute("instanceStart", new Aa(t, 3, 0)), this.setAttribute("instanceEnd", new Aa(t, 3, 3)), 
                this.computeBoundingBox(), this.computeBoundingSphere(), this;
            }
        }, {
            key: "setColors",
            value: function(t) {
                t instanceof Float32Array ? e = t : Array.isArray(t) && (e = new Float32Array(t));
                var e;
                t = new tv(e, 6, 1);
                return this.addAttribute("instanceColorStart", new Aa(t, 3, 0)), this.addAttribute("instanceColorEnd", new Aa(t, 3, 3)), 
                this;
            }
        }, {
            key: "setUvys",
            value: function(t) {
                t instanceof Float32Array ? e = t : Array.isArray(t) && (e = new Float32Array(t));
                var e;
                t = new tv(e, 2, 1);
                return this.setAttribute("uvyStart", new Aa(t, 1, 0)), this.setAttribute("uvyEnd", new Aa(t, 1, 1)), 
                this;
            }
        }, {
            key: "fromWireframeGeometry",
            value: function(t) {
                return this.setPositions(t.attributes.position.array), this;
            }
        }, {
            key: "fromEdgesGeometry",
            value: function(t) {
                return this.setPositions(t.attributes.position.array), this;
            }
        }, {
            key: "fromMesh",
            value: function(t) {
                return this.fromWireframeGeometry(new ev(t.geometry)), this;
            }
        }, {
            key: "fromLineSegements",
            value: function(t) {
                return (t = t.geometry).isGeometry ? this.setPositions(t.vertices) : t.isBufferGeometry && this.setPositions(t.position.array), 
                this;
            }
        }, {
            key: "computeBoundingBox",
            value: function() {
                var t = new nt(), e = (null === this.boundingBox && (this.boundingBox = new nt()), 
                this.attributes.instanceStart), n = this.attributes.instanceEnd;
                void 0 !== e && void 0 !== n && (this.boundingBox.setFromBufferAttribute(e), t.setFromBufferAttribute(n), 
                this.boundingBox.union(t));
            }
        }, {
            key: "computeBoundingSphere",
            value: function() {
                var t = new h(), e = (null === this.boundingSphere && (this.boundingSphere = new ot()), 
                null === this.boundingBox && this.computeBoundingBox(), this.attributes.instanceStart), n = this.attributes.instanceEnd;
                if (void 0 !== e && void 0 !== n) {
                    for (var r = this.boundingSphere.center, i = (this.boundingBox.getCenter(r), 0), o = 0, a = e.count; o < a; o++) t.fromBufferAttribute(e, o), 
                    i = Math.max(i, r.distanceToSquared(t)), t.fromBufferAttribute(n, o), i = Math.max(i, r.distanceToSquared(t));
                    this.boundingSphere.radius = Math.sqrt(i), isNaN(this.boundingSphere.radius) && console.error("fm.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.", this);
                }
            }
        }, {
            key: "toJSON",
            value: function() {}
        }, {
            key: "clone",
            value: function() {}
        }, {
            key: "copy",
            value: function(t) {
                return this;
            }
        } ]) && rv(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }();
    function lv(t) {
        return (lv = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function uv(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != lv(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != lv(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == lv(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function cv(t, e, n) {
        e = hv(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], hv(t).constructor) : e.apply(t, n)) && ("object" === lv(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function hv(t) {
        return (hv = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function fv(t, e) {
        return (fv = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    var pv = function() {
        var t = n, e = sv;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n() {
            var t;
            if (this instanceof n) return (t = cv(this, n)).type = "LineGeometry", t.isLineGeometry = !0, 
            t;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && fv(t, e), t = n, (e = [ {
            key: "setPositions",
            value: function(t) {
                for (var e = t.length - 3, n = new Float32Array(2 * e), r = 0; r < e; r += 3) n[2 * r] = t[r], 
                n[2 * r + 1] = t[r + 1], n[2 * r + 2] = t[r + 2], n[2 * r + 3] = t[r + 3], n[2 * r + 4] = t[r + 4], 
                n[2 * r + 5] = t[r + 5];
                return this.test = "ddd", new sv().setPositions.call(this, n), this;
            }
        }, {
            key: "setColors",
            value: function(t) {
                for (var e = t.length - 3, n = new Float32Array(2 * e), r = 0; r < e; r += 3) n[2 * r] = t[r], 
                n[2 * r + 1] = t[r + 1], n[2 * r + 2] = t[r + 2], n[2 * r + 3] = t[r + 3], n[2 * r + 4] = t[r + 4], 
                n[2 * r + 5] = t[r + 5];
                return new sv().setColors.call(this, n), this;
            }
        }, {
            key: "fromLine",
            value: function(t) {
                return (t = t.geometry).isGeometry ? this.setPositions(t.vertices) : t.isBufferGeometry && this.setPositions(t.position.array), 
                this;
            }
        }, {
            key: "copy",
            value: function(t) {
                return this;
            }
        } ]) && uv(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }(), dv = new h(), yv = new h();
    function mv(t, e) {
        this.start = void 0 !== t ? t : new h(), this.end = void 0 !== e ? e : new h();
    }
    function vv(t) {
        return (vv = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function gv(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != vv(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != vv(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == vv(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function bv(t, e, n) {
        e = xv(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], xv(t).constructor) : e.apply(t, n)) && ("object" === vv(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function xv(t) {
        return (xv = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function wv(t, e) {
        return (wv = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    function Sv(t, e, n) {
        return e = 1 < arguments.length && void 0 !== e ? e : {
            x: 0,
            y: 0,
            z: 0
        }, n = 2 < arguments.length ? n : void 0, t = new Bt((t = 0 < arguments.length && void 0 !== t ? t : {
            x: 0,
            y: 0,
            z: 0
        }).x, t.y, t.z, 1), e = new Bt(e.x, e.y, e.z, 1), t.applyMatrix4(n.projectionMatrix), 
        e.multiplyScalar(t.w), e.applyMatrix4(n.projectionMatrixInverse), {
            x: e.x,
            y: e.y,
            z: e.z
        };
    }
    Object.assign(mv.prototype, {
        set: function(t, e) {
            return this.start.copy(t), this.end.copy(e), this;
        },
        clone: function() {
            return new this.constructor().copy(this);
        },
        copy: function(t) {
            return this.start.copy(t.start), this.end.copy(t.end), this;
        },
        getCenter: function(t) {
            return void 0 === t && (console.warn("THREE.Line3: .getCenter() target is now required"), 
            t = new h()), t.addVectors(this.start, this.end).multiplyScalar(.5);
        },
        delta: function(t) {
            return void 0 === t && (console.warn("THREE.Line3: .delta() target is now required"), 
            t = new h()), t.subVectors(this.end, this.start);
        },
        distanceSq: function() {
            return this.start.distanceToSquared(this.end);
        },
        distance: function() {
            return this.start.distanceTo(this.end);
        },
        at: function(t, e) {
            return void 0 === e && (console.warn("THREE.Line3: .at() target is now required"), 
            e = new h()), this.delta(e).multiplyScalar(t).add(this.start);
        },
        closestPointToPointParameter: function(t, e) {
            return dv.subVectors(t, this.start), yv.subVectors(this.end, this.start), t = yv.dot(yv), 
            t = yv.dot(dv) / t, e ? s.clamp(t, 0, 1) : t;
        },
        closestPointToPoint: function(t, e, n) {
            return t = this.closestPointToPointParameter(t, e), void 0 === n && (console.warn("THREE.Line3: .closestPointToPoint() target is now required"), 
            n = new h()), this.delta(n).multiplyScalar(t).add(this.start);
        },
        applyMatrix4: function(t) {
            return this.start.applyMatrix4(t), this.end.applyMatrix4(t), this;
        },
        equals: function(t) {
            return t.start.equals(this.start) && t.end.equals(this.end);
        }
    });
    var _v = function() {
        var t = n, e = mi;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t, e) {
            if (this instanceof n) return (t = bv(this, n, [ t, e ])).type = "LineSegments2", 
            t.isLineSegments2 = !0, t;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && wv(t, e), t = n, (e = [ {
            key: "computeLineDistances",
            value: function() {
                for (var t = new h(), e = new h(), n = this.geometry, r = n.attributes.instanceStart, i = n.attributes.instanceEnd, o = new Float32Array(2 * r.data.count), a = 0, s = 0, l = r.data.count; a < l; a++, 
                s += 2) t.fromBufferAttribute(r, a), e.fromBufferAttribute(i, a), o[s] = 0 === s ? 0 : o[s - 1], 
                o[s + 1] = o[s] + t.distanceTo(e);
                var u = new tv(o, 2, 1);
                return n.setAttribute("instanceDistanceStart", new Aa(u, 1, 0)), n.setAttribute("instanceDistanceEnd", new Aa(u, 1, 1)), 
                this;
            }
        }, {
            key: "copy",
            value: function(t) {
                return this;
            }
        }, {
            key: "raycast",
            value: function(t, e) {
                null === t.camera && console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2.');
                var n = new Bt(), r = new Bt(), i = new Bt(), o = new h(), a = new b(), l = new mv(), u = new h(), c = new nt(), f = new ot(), p = void 0 !== t.params.Line2 && t.params.Line2.threshold || 0, d = t.ray, y = t.camera, m = y.projectionMatrix, v = this.matrixWorld, g = this.geometry, x = (O = this.material).resolution, w = O.uniforms.lineWidth.value + p, S = g.attributes.instanceStart, _ = g.attributes.instanceEnd, E = -y.near, O = 2 * Math.max(w / x.width, w / x.height);
                if (null === g.boundingSphere && g.computeBoundingSphere(), f.copy(g.boundingSphere).applyMatrix4(v), 
                p = Sv({
                    x: 0,
                    y: 0,
                    z: -Math.max(y.near, f.distanceToPoint(d.origin))
                }, {
                    x: O,
                    y: 0,
                    z: 0
                }, y), y.isPerspectiveCamera ? p.x /= 2 : p.x = w / y.zoom, f.radius += p.x, !1 !== t.ray.intersectsSphere(f) && (null === g.boundingBox && g.computeBoundingBox(), 
                c.copy(g.boundingBox).applyMatrix4(v), p = Sv({
                    x: 0,
                    y: 0,
                    z: -Math.max(y.near, c.distanceToPoint(d.origin))
                }, {
                    x: O,
                    y: 0,
                    z: 0
                }, y), y.isPerspectiveCamera ? p.x /= 2 : p.x = w / y.zoom, c.max.x += p.x, c.max.y += p.x, 
                c.max.z += p.x, c.min.x -= p.x, c.min.y -= p.x, c.min.z -= p.x, !1 !== t.ray.intersectsBox(c))) {
                    d.at(1, i), i.w = 1, i.applyMatrix4(y.matrixWorldInverse), i.applyMatrix4(m), i.multiplyScalar(1 / i.w), 
                    i.x *= x.x / 2, i.y *= x.y / 2, i.z = 0, o.copy(i), a.multiplyMatrices(y.matrixWorldInverse, v);
                    for (var M = 0, T = S.count; M < T; M++) {
                        if (n.fromBufferAttribute(S, M), r.fromBufferAttribute(_, M), n.w = 1, r.w = 1, 
                        n.applyMatrix4(a), r.applyMatrix4(a), !(L = n.z > E && r.z > E)) {
                            n.z > E ? (L = n.z - r.z, L = (n.z - E) / L, n.lerp(r, L)) : r.z > E && (L = r.z - n.z, 
                            L = (r.z - E) / L, r.lerp(n, L)), n.applyMatrix4(m), r.applyMatrix4(m), n.multiplyScalar(1 / n.w), 
                            r.multiplyScalar(1 / r.w), n.x *= x.x / 2, n.y *= x.y / 2, r.x *= x.x / 2, r.y *= x.y / 2, 
                            l.start.copy(n), l.start.z = 0, l.end.copy(r), l.end.z = 0;
                            var L = l.closestPointToPointParameter(o, !0), A = (L = -1 <= (L = (l.at(L, u), 
                            s.lerp(n.z, r.z, L))) && L <= 1, u.distanceTo(r) < 1 || u.distanceTo(n) < 1 ? .5 * w * Math.sqrt(2) : .5 * w);
                            A = o.distanceTo(u) < A;
                            if (L && A) {
                                l.start.fromBufferAttribute(S, M), l.end.fromBufferAttribute(_, M), l.start.applyMatrix4(v), 
                                l.end.applyMatrix4(v), L = new h(), A = new h(), d.distanceSqToSegment(l.start, l.end, A, L), 
                                e.push({
                                    point: A,
                                    pointOnLine: L,
                                    distance: d.origin.distanceTo(A),
                                    object: this,
                                    face: null,
                                    faceIndex: M,
                                    uv: null,
                                    uv2: null
                                });
                                break;
                            }
                        }
                    }
                }
            }
        } ]) && gv(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }();
    function Ev(t) {
        return (Ev = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Ov(t, e, n) {
        e = Mv(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], Mv(t).constructor) : e.apply(t, n)) && ("object" === Ev(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function Mv(t) {
        return (Mv = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function Tv(t, e) {
        return (Tv = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    var Lv = function() {
        var t = n, e = _v;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t, e) {
            if (this instanceof n) return (t = Ov(this, n, [ t, e ])).type = "Line2", t.isLine2 = !0, 
            t;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && Tv(t, e), t = n, Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }();
    function Av(t) {
        return (Av = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Pv(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Av(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Av(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Av(t) ? t : String(t);
            }(r.key), r);
        }
    }
    var Rv = function() {
        function t() {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
        }
        var e, n;
        return e = t, (n = [ {
            key: "calculatePoint",
            value: function(t, e, n) {
                return new h().copy(n).add(new h().copy(t).sub(n).normalize().multiplyScalar(e));
            }
        }, {
            key: "computerArcLineByPoints",
            value: function(t, e, n, r, i) {
                var o = [], a = new Of(t = this.calculatePoint(t, r, e), e, n = this.calculatePoint(n, r, e));
                o.push(t);
                for (var s = 0; s < i - 1; s++) {
                    var l = a.getPoint((s + 1) / i);
                    o.push(l);
                }
                return o.push(n), o;
            }
        } ]) && Pv(e.prototype, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }();
    function jv(t) {
        return function(t) {
            if (Array.isArray(t)) return Iv(t);
        }(t) || function(t) {
            if ("undefined" != typeof Symbol && null != t[Symbol.iterator] || null != t["@@iterator"]) return Array.from(t);
        }(t) || function(t, e) {
            var n;
            if (t) return "string" == typeof t ? Iv(t, e) : "Map" === (n = "Object" === (n = Object.prototype.toString.call(t).slice(8, -1)) && t.constructor ? t.constructor.name : n) || "Set" === n ? Array.from(t) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? Iv(t, e) : void 0;
        }(t) || function() {
            throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
        }();
    }
    function Iv(t, e) {
        (null == e || e > t.length) && (e = t.length);
        for (var n = 0, r = new Array(e); n < e; n++) r[n] = t[n];
        return r;
    }
    function Dv(t) {
        return (Dv = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function kv(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Dv(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Dv(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Dv(t) ? t : String(t);
            }(r.key), r);
        }
    }
    Wy = function() {
        function t() {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
            this.Vf = null, this.rr = 0, this.Rv = void 0, this.Cv = !0, this.Nv = 1, this.Pv = [], 
            this.Dv = !1, this.Iv = null, this.Fv = null, this.Gv = [], this.Uv = [], this.Bv = [], 
            this.Hv = null, this.zv = null, this.Vv = !1;
        }
        var e, n;
        return e = t, (n = [ {
            key: "points",
            get: function() {
                return this.Vf;
            },
            set: function(t) {
                this.Vv = !1, this.Vf = t;
            }
        }, {
            key: "level",
            get: function() {
                return this.rr;
            },
            set: function(t) {
                this.rr = t;
            }
        }, {
            key: "buildingID",
            get: function() {
                return this.Rv;
            },
            set: function(t) {
                this.Rv = t;
            }
        }, {
            key: "length",
            get: function() {
                return this.Wv(this.Gv.length);
            }
        }, {
            key: "linePoints",
            get: function() {
                return this.Iv;
            }
        }, {
            key: "uvys",
            get: function() {
                return this.Fv;
            }
        }, {
            key: "resize",
            value: function() {
                this.Gv = [], this.Dv = !1;
            }
        } ]) && kv(e.prototype, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }();
    var Cv = (Object.assign(Wy.prototype, {
        Yv: function(t, e) {
            this.Vv || ("number" != typeof e && (e = this.Nv), this.Iv = this.Xv(t, e), this.Fv = this.Zv(), 
            this.Vv = !0);
        },
        Xv: function(t, e) {
            this.Cv ? this.Dv || this.qv(e) : ((e = []).push.apply(e, jv(this.Vf)), this.Pv = e);
            for (var n = [], r = 0; r < this.Pv.length; r++) {
                var i = this.Pv[r].x - t.x, o = this.Pv[r].z, a = -this.Pv[r].y + t.y;
                n.push(i, o, a), 0 !== r && (i = new h(this.Pv[r].x, this.Pv[r].y, this.Pv[r].z), 
                o = new h(this.Pv[r - 1].x, this.Pv[r - 1].y, this.Pv[r - 1].z), this.Gv.push(i.distanceTo(o)));
            }
            return n;
        },
        qv: function(t) {
            for (var e, n, r = [], i = new Rv(), o = 0; o < this.Vf.length; o++) 0 === o && this.zv ? (e = this.Jv(t, this.zv, this.Vf[o], this.Vf[o + 1]), 
            this.isCross ? r.push.apply(r, jv(i.computerArcLineByPoints(this.zv, this.Vf[o], this.Vf[o + 1], e, 12))) : r.push(i.calculatePoint(this.Vf[o + 1], e, this.Vf[o]))) : o === this.Vf.length - 1 && this.Hv ? (e = this.Jv(t, r[r.length - 1], this.Vf[o], this.Hv), 
            this.isCross ? r.push.apply(r, jv(i.computerArcLineByPoints(r[r.length - 1], this.Vf[o], this.Hv, e, 12))) : r.push(i.calculatePoint(r[r.length - 1], e, this.Vf[o]))) : 0 < o && o < this.Vf.length - 1 ? (n = this.Jv(t, r[r.length - 1], this.Vf[o], this.Vf[o + 1]), 
            r.push.apply(r, jv(i.computerArcLineByPoints(r[r.length - 1], this.Vf[o], this.Vf[o + 1], n, 12)))) : r.push(this.Vf[o]);
            this.Pv = r, this.Dv = !0;
        },
        Jv: function(t, e, n, r) {
            return Math.min(.5 * Ve.distanceOfTwoPoints(e, n), .5 * Ve.distanceOfTwoPoints(n, r), t);
        },
        Zv: function() {
            for (var t, e = [], n = this.Wv(this.Gv.length), r = 0; r < this.Pv.length; r++) 0 === r ? e.push(0) : r === this.Pv.length - 1 ? e.push(1) : (t = this.Wv(r) / n, 
            e.push(t), e.push(t));
            return e;
        },
        Wv: function(t) {
            for (var e = 0, n = 0; n < this.Gv.length; n++) n < t && (e += this.Gv[n]);
            return e;
        }
    }), Wy), Nv = {
        FULL: 0,
        DOTTED: 2,
        DOT_DASH: 4,
        CENTER: 8,
        DASH: 16,
        DOUBLE_DOT_DASH: 32,
        TRI_DOT_DASH: 64,
        FMARROW: 128,
        ARROW: 256
    };
    function Fv(t) {
        return (Fv = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Bv(t, e) {
        (null == e || e > t.length) && (e = t.length);
        for (var n = 0, r = new Array(e); n < e; n++) r[n] = t[n];
        return r;
    }
    function Uv(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Fv(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Fv(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Fv(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function zv(t, e, n) {
        e = Vv(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], Vv(t).constructor) : e.apply(t, n)) && ("object" === Fv(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        return Gv(r);
    }
    function Gv(t) {
        if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return t;
    }
    function Hv() {
        return (Hv = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function(t, e, n) {
            var r = function(t, e) {
                for (;!Object.prototype.hasOwnProperty.call(t, e) && null !== (t = Vv(t)); ) ;
                return t;
            }(t, e);
            if (r) return (r = Object.getOwnPropertyDescriptor(r, e)).get ? r.get.call(arguments.length < 3 ? t : n) : r.value;
        }).apply(this, arguments);
    }
    function Vv(t) {
        return (Vv = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function Wv(t, e) {
        return (Wv = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    Wy = function() {
        var t = n, e = Qm;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t) {
            var e;
            if (!(this instanceof n)) throw new TypeError("Cannot call a class as a function");
            if (e = zv(this, n, [ t ]), t = t || {}, e.Re = Ct.LINE_MARKER, e.Oh = t.url, e.Kv = void 0 !== t.width ? t.width : 6, 
            e.vd = void 0 !== t.color ? t.color : "#33cc61", e.Cv = void 0 === t.smooth || t.smooth, 
            e.Qv = void 0 !== t.radius ? t.radius : 1, e.wo = void 0 === t.animate || t.animate, 
            e.ht = void 0 !== t.opacity ? t.opacity : 1, e.$v = void 0 === t.depth || t.depth, 
            e.t0 = void 0 !== t.type ? t.type : Nv.FMARROW, e.n0 = void 0 !== t.borderColor ? t.borderColor : "#4a82d2", 
            e.e0 = void 0 !== t.segments ? t.segments : [], e.So = [], e.i0 = 60, e.r0 = 10, 
            e.o0 = "#aeaeae", e.s0 = e.s0.bind(Gv(e)), e.a0 = e.a0.bind(Gv(e)), e.u0 = e.u0.bind(Gv(e)), 
            e.c0 = e.c0.bind(Gv(e)), e.Lv = e.Lv.bind(Gv(e)), e.f0 = void 0 !== t.zFighting ? t.zFighting : void 0, 
            e.h0 = void 0 === t.ignoreFloorSpace || t.ignoreFloorSpace, e.f0 && (e.l0 = new n(Object.assign(t, {
                zFighting: !1
            })), e.d0 = 1, e.p0 = 0), t.gradient) {
                for (var r = Object.keys(t.gradient).map(parseFloat), i = (r.sort(function(t, e) {
                    return t - e;
                }), []), o = 0; o < r.length; o++) i.push(t.gradient[r[o]]);
                e.m0 = {
                    percent: r,
                    color: i
                };
            }
            return e;
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && Wv(t, e), t = n, (e = [ {
            key: "bound",
            get: function() {
                if (!0 === this.needUpdateBound) {
                    this.xe.reset();
                    for (var t = this.e0, e = 0; e < t.length; e++) {
                        var n = t[e];
                        this.xe.expandByCoords(n.Vf);
                    }
                    this.needUpdateBound = !1;
                }
                return this.xe.clone();
            }
        }, {
            key: "level",
            get: function() {
                return null;
            }
        }, {
            key: "width",
            get: function() {
                return this.Kv;
            },
            set: function(t) {
                0 !== t && t !== this.Kv && (this.Kv = t, this.Lh(), this.f0) && (this.l0.width = t);
            }
        }, {
            key: "color",
            get: function() {
                return this.vd;
            },
            set: function(t) {
                this.vd !== t && (this.vd = t, this.Lh());
            }
        }, {
            key: "opacity",
            get: function() {
                return this.ht;
            },
            set: function(t) {
                this.ht !== t && (this.ht = t, this.Lh(), this.f0) && (this.l0.opacity = t);
            }
        }, {
            key: "passedColor",
            get: function() {
                return this.o0;
            },
            set: function(t) {
                this.o0 !== t && (this.o0 = t, this.Lh());
            }
        }, {
            key: "segments",
            get: function() {
                return this.e0;
            },
            set: function(t) {
                this.e0 = t;
                var e = this.Zi(vx);
                e && (this.y0(e), this.lc(), this.c0(), this.f0) && (this.l0.segments = t, this.l0.moveProportion(1));
            }
        }, {
            key: "visible",
            get: function() {
                return this.Yi;
            },
            set: function(t) {
                this.Yi = t;
                for (var e = 0; e < this.So.length; e++) this.So[e].line.visible = t;
                var n = this.Zi(vx);
                n && (n.enableUpdateRender(), this.f0) && (this.l0.visible = t);
            }
        }, {
            key: "updatePosition",
            value: function(t) {
                this.Lv(t);
            }
        }, {
            key: "update",
            value: function() {
                var t, e;
                this.xi && this.xi.material && (t = this.Zi(vx)) && (e = this.Zi(Db), this.xi.material = t.ui.Fr.Pu({
                    color: this.vd,
                    lineWidth: this.Kv,
                    opacity: this.ht * e.ht,
                    needDepth: !1,
                    gradient: this.m0
                }), this.f0) && this.l0.update();
            }
        }, {
            key: "moveProportion",
            value: function(t) {
                for (var e = 0, n = this.So.length - 1; -1 < n; n--) this.So[n].isCross || (e += this.So[n].seg.length);
                for (var r = 0, i = this.So.length - 1; -1 < i; i--) {
                    var o = r / e, a = (this.So[i].isCross || (r += this.So[i].seg.length), r / e);
                    a < t ? this.So[i].line.material.uniforms.miny.value = 1 : t <= a && (this.So[i].line.material.uniforms.miny.value = (t - o) / (a - o));
                }
                var s = this.Zi(vx);
                s && s.enableUpdateRender();
            }
        }, {
            key: "getLineNodes",
            value: function() {
                return this.So;
            }
        }, {
            key: "addTo",
            value: function(t) {
                t._o.add(this), this.b0(), t.on("visibleLevelsLoaded", this.c0), t.on("levelChanged", this.a0), 
                t.on("zoom", this.a0), this.g0(t), this.wo && !1 !== this.f0 && t.Oi.ji(this.s0), 
                this.f0 && (this.l0.addTo(t), this.l0.moveProportion(1));
            }
        }, {
            key: "remove",
            value: function() {
                var t = this.Zi(vx);
                t && (t.off("visibleLevelsLoaded", this.c0), t.off("levelChanged", this.a0), t.off("zoom", this.a0), 
                this.w0(t), this.y0(t), this.wo && t.Oi.Mi(this.s0), t._o.remove(this), t.enableUpdateRender(), 
                this.f0) && this.l0.remove(t);
            }
        }, {
            key: "dispose",
            value: function() {
                Hv(Vv(n.prototype), "dispose", this).call(this);
                for (var t = 0; t < this.e0.length; t++) this.e0[t].resize();
                this.f0 && this.l0.dispose();
            }
        }, {
            key: "getRenderNode",
            value: function() {
                return this.So;
            }
        } ]) && Uv(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }();
    var Yv = (Object.assign(Wy.prototype, {
        g0: function(t) {
            t.on("resize", this.u0);
        },
        w0: function(t) {
            t.off("resize", this.u0);
        },
        y0: function(t) {
            for (var e = 0; e < this.So.length; e++) {
                var n = this.So[e].buildingID && "" + this.So[e].buildingID, r = this.So[e].isCross ? Math.min(this.So[e].gid, this.So[e].gidAn) : this.So[e].gid;
                (n = this.ai(n, r, t)) && n.getOrCreateLayer(this.Re).xo.remove(this.So[e].line);
            }
            this.So = [];
        },
        _0: function(t, e) {
            var n = new pv();
            n.setPositions(t), t = this.Zi(Db), e = e.ui.Fr.Pu({
                color: this.vd,
                lineWidth: this.Kv,
                opacity: this.opacity * t.ht,
                needDepth: !1,
                gradient: this.m0
            });
            this.xi = new Lv(n, e), this.xi.computeLineDistances(), n.dispose();
        },
        S0: function(t) {
            var e = new pv();
            e.setPositions(t), this.xi.geometry = e, this.xi.computeLineDistances(), e.dispose();
        },
        lc: function() {
            var t = this.Zi(vx);
            if (t) {
                for (var e = this.x0(), n = 0, r = [], i = [], o = new Mt(t.x, t.y), a = this.e0.length - 1; -1 < a; a--) {
                    var s = this.ai(this.e0[a].buildingID, this.e0[a].rr, t);
                    if (!s) return;
                    var l, u = void 0, c = void 0;
                    if (0 < a && this.e0[a].Rv === this.e0[a - 1].Rv && this.e0[a].rr !== this.e0[a - 1].rr) {
                        if (!(u = this.ai(this.e0[a - 1].buildingID, this.e0[a - 1].rr, t))) return;
                        c = this.e0[a - 1].points, this.e0[a].zv = Object.assign({}, c[c.length - 1]), this.e0[a].zv.z += u.nt - s.nt;
                    }
                    if (a < this.e0.length - 1 && this.e0[a].Rv === this.e0[a + 1].Rv && this.e0[a].rr !== this.e0[a + 1].rr) {
                        var h = this.ai(this.e0[a + 1].buildingID, this.e0[a + 1].rr, t);
                        if (!h) return;
                        this.e0[a].Hv = Object.assign({}, this.e0[a + 1].points[0]), this.e0[a].Hv.z += h.nt - s.nt;
                    }
                    this.e0[a].Cv = this.Cv, this.e0[a].Yv(o, this.Qv), i.push({
                        seg: this.e0[a],
                        buildingID: this.e0[a].Rv,
                        gid: this.e0[a].rr,
                        isCross: !1,
                        floor: s
                    }), 0 < a && this.e0[a].Rv === this.e0[a - 1].Rv && this.e0[a].rr !== this.e0[a - 1].rr && ((h = new Cv()).rr = this.e0[a].rr, 
                    h.Rv = this.e0[a].Rv, h.isCross = !0, l = this.e0[a].points, this.E0(h, c, l, u, s), 
                    h.Cv = this.Cv, h.Yv(o, this.Qv), i.push({
                        floor: u.level < s.level ? u : s,
                        seg: h,
                        buildingID: h.Rv,
                        gid: this.e0[a - 1].rr,
                        isCross: !0,
                        gidAn: h.rr,
                        levelRange: [ this.e0[a - 1].rr, this.e0[a].rr ]
                    }));
                }
                for (var f = 0, p = (i = i.reverse(), 0); p < i.length; p++) i[p].isCross && !1 !== this.h0 || (n += i[p].seg.length), 
                r.push(n);
                for (var d = 0; d < i.length; d++) {
                    var y = (w = i[d]).seg, m = w.buildingID, v = w.gid, g = w.isCross, b = w.gidAn, x = w.levelRange, w = w.floor, S = this.M0(y, e, [ f, r[d] / n ]);
                    this.So.push({
                        line: S,
                        buildingID: m,
                        gid: v,
                        seg: y,
                        isCross: g,
                        gidAn: b,
                        levelRange: x
                    }), f = r[d] / n, w.getOrCreateLayer(this.Re).xo.add(S);
                }
                return this.Xf = !0, this.So = this.So.reverse(), t.enableUpdateRender(), this.Xf;
            }
        },
        E0: function(t, e, n, r, i) {
            var o = Object.assign({}, e[e.length - 1]), a = Object.assign({}, n[0]);
            o.z += r.nt - i.nt, t.points = [ o, a ], t.zv = Object.assign({}, e[e.length - 2]), 
            t.zv.z += r.nt - i.nt, t.Hv = Object.assign({}, n[1]);
        },
        M0: function(t, e, n) {
            var r = this.Zi(vx);
            if (r) {
                var i = new Mt(r.x, r.y);
                if (i = (t.Cv = this.Cv, t.Yv(i, this.Qv), this.ai(t.Rv, t.rr, r))) {
                    for (var o = [], a = 0; a < t.linePoints.length; a++) o.push(t.linePoints[a]);
                    var s = t.Fv, l = new pv();
                    n = ((s = (l.setPositions(o), l.setUvys(s), new kl({
                        color: this.vd,
                        lineWidth: this.Kv,
                        vertexColors: 2,
                        dashed: !1,
                        transparent: !0,
                        pcolor: this.o0,
                        opacity: this.ht,
                        gradient: this.m0,
                        distancePercent: n,
                        isNeedArrow: [ Nv.FMARROW, Nv.ARROW ].includes(this.t0)
                    }))).depthTest = this.$v, s.depthWrite = this.$v, s.transparent = !0, s.resolution = new Mt(r.It.renderer.domElement.clientWidth, r.It.renderer.domElement.clientHeight), 
                    void 0 !== this.d0 && (s.uniforms.usePassOpacity.value = this.d0), void 0 !== this.p0 && (s.uniforms.passOpacity.value = this.p0), 
                    e.useMap && (s.defines.USE_MMAP = !0, s.uniforms.mmap.value = e.texture, this.O0(s, t, this.i0), 
                    s.needsUpdate = !0), new Lv(l, s));
                    return this.f0 ? n.renderOrder = 0 : !1 === this.f0 && (n.renderOrder = 1), !this.f0 && !1 !== this.f0 || (s.stencilWrite = !0, 
                    s.stencilRef = 2, s.stencilFunc = 516, s.stencilFail = Et, s.stencilZFail = Et, 
                    s.stencilZPass = Et), n.computeLineDistances(), n.position.set(0, i.nt, 0), n.mapNode = this, 
                    n;
                }
            }
        },
        s0: function(t) {
            for (var e = 0; e < this.So.length; e++) this.So[e].line.material.uniforms.offset.value.y -= .001 * t;
            this.Zi(vx).enableUpdateRender();
        },
        a0: function() {
            for (var t = 0; t < this.So.length; t++) this.O0(this.So[t].line.material, this.So[t].seg, this.i0);
        },
        O0: function(t, e, n) {
            var r, i = this.Zi(vx);
            i && (r = e.length, e = this.ai(e.Rv, e.rr, i)) && (r *= i.ui.T0(e.nt), t.uniforms.repeat.value.y = Math.floor(r * jt.a.window.devicePixelRatio / n), 
            i.enableUpdateRender());
        },
        u0: function() {
            var t = this.Zi(vx);
            if (t) {
                for (var e = 0; e < this.So.length; e++) this.So[e].line.material.resolution = new Mt(t.It.renderer.domElement.clientWidth, t.It.renderer.domElement.clientHeight);
                t.enableUpdateRender();
            }
        },
        b0: function() {
            var t, e = this.Zi(vx), n = function(t, e) {
                var n, r, i, o, a = "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"];
                if (a) return r = !(n = !0), {
                    s: function() {
                        a = a.call(t);
                    },
                    n: function() {
                        var t = a.next();
                        return n = t.done, t;
                    },
                    e: function(t) {
                        r = !0, i = t;
                    },
                    f: function() {
                        try {
                            n || null == a.return || a.return();
                        } finally {
                            if (r) throw i;
                        }
                    }
                };
                if (Array.isArray(t) || (a = function(t, e) {
                    var n;
                    if (t) return "string" == typeof t ? Bv(t, e) : "Map" === (n = "Object" === (n = Object.prototype.toString.call(t).slice(8, -1)) && t.constructor ? t.constructor.name : n) || "Set" === n ? Array.from(t) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? Bv(t, e) : void 0;
                }(t)) || e && t && "number" == typeof t.length) return a && (t = a), o = 0, {
                    s: e = function() {},
                    n: function() {
                        return o >= t.length ? {
                            done: !0
                        } : {
                            done: !1,
                            value: t[o++]
                        };
                    },
                    e: function(t) {
                        throw t;
                    },
                    f: e
                };
                throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
            }(this.So);
            try {
                for (n.s(); !(t = n.n()).done; ) {
                    var r, i = t.value;
                    i.isCross ? (r = this.Da(i.buildingID, e).visibleLevels).indexOf(i.gid) < 0 || r.indexOf(i.gidAn) < 0 ? i.line.visible = !1 : (i.line.visible = !0, 
                    i.line.visible = this.Yi) : -1 < this.Da(i.buildingID, e).visibleLevels.indexOf(i.gid) ? (i.line.visible = !0, 
                    i.line.visible = this.Yi) : i.line.visible = !1;
                }
            } catch (t) {
                n.e(t);
            } finally {
                n.f();
            }
            e.enableUpdateRender();
        },
        c0: function() {
            this.Zi(vx) && this.b0();
        },
        j0: function() {
            this.i0 = this.Kv * this.r0;
            var t = {
                type: "normal",
                width: 128,
                height: 128,
                color: this.vd,
                arrowHeightPercent: .6,
                arrowWidthPercent: 1,
                arrowPercent: .1,
                lineType: null,
                dashArray: [ 2, 1 ],
                textureCommand: "createNormalLineTexture",
                godHeightPercent: 1,
                godEdgePercent: .2,
                godArrowPercent: .15,
                arrowWidth: 20,
                godColor: this.vd,
                godEdgeColor: this.n0,
                godArrowColor: "#F4FEFB",
                godArrowXScale: 4,
                godArrowWidthPercent: .9,
                useMap: !0,
                gradient: this.m0
            };
            switch (this.m0 && (t.color = "#fff", t.godEdgeColor = "rgba(0,0,0,1)", t.godColor = "rgba(0,0,0,1)"), 
            this.t0) {
              case Nv.FULL:
                t.useMap = !1;
                break;

              case Nv.DOTTED:
                t.dashArray = [ .5, .5, .5, .5, .5, .5, .5, .5 ];
                break;

              case Nv.DOT_DASH:
                t.dashArray = [ 2.5, 1, .5, 1 ];
                break;

              case Nv.CENTER:
                t.dashArray = [ 3, 1, 1.5, 1 ];
                break;

              case Nv.DASH:
                t.dashArray = [ 2, 1 ];
                break;

              case Nv.DOUBLE_DOT_DASH:
                t.dashArray = [ 2.5, .5, .5, .5, .5, .5 ];
                break;

              case Nv.TRI_DOT_DASH:
                t.dashArray = [ 2.5, .5, .5, .5, .5, .5, .5, .5 ];
                break;

              case Nv.FMARROW:
              case Nv.ARROW:
                jt.a.environment === Ut.a.BROWSER && (t.width = 5 * this.Kv, t.height = 5 * this.i0), 
                t.arrowWidth = t.height / 12, t.dashArray = [ 7, 0 ], t.textureCommand = "createArrowWidthBackTexture";
                break;

              default:
                t.useMap = !1;
            }
            return t;
        },
        x0: function() {
            var t, e, n = this.Zi(vx);
            if (n) return t = this.j0(), e = null, this.Oh ? {
                useMap: !0,
                texture: n.ui.Fr.Zu(this.Oh, function(t) {
                    t.needsUpdate = !0;
                })
            } : (t.useMap && ((e = n.ui.Fr[t.textureCommand](t)).minFilter = mt, e.wrapS = pt, 
            e.wrapT = pt, e.generateMipmaps = !1, e.anisotropy = 4), {
                useMap: t.useMap,
                texture: e
            });
        },
        Lh: function() {
            if (0 < this.So.length) for (var t = this.x0(), e = 0; e < this.So.length; e++) this.So[e].line.material.lineWidth = this.Kv, 
            this.So[e].line.material.color = new Xt(this.vd), this.So[e].line.material.pcolor = new Xt(this.o0), 
            this.So[e].line.material.opacity = this.ht, t.useMap && (this.So[e].line.material.uniforms.mmap.value = t.texture);
            var n = this.Zi(vx);
            n && n.enableUpdateRender();
        },
        ai: function(t, e, n) {
            return (t ? this.Da(t, n) : n).getFloor(e);
        },
        Da: function(t, e) {
            return t = t || e.getMapOptions().buildingID, e.getBuilding(t);
        },
        Lv: function() {
            var t = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}, e = void 0 === t.needUpdateCrossLine || t.needUpdateCrossLine;
            if (0 < this.So.length) {
                var n = this.Zi(vx);
                if (n) {
                    if (this.m0) this.y0(n), this.lc(); else for (var r = 0; r < this.So.length; r++) {
                        var i, o, a = this.So[r];
                        if (a.isCross) e && (o = this.ai(a.buildingID, a.gid, n), s = this.ai(a.buildingID, a.gidAn, n), 
                        a.seg.resize(), this.E0(a.seg, this.So[r + 1].seg.points, this.So[r - 1].seg.points, o, s), 
                        i = this.x0(), i = this.M0(a.seg, i), (o = (o.level < s.level ? o : s).getOrCreateLayer(this.Re)).xo.add(i), 
                        o.xo.remove(a.line), i.material.uniforms.miny.value = a.line.material.uniforms.miny.value, 
                        a.line.geometry.dispose(), a.line.material.dispose(), a.line = i); else {
                            var s = this.ai(a.seg.Rv, a.seg.rr, n);
                            if (!s) return;
                            a.line.position.y = s.nt;
                        }
                    }
                    n.enableUpdateRender();
                }
            }
        }
    }), Wy);
    function Xv(t) {
        return (Xv = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Zv(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Xv(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Xv(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Xv(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function qv(t, e, n) {
        e = Jv(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], Jv(t).constructor) : e.apply(t, n)) && ("object" === Xv(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function Kv() {
        return (Kv = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function(t, e, n) {
            var r = function(t, e) {
                for (;!Object.prototype.hasOwnProperty.call(t, e) && null !== (t = Jv(t)); ) ;
                return t;
            }(t, e);
            if (r) return (r = Object.getOwnPropertyDescriptor(r, e)).get ? r.get.call(arguments.length < 3 ? t : n) : r.value;
        }).apply(this, arguments);
    }
    function Jv(t) {
        return (Jv = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function Qv(t, e) {
        return (Qv = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    Wy = function() {
        var t = n, e = Yy;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t) {
            var e;
            if (this instanceof n) return (e = qv(this, n)).B = t, void 0 === e.B.baseheight && (e.B.baseheight = 0), 
            e.nt = Math.abs(e.B.height - e.B.baseheight), e.L0 = e.B.baseheight, e.B.height < e.L0 && (e.L0 = e.B.height), 
            e.Re = Ct.MODEL, e.xi = null, e.jf = null, e.Ie = null, e.xe = null, e.k0 = "#FF0000", 
            e.rd = null, e.Ur = {
                top: null,
                left: null,
                right: null,
                front: null,
                back: null
            }, e.A0 = !1, e.Mh = null, e.vd = null, e.ht = null, e.R0 = null, e.C0 = null, e.N0 = .01 * e.P0(e.x + e.y), 
            e.Xd = null, e.D0 = null, e.I0 = [ 0, 0 ], e.tv = null, e.Yd = 0, e.Cf = null, e.F0 = 0, 
            e.G0 = null, e;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && Qv(t, e), t = n, (e = [ {
            key: "FID",
            get: function() {
                return this.B.fid;
            }
        }, {
            key: "typeID",
            get: function() {
                return this.B.type;
            }
        }, {
            key: "name",
            get: function() {
                return this.B.name;
            }
        }, {
            key: "eName",
            get: function() {
                return this.B.ename;
            }
        }, {
            key: "pass",
            get: function() {
                return this.B.pass;
            }
        }, {
            key: "coordinates",
            get: function() {
                return this.B.Ce;
            }
        }, {
            key: "x",
            get: function() {
                var t;
                return null == (t = this.B.je) ? void 0 : t.x;
            }
        }, {
            key: "y",
            get: function() {
                var t;
                return null == (t = this.B.je) ? void 0 : t.y;
            }
        }, {
            key: "height",
            get: function() {
                return this.B.height >= this.B.baseheight ? this.B.height : this.B.baseheight;
            }
        }, {
            key: "baseHeight",
            get: function() {
                return this.B.baseheight <= this.B.height ? this.B.baseheight : this.B.height;
            }
        }, {
            key: "extrudeHeight",
            get: function() {
                return this.nt;
            }
        }, {
            key: "getData",
            value: function() {
                var t = Object.assign(Kv(Jv(n.prototype), "getData", this).call(this), {
                    pass: this.B.pass
                });
                return t.height = this.height, t.baseHeight = this.baseHeight, t.extrudeHeight = this.extrudeHeight, 
                t;
            }
        }, {
            key: "getArea",
            value: function() {
                return ld.area(this.B.Ce[0]);
            }
        }, {
            key: "setColor",
            value: function(t, e) {
                this.A0 = !0, void 0 !== t && (this.vd = t), void 0 !== e && (this.ht = e), this.Lh();
            }
        }, {
            key: "resetColor",
            value: function() {
                this.Mh && !this.U0() || this.mv(), this.setColor(this.Mh.color, this.Mh.alpha), 
                this.A0 = !1;
            }
        }, {
            key: "setBorderColor",
            value: function(t, e) {
                t && (this.R0 = t), null != e && (this.C0 = e), t = this.Zi(vx), this.B0(t);
            }
        }, {
            key: "resetBorderColor",
            value: function() {
                this.Mh && (this.U0() && this.mv(), this.setBorderColor(this.Mh.strokeColor, this.Mh.alpha));
            }
        }, {
            key: "setTopImage",
            value: function(t) {
                this.F0 = 1, this.Xd = t.image, this.tv = void 0 !== t.coords ? t.coords : this.B.je, 
                this.D0 = void 0 !== t.size ? t.size : [ 5, 5 ], this.I0 = void 0 !== t.offset ? t.offset : [ 0, 0 ], 
                this.Yd = void 0 !== t.angle ? t.angle : 0, this.xi && this.H0();
            }
        }, {
            key: "clearTopImage",
            value: function() {
                this.F0 = 0, this.z0();
            }
        }, {
            key: "flash",
            value: function(t) {
                this.V0(t);
                var e = this, n = this.Zi(vx), r = 0;
                e.rd && clearTimeout(e.rd), function t() {
                    e.xi && (e.xi.userData.sourceMaterial || (e.xi.userData.sourceMaterial = e.xi.material, 
                    e.xi.material = e.xi.material.clone()), e.xi.userData.sourceMaterial.canDispose = !1, 
                    r % 2 == 0 ? e.xi && (e.xi.material.color = new Xt(e.k0)) : e.xi && (e.xi.material.color = new Xt(e.vd)), 
                    r++, n.enableUpdateRender()), e.rd = setTimeout(t, 100);
                }();
            }
        }, {
            key: "stopFlash",
            value: function() {
                var t;
                this.rd && (clearTimeout(this.rd), this.rd = null, t = this.xi.material, this.xi.material = this.xi.userData.sourceMaterial, 
                delete this.xi.userData.sourceMaterial.canDispose, delete this.xi.userData.sourceMaterial, 
                t.dispose(), t = null, this.Zi(vx).enableUpdateRender());
            }
        }, {
            key: "getOtherNode",
            value: function() {
                return {
                    top: this.Ur.top,
                    line: this.jf
                };
            }
        } ]) && Zv(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }();
    var $v = (Object.assign(Wy.prototype, {
        lc: function() {
            var t, e, n, r;
            this.xi || (t = (r = (e = this.Zi(Db)).Bt).Bt, r = r.Bt.ui, e = e.getLayers(Ct.EXTENT_LAYER)[0].bound, 
            e = r.af(this.B, this.nt, e, !0), this.mv(), this.vd && this.A0 || (this.vd = this.Mh.color), 
            null !== this.ht && this.A0 || (this.ht = this.Mh.alpha), this.R0 && this.A0 || (this.R0 = this.Mh.strokeColor), 
            this.Kv && this.A0 || (this.Kv = this.Mh.strokeWidth), null !== this.C0 && this.A0 || (this.C0 = this.Mh.alpha), 
            (r = this.Tr(r.Fr)).userData.opacity = r.opacity, n = this.B.getBound(), this.xi = new mi(e.geometry, r), 
            r = new h(n.center.x - t._t, this.L0, t.St - n.center.y), this.xi.position.copy(r), 
            this.xi.rotation.set(-Math.PI / 2, 0, 0, "XYZ"), (this.xi.mapNode = this).Bt.xo.add(this.xi), 
            this.W0 = e.shape, this.Y0(e.shape), this.X0(), this.Cf && this.Cf.lc(this));
        },
        Z0: function() {
            var t = this, e = this.W0.getPoints(), n = new Yv({
                color: this.R0,
                width: this.Kv,
                smooth: !1,
                animate: !1,
                depth: !0
            }), r = (n.Bt = this, []), i = (e = (e.forEach(function(e) {
                r.push(e.x, e.y, t.nt + t.N0);
            }), this.Zi(vx)), n._0(r, e), n.xi.material.depthWrite = !0, n.xi.material.depthTest = !0, 
            n.xi.material.polygonOffset = !0, n.xi.material.polygonOffsetFactor = -1, n.xi.material.polygonOffsetUnits = 1, 
            this.xi.add(n.xi), this.nt && -1 !== this.nt ? this.nt : 2);
            n.xi.position.setZ(.005 * i), n.xi.renderOrder = -1, n.xi.isNoPick = !0, this.jf = n.xi, 
            this.q0 = n, this.q0.So.push({
                line: n.xi
            }), this.q0.g0(e);
        },
        J0: function(t) {
            var e = this.Zi(Db), n = !0;
            this.jr && (n = !1), t = t.ku({
                isline: n,
                color: this.R0,
                opacity: this.C0 * e.ht,
                needDepth: !0
            });
            return this.jr && ((t = t.clone()).uniforms.isMask.value = !0, t.uniforms.maskType.value = this.kr, 
            t.uniforms.maskTexture.value = this.G0, void 0 !== this.Rr && void 0 !== this.Cr && (t.uniforms.maskHeight.value = this.Rr, 
            t.uniforms.maskExtrudeHeight.value = this.Cr), t.uniforms.boundCenter.value = this.Nr, 
            t.uniforms.boundSize.value = this.Pr, t.uniformsNeedUpdate = !0), t;
        },
        initGLLine: function() {
            for (var t = this.Zi(Gn).Bt.ui, e = this.J0(t.Fr), n = this.nt && -1 !== this.nt ? this.nt : 2, r = new or().setFromPoints(this.W0.getPoints()), i = (r && 0 < r.vertices.length && r.vertices.push(r.vertices[0]), 
            []), o = r.vertices.length, a = 0; a < o; a++) r.vertices[a].z = this.nt + this.N0, 
            0 === a || a === o - 1 ? i.push(r.vertices[a]) : i.push(r.vertices[a], r.vertices[a]);
            r.vertices = i;
            var s = new Xc(r, e);
            if (s.position.setZ(.005 * n), s.castShadow = !1, s.geometry.computeBoundingSphere(), 
            this.jf = s, this.jf.matrixAutoUpdate = !1, this.xi.add(s), 0 === this.Kv && (this.jf.visible = !1), 
            this.W0.holes) for (var l = 0; l < this.W0.holes.length; l++) {
                p = f = u = void 0;
                for (var u = s, c = this.W0.holes[l].curves, f = 0; f < c.length; f++) {
                    var p = [];
                    p.push(new h(c[f].v1.x, c[f].v1.y, n)), p.push(new h(c[f].v2.x, c[f].v2.y, n)), 
                    p = new Xc(new Mr().setFromPoints(p), e), u.add(p);
                }
            }
        },
        Y0: function() {
            1 < Math.floor(this.Kv) ? this.Z0() : this.initGLLine();
        },
        X0: function() {
            var t, e;
            this.Xd && this.D0 && (e = this.Zi(vx), t = new Dr(1, 1, 1, 1), e = this.K0(e, this.Xd), 
            this.Ur.top = new mi(t, e), this.Ur.top.renderOrder = 10, this.Q0(), this.xi.add(this.Ur.top));
        },
        H0: function() {
            this.Xd && this.D0 ? this.Ur.top ? (this.$0(), this.Q0()) : this.X0() : this.z0();
        },
        z0: function() {
            var t;
            this.Ur.top && this.Ur.top.parent && (this.Ur.top.parent.remove(this.Ur.top), this.Ur.top.geometry.dispose(), 
            this.Ur.top.material.map && this.Ur.top.material.map.dispose(), this.Ur.top.material.dispose(), 
            this.Ur.top = null, t = this.Zi(vx)) && t.enableUpdateRender();
        },
        V0: function(t) {
            this.k0 = t;
        },
        jh: function() {
            this.mv(), this.vd = this.Mh.color, this.ht = this.Mh.alpha, this.R0 = this.Mh.strokeColor, 
            this.C0 = this.Mh.alpha, this.Kv = this.Mh.strokeWidth, this.jf && (this.jf.visible = 0 !== this.Kv), 
            this.Lh(), this.xi && this.H0();
        },
        tp: function(t) {
            var e = this.Zi(Db);
            return t.Lu({
                isline: !0,
                color: this.R0,
                opacity: this.C0 * e.ht,
                needDepth: !0
            });
        },
        U0: function() {
            return !!this.xi && this.xi.material.userData.dirtyTheme;
        },
        Tr: function(t) {
            var e = this.Zi(Db), n = this.Zi(Gn).Bt.ui, r = {
                themeUseDetail: this.Mh.themeUseDetail,
                level: e.level,
                buildingId: e.parent.buildingId
            }, i = (e = {
                color: this.vd,
                alpha: this.ht * e.ht,
                type: this.Re
            }, n.Fr.callHook("getMaterialBefor", {
                material: null == (i = this.xi) ? void 0 : i.material,
                additionalInfo: r
            }), t.Au(e, r));
            return n.Fr.callHook("getMaterialAfter", {
                createInfo: e,
                material: i,
                additionalInfo: r
            }), this.jr ? ((t = i.clone()).uniforms.isMask.value = !0, t.uniforms.maskType.value = this.kr, 
            t.uniforms.maskTexture.value = this.Sh, void 0 !== this.Rr && void 0 !== this.Cr && (t.uniforms.maskHeight.value = this.Rr, 
            t.uniforms.maskExtrudeHeight.value = this.Cr), t.uniformsNeedUpdate = !0, t) : i;
        },
        K0: function(t, e) {
            var n = this.Zi(Db), r = null;
            return this.jr ? ((r = t.ui.Fr.ku({})).depthTest = !0, r.depthWrite = !1, r.visible = !1, 
            r.uniforms.isMask.value = !0, r.uniforms.maskType.value = this.kr, r.uniforms.maskTexture.value = this.G0, 
            void 0 !== this.Rr && void 0 !== this.Cr && (r.uniforms.maskHeight.value = this.Rr, 
            r.uniforms.maskExtrudeHeight.value = this.Cr), r.uniforms.boundCenter.value = this.Nr, 
            r.uniforms.boundSize.value = this.Pr, r.uniformsNeedUpdate = !0) : r = new ac({
                transparent: !0,
                opacity: n.ht,
                depthWrite: !1,
                visible: !1
            }), t.ui.Fr.Zu(e, function(e) {
                r.map = e, r.map.wrapS = dt, r.map.wrapT = dt, r.needsUpdate = !0, r.visible = !0, 
                r.polygonOffset = !0, r.polygonOffsetFactor = -1, r.polygonOffsetUnits = -4, t.enableUpdateRender();
            }, {
                generateMipmaps: !0
            }), r;
        },
        $0: function() {
            var t, e = this.Ur.top;
            e && (e.material.map && e.material.map.dispose(), e.material.map = null, e.material.dispose(), 
            t = this.Zi(vx), e.material = this.K0(t, this.Xd));
        },
        Lh: function() {
            var t, e;
            this.xi && (t = this.Zi(vx)) && (this.xi.userData.sourceMaterial ? this.xi.userData.sourceMaterial = this.Tr(t.ui.Fr) : (e = this.xi.material.userData, 
            this.xi.material = this.Tr(t.ui.Fr), this.xi.material.userData = e), this.B0(t), 
            this.$0(), t.enableUpdateRender());
        },
        B0: function(t) {
            if (this.jf && Math.floor(this.Kv) < 2) {
                var e = this.J0(t.ui.Fr);
                this.jf.material = e;
                for (var n = 0; n < this.jf.children.length; n++) this.jf.children[n].material = e;
            } else this.jf && (this.xi.remove(this.jf), this.jf.mapNode instanceof Yv ? (this.jf.mapNode.width = this.Kv, 
            this.jf.mapNode.color = this.R0) : this.Z0());
            t.enableUpdateRender();
        },
        Q0: function() {
            var t = this.Ur.top, e = (t.scale.set(this.D0[0], this.D0[1], 1), this.B.getBound());
            t.position.set(this.I0[0] + this.tv.x - e.center.x, this.I0[1] + this.tv.y - e.center.y, this.nt + .1), 
            t.rotation.z = -this.Yd * Math.PI / 180;
        },
        mv: function() {
            var t = this.Zi(Gn), e = t.Bt.ui;
            this.Mh = e.Th.Oc({
                fid: this.B.fid,
                typeID: this.B.type + "",
                bid: t.Ae
            }), 0 === this.F0 && (this.Mh.image ? this.Xd = e.Nd(this.Mh, "logoPath", t.buildingID) + this.Mh.image : this.Xd = null, 
            this.Mh.coords && (e = this.Mh.coords.split(","), this.tv = new Mt(parseFloat(e[0]), parseFloat(e[1]))), 
            this.Mh.angle && (this.Yd = this.Mh.angle), this.Mh.sizes) && (t = this.Mh.sizes.split(","), 
            this.D0 = [ parseFloat(t[0]), parseFloat(t[1]) ]), this.xi && delete this.xi.material.userData.dirtyTheme;
        },
        xh: function() {
            var t, e;
            this.xi && ((e = this.Zi(vx)) && e.ui.Fr.callHook("removeMaterial", {
                material: null == (t = this.xi) ? void 0 : t.material,
                additionalInfo: {
                    themeUseDetail: this.Mh.themeUseDetail
                }
            }), this.jf && (this.xi.remove(this.jf), this.jf.material.dispose(), this.jf.geometry.dispose(), 
            this.jf = void 0, e && this.q0 && this.q0.w0(e), this.q0 = null), this.z0(), this.xi.parent && this.xi.parent.remove(this.xi), 
            this.xi.geometry.dispose(), this.xi.geometry = void 0, this.xi.material = void 0, 
            this.xi.mapNode = void 0, this.xi = void 0);
        },
        P0: function(t) {
            return (t = (9301 * t + 49297) % 233280) / 233280;
        }
    }), Wy);
    function tg(t) {
        return (tg = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function eg(t, e) {
        return function(t) {
            if (Array.isArray(t)) return t;
        }(t) || function(t, e) {
            var n = null == t ? null : "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"];
            if (null != n) {
                var r, i, o, a, s = [], l = !0, u = !1;
                try {
                    if (o = (n = n.call(t)).next, 0 === e) {
                        if (Object(n) !== n) return;
                        l = !1;
                    } else for (;!(l = (r = o.call(n)).done) && (s.push(r.value), s.length !== e); l = !0) ;
                } catch (t) {
                    u = !0, i = t;
                } finally {
                    try {
                        if (!l && null != n.return && (a = n.return(), Object(a) !== a)) return;
                    } finally {
                        if (u) throw i;
                    }
                }
                return s;
            }
        }(t, e) || ng(t, e) || function() {
            throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
        }();
    }
    function ng(t, e) {
        var n;
        if (t) return "string" == typeof t ? rg(t, e) : "Map" === (n = "Object" === (n = Object.prototype.toString.call(t).slice(8, -1)) && t.constructor ? t.constructor.name : n) || "Set" === n ? Array.from(t) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? rg(t, e) : void 0;
    }
    function rg(t, e) {
        (null == e || e > t.length) && (e = t.length);
        for (var n = 0, r = new Array(e); n < e; n++) r[n] = t[n];
        return r;
    }
    function ig(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, ug(r.key), r);
        }
    }
    function og(t, e, n) {
        e = hg(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], hg(t).constructor) : e.apply(t, n)) && ("object" === tg(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function ag() {
        return (ag = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function(t, e, n) {
            var r = cg(t, e);
            if (r) return (r = Object.getOwnPropertyDescriptor(r, e)).get ? r.get.call(arguments.length < 3 ? t : n) : r.value;
        }).apply(this, arguments);
    }
    function sg(t, e, n, r) {
        return (sg = "undefined" != typeof Reflect && Reflect.set ? Reflect.set : function(t, e, n, r) {
            var i;
            if (t = cg(t, e)) {
                if ((i = Object.getOwnPropertyDescriptor(t, e)).set) return i.set.call(r, n), !0;
                if (!i.writable) return !1;
            }
            if (i = Object.getOwnPropertyDescriptor(r, e)) {
                if (!i.writable) return !1;
                i.value = n, Object.defineProperty(r, e, i);
            } else lg(r, e, n);
            return !0;
        })(t, e, n, r);
    }
    function lg(t, e, n) {
        return (e = ug(e)) in t ? Object.defineProperty(t, e, {
            value: n,
            enumerable: !0,
            configurable: !0,
            writable: !0
        }) : t[e] = n, t;
    }
    function ug(t) {
        return t = function(t, e) {
            if ("object" != tg(t) || !t) return t;
            var n = t[Symbol.toPrimitive];
            if (void 0 === n) return String(t);
            if ("object" != tg(n = n.call(t, e))) return n;
            throw new TypeError("@@toPrimitive must return a primitive value.");
        }(t, "string"), "symbol" == tg(t) ? t : String(t);
    }
    function cg(t, e) {
        for (;!Object.prototype.hasOwnProperty.call(t, e) && null !== (t = hg(t)); ) ;
        return t;
    }
    function hg(t) {
        return (hg = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function fg(t, e) {
        return (fg = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    Wy = function() {
        var t = n, e = Ed;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n() {
            if (this instanceof n) return og(this, n);
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && fg(t, e), t = n, (e = [ {
            key: "level",
            get: function() {
                return this.Bt.rr;
            }
        }, {
            key: "visible",
            get: function() {
                return this.Yi;
            },
            set: function(t) {
                var e = hg(n.prototype), r = t;
                if (!sg(e, "visible", r, this || e)) throw new TypeError("failed to set property");
                this.Yi = t, this.xo.visible = !(!this.Bt.visible || !this.Yi), (r = this.Zi(vx)) && r.ui.Xo();
            }
        }, {
            key: "getFeatures",
            value: function() {
                return this.Nt;
            }
        }, {
            key: "dispose",
            value: function() {
                this.wh && this.wh(), ag(hg(n.prototype), "dispose", this).call(this);
            }
        }, {
            key: "init",
            value: function() {
                ag(hg(n.prototype), "init", this).call(this);
                var t = this.Zi(vx);
                this.visible = t.ui.np(this.Re);
            }
        }, {
            key: "getBound",
            value: function() {
                var t = this.bound;
                return {
                    maxY: t.max.y,
                    maxX: t.max.x,
                    minX: t.min.x,
                    minY: t.min.y
                };
            }
        }, {
            key: "remove",
            value: function(t) {
                this.xo.remove(t.xi), ag(hg(n.prototype), "remove", this).call(this, t);
            }
        } ]) && ig(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }();
    var pg = (Object.assign(Wy.prototype, {
        Si: function(t) {
            (t.Bt = this).Nt.push(t);
        },
        ep: function(t, e) {
            var n, r = lg(lg(lg(lg(lg({}, Ct.EXTERNAL_MODEL_LAYER, Am), Ct.MODEL_LAYER, $v), Ct.EXTENT_LAYER, Qy), Ct.FACILITY_LAYER, km), Ct.LABEL_LAYER, Ym), i = function(t, e) {
                var n, r, i, o, a = "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"];
                if (a) return r = !(n = !0), {
                    s: function() {
                        a = a.call(t);
                    },
                    n: function() {
                        var t = a.next();
                        return n = t.done, t;
                    },
                    e: function(t) {
                        r = !0, i = t;
                    },
                    f: function() {
                        try {
                            n || null == a.return || a.return();
                        } finally {
                            if (r) throw i;
                        }
                    }
                };
                if (Array.isArray(t) || (a = ng(t)) || e && t && "number" == typeof t.length) return a && (t = a), 
                o = 0, {
                    s: e = function() {},
                    n: function() {
                        return o >= t.length ? {
                            done: !0
                        } : {
                            done: !1,
                            value: t[o++]
                        };
                    },
                    e: function(t) {
                        throw t;
                    },
                    f: e
                };
                throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
            }(t.Nt);
            try {
                for (i.s(); !(n = i.n()).done; ) {
                    var o = eg(n.value, 2), a = (o[0], o[1]), s = new r[this.Re](a, e.map);
                    this.Si(s), this.type === Ct.MODEL_LAYER && this.ip.set(s.FID, s), s.visible = e.map.ui.rp(this.Re, {
                        typeID: s.typeID,
                        FID: s.FID
                    });
                }
            } catch (t) {
                i.e(t);
            } finally {
                i.f();
            }
        }
    }), Wy);
    function dg(t) {
        return (dg = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function yg(t, e, n) {
        return (e = vg(e)) in t ? Object.defineProperty(t, e, {
            value: n,
            enumerable: !0,
            configurable: !0,
            writable: !0
        }) : t[e] = n, t;
    }
    function mg(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, vg(r.key), r);
        }
    }
    function vg(t) {
        return t = function(t, e) {
            if ("object" != dg(t) || !t) return t;
            var n = t[Symbol.toPrimitive];
            if (void 0 === n) return String(t);
            if ("object" != dg(n = n.call(t, e))) return n;
            throw new TypeError("@@toPrimitive must return a primitive value.");
        }(t, "string"), "symbol" == dg(t) ? t : String(t);
    }
    function gg(t, e, n) {
        e = xg(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], xg(t).constructor) : e.apply(t, n)) && ("object" === dg(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function bg() {
        return (bg = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function(t, e, n) {
            var r = function(t, e) {
                for (;!Object.prototype.hasOwnProperty.call(t, e) && null !== (t = xg(t)); ) ;
                return t;
            }(t, e);
            if (r) return (r = Object.getOwnPropertyDescriptor(r, e)).get ? r.get.call(arguments.length < 3 ? t : n) : r.value;
        }).apply(this, arguments);
    }
    function xg(t) {
        return (xg = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function wg(t, e) {
        return (wg = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    Wy = function() {
        var t = n, e = pg;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n() {
            if (this instanceof n) return gg(this, n);
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && wg(t, e), t = n, (e = [ {
            key: "init",
            value: function() {
                bg(xg(n.prototype), "init", this).call(this), this.ph(), this.mh(), this.type === Ct.EXTERNAL_MODEL_LAYER && hy(this);
            }
        } ]) && mg(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }();
    var Sg = (Object.assign(Wy.prototype, {
        ph: function() {
            var t = yg(yg(yg({}, Ct.EXTERNAL_MODEL_LAYER, "FMExternalModelLayer"), Ct.MODEL_LAYER, "FMModelLayer"), Ct.EXTENT_LAYER, "FMExtentLayer"), e = this.Zi(vx), n = (t = t[this.Re], 
            e.ui.xc.get(e.getMapOptions().mapID).theme);
            e.getMapOptions().isuserLight || !n.Ju ? this.gh = new uy(e).createLight(this, t) : (n = e.ui.xc.get(e.getMapOptions().mapID).theme.Ju, 
            this.gh = new uy(e).createLightByTheme(this, t, n.extent));
        },
        mh: function() {
            this.xo.add(this.ah), this.xo.add(this.oh), this.xo.add(this.uh), this.xo.add(this.sh), 
            this.hh && this.xo.add(this.hh);
        },
        wh: function() {
            this.xo.remove(this.ah), this.xo.remove(this.oh), this.xo.remove(this.uh), this.gh.tn();
        }
    }), Wy);
    function _g(t) {
        return (_g = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Eg(t, e, n) {
        e = Og(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], Og(t).constructor) : e.apply(t, n)) && ("object" === _g(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function Og(t) {
        return (Og = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function Mg(t, e) {
        return (Mg = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    function Tg(t) {
        return (Tg = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Lg(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Tg(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Tg(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Tg(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function Ag(t, e, n) {
        e = Pg(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], Pg(t).constructor) : e.apply(t, n)) && ("object" === Tg(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function Pg(t) {
        return (Pg = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function Rg(t, e) {
        return (Rg = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    Wy = function() {
        var t = n, e = Sg;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t, e) {
            var r;
            if (this instanceof n) return (r = Eg(this, n)).$i = t.alias, r.op = t.desc, r.nt = t.height, 
            r.Re = Ct.EXTENT_LAYER, r.xo.name = "extent", r.xo.userData.type = "extent", r.sp = {}, 
            r.ep(t, e), r;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && Mg(t, e), t = n, Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }();
    var jg = function() {
        var t = n, e = Sg;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t, e) {
            var r;
            if (this instanceof n) return (r = Ag(this, n)).Re = Ct.MODEL_LAYER, r.xo.name = "model", 
            r.xo.userData.type = "model", r.$i = "model", r.ap = {}, r.ip = new Map(), r.ep(t, e), 
            r;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && Rg(t, e), t = n, (e = [ {
            key: "height",
            get: function() {
                return this.Bt.nt;
            }
        } ]) && Lg(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }();
    function Ig(t) {
        return (Ig = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Dg(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Ig(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Ig(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Ig(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function kg(t, e, n) {
        e = Cg(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], Cg(t).constructor) : e.apply(t, n)) && ("object" === Ig(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function Cg(t) {
        return (Cg = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function Ng(t, e) {
        return (Ng = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    var Fg = function() {
        var t = n, e = pg;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n() {
            if (this instanceof n) return kg(this, n);
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && Ng(t, e), t = n, (e = [ {
            key: "collision",
            get: function() {
                return this.Ho;
            },
            set: function(t) {
                this.Ho !== t && (this.Ho = t, t = this.Zi(vx)) && t.ui.Xo();
            }
        } ]) && Dg(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }();
    function Bg(t) {
        return (Bg = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Ug(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Bg(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Bg(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Bg(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function zg(t, e, n) {
        e = Gg(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], Gg(t).constructor) : e.apply(t, n)) && ("object" === Bg(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        return Hg(r);
    }
    function Gg(t) {
        return (Gg = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function Hg(t) {
        if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return t;
    }
    function Vg(t, e) {
        return (Vg = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    var Wg = function() {
        var t = n, e = Fg;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t, e) {
            var r;
            if (this instanceof n) return (r = zg(this, n)).Re = Ct.LABEL_LAYER, r.xo.userData.type = "label", 
            r.xo.name = "label", r.xo.mapNode = Hg(r), r.$i = "label", r.cp = {}, r.ep(t, e), 
            r.Ho = !0, r;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && Vg(t, e), t = n, (e = [ {
            key: "type",
            get: function() {
                return this.Re;
            }
        } ]) && Ug(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }();
    function Yg(t) {
        return (Yg = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Xg(t, e, n) {
        e = Zg(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], Zg(t).constructor) : e.apply(t, n)) && ("object" === Yg(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        return qg(r);
    }
    function Zg(t) {
        return (Zg = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function qg(t) {
        if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return t;
    }
    function Kg(t, e) {
        return (Kg = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    var Jg = function() {
        var t = n, e = Fg;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t, e) {
            var r;
            if (this instanceof n) return (r = Xg(this, n)).Re = Ct.FACILITY_LAYER, r.xo.userData.type = "facility", 
            r.xo.name = "facility", r.$i = "facility", r.fp = {}, r.Ho = !0, r.xo.mapNode = qg(r), 
            r.ep(t, e), r;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && Kg(t, e), t = n, Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }();
    function Qg(t) {
        return (Qg = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function $g(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Qg(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Qg(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Qg(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function tb(t, e, n) {
        e = eb(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], eb(t).constructor) : e.apply(t, n)) && ("object" === Qg(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function eb(t) {
        return (eb = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function nb(t, e) {
        return (nb = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    var rb = function() {
        var t = n, e = Sg;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t, e) {
            var r;
            if (this instanceof n) return (r = tb(this, n)).Re = Ct.EXTERNAL_MODEL_LAYER, r.xo.name = "externalModel", 
            r.xo.userData.type = "externalModel", r.$i = "externalModel", r.ap = {}, r.ep(t, e), 
            r;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && nb(t, e), t = n, (e = [ {
            key: "height",
            get: function() {
                return this.Bt.nt;
            }
        }, {
            key: "beforRemove",
            value: function() {
                this.traverse(function(t) {
                    t.beforRemove && t.beforRemove();
                });
            }
        } ]) && $g(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }();
    function ib(t) {
        return (ib = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function ob(t, e, n) {
        e = ab(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], ab(t).constructor) : e.apply(t, n)) && ("object" === ib(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function ab(t) {
        return (ab = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function sb(t, e) {
        return (sb = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    var lb = function() {
        var t = n, e = jd;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n() {
            var t;
            if (this instanceof n) return (t = ob(this, n)).Re = Ct.WALL_MARKER, t;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && sb(t, e), t = n, Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }();
    function ub(t) {
        return (ub = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function cb(t, e, n) {
        e = hb(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], hb(t).constructor) : e.apply(t, n)) && ("object" === ub(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function hb(t) {
        return (hb = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function fb(t, e) {
        return (fb = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    var pb = function() {
        var t = n, e = jd;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n() {
            var t;
            if (this instanceof n) return (t = cb(this, n)).Re = Ct.TUBE_MARKER, t.ph(), t;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && fb(t, e), t = n, Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }();
    function db(t) {
        return (db = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function yb(t, e, n) {
        e = mb(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], mb(t).constructor) : e.apply(t, n)) && ("object" === db(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function mb(t) {
        return (mb = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function vb(t, e) {
        return (vb = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    Object.assign(pb.prototype, {
        ph: function() {
            this.oh = new ay(7631988), this.sh = new B(), this.ah = new Ic(8947848, 1.2), this.ah.position.set(-1, 1, 1).normalize(), 
            this.ah.castShadow = !1, this.ah.target = this.sh, this.uh = new Ic(3355443), this.uh.position.set(-.5, 1, -1).normalize(), 
            this.uh.target = this.sh, this.xo.add(this.ah), this.xo.add(this.uh), this.xo.add(this.oh), 
            this.xo.add(this.sh);
        }
    });
    var gb = function() {
        var t = n, e = jd;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n() {
            var t;
            if (this instanceof n) return (t = yb(this, n)).Re = Ct.LINE3D_MARKER, t;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && vb(t, e), t = n, Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }();
    function bb(t) {
        return (bb = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function xb(t, e, n) {
        e = wb(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], wb(t).constructor) : e.apply(t, n)) && ("object" === bb(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function wb(t) {
        return (wb = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function Sb(t, e) {
        return (Sb = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    var _b = function() {
        var t = n, e = jd;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n() {
            var t;
            if (this instanceof n) return (t = xb(this, n)).Re = Ct.SPHERE_MARKER, t;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && Sb(t, e), t = n, Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }(), Eb = ((bw = {}).LAYER_CLASS = new Map(), bw.LAYER_CLASS.set(Ct.EXTENT_LAYER, Wy), 
    bw.LAYER_CLASS.set(Ct.MODEL_LAYER, jg), bw.LAYER_CLASS.set(Ct.LABEL_LAYER, Wg), 
    bw.LAYER_CLASS.set(Ct.FACILITY_LAYER, Jg), bw.LAYER_CLASS.set(Ct.EXTERNAL_MODEL_LAYER, rb), 
    bw.LAYER_CLASS.set(Ct.IMAGE_MARKER, It), bw.LAYER_CLASS.set(Ct.TEXT_MARKER, oh), 
    bw.LAYER_CLASS.set(Ct.POLYGON_MARKER, rh), bw.LAYER_CLASS.set(Ct.EXTRUDE_MARKER, ih), 
    bw.LAYER_CLASS.set(Ct.HEAT_MAP_MARKER, oy), bw.LAYER_CLASS.set(Ct.DYNAMIC_MODEL_MARKER, gy), 
    bw.LAYER_CLASS.set(Ct.LINE_MARKER, Oy), bw.LAYER_CLASS.set(Ct.LOCATION_MARKER, jy), 
    bw.LAYER_CLASS.set(Ct.DOM_MARKER, Fy), bw.LAYER_CLASS.set(Ct.WALL_MARKER, lb), bw.LAYER_CLASS.set(Ct.TUBE_MARKER, pb), 
    bw.LAYER_CLASS.set(Ct.LINE3D_MARKER, gb), bw.LAYER_CLASS.set(Ct.SPHERE_MARKER, _b), 
    bw);
    function Ob(t) {
        return (Ob = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Mb(t, e) {
        return function(t) {
            if (Array.isArray(t)) return t;
        }(t) || function(t, e) {
            var n = null == t ? null : "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"];
            if (null != n) {
                var r, i, o, a, s = [], l = !0, u = !1;
                try {
                    if (o = (n = n.call(t)).next, 0 === e) {
                        if (Object(n) !== n) return;
                        l = !1;
                    } else for (;!(l = (r = o.call(n)).done) && (s.push(r.value), s.length !== e); l = !0) ;
                } catch (t) {
                    u = !0, i = t;
                } finally {
                    try {
                        if (!l && null != n.return && (a = n.return(), Object(a) !== a)) return;
                    } finally {
                        if (u) throw i;
                    }
                }
                return s;
            }
        }(t, e) || Tb(t, e) || function() {
            throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
        }();
    }
    function Tb(t, e) {
        var n;
        if (t) return "string" == typeof t ? Lb(t, e) : "Map" === (n = "Object" === (n = Object.prototype.toString.call(t).slice(8, -1)) && t.constructor ? t.constructor.name : n) || "Set" === n ? Array.from(t) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? Lb(t, e) : void 0;
    }
    function Lb(t, e) {
        (null == e || e > t.length) && (e = t.length);
        for (var n = 0, r = new Array(e); n < e; n++) r[n] = t[n];
        return r;
    }
    function Ab(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Ob(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Ob(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Ob(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function Pb(t, e, n) {
        e = jb(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], jb(t).constructor) : e.apply(t, n)) && ("object" === Ob(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function Rb() {
        return (Rb = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function(t, e, n) {
            var r = function(t, e) {
                for (;!Object.prototype.hasOwnProperty.call(t, e) && null !== (t = jb(t)); ) ;
                return t;
            }(t, e);
            if (r) return (r = Object.getOwnPropertyDescriptor(r, e)).get ? r.get.call(arguments.length < 3 ? t : n) : r.value;
        }).apply(this, arguments);
    }
    function jb(t) {
        return (jb = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function Ib(t, e) {
        return (Ib = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    Wy = function() {
        var t = n, e = Cn;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t) {
            var e;
            if (this instanceof n) return (e = Pb(this, n)).ze = t.mapOptions, e.Ct = t.states, 
            e.B = t.data, e.rr = e.B.gid, e.hp = e.B.gname, e.lp = e.B.alias, e.dp = e.B.desc, 
            e.nt = 0, e.vp = null, e.pp = [ Ct.EXTENT_LAYER, Ct.EXTERNAL_MODEL_LAYER, Ct.MODEL_LAYER, Ct.LABEL_LAYER, Ct.FACILITY_LAYER ], 
            e.ht = 1, e.mp = !0, e.yp = new Jn(), e.yp.isEffect = !0, e;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && Ib(t, e), t = n, (e = [ {
            key: "bound",
            get: function() {
                return dd(this);
            }
        }, {
            key: "height",
            get: function() {
                return this.nt;
            }
        }, {
            key: "type",
            get: function() {
                return this.B.Re;
            }
        }, {
            key: "center",
            get: function() {
                var t = this.vp;
                return {
                    x: (t.minX + t.maxX) / 2,
                    y: (t.minY + t.maxY) / 2
                };
            }
        }, {
            key: "x",
            get: function() {
                return this.center.x;
            }
        }, {
            key: "y",
            get: function() {
                return this.center.y;
            }
        }, {
            key: "visible",
            get: function() {
                return this.Yi;
            },
            set: function(t) {
                var e = this;
                (t = (this.Yi = t, this.traverse(function(t) {
                    t.xo.visible = !(!t.visible || !e.Yi);
                }), this.Zi(vx))) && t.ui.Xo();
            }
        }, {
            key: "level",
            get: function() {
                return this.rr;
            }
        }, {
            key: "name",
            get: function() {
                return this.hp;
            }
        }, {
            key: "ID",
            get: function() {
                return this.Ae;
            }
        }, {
            key: "alias",
            get: function() {
                return this.lp;
            }
        }, {
            key: "floorID",
            get: function() {
                return this.B.floorId;
            }
        }, {
            key: "effectScene",
            get: function() {
                return this.yp;
            }
        }, {
            key: "getLayers",
            value: function(t, e) {
                if (void 0 === t) return this.Nt;
                for (var n = [], r = 0; r < this.Nt.length; r++) 0 == (this.Nt[r].type & t) == !!e && n.push(this.Nt[r]);
                return n;
            }
        }, {
            key: "getExtendMesh",
            value: function() {
                var t = this.getLayers(Ct.EXTENT_LAYER)[0];
                return t ? t.Nt[0].xi : null;
            }
        }, {
            key: "getExtendByCoords",
            value: function(t) {
                for (var e = null, n = this.getLayers(Ct.EXTENT_LAYER)[0], r = 0; r < n.Nt.length; r++) {
                    var i = n.Nt[r], o = i.B.Ce[0];
                    if (Ve.Fn(t, o, o.length)) {
                        e = i;
                        break;
                    }
                }
                return e;
            }
        }, {
            key: "getModelMeshs",
            value: function() {
                for (var t = this.getLayers(Ct.MODEL_LAYER)[0], e = [], n = 0; n < t.Nt.length; n++) e.push(t.Nt[n].xi);
                return e;
            }
        }, {
            key: "getBound",
            value: function() {
                return this.B.getBound().toObject();
            }
        }, {
            key: "setExtentImage",
            value: function(t) {
                for (var e = this.getLayers(Ct.EXTENT_LAYER)[0], n = 0; n < e.Nt.length; n++) e.Nt[n].kh(t);
            }
        }, {
            key: "clearExtentImage",
            value: function() {
                this.setExtentImage("");
            }
        }, {
            key: "getOrCreateLayer",
            value: function(t) {
                var e = this.getLayers(t)[0];
                return void 0 !== e || (e = new (Eb.LAYER_CLASS.get(t))(), this.Si(e), this.Zi(vx).It.Hi()), 
                e;
            }
        }, {
            key: "getMapCoordsRange",
            value: function() {
                return this.vp;
            }
        }, {
            key: "opacity",
            value: function() {
                return this.ht;
            }
        }, {
            key: "remove",
            value: function(t) {
                t.beforRemove && t.beforRemove(), Rb(jb(n.prototype), "remove", this).call(this, t), 
                (t = this.Zi(vx)) && t.It && t.It.Hi();
            }
        } ]) && Ab(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }();
    var Db = (Object.assign(Wy.prototype, {
        bp: function() {
            var t = this.Ct.Bi(this.Bt.Ae);
            t.nonFocusAlphaMode && (this.Bt.level === this.rr ? 1 !== this.ht && (this.ht = 1, 
            this.mp = !0) : this.ht !== t.nonFocusAlpha && (this.ht = t.nonFocusAlpha, this.mp = !0));
        },
        Si: function(t) {
            (t.Bt = this).Nt.push(t), this.needUpdateBound = !0, t.init(), this.gp(t);
        },
        gp: function(t) {
            this.yp.add(t.xo);
        },
        wp: function() {
            var t, e, n, r = this, i = this.Bt;
            this.Bt.constructor === $p ? this.nt = i.floorSpace * this.rr : 1 === i.visibleLevels.length && this.Ct.Rt != i.buildingID ? (n = i.parent.Dt, 
            this.nt = n.getFloor(n.level).height) : (t = 1 / 0, e = 0, (n = i.alignHeight).forEach(function(n, i, o) {
                Math.abs(r.rr - i) < t && (t = Math.abs(r.rr - i), e = i);
            }), this.nt = n.get(e) + i.floorSpace * (this.rr - e));
        },
        _p: function(t) {
            t.Re === Ct.LOCATION_MARKER && t.Nt.forEach(function(t) {
                t.Lv();
            });
        },
        ir: function(t) {
            function e() {
                o._o.Nt.forEach(function(t) {
                    t.Re === Ct.LINE_MARKER && t.Lv({
                        needUpdateCrossLine: 1 < n.parent.visibleLevels.length
                    });
                }), o.enableUpdateNode();
            }
            var n = this, r = void 0 === (t = t || {}).animate || t.animate, i = void 0 !== t.duration ? t.duration : .5, o = this.Zi(vx), a = this.nt;
            this.wp(), r ? (this.Sp || (this.Sp = new ne()), this.Sp.nn([ a ]).en([ this.nt ]).rn(i).an(function(t) {
                n.traverse(function(e) {
                    e.Re !== Ct.LINE_MARKER && e.Re !== Ct.LOCATION_MARKER && (e.xo.position.y = t.destination[0]), 
                    n._p(e);
                }), e();
            }).un(function() {
                t.finish && t.finish(), o.Oi.Ai(n.Sp);
            }), o.Oi.Si(this.Sp.$t())) : (this.Sp && this.Sp.stop(), this.traverse(function(t) {
                t.Re !== Ct.LINE_MARKER && t.Re !== Ct.LOCATION_MARKER && (t.xo.position.y = n.nt), 
                n._p(t);
            }), e());
        },
        xp: function(t) {
            for (var e = 0; e < this.Nt.length; e++) if ("externalModel" === this.Nt[e].$i) this.Nt[e].xo.traverse(function(e) {
                if ("Mesh" === e.type && e.material.length) for (var n = 0; n < e.material.length; n++) e.material[n].userData.oldAlpha || (e.material[n].userData.oldAlpha = e.material[n].opacity), 
                e.material[n].opacity = t;
            }); else for (var n = this.Nt[e].xo.children, r = 0; r < n.length; r++) n[r].material && (n[r].material.userData.oldAlpha || (n[r].material = n[r].material.clone(), 
            n[r].material.userData.oldAlpha = n[r].material.opacity), n[r].material.opacity = t);
        },
        Ep: function() {
            for (var t = 0; t < this.Nt.length; t++) if ("externalModel" === this.Nt[t].$i) this.Nt[t].xo.traverse(function(t) {
                if ("Mesh" === t.type) if (t.material.length) for (var e = 0; e < t.material.length; e++) t.material[e].userData.oldAlpha && (t.material[e].opacity = t.material[e].userData.oldAlpha); else t.material.userData.oldAlpha && (t.material.opacity = t.material.userData.oldAlpha);
            }); else for (var e = this.Nt[t].xo.children, n = 0; n < e.length; n++) e[n].material && e[n].material.userData.oldAlpha && (e[n].material.opacity = e[n].material.userData.oldAlpha);
        },
        Mp: function() {
            var t = this;
            this.Bt.Bt.hr.cr.get(this.Bt.Ji).Nt.forEach(function(e) {
                e.gid === t.rr && (e = e.Nt.get(Ct.EXTENT_LAYER).getBound(), t.vp = {
                    minX: e.V.x,
                    minY: e.V.y,
                    maxX: e.H.x,
                    maxY: e.H.y
                });
            });
        },
        Op: function() {
            var t, e = this, n = this.B, r = null, i = this.Zi(vx), o = function(t, e) {
                var n, r, i, o, a = "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"];
                if (a) return r = !(n = !0), {
                    s: function() {
                        a = a.call(t);
                    },
                    n: function() {
                        var t = a.next();
                        return n = t.done, t;
                    },
                    e: function(t) {
                        r = !0, i = t;
                    },
                    f: function() {
                        try {
                            n || null == a.return || a.return();
                        } finally {
                            if (r) throw i;
                        }
                    }
                };
                if (Array.isArray(t) || (a = Tb(t)) || e && t && "number" == typeof t.length) return a && (t = a), 
                o = 0, {
                    s: e = function() {},
                    n: function() {
                        return o >= t.length ? {
                            done: !0
                        } : {
                            done: !1,
                            value: t[o++]
                        };
                    },
                    e: function(t) {
                        throw t;
                    },
                    f: e
                };
                throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
            }(n.Nt);
            try {
                for (o.s(); !(t = o.n()).done; ) !function() {
                    var n = (o = Mb(t.value, 2))[0], o = o[1];
                    if (!e.Nt.some(function(t) {
                        return t.type === n;
                    })) {
                        var a = Eb.LAYER_CLASS.get(n);
                        r = new a(o, {
                            map: i
                        }), e.Si(r);
                    }
                }();
            } catch (n) {
                o.e(n);
            } finally {
                o.f();
            }
        },
        Tp: function(t, e) {
            for (var n = null, r = 0; r < t.length; r++) if ("" + t[r].Re == "" + e) {
                n = t[r];
                break;
            }
            return n;
        },
        Zd: function(t) {
            return this.Nt[2].ip.get(t);
        }
    }), Wy), kb = {
        isDestory: !1,
        textureCanvas: null,
        dispose: function() {}
    };
    function Cb(t) {
        return (Cb = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Nb(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Cb(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Cb(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Cb(t) ? t : String(t);
            }(r.key), r);
        }
    }
    jg = function(t, e, n) {
        return e && Nb(t.prototype, e), n && Nb(t, n), Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }(function t(e, n, r, i) {
        if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
        this.jt = e, this.ze = n, this.Ct = r, this.Kt = i, this.Fr = new Iu(this), this.ze.themeTool && this.ze.themeTool.setMaterialManager(this.Fr), 
        this.B = null, this.kd = new ef(e), this.kd.pf = this.ze.ClassicMaterial, this.jp = new sf(e), 
        this.Th = new zu(this), this.xc = new Map(), this.Do = [], this.Lp = [], this.kp = 0, 
        this.Ap = !1, this.Jt = this.Jt.bind(this), this.Rp = null, this.Cp = this.Cp.bind(this), 
        this.Np = new ut(new h(0, 1, 0), 0), this.pr = new Pn(), this.Pp = !0, e.on("visibleLevelsLoaded", this.Cp), 
        e.on("loaded", this.Cp), e.on("viewChanged", this.Cp), e.on("viewModeChanged", this.Cp), 
        e.on("buildingEntered", this.Cp), e.on("buildingExited", this.Cp), e.on("zoom", this.Cp), 
        e.on("move", this.Cp), e.on("mapLoaded", this.Cp), e.on("levelChanged", this.Cp), 
        e.on("sceneLoaded", this.Cp), e.on("firstViewLoaded", this.Cp), e.on("beforeRender", this.Jt), 
        this.ja = null, this.Mo = this.Mo.bind(this), this.Gs = new Zs({
            disposeCallback: this.Mo,
            enable: !0,
            name: "NodeManager",
            mapCreateTime: this.jt.du
        });
    });
    var Fb = (Object.assign(jg.prototype, {
        Cp: function(t) {
            var e, n = this;
            if ("visibleLevelsLoaded" !== t.type && "loaded" !== t.type && "viewChanged" !== t.type || (this.Ct.Dp = !0, 
            this.Xo()), "viewModeChanged" === t.type && this.jt.kt.Ft.updateCheck(), "mapLoaded" === t.type && this.jt.Ip(function(t) {
                n.Fp({
                    bid: t.Ae
                });
            }), "move" === t.type && this.jt.Gp(), "buildingEntered" !== t.type && "buildingExited" !== t.type || this.Fp({
                bid: t.buildingID
            }), "zoom" === t.type) {
                if (this.jt.Gp(), this.jt.traverse(function(t) {
                    t !== n.jt.Dt && (n.Fp({
                        bid: t.Ae
                    }), t.Bf());
                }), jt.a.environment === Ut.a.WX) {
                    if (void 0 === kb.lastHandleZoomTime && (kb.lastHandleZoomTime = Date.now()), Date.now() - kb.lastHandleZoomTime < 50) return void (kb.lastHandleZoomTime = Date.now());
                    kb.lastHandleZoomTime = Date.now();
                }
                this.jt.traverse(function(e) {
                    e.visible && e.traverse(function(e) {
                        e.visible && e.traverse(function(e) {
                            e.visible && e.traverse(function(e) {
                                e.type === Ct.EXTERNAL_MODEL && e.xi && (e.B && (e.B.maxlevel <= t.zoom || e.B.minlevel > t.zoom) ? e.Td() : e.fading && e.Od());
                            });
                        });
                    });
                });
            }
            "levelChanged" !== t.type && "visibleLevelsLoaded" !== t.type || (t.buildingID && t.buildingID !== this.jt.ze.buildingID ? (e = this.jt.getBuilding(t.buildingID)) && e.traverse(function(t) {
                t.ir();
            }) : this.jt.traverse(function(e) {
                "levelChanged" === t.type && e.Ae !== n.jt.ze.buildingID && e.Hf(t.level), e.traverse(function(t) {
                    t.ir({
                        animate: !1
                    });
                });
            })), "sceneLoaded" !== t.type || t.buildingID || (this.kp += 5, this.jt.Ye.We({
                type: "progress",
                progressBar: this.kp
            })), "visibleLevelsLoaded" === t.type && void 0 === t.buildingID && (this.kp += 50, 
            this.jt.Ye.We({
                type: "progress",
                progressBar: this.kp
            })), "loaded" === t.type && (this.kp += 30, this.jt.Ye.We({
                type: "progress",
                progressBar: this.kp
            })), "firstViewLoaded" === t.type && (this.kp = 100, this.jt.Ye.We({
                type: "progress",
                progressBar: this.kp
            }));
        },
        T0: function(t) {
            var e = new h().copy(this.jt.kt.Ft.target), n = new Mt(0, 0);
            return e.y = t + n.y, 10 / ("PerspectiveCamera" === this.jt.He.type ? (t = this.jt.He.near, 
            n = this.jt.He.fov, e = this.jt.kt.Ft.object.position.distanceTo(e), 10 * t * Math.tan(n / 2 * Dt.DEG2RAD) * 2 / this.jt.It.renderer.domElement.clientHeight * e / t) : (n = this.jt.He.top, 
            e = this.jt.He.bottom, 10 * Math.abs(n - e) / this.jt.It.renderer.domElement.clientHeight / this.jt.He.zoom));
        },
        Jt: function() {
            this.Ct.Pc && (this.Up(), this.Bp(), this.Po(), this.Io(), this.jt.It.Jo(), this.jt.It.Vo());
        },
        Xo: function() {
            this.jt.It.Xo();
        },
        Hi: function() {
            this.jt.It.Hi();
        },
        Hp: function(t, e) {
            var n, r;
            return !(t.getBound && e && (t = t.boundNoClone) && (!0, n = t.max, t = t.min, r = e.max, 
            e = e.min, n.x < e.x || t.x > r.x || n.y < e.y || t.y > r.y));
        },
        zp: function(t, e) {
            for (var n = [], r = [], i = this.ze.container.clientWidth, o = this.ze.container.clientHeight, a = (n.push(Rt.coordsScreenToMap(this.jt, {
                x: 0,
                y: 0,
                level: e,
                buildingID: t.Ae
            })), n.push(Rt.coordsScreenToMap(this.jt, {
                x: i,
                y: 0,
                level: e,
                buildingID: t.Ae
            })), n.push(Rt.coordsScreenToMap(this.jt, {
                x: i,
                y: o,
                level: e,
                buildingID: t.Ae
            })), n.push(Rt.coordsScreenToMap(this.jt, {
                x: 0,
                y: o,
                level: e,
                buildingID: t.Ae
            })), t.visibleLevels), s = new Xe(), l = 0; l < a.length; l++) {
                var u = t.getFloor(a[l]).getBound();
                s._e([ u.max, u.min ]);
            }
            return r.push({
                x: s.min.x,
                y: s.min.y
            }), r.push({
                x: s.min.x,
                y: s.max.y
            }), r.push({
                x: s.max.x,
                y: s.max.y
            }), r.push({
                x: s.max.x,
                y: s.min.y
            }), i = [], rp.PolygonClip(n, r, i), (o = new tp()).setFromPoints(i), o;
        },
        af: function(t, e, n, r) {
            var i = t.Ce, o = t.getBound(), a = new Af(), s = i[0];
            if (0 < s.length) {
                a.moveTo(s[0].x - o.center.x, s[0].y - o.center.y);
                for (var l = 1; l < s.length; l++) a.lineTo(s[l].x - o.center.x, s[l].y - o.center.y);
            }
            if (1 < i.length) for (var u = 1; u < i.length; u++) {
                var c = i[u], h = new Lf();
                if (0 < c.length) {
                    h.moveTo(c[0].x - o.center.x, c[0].y - o.center.y);
                    for (var f = 1; f < c.length; f++) h.lineTo(c[f].x - o.center.x, c[f].y - o.center.y);
                }
                a.holes.push(h);
            }
            for (var p, d, y, m = null, v = (m = 0 === e ? new Zf(a) : new Kf(a, {
                depth: e,
                bevelEnabled: !1
            }), r ? (p = n.min.x, d = n.min.y, y = n.max.x - p, n.max.y - d) : (p = o.min.x, 
            d = o.min.y, y = o.max.x - p, o.max.y - d)), g = m.faces, b = g.length, x = 0; x < b; x++) {
                var w = m.vertices[g[x].a], S = m.vertices[g[x].b], _ = m.vertices[g[x].c];
                m.faceVertexUvs[0][x][0].x = (w.x + o.center.x - p) / y, m.faceVertexUvs[0][x][0].y = (w.y + o.center.y - d) / v, 
                m.faceVertexUvs[0][x][1].x = (S.x + o.center.x - p) / y, m.faceVertexUvs[0][x][1].y = (S.y + o.center.y - d) / v, 
                m.faceVertexUvs[0][x][2].x = (_.x + o.center.x - p) / y, m.faceVertexUvs[0][x][2].y = (_.y + o.center.y - d) / v;
            }
            return m.computeBoundingSphere(), {
                geometry: m,
                shape: a
            };
        },
        Gf: function(t) {
            var e = this, n = this.Ct.Bi(t.bid);
            n.themeNeedLoad = !0, n.themeLoaded = !1, this.Vp({
                themeID: t.themeID
            }, function(r) {
                n.themeID = t.themeID;
                var i = e.xc.get(t.bid);
                i || (e.xc.set(t.bid, {
                    theme: new Fu()
                }), i = e.xc.get(t.bid)), i.theme.lc(r), n.themeLoaded = !0, t.bid === e.ze.buildingID && (e.Ct.mv(e.Th), 
                e.jt.setBackgroundColor(e.Ct.backgroundColor, e.Ct.backgroundAlpha)), e.Wp();
            });
        },
        Uf: function(t) {
            var e = this.xc.get(t.bid);
            t.data ? (e || (this.xc.set(t.bid, {
                themeExtension: new cp()
            }), e = this.xc.get(t.bid)), e.themeExtension || (e.themeExtension = new cp()), 
            e.themeExtension.lc(t.data)) : e && e.themeExtension && (this.ze.buildingID === t.bid ? e.themeExtension.resize() : (e.themeExtension.tn(), 
            e.themeExtension = null)), this.Ct.mv(this.Th), this.jt.setBackgroundColor(this.Ct.backgroundColor, this.Ct.backgroundAlpha), 
            !1 !== t.needUpdataNode && this.Yp(t);
        },
        tn: function(t) {
            var e = this;
            this.jt.off("visibleLevelsLoaded", this.Cp), this.jt.off("loaded", this.Cp), this.jt.off("viewChanged", this.Cp), 
            this.jt.off("viewModeChanged", this.Cp), this.jt.off("buildingEntered", this.Cp), 
            this.jt.off("zoom", this.Cp), this.jt.off("move", this.Cp), this.jt.off("buildingLoaded", this.Cp), 
            this.jt.off("beforeRender", this.Jt), this.ja = t, this.Fr.tn(function() {
                e.Fr = null, e.Gs.Ps(!0);
            });
        },
        Mo: function() {
            for (var t in this.Do = [], this.kd.tn(), this.kd = null, this.xc.clear(), this.jt = null, 
            this) this["" + t] && this["" + t].tn && this["" + t].tn();
            for (var e in this.ja && this.ja({
                name: "NodeManager"
            }), this) this["" + e] = null, delete this["" + e];
        }
    }), Object.assign(jg.prototype, {
        Nd: function(t, e, n) {
            var r, i = this.Ct.Bi(this.jt.Dt.Ae).themeID, o = this.ze, a = this.xc.get(this.ze.buildingID).theme;
            if (r = n === this.ze.buildingID ? o.userThemeURL ? o.userThemeURL + i : o.themeURL + i : (n = (n = this.xc.get(n)) && n.theme ? n.theme.themeID : i, 
            o.userThemeURL ? o.userThemeURL + n : o.themeURL + n), o.isPreview) return i = o.themeURL, 
            "path" === e ? ("1" === t.isuser ? i += a.userPath + "/" : i += a.sysPath + "/", 
            i) : "logoPath" === e ? i + (a.logoPath + "/") : "model" === e ? ("1" === t.isuser ? i += a.userModelPath + "/" : i += a.sysModelPath + "/", 
            i) : void 0;
            if ("model" === e) {
                if (o.externalModelURL) return o.externalModelURL + "models/";
                if (o.userThemeURL) return r + "/models/";
            }
            return r + "/";
        },
        yf: function() {
            var t;
            this.Ct.Xp || this.Ct.qo && 0 === this.Do.length && (t = !0, this.kd.Ha.forEach(function(e) {
                e.loadComplete || (t = !1);
            }), t) && (this.Ct.Xp = !0, this.jt.Ye.We({
                type: "externalFirstLoaded"
            }));
        },
        Zp: function(t, e) {
            var n = this;
            if (this.ze.tile && !this.ze.preLoad) {
                for (var r = [], i = t.building, o = 0; o < i.visibleLevels.length; o++) {
                    var a = i.getFloor(i.visibleLevels[o]);
                    a && 0 === this.qp(a) && (this.Jp(a) ? (a.Op(), this.Kp(a)) : r.push(i.visibleLevels[o]));
                }
                0 < r.length ? ((t = Gp(i, this)).buildings = null, this.jt.hr.Ma(t, function(t, o) {
                    if ("floor" === t) {
                        var a = n.Ct.Qp(i.Ae);
                        if (a.set(o.gid, !0), -1 < r.indexOf(o.gid)) {
                            t = i.getFloor(o.gid);
                            for (var s = (n.$p(t), !0), l = 0; l < r.length; l++) if (!a.get(r[l])) {
                                s = !1;
                                break;
                            }
                            s && e && e();
                        }
                    }
                })) : e && e();
            } else e && e();
        },
        tm: function(t) {
            var e = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {}, n = this.Ct.Bi(t), r = n.themeExtension || e.themeExtension, i = n.themeID || e.themeID;
            i && t ? (this.xc.set(t, {
                theme: new Fu()
            }), n.themeLoaded = !1, n.themeNeedLoad = !0, this.Nc({
                bid: t,
                themeID: i,
                themeExtension: r,
                contentVersion: e.contentVersion
            })) : (n.themeLoaded = !0, n.themeNeedLoad = !1);
        },
        nm: function(t) {
            var e = this, n = (t = t || [], this.jt.ze.buildingOptions), r = n.buildings || n.themeID, i = null;
            !function n() {
                var o = e.jt.getBuildings();
                if (!1 === e.jt.Cc) i = setTimeout(n, 1); else {
                    null !== i && clearTimeout(i);
                    var a = [];
                    if (0 < t.length) for (var s = 0; s < t.length; s++) {
                        var l = t[s].bcode;
                        l = e.im(l);
                        e.tm(l, t[s]), a.push(l);
                    }
                    if (r) for (var u = 0; u < o.length; u++) {
                        var c = o[u].buildingID;
                        a.includes(c) || e.tm(c);
                    }
                    if (a.length !== o.length) for (var h = 0; h < o.length; h++) {
                        var f = o[h].buildingID;
                        a.includes(f) || ((f = e.Ct.Bi(f)).themeLoaded = !0, f.themeNeedLoad = !1);
                    }
                }
            }();
        },
        Nc: function(t) {
            var e = this;
            this.Vp(t, function(n) {
                var r = e.xc.get(t.bid);
                r.theme.lc(n), r.theme.themeID = t.themeID, t.themeExtension && (r.themeExtension = new cp(), 
                r.themeExtension.lc(t.themeExtension)), e.Ct.Bi(t.bid).themeLoaded = !0, t.bid === e.ze.buildingID && (e.Ct.mv(e.Th), 
                e.jt.setBackgroundColor(e.Ct.backgroundColor, e.Ct.backgroundAlpha), e.ze.isPreview ? e.Th.Rc(e.jt) : e.nm(n.buildings)), 
                e.Ct.Pc = e.Dc(), (e.Ct.rm || e.Ct.om) && (e.Kt(null, null, e.Ct.rm, !1, e.Ct.om, e.Ct.Pc), 
                e.Ct.rm) && (e.Ct.rm = !1);
            });
        },
        Vp: function(t, e) {
            var n, r = this;
            t.theme ? e(t.theme) : (n = "_loadTheme" + s.generateUUID(), this.Gs.Ds(n), dp.ts(this.ze.themeURL, t.themeID, function(t) {
                e && e(t), r.Gs.Is(n);
            }, function(t) {
                r.jt.Ye.We({
                    type: "info",
                    InfoMode: t
                }), r.Gs.Is(n);
            }, t.contentVersion));
        },
        sm: function(t) {
            var e, n = this.Ct.Bi(t.Ae);
            n.buildingLoaded || (this.ze.tile ? this.Wo(t) ? ((e = Gp(t, this)).buildings = null, 
            e.isOutdoor = !1, this.am(e)) : n.sceneLoaded || this.ze.tile && ((e = Gp(t, this)).buildings = null, 
            e.isOutdoor = !1, this.um(e)) : ((n = Object.assign({}, this.ze)).isOutdoor = !1, 
            n.buildingID = t.Ji, n.bid = t.Ae, n.buildings = null, this.fm(n)));
        },
        hm: function(t, e) {
            var n = null;
            e = {
                type: "info",
                InfoMode: e,
                buildingID: n = (t = this.jt.getBuilding(t.bid)) ? t.Ae : n
            };
            this.jt.pi.error.push(e), this.jt.Ye.We(e);
        },
        lm: function(t, e) {
            var n = null;
            t.buildingID !== t.mapID && (n = t.bid), this.dm({
                bid: t.bid,
                levels: e.levels
            }), this.jt.Ye.We({
                type: "sceneLoaded",
                buildingID: n
            }), this.jt.Ye.We({
                type: "info",
                InfoMode: Nt.INFO,
                mapID: e.mid,
                buildingID: n
            });
        },
        fm: function(t) {
            var e = this;
            this.jt.hr.Oa(t, function(n, r) {
                var i;
                if (!(0 < e.jt.pi.error.length)) if ("complete" === n) if (t.isOutdoor) {
                    var o = e.vm(r);
                    if (!(0 < e.jt.pi.error.length)) {
                        var a = e.Ct.Bi(o.Ae);
                        if (a.buildingLoaded = !0, !(a.sceneLoaded = !0) !== e.pm(r, !0)) for (var s = e.Ct.Qp(o.Ae), l = 0; l < o.tr.length; l++) {
                            var u = r.Nt.get(o.tr[l]), c = (s.set(u.gid, !0), e.ca(o, u, o.tr[l]));
                            e.$p(c), e.ym(o, u.gid);
                        }
                    }
                } else e.jt.Nt.forEach(function(t) {
                    if (t.Ji === r.mid) {
                        t.tr = r.levels, t.er = new nt(new h(r.minX, r.minY), new h(r.maxX, r.maxY));
                        for (var n = e.Ct.Bi(t.Ae), i = (n.buildingLoaded = !0, n.sceneLoaded = !0, e.Ct.Qp(t.Ae)), o = 0; o < r.levels.length; o++) {
                            var a = r.Nt.get(r.levels[o]), s = (i.set(a.gid, !0), e.ca(t, a, r.levels[o]));
                            e.$p(s), e.ym(t, a.gid);
                        }
                    }
                }); else "decode" === n ? (a = null, (i = e.jt.getBuilding(t.bid)) && (a = i.Ae), 
                e.dm({
                    bid: void 0 !== t.bid ? t.bid : t.buildingID,
                    levels: r.scene.levels
                }), e.jt.Ye.We({
                    type: "sceneLoaded",
                    buildingID: a
                }), e.jt.Ye.We({
                    type: "info",
                    InfoMode: Nt.INFO,
                    mapID: r.scene.mid,
                    buildingID: a
                })) : "error" === n && e.hm(t, r);
            });
        },
        pm: function(t, e) {
            if (t.buildings) for (var n = 0; n < t.buildings.length; n++) {
                var r = this.bm(t.buildings[n]);
                if (0 < this.jt.pi.error.length && e) return !1;
                this.sm(r);
            }
            return t.buildings && 0 !== t.buildings.length && t.buildings.length !== this.jt.Nt.length - 1 || (this.jt.Cc = !0), 
            !0;
        },
        gm: function(t, e) {
            for (var n = 0; n < t.tr.length; n++) {
                var r = e.Nt.get(t.tr[n]);
                this.ca(t, r, t.tr[n]);
            }
        },
        am: function(t) {
            var e = this;
            this.jt.hr.Ma(t, function(n, r) {
                var i, o, a;
                0 < e.jt.pi.error.length || ("building" === n && (i = null, a = (o = e.Ct.Bi(t.bid)).sceneLoaded, 
                o.buildingLoaded = !0, o.sceneLoaded = !0, t.buildingID === t.mapID ? (i = e.vm(r), 
                e.pm(r, !1)) : (i = e.jt.getBuilding(t.bid), a || (i.tr = r.levels, i.er = new nt(new h(r.minX, r.minY), new h(r.maxX, r.maxY)))), 
                a || e.gm(i, r)), "scene" === n && e.lm(t, r), "floor" === n && (o = e.jt.getBuilding(t.bid), 
                e.Ct.Qp(o.Ae).set(r.gid, !0), (a = o.getFloor(r.gid)).B = r, e.$p(a), e.ym(o, r.gid)), 
                "error" === n && e.hm(t, r));
            });
        },
        um: function(t) {
            var e = this, n = null;
            this.jt.hr.Hs(t, function(r, i) {
                "building" === r ? ((n = e.jt.getBuilding(t.bid)).tr = i.levels, n.er = new nt(new h(i.minX, i.minY), new h(i.maxX, i.maxY)), 
                e.Ct.Bi(n.Ae).sceneLoaded = !0, e.gm(n, i), e.ym(n, void 0)) : "scene" === r && e.lm(t, i);
            }, function(n, r) {
                var i = null, o = e.jt.getBuilding(t.bid);
                o && (i = o.Ae), e.jt.Ye.We({
                    type: "info",
                    InfoMode: r,
                    buildingID: i
                });
            });
        },
        Ff: function(t) {
            this.sm(t);
        },
        ym: function(t, e) {
            var n = this.Ct.Bi(t.Ae), r = n.loaded, i = n.visibleLevelsLoaded;
            this.wm(t), !i && n.visibleLevelsLoaded && (this.Ct.rm && this.Ct.Pc ? (this.Kt(null, e, !0, !0, !1, this.Ct.Pc), 
            this.Ct.rm = !1) : this.Kt(null, e, !1, !0, !1, this.Ct.Pc), i = {
                type: "visibleLevelsLoaded"
            }, t !== this.jt.Dt && (i.buildingID = t.Ae), this.jt.Ye.We(i)), !r && n.loaded && (t !== this.jt.Dt ? this.jt.Ye.We({
                type: "buildingLoaded",
                buildingID: t.Ae
            }) : this.jt.Ye.We({
                type: "mapLoaded"
            })), this.Ct.om && this.Ct.Pc && this.Kt(null, e, !1, !1, !0, this.Ct.Pc);
        },
        Dc: function() {
            for (var t = !0, e = 0; e < this.jt.Nt.length; e++) {
                var n = this.jt.Nt[e];
                if (n.constructor === zp) {
                    if (this.Wo(n) && !this.Ct.Dc(n.Ae)) {
                        t = !1;
                        break;
                    }
                } else if (!this.Ct.Dc(n.Ae)) {
                    t = !1;
                    break;
                }
            }
            return t;
        }
    }), Wg = jg, Object.assign(Wg.prototype, {
        _m: function(t) {
            return null === (t = this.map.getBuilding(t)) ? -1 : (t = t.bounds, Math.sqrt((t.maxX - t.minX) * (t.maxX - t.minX) + (t.maxY - t.minY) * (t.maxY - t.minY)));
        },
        Fp: function(t) {
            t = this.jt.getBuilding(t.bid);
            var e = !0;
            this.Wo(t) && (this.Ff(t), e = !1), t.Cf && (t.Cf.show = e), this.Hi(), this.jt.enableUpdateNode();
        },
        Sm: function(t) {
            var e, n = this;
            return !(this.Wo(t) || (t = t.getFloor(t.level)) && null != (t = t.getLayers(Ct.EXTENT_LAYER)[0]) && (e = !1, 
            t && t.traverse(function(t) {
                e = !ld.isContain(t.coordinates[0], n.jt.xm());
            }), !e));
        },
        Wo: function(t) {
            return !1 !== t.visible && (t.overviewMode === yp.INDOOR || (t.overviewMode !== yp.OUTDOOR || this.Ct.Rt === t.buildingID) && (this.Ct.Rt !== this.jt.ze.buildingID ? this.Ct.Rt === t.Ae : t === this.jt.Dt || !!this.jt.Em(t) && !!this.jt.Mm()));
        },
        vm: function(t) {
            var e = new $p({
                bid: this.ze.buildingID,
                mid: this.ze.mapID,
                height: t.height,
                scaleLevel: t.scaleLevel,
                name: t.mname,
                levels: t.levels,
                x: t.x,
                y: t.y,
                bounds: new nt(new h(t.minX, t.minY), new h(t.maxX, t.maxY))
            });
            return this.jt.Si(e), this.jt.Dt = e, this.jt._t = t.x, this.jt.St = t.y, e;
        },
        bm: function(t) {
            var e = this.Ct.Bi(t.bid);
            if (!e.visibleLevels || 0 === e.visibleLevels.length) {
                for (var n = [], r = 0; r < t.levelChart.length; r += 2) for (var i = 0; i < this.jt.Dt.visibleLevels.length; i++) t.levelChart[r] === this.jt.Dt.visibleLevels[i] && n.push(t.levelChart[r + 1]);
                e.visibleLevels = n;
            }
            if (void 0 === e.level) for (var o = 0; o < t.levelChart.length; o += 2) t.levelChart[o] === this.jt.Dt.level && (e.level = t.levelChart[o + 1]);
            var a = new Map();
            if (t.floors) for (var s = 0; s < t.floors.length; s++) {
                var l = t.floors[s].Ce, u = t.floors[s].gid;
                a.set(u, l);
            }
            var c = new zp(t);
            return e.minLevel && (c.Lf = e.minLevel), e.maxLevel && (c.kf = e.maxLevel), c.Mf = e.overviewMode, 
            c.Om = a, this.jt.Si(c), c;
        },
        im: function(t) {
            for (var e = null, n = this.jt.getBuildings(), r = 0; r < n.length; r++) if ("" + n[r].bcode == "" + t) {
                e = n[r].buildingID;
                break;
            }
            return e;
        }
    }), Object.assign(Wg.prototype, {
        Tm: function() {
            var t = this;
            this.jt.traverse(function(e) {
                e.traverse(function(e) {
                    (e = e.getLayers(Ct.LABEL_LAYER)[0]) && e.traverse(function(e) {
                        t.Ct.iv === Hp.FID ? e.text = e.B.fid : t.Ct.iv === Hp.ENAME ? e.text = e.B.ename : e.text = e.B.name;
                    });
                });
            });
        },
        Wf: function(t) {
            var e = 0;
            e = this.jt.He.isPerspectiveCamera ? t / (this.jt.It.renderer.domElement.clientHeight / (2 * Math.tan(this.jt.He.fov * Dt.DEG2RAD / 2))) : t * Math.abs(this.jt.He.top - this.jt.He.bottom) / this.jt.He.zoom / this.jt.It.renderer.domElement.clientHeight;
            return isNaN(e) ? 1 : e;
        },
        jm: function(t, e) {
            var n;
            return this.jt.He.isPerspectiveCamera ? (n = new b(), t.updateMatrixWorld(), this.jt.qe.updateMatrixWorld(), 
            n.multiplyMatrices(this.jt.qe.matrixWorldInverse, t.matrixWorld), t = new h().applyMatrix4(n), 
            this.Wf(e) * Math.abs(t.z)) : this.Wf(e);
        }
    }), Object.assign(Wg.prototype, {
        Yp: function(t) {
            var e = this;
            null !== this.Rp && (clearTimeout(this.Rp), this.Rp = null), this.Rp = setTimeout(function() {
                e.Wp({
                    changeScopeTypes: t.changeScopeTypes,
                    fids: t.fids
                });
            }, t.time || 0);
        },
        Wp: function() {
            function t() {
                if (o.length <= 0) e.jt.off("update", t); else {
                    for (var n = 0, r = 0; r < o.length && !(20 < ++n); r++) o[r].jh(e, e.Th), o.splice(r, 1), 
                    r--;
                    e.jt.enableUpdateRender();
                }
            }
            var e = this, n = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}, r = n.changeScopeTypes, i = n.fids, o = (r = r || [ Ct.EXTENT, Ct.MODEL, Ct.LABEL, Ct.FACILITY, Ct.EXTERNAL_MODEL ], 
            i = i || [], []);
            this.jt.off("update", t), this.jt.traverse(function(t) {
                t.traverse(function(t) {
                    t.parent.visibleLevels.includes(t.level) && t.traverse(function(t) {
                        t.traverse(function(t) {
                            (!(0 < i.length) || i.includes(t.FID)) && r.includes(t.type) && t.visible && t.jh && t.xi && o.push(t);
                        });
                    });
                });
            }), this.jt.on("update", t);
        },
        Eh: function(t, e) {
            t.xi && (t.Cf && !t.Cf.visible || !t.Yi ? t.xi.visible = !1 : t.xi.visible = t.B.maxlevel && e >= t.B.minlevel && e < t.B.maxlevel);
        },
        Lm: function() {
            this.xc.set(this.ze.buildingID, {
                theme: new Fu()
            });
            var t = this.Ct.Bi(this.ze.buildingID);
            t.themeNeedLoad = !0, t.themeLoaded = !1, this.Nc({
                bid: this.ze.buildingID,
                themeID: this.ze.themeID,
                theme: this.ze.Mh,
                themeExtension: this.ze.themeExtension
            }), this.ze.tile ? ((t = Object.assign({}, this.ze, {
                level: t.level,
                visibleLevels: t.visibleLevels
            })).bid = t.buildingID, this.am(t)) : this.fm(this.ze);
        },
        Po: function() {
            var t = 0 < arguments.length && void 0 !== arguments[0] && arguments[0], e = 1 < arguments.length ? arguments[1] : void 0;
            if (this.Ct.Dp && this.Pp && (jt.a.environment !== Ut.a.WX || 1 != this.jt.It.Xe || this.jt.It.so % 2 == 0)) {
                this.Do = [];
                for (var n = e || this.jt.getZoom(), r = this.ze.tile && !this.ze.preLoad, i = 0; i < this.jt.Nt.length; i++) for (var o = this.jt.Nt[i], a = this.Sm(o), s = 0; s < o.Nt.length; s++) {
                    for (var l = o.Nt[s], u = null, c = -1 < o.visibleLevels.indexOf(l.level), h = (c && !a && (u = this.zp(o, l.level), 
                    0 === this.qp(l)) && this.Jp(l) && (l.Op(), this.Kp(l), this.Hi()), []), f = 0; f < l.Nt.length; f++) {
                        var p = l.Nt[f];
                        if (!c || a && r) this.km(p) && r && h.push(p); else for (var d = 0; d < p.Nt.length; d++) {
                            var y = p.Nt[d], m = !0;
                            a || !y.visible || y.Cf && !y.Cf.visible ? m = !1 : y.B && y.B.maxlevel && (n >= y.B.maxlevel || n < y.B.minlevel) ? (m = !1) === y.canDispose && (m = !0) : this.Hp(y, u) || !0 === t || (m = !1), 
                            !y.xi && m && this.Do.push([ i, y ]), y.initTargetShow = m, !y.xi || m || y.fading || y.Uo || y.xh && y.xh(), 
                            y.Uo && y.zo(1);
                        }
                    }
                    for (var v = 0; v < h.length; v++) l.remove(h[v]), h[v].dispose();
                }
                this.Ct.Dp = !1, this.jt.enableUpdateRender();
            }
        },
        km: function(t) {
            var e = Ct.EXTENT_LAYER | Ct.FACILITY_LAYER | Ct.LABEL_LAYER | Ct.MODEL_LAYER | Ct.EXTERNAL_MODEL_LAYER;
            return 0 != (t.Re & e);
        },
        Io: function() {
            if (0 < this.Do.length) {
                for (var t = !1, e = 0, n = 0; n < this.Do.length && !(20 < ++e); n++) {
                    var r = this.Do[n][1];
                    r.Re !== Ct.FACILITY && r.Re !== Ct.LABEL || (t = !0), r.lc(), this.Do.splice(n, 1), 
                    n--;
                }
                t && this.Xo(), this.yf(), this.jt.enableUpdateRender(), this.Ct.Zo && 0 === this.Do.length && !this.Ap && (this.jt.Ye.We({
                    type: "firstViewLoaded"
                }), this.Ap = !0);
            }
            !this.Ap && this.Zo && 0 === this.Do.length && (this.jt.Ye.We({
                type: "firstViewLoaded"
            }), this.Ap = !0);
        },
        rp: function(t, e) {
            var n = this.jt.getMapOptions().hideList, r = e.typeID;
            e = e.FID;
            return void 0 === (n = n[t]) || (t = n.typeIDs, void 0 === (n = n.FIDs) && (n = []), 
            !(t = void 0 === t ? [] : t).includes(r) && !n.includes(e));
        },
        Kp: function(t) {
            var e = this;
            t.Bt.Ae === this.ze.buildingID && t.traverse(function(t) {
                t.type !== Ct.MODEL_LAYER && t.type !== Ct.EXTERNAL_MODEL_LAYER && t.type !== Ct.LABEL_LAYER || t.traverse(function(t) {
                    e.jt.traverse(function(n) {
                        if (n !== e.jt.Dt) for (var r = 0; r < n.Rf.length; r++) n.Rf[r] === t.FID && (n.Cf.setFacadeNode(t), 
                        t.Cf = n.Cf);
                    });
                });
            });
        }
    }), Object.assign(jg.prototype, {
        np: function(t) {
            return void 0 === (t = this.jt.getMapOptions().hideList[t]) || 0 !== Object.keys(t).length;
        },
        dm: function(t) {
            var e = this.Ct.Bi(t.bid), n = [];
            e.visibleLevels.forEach(function(e) {
                -1 < t.levels.indexOf(e) && n.push(e);
            }), e.visibleLevels = n;
        },
        Am: function(t, e) {
            function n() {
                r.jt.It.Hi(), e.finish && e.finish();
            }
            var r = this, i = (e = e || {}, this.Ct.Bi(t.Ae));
            "animate" in e && !e.animate ? (t.traverse(function(t) {
                t.ir({
                    animate: !1
                });
            }), n()) : t.traverse(function(t) {
                t.rr === i.level ? t.ir({
                    finish: function() {
                        n();
                    }
                }) : t.ir({});
            });
        },
        ai: function(t, e) {
            return (t = this.jt.getBuilding(t)) ? t.getFloor(e) : null;
        },
        Rm: function(t) {
            return null !== (t = this.jt.getBuilding(t)) ? t.Nt : [];
        },
        ur: function(t, e) {
            var n = this;
            t.levels.sort(), this.Ct.Bi(t.building.Ae).visibleLevels = t.levels, this.dm({
                bid: t.building.Ae,
                levels: t.building.tr
            }), this.Zp(t, function() {
                n.Hi(), n.jt.It.wi();
                var r = {
                    type: "visibleLevelsLoaded"
                };
                t.building !== n.jt.Dt && (r.buildingID = t.building.Ae), n.jt.Ye.We(r), e && e();
            });
        },
        ar: function(t, e) {
            var n = this, r = (this.jt.Gp(), this.Ct.Bi(t.Ae));
            r.targetLevel = e.level, -1 < r.visibleLevels.indexOf(e.level) ? this.jt.kt.Ui(t, e) : (r.visibleLevels.length <= 1 ? r.visibleLevels = [ e.level ] : r.visibleLevels.push(e.level), 
            t.setVisibleLevels(r.visibleLevels, function() {
                var i;
                r.targetLevel === e.level ? n.jt.kt.Ui(t, e) : (i = {
                    type: "levelChanged",
                    level: e.level
                }, t !== n.jt.Dt && (i.buildingID = t.Ae), n.jt.Ye.We(i), e.finish && e.finish());
            }));
        },
        Jp: function(t) {
            var e = !1;
            return t.B.Nt.forEach(function(t) {
                0 < t.Nt.size && (e = !0);
            }), e;
        },
        qp: function(t) {
            var e = this, n = 0;
            return t.traverse(function(t) {
                e.km(t) && n++;
            }), n;
        },
        wm: function(t) {
            var e = this.Ct.Bi(t.Ae), n = this.Ct.Qp(t.Ae);
            if (!e.visibleLevelsLoaded) {
                for (var r = !0, i = t.visibleLevels, o = 0; o < i.length; o++) n.get(i[o]) || (r = !1);
                e.visibleLevelsLoaded = r;
            }
            this.ze.tile && !this.ze.preLoad ? e.loaded = e.visibleLevelsLoaded : n.size === t.tr.length && (e.loaded = !0), 
            this.Cm();
        },
        Cm: function() {
            var t, e, n = this, r = !0;
            this.jt.traverse(function(t) {
                var e = n.Ct.Bi(t.Ae);
                e.visibleLevelsLoaded || (t.constructor === zp ? n.Wo(t) && !e.visibleLevelsLoaded && (r = !1) : e.visibleLevelsLoaded || (r = !1));
            }), !this.Ct.qo && r && (this.Ct.rm = !0), this.Ct.qo = r, this.Ct.Zo || (e = t = !0, 
            this.jt.traverse(function(r) {
                var i = n.Ct.Bi(r.Ae);
                i.sceneLoaded || (t = !1), (!n.Wo(r) || i.loaded) && t || (e = !1);
            }), !this.Ct.Zo && e && (this.Ct.om = !0), this.Ct.Zo = e);
        },
        zi: function() {
            this.Ct.Nm = !0;
        },
        Up: function() {
            var t = this;
            this.Ct.Nm && (this.Lp = [], this.jt.traverse(function(e) {
                for (var n = 0; n < e.Nt.length; n++) !function(n) {
                    var r = e.Nt[n];
                    r.bp(), r.mp && r.traverse(function(e) {
                        e.traverse(function(e) {
                            e.type !== Ct.EXTENT && e.type !== Ct.FACILITY && e.type !== Ct.LABEL && e.type !== Ct.MODEL && e.type !== Ct.EXTERNAL_MODEL && e.type !== Ct.TEXT_MARKER && e.type !== Ct.DOM_MARKER && e.type !== Ct.EXTRUDE_MARKER && e.type !== Ct.IMAGE_MARKER && e.type !== Ct.POLYGON_MARKER && e.type !== Ct.DYNAMIC_MODEL_MARKER || e.xi && t.Lp.push([ n, e ]);
                        });
                    }), r.mp = !1;
                }(n);
            }), this.Ct.Nm = !1);
        },
        Bp: function() {
            if (0 < this.Lp.length) {
                for (var t = 0, e = 0; e < this.Lp.length && !(++t > this.ze.maxMaterialCount); e++) {
                    var n = this.Lp[e][1];
                    n.update ? n.update() : n.Lh(), this.Lp.splice(e, 1), e--;
                }
                this.jt.enableUpdateRender();
            }
        },
        ca: function(t, e, n) {
            return e = new Db({
                mapOptions: this.ze,
                states: this.Ct,
                data: e,
                key: n
            }), t.Si(e), e.bp(), e.wp(), e;
        },
        $p: function(t) {
            t.Op(), t.Mp(), this.Kp(t);
        },
        Pm: function(t, e) {
            for (var n = !0, r = 0; r < t.length; r++) if (t[r] === e) {
                n = !1;
                break;
            }
            return n;
        },
        Dm: function(t, e, n) {
            var r = [];
            r.push(t);
            for (var i = 0; i < e.length; i++) e[i] !== t && r.push(e[i]);
            if (n) for (var o = 0; o < n.length; o++) this.Pm(r, n[o]) && r.push(n[o]);
            return r;
        }
    }), jg);
    function Bb(t) {
        return (Bb = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Ub(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Bb(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Bb(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Bb(t) ? t : String(t);
            }(r.key), r);
        }
    }
    Jg = function(t, e, n) {
        return e && Ub(t.prototype, e), n && Ub(t, n), Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }(function t() {
        if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
        this.Nt = new Map(), this.Im = [], this.hn = new Date().getTime(), this.Fm = new Map(), 
        this.ja = null, this.Mo = this.Mo.bind(this), this.Oo = 0, this.wo();
    });
    var zb = (Object.assign(Jg.prototype, {
        Si: function(t) {
            if (Array.isArray(t)) {
                this.Nt.set(t[0].Qt, t[0]), t[0].Bt = this;
                for (var e = 1; e < t.length; e++) t[e].zt = t[e - 1].zt + t[e - 1].Yt, t[e].Vt = t[e - 1].Vt + t[e - 1].Yt, 
                this.Nt.set(t[e].Qt, t[e]), t[e].Bt = this;
            } else this.Nt.has(t.Qt) || (this.Nt.set(t.Qt, t), t.Bt = this, t.zt = this.hn);
        },
        Ai: function(t) {
            if (Array.isArray(t)) for (var e = 0; e < t.length; e++) this.Nt.delete(t[e].Qt); else this.Nt.delete(t.Qt);
        },
        Fd: function(t) {
            this.Im.push(t);
        },
        zd: function(t) {
            -1 < (t = this.Im.indexOf(t)) && this.Im.splice(t, 1);
        },
        ji: function(t) {
            this.Fm.set(t.Qt = $t.generateUUID(), t);
        },
        Mi: function(t) {
            this.Fm.delete(t.Qt);
        },
        Jt: function(t, e, n) {
            for (var r = [], i = [], o = 0; o < t.Gt.length; o++) void 0 === t.Ht[o] && (t.Ht[o] = 0), 
            1 <= e ? (r.push(t.Ut[o]), i.push(t.Ut[o] - t.Gt[o] - t.Ht[o])) : (r.push((t.Ut[o] - t.Gt[o]) * e + t.Gt[o]), 
            i.push((t.Ut[o] - t.Gt[o]) * n), t.Ht[o] += (t.Ut[o] - t.Gt[o]) * n);
            t.Jt({
                destination: r,
                delta: i
            }), i.length = r.length = 0;
        },
        wo: function() {
            var t = this, e = (this.Oo = jt.a.window.requestAnimationFrame(this.wo.bind(this)), 
            new Date().getTime()), n = e - this.hn;
            this.Fm.forEach(function(t) {
                return t(n);
            });
            for (var r = 0; r < this.Im.length; r++) this.Im[r].update(n / 1e3);
            this.Nt.forEach(function(r) {
                var i, o;
                r.qt || (r.Zt ? r.Wt += n : (i = (e - r.zt) / r.Yt, o = n / r.Yt, t.Jt(r, i, o), 
                i = e - r.zt - r.Vt, r.Yt <= i && (r.Ht = [], r.Xt ? (r.zt = e, r.Kt && r.Kt()) : (o = r.qt, 
                r.qt = !0, !o && r.Kt && r.Kt()))));
            }), this.hn = e;
        },
        tn: function(t) {
            this.ja = t, this.Mo();
        },
        Mo: function() {
            this.Oo && (jt.a.window.cancelAnimationFrame(this.Oo), this.Oo = 0), this.Nt.forEach(function(t) {
                t.tn();
            }), this.Nt.clear(), this.Im = [], this.Fm.clear(), this.ja && this.ja({
                name: "Animator"
            });
        }
    }), Jg);
    function Gb(t) {
        return (Gb = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Hb(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Gb(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Gb(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Gb(t) ? t : String(t);
            }(r.key), r);
        }
    }
    rb = function(t, e, n) {
        return e && Hb(t.prototype, e), n && Hb(t, n), Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }(function t() {
        if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
        this.wt = {};
    });
    var Vb = (Object.assign(rb.prototype, {
        Gm: function(t, e) {
            this.Um(t, e) || (void 0 === this.wt[t] && (this.wt[t] = []), this.wt[t].push(e));
        },
        Um: function(t, e) {
            return e ? void 0 !== this.wt[t] && -1 !== this.wt[t].indexOf(e) : void 0 !== this.wt[t] && 0 < this.wt[t].length;
        },
        Bm: function(t, e) {
            void 0 !== this.wt[t] && -1 !== (e = this.wt[t].indexOf(e)) && this.wt[t].splice(e, 1);
        },
        We: function(t) {
            if (void 0 !== this.wt[t.type]) for (var e = this.wt[t.type].slice(0), n = 0, r = e.length; n < r; n++) e[n].call(this, t);
        }
    }), rb), Wb = (It = {
        Entire: 2,
        Individual: 4
    }, Object.freeze(It), It), Yb = 0;
    function Xb(t) {
        return (Xb = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Zb(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Xb(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Xb(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Xb(t) ? t : String(t);
            }(r.key), r);
        }
    }
    var qb = function(t, e, n) {
        return e && Zb(t.prototype, e), n && Zb(t, n), Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }(function t(e) {
        var n;
        if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
        this.container = e.container, this.appName = e.appName, this.key = e.key, this.license = e.license, 
        this.mapID = e.mapID, this.buildingID = e.mapID, this.mapURL = e.mapURL, this.mapURLAbsolute = void 0 !== e.mapURLAbsolute && e.mapURLAbsolute, 
        this.themeTool = void 0 !== e.themeTool ? e.themeTool : null, this.merge = void 0 !== e.merge ? e.merge : null, 
        this.userThemeURL = e.themeURL, this.themeURL = e.themeURL || xs.themeUrl, this.themeID = e.themeID || "2001", 
        this.externalModelURL = e.externalModelURL, this.Mh = e.theme, this.themeExtension = void 0 !== e.themeExtension ? e.themeExtension : {}, 
        this.isPreview = void 0 !== jt.a.KjWzhWlSj && !!jt.a.KjWzhWlSj.ProtoDef, this.nonFocusAlpha = void 0 !== e.nonFocusAlpha ? e.nonFocusAlpha : .1, 
        this.nonFocusAlphaMode = void 0 !== e.nonFocusAlphaMode && e.nonFocusAlphaMode, 
        this.state = e.state || {}, this.center = (void 0 !== this.state.center ? this.state : e).center, 
        this.zoomRange = void 0 !== this.state.zoomRange ? this.state.zoomRange : void 0 !== e.zoomRange ? e.zoomRange : [ 16, 23 ], 
        this.mapZoom = void 0 !== this.state.zoom ? this.state.zoom : void 0 !== e.mapZoom ? e.mapZoom : 20, 
        this.rotation = void 0 !== this.state.rotation ? this.state.rotation : void 0 !== e.rotation ? e.rotation : 0, 
        this.maxTiltAngle = void 0 !== e.maxTiltAngle ? e.maxTiltAngle : 90, this.minTiltAngle = void 0 !== e.minTiltAngle ? e.minTiltAngle : 30, 
        this.tiltAngle = void 0 !== this.state.tiltAngle ? this.state.tiltAngle : void 0 !== e.tiltAngle ? e.tiltAngle : 30, 
        this.viewMode = void 0 !== this.state.viewMode ? this.state.viewMode : void 0 !== e.viewMode ? e.viewMode : kt.MODE_3D, 
        this.floorSpace = void 0 !== this.state.floorSpace ? this.state.floorSpace : void 0 !== e.floorSpace ? e.floorSpace : 50, 
        this.level = void 0 !== this.state.level ? this.state.level : void 0 !== e.level ? e.level : 1, 
        this.visibleLevels = void 0 !== this.state.visibleLevels ? this.state.visibleLevels : void 0 !== e.visibleLevels ? e.visibleLevels : [ 1 ], 
        this.buildingOptions = e.buildingOptions || {}, this.navigationData = e.navigationData, 
        this.buildings = e.buildings, this.backgroundColor = e.backgroundColor, this.backgroundAlpha = e.backgroundAlpha, 
        this.fc = e.highlightColor, this.Er = void 0 !== e.highlightPicker ? e.highlightPicker : [ "click" ], 
        this.logarithmicDepthBuffer = e.logarithmicDepthBuffer || !1, this.tile = !1 !== e.tile || e.tile, 
        this.preLoad = !1 !== e.preLoad || e.preLoad, this.loadLayerWaitingTime = e.loadLayerWaitingTime || .002, 
        this.renderOrder = e.renderOrder || [ Ct.EXTENT, Ct.CAD_LAYER, Ct.EXTERNAL_MODEL, Ct.MODEL, Ct.DYNAMIC_MODEL_MARKER, Ct.EXTRUDE_MARKER, Ct.TUBE_MARKER, Ct.WALL_MARKER, Ct.SPHERE_MARKER, Ct.POLYGON_MARKER, Ct.HEAT_MAP_MARKER, Ct.LINE3D_MARKER, Ct.LINE_MARKER, Ct.FACILITY, Ct.LABEL, Ct.IMAGE_MARKER, Ct.TEXT_MARKER, Ct.LOCATION_MARKER ], 
        this.collisionOrder = e.collisionOrder ? Ht.uniqWithArrayTwo(e.collisionOrder) : [ [ Ct.TEXT_MARKER, Ct.IMAGE_MARKER ] ], 
        this.fontFamily = e.fontFamily || '"Microsoft Yahei","",Tahoma,Arial', this.hdr = e.hdr, 
        this.shadingMode = void 0 !== e.shadingMode ? e.shadingMode : In.REAL, this.materialMode = this.shadingMode, 
        this.maxMaterialCount = void 0 !== e.maxMaterialCount ? e.maxMaterialCount : 1 / 0, 
        this.lock = void 0 !== e.lock && e.lock, this.labelField = void 0 !== e.labelField ? e.labelField : Hp.NAME, 
        this.enabledPanRange = void 0 !== e.enabledPanRange && e.enabledPanRange, this.panRangeValue = void 0 !== e.panRangeValue ? e.panRangeValue : null, 
        this.screenLockCoords = e.screenLockCoords, this.lightConfig = {
            FMExtentLayer: [ {
                name: "DirectionalLight",
                color: 11579568,
                intensity: .95,
                position: {
                    x: 58,
                    y: 65,
                    z: 40
                },
                id: 0
            }, {
                name: "AmbientLight",
                color: 11579568,
                intensity: .85,
                id: 1
            }, {
                name: "DirectionalLight",
                color: 6447714,
                intensity: .65,
                position: {
                    x: -100,
                    y: 0,
                    z: 45
                },
                id: 2
            } ],
            FMDynamicModelLayer: [ {
                name: "DirectionalLight",
                color: 11579568,
                intensity: .95,
                position: {
                    x: 58,
                    y: 65,
                    z: 45
                },
                id: 0
            }, {
                name: "AmbientLight",
                color: 11579568,
                intensity: .85,
                id: 1
            }, {
                name: "DirectionalLight",
                color: 6447714,
                position: {
                    x: -100,
                    y: 0,
                    z: 45
                },
                intensity: .45,
                id: 2
            } ],
            FMModelLayer: [ {
                name: "DirectionalLight",
                color: 11645361,
                intensity: .95,
                position: {
                    x: 58,
                    y: 65,
                    z: 40
                },
                id: 0
            }, {
                name: "AmbientLight",
                color: 11645361,
                intensity: .85,
                id: 1
            }, {
                name: "DirectionalLight",
                color: 6513507,
                position: {
                    x: -100,
                    y: 0,
                    z: 45
                },
                intensity: .65,
                id: 2
            } ],
            FMExternalModelLayer: [ {
                name: "DirectionalLight",
                color: 11579568,
                intensity: .95,
                position: {
                    x: 58,
                    y: 65,
                    z: 45
                },
                id: 0
            }, {
                name: "AmbientLight",
                color: 11579568,
                intensity: .85,
                id: 1
            }, {
                name: "DirectionalLight",
                color: 6447714,
                position: {
                    x: -100,
                    y: 0,
                    z: 45
                },
                intensity: .45,
                id: 2
            } ]
        }, this.isuserLight = !1, void 0 !== e.light && (this.lightConfig = e.light.getConfig(), 
        this.isuserLight = !0), this.lockedLight = void 0 !== e.lockedLight && e.lockedLight, 
        this.hideList = void 0 !== e.hideList ? e.hideList : {}, this.ClassicMaterial = void 0 === e.ClassicMaterial || e.ClassicMaterial, 
        this.isOutdoor = !0, this.enableDamping = void 0 !== e.enableDamping && e.enableDamping, 
        this.enterTriggerMode = void 0 !== e.enterTriggerMode ? e.enterTriggerMode : Wb.Entire, 
        this.autoPlay = void 0 === e.autoPlay || e.autoPlay, this.decoderURL = void 0 !== e.decoderURL ? e.decoderURL : null, 
        this.HDText = void 0 !== e.HDText && e.HDText, this.depthPeeling = void 0 !== e.depthPeeling ? e.depthPeeling : null, 
        this.depthPeeling && (this.depthPeeling.mode = (null == (n = e.depthPeeling) ? void 0 : n.mode) || Yb, 
        this.depthPeeling.layers = (null == (n = e.depthPeeling) ? void 0 : n.layers) || 4, 
        this.depthPeeling.types = (null == (n = e.depthPeeling) ? void 0 : n.types) || [ Ct.MODEL_LAYER, Ct.EXTERNAL_MODEL_LAYER, Ct.DYNAMIC_MODEL_MARKER ]), 
        this.mouseMode = void 0 !== e.mouseMode ? e.mouseMode : vn.NORMAL, this.labelFade = void 0 !== e.labelFade ? e.labelFade : jt.a.environment === Ut.a.BROWSER;
    });
    function Kb(t) {
        return (Kb = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Jb(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Kb(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Kb(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Kb(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function Qb(t) {
        B.call(this), this.element = t, this.element.style.position = "absolute", this.addEventListener("removed", function() {
            this.traverse(function(t) {
                t.element instanceof Element && null !== t.element.parentNode && t.element.parentNode.removeChild(t.element);
            });
        });
    }
    function $b() {
        var t, e, n, r, i, o, a = this, s = new h(), l = new b(), u = new b(), c = {
            objects: new WeakMap()
        }, f = document.createElement("div"), p = (f.style.overflow = "hidden", this.domElement = f, 
        this.getSize = function() {
            return {
                width: t,
                height: e
            };
        }, this.setSize = function(i, o) {
            n = (t = i) / 2, r = (e = o) / 2, f.style.width = i + "px", f.style.height = o + "px";
        }, i = new h(), o = new h(), function(t, e) {
            return i.setFromMatrixPosition(t.matrixWorld), o.setFromMatrixPosition(e.matrixWorld), 
            i.distanceToSquared(o);
        });
        this.render = function(t, e) {
            !0 === t.autoUpdate && t.updateMatrixWorld(), null === e.parent && e.updateMatrixWorld(), 
            l.copy(e.matrixWorldInverse), u.multiplyMatrices(e.projectionMatrix, l), function t(e, i, o) {
                var l, h;
                e instanceof Qb && (e.onBeforeRender(a, i, o), s.setFromMatrixPosition(e.matrixWorld), 
                s.applyMatrix4(u), l = e.element, h = "translate(-50%,-50%) translate(" + (s.x * n + n) + "px," + (-s.y * r + r) + "px)", 
                l.style.WebkitTransform = h, l.style.MozTransform = h, l.style.oTransform = h, l.style.transform = h, 
                l.style.display = e.visible && -1 <= s.z && s.z <= 1 ? "" : "none", h = {
                    distanceToCameraSquared: p(o, e)
                }, c.objects.set(e, h), l.parentNode !== f && f.appendChild(l), e.onAfterRender(a, i, o));
                for (var d = 0, y = e.children.length; d < y; d++) t(e.children[d], i, o);
            }(t, t, e);
        };
    }
    oh = function() {
        function t(e) {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
            this.ze = e, this.zoomRange = this.ze.zoomRange, this.zoom = this.ze.mapZoom, this.vi = this.ze.rotation, 
            this.Hm = this.ze.maxTiltAngle, this.zm = this.ze.minTiltAngle, this.tiltAngle = this.ze.tiltAngle, 
            this.Ue = this.ze.viewMode, this.Vm = new Map(), this.Wm(), this.Pc = !1, this.qo = !1, 
            this.Zo = !1, this.om = !1, this.rm = !1, this.iv = this.ze.labelField, this.je = new h(), 
            this.Ym = this.zf, this.gr = !1, this.Xm = !0, this.Zm = !1, this.fc = void 0 !== this.ze.fc ? this.ze.fc : null, 
            this.qm = null, this.Jm = void 0 !== this.ze.backgroundColor ? this.ze.backgroundColor : null, 
            this.Km = null, this.Qm = void 0 !== this.ze.backgroundAlpha ? this.ze.backgroundAlpha : null, 
            this.$m = null, this.Xp = !1, this.Ko = !1, this.Dp = !1, this.Nm = !0, this.Yo = this.ze.collisionOrder, 
            this.Rt = this.ze.buildingID;
        }
        var e, n;
        return e = t, (n = [ {
            key: "zoom",
            get: function() {
                return this.zf;
            },
            set: function(t) {
                this.zf = Math.min(Math.max(t, this.ki[0]), this.ki[1]);
            }
        }, {
            key: "zoomRange",
            get: function() {
                return this.ki;
            },
            set: function(t) {
                t[0] = Math.min(Math.max(t[0], 1), 29), t[1] = Math.min(Math.max(t[1], 1), 29), 
                this.ki = t;
            }
        }, {
            key: "tiltAngle",
            get: function() {
                return this.fi;
            },
            set: function(t) {
                t = Math.min(Math.max(t, this.zm), this.Hm), this.fi = t;
            }
        }, {
            key: "highlightColor",
            get: function() {
                return null !== this.fc ? this.fc : this.qm;
            },
            set: function(t) {
                this.fc = t;
            }
        }, {
            key: "backgroundColor",
            get: function() {
                return null !== this.Jm ? this.Jm : this.Km;
            }
        }, {
            key: "backgroundAlpha",
            get: function() {
                return null !== this.Qm ? this.Qm : this.$m;
            }
        } ]) && Jb(e.prototype, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }();
    var tx = (Object.assign(oh.prototype, {
        Wm: function() {
            this.ty(this.ze.buildingID);
            var t = this.ze.buildingOptions.buildings;
            if (t) for (var e = 0; e < t.length; e++) t[e].buildingID && this.ty(t[e].buildingID);
        },
        mv: function(t) {
            this.qm = t.Ac(this.ze.buildingID), t = t.Ec(this.ze.buildingID), this.Km = t.clearColor, 
            this.$m = t.clearAlpha;
        },
        ny: function(t, e) {
            switch (t) {
              case "click":
                this.Xm = e;
                break;

              case "move":
                this.Zm = e;
                break;

              case "hover":
                this.gr = e;
            }
        },
        ey: function(t) {
            this.ze.center && (this.je.x = this.ze.center.x - t.x, this.je.z = -this.ze.center.y + t.y);
        },
        Bi: function(t) {
            return this.Vm.has(t) || this.ty(t), this.Vm.get(t);
        },
        ty: function(t) {
            var e = {};
            if (this.ze.buildingID === t) e = {
                themeID: this.ze.themeID,
                visibleLevels: this.ze.visibleLevels,
                level: this.ze.level,
                targetLevel: this.ze.level,
                floorSpace: this.ze.floorSpace,
                nonFocusAlphaMode: this.ze.nonFocusAlphaMode,
                nonFocusAlpha: this.ze.nonFocusAlpha
            }; else {
                var n = this.ze.buildingOptions, r = n.buildings;
                e = {
                    themeID: n.themeID,
                    themeExtension: n.themeExtension,
                    visibleLevels: void 0 !== n.visibleLevels ? n.visibleLevels : [],
                    level: n.level,
                    targetLevel: n.level,
                    floorSpace: (void 0 !== n.floorSpace ? n : this.ze).floorSpace,
                    overviewMode: void 0 !== n.overviewMode ? n.overviewMode : yp.NORMAL,
                    nonFocusAlphaMode: (void 0 !== n.nonFocusAlphaMode ? n : this.ze).nonFocusAlphaMode,
                    nonFocusAlpha: (void 0 !== n.nonFocusAlpha ? n : this.ze).nonFocusAlpha,
                    minLevel: n.minLevel,
                    maxLevel: n.maxLevel,
                    themeLoaded: !1,
                    themeNeedLoad: !0
                };
                if (r) for (var i = 0; i < r.length; i++) r[i].buildingID === t && (void 0 !== r[i].themeID && (e.themeID = r[i].themeID), 
                void 0 !== r[i].themeExtension && (e.themeExtension = r[i].themeExtension), void 0 !== r[i].visibleLevels && (e.visibleLevels = r[i].visibleLevels), 
                void 0 !== r[i].level && (e.level = r[i].level), void 0 !== r[i].targetLevel && (e.targetLevel = r[i].targetLevel), 
                void 0 !== r[i].floorSpace && (e.floorSpace = r[i].floorSpace), void 0 !== r[i].overviewMode && (e.overviewMode = r[i].overviewMode), 
                void 0 !== r[i].nonFocusAlphaMode && (e.nonFocusAlphaMode = r[i].nonFocusAlphaMode), 
                void 0 !== r[i].nonFocusAlpha && (e.nonFocusAlpha = r[i].nonFocusAlpha), void 0 !== r[i].minLevel && (e.minLevel = r[i].minLevel), 
                void 0 !== r[i].maxLevel) && (e.maxLevel = r[i].maxLevel);
            }
            e.level && -1 === e.visibleLevels.indexOf(e.level) && (1 < e.visibleLevels.length ? e.visibleLevels.push(e.level) : e.visibleLevels = [ e.level ]), 
            this.Vm.set(t, e);
        },
        Qp: function(t) {
            return (t = this.Bi(t)).levelsLoaded || (t.levelsLoaded = new Map()), t.levelsLoaded;
        },
        Dc: function(t) {
            return !1 === (t = this.Vm.get(t)).themeNeedLoad || !1 !== t.themeLoaded;
        }
    }), oh);
    function ex(t) {
        return (ex = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function nx(t, e) {
        (null == e || e > t.length) && (e = t.length);
        for (var n = 0, r = new Array(e); n < e; n++) r[n] = t[n];
        return r;
    }
    function rx(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != ex(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != ex(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == ex(t) ? t : String(t);
            }(r.key), r);
        }
    }
    (Qb.prototype = Object.create(B.prototype)).constructor = Qb;
    rh = function() {
        function t(e) {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
            this.Bt = e, this.gt = null, this.iy = this.iy.bind(this), this.oy = this.oy.bind(this), 
            this.xo = new Jn(), this.Nt = [];
        }
        var e, n;
        return e = t, (n = [ {
            key: "add",
            value: function(t) {
                t.Bt = this, (t.Xf || t.lc()) && this.k(t), this.needUpdateBound = !0;
            }
        }, {
            key: "remove",
            value: function(t) {
                -1 < (t = this.Nt.indexOf(t)) && this.Nt.splice(t, 1), this.needUpdateBound = !0;
            }
        }, {
            key: "clear",
            value: function() {
                var t, e = function(t, e) {
                    var n, r, i, o, a = "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"];
                    if (a) return r = !(n = !0), {
                        s: function() {
                            a = a.call(t);
                        },
                        n: function() {
                            var t = a.next();
                            return n = t.done, t;
                        },
                        e: function(t) {
                            r = !0, i = t;
                        },
                        f: function() {
                            try {
                                n || null == a.return || a.return();
                            } finally {
                                if (r) throw i;
                            }
                        }
                    };
                    if (Array.isArray(t) || (a = function(t, e) {
                        var n;
                        if (t) return "string" == typeof t ? nx(t, e) : "Map" === (n = "Object" === (n = Object.prototype.toString.call(t).slice(8, -1)) && t.constructor ? t.constructor.name : n) || "Set" === n ? Array.from(t) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? nx(t, e) : void 0;
                    }(t)) || e && t && "number" == typeof t.length) return a && (t = a), o = 0, {
                        s: e = function() {},
                        n: function() {
                            return o >= t.length ? {
                                done: !0
                            } : {
                                done: !1,
                                value: t[o++]
                            };
                        },
                        e: function(t) {
                            throw t;
                        },
                        f: e
                    };
                    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
                }(this.Nt);
                try {
                    for (e.s(); !(t = e.n()).done; ) t.value.dispose();
                } catch (t) {
                    e.e(t);
                } finally {
                    e.f();
                }
                this.Nt.length = 0;
            }
        }, {
            key: "dispose",
            value: function() {
                if (null !== this.gt) {
                    this.Bt.off("resize", this.iy), this.Bt.off("beforeRender", this.oy);
                    for (var t = 0; t < this.Nt.length; t++) this.Nt[t].dispose();
                    this.Nt.length = 0, this.xo = void 0, this.gt.domElement.parentNode && this.gt.domElement.parentNode.removeChild(this.gt.domElement);
                }
            }
        } ]) && rx(e.prototype, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }();
    var ix = (Object.assign(rh.prototype, {
        lc: function() {
            this.gt = new $b(), this.gt.setSize(this.Bt.getContainer().clientWidth, this.Bt.getContainer().clientHeight), 
            this.gt.domElement.style.top = "0px", this.gt.domElement.style.left = "0px", this.gt.domElement.style.position = "absolute", 
            this.gt.domElement.style.pointerEvents = "none", this.gt.domElement.style.zIndex = 2, 
            this.Bt.getContainer().appendChild(this.gt.domElement), this.Bt.on("resize", this.iy), 
            this.Bt.on("beforeRender", this.oy);
        },
        oy: function() {
            for (var t = [], e = Array.from(this.Bt.getRenderManager().getRenderList().keys()), n = 0; n < this.Nt.length; n++) this.Nt[n].xi.element.childNodes[0].style.display = "none", 
            this.Nt[n].Lv();
            for (var r = 0; r < e.length; r++) for (var i = e[r].split("%A%B%C%D"), o = (-1 === t.indexOf(i[0]) && t.push(i[0]), 
            i[0]), a = i[1], s = this.Bt.getBuilding("" + o), l = 0; l < this.Nt.length; l++) this.Nt[l].Rv === o && "" + this.Nt[l].level == "" + a && this.Nt[l].visible && (this.Nt[l].xi.element.childNodes[0].style.display = "block", 
            this.Nt[l].level === s.level ? this.Nt[l].xi.element.childNodes[0].style.opacity = this.Nt[l].opacity : this.Nt[l].xi.element.childNodes[0].style.opacity = s.getFloor(this.Nt[l].level).ht);
            this.Go(t), this.gt.render(this.xo, this.Bt.camera);
        },
        iy: function() {
            this.gt.setSize(this.Bt.getContainer().clientWidth, this.Bt.getContainer().clientHeight);
        },
        ql: function(t, e) {
            for (var n = this.Bt.getBuilding("" + e).visibleLevels, r = !1, i = 0; i < n.length; i++) if (n[i] === t) {
                r = !0;
                break;
            }
            return r;
        },
        Go: function(t) {
            for (var e = this, n = 0; n < t.length; n++) for (var r = this.Bt.getBuilding("" + t[n]).visibleLevels, i = 0; i < r.length; i++) {
                var o = function(t, n) {
                    for (var r = [], i = 0; i < e.Nt.length; i++) e.Nt[i].rr === n && e.Nt[i].Rv === t && r.push(e.Nt[i]);
                    return r;
                }(t[n], r[i]);
                if (1 < o.length) {
                    f = h = c = u = l = s = a = void 0;
                    for (var a = o, s = [], l = 0; l < a.length; l++) if (a[l].Yi && a[l].Ho) {
                        for (var u = !0, c = 0; c < s.length; c++) {
                            var h = s[c].sy(), f = a[l].sy();
                            if (!(u = !Ve.Rn(f.leftTop, f.rightDown, h.leftTop, h.rightDown))) break;
                        }
                        u ? (a[l].xi.element.childNodes[0].style.display = "block", a[l].uy = !1, s.push(a[l])) : (a[l].xi.element.childNodes[0].style.display = "none", 
                        a[l].uy = !0);
                    }
                }
            }
        },
        k: function(t) {
            this.Nt.push(t), t.xi && this.xo.add(t.xi);
        }
    }), rh);
    function ox(t) {
        return (ox = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function ax(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != ox(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != ox(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == ox(t) ? t : String(t);
            }(r.key), r);
        }
    }
    var sx = function() {
        function t(e) {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
            this.loadManager = e, this.requests = new Map();
        }
        var e, n;
        return e = t, (n = [ {
            key: "add",
            value: function(t, e) {
                this.requests.set(t, e);
            }
        }, {
            key: "abortAll",
            value: function() {
                var t = this;
                this.requests.forEach(function(e, n) {
                    e.abort(), t.loadManager.itemEnd(n);
                }), this.requests.clear(), this.loadManager = null;
            }
        } ]) && ax(e.prototype, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }();
    function lx(t) {
        return (lx = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function ux(t, e) {
        var n, r = Object.keys(t);
        return Object.getOwnPropertySymbols && (n = Object.getOwnPropertySymbols(t), e && (n = n.filter(function(e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
        })), r.push.apply(r, n)), r;
    }
    function cx(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, hx(r.key), r);
        }
    }
    function hx(t) {
        return t = function(t, e) {
            if ("object" != lx(t) || !t) return t;
            var n = t[Symbol.toPrimitive];
            if (void 0 === n) return String(t);
            if ("object" != lx(n = n.call(t, e))) return n;
            throw new TypeError("@@toPrimitive must return a primitive value.");
        }(t, "string"), "symbol" == lx(t) ? t : String(t);
    }
    function fx(t, e, n) {
        e = yx(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], yx(t).constructor) : e.apply(t, n)) && ("object" === lx(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        return px(r);
    }
    function px(t) {
        if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return t;
    }
    function dx() {
        return (dx = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function(t, e, n) {
            var r = function(t, e) {
                for (;!Object.prototype.hasOwnProperty.call(t, e) && null !== (t = yx(t)); ) ;
                return t;
            }(t, e);
            if (r) return (r = Object.getOwnPropertyDescriptor(r, e)).get ? r.get.call(arguments.length < 3 ? t : n) : r.value;
        }).apply(this, arguments);
    }
    function yx(t) {
        return (yx = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function mx(t, e) {
        return (mx = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    ih = function() {
        var t = n, e = Cn;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t) {
            var e;
            if (this instanceof n) return e = fx(this, n), t.uatEnvironment && (xs = {
                domain: bs,
                online: bs + "sdk/check",
                check: bs + "sdk/auth/web",
                download: bs + "sdk/auth/obtainMapRoute",
                downloadTile: bs + "sdk/authLayered/obtainMapRoute",
                collect: bs + "sdk/collect",
                themeUrl: bs + "webtheme/",
                externalModelURL: bs + "webmodel/"
            }), e.pi = {
                error: []
            }, e.du = new Date().getTime(), e.ze = new qb(t), e.Ct = new tx(e.ze), e._t = null, 
            e.St = null, jt.a.environment === Ut.a.WX && (jt.a.initCanvas(e.ze, px(e)), kb.isDestory = !1), 
            e.Dt = null, e.Cc = !1, e.hy = new h(), e.Vi = null != t.followFocus && t.followFocus, 
            e.ly = null, e.vy = !1, e.co = [ Ct.IMAGE_MARKER, Ct.TEXT_MARKER ], e.Ye = new Vb(), 
            e.Oi = new zb(), e.hr = null, e.ui = null, e.qe = null, e.Je = null, jt.a.environment == Ut.a.BROWSER ? e.He = e.py(e.ze.container.clientWidth, e.ze.container.clientHeight) : e.He = e.py(e.ze.container.width, e.ze.container.height), 
            e.It = new qa(px(e), e.ze, e.Ct), e._o = new jd(), e._o.Bt = px(e), e.kt = new wn(px(e), e.ze.container, e.Ct), 
            e.kt.enableDragRange = e.ze.enabledPanRange, e.ze.panRangeValue && (e.ze.enabledPanRange = !0, 
            e.kt.enableDragRange = !0), e.pr = new Yn(px(e), e.ze, e.Ct), e.Mo = e.Mo.bind(px(e)), 
            e.my = !1, e.Ei = e.Ei.bind(px(e)), e.yy = e.yy.bind(px(e)), e.by = [], e.gy = !1, 
            e.wy = null, e._y = null, e.Sy = e.Sy.bind(px(e)), e.xy = new ix(px(e)), e.Ey(), 
            e.Cd = new sx(Xu), Xu.onLoad = function() {
                e.enableUpdateRender();
            }, e;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && mx(t, e), t = n, (e = [ {
            key: "requestDispose",
            get: function() {
                return this.my;
            }
        }, {
            key: "focusBuilding",
            get: function() {
                return this.My;
            }
        }, {
            key: "x",
            get: function() {
                return this._t;
            }
        }, {
            key: "y",
            get: function() {
                return this.St;
            }
        }, {
            key: "bound",
            get: function() {
                var t = this;
                return !0 === this.needUpdateBound && 0 < this.Nt.length && (this.xe.reset(), this.Nt.forEach(function(e) {
                    t.xe.expand(e.bound);
                }), this.xe.expand(this._o.bound), this.needUpdateBound = !1), this.xe.clone();
            }
        }, {
            key: "camera",
            get: function() {
                return this.He;
            },
            set: function(t) {
                this.He = t;
            }
        }, {
            key: "followFocus",
            get: function() {
                return this.Vi;
            },
            set: function(t) {
                this.Vi !== t && (this.Vi = t, this.Vi || this.kt.Wi(this.Dt, {
                    level: this.getLevel()
                }));
            }
        }, {
            key: "getScaleBarInfo",
            value: function() {
                var t = {
                    x: (e = jt.a.environment === Ut.a.WX ? {
                        x: jt.a.document.body.clientWidth / 2,
                        y: jt.a.document.body.clientHeight / 2
                    } : {
                        x: document.body.clientWidth / 2,
                        y: document.body.clientHeight / 2
                    }).x + 100,
                    y: e.y
                }, e = Rt.coordsScreenToMap(this, e), n = (t = Rt.coordsScreenToMap(this, t), e = Math.sqrt((e.x - t.x) * (e.x - t.x) + (e.y - t.y) * (e.y - t.y)) / 100, 
                (t = [ 1e7, 5e6, 2e6, 1e6, 5e5, 2e5, 1e5, 5e4, 25e3, 2e4, 1e4, 5e3, 2e3, 1e3, 500, 200, 100, 50, 20, 10, 5, 2, 1, .5, .2, .1, .05, .02, .01 ][Math.floor(this.getZoom()) - 1]) < 1e3 && 1 <= t ? "" : t < 1 ? (t *= 1e3, 
                "") : (t /= 1e3, ""));
                return {
                    screenDistance: t / e,
                    actualDistance: t,
                    unit: n
                };
            }
        }, {
            key: "setDevicePixalRatio",
            value: function(t) {
                this.getRenderManager().renderer.setPixelRatio(t), this.Ye.We({
                    type: "pixelRatioChanged"
                }), this.enableUpdateRender();
            }
        }, {
            key: "removeAnimator",
            value: function(t) {
                this.Oi.Ai(t);
            }
        }, {
            key: "copyCamera",
            value: function() {
                var t = null;
                return (t = this.He === this.qe ? new z(Dt.FOV, 1, Dt.CAMERA_NEAR, Dt.CAMERA_FAR) : new G(1, 1, 1, 1, Dt.CAMERA_NEAR, Dt.CAMERA_FAR)).copy(this.He), 
                t;
            }
        }, {
            key: "enableUpdateRender",
            value: function() {
                this.Ct.Ko = !0;
            }
        }, {
            key: "enableUpdateNode",
            value: function() {
                this.Ct.Dp = !0;
            }
        }, {
            key: "getFloorInfos",
            value: function() {
                return this.getBuilding(this.ze.buildingID).getFloorInfos();
            }
        }, {
            key: "setHighlightColor",
            value: function(t) {
                this.Ct.highlightColor = t;
            }
        }, {
            key: "setControlTarget",
            value: function(t) {
                this.kt.mi(t);
            }
        }, {
            key: "resize",
            value: function(t, e) {
                this.It.Eo(t, e);
            }
        }, {
            key: "getMarkerGroup",
            value: function() {
                return this._o;
            }
        }, {
            key: "getVisibleLevels",
            value: function() {
                return this.Dt.visibleLevels;
            }
        }, {
            key: "setTheme",
            value: function(t) {
                this.ui.Gf({
                    themeID: t,
                    bid: this.ze.buildingID
                });
            }
        }, {
            key: "setThemeExtension",
            value: function(t, e) {
                this.ui.Uf(function(t) {
                    for (var e = 1; e < arguments.length; e++) {
                        var n = null != arguments[e] ? arguments[e] : {};
                        e % 2 ? ux(Object(n), !0).forEach(function(e) {
                            var r, i;
                            r = t, i = n[e = e], (e = hx(e)) in r ? Object.defineProperty(r, e, {
                                value: i,
                                enumerable: !0,
                                configurable: !0,
                                writable: !0
                            }) : r[e] = i;
                        }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n)) : ux(Object(n)).forEach(function(e) {
                            Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(n, e));
                        });
                    }
                    return t;
                }({
                    data: t,
                    bid: this.ze.buildingID
                }, e));
            }
        }, {
            key: "clearThemeExtension",
            value: function() {
                this.ui.Uf({
                    bid: this.ze.buildingID
                });
            }
        }, {
            key: "getRenderOrder",
            value: function() {
                return this.It.co;
            }
        }, {
            key: "setRenderOrder",
            value: function(t) {
                this.It.ko(t);
            }
        }, {
            key: "getCollisionOrder",
            value: function() {
                return this.Ct.Yo;
            }
        }, {
            key: "setCollisionOrder",
            value: function(t) {
                this.Ct.Yo = Ht.uniqWithArrayTwo(t), this.ui.Xo();
            }
        }, {
            key: "adjustRenderOrder",
            value: function(t) {
                this.It.Lo(t);
            }
        }, {
            key: "setVisibleLevels",
            value: function(t, e) {
                this.Dt.setVisibleLevels(t, e);
            }
        }, {
            key: "getRenderManager",
            value: function() {
                return this.It;
            }
        }, {
            key: "setRenderManager",
            value: function(t) {
                for (var e in this.It.render = t.render, this.It.getLayerType = t.getLayerType, 
                t) this.It[e] = t[e];
            }
        }, {
            key: "getCenter",
            value: function() {
                return this.kt.Fi();
            }
        }, {
            key: "setCenter",
            value: function(t) {
                this.kt.Gi(t);
            }
        }, {
            key: "zoomIn",
            value: function() {
                this.kt.Li(1.02);
            }
        }, {
            key: "zoomOut",
            value: function() {
                this.kt.Li(.98);
            }
        }, {
            key: "getZoomRange",
            value: function() {
                return this.Ct.ki;
            }
        }, {
            key: "setZoomRange",
            value: function(t) {
                this.kt.Pi(t);
            }
        }, {
            key: "getZoom",
            value: function() {
                return this.kt.Ri();
            }
        }, {
            key: "setZoom",
            value: function(t) {
                this.kt.Ni(t);
            }
        }, {
            key: "getRotation",
            value: function() {
                return this.kt.Di();
            }
        }, {
            key: "setRotation",
            value: function(t) {
                this.kt.Ii(t);
            }
        }, {
            key: "autoRotate",
            value: function(t) {
                return (t = t || {}).loop = !0, void 0 === t.duration && (t.duration = 5), this.kt.Ii(t);
            }
        }, {
            key: "getTilt",
            value: function() {
                return $t.round(90 - this.kt.Ft.getPolarAngle() * Dt.RAD2DEG);
            }
        }, {
            key: "setTilt",
            value: function(t) {
                t.tilt = s.clamp(t.tilt, this.ze.minTiltAngle, this.ze.maxTiltAngle), this.Ct.fi = t.tilt, 
                this.kt.bi(t);
            }
        }, {
            key: "getFloor",
            value: function(t) {
                return null === this.Dt ? null : this.Dt.getFloor(t);
            }
        }, {
            key: "getLevel",
            value: function() {
                var t;
                return null == (t = this.Dt) ? void 0 : t.level;
            }
        }, {
            key: "getLevels",
            value: function() {
                return null !== this.Dt ? this.Dt.tr : null;
            }
        }, {
            key: "setLevel",
            value: function(t) {
                this.ui.ar(this.Dt, t);
            }
        }, {
            key: "getFloorSpace",
            value: function() {
                return null !== this.Dt ? this.Dt.floorSpace : null;
            }
        }, {
            key: "setFloorSpace",
            value: function(t) {
                this.Dt.floorSpace = t, this.Ye.We({
                    type: "floorSpaceChanged"
                });
                for (var e = this._o.Nt, n = 0; n < e.length; n++) e[n].Lv();
            }
        }, {
            key: "getViewMode",
            value: function() {
                return this.He.isPerspectiveCamera ? kt.MODE_3D : kt.MODE_2D;
            }
        }, {
            key: "setViewMode",
            value: function(t) {
                this.kt.yi(t);
            }
        }, {
            key: "getInteractions",
            value: function() {
                return this.getInteracations();
            }
        }, {
            key: "getInteracations",
            value: function() {
                return this.kt;
            }
        }, {
            key: "getBound",
            value: function() {
                return this.Dt.bound.clone();
            }
        }, {
            key: "getState",
            value: function() {
                return {
                    center: this.getCenter(),
                    zoom: this.getZoom(),
                    rotation: this.getRotation(),
                    tiltAngle: this.getTilt(),
                    viewMode: this.getViewMode(),
                    level: this.Dt.level,
                    floorSpace: this.getFloorSpace(),
                    visibleLevels: this.Dt.visibleLevels,
                    viewBuildingID: this.Ct.Rt
                };
            }
        }, {
            key: "setState",
            value: function(t, e) {
                var n, r = this, i = (e = e || {}, this.getState());
                for (n in i) void 0 === t[n] && (t[n] = i[n]);
                var o, a = !1 !== e.animate, s = e.isParallel, l = (void 0 === s && (s = e.isParallel = !0), 
                e.duration);
                void 0 === l && (l = e.duration = 3), s && a && 0 !== l ? this.kt.Ti(t, e) : (o = l / 5, 
                this.kt.pauseDamping(), this.setFloorSpace(t.floorSpace), this.setCenter({
                    animate: a,
                    x: t.center.x,
                    y: t.center.y,
                    duration: o,
                    finish: function() {
                        r.setRotation({
                            animate: a,
                            rotation: t.rotation,
                            duration: o,
                            finish: function() {
                                r.setTilt({
                                    animate: a,
                                    tilt: t.tiltAngle,
                                    duration: o,
                                    finish: function() {
                                        r.setZoom({
                                            animate: a,
                                            zoom: t.zoom,
                                            duration: o,
                                            finish: function() {
                                                r.setViewMode({
                                                    animate: a,
                                                    mode: t.viewMode,
                                                    finish: function() {
                                                        r.setVisibleLevels(t.visibleLevels, function() {
                                                            r.setLevel({
                                                                animate: a,
                                                                level: t.level,
                                                                duration: o,
                                                                finish: function() {
                                                                    r.kt.resumeDamping(), e.finish && e.finish();
                                                                }
                                                            });
                                                        });
                                                    }
                                                });
                                            }
                                        });
                                    }
                                });
                            }
                        });
                    }
                }));
            }
        }, {
            key: "getNodes",
            value: function(t, e) {
                var n, r = this, i = [], o = (this.Dt, [ Ct.LABEL_LAYER, Ct.FACILITY_LAYER, Ct.MODEL_LAYER, Ct.EXTENT_LAYER, Ct.EXTERNAL_MODEL_LAYER ]), a = {};
                if (e) for (var s = 0; s < e.length; s++) {
                    var l = (l = e[s].buildingID) || this.Dt.buildingID, u = function(t, e) {
                        var n = [], i = t.buildingID;
                        i = i || r.Dt.buildingID;
                        for (var o = t.levels, a = 0; a < e.length; a++) e[a].buildingID !== i || o && -1 === o.indexOf(e[a].level) || n.push(e[a]);
                        return n;
                    }(e[s], t);
                    a["" + l] = u;
                } else for (var c = 0; c < t.length; c++) {
                    var h = t[c].buildingID, f = a["" + (h = h || this.Dt.buildingID)];
                    f ? f.push(t[c]) : a["" + h] = [ t[c] ];
                }
                for (n in a) for (var p = a[n], d = function(t) {
                    for (var e = null, n = 0; n < r.Nt.length; n++) if (r.Nt[n].buildingID === t) {
                        e = r.Nt[n];
                        break;
                    }
                    return e;
                }("" + n), y = 0; y < p.length; y++) {
                    var m = p[y].level, v = p[y].eid, g = p[y].type;
                    t: for (var b = 0; b < d.Nt.length; b++) if (d.Nt[b].rr === m) for (var x = (x = d.Nt[b].getLayers()).filter(function(t) {
                        return o.includes(t.type);
                    }), w = 0; w < x.length; w++) for (var S = 0; S < x[w].Nt.length; S++) if (x[w].Nt[S].B.Ae === v && x[w].Nt[S].Re === g) {
                        i.push(x[w].Nt[S]);
                        break t;
                    }
                }
                return i;
            }
        }, {
            key: "getDataManager",
            value: function() {
                return this.hr;
            }
        }, {
            key: "getMapOptions",
            value: function() {
                return this.ze;
            }
        }, {
            key: "getContainer",
            value: function() {
                return this.ze.container;
            }
        }, {
            key: "setFitView",
            value: function(t, e) {
                var n = this, r = !1 !== (e = e || {}).animate, i = this.getZoomRange(), o = this.copyCamera(), a = this.kt.copyControls(o), s = this.kt.Ft, l = this.He;
                this.kt.Ft = a, this.He = o, this.setZoomRange([ 1, 29 ]), a.enableDamping = !1, 
                this.kt.Wi(this.Dt, {
                    level: this.getLevel(),
                    animate: !1
                }), this.setZoom({
                    zoom: 29,
                    animate: !1,
                    finish: function() {
                        n.setCenter({
                            animate: !1,
                            x: t.center.x,
                            y: t.center.y,
                            finish: function() {
                                n.Oy(t, 5, 0, function(t) {
                                    n.kt.Ft = s, n.He = l, n.setZoomRange(i), a.dispose(), a = null, n.enableUpdateRender(), 
                                    n.setZoom({
                                        animate: r,
                                        zoom: t.zoom,
                                        duration: .5
                                    }), n.setCenter({
                                        animate: r,
                                        x: t.center.x,
                                        y: t.center.y,
                                        duration: .5,
                                        finish: function() {
                                            e.finish && e.finish();
                                        }
                                    });
                                });
                            }
                        });
                    }
                });
            }
        }, {
            key: "setBackgroundColor",
            value: function(t, e) {
                this.It.renderer.setClearColor("string" === t ? parseInt(t.slice(1), 16) : t, e), 
                this.enableUpdateRender();
            }
        }, {
            key: "setLabelField",
            value: function(t) {
                this.Ct.iv = t, this.ui.Tm(), this.ui.Xo();
            }
        }, {
            key: "getLabelField",
            value: function() {
                return this.Ct.iv;
            }
        }, {
            key: "getBuilding",
            value: function(t) {
                return this.Da({
                    bid: t
                });
            }
        }, {
            key: "getBuildings",
            value: function() {
                var t = this, e = [];
                return this.traverse(function(n) {
                    n !== t.Dt && e.push(n);
                }), e;
            }
        }, {
            key: "changeOverviewMode",
            value: function(t) {
                for (var e = 0; e < t.buildingIDs.length; e++) {
                    var n = this.getBuilding(t.buildingIDs[e]);
                    n.Mf !== t.overviewMode && (n.Mf = t.overviewMode, this.followFocus && t.overviewMode != yp.OUTDOOR && n.parent.focusBuilding && n.parent.focusBuilding.buildingID == n.buildingID && n.setLevel({
                        level: n.level
                    }), n.Bf(t), this.ui.Fp({
                        bid: t.buildingIDs[e]
                    }), this.Ye.We({
                        type: "buildingOverviewModeChanged",
                        buildingID: t.buildingIDs[e]
                    }));
                }
                t.overviewMode == yp.OUTDOOR && this.followFocus && this.Dt.setLevel({
                    level: this.Dt.level
                });
            }
        }, {
            key: "enterBuilding",
            value: function(t) {
                var e = this, n = this.getBuilding(t.buildingID);
                this.kt.Gi({
                    x: n.x,
                    y: n.y,
                    animate: !0,
                    duration: .5,
                    finish: function() {
                        e.getBuildings().forEach(function(t) {
                            e.by.push({
                                buildingID: t.buildingID,
                                visible: t.visible
                            }), t.visible = !1;
                        }), n.visible = !0, e.Ct.Rt = t.buildingID, e.ui.Ff(n), e.ui.Hi(), e.ui.Am(n, {}), 
                        e.Ye.We({
                            type: "ViewBuildingChange",
                            buildingID: e.Ct.Rt
                        }), e.Ye.We({
                            type: "buildingEntered",
                            buildingID: e.Ct.Rt
                        }), t.finish && t.finish({
                            buildingID: t.buildingID
                        });
                    }
                });
            }
        }, {
            key: "exitBuilding",
            value: function(t) {
                var e = this, n = (this.by.forEach(function(t) {
                    e.getBuilding(t.buildingID).visible = t.visible;
                }), this.by.length = 0, this.getBuilding(this.Ct.Rt));
                this.kt.Gi({
                    x: n.x,
                    y: n.y,
                    animate: !0,
                    duration: .5,
                    finish: function() {
                        e.Ct.Rt = e.ze.buildingID, e.ui.Hi(), e.ui.Am(n, {}), e.Ye.We({
                            type: "ViewBuildingChange",
                            buildingID: e.Ct.Rt
                        }), e.Ye.We({
                            type: "buildingExited",
                            buildingID: n.Ae
                        }), t.finish && t.finish({
                            buildingID: n.Ae
                        });
                    }
                });
            }
        }, {
            key: "on",
            value: function(t, e) {
                this.Ye && (this.Ye.Gm(t, e), this.Ct.ny(t, !0));
            }
        }, {
            key: "off",
            value: function(t, e) {
                this.Ye && (this.Ye.Bm(t, e), this.Ye.Um(t) || this.Ct && this.Ct.ny(t, !1));
            }
        }, {
            key: "pickFilterFunction",
            value: function() {
                return !0;
            }
        }, {
            key: "dispose",
            value: function() {
                var t, e = this;
                this.my || (this.my = !0, this.xy.dispose(), this.Cd.abortAll(), this.setBackgroundColor(16777215, 1), 
                this.It.renderer.clear(), this.It.tn(), jt.a.environment == Ut.a.BROWSER && this.ze.container.removeChild(this.It.renderer.domElement), 
                jt.a.environment === Ut.a.WX && (kb.textureCanvas = null, kb.dispose(), kb.isDestory = !0), 
                t = function() {
                    e.hr.tn(function() {
                        e.Oi.tn(function() {
                            e.ui.tn(function() {
                                e.Mo(), e._o.dispose(), dx(yx(n.prototype), "dispose", e).call(e), Xu.onLoad = function() {}, 
                                Xu.record.clear();
                            });
                        });
                    });
                }, Xu.isLoaded() ? t() : Xu.onLoad = t);
            }
        }, {
            key: "collisionCheck",
            value: function() {
                this.ui.Xo();
            }
        } ]) && cx(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }();
    var vx = (Object.assign(ih.prototype, {
        Mo: function() {
            for (var t, e = [ this.pr, this.kt ], n = 0; n < e.length; n++) e[n].tn();
            for (t in this.It.Mo(), this.It = null, this.hr = null, this.ui = null, this) -1 < e.indexOf(this["" + t]) && delete this["" + t];
            this.Dt = e = null;
        },
        py: function(t, e) {
            return this.qe = new z(Dt.FOV, t / e, Dt.CAMERA_NEAR, Dt.CAMERA_FAR), this.Je = new G(-t / 2, t / 2, e / 2, -e / 2, Dt.CAMERA_NEAR, Dt.CAMERA_FAR), 
            this.Ct.Ue === kt.MODE_3D ? this.qe : this.Je;
        },
        Si: function(t) {
            (t.Bt = this).Nt.push(t), this.needUpdateBound = !0;
        },
        zp: function(t) {
            for (var e = [], n = (e.push({
                x: t.min.x,
                y: t.min.y
            }), e.push({
                x: t.min.x,
                y: t.max.y
            }), e.push({
                x: t.max.x,
                y: t.max.y
            }), e.push({
                x: t.max.x,
                y: t.min.y
            }), new Xe()), r = 0; r < e.length; r++) {
                var i = Rt.coordsMapToScreen(this, {
                    x: e[r].x,
                    y: e[r].y,
                    level: this.getLevel(),
                    height: 0
                });
                if (null === i) return null;
                n._e([ i ]);
            }
            return n;
        },
        Ty: function(t) {
            var e = this.It.renderer.domElement.clientHeight, n = this.It.renderer.domElement.clientWidth, r = this.getZoom();
            r = this.kt.oi(r);
            return (t = this.zp(t)) ? r * (n / e > (r = t.size).x / r.y ? r.y / e : r.x / n) : null;
        },
        jy: function(t) {
            return (t = this.zp(t)) ? Rt.coordsScreenToMap(this, {
                x: (t.max.x + t.min.x) / 2,
                y: (t.max.y + t.min.y) / 2,
                level: this.getLevel()
            }) : null;
        },
        Oy: function(t, e, n, r) {
            var i = this, o = this.getZoom(), a = this.Ty(t);
            a ? o = this.kt.Ci(a) : o -= 1, this.setZoom({
                animate: !1,
                zoom: o,
                finish: function() {
                    var a = i.jy(t);
                    a ? i.setCenter({
                        animate: !1,
                        x: a.x,
                        y: a.y,
                        finish: function() {
                            ++n === e ? r({
                                zoom: o,
                                center: a
                            }) : i.Oy(t, e, n, r);
                        }
                    }) : 0 < o ? i.Oy(t, e, n, r) : r({
                        zoom: o,
                        center: t.center
                    });
                }
            });
        },
        Ei: function() {
            var t = this.getZoom();
            Math.abs(t - this.Ct.Ym) > Dt.EPS && (this.Ye.We({
                type: "zoom",
                zoom: t
            }), this.He.isOrthographicCamera && this.It.wi(), this.Ct.Ym = t);
        },
        yy: function() {
            var t;
            this.Ct.Zm && (t = this.kt.Ft.target).distanceToSquared(this.hy) > Dt.EPS && (this.Ye.We({
                type: "move",
                center: this.getCenter()
            }), this.hy = t.clone());
        },
        Ey: function() {
            var t, e, n, r, i = this, o = !0;
            e = (t = this).ze, n = this.Ct, r = function(t, e, n, r, a, s) {
                o && (i.Ct.ey(i.Dt), o = i.kt.ri()), i.It.Hi(), i.He.updateMatrixWorld(), n && s && i.kt.Si([ i.Ei, i.yy ]), 
                a && s && (i.gy = !0, i.Ye.We({
                    type: "loaded"
                }), i.Gp(), i.Ct.om = !1);
            }, t.hr = new Pl({
                mapCreateTime: t.du
            }), t.ui = new Fb(t, e, n, r), t.ui.Lm();
        },
        Da: function(t) {
            var e = null;
            return this.traverse(function(n) {
                n.Ae !== t.bid && n.Ji !== t.mid || (e = n);
            }), e;
        },
        xm: function() {
            var t = {
                x: (t = this.It.renderer.domElement).clientWidth / 2,
                y: t.clientHeight / 2,
                z: this.kt.controls.target.y
            };
            return Rt.coordsScreenToMap(this, t);
        },
        Em: function(t) {
            var e = this;
            if (t === this.Dt) return !1;
            if (!this.gy) return !1;
            var n = !1;
            if (this.ze.enterTriggerMode === Wb.Individual) t.Cf.wf.forEach(function(r, i) {
                r.type === Ct.MODEL && r.level === e.Dt.level && ld.isContain(r.coordinates[0], e.xm()) && (e.My = t, 
                n = !0);
            }); else for (var r, i = 0; i < t.levelChart.length; i += 2) t.levelChart[i] === this.Dt.level && (r = t.levelChart[i + 1], 
            r = t.Om.get(r), ld.isContain(r[0], this.xm())) && (this.My = t, n = !0);
            return n;
        },
        Ip: function(t) {
            var e = this;
            this.traverse(function(n) {
                e.My || (e.Em(n), e.My && t(n));
            });
        },
        Gp: function() {
            var t = this;
            if (this.vy && this.My.Ae != this.Ct.ze.mapID) {
                var e = this.Ly(), n = this.My.Ae;
                if (e || this.wy === n || (n = this.wy, e = !0), e) {
                    if (this.getState().viewBuildingID && this.getState().viewBuildingID !== this.Ct.ze.mapID) return;
                    e = {
                        type: "buildingExited",
                        buildingID: n
                    };
                    var r = (this.vy = !1, this.My = null, this.getBuilding(n));
                    this.ui.Dc(n) && r.Nf && (r.Nf = !1, this.Ye.We(e));
                }
            }
            this.traverse(function(e) {
                var n;
                t.vy || t.Em(e) && (n = t.Mm(), t.wy = e.buildingID, !n || t.getState().viewBuildingID && t.getState().viewBuildingID !== t.Ct.ze.mapID || (t.vy = !0, 
                t.ui.Dc(e.Ae) && 0 == e.Nf ? (e.Nf = !0, t.Ye.We({
                    type: "buildingEntered",
                    buildingID: e.Ae
                })) : (t._y = e.Ae, t.on("update", t.Sy))));
            });
        },
        Sy: function() {
            var t, e;
            this.ui.Dc(this._y) && (this.My && this.My.Ae === this._y && (t = this.Em(this.My), 
            e = this.Mm(), t) && e && (this.My.Nf = !0, this.Ye.We({
                type: "buildingEntered",
                buildingID: this._y
            })), this.off("update", this.Sy), this._y = null);
        },
        Ly: function() {
            var t, e = this.ky();
            return this.My.overviewMode == yp.NORMAL ? (t = (t = this.getZoom()) < this.My.Lf || t >= this.My.kf, 
            !e || t) : !e;
        },
        Mm: function() {
            var t;
            return this.My.overviewMode != yp.NORMAL || !((t = this.getZoom()) < this.My.Lf || t >= this.My.kf);
        },
        ky: function() {
            var t, e, n = this;
            return null != this.My && (!!this.Em(this.My) || null != (t = this.My.getFloor(this.My.level).getLayers(Ct.EXTENT_LAYER)[0]) && (e = !1, 
            t && t.traverse(function(t) {
                e = !ld.isContain(t.coordinates[0], n.xm());
            }), !e));
        }
    }), ih);
    function gx(t) {
        return (gx = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function bx(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != gx(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != gx(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == gx(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function xx(t, e, n) {
        e = Sx(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], Sx(t).constructor) : e.apply(t, n)) && ("object" === gx(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function Sx(t) {
        return (Sx = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function _x(t, e) {
        return (_x = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    oy = function() {
        var t = n, e = Qm;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t) {
            if (this instanceof n) return (t = xx(this, n, [ t ])).Ie = new Map(), t;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && _x(t, e), t = n, (e = [ {
            key: "moveTo",
            value: function(t) {
                var e, n = this, r = void 0 !== t.animate && t.animate, i = t.duration || .5, o = this.Zi(vx);
                if (o) return r ? (this.Ie.has("moveTo") ? e = this.Ie.get("moveTo") : (e = new ne(), 
                this.Ie.set("moveTo", e)), e.nn([ this._t, this.St ]).en([ t.x, t.y ]).rn(i).an(function(e) {
                    n._t = e.destination[0], n.St = e.destination[1], n.Lv(), t.update && t.update({
                        x: n._t,
                        y: n.St,
                        level: n.rr,
                        height: n.nt,
                        buildingID: n.Rv
                    }), o.enableUpdateRender();
                }).un(function() {
                    n._t = t.x, n.St = t.y, n.Lv(), t.finish && t.finish(), o.enableUpdateRender();
                }), o.Oi.Si(e.$t()), e) : (this._t = t.x, this.St = t.y, this.Lv(), t.finish && t.finish(), 
                void o.enableUpdateRender());
            }
        }, {
            key: "stop",
            value: function() {
                var t = this.Zi(vx);
                t && this.Ie && (this.Ie.forEach(function(e) {
                    t.Oi.Ai(e);
                }), this.Ie.clear());
            }
        } ]) && bx(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }();
    var Ex = (Object.assign(oy.prototype, {
        Lv: function() {
            if (this.xi) {
                var t = this.Zi(vx);
                if (!t) return !1;
                var e = this.Re === Ct.DOM_MARKER ? this.Ay.height + this.nt : this.nt;
                this.xi.position.set(this._t - t.x, e, -this.St + t.y), this.needUpdateBound = !0, 
                t.enableUpdateRender();
            }
        }
    }), oy);
    function Ox(t) {
        return (Ox = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Mx(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Ox(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Ox(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Ox(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function Tx(t, e, n) {
        e = Ax(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], Ax(t).constructor) : e.apply(t, n)) && ("object" === Ox(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function Lx() {
        return (Lx = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function(t, e, n) {
            var r = function(t, e) {
                for (;!Object.prototype.hasOwnProperty.call(t, e) && null !== (t = Ax(t)); ) ;
                return t;
            }(t, e);
            if (r) return (r = Object.getOwnPropertyDescriptor(r, e)).get ? r.get.call(arguments.length < 3 ? t : n) : r.value;
        }).apply(this, arguments);
    }
    function Ax(t) {
        return (Ax = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function Px(t, e) {
        return (Px = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    var Rx = function() {
        var t = n, e = Ex;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t) {
            if (this instanceof n) return Tx(this, n, [ t ]);
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && Px(t, e), t = n, (e = [ {
            key: "collision",
            get: function() {
                return this.Ho;
            },
            set: function(t) {
                this.Ho !== t && (this.Ho = t, t = this.Zi(vx)) && t.ui.Xo();
            }
        }, {
            key: "addTo",
            value: function(t) {
                Lx(Ax(n.prototype), "addTo", this).call(this, t), (t = this.Zi(vx)) && (t.on("viewModeChanged", this.No), 
                t.on("zoom", this.No), t.on("resize", this.No), t.ui.Xo());
            }
        }, {
            key: "remove",
            value: function() {
                this.stop();
                var t = this.Zi(vx);
                t && (t.off("viewModeChanged", this.No), t.off("zoom", this.No), t.off("resize", this.No), 
                Lx(Ax(n.prototype), "remove", this).call(this), t.ui.Xo(), t.enableUpdateRender());
            }
        } ]) && Mx(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }();
    function jx(t) {
        return (jx = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Ix(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != jx(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != jx(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == jx(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function Dx(t, e, n) {
        e = kx(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], kx(t).constructor) : e.apply(t, n)) && ("object" === jx(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        return Cx(r);
    }
    function kx(t) {
        return (kx = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function Cx(t) {
        if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return t;
    }
    function Nx(t, e) {
        return (Nx = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    gy = function() {
        var t = n, e = Rx;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t) {
            var e;
            if (this instanceof n) return (e = Dx(this, n, [ t ])).Re = Ct.IMAGE_MARKER, e.Oh = t.url, 
            e.Ro = void 0 !== t.size ? t.size : 32, e.$v = void 0 !== t.depth && t.depth, e.ht = void 0 !== t.opacity ? t.opacity : 1, 
            e.Ho = void 0 === t.collision || t.collision, e.je = Ht.getCenterByAnchor(t.anchor), 
            e.No = e.No.bind(Cx(e)), e;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && Nx(t, e), t = n, (e = [ {
            key: "url",
            get: function() {
                return this.Oh;
            },
            set: function(t) {
                this.Oh = t, this.Lh();
            }
        }, {
            key: "opacity",
            get: function() {
                return this.ht;
            },
            set: function(t) {
                this.ht = t, this.Lh();
            }
        }, {
            key: "size",
            get: function() {
                return this.Ro;
            },
            set: function(t) {
                this.Ro = t, this.No();
            }
        }, {
            key: "jump",
            value: function(t) {
                return hd(this, t);
            }
        }, {
            key: "stopJump",
            value: function() {
                return fd(this);
            }
        }, {
            key: "boost",
            value: function(t) {
                return ud(this, t);
            }
        }, {
            key: "stopBoost",
            value: function() {
                return cd(this);
            }
        }, {
            key: "getRenderNode",
            value: function() {
                return this.xi;
            }
        } ]) && Ix(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }();
    var Fx = (Object.assign(gy.prototype, {
        lc: function() {
            var t;
            return !!this.Oh && !!(t = this.Zi(vx)) && (t = this.Tr(t), this.xi = new Lp(t), 
            this.xi.center.set(this.je.x, this.je.y), this.xi.visible = this.Yi, this.Lv(), 
            this.No(), (this.xi.mapNode = this).Xf = !0);
        },
        No: function() {
            var t = this.Zi(vx);
            t && (pd(t.ui, this), t.ui.Xo(), t.enableUpdateRender());
        },
        Lh: function() {
            var t = this.Zi(vx);
            t && (this.xi.material = this.Tr(t), this.No());
        },
        Tr: function(t) {
            var e = this, n = this.Zi(Db);
            return t.ui.Fr.zu({
                url: this.Oh,
                needDepth: this.$v,
                opacity: this.ht * n.ht
            }, function() {
                e.xi && e.No(), t.enableUpdateRender();
            });
        }
    }), gy);
    function Bx(t) {
        return (Bx = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Ux(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Bx(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Bx(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Bx(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function zx(t, e, n) {
        e = Gx(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], Gx(t).constructor) : e.apply(t, n)) && ("object" === Bx(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        return Hx(r);
    }
    function Gx(t) {
        return (Gx = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function Hx(t) {
        if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return t;
    }
    function Vx(t, e) {
        return (Vx = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    function Wx(t) {
        return (Wx = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Yx(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Wx(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Wx(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Wx(t) ? t : String(t);
            }(r.key), r);
        }
    }
    Oy = function() {
        var t = n, e = Rx;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t) {
            var e;
            if (this instanceof n) return (e = zx(this, n, [ t ])).Re = void 0 !== t.type ? t.type : Ct.TEXT_MARKER, 
            e.$d = void 0 !== t.text ? t.text : "", e.Ry = void 0 !== t.fontsize ? t.fontsize : 20, 
            void 0 !== t.fontSize && (e.Ry = t.fontSize), e.Cy = t.fontFamily, e.Ev = void 0 !== t.fillColor ? t.fillColor : "0,0,0", 
            e.Ny = void 0 !== t.strokeColor ? t.strokeColor : "255,225,255", e.Py = void 0 !== t.strokeWidth ? t.strokeWidth : 1, 
            e.Dy = t.plateColor, e.Iy = t.plateStrokeColor, e.$v = void 0 !== t.depth && t.depth, 
            e.Ho = void 0 === t.collision || t.collision, e.ht = void 0 !== t.opacity ? t.opacity : 1, 
            e.Fy = void 0 !== t.textAlign ? t.textAlign : Kl.Center, e.Gy = t.anchor, e.je = Ht.getCenterByAnchor(t.anchor), 
            e.Ro = 0, e.No = e.No.bind(Hx(e)), e;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && Vx(t, e), t = n, (e = [ {
            key: "size",
            get: function() {
                return this.Ro;
            },
            set: function(t) {
                this.Ro = t;
            }
        }, {
            key: "text",
            get: function() {
                return this.$d;
            },
            set: function(t) {
                this.$d = t;
            }
        }, {
            key: "fillColor",
            get: function() {
                return this.Ev;
            },
            set: function(t) {
                this.Ev = t;
            }
        }, {
            key: "strokeColor",
            get: function() {
                return this.Ny;
            },
            set: function(t) {
                this.Ny = t;
            }
        }, {
            key: "strokeWidth",
            get: function() {
                return this.Py;
            },
            set: function(t) {
                this.Py = t;
            }
        }, {
            key: "fontsize",
            get: function() {
                return this.Ry;
            },
            set: function(t) {
                this.Ry = t;
            }
        }, {
            key: "fontSize",
            get: function() {
                return this.Ry;
            },
            set: function(t) {
                this.Ry = t;
            }
        }, {
            key: "plateColor",
            get: function() {
                return this.Dy;
            },
            set: function(t) {
                this.Dy = t;
            }
        }, {
            key: "plateStrokeColor",
            get: function() {
                return this.Iy;
            },
            set: function(t) {
                this.Iy = t;
            }
        }, {
            key: "update",
            value: function() {
                this.Lh();
            }
        }, {
            key: "setInitWriteRenderNodeFunction",
            value: function(t) {
                this.Uy = t;
            }
        }, {
            key: "findParent",
            value: function(t) {
                return this.Zi(t);
            }
        }, {
            key: "updateSize",
            value: function() {
                this.No();
            }
        }, {
            key: "getRenderNode",
            value: function() {
                return this.xi;
            }
        }, {
            key: "getScreenSize",
            value: function() {
                var t = null;
                return this.xi ? {
                    width: this.xi.children[0].material.map.image.width / 2,
                    height: this.xi.children[0].material.map.image.height / 2
                } : t;
            }
        } ]) && Ux(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }(), Object.assign(Oy.prototype, {
        lc: function() {
            var t = this.Zi(vx);
            return !!t && (this.rv = !1, t = t.ui, t = this.Tr(t.Fr).material, this.xi = new ga(), 
            (t = new Lp(t)).center.set(this.je.x, this.je.y), this.xi.add(t), this.No(), this.Lv(), 
            this.xi.mapNode = this, (t.mapNode = this).Xf = !0, this.Uy && (this.xi = this.Uy(this.xi)), 
            !0);
        },
        By: function(t, e) {
            if (t && t.material) {
                var n = this.Zi(vx);
                if (!n) return !1;
                n = n.ui.Wf(e), t.scale.set(n, n, n), t.scale.multiplyScalar(t.material.userData.mspriteScale || 1), 
                t.scale.setX(t.scale.x / t.material.userData.scaleRatio);
            }
        },
        No: function() {
            var t = this.Zi(vx);
            if (!t) return !1;
            var e = this.xi.isGroup ? this.xi.children[0] : this.xi;
            "Sprite" === e.type && (this.By(e, this.Ro), t.enableUpdateRender());
        },
        kv: function(t) {
            t && t.material && (t.material.map && t.material.map.dispose(), t.material.dispose());
        },
        Lh: function() {
            var t, e = this.Zi(vx);
            e && (t = this.xi.isGroup ? this.xi.children[0] : this.xi, this.kv(t), e = this.Tr(e.ui.Fr).material, 
            t.material = e, this.No());
        },
        Tr: function(t) {
            var e = this, n = this.Zi(Db);
            t = t.Du(this.$d, {
                fontsize: this.rv ? this.Ry + 2 : this.Ry,
                fillColor: $t.toRgba(this.Ev),
                strokeColor: $t.toRgba(this.Ny),
                plateColor: $t.toRgba(this.Dy),
                plateStrokeColor: $t.toRgba(this.Iy),
                strokeWidth: this.Py
            }, {
                family: this.Cy,
                needSize: !0,
                opacity: this.ht * n.ht,
                textAlign: this.Fy,
                drawText: !this.rv,
                callback: function() {
                    var t = e.Zi(vx);
                    t && t.enableUpdateRender();
                }
            });
            return this.Ro = t.size, {
                material: t
            };
        }
    }), jy = Oy;
    var Xx = function() {
        function t() {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
        }
        var e, n;
        return e = t, n = [ {
            key: "createShape",
            value: function(t, e) {
                var n = new Af();
                if (Array.isArray(t[0])) {
                    var r = t[0];
                    n.moveTo(r[0].x - e.x, r[0].y - e.y);
                    for (var i = 1; i < r.length; i++) n.lineTo(r[i].x - e.x, r[i].y - e.y);
                    if (1 < t.length) for (var o = 1; o < t.length; o++) {
                        var a = t[o], s = new Lf();
                        if (0 < a.length) {
                            s.moveTo(a[0].x - e.x, a[0].y - e.y);
                            for (var l = 1; l < a.length; l++) s.lineTo(a[l].x - e.x, a[l].y - e.y);
                        }
                        n.holes.push(s);
                    }
                } else {
                    n.moveTo(t[0].x - e.x, t[0].y - e.y);
                    for (var u = 1; u < t.length; u++) n.lineTo(t[u].x - e.x, t[u].y - e.y);
                }
                return n;
            }
        }, {
            key: "createShapeBufferGeometryByCenter",
            value: function(t, e, n) {
                if (t = new qf(this.createShape(t, e)), n) {
                    for (var r = [ Number.MAX_VALUE, Number.MAX_VALUE ], i = [ -Number.MAX_VALUE, -Number.MAX_VALUE ], o = t.attributes.position.array, a = 0; a < o.length / 3; a++) {
                        var s = o[3 * a], l = o[3 * a + 1];
                        s < r[0] && (r[0] = s), l < r[1] && (r[1] = l), i[0] < s && (i[0] = s), i[1] < l && (i[1] = l);
                    }
                    for (var u = t.attributes.uv.array, c = [ i[0] - r[0], i[1] - r[1] ], h = 0; h < o.length / 3; h++) {
                        var f = o[3 * h], p = o[3 * h + 1];
                        u[2 * h] = (f - r[0]) / c[0], u[2 * h + 1] = (p - r[1]) / c[1];
                    }
                    t.setAttribute("uv", new yr(u, 2));
                }
                return t;
            }
        }, {
            key: "createExtrudeBufferGeometry",
            value: function(t, e) {
                return new Jf(t, {
                    steps: 1,
                    depth: e.depth,
                    bevelEnabled: !1,
                    bevelThickness: 0,
                    bevelSize: 0,
                    bevelOffset: 0,
                    bevelSegments: 1
                });
            }
        }, {
            key: "closedPoints",
            value: function(t) {
                return rp.closedPoints(t);
            }
        }, {
            key: "createReactShape",
            value: function(t, e) {
                var n = new Af();
                e /= 2, t /= 2;
                return n.moveTo(-t, -e), n.lineTo(-t, e), n.lineTo(t, e), n.lineTo(t, -e), n;
            }
        }, {
            key: "createCircleShape",
            value: function(t, e) {
                var n = new Af();
                return n.absarc(0, 0, t, 0, 2 * Math.PI, !1), n;
            }
        }, {
            key: "createReactExtrudeBufferGeometry",
            value: function(e, n, r) {
                return e = t.createReactShape(e, n), this.createExtrudeBufferGeometry(e, r);
            }
        }, {
            key: "createCircleExtrudeBufferGeometry",
            value: function(e, n, r) {
                return e = t.createCircleShape(e, n), this.createExtrudeBufferGeometry(e, r);
            }
        }, {
            key: "createCenterBufferGeometry",
            value: function(t, e) {
                for (var n = [], r = 0; r < t.length - 1; r++) for (var i = 2; i < 10; i += 2) n.push({
                    x: t[r].x + (t[r + 1].x - t[r].x) * i * .1,
                    y: t[r].y + (t[r + 1].y - t[r].y) * i * .1,
                    z: t[r].z + (t[r + 1].z - t[r].z) * i * .1
                });
                n.push({
                    x: n[0].x,
                    y: n[0].y,
                    z: n[0].z
                });
                for (var o = new Mr(), a = [], s = [], l = 0; l < n.length - 1; l++) a.push(n[l].x), 
                a.push(n[l].y), a.push(n[l].z), a.push(n[l + 1].x), a.push(n[l + 1].y), a.push(n[l + 1].z), 
                a.push(e.x), a.push(e.y), a.push(e.z), s.push(0, 0, 1);
                var u = new Float32Array(a);
                return o.setAttribute("position", new yr(u, 3)), o.setAttribute("gradientAlpha", new yr(s, 1)), 
                o;
            }
        }, {
            key: "scalePoints",
            value: function(t, e, n) {
                for (var r = [], i = 0; i < t.length; i++) {
                    var o = t[i].x, a = t[i].y, s = t[i].z;
                    r.push({
                        x: o + (o - e.x) * (n - 1),
                        y: a + (a - e.y) * (n - 1),
                        z: s
                    });
                }
                return r;
            }
        }, {
            key: "scaleValuePoints",
            value: function(t, e, n) {
                for (var r = [], i = 0; i < t.length; i++) {
                    var o = {
                        x: t[i].x,
                        y: t[i].y,
                        z: t[i].z
                    };
                    o.x - e.x < 0 ? o.x -= n : o.x += n, o.y - e.y < 0 ? o.y -= n : o.y += n, r.push(o);
                }
                return r;
            }
        } ], null && Yx(e.prototype, null), n && Yx(e, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }();
    function Zx(t) {
        return (Zx = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function qx(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Zx(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Zx(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Zx(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function Kx(t, e, n) {
        e = Jx(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], Jx(t).constructor) : e.apply(t, n)) && ("object" === Zx(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function Jx(t) {
        return (Jx = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function Qx(t, e) {
        return (Qx = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    function $x(t) {
        return ($x = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function tw(t, e, n) {
        e = ew(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], ew(t).constructor) : e.apply(t, n)) && ("object" === $x(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function ew(t) {
        return (ew = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function nw(t, e) {
        return (nw = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    Fy = function() {
        var t = n, e = Qm;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t) {
            var e;
            if (this instanceof n) return (e = Kx(this, n, [ t ])).Re = Ct.POLYGON_MARKER, e.Oh = void 0 !== t.url ? t.url : void 0, 
            e.vd = void 0 !== t.color ? t.color : "#FF0000", e.ht = void 0 !== t.opacity ? t.opacity : 1, 
            e.R0 = t.borderColor || t.borderColor || "#00ff00", e.Kv = "number" == typeof t.borderWidth ? t.borderWidth : 2, 
            e.nt = void 0 !== t.height ? t.height : 0, e.Vf = void 0 !== t.points ? t.points : [], 
            e;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && Qx(t, e), t = n, (e = [ {
            key: "x",
            get: function() {
                return this._t;
            }
        }, {
            key: "y",
            get: function() {
                return this.St;
            }
        }, {
            key: "points",
            get: function() {
                return this.Vf;
            },
            set: function(t) {
                var e, n;
                this.Vf = t, this.xi && (t = this.Zi(vx)) && (e = new Mt(t.x, t.y), e = Xx.createShapeBufferGeometryByCenter(this.Vf, e, !!this.Oh), 
                n = this.xi.geometry, this.xi.geometry = e, n.dispose(), n = null, n = this.Hy(e), 
                this.jf.S0(n), t.enableUpdateRender());
            }
        }, {
            key: "color",
            get: function() {
                return this.vd;
            },
            set: function(t) {
                this.vd = t, this.zy();
            }
        }, {
            key: "borderColor",
            get: function() {
                return this.R0;
            },
            set: function(t) {
                this.R0 = t, this.jf && (this.jf.color = t, this.jf.update());
            }
        }, {
            key: "borderWidth",
            get: function() {
                return this.Kv;
            },
            set: function(t) {
                this.Kv = t, this.jf && (this.jf.width = t, this.jf.update());
            }
        }, {
            key: "opacity",
            get: function() {
                return this.ht;
            },
            set: function(t) {
                this.ht = t, this.zy();
            }
        }, {
            key: "getBound",
            value: function() {
                return ld.bound(this.Vf);
            }
        }, {
            key: "getInsideCenter",
            value: function() {
                var t = {};
                return ld.calculatorInsideCentroid(this.Vf, t), t;
            }
        }, {
            key: "getRenderNode",
            value: function() {
                return this.xi;
            }
        } ]) && qx(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }(), Object.assign(Fy.prototype, {
        Hy: function(t) {
            for (var e = t.attributes.position.array.length, n = new Float32Array(e + 3), r = 0; r < e; r++) n[r] = t.attributes.position.array[r];
            return n[e] = t.attributes.position.array[0], n[e + 1] = t.attributes.position.array[1], 
            n[e + 2] = t.attributes.position.array[2], n;
        },
        lc: function() {
            var t, e, n, r;
            return !!this.Vf && !!(t = this.Zi(vx)) && (r = this.Zi(Db), e = t.ui.Fr.Lu({
                url: this.Oh,
                color: this.vd,
                opacity: this.ht * r.ht,
                visible: !this.Oh
            }, function() {
                e.map.wrapS = dt, e.map.wrapT = dt, e.needsUpdate = !0, e.visible = !0;
            }), r = new Mt(t.x, t.y), r = Xx.createShapeBufferGeometryByCenter(this.Vf, r, !!this.Oh), 
            n = this.Hy(r), cy(r, e, this), this.xi.position.set(0, this.nt, 0), (r = new Yv({
                color: this.R0,
                width: this.Kv
            })).Bt = this, r._0(n, t), this.Iv = n, this.jf = r, this.xi.add(r.xi), t.enableUpdateRender(), 
            !0);
        },
        Lv: function() {
            this.xi && this.xi.position.set(0, this.nt, 0), this.Zi(vx).enableUpdateRender();
        },
        zy: function() {
            var t = this, e = this.Zi(vx);
            if (!e) return !1;
            var n = e.ui, r = this.Zi(Db);
            this.xi.material = n.Fr.Lu({
                url: this.Oh,
                color: this.vd,
                opacity: this.ht * r.ht,
                visible: !this.Oh
            }, function() {
                t.xi.material.map.wrapS = dt, t.xi.material.map.wrapT = dt, t.xi.material.needsUpdate = !0, 
                t.xi.material.visible = !0;
            }), e.enableUpdateRender();
        },
        Lh: function() {
            this.zy(), this.jf.update();
        }
    }), lb = Fy;
    var rw = function() {
        var t = n, e = Mr;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n() {
            var t, e;
            if (this instanceof n) return t = tw(this, n), e = new Ta(new Float32Array([ -.5, 0, -.5, 0, 0, .5, 0, -.5, 1, 0, .5, 0, .5, 1, 1, -.5, 0, .5, 0, 1 ]), 5), 
            t.setIndex([ 0, 1, 2, 0, 2, 3 ]), t.setAttribute("position", new Aa(e, 3, 0, !1)), 
            t.setAttribute("uv", new Aa(e, 2, 3, !1)), t;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && nw(t, e), t = n, Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }();
    function iw(t) {
        return (iw = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function ow(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != iw(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != iw(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == iw(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function aw(t, e, n) {
        e = uw(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], uw(t).constructor) : e.apply(t, n)) && ("object" === iw(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        return sw(r);
    }
    function sw(t) {
        if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return t;
    }
    function lw() {
        return (lw = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function(t, e, n) {
            var r = function(t, e) {
                for (;!Object.prototype.hasOwnProperty.call(t, e) && null !== (t = uw(t)); ) ;
                return t;
            }(t, e);
            if (r) return (r = Object.getOwnPropertyDescriptor(r, e)).get ? r.get.call(arguments.length < 3 ? t : n) : r.value;
        }).apply(this, arguments);
    }
    function uw(t) {
        return (uw = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function cw(t, e) {
        return (cw = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    pb = function() {
        var t = n, e = Ex;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t) {
            var e;
            if (this instanceof n) return (e = aw(this, n, [ t ])).Re = Ct.LOCATION_MARKER, 
            e.Oh = t.url, e.Ro = void 0 !== t.size ? t.size : 20, e.rr = void 0 !== t.level ? t.level : 1, 
            e.ht = void 0 !== t.opacity ? t.opacity : 1, e.Rv = t.buildingID, e.Vy = 0, e.No = e.No.bind(sw(e)), 
            e.Lv = e.Lv.bind(sw(e)), e;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && cw(t, e), t = n, (e = [ {
            key: "buildingID",
            get: function() {
                return this.Rv;
            }
        }, {
            key: "level",
            get: function() {
                return this.rr;
            },
            set: function(t) {
                this.rr !== t && (this.rr = t, t = this.Zi(vx), this.remove(), this.addTo(t));
            }
        }, {
            key: "opacity",
            get: function() {
                return this.ht;
            },
            set: function(t) {
                this.ht = t, this.Xf && this.Lh();
            }
        }, {
            key: "url",
            get: function() {
                return this.Oh;
            },
            set: function(t) {
                this.Oh = t, this.Lh();
            }
        }, {
            key: "size",
            get: function() {
                return this.Ro;
            },
            set: function(t) {
                this.Ro = t, this.No();
            }
        }, {
            key: "moveTo",
            value: function(t) {
                if (this.Rv !== t.buildingID) {
                    this.Rv = t.buildingID, this.rr = t.level;
                    var e = this.Zi(vx);
                    if (!e) return !1;
                    this.remove(), this.addTo(e);
                } else t.level && (this.level = t.level);
                return lw(uw(n.prototype), "moveTo", this).call(this, t);
            }
        }, {
            key: "rotateTo",
            value: function(t) {
                var e = this, n = this.Zi(vx);
                if (!n) return !1;
                var r, i = t.duration || .5, o = this.xi.rotation.y, a = 0, s = o + (a = (s = t.heading % 360 * Dt.DEG2RAD) - o != 0 ? Math.sin(s - o) / Math.abs(Math.sin(s - o)) * Math.acos(Math.cos(s - o)) : a);
                t.animate ? (this.Ie.has("rotation") ? ((r = this.Ie.get("rotation")).finish(), 
                r.nn([ o ]), r.en([ s ])) : (r = new ne({
                    src: [ o ],
                    dest: [ s ]
                }), this.Ie.set("rotation", r)), r.rn(i).an(function(t) {
                    e.xi && (e.xi.rotation.y = t.destination[0], e.Vy = t.destination[0], n.enableUpdateRender());
                }).un(function() {
                    n.Oi.Ai(r), n.enableUpdateRender(), t.finish && t.finish();
                }), n.Oi.Si(r.$t())) : this.xi && (this.xi.rotation.y = s, this.Vy = s, n.enableUpdateRender());
            }
        }, {
            key: "addTo",
            value: function(t) {
                var e = this.ai(t);
                e && (lw(uw(n.prototype), "addTo", this).call(this, e), t.on("zoom", this.No), t.on("resize", this.No), 
                t.on("viewChanged", this.No));
            }
        }, {
            key: "remove",
            value: function() {
                this.stop();
                var t = this.Zi(vx);
                if (!t) return !1;
                t.off("zoom", this.No), t.off("resize", this.No), t.off("viewChanged", this.No), 
                lw(uw(n.prototype), "remove", this).call(this);
            }
        }, {
            key: "getRenderNode",
            value: function() {
                return this.xi;
            }
        } ]) && ow(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }(), Object.assign(pb.prototype, {
        lc: function() {
            var t, e, n = this.Zi(vx);
            return !!n && (e = new rw(), t = this.Tr(n), this.xi = new mi(e, t), this.xi.renderOrder = 1, 
            (this.xi.mapNode = this).Lv(), this.xi.rotation.set(0, this.Vy, -Math.PI, "XYZ"), 
            this.xi.updateMatrixWorld(!0), e = n.ui.jm(this.xi, this.Ro), this.xi.scale.set(e, e, e), 
            this.xi.visible = this.Yi, this.Bt.xo.add(this.xi), this.Xf = !0);
        },
        No: function() {
            var t, e, n = this.Zi(vx);
            !n || (e = this.xi.position, t = !1, t = !!(isNaN(e.x) || isNaN(e.y) || isNaN(e.z) || "number" != typeof e.x || "number" != typeof e.y || "number" != typeof e.z) || t) || (e = n.ui.jm(this.xi, this.Ro), 
            this.xi.scale.set(e, e, e), n.enableUpdateRender());
        },
        Lv: function() {
            var t, e = this.Zi(vx);
            e && (t = this.ai(e)) && (this.xi.position.set(this._t - e.x, t.nt + this.nt, -this.St + e.y), 
            this.needUpdateBound = !0, e.enableUpdateRender());
        },
        Tr: function(t) {
            var e = this;
            return t.ui.Fr.ku({
                url: this.Oh,
                flipY: !1,
                opacity: this.ht
            }, function() {
                var n;
                e.xi && (n = t.ui.jm(e.xi, e.Ro), e.xi.scale.set(n, n, n), t.enableUpdateRender());
            });
        },
        Lh: function() {
            var t = this.Zi(vx);
            if (!t) return !1;
            this.xi.material.map && this.xi.material.map.dispose(), this.xi.material.dispose(), 
            this.xi.material = this.Tr(t), this.xi.material.needsUpdate = !0, t.enableUpdateRender();
        },
        ai: function(t) {
            return (this.Rv ? t.getBuilding(this.Rv) : t).getFloor(this.rr);
        }
    }), gb = pb, _b = {
        EDGES_LINES_TYPE: "EDGES_LINES_TYPE"
    };
    var hw = (Object.freeze(_b), _b), fw = {
        NONE: 0,
        ALL: 1,
        TOP: 2
    };
    function pw(t, e) {
        Mr.call(this), this.type = "EdgesGeometry", this.parameters = {
            thresholdAngle: e
        }, e = void 0 !== e ? e : 1;
        for (var n, r, i, o, a = [], l = Math.cos(s.DEG2RAD * e), u = [ 0, 0 ], c = {}, h = [ "a", "b", "c" ], f = (t.isBufferGeometry ? (o = new or()).fromBufferGeometry(t) : o = t.clone(), 
        o.mergeVertices(), o.computeFaceNormals(), o.vertices), p = o.faces, d = 0, y = p.length; d < y; d++) for (var m = p[d], v = 0; v < 3; v++) n = m[h[v]], 
        r = m[h[(v + 1) % 3]], u[0] = Math.min(n, r), u[1] = Math.max(n, r), void 0 === c[i = u[0] + "," + u[1]] ? c[i] = {
            index1: u[0],
            index2: u[1],
            face1: d,
            face2: void 0
        } : c[i].face2 = d;
        for (i in c) {
            var g, b = c[i];
            (void 0 === b.face2 || p[b.face1].normal.dot(p[b.face2].normal) <= l) && (g = f[b.index1], 
            a.push(g.x, g.y, g.z), g = f[b.index2], a.push(g.x, g.y, g.z));
        }
        this.setAttribute("position", new yr(a, 3));
    }
    function dw(t) {
        return (dw = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function yw(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != dw(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != dw(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == dw(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function mw(t, e, n) {
        e = vw(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], vw(t).constructor) : e.apply(t, n)) && ("object" === dw(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function vw(t) {
        return (vw = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function gw(t, e) {
        return (gw = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    (pw.prototype = Object.create(Mr.prototype)).constructor = pw;
    var bw = function() {
        var t = n, e = Qm;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t) {
            var e;
            if (this instanceof n) return (e = mw(this, n, [ t ])).Re = hw.EDGES_LINES_TYPE, 
            e.t0 = void 0 !== t.lineType ? t.lineType : fw.TOP, e.Wy = void 0 !== t.lineAlpha ? t.lineAlpha : 1, 
            e.R0 = void 0 !== t.lineColor ? t.lineColor : "#FF0000", e;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && gw(t, e), t = n, (e = [ {
            key: "lineColor",
            get: function() {
                return this.R0;
            },
            set: function(t) {
                this.R0 !== t && (this.R0 = t, this.Lh());
            }
        }, {
            key: "lineAlpha",
            get: function() {
                return this.Wy;
            },
            set: function(t) {
                this.Wy !== t && (this.Wy = t, this.Lh());
            }
        } ]) && yw(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }(), xw = (Object.assign(bw.prototype, {
        M0: function(t) {
            t = new pw(t);
            if (!(e = this.Zi(vx))) return !1;
            var e = e.ui, n = this.Zi(Db);
            e = e.Fr.Yu(this.R0, this.Wy * n.ht);
            this.xi = new Xc(t, e), this.Xf = !0;
        },
        Lh: function() {
            var t, e = this.Zi(vx);
            e && (t = this.Zi(Db), this.xi.material = e.ui.Fr.Yu(this.R0, this.Wy * t.ht));
        }
    }), bw);
    function ww(t) {
        return (ww = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Sw(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != ww(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != ww(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == ww(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function _w(t, e, n) {
        e = Mw(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], Mw(t).constructor) : e.apply(t, n)) && ("object" === ww(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        return Ew(r);
    }
    function Ew(t) {
        if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return t;
    }
    function Ow() {
        return (Ow = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function(t, e, n) {
            var r = function(t, e) {
                for (;!Object.prototype.hasOwnProperty.call(t, e) && null !== (t = Mw(t)); ) ;
                return t;
            }(t, e);
            if (r) return (r = Object.getOwnPropertyDescriptor(r, e)).get ? r.get.call(arguments.length < 3 ? t : n) : r.value;
        }).apply(this, arguments);
    }
    function Mw(t) {
        return (Mw = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function Tw(t, e) {
        return (Tw = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    function Lw(t) {
        return (Lw = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Aw(t, e) {
        (null == e || e > t.length) && (e = t.length);
        for (var n = 0, r = new Array(e); n < e; n++) r[n] = t[n];
        return r;
    }
    function Pw(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != Lw(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != Lw(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == Lw(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function Rw(t, e, n) {
        e = Dw(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], Dw(t).constructor) : e.apply(t, n)) && ("object" === Lw(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        return jw(r);
    }
    function jw(t) {
        if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return t;
    }
    function Iw() {
        return (Iw = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function(t, e, n) {
            var r = function(t, e) {
                for (;!Object.prototype.hasOwnProperty.call(t, e) && null !== (t = Dw(t)); ) ;
                return t;
            }(t, e);
            if (r) return (r = Object.getOwnPropertyDescriptor(r, e)).get ? r.get.call(arguments.length < 3 ? t : n) : r.value;
        }).apply(this, arguments);
    }
    function Dw(t) {
        return (Dw = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function kw(t, e) {
        return (kw = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    Wy = function() {
        var t = n, e = Qm;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t) {
            var e;
            if (!(this instanceof n)) throw new TypeError("Cannot call a class as a function");
            if ((e = _w(this, n, [ t ])).Re = Ct.EXTRUDE_MARKER, e.ht = void 0 !== t.opacity ? t.opacity : 1, 
            e.vd = void 0 !== t.color ? t.color : "#FF0000", e.Yy = void 0 !== t.extrudeHeight ? t.extrudeHeight : 1, 
            e.$v = e.Yy, e.Vf = void 0 !== t.points ? Object.assign(t.points) : [], Array.isArray(e.Vf[0])) for (var r = 0; r < e.Vf.length; r++) e.Vf[r].constructor === Array && (rp.polygonArea(e.Vf[r]) < 0 && e.Vf[r].reverse(), 
            rp.closedPoints(e.Vf[r])); else e.Vf.constructor === Array && (rp.polygonArea(e.Vf) < 0 && e.Vf.reverse(), 
            rp.closedPoints(e.Vf));
            return e.Xy = new xw({
                lineType: t.edgeMode,
                lineColor: void 0 !== t.edgeColor ? t.edgeColor : e.vd,
                lineAlpha: void 0 !== t.edgeOpacity ? t.edgeOpacity : e.ht
            }), e.Xy.Bt = Ew(e), e;
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && Tw(t, e), t = n, (e = [ {
            key: "x",
            get: function() {
                return this._t;
            }
        }, {
            key: "y",
            get: function() {
                return this.St;
            }
        }, {
            key: "color",
            get: function() {
                return this.vd;
            },
            set: function(t) {
                this.vd !== t && (this.vd = t, this.Zy());
            }
        }, {
            key: "opacity",
            get: function() {
                return this.ht;
            },
            set: function(t) {
                this.ht !== t && (this.ht = t, this.Zy());
            }
        }, {
            key: "edgeColor",
            get: function() {
                return this.Xy.R0;
            },
            set: function(t) {
                this.Xy.lineColor = t;
            }
        }, {
            key: "edgeOpacity",
            get: function() {
                return this.Xy.Wy;
            },
            set: function(t) {
                this.Xy.lineAlpha = t;
            }
        }, {
            key: "extrudeHeight",
            get: function() {
                return this.Yy;
            },
            set: function(t) {
                this.Yy !== t && (this.Yy = t, this.xi.scale.setZ(this.Yy / this.$v));
            }
        }, {
            key: "points",
            get: function() {
                return this.Vf;
            },
            set: function(t) {
                this.Vf = t, this.Vf.constructor === Array && (rp.polygonArea(this.Vf) < 0 && this.Vf.reverse(), 
                rp.closedPoints(this.Vf)), this.xi && (t = this.Zi(vx)) && (this.xi.parent.remove(this.xi), 
                this.xi.traverse(function(t) {
                    t instanceof mi && (t.geometry.dispose(), t.material = void 0, t.geometry = void 0);
                }), this.xi.mapNode = void 0, this.xi = void 0, this.lc(), this.parent.scene.add(this.xi), 
                t.enableUpdateRender());
            }
        }, {
            key: "dispose",
            value: function() {
                this.Xy && this.Xy.dispose(), Ow(Mw(n.prototype), "dispose", this).call(this);
            }
        }, {
            key: "getRenderNode",
            value: function() {
                return this.xi;
            }
        }, {
            key: "setType",
            value: function(t) {
                this.Re = t;
            }
        } ]) && Sw(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }(), Object.assign(Wy.prototype, {
        lc: function() {
            var t, e, n, r, i, o = this.Zi(vx);
            return !!o && (t = o.ui, e = this.Zi(Db), n = new Mt(o.x, o.y), i = Xx.createShape(this.Vf, n), 
            r = {
                depth: this.$v
            }, cy(i = Xx.createExtrudeBufferGeometry(i, r), t.Fr.Yu(this.vd, this.ht * e.ht), this), 
            this.xi.position.set(0, this.nt, 0), this.Xy.t0 === fw.TOP ? this.qy(n) : this.Xy.t0 === fw.ALL && this.Y0(i), 
            this.Xf = !0, o.enableUpdateRender(), this.Xf);
        },
        qy: function(t) {
            t = new qf(Xx.createShape(this.Vf, t)), this.Y0(t), this.Xy.xi.position.setZ(this.$v), 
            t.dispose();
        },
        Y0: function(t) {
            this.Xy.M0(t), this.xi.add(this.Xy.xi);
        },
        Zy: function() {
            var t, e = this.Zi(vx);
            e && (t = this.Zi(Db), this.xi.material = e.ui.Fr.Yu(this.vd, this.ht * t.ht), e.enableUpdateRender());
        },
        Lh: function() {
            this.Zy(), this.Xy.Lh();
        },
        Lv: function() {
            this.xi.position.set(0, this.nt, 0), this.Zi(vx).enableUpdateRender();
        }
    }), Wg = Wy;
    jg = function() {
        var t = n, e = Ex;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t) {
            var e;
            if (this instanceof n) return (e = Rw(this, n, [ t ])).Re = Ct.DYNAMIC_MODEL_MARKER, 
            e.Ae = void 0 !== t.id ? t.id : s.generateUUID(), e.Jy = s.generateUUID(), e.bd = void 0 !== t.fadeIn && t.fadeIn, 
            e.yh = void 0 !== t.fadeOut && t.fadeOut, e.ht = void 0 !== t.opacity ? t.opacity : null, 
            e.Ky = void 0 !== t.scale ? t.scale : 1, e.Qy = t.tilt, e.Oh = t.url, e.Yd = t.heading, 
            e.Kt = t.callback, e.$y = new Map(), e.$y.set(e.ROOT, t.color), e.Ah = null, e.ml = [], 
            e._d = null, e.Sd = null, e.md = e.md.bind(jw(e)), e;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && kw(t, e), t = n, (e = [ {
            key: "FID",
            get: function() {
                return this.Jy;
            }
        }, {
            key: "color",
            get: function() {
                return this.getModelColor();
            },
            set: function(t) {
                this.modifyModelColor(t);
            }
        }, {
            key: "scale",
            get: function() {
                return this.Ky;
            },
            set: function(t) {
                this.Ky = t, this.Co();
            }
        }, {
            key: "tilt",
            get: function() {
                return this.Qy;
            }
        }, {
            key: "heading",
            get: function() {
                return this.Yd;
            }
        }, {
            key: "opacity",
            get: function() {
                return this.ht;
            },
            set: function(t) {
                this.ht = t, this.Lh();
            }
        }, {
            key: "modifyModelColor",
            value: function(t, e) {
                e = e || this.ROOT, this.$y.set(e, t), this.Lh();
            }
        }, {
            key: "getModelColor",
            value: function(t) {
                return t = t || this.ROOT, this.$y.get(t);
            }
        }, {
            key: "rotateTo",
            value: function(t) {
                var e, n, r, i, o, a = this, s = this.Zi(vx);
                return !!s && (e = this.xi.rotation.y, r = t.heading % 360 * Dt.DEG2RAD, n = e + (o = r - e != (o = 0) ? Math.sin(r - e) / Math.abs(Math.sin(r - e)) * Math.acos(Math.cos(r - e)) : o), 
                t.animate ? (r = t.duration || .5, this.Ie.has("rotation") ? i = this.Ie.get("rotation") : (i = new ne(), 
                this.Ie.set("rotation", i)), o = this.Yd, i.nn([ e, o ]).en([ n, t.heading ]).rn(r).an(function(t) {
                    a.xi.rotation.y = t.destination[0], a.Yd = t.destination[1], s.enableUpdateRender();
                }).un(function() {
                    a.xi.rotation.y = n, a.Yd = t.heading, s.enableUpdateRender(), t.finish && t.finish();
                }), s.Oi.Si(i.$t())) : (this.xi.rotation.y = n, this.Yd = t.heading, s.enableUpdateRender(), 
                t.finish && t.finish()), this.Ie.get("rotation"));
            }
        }, {
            key: "startAction",
            value: function(t, e) {
                var n = this.ml[t];
                (e = (n && (e && (n.clampWhenFinished = !0, n.loop = 2200), this._d && this._d === t ? (n.time = this.Sd, 
                n.paused = !1, n.play(), this._d = null, this.Sd = null) : (this._d !== t && (this._d = null, 
                this.Sd = null), n.reset().setEffectiveTimeScale(1).setEffectiveWeight(1).play())), 
                this.Zi(vx))) && e.on("beforeRender", this.md);
            }
        }, {
            key: "getAction",
            value: function() {
                return this.ml;
            }
        }, {
            key: "getClip",
            value: function(t) {
                return this.ml[t].Rh;
            }
        }, {
            key: "getMixer",
            value: function() {
                return this.Ah;
            }
        }, {
            key: "stopAction",
            value: function(t) {
                var e;
                (e = ((e = this.Zi(vx)) && e.off("beforeRender", this.md), this.ml[t])) && (e.paused = !0, 
                this._d = t, this.Sd = e.time);
            }
        }, {
            key: "getActionNames",
            value: function() {
                return Object.keys(this.ml);
            }
        }, {
            key: "remove",
            value: function() {
                this.stop(), this.xi && this.xi.bloom && this.xi.bloom.remove(this);
                var t, e = this.Zi(vx);
                e && this.Ah && e.Oi.zd(this.Ah), e && (t = this.$y.get(this.ROOT), this.tb(this.xi, t, function(t) {
                    e.ui.Fr.ju(t, t.material);
                })), Iw(Dw(n.prototype), "remove", this).call(this);
            }
        }, {
            key: "dispose",
            value: function() {
                Iw(Dw(n.prototype), "dispose", this).call(this), this.remove(), this.xi && (this.xi.mapNode = void 0, 
                this.xi = void 0), this.Xf = !1, this.nb();
            }
        }, {
            key: "getRenderNode",
            value: function() {
                return this.xi;
            }
        } ]) && Pw(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }(), Object.assign(jg.prototype, {
        ROOT: "root",
        lc: function() {
            var t = this;
            if (!this.Xf) {
                var e = this.Zi(vx);
                if (!e) return !1;
                this.Xf = !0;
                var n, r, i, o = (i = this.Oh.split("."))[i.length - 1].toLocaleLowerCase();
                if ((i = (this.fileExtension = o, {
                    gltf: {},
                    glb: {},
                    fbx: null == (i = jt.a.window.fengmap) ? void 0 : i.FBXLoader
                }))[o]) return i = ("glb" === o || "gltf" === o ? (n = e.ui.jp).Ma : (n = new i[o]()).load).bind(n), 
                (r = {
                    glb: function(t) {
                        return t.scene;
                    },
                    fbx: function(t) {
                        return t;
                    }
                }).gltf = r.glb, i(this.Oh, function(n) {
                    if (t.Xf) {
                        if (t.xi = r[o](n), t.xi.visible = t.Yi, t.Yd && (t.xi.rotation.y = t.Yd % 360 * Dt.DEG2RAD), 
                        t.Qy && (t.xi.rotation.x = t.Qy % 360 * Dt.DEG2RAD), t.Co(), (t.xi.mapNode = t).Bt.xo.add(t.xi), 
                        0 < n.animations.length) {
                            t.Ah = new rm(t.xi);
                            var i, a = function(t, e) {
                                var n, r, i, o, a = "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"];
                                if (a) return r = !(n = !0), {
                                    s: function() {
                                        a = a.call(t);
                                    },
                                    n: function() {
                                        var t = a.next();
                                        return n = t.done, t;
                                    },
                                    e: function(t) {
                                        r = !0, i = t;
                                    },
                                    f: function() {
                                        try {
                                            n || null == a.return || a.return();
                                        } finally {
                                            if (r) throw i;
                                        }
                                    }
                                };
                                if (Array.isArray(t) || (a = function(t, e) {
                                    var n;
                                    if (t) return "string" == typeof t ? Aw(t, e) : "Map" === (n = "Object" === (n = Object.prototype.toString.call(t).slice(8, -1)) && t.constructor ? t.constructor.name : n) || "Set" === n ? Array.from(t) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? Aw(t, e) : void 0;
                                }(t)) || e && t && "number" == typeof t.length) return a && (t = a), o = 0, {
                                    s: e = function() {},
                                    n: function() {
                                        return o >= t.length ? {
                                            done: !0
                                        } : {
                                            done: !1,
                                            value: t[o++]
                                        };
                                    },
                                    e: function(t) {
                                        throw t;
                                    },
                                    f: e
                                };
                                throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
                            }(n.animations);
                            try {
                                for (a.s(); !(i = a.n()).done; ) {
                                    var s = i.value;
                                    t.ml[s.name] = t.Ah.clipAction(s);
                                }
                            } catch (n) {
                                a.e(n);
                            } finally {
                                a.f();
                            }
                            e.Oi.Fd(t.Ah);
                        }
                        t.Lh(), t.Lv(), t.bd && t.bh({
                            src: [ 0 ],
                            dest: [ 1 ],
                            duration: 1
                        }), e.enableUpdateRender(), t.Kt && t.Kt(t);
                    }
                }, null, function(t) {
                    console.error(t);
                }), !0;
                console.error(" ".concat(o));
            }
        },
        bh: function(t) {
            var e, n = this, r = this.Zi(vx);
            r && (e = new ne({
                src: t.src || [ 0 ],
                dest: t.dest || [ 1 ]
            }), this.Ie.set("faceIn", e), e.rn(t.duration || 1).an(function(t) {
                var e = t.destination[0];
                n.xi.traverse(function(t) {
                    var i;
                    "Mesh" === t.type && ("glb" === n.fileExtension || "gltf" === n.fileExtension ? (t.material.transparent = !0, 
                    i = t.material.userData.sourceOpacity, r.getMapOptions().materialMode === In.REAL ? t.material.uniforms.opacity.value = i * e : t.material.opacity = i * e, 
                    r.enableUpdateRender()) : Array.isArray(t.material) ? (t.material.forEach(function(t) {
                        var n = t.userData.sourceOpacity;
                        t.transparent = !0, t.opacity = n * e;
                    }), r.enableUpdateRender()) : (i = t.material.userData.sourceOpacity, t.material.transparent = !0, 
                    t.material.opacity = i * e));
                });
            }).un(function() {
                t.callback && t.callback(), r.Oi.Ai(e), r.enableUpdateNode();
            }).$t(), r.Oi.Si(e));
        },
        Co: function() {
            if (this.xi) {
                var t = this.Zi(vx);
                if (!t) return !1;
                var e = null != (e = this.xi) && null != (e = e.userData) && e.sourceScale ? null == (e = this.xi) || null == (e = e.userData) ? void 0 : e.sourceScale : new nd(1, 1, 1);
                this.xi.scale.copy(e).multiplyScalar(this.Ky), t.enableUpdateRender();
            }
        },
        eb: function(t) {
            void 0 === t.userData.sourceOpacity && (t.userData.sourceOpacity = t.opacity), void 0 === t.userData.sourceTransparent && (t.userData.sourceTransparent = t.transparent);
        },
        ib: function(t, e) {
            return {
                opacity: e = null !== this.ht ? this.ht * e.ht : void 0 !== t.userData.sourceOpacity ? t.userData.sourceOpacity * e.ht : t.opacity * e.ht,
                transparent: t.userData.sourceTransparent || e < 1
            };
        },
        Lh: function() {
            var t, e, n, r = this;
            this.xi && (t = this.Zi(vx), e = this.Zi(Db), n = this.$y.get(this.ROOT), this.tb(this.xi, n, function(n, i) {
                var o = {
                    color: i
                }, a = r.Dr(n.material, e, o);
                if ("glb" === r.fileExtension || "gltf" === r.fileExtension) if (Array.isArray(n.material.length)) for (var s = 0; s < n.material.length; s++) n.material[s].depthWrite = !0, 
                n.material[s] = t.ui.Fr.Gr(n.material[s], a); else n.material.depthWrite = !0, n.material = t.ui.Fr.Gr(n.material, a); else if (Array.isArray(n.material)) for (var l = 0; l < n.material.length; l++) {
                    r.eb(n.material[l]), n.material[l].depthWrite = !0;
                    var u = (c = r.ib(n.material[l], e)).opacity, c = c.transparent;
                    n.material[l].color = new Xt(o.color || 16777215), n.material[l].opacity = u, n.material[l].transparent = c;
                } else {
                    r.eb(n.material), n.material.depthWrite = !0;
                    var h = (i = r.ib(n.material, e)).opacity;
                    i = i.transparent;
                    n.material.color = new Xt(o.color || 16777215), n.material.opacity = h, n.material.transparent = i;
                }
            }), t.enableUpdateRender());
        },
        tb: function(t, e, n) {
            var r = this.$y.get(t.name);
            if (r && (e = r), "Mesh" === t.type || "SkinnedMesh" === t.type) n(t, e); else for (var i = 0; i < t.children.length; i++) this.tb(t.children[i], e, n);
        },
        Dr: function(t, e, n) {
            var r;
            if ("glb" === this.fileExtension || "gltf" === this.fileExtension) return r = {}, 
            this.Zi(vx).ze.materialMode === In.REAL ? t.constructor === ec || "MeshPhongMaterial" === t.type || "MeshBasicMaterial" === t.type ? (t.userData.sourceOpacity = t.opacity, 
            t.userData.sourceTransparent = t.transparent, r = {
                alphaTest: t.alphaTest,
                color: t.color.getHex(),
                USE_EMISSIVEMAP: !!t.emissiveMap,
                USE_METALNESSMAP: !!t.metalnessMap,
                USE_NORMALMAP: !!t.normalMap,
                TANGENTSPACE_NORMALMAP: !!t.normalMap,
                USE_ROUGHNESSMAP: !!t.roughnessMap,
                USE_MAP: !!t.map,
                USE_AOMAP: !!t.aoMap,
                map: i(t.map, null),
                aoMap: i(t.aoMap, null),
                emissive: t.emissive.getHex(),
                emissiveMap: i(t.emissiveMap, null),
                metalness: i(t.metalness, 0),
                metalnessMap: i(t.metalnessMap, null),
                roughness: i(t.roughness, 1),
                roughnessMap: i(t.roughnessMap, null),
                normalScale: i(t.normalScale, new Mt(1, 1)),
                normalMap: i(t.normalMap, null),
                vertexColors: t.vertexColors,
                side: t.side,
                skinning: t.skinning
            }) : t.constructor === wu && (r = {
                alphaTest: t.alphaTest,
                USE_EMISSIVEMAP: t.defines.USE_EMISSIVEMAP,
                USE_MAP: t.defines.USE_MAP,
                USE_AOMAP: t.defines.USE_AOMAP,
                USE_METALNESSMAP: t.defines.USE_METALNESSMAP,
                USE_NORMALMAP: t.defines.USE_NORMALMAP,
                TANGENTSPACE_NORMALMAP: t.defines.TANGENTSPACE_NORMALMAP,
                USE_ROUGHNESSMAP: t.defines.USE_ROUGHNESSMAP,
                aoMap: i(t.uniforms.aoMap.value, null),
                map: i(t.uniforms.map.value, null),
                color: t.uniforms.diffuse.value.getHex(),
                emissive: t.uniforms.emissive.value.getHex(),
                emissiveMap: i(t.uniforms.emissiveMap.value, null),
                metalness: i(t.uniforms.metalness.value, 0),
                metalnessMap: i(t.uniforms.metalnessMap.value, null),
                roughness: i(t.uniforms.roughness.value, 1),
                roughnessMap: i(t.uniforms.roughnessMap.value, null),
                normalScale: i(t.uniforms.normalScale.value, new Mt(1, 1)),
                normalMap: i(t.uniforms.normalMap.value, null),
                vertexColors: t.vertexColors,
                side: t.side,
                skinning: t.skinning
            }) : (void 0 === t.userData.sourceOpacity && (t.userData.sourceOpacity = t.opacity), 
            void 0 === t.userData.sourceTransparent && (t.userData.sourceTransparent = t.transparent)), 
            n.color && (r.color = n.color), r.opacity = null !== this.ht ? this.ht * e.ht : void 0 !== t.userData.sourceOpacity ? t.userData.sourceOpacity * e.ht : t.opacity * e.ht, 
            r.transparent = t.userData.sourceTransparent || r.opacity < 1, r;
            function i(t, e) {
                return void 0 !== t ? t : e;
            }
        },
        md: function() {
            var t = this.Zi(vx);
            t && t.enableUpdateRender();
        },
        rb: function(t) {
            if (t._interpolant && (t._interpolant.length = 0), t.Ph) {
                for (var e = 0; e < t.Ph.length; e++) t.Ph[e].parameterPositions = null, t.Ph[e].resultBuffer = null, 
                t.Ph[e].sampleValues = null, t.Ph[e] = null;
                t.Ph = null;
            }
            if (t.Dh) {
                for (var n = 0; n < t.Dh.length; n++) t.Dh[n].binding = null, t.Dh[n].buffer = null, 
                t.Dh[n] = null;
                t.Dh = null;
            }
            if (t.Rh && t.Rh.tracks && t.Rh.tracks) {
                for (var r = 0; r < t.Rh.tracks.length; r++) t.Rh.tracks[r].times = null, t.Rh.tracks[r].values = null, 
                t.Rh.tracks[r] = null;
                t.Rh.tracks = null, t.Rh = null;
            }
        },
        nb: function() {
            for (var t in this.ml) this.rb(this.ml[t]), this.ml[t] = null;
            if (this.ml = [], this.Ah) {
                for (var e = 0; e < this.Ah.Qc.length; e++) this.Ah.Qc[e].buffer = null;
                this.Ah.Qc = null, this.Ah.ul = null, this.Ah.ns = null, this.Ah.stats = null, this.Ah.fl = null, 
                this.Ah.ml = null, this.Ah = null;
            }
        }
    }), Jg = jg;
    var Cw = {
        Default: 1,
        Legacy: 2,
        Classic: 4,
        Custom: 8
    };
    function Nw(t) {
        return (Nw = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Fw(t, e, n) {
        return (e = Uw(e)) in t ? Object.defineProperty(t, e, {
            value: n,
            enumerable: !0,
            configurable: !0,
            writable: !0
        }) : t[e] = n, t;
    }
    function Bw(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, Uw(r.key), r);
        }
    }
    function Uw(t) {
        return t = function(t, e) {
            if ("object" != Nw(t) || !t) return t;
            var n = t[Symbol.toPrimitive];
            if (void 0 === n) return String(t);
            if ("object" != Nw(n = n.call(t, e))) return n;
            throw new TypeError("@@toPrimitive must return a primitive value.");
        }(t, "string"), "symbol" == Nw(t) ? t : String(t);
    }
    function zw(t) {
        return (zw = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Gw(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != zw(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != zw(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == zw(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function Hw(t) {
        return (Hw = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function Vw(t, e) {
        var n, r = Object.keys(t);
        return Object.getOwnPropertySymbols && (n = Object.getOwnPropertySymbols(t), e && (n = n.filter(function(e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
        })), r.push.apply(r, n)), r;
    }
    function Ww(t) {
        for (var e = 1; e < arguments.length; e++) {
            var n = null != arguments[e] ? arguments[e] : {};
            e % 2 ? Vw(Object(n), !0).forEach(function(e) {
                var r, i;
                r = t, i = n[e = e], (e = Zw(e)) in r ? Object.defineProperty(r, e, {
                    value: i,
                    enumerable: !0,
                    configurable: !0,
                    writable: !0
                }) : r[e] = i;
            }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n)) : Vw(Object(n)).forEach(function(e) {
                Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(n, e));
            });
        }
        return t;
    }
    function Yw(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, Zw(r.key), r);
        }
    }
    function Xw(t, e, n) {
        return e && Yw(t.prototype, e), n && Yw(t, n), Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }
    function Zw(t) {
        return t = function(t, e) {
            if ("object" != Hw(t) || !t) return t;
            var n = t[Symbol.toPrimitive];
            if (void 0 === n) return String(t);
            if ("object" != Hw(n = n.call(t, e))) return n;
            throw new TypeError("@@toPrimitive must return a primitive value.");
        }(t, "string"), "symbol" == Hw(t) ? t : String(t);
    }
    function qw(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }
    rb = function() {
        function t(e, n) {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
            this.ob = e, this.sb = n, this.ab = Fw(Fw(Fw({}, Cw.Default, {
                FMExtentLayer: [ {
                    name: "DirectionalLight",
                    color: 11579568,
                    intensity: .95,
                    position: {
                        x: 58,
                        y: 65,
                        z: 40
                    },
                    id: 0
                }, {
                    name: "AmbientLight",
                    color: 11579568,
                    intensity: .85,
                    id: 1
                }, {
                    name: "DirectionalLight",
                    color: 6447714,
                    intensity: .65,
                    position: {
                        x: -100,
                        y: 0,
                        z: 45
                    },
                    id: 2
                } ],
                FMDynamicModelLayer: [ {
                    name: "DirectionalLight",
                    color: 11579568,
                    intensity: .95,
                    position: {
                        x: 58,
                        y: 65,
                        z: 45
                    },
                    id: 0
                }, {
                    name: "AmbientLight",
                    color: 11579568,
                    intensity: .85,
                    id: 1
                }, {
                    name: "DirectionalLight",
                    color: 6447714,
                    position: {
                        x: -100,
                        y: 0,
                        z: 45
                    },
                    intensity: .45,
                    id: 2
                } ],
                FMModelLayer: [ {
                    name: "DirectionalLight",
                    color: 11645361,
                    intensity: .95,
                    position: {
                        x: 58,
                        y: 65,
                        z: 40
                    },
                    id: 0
                }, {
                    name: "AmbientLight",
                    color: 11645361,
                    intensity: .85,
                    id: 1
                }, {
                    name: "DirectionalLight",
                    color: 6513507,
                    position: {
                        x: -100,
                        y: 0,
                        z: 45
                    },
                    intensity: .65,
                    id: 2
                } ],
                FMExternalModelLayer: [ {
                    name: "DirectionalLight",
                    color: 11579568,
                    intensity: .95,
                    position: {
                        x: 58,
                        y: 65,
                        z: 45
                    },
                    id: 0
                }, {
                    name: "AmbientLight",
                    color: 11579568,
                    intensity: .85,
                    id: 1
                }, {
                    name: "DirectionalLight",
                    color: 6447714,
                    position: {
                        x: -100,
                        y: 0,
                        z: 45
                    },
                    intensity: .45,
                    id: 2
                } ]
            }), Cw.Legacy, {
                FMExtentLayer: [ {
                    name: "DirectionalLight",
                    color: 8947848,
                    intensity: 1.2,
                    position: {
                        x: -1,
                        y: 1,
                        z: 1
                    },
                    id: 0
                }, {
                    name: "AmbientLight",
                    color: 7631988,
                    intensity: 1,
                    id: 1
                }, {
                    name: "DirectionalLight",
                    color: 3355443,
                    intensity: 1,
                    position: {
                        x: -.5,
                        y: 1,
                        z: -1
                    },
                    id: 2
                } ],
                FMExternalModelLayer: [ {
                    name: "DirectionalLight",
                    color: 8947848,
                    intensity: 1.2,
                    position: {
                        x: -1,
                        y: 1,
                        z: 1
                    },
                    id: 0
                }, {
                    name: "AmbientLight",
                    color: 16777215,
                    intensity: .46,
                    id: 1
                }, {
                    name: "DirectionalLight",
                    color: 3355443,
                    position: {
                        x: -.5,
                        y: 1,
                        z: -1
                    },
                    intensity: 1,
                    id: 2
                } ],
                FMModelLayer: [ {
                    name: "DirectionalLight",
                    color: 8947848,
                    intensity: 1.2,
                    position: {
                        x: -1,
                        y: 1,
                        z: 1
                    },
                    id: 0
                }, {
                    name: "AmbientLight",
                    color: 7631988,
                    intensity: 1,
                    id: 1
                }, {
                    name: "DirectionalLight",
                    color: 3355443,
                    position: {
                        x: -.5,
                        y: 1,
                        z: -1
                    },
                    intensity: 1,
                    id: 2
                } ],
                FMDynamicModelLayer: [ {
                    name: "DirectionalLight",
                    color: 8947848,
                    intensity: 1.2,
                    position: {
                        x: -1,
                        y: 1,
                        z: 1
                    },
                    id: 0
                }, {
                    name: "AmbientLight",
                    color: 7631988,
                    intensity: 1,
                    id: 1
                }, {
                    name: "DirectionalLight",
                    color: 3355443,
                    position: {
                        x: -.5,
                        y: 1,
                        z: -1
                    },
                    intensity: 1,
                    id: 2
                } ]
            }), Cw.Classic, {
                FMExtentLayer: [ {
                    name: "DirectionalLight",
                    color: 8947848,
                    intensity: 1.2,
                    position: {
                        x: -1,
                        y: 1,
                        z: 1
                    },
                    id: 0
                }, {
                    name: "AmbientLight",
                    color: 7631988,
                    intensity: 1,
                    id: 1
                }, {
                    name: "DirectionalLight",
                    color: 3355443,
                    intensity: 1,
                    position: {
                        x: -.5,
                        y: 1,
                        z: -1
                    },
                    id: 2
                } ],
                FMExternalModelLayer: [ {
                    name: "DirectionalLight",
                    color: 8947848,
                    intensity: 1.2,
                    position: {
                        x: -1,
                        y: 1,
                        z: 1
                    },
                    id: 0
                }, {
                    name: "AmbientLight",
                    color: 16777215,
                    intensity: .46,
                    id: 1
                }, {
                    name: "DirectionalLight",
                    color: 3355443,
                    position: {
                        x: -.5,
                        y: 1,
                        z: -1
                    },
                    intensity: 1,
                    id: 2
                } ],
                FMModelLayer: [ {
                    name: "DirectionalLight",
                    color: 8947848,
                    intensity: 1.2,
                    position: {
                        x: -1,
                        y: 1,
                        z: 1
                    },
                    id: 0
                }, {
                    name: "AmbientLight",
                    color: 7631988,
                    intensity: 1,
                    id: 1
                }, {
                    name: "DirectionalLight",
                    color: 3355443,
                    position: {
                        x: -.5,
                        y: 1,
                        z: -1
                    },
                    intensity: 1,
                    id: 2
                } ],
                FMDynamicModelLayer: [ {
                    name: "DirectionalLight",
                    color: 8947848,
                    intensity: .9,
                    position: {
                        x: -1,
                        y: 1,
                        z: 1
                    },
                    id: 0
                }, {
                    name: "AmbientLight",
                    color: 16777215,
                    intensity: .33,
                    id: 1
                }, {
                    name: "DirectionalLight",
                    color: 3355443,
                    position: {
                        x: -.5,
                        y: 1,
                        z: -1
                    },
                    intensity: 1,
                    id: 2
                } ]
            });
        }
        var e, n;
        return e = t, (n = [ {
            key: "getConfig",
            value: function() {
                return this.ob == Cw.Custom ? this.sb : this.ab[this.ob];
            }
        } ]) && Bw(e.prototype, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }(), It = function() {
        function t(e) {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
            this.ub = e.origon, this.sh = e.target, this.cb = null, this.fb = null, this.hb = null, 
            this.lb = null, this.vb = null, this.pb = null, this.mb = null, this.yb = null, 
            this.lc();
        }
        var e, n;
        return e = t, (n = [ {
            key: "transform",
            value: function(t) {
                var e = t.x - this.cb.x, n = (t = t.y - this.cb.y, this.fb.x * e + this.fb.y * t);
                e = this.hb.x * e + this.hb.y * t, t = n / this.lb.x, n = e / this.lb.y, e = t * this.yb.x, 
                t = n * this.yb.y;
                return {
                    x: this.vb.x + this.pb.x * e + this.mb.x * t,
                    y: this.vb.y + this.pb.y * e + this.mb.y * t
                };
            }
        } ]) && Gw(e.prototype, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }(), Object.assign(It.prototype, {
        lc: function() {
            !Array.isArray(this.ub) || !Array.isArray(this.sh) || this.ub.length < 3 || this.sh.length < 3 || (this.cb = this.ub[0], 
            this.fb = {
                x: this.ub[1].x - this.ub[0].x,
                y: this.ub[1].y - this.ub[0].y
            }, this.hb = {
                x: this.ub[2].x - this.ub[0].x,
                y: this.ub[2].y - this.ub[0].y
            }, this.lb = {
                x: Ve.ee(this.fb),
                y: Ve.ee(this.hb)
            }, this.vb = this.sh[0], this.pb = {
                x: this.sh[1].x - this.sh[0].x,
                y: this.sh[1].y - this.sh[0].y
            }, this.mb = {
                x: this.sh[2].x - this.sh[0].x,
                y: this.sh[2].y - this.sh[0].y
            }, this.yb = {
                x: Ve.ee(this.pb),
                y: Ve.ee(this.mb)
            }, this.fb.x /= this.lb.x, this.fb.y /= this.lb.x, this.hb.x /= this.lb.y, this.hb.y /= this.lb.y, 
            this.pb.x /= this.yb.x, this.pb.y /= this.yb.x, this.mb.x /= this.yb.y, this.mb.y /= this.yb.y);
        }
    }), oh = It;
    var Kw = new WeakMap(), Jw = Xw(function t(e) {
        qw(this, t), this.identifier = e.identifier, this.force = void 0 === e.force ? 1 : e.force, 
        this.pageX = e.pageX || e.x, this.pageY = e.pageY || e.y, this.clientX = e.clientX || e.x, 
        this.clientY = e.clientY || e.y, this.screenX = this.pageX, this.screenY = this.pageY;
    }), Qw = function() {
        function t() {
            qw(this, t), Kw.set(this, {});
        }
        return Xw(t, [ {
            key: "addEventListener",
            value: function(t, e) {
                var n = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : {}, r = Kw.get(this);
                r || Kw.set(this, r = {}), r[t] || (r[t] = []), r[t].push(e), n.capture, n.once, 
                n.passive;
            }
        }, {
            key: "removeEventListener",
            value: function(t, e) {
                var n = Kw.get(this);
                if (n) {
                    var r = n[t];
                    if (r && 0 < r.length) for (var i = r.length; i--; ) if (r[i] === e) {
                        r.splice(i, 1);
                        break;
                    }
                }
            }
        }, {
            key: "dispatchEvent",
            value: function() {
                var t = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}, e = ("function" != typeof t.preventDefault && (t.preventDefault = function() {}), 
                "function" != typeof t.stopPropagation && (t.stopPropagation = function() {}), Kw.get(this)[t.type]);
                if (e) for (var n = 0; n < e.length; n++) e[n](t);
            }
        }, {
            key: "dispatchTouchEvent",
            value: function() {
                var t = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}, e = Ww({}, this);
                e = {
                    changedTouches: t.changedTouches.map(function(t) {
                        return new Jw(t);
                    }),
                    touches: t.touches.map(function(t) {
                        return new Jw(t);
                    }),
                    targetTouches: Array.prototype.slice.call(t.touches.map(function(t) {
                        return new Jw(t);
                    })),
                    timeStamp: t.timeStamp,
                    target: e,
                    currentTarget: e,
                    type: t.type,
                    cancelBubble: !1,
                    cancelable: !1
                };
                this.dispatchEvent(e);
            }
        } ]), t;
    }(), $w = (rh = n(34), 0), tS = (ih = wx.getSystemInfoSync(), {
        AudioContext: function() {},
        URL: {},
        atob: rh.atob,
        devicePixelRatio: ih.pixelRatio,
        requestAnimationFrame: function(t) {
            var e = new Date().getTime(), n = Math.max(0, 16 - (e - $w)), r = setTimeout(function() {
                t(e + n);
            }, n);
            return $w = e + n, r;
        },
        cancelAnimationFrame: function(t) {
            clearTimeout(t);
        },
        screenWidth: ih.screenWidth,
        screenHeight: ih.screenHeight,
        systemInfo: ih
    });
    function eS(t) {
        Object.defineProperty(t, "style", {
            configurable: !0,
            get: function() {
                return {
                    width: t.width + "px",
                    height: t.height + "px"
                };
            }
        }), Object.defineProperty(t, "clientHeight", {
            configurable: !0,
            get: function() {
                return t.height / tS.devicePixelRatio;
            }
        }), Object.defineProperty(t, "clientWidth", {
            configurable: !0,
            get: function() {
                return t.width / tS.devicePixelRatio;
            }
        }), Object.defineProperty(t, "parentElement", {
            configurable: !0,
            get: function() {
                return t;
            }
        });
        var e = new Qw();
        Object.defineProperties(t, {
            addEventListener: {
                value: e.addEventListener.bind(e)
            },
            removeEventListener: {
                value: e.removeEventListener.bind(e)
            },
            dispatchEvent: {
                value: e.dispatchEvent.bind(e)
            },
            dispatchTouchEvent: {
                value: e.dispatchTouchEvent.bind(e)
            }
        }), t.getBoundingClientRect = function() {
            return {
                left: 0,
                top: 0,
                right: 0,
                bottom: 0,
                width: t.clientWidth,
                height: t.clientHeight
            };
        };
    }
    function nS(t) {
        return (nS = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function rS(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != nS(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != nS(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == nS(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function iS(t, e, n) {
        e = oS(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], oS(t).constructor) : e.apply(t, n)) && ("object" === nS(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        return aS(r);
    }
    function oS(t) {
        return (oS = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function aS(t) {
        if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return t;
    }
    function sS(t, e) {
        return (sS = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    var lS = new WeakMap(), uS = new WeakMap();
    function cS(t) {
        var e = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {};
        e.target = e.target || this, "function" == typeof this["on".concat(t)] && this["on".concat(t)].call(this, e);
    }
    function hS(t) {
        var e = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {};
        this.readyState = t, e.readyState = t, cS.call(this, "readystatechange", e);
    }
    function fS(t) {
        return (fS = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function pS(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != fS(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != fS(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == fS(t) ? t : String(t);
            }(r.key), r);
        }
    }
    (oy = function() {
        var t = n, e = Qw;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n() {
            var t;
            if (this instanceof n) return (t = iS(this, n)).onabort = null, t.onerror = null, 
            t.onload = null, t.onloadstart = null, t.onprogress = null, t.ontimeout = null, 
            t.onloadend = null, t.onreadystatechange = null, t.readyState = 0, t.response = null, 
            t.responseText = null, t.responseType = "text", t.dataType = "string", t.responseXML = null, 
            t.status = 0, t.statusText = "", t.upload = {}, t.withCredentials = !1, lS.set(aS(t), {
                "content-type": "application/x-www-form-urlencoded"
            }), uS.set(aS(t), {}), t;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && sS(t, e), t = n, (e = [ {
            key: "abort",
            value: function() {
                var t;
                this.isAbort = !0, null != (t = this.request) && t.abort();
            }
        }, {
            key: "getAllResponseHeaders",
            value: function() {
                var t = uS.get(this);
                return Object.keys(t).map(function(e) {
                    return "".concat(e, ": ").concat(t[e]);
                }).join("\n");
            }
        }, {
            key: "getResponseHeader",
            value: function(t) {
                return uS.get(this)[t];
            }
        }, {
            key: "open",
            value: function(t, e) {
                this.bb = t, this.Oh = e, hS.call(this, n.OPENED);
            }
        }, {
            key: "overrideMimeType",
            value: function() {}
        }, {
            key: "send",
            value: function() {
                var t = this, e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : "";
                if (this.readyState !== n.OPENED) throw new Error("Failed to execute 'send' on 'XMLHttpRequest': The object's state must be OPENED.");
                function r(e) {
                    var r = e.data, i = e.statusCode;
                    e = e.header;
                    if (!0 !== t.isAbort) {
                        if (t.status = void 0 === i ? 200 : i, e && uS.set(t, e), cS.call(t, "loadstart"), 
                        hS.call(t, n.HEADERS_RECEIVED), hS.call(t, n.LOADING), "json" == t.responseType) try {
                            t.response = JSON.parse(r);
                        } catch (e) {
                            t.response = r;
                        } else t.response = r;
                        hS.call(t, n.DONE), cS.call(t, "load"), cS.call(t, "loadend");
                    }
                }
                function i(e) {
                    e = e.errMsg, !0 !== t.isAbort && (-1 !== e.indexOf("abort") ? cS.call(t, "abort") : cS.call(t, "error", {
                        message: e
                    }), cS.call(t, "loadend"), f) && console.warn(e);
                }
                var o, a, s, l = this.Oh, u = lS.get(this), c = this.responseType.toLocaleLowerCase(), h = ("arraybuffer" !== c && (c = "text"), 
                this.dataType), f = !/^(http|https|ftp|wxfile):\/\/.*/i.test(l);
                "arraybuffer" !== c && (o = "utf8"), delete this.response, this.response = null, 
                f ? (a = wx.getFileSystemManager(), s = {
                    filePath: l,
                    success: r,
                    fail: i
                }, o && (s.encoding = o), a.readFile(s)) : this.request = wx.request({
                    data: e,
                    url: l,
                    method: this.bb,
                    header: u,
                    dataType: h,
                    responseType: c,
                    success: r,
                    fail: i
                });
            }
        }, {
            key: "setRequestHeader",
            value: function(t, e) {
                var n = lS.get(this);
                n[t] = e, lS.set(this, n);
            }
        }, {
            key: "addEventListener",
            value: function(t, e) {
                var n = this;
                "function" == typeof e && (this["on" + t] = function() {
                    var t = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {};
                    t.target = t.target || n, e.call(n, t);
                });
            }
        }, {
            key: "removeEventListener",
            value: function(t, e) {
                this["on" + t] === e && (this["on" + t] = null);
            }
        } ]) && rS(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }()).UNSEND = 0, oy.OPENED = 1, oy.HEADERS_RECEIVED = 2, oy.LOADING = 3, oy.DONE = 4;
    var dS = function() {
        function t(e, n, r) {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
            this.map = r, this.canvas = e, this.canvas.name = "canvas", this.tempCanvas = n, 
            this.tempCanvas.name = "tempCanvas";
        }
        var e, n;
        return e = t, (n = [ {
            key: "createImage",
            value: function() {
                var t, e = this, n = (t = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}).url, r = t.onload, i = void 0 !== (i = t.needDraw) && i, o = t.onerror;
                if ((t = i ? this.tempCanvas : this.canvas) && !kb.isDestory) {
                    var a = t.createImage();
                    if ("data:," === n) r && r(a); else {
                        if (r) {
                            if (null != this && null != (t = this.map) && t.requestDispose) return;
                            if (a.crossOrigin = "Anonymous", a.onload = function() {
                                e.map.requestDispose || r && r(a);
                            }, a.onerror = function(t) {
                                var n;
                                null != e && null != (n = e.map) && n.requestDispose || o && o(t);
                            }, null != this && null != (t = this.map) && t.requestDispose) return;
                            a.src = n;
                        }
                        a.needDraw = i;
                    }
                    return a;
                }
            }
        }, {
            key: "drawImage",
            value: function(t) {
                var e = this.tempCanvas, n = e.getContext("2d"), r = t.width, i = t.height;
                return e.width = r, e.height = i, e.style.width = r + "px", e.style.height = i + "px", 
                n.drawImage(t, 0, 0), e;
            }
        } ]) && pS(e.prototype, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }();
    function yS(t) {
        return (yS = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function mS(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != yS(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != yS(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == yS(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function vS(t, e, n) {
        e = gS(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], gS(t).constructor) : e.apply(t, n)) && ("object" === yS(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        if (void 0 !== (t = r)) return t;
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }
    function gS(t) {
        return (gS = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function bS(t, e) {
        return (bS = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    var xS = function() {
        var t = n, e = Qw;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t, e) {
            var r;
            if (this instanceof n) return (r = vS(this, n)).canvas = t, r.tempCanvas = e, r.body = r.canvas, 
            r;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && bS(t, e), t = n, (e = [ {
            key: "createElement",
            value: function(t) {
                var e, n;
                return "canvas" === (t = t.toLowerCase()) ? this.tempCanvas : "img" === t ? (e = this.canvas.createImage(), 
                n = new Qw(), Object.defineProperties(e, {
                    addEventListener: {
                        value: n.addEventListener.bind(n)
                    },
                    removeEventListener: {
                        value: n.removeEventListener.bind(n)
                    },
                    dispatchEvent: {
                        value: n.dispatchEvent.bind(n)
                    },
                    dispatchTouchEvent: {
                        value: n.dispatchTouchEvent.bind(n)
                    }
                }), e.onload = function() {
                    console.error("createElement, img.onload", e.url), e.dispatchEvent({
                        type: "load"
                    });
                }, e) : void console.error("createElement ".concat(t, " failed."));
            }
        }, {
            key: "createElementNS",
            value: function(t, e) {
                return "canvas" === (e = e.toLowerCase()) ? this.tempCanvas : "img" === e ? this.canvas.createImage() : void console.error("createElementNS ".concat(e, " failed."));
            }
        } ]) && mS(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }(), wS = n(2);
    function SS(t) {
        return (SS = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    var _S = wS.Reader, ES = wS.Writer, OS = wS.util, MS = wS.roots.default || (wS.roots.default = {});
    function TS(t) {
        if (this.buffers = [], this.keys = [], t) for (var e = Object.keys(t), n = 0; n < e.length; ++n) null != t[e[n]] && (this[e[n]] = t[e[n]]);
    }
    function LS(t) {
        if (t) for (var e = Object.keys(t), n = 0; n < e.length; ++n) null != t[e[n]] && (this[e[n]] = t[e[n]]);
    }
    function AS(t) {
        if (this.layerGroups = [], this.buildings = [], t) for (var e = Object.keys(t), n = 0; n < e.length; ++n) null != t[e[n]] && (this[e[n]] = t[e[n]]);
    }
    function PS(t) {
        if (t) for (var e = Object.keys(t), n = 0; n < e.length; ++n) null != t[e[n]] && (this[e[n]] = t[e[n]]);
    }
    function RS(t) {
        if (this.layers = [], t) for (var e = Object.keys(t), n = 0; n < e.length; ++n) null != t[e[n]] && (this[e[n]] = t[e[n]]);
    }
    function jS(t) {
        if (this.fids = [], this.idxs = [], this.pts = [], t) for (var e = Object.keys(t), n = 0; n < e.length; ++n) null != t[e[n]] && (this[e[n]] = t[e[n]]);
    }
    function IS(t) {
        if (this.idxs = [], t) for (var e = Object.keys(t), n = 0; n < e.length; ++n) null != t[e[n]] && (this[e[n]] = t[e[n]]);
    }
    function DS(t) {
        if (this.floors = [], t) for (var e = Object.keys(t), n = 0; n < e.length; ++n) null != t[e[n]] && (this[e[n]] = t[e[n]]);
    }
    function kS(t) {
        if (this.floors = [], t) for (var e = Object.keys(t), n = 0; n < e.length; ++n) null != t[e[n]] && (this[e[n]] = t[e[n]]);
    }
    function CS(t) {
        if (this.navi = [], this.drive = [], this.accessible = [], t) for (var e = Object.keys(t), n = 0; n < e.length; ++n) null != t[e[n]] && (this[e[n]] = t[e[n]]);
    }
    function NS(t) {
        if (this.idxs = [], this.pts = [], this.toBid = [], this.toGid = [], t) for (var e = Object.keys(t), n = 0; n < e.length; ++n) null != t[e[n]] && (this[e[n]] = t[e[n]]);
    }
    function FS(t) {
        if (this.idxs = [], t) for (var e = Object.keys(t), n = 0; n < e.length; ++n) null != t[e[n]] && (this[e[n]] = t[e[n]]);
    }
    function BS(t) {
        if (this.extentLayer = [], this.modelLayer = [], this.labelLayer = [], this.poiLayer = [], 
        this.polygonLayer = [], this.polygonLabelLayer = [], this.liftLayer = [], this.stairLayer = [], 
        this.escalatorLayer = [], this.externalModelLayer = [], t) for (var e = Object.keys(t), n = 0; n < e.length; ++n) null != t[e[n]] && (this[e[n]] = t[e[n]]);
    }
    function US(t) {
        if (this.idxs = [], this.pts = [], t) for (var e = Object.keys(t), n = 0; n < e.length; ++n) null != t[e[n]] && (this[e[n]] = t[e[n]]);
    }
    function zS(t) {
        if (this.idxs = [], t) for (var e = Object.keys(t), n = 0; n < e.length; ++n) null != t[e[n]] && (this[e[n]] = t[e[n]]);
    }
    function GS(t) {
        if (this.extentLayer = [], this.modelLayer = [], this.labelLayer = [], this.poiLayer = [], 
        this.polygonLayer = [], this.liftLayer = [], this.stairLayer = [], this.polygonLabelLayer = [], 
        this.externalModelLayer = [], t) for (var e = Object.keys(t), n = 0; n < e.length; ++n) null != t[e[n]] && (this[e[n]] = t[e[n]]);
    }
    function HS(t) {
        if (t) for (var e = Object.keys(t), n = 0; n < e.length; ++n) null != t[e[n]] && (this[e[n]] = t[e[n]]);
    }
    function VS(t) {
        if (t) for (var e = Object.keys(t), n = 0; n < e.length; ++n) null != t[e[n]] && (this[e[n]] = t[e[n]]);
    }
    function WS(t) {
        if (t) for (var e = Object.keys(t), n = 0; n < e.length; ++n) null != t[e[n]] && (this[e[n]] = t[e[n]]);
    }
    function YS(t) {
        if (t) for (var e = Object.keys(t), n = 0; n < e.length; ++n) null != t[e[n]] && (this[e[n]] = t[e[n]]);
    }
    function XS(t) {
        if (t) for (var e = Object.keys(t), n = 0; n < e.length; ++n) null != t[e[n]] && (this[e[n]] = t[e[n]]);
    }
    function ZS(t) {
        if (t) for (var e = Object.keys(t), n = 0; n < e.length; ++n) null != t[e[n]] && (this[e[n]] = t[e[n]]);
    }
    function qS(t) {
        if (t) for (var e = Object.keys(t), n = 0; n < e.length; ++n) null != t[e[n]] && (this[e[n]] = t[e[n]]);
    }
    function KS(t) {
        if (t) for (var e = Object.keys(t), n = 0; n < e.length; ++n) null != t[e[n]] && (this[e[n]] = t[e[n]]);
    }
    function JS(t) {
        if (t) for (var e = Object.keys(t), n = 0; n < e.length; ++n) null != t[e[n]] && (this[e[n]] = t[e[n]]);
    }
    function QS(t) {
        if (this.naviNodes = [], this.naviSegments = [], this.naviZones = [], this.naviModels = [], 
        this.nextFloors = [], this.naviExtents = [], t) for (var e = Object.keys(t), n = 0; n < e.length; ++n) null != t[e[n]] && (this[e[n]] = t[e[n]]);
    }
    function $S(t) {
        if (this.idxs = [], this.pts = [], t) for (var e = Object.keys(t), n = 0; n < e.length; ++n) null != t[e[n]] && (this[e[n]] = t[e[n]]);
    }
    function t_(t) {
        if (this.idxs = [], this.pts = [], t) for (var e = Object.keys(t), n = 0; n < e.length; ++n) null != t[e[n]] && (this[e[n]] = t[e[n]]);
    }
    function e_(t) {
        if (this.rejects = [], this.idxs = [], this.pts = [], t) for (var e = Object.keys(t), n = 0; n < e.length; ++n) null != t[e[n]] && (this[e[n]] = t[e[n]]);
    }
    function n_(t) {
        if (this.doorids = [], this.nodetypes = [], this.entrytypes = [], t) for (var e = Object.keys(t), n = 0; n < e.length; ++n) null != t[e[n]] && (this[e[n]] = t[e[n]]);
    }
    function r_(t) {
        if (this.pts = [], this.idxs = [], t) for (var e = Object.keys(t), n = 0; n < e.length; ++n) null != t[e[n]] && (this[e[n]] = t[e[n]]);
    }
    function i_(t) {
        if (this.idxs = [], t) for (var e = Object.keys(t), n = 0; n < e.length; ++n) null != t[e[n]] && (this[e[n]] = t[e[n]]);
    }
    function o_(t) {
        return (o_ = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function a_(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != o_(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != o_(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == o_(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function s_(t) {
        return (s_ = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function l_(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, f_(r.key), r);
        }
    }
    function u_(t, e, n) {
        e = y_(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], y_(t).constructor) : e.apply(t, n)) && ("object" === s_(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        return c_(r);
    }
    function c_(t) {
        if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return t;
    }
    function h_(t, e, n, r) {
        return (h_ = "undefined" != typeof Reflect && Reflect.set ? Reflect.set : function(t, e, n, r) {
            var i;
            if (t = d_(t, e)) {
                if ((i = Object.getOwnPropertyDescriptor(t, e)).set) return i.set.call(r, n), !0;
                if (!i.writable) return !1;
            }
            if (i = Object.getOwnPropertyDescriptor(r, e)) {
                if (!i.writable) return !1;
                i.value = n, Object.defineProperty(r, e, i);
            } else t = r, i = n, (r = f_(r = e)) in t ? Object.defineProperty(t, r, {
                value: i,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : t[r] = i;
            return !0;
        })(t, e, n, r);
    }
    function f_(t) {
        return t = function(t, e) {
            if ("object" != s_(t) || !t) return t;
            var n = t[Symbol.toPrimitive];
            if (void 0 === n) return String(t);
            if ("object" != s_(n = n.call(t, e))) return n;
            throw new TypeError("@@toPrimitive must return a primitive value.");
        }(t, "string"), "symbol" == s_(t) ? t : String(t);
    }
    function p_() {
        return (p_ = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function(t, e, n) {
            var r = d_(t, e);
            if (r) return (r = Object.getOwnPropertyDescriptor(r, e)).get ? r.get.call(arguments.length < 3 ? t : n) : r.value;
        }).apply(this, arguments);
    }
    function d_(t, e) {
        for (;!Object.prototype.hasOwnProperty.call(t, e) && null !== (t = y_(t)); ) ;
        return t;
    }
    function y_(t) {
        return (y_ = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function m_(t, e) {
        return (m_ = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    function v_(t) {
        return (v_ = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function g_(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != v_(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != v_(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == v_(t) ? t : String(t);
            }(r.key), r);
        }
    }
    MS.protobuf = ((gy = {}).Map = (TS.prototype.mid = "", TS.prototype.fileVer = 0, 
    TS.prototype.dateVer = OS.Long ? OS.Long.fromBits(0, 0, !0) : 0, TS.prototype.mname = "", 
    TS.prototype.hashCode = "", TS.prototype.key = "", TS.prototype.fileDate = "", TS.prototype.desc = "", 
    TS.prototype.readOnly = !1, TS.prototype.buffers = OS.emptyArray, TS.prototype.keys = OS.emptyArray, 
    TS.create = function(t) {
        return new TS(t);
    }, TS.encode = function(t, e) {
        if ((e = e || ES.create()).uint32(10).string(t.mid), e.uint32(16).int32(t.fileVer), 
        e.uint32(24).uint64(t.dateVer), e.uint32(34).string(t.mname), e.uint32(42).string(t.hashCode), 
        null != t.key && Object.hasOwnProperty.call(t, "key") && e.uint32(50).string(t.key), 
        null != t.fileDate && Object.hasOwnProperty.call(t, "fileDate") && e.uint32(58).string(t.fileDate), 
        null != t.desc && Object.hasOwnProperty.call(t, "desc") && e.uint32(66).string(t.desc), 
        null != t.readOnly && Object.hasOwnProperty.call(t, "readOnly") && e.uint32(72).bool(t.readOnly), 
        null != t.buffers && t.buffers.length) for (var n = 0; n < t.buffers.length; ++n) MS.protobuf.Map.Buffer.encode(t.buffers[n], e.uint32(82).fork()).ldelim();
        if (null != t.keys && t.keys.length) for (var r = 0; r < t.keys.length; ++r) e.uint32(90).string(t.keys[r]);
        return e;
    }, TS.encodeDelimited = function(t, e) {
        return this.encode(t, e).ldelim();
    }, TS.decode = function(t, e) {
        t instanceof _S || (t = _S.create(t));
        for (var n = void 0 === e ? t.len : t.pos + e, r = new MS.protobuf.Map(); t.pos < n; ) {
            var i = t.uint32();
            switch (i >>> 3) {
              case 1:
                r.mid = t.string();
                break;

              case 2:
                r.fileVer = t.int32();
                break;

              case 3:
                r.dateVer = t.uint64();
                break;

              case 4:
                r.mname = t.string();
                break;

              case 5:
                r.hashCode = t.string();
                break;

              case 6:
                r.key = t.string();
                break;

              case 7:
                r.fileDate = t.string();
                break;

              case 8:
                r.desc = t.string();
                break;

              case 9:
                r.readOnly = t.bool();
                break;

              case 10:
                r.buffers && r.buffers.length || (r.buffers = []), r.buffers.push(MS.protobuf.Map.Buffer.decode(t, t.uint32()));
                break;

              case 11:
                r.keys && r.keys.length || (r.keys = []), r.keys.push(t.string());
                break;

              default:
                t.skipType(7 & i);
            }
        }
        if (!r.hasOwnProperty("mid")) throw OS.ProtocolError("missing required 'mid'", {
            instance: r
        });
        if (!r.hasOwnProperty("fileVer")) throw OS.ProtocolError("missing required 'fileVer'", {
            instance: r
        });
        if (!r.hasOwnProperty("dateVer")) throw OS.ProtocolError("missing required 'dateVer'", {
            instance: r
        });
        if (!r.hasOwnProperty("mname")) throw OS.ProtocolError("missing required 'mname'", {
            instance: r
        });
        if (r.hasOwnProperty("hashCode")) return r;
        throw OS.ProtocolError("missing required 'hashCode'", {
            instance: r
        });
    }, TS.decodeDelimited = function(t) {
        return t instanceof _S || (t = new _S(t)), this.decode(t, t.uint32());
    }, TS.verify = function(t) {
        if ("object" !== SS(t) || null === t) return "object expected";
        if (!OS.isString(t.mid)) return "mid: string expected";
        if (!OS.isInteger(t.fileVer)) return "fileVer: integer expected";
        if (!(OS.isInteger(t.dateVer) || t.dateVer && OS.isInteger(t.dateVer.low) && OS.isInteger(t.dateVer.high))) return "dateVer: integer|Long expected";
        if (!OS.isString(t.mname)) return "mname: string expected";
        if (!OS.isString(t.hashCode)) return "hashCode: string expected";
        if (null != t.key && t.hasOwnProperty("key") && !OS.isString(t.key)) return "key: string expected";
        if (null != t.fileDate && t.hasOwnProperty("fileDate") && !OS.isString(t.fileDate)) return "fileDate: string expected";
        if (null != t.desc && t.hasOwnProperty("desc") && !OS.isString(t.desc)) return "desc: string expected";
        if (null != t.readOnly && t.hasOwnProperty("readOnly") && "boolean" != typeof t.readOnly) return "readOnly: boolean expected";
        if (null != t.buffers && t.hasOwnProperty("buffers")) {
            if (!Array.isArray(t.buffers)) return "buffers: array expected";
            for (var e = 0; e < t.buffers.length; ++e) {
                var n = MS.protobuf.Map.Buffer.verify(t.buffers[e]);
                if (n) return "buffers." + n;
            }
        }
        if (null != t.keys && t.hasOwnProperty("keys")) {
            if (!Array.isArray(t.keys)) return "keys: array expected";
            for (var r = 0; r < t.keys.length; ++r) if (!OS.isString(t.keys[r])) return "keys: string[] expected";
        }
        return null;
    }, TS.fromObject = function(t) {
        if (t instanceof MS.protobuf.Map) return t;
        var e = new MS.protobuf.Map();
        if (null != t.mid && (e.mid = String(t.mid)), null != t.fileVer && (e.fileVer = 0 | t.fileVer), 
        null != t.dateVer && (OS.Long ? (e.dateVer = OS.Long.fromValue(t.dateVer)).unsigned = !0 : "string" == typeof t.dateVer ? e.dateVer = parseInt(t.dateVer, 10) : "number" == typeof t.dateVer ? e.dateVer = t.dateVer : "object" === SS(t.dateVer) && (e.dateVer = new OS.LongBits(t.dateVer.low >>> 0, t.dateVer.high >>> 0).toNumber(!0))), 
        null != t.mname && (e.mname = String(t.mname)), null != t.hashCode && (e.hashCode = String(t.hashCode)), 
        null != t.key && (e.key = String(t.key)), null != t.fileDate && (e.fileDate = String(t.fileDate)), 
        null != t.desc && (e.desc = String(t.desc)), null != t.readOnly && (e.readOnly = Boolean(t.readOnly)), 
        t.buffers) {
            if (!Array.isArray(t.buffers)) throw TypeError(".protobuf.Map.buffers: array expected");
            e.buffers = [];
            for (var n = 0; n < t.buffers.length; ++n) {
                if ("object" !== SS(t.buffers[n])) throw TypeError(".protobuf.Map.buffers: object expected");
                e.buffers[n] = MS.protobuf.Map.Buffer.fromObject(t.buffers[n]);
            }
        }
        if (t.keys) {
            if (!Array.isArray(t.keys)) throw TypeError(".protobuf.Map.keys: array expected");
            e.keys = [];
            for (var r = 0; r < t.keys.length; ++r) e.keys[r] = String(t.keys[r]);
        }
        return e;
    }, TS.toObject = function(t, e) {
        var n, r = {};
        if (((e = e || {}).arrays || e.defaults) && (r.buffers = [], r.keys = []), e.defaults && (r.mid = "", 
        r.fileVer = 0, OS.Long ? (n = new OS.Long(0, 0, !0), r.dateVer = e.longs === String ? n.toString() : e.longs === Number ? n.toNumber() : n) : r.dateVer = e.longs === String ? "0" : 0, 
        r.mname = "", r.hashCode = "", r.key = "", r.fileDate = "", r.desc = "", r.readOnly = !1), 
        null != t.mid && t.hasOwnProperty("mid") && (r.mid = t.mid), null != t.fileVer && t.hasOwnProperty("fileVer") && (r.fileVer = t.fileVer), 
        null != t.dateVer && t.hasOwnProperty("dateVer") && ("number" == typeof t.dateVer ? r.dateVer = e.longs === String ? String(t.dateVer) : t.dateVer : r.dateVer = e.longs === String ? OS.Long.prototype.toString.call(t.dateVer) : e.longs === Number ? new OS.LongBits(t.dateVer.low >>> 0, t.dateVer.high >>> 0).toNumber(!0) : t.dateVer), 
        null != t.mname && t.hasOwnProperty("mname") && (r.mname = t.mname), null != t.hashCode && t.hasOwnProperty("hashCode") && (r.hashCode = t.hashCode), 
        null != t.key && t.hasOwnProperty("key") && (r.key = t.key), null != t.fileDate && t.hasOwnProperty("fileDate") && (r.fileDate = t.fileDate), 
        null != t.desc && t.hasOwnProperty("desc") && (r.desc = t.desc), null != t.readOnly && t.hasOwnProperty("readOnly") && (r.readOnly = t.readOnly), 
        t.buffers && t.buffers.length) {
            r.buffers = [];
            for (var i = 0; i < t.buffers.length; ++i) r.buffers[i] = MS.protobuf.Map.Buffer.toObject(t.buffers[i], e);
        }
        if (t.keys && t.keys.length) {
            r.keys = [];
            for (var o = 0; o < t.keys.length; ++o) r.keys[o] = t.keys[o];
        }
        return r;
    }, TS.prototype.toJSON = function() {
        return this.constructor.toObject(this, wS.util.toJSONOptions);
    }, TS.Buffer = (LS.prototype.gid = 0, LS.prototype.fileVer = 0, LS.prototype.btype = 0, 
    LS.prototype.len = OS.Long ? OS.Long.fromBits(0, 0, !0) : 0, LS.prototype.data = OS.newBuffer([]), 
    LS.create = function(t) {
        return new LS(t);
    }, LS.encode = function(t, e) {
        return (e = e || ES.create()).uint32(8).int32(t.gid), e.uint32(16).int32(t.fileVer), 
        e.uint32(24).int32(t.btype), e.uint32(32).uint64(t.len), e.uint32(42).bytes(t.data), 
        e;
    }, LS.encodeDelimited = function(t, e) {
        return this.encode(t, e).ldelim();
    }, LS.decode = function(t, e) {
        t instanceof _S || (t = _S.create(t));
        for (var n = void 0 === e ? t.len : t.pos + e, r = new MS.protobuf.Map.Buffer(); t.pos < n; ) {
            var i = t.uint32();
            switch (i >>> 3) {
              case 1:
                r.gid = t.int32();
                break;

              case 2:
                r.fileVer = t.int32();
                break;

              case 3:
                r.btype = t.int32();
                break;

              case 4:
                r.len = t.uint64();
                break;

              case 5:
                r.data = t.bytes();
                break;

              default:
                t.skipType(7 & i);
            }
        }
        if (!r.hasOwnProperty("gid")) throw OS.ProtocolError("missing required 'gid'", {
            instance: r
        });
        if (!r.hasOwnProperty("fileVer")) throw OS.ProtocolError("missing required 'fileVer'", {
            instance: r
        });
        if (!r.hasOwnProperty("btype")) throw OS.ProtocolError("missing required 'btype'", {
            instance: r
        });
        if (!r.hasOwnProperty("len")) throw OS.ProtocolError("missing required 'len'", {
            instance: r
        });
        if (r.hasOwnProperty("data")) return r;
        throw OS.ProtocolError("missing required 'data'", {
            instance: r
        });
    }, LS.decodeDelimited = function(t) {
        return t instanceof _S || (t = new _S(t)), this.decode(t, t.uint32());
    }, LS.verify = function(t) {
        return "object" !== SS(t) || null === t ? "object expected" : OS.isInteger(t.gid) ? OS.isInteger(t.fileVer) ? OS.isInteger(t.btype) ? OS.isInteger(t.len) || t.len && OS.isInteger(t.len.low) && OS.isInteger(t.len.high) ? t.data && "number" == typeof t.data.length || OS.isString(t.data) ? null : "data: buffer expected" : "len: integer|Long expected" : "btype: integer expected" : "fileVer: integer expected" : "gid: integer expected";
    }, LS.fromObject = function(t) {
        var e;
        return t instanceof MS.protobuf.Map.Buffer ? t : (e = new MS.protobuf.Map.Buffer(), 
        null != t.gid && (e.gid = 0 | t.gid), null != t.fileVer && (e.fileVer = 0 | t.fileVer), 
        null != t.btype && (e.btype = 0 | t.btype), null != t.len && (OS.Long ? (e.len = OS.Long.fromValue(t.len)).unsigned = !0 : "string" == typeof t.len ? e.len = parseInt(t.len, 10) : "number" == typeof t.len ? e.len = t.len : "object" === SS(t.len) && (e.len = new OS.LongBits(t.len.low >>> 0, t.len.high >>> 0).toNumber(!0))), 
        null != t.data && ("string" == typeof t.data ? OS.base64.decode(t.data, e.data = OS.newBuffer(OS.base64.length(t.data)), 0) : t.data.length && (e.data = t.data)), 
        e);
    }, LS.toObject = function(t, e) {
        var n, r = {};
        return (e = e || {}).defaults && (r.gid = 0, r.fileVer = 0, r.btype = 0, OS.Long ? (n = new OS.Long(0, 0, !0), 
        r.len = e.longs === String ? n.toString() : e.longs === Number ? n.toNumber() : n) : r.len = e.longs === String ? "0" : 0, 
        e.bytes === String ? r.data = "" : (r.data = [], e.bytes !== Array && (r.data = OS.newBuffer(r.data)))), 
        null != t.gid && t.hasOwnProperty("gid") && (r.gid = t.gid), null != t.fileVer && t.hasOwnProperty("fileVer") && (r.fileVer = t.fileVer), 
        null != t.btype && t.hasOwnProperty("btype") && (r.btype = t.btype), null != t.len && t.hasOwnProperty("len") && ("number" == typeof t.len ? r.len = e.longs === String ? String(t.len) : t.len : r.len = e.longs === String ? OS.Long.prototype.toString.call(t.len) : e.longs === Number ? new OS.LongBits(t.len.low >>> 0, t.len.high >>> 0).toNumber(!0) : t.len), 
        null != t.data && t.hasOwnProperty("data") && (r.data = e.bytes === String ? OS.base64.encode(t.data, 0, t.data.length) : e.bytes === Array ? Array.prototype.slice.call(t.data) : t.data), 
        r;
    }, LS.prototype.toJSON = function() {
        return this.constructor.toObject(this, wS.util.toJSONOptions);
    }, LS), TS), gy.Scene = (AS.prototype.mid = "", AS.prototype.fileVer = 0, AS.prototype.dateVer = OS.Long ? OS.Long.fromBits(0, 0, !0) : 0, 
    AS.prototype.mname = "", AS.prototype.hashCode = "", AS.prototype.key = "", AS.prototype.desc = "", 
    AS.prototype.readOnly = !1, AS.prototype.x = 0, AS.prototype.y = 0, AS.prototype.z = 0, 
    AS.prototype.minX = 0, AS.prototype.minY = 0, AS.prototype.maxX = 0, AS.prototype.maxY = 0, 
    AS.prototype.defGid = "", AS.prototype.defCenX = 0, AS.prototype.defCenY = 0, AS.prototype.defCenZ = 0, 
    AS.prototype.height = 0, AS.prototype.rotateAngleX = 0, AS.prototype.rotateAngleY = 0, 
    AS.prototype.rotateAngleZ = 0, AS.prototype.scale = 0, AS.prototype.scaleLevel = "", 
    AS.prototype.naviType = 0, AS.prototype.layerGroups = OS.emptyArray, AS.prototype.buildings = OS.emptyArray, 
    AS.create = function(t) {
        return new AS(t);
    }, AS.encode = function(t, e) {
        if (e = e || ES.create(), null != t.x && Object.hasOwnProperty.call(t, "x") && e.uint32(13).float(t.x), 
        null != t.y && Object.hasOwnProperty.call(t, "y") && e.uint32(21).float(t.y), null != t.z && Object.hasOwnProperty.call(t, "z") && e.uint32(29).float(t.z), 
        null != t.minX && Object.hasOwnProperty.call(t, "minX") && e.uint32(37).float(t.minX), 
        null != t.minY && Object.hasOwnProperty.call(t, "minY") && e.uint32(45).float(t.minY), 
        null != t.maxX && Object.hasOwnProperty.call(t, "maxX") && e.uint32(53).float(t.maxX), 
        null != t.maxY && Object.hasOwnProperty.call(t, "maxY") && e.uint32(61).float(t.maxY), 
        null != t.defGid && Object.hasOwnProperty.call(t, "defGid") && e.uint32(66).string(t.defGid), 
        null != t.defCenX && Object.hasOwnProperty.call(t, "defCenX") && e.uint32(77).float(t.defCenX), 
        null != t.defCenY && Object.hasOwnProperty.call(t, "defCenY") && e.uint32(85).float(t.defCenY), 
        null != t.defCenZ && Object.hasOwnProperty.call(t, "defCenZ") && e.uint32(93).float(t.defCenZ), 
        null != t.height && Object.hasOwnProperty.call(t, "height") && e.uint32(101).float(t.height), 
        null != t.rotateAngleX && Object.hasOwnProperty.call(t, "rotateAngleX") && e.uint32(109).float(t.rotateAngleX), 
        null != t.rotateAngleY && Object.hasOwnProperty.call(t, "rotateAngleY") && e.uint32(117).float(t.rotateAngleY), 
        null != t.rotateAngleZ && Object.hasOwnProperty.call(t, "rotateAngleZ") && e.uint32(125).float(t.rotateAngleZ), 
        null != t.scale && Object.hasOwnProperty.call(t, "scale") && e.uint32(133).float(t.scale), 
        null != t.scaleLevel && Object.hasOwnProperty.call(t, "scaleLevel") && e.uint32(138).string(t.scaleLevel), 
        null != t.layerGroups && t.layerGroups.length) for (var n = 0; n < t.layerGroups.length; ++n) MS.protobuf.Scene.LayerGroup.encode(t.layerGroups[n], e.uint32(146).fork()).ldelim();
        if (e.uint32(154).string(t.mid), e.uint32(160).int32(t.fileVer), e.uint32(168).uint64(t.dateVer), 
        e.uint32(178).string(t.mname), e.uint32(186).string(t.hashCode), null != t.key && Object.hasOwnProperty.call(t, "key") && e.uint32(194).string(t.key), 
        null != t.desc && Object.hasOwnProperty.call(t, "desc") && e.uint32(202).string(t.desc), 
        null != t.readOnly && Object.hasOwnProperty.call(t, "readOnly") && e.uint32(208).bool(t.readOnly), 
        null != t.buildings && t.buildings.length) for (var r = 0; r < t.buildings.length; ++r) MS.protobuf.Scene.Building.encode(t.buildings[r], e.uint32(218).fork()).ldelim();
        return null != t.naviType && Object.hasOwnProperty.call(t, "naviType") && e.uint32(224).int32(t.naviType), 
        e;
    }, AS.encodeDelimited = function(t, e) {
        return this.encode(t, e).ldelim();
    }, AS.decode = function(t, e) {
        t instanceof _S || (t = _S.create(t));
        for (var n = void 0 === e ? t.len : t.pos + e, r = new MS.protobuf.Scene(); t.pos < n; ) {
            var i = t.uint32();
            switch (i >>> 3) {
              case 19:
                r.mid = t.string();
                break;

              case 20:
                r.fileVer = t.int32();
                break;

              case 21:
                r.dateVer = t.uint64();
                break;

              case 22:
                r.mname = t.string();
                break;

              case 23:
                r.hashCode = t.string();
                break;

              case 24:
                r.key = t.string();
                break;

              case 25:
                r.desc = t.string();
                break;

              case 26:
                r.readOnly = t.bool();
                break;

              case 1:
                r.x = t.float();
                break;

              case 2:
                r.y = t.float();
                break;

              case 3:
                r.z = t.float();
                break;

              case 4:
                r.minX = t.float();
                break;

              case 5:
                r.minY = t.float();
                break;

              case 6:
                r.maxX = t.float();
                break;

              case 7:
                r.maxY = t.float();
                break;

              case 8:
                r.defGid = t.string();
                break;

              case 9:
                r.defCenX = t.float();
                break;

              case 10:
                r.defCenY = t.float();
                break;

              case 11:
                r.defCenZ = t.float();
                break;

              case 12:
                r.height = t.float();
                break;

              case 13:
                r.rotateAngleX = t.float();
                break;

              case 14:
                r.rotateAngleY = t.float();
                break;

              case 15:
                r.rotateAngleZ = t.float();
                break;

              case 16:
                r.scale = t.float();
                break;

              case 17:
                r.scaleLevel = t.string();
                break;

              case 28:
                r.naviType = t.int32();
                break;

              case 18:
                r.layerGroups && r.layerGroups.length || (r.layerGroups = []), r.layerGroups.push(MS.protobuf.Scene.LayerGroup.decode(t, t.uint32()));
                break;

              case 27:
                r.buildings && r.buildings.length || (r.buildings = []), r.buildings.push(MS.protobuf.Scene.Building.decode(t, t.uint32()));
                break;

              default:
                t.skipType(7 & i);
            }
        }
        if (!r.hasOwnProperty("mid")) throw OS.ProtocolError("missing required 'mid'", {
            instance: r
        });
        if (!r.hasOwnProperty("fileVer")) throw OS.ProtocolError("missing required 'fileVer'", {
            instance: r
        });
        if (!r.hasOwnProperty("dateVer")) throw OS.ProtocolError("missing required 'dateVer'", {
            instance: r
        });
        if (!r.hasOwnProperty("mname")) throw OS.ProtocolError("missing required 'mname'", {
            instance: r
        });
        if (r.hasOwnProperty("hashCode")) return r;
        throw OS.ProtocolError("missing required 'hashCode'", {
            instance: r
        });
    }, AS.decodeDelimited = function(t) {
        return t instanceof _S || (t = new _S(t)), this.decode(t, t.uint32());
    }, AS.verify = function(t) {
        if ("object" !== SS(t) || null === t) return "object expected";
        if (!OS.isString(t.mid)) return "mid: string expected";
        if (!OS.isInteger(t.fileVer)) return "fileVer: integer expected";
        if (!(OS.isInteger(t.dateVer) || t.dateVer && OS.isInteger(t.dateVer.low) && OS.isInteger(t.dateVer.high))) return "dateVer: integer|Long expected";
        if (!OS.isString(t.mname)) return "mname: string expected";
        if (!OS.isString(t.hashCode)) return "hashCode: string expected";
        if (null != t.key && t.hasOwnProperty("key") && !OS.isString(t.key)) return "key: string expected";
        if (null != t.desc && t.hasOwnProperty("desc") && !OS.isString(t.desc)) return "desc: string expected";
        if (null != t.readOnly && t.hasOwnProperty("readOnly") && "boolean" != typeof t.readOnly) return "readOnly: boolean expected";
        if (null != t.x && t.hasOwnProperty("x") && "number" != typeof t.x) return "x: number expected";
        if (null != t.y && t.hasOwnProperty("y") && "number" != typeof t.y) return "y: number expected";
        if (null != t.z && t.hasOwnProperty("z") && "number" != typeof t.z) return "z: number expected";
        if (null != t.minX && t.hasOwnProperty("minX") && "number" != typeof t.minX) return "minX: number expected";
        if (null != t.minY && t.hasOwnProperty("minY") && "number" != typeof t.minY) return "minY: number expected";
        if (null != t.maxX && t.hasOwnProperty("maxX") && "number" != typeof t.maxX) return "maxX: number expected";
        if (null != t.maxY && t.hasOwnProperty("maxY") && "number" != typeof t.maxY) return "maxY: number expected";
        if (null != t.defGid && t.hasOwnProperty("defGid") && !OS.isString(t.defGid)) return "defGid: string expected";
        if (null != t.defCenX && t.hasOwnProperty("defCenX") && "number" != typeof t.defCenX) return "defCenX: number expected";
        if (null != t.defCenY && t.hasOwnProperty("defCenY") && "number" != typeof t.defCenY) return "defCenY: number expected";
        if (null != t.defCenZ && t.hasOwnProperty("defCenZ") && "number" != typeof t.defCenZ) return "defCenZ: number expected";
        if (null != t.height && t.hasOwnProperty("height") && "number" != typeof t.height) return "height: number expected";
        if (null != t.rotateAngleX && t.hasOwnProperty("rotateAngleX") && "number" != typeof t.rotateAngleX) return "rotateAngleX: number expected";
        if (null != t.rotateAngleY && t.hasOwnProperty("rotateAngleY") && "number" != typeof t.rotateAngleY) return "rotateAngleY: number expected";
        if (null != t.rotateAngleZ && t.hasOwnProperty("rotateAngleZ") && "number" != typeof t.rotateAngleZ) return "rotateAngleZ: number expected";
        if (null != t.scale && t.hasOwnProperty("scale") && "number" != typeof t.scale) return "scale: number expected";
        if (null != t.scaleLevel && t.hasOwnProperty("scaleLevel") && !OS.isString(t.scaleLevel)) return "scaleLevel: string expected";
        if (null != t.naviType && t.hasOwnProperty("naviType") && !OS.isInteger(t.naviType)) return "naviType: integer expected";
        if (null != t.layerGroups && t.hasOwnProperty("layerGroups")) {
            if (!Array.isArray(t.layerGroups)) return "layerGroups: array expected";
            for (var e = 0; e < t.layerGroups.length; ++e) {
                var n = MS.protobuf.Scene.LayerGroup.verify(t.layerGroups[e]);
                if (n) return "layerGroups." + n;
            }
        }
        if (null != t.buildings && t.hasOwnProperty("buildings")) {
            if (!Array.isArray(t.buildings)) return "buildings: array expected";
            for (var r = 0; r < t.buildings.length; ++r) {
                var i = MS.protobuf.Scene.Building.verify(t.buildings[r]);
                if (i) return "buildings." + i;
            }
        }
        return null;
    }, AS.fromObject = function(t) {
        if (t instanceof MS.protobuf.Scene) return t;
        var e = new MS.protobuf.Scene();
        if (null != t.mid && (e.mid = String(t.mid)), null != t.fileVer && (e.fileVer = 0 | t.fileVer), 
        null != t.dateVer && (OS.Long ? (e.dateVer = OS.Long.fromValue(t.dateVer)).unsigned = !0 : "string" == typeof t.dateVer ? e.dateVer = parseInt(t.dateVer, 10) : "number" == typeof t.dateVer ? e.dateVer = t.dateVer : "object" === SS(t.dateVer) && (e.dateVer = new OS.LongBits(t.dateVer.low >>> 0, t.dateVer.high >>> 0).toNumber(!0))), 
        null != t.mname && (e.mname = String(t.mname)), null != t.hashCode && (e.hashCode = String(t.hashCode)), 
        null != t.key && (e.key = String(t.key)), null != t.desc && (e.desc = String(t.desc)), 
        null != t.readOnly && (e.readOnly = Boolean(t.readOnly)), null != t.x && (e.x = Number(t.x)), 
        null != t.y && (e.y = Number(t.y)), null != t.z && (e.z = Number(t.z)), null != t.minX && (e.minX = Number(t.minX)), 
        null != t.minY && (e.minY = Number(t.minY)), null != t.maxX && (e.maxX = Number(t.maxX)), 
        null != t.maxY && (e.maxY = Number(t.maxY)), null != t.defGid && (e.defGid = String(t.defGid)), 
        null != t.defCenX && (e.defCenX = Number(t.defCenX)), null != t.defCenY && (e.defCenY = Number(t.defCenY)), 
        null != t.defCenZ && (e.defCenZ = Number(t.defCenZ)), null != t.height && (e.height = Number(t.height)), 
        null != t.rotateAngleX && (e.rotateAngleX = Number(t.rotateAngleX)), null != t.rotateAngleY && (e.rotateAngleY = Number(t.rotateAngleY)), 
        null != t.rotateAngleZ && (e.rotateAngleZ = Number(t.rotateAngleZ)), null != t.scale && (e.scale = Number(t.scale)), 
        null != t.scaleLevel && (e.scaleLevel = String(t.scaleLevel)), null != t.naviType && (e.naviType = 0 | t.naviType), 
        t.layerGroups) {
            if (!Array.isArray(t.layerGroups)) throw TypeError(".protobuf.Scene.layerGroups: array expected");
            e.layerGroups = [];
            for (var n = 0; n < t.layerGroups.length; ++n) {
                if ("object" !== SS(t.layerGroups[n])) throw TypeError(".protobuf.Scene.layerGroups: object expected");
                e.layerGroups[n] = MS.protobuf.Scene.LayerGroup.fromObject(t.layerGroups[n]);
            }
        }
        if (t.buildings) {
            if (!Array.isArray(t.buildings)) throw TypeError(".protobuf.Scene.buildings: array expected");
            e.buildings = [];
            for (var r = 0; r < t.buildings.length; ++r) {
                if ("object" !== SS(t.buildings[r])) throw TypeError(".protobuf.Scene.buildings: object expected");
                e.buildings[r] = MS.protobuf.Scene.Building.fromObject(t.buildings[r]);
            }
        }
        return e;
    }, AS.toObject = function(t, e) {
        var n, r = {};
        if (((e = e || {}).arrays || e.defaults) && (r.layerGroups = [], r.buildings = []), 
        e.defaults && (r.x = 0, r.y = 0, r.z = 0, r.minX = 0, r.minY = 0, r.maxX = 0, r.maxY = 0, 
        r.defGid = "", r.defCenX = 0, r.defCenY = 0, r.defCenZ = 0, r.height = 0, r.rotateAngleX = 0, 
        r.rotateAngleY = 0, r.rotateAngleZ = 0, r.scale = 0, r.scaleLevel = "", r.mid = "", 
        r.fileVer = 0, OS.Long ? (n = new OS.Long(0, 0, !0), r.dateVer = e.longs === String ? n.toString() : e.longs === Number ? n.toNumber() : n) : r.dateVer = e.longs === String ? "0" : 0, 
        r.mname = "", r.hashCode = "", r.key = "", r.desc = "", r.readOnly = !1, r.naviType = 0), 
        null != t.x && t.hasOwnProperty("x") && (r.x = e.json && !isFinite(t.x) ? String(t.x) : t.x), 
        null != t.y && t.hasOwnProperty("y") && (r.y = e.json && !isFinite(t.y) ? String(t.y) : t.y), 
        null != t.z && t.hasOwnProperty("z") && (r.z = e.json && !isFinite(t.z) ? String(t.z) : t.z), 
        null != t.minX && t.hasOwnProperty("minX") && (r.minX = e.json && !isFinite(t.minX) ? String(t.minX) : t.minX), 
        null != t.minY && t.hasOwnProperty("minY") && (r.minY = e.json && !isFinite(t.minY) ? String(t.minY) : t.minY), 
        null != t.maxX && t.hasOwnProperty("maxX") && (r.maxX = e.json && !isFinite(t.maxX) ? String(t.maxX) : t.maxX), 
        null != t.maxY && t.hasOwnProperty("maxY") && (r.maxY = e.json && !isFinite(t.maxY) ? String(t.maxY) : t.maxY), 
        null != t.defGid && t.hasOwnProperty("defGid") && (r.defGid = t.defGid), null != t.defCenX && t.hasOwnProperty("defCenX") && (r.defCenX = e.json && !isFinite(t.defCenX) ? String(t.defCenX) : t.defCenX), 
        null != t.defCenY && t.hasOwnProperty("defCenY") && (r.defCenY = e.json && !isFinite(t.defCenY) ? String(t.defCenY) : t.defCenY), 
        null != t.defCenZ && t.hasOwnProperty("defCenZ") && (r.defCenZ = e.json && !isFinite(t.defCenZ) ? String(t.defCenZ) : t.defCenZ), 
        null != t.height && t.hasOwnProperty("height") && (r.height = e.json && !isFinite(t.height) ? String(t.height) : t.height), 
        null != t.rotateAngleX && t.hasOwnProperty("rotateAngleX") && (r.rotateAngleX = e.json && !isFinite(t.rotateAngleX) ? String(t.rotateAngleX) : t.rotateAngleX), 
        null != t.rotateAngleY && t.hasOwnProperty("rotateAngleY") && (r.rotateAngleY = e.json && !isFinite(t.rotateAngleY) ? String(t.rotateAngleY) : t.rotateAngleY), 
        null != t.rotateAngleZ && t.hasOwnProperty("rotateAngleZ") && (r.rotateAngleZ = e.json && !isFinite(t.rotateAngleZ) ? String(t.rotateAngleZ) : t.rotateAngleZ), 
        null != t.scale && t.hasOwnProperty("scale") && (r.scale = e.json && !isFinite(t.scale) ? String(t.scale) : t.scale), 
        null != t.scaleLevel && t.hasOwnProperty("scaleLevel") && (r.scaleLevel = t.scaleLevel), 
        t.layerGroups && t.layerGroups.length) {
            r.layerGroups = [];
            for (var i = 0; i < t.layerGroups.length; ++i) r.layerGroups[i] = MS.protobuf.Scene.LayerGroup.toObject(t.layerGroups[i], e);
        }
        if (null != t.mid && t.hasOwnProperty("mid") && (r.mid = t.mid), null != t.fileVer && t.hasOwnProperty("fileVer") && (r.fileVer = t.fileVer), 
        null != t.dateVer && t.hasOwnProperty("dateVer") && ("number" == typeof t.dateVer ? r.dateVer = e.longs === String ? String(t.dateVer) : t.dateVer : r.dateVer = e.longs === String ? OS.Long.prototype.toString.call(t.dateVer) : e.longs === Number ? new OS.LongBits(t.dateVer.low >>> 0, t.dateVer.high >>> 0).toNumber(!0) : t.dateVer), 
        null != t.mname && t.hasOwnProperty("mname") && (r.mname = t.mname), null != t.hashCode && t.hasOwnProperty("hashCode") && (r.hashCode = t.hashCode), 
        null != t.key && t.hasOwnProperty("key") && (r.key = t.key), null != t.desc && t.hasOwnProperty("desc") && (r.desc = t.desc), 
        null != t.readOnly && t.hasOwnProperty("readOnly") && (r.readOnly = t.readOnly), 
        t.buildings && t.buildings.length) {
            r.buildings = [];
            for (var o = 0; o < t.buildings.length; ++o) r.buildings[o] = MS.protobuf.Scene.Building.toObject(t.buildings[o], e);
        }
        return null != t.naviType && t.hasOwnProperty("naviType") && (r.naviType = t.naviType), 
        r;
    }, AS.prototype.toJSON = function() {
        return this.constructor.toObject(this, wS.util.toJSONOptions);
    }, AS.Layer = (PS.prototype.lid = 0, PS.prototype.lname = "", PS.prototype.alias = "", 
    PS.prototype.ltype = 1, PS.prototype.offsetX = 0, PS.prototype.offsetY = 0, PS.prototype.height = 0, 
    PS.prototype.rotateAngleX = 0, PS.prototype.rotateAngleY = 0, PS.prototype.rotateAngleZ = 0, 
    PS.prototype.minScaleLevel = 0, PS.prototype.maxScaleLevel = 0, PS.prototype.isVisible = !1, 
    PS.prototype.isSelectable = !1, PS.prototype.isEditable = !1, PS.prototype.desc = "", 
    PS.create = function(t) {
        return new PS(t);
    }, PS.encode = function(t, e) {
        return e = e || ES.create(), null != t.lid && Object.hasOwnProperty.call(t, "lid") && e.uint32(8).int32(t.lid), 
        null != t.lname && Object.hasOwnProperty.call(t, "lname") && e.uint32(18).string(t.lname), 
        null != t.alias && Object.hasOwnProperty.call(t, "alias") && e.uint32(26).string(t.alias), 
        null != t.ltype && Object.hasOwnProperty.call(t, "ltype") && e.uint32(32).int32(t.ltype), 
        null != t.offsetX && Object.hasOwnProperty.call(t, "offsetX") && e.uint32(45).float(t.offsetX), 
        null != t.offsetY && Object.hasOwnProperty.call(t, "offsetY") && e.uint32(53).float(t.offsetY), 
        null != t.height && Object.hasOwnProperty.call(t, "height") && e.uint32(61).float(t.height), 
        null != t.rotateAngleX && Object.hasOwnProperty.call(t, "rotateAngleX") && e.uint32(69).float(t.rotateAngleX), 
        null != t.rotateAngleY && Object.hasOwnProperty.call(t, "rotateAngleY") && e.uint32(77).float(t.rotateAngleY), 
        null != t.rotateAngleZ && Object.hasOwnProperty.call(t, "rotateAngleZ") && e.uint32(85).float(t.rotateAngleZ), 
        null != t.minScaleLevel && Object.hasOwnProperty.call(t, "minScaleLevel") && e.uint32(93).float(t.minScaleLevel), 
        null != t.maxScaleLevel && Object.hasOwnProperty.call(t, "maxScaleLevel") && e.uint32(101).float(t.maxScaleLevel), 
        null != t.isVisible && Object.hasOwnProperty.call(t, "isVisible") && e.uint32(104).bool(t.isVisible), 
        null != t.isSelectable && Object.hasOwnProperty.call(t, "isSelectable") && e.uint32(112).bool(t.isSelectable), 
        null != t.isEditable && Object.hasOwnProperty.call(t, "isEditable") && e.uint32(120).bool(t.isEditable), 
        null != t.desc && Object.hasOwnProperty.call(t, "desc") && e.uint32(130).string(t.desc), 
        e;
    }, PS.encodeDelimited = function(t, e) {
        return this.encode(t, e).ldelim();
    }, PS.decode = function(t, e) {
        t instanceof _S || (t = _S.create(t));
        for (var n = void 0 === e ? t.len : t.pos + e, r = new MS.protobuf.Scene.Layer(); t.pos < n; ) {
            var i = t.uint32();
            switch (i >>> 3) {
              case 1:
                r.lid = t.int32();
                break;

              case 2:
                r.lname = t.string();
                break;

              case 3:
                r.alias = t.string();
                break;

              case 4:
                r.ltype = t.int32();
                break;

              case 5:
                r.offsetX = t.float();
                break;

              case 6:
                r.offsetY = t.float();
                break;

              case 7:
                r.height = t.float();
                break;

              case 8:
                r.rotateAngleX = t.float();
                break;

              case 9:
                r.rotateAngleY = t.float();
                break;

              case 10:
                r.rotateAngleZ = t.float();
                break;

              case 11:
                r.minScaleLevel = t.float();
                break;

              case 12:
                r.maxScaleLevel = t.float();
                break;

              case 13:
                r.isVisible = t.bool();
                break;

              case 14:
                r.isSelectable = t.bool();
                break;

              case 15:
                r.isEditable = t.bool();
                break;

              case 16:
                r.desc = t.string();
                break;

              default:
                t.skipType(7 & i);
            }
        }
        return r;
    }, PS.decodeDelimited = function(t) {
        return t instanceof _S || (t = new _S(t)), this.decode(t, t.uint32());
    }, PS.verify = function(t) {
        if ("object" !== SS(t) || null === t) return "object expected";
        if (null != t.lid && t.hasOwnProperty("lid") && !OS.isInteger(t.lid)) return "lid: integer expected";
        if (null != t.lname && t.hasOwnProperty("lname") && !OS.isString(t.lname)) return "lname: string expected";
        if (null != t.alias && t.hasOwnProperty("alias") && !OS.isString(t.alias)) return "alias: string expected";
        if (null != t.ltype && t.hasOwnProperty("ltype")) switch (t.ltype) {
          default:
            return "ltype: enum value expected";

          case 1:
          case 2:
          case 3:
          case 4:
          case 5:
          case 6:
          case 7:
          case 8:
          case 9:
          case 20:
          case 21:
          case 22:
          case 30:
          case 31:
          case 32:
          case 33:
          case 40:
          case 50:
        }
        return null != t.offsetX && t.hasOwnProperty("offsetX") && "number" != typeof t.offsetX ? "offsetX: number expected" : null != t.offsetY && t.hasOwnProperty("offsetY") && "number" != typeof t.offsetY ? "offsetY: number expected" : null != t.height && t.hasOwnProperty("height") && "number" != typeof t.height ? "height: number expected" : null != t.rotateAngleX && t.hasOwnProperty("rotateAngleX") && "number" != typeof t.rotateAngleX ? "rotateAngleX: number expected" : null != t.rotateAngleY && t.hasOwnProperty("rotateAngleY") && "number" != typeof t.rotateAngleY ? "rotateAngleY: number expected" : null != t.rotateAngleZ && t.hasOwnProperty("rotateAngleZ") && "number" != typeof t.rotateAngleZ ? "rotateAngleZ: number expected" : null != t.minScaleLevel && t.hasOwnProperty("minScaleLevel") && "number" != typeof t.minScaleLevel ? "minScaleLevel: number expected" : null != t.maxScaleLevel && t.hasOwnProperty("maxScaleLevel") && "number" != typeof t.maxScaleLevel ? "maxScaleLevel: number expected" : null != t.isVisible && t.hasOwnProperty("isVisible") && "boolean" != typeof t.isVisible ? "isVisible: boolean expected" : null != t.isSelectable && t.hasOwnProperty("isSelectable") && "boolean" != typeof t.isSelectable ? "isSelectable: boolean expected" : null != t.isEditable && t.hasOwnProperty("isEditable") && "boolean" != typeof t.isEditable ? "isEditable: boolean expected" : null != t.desc && t.hasOwnProperty("desc") && !OS.isString(t.desc) ? "desc: string expected" : null;
    }, PS.fromObject = function(t) {
        if (t instanceof MS.protobuf.Scene.Layer) return t;
        var e = new MS.protobuf.Scene.Layer();
        switch (null != t.lid && (e.lid = 0 | t.lid), null != t.lname && (e.lname = String(t.lname)), 
        null != t.alias && (e.alias = String(t.alias)), t.ltype) {
          case "GEOPOINT":
          case 1:
            e.ltype = 1;
            break;

          case "GEOPOINT_ESCALATOR":
          case 2:
            e.ltype = 2;
            break;

          case "GEOPOINT_LIFT":
          case 3:
            e.ltype = 3;
            break;

          case "GEOPOINT_STAIR":
          case 4:
            e.ltype = 4;
            break;

          case "GEOPOINT_PANORAMA":
          case 5:
            e.ltype = 5;
            break;

          case "GEOPOINT_POI":
          case 6:
            e.ltype = 6;
            break;

          case "GEOPOINT_STORELABEL":
          case 7:
            e.ltype = 7;
            break;

          case "GEOPOINT_NAVINODE":
          case 8:
            e.ltype = 8;
            break;

          case "GEOPOINT_MODEL":
          case 9:
            e.ltype = 9;
            break;

          case "GEOLINE":
          case 20:
            e.ltype = 20;
            break;

          case "GEOLINE_NAVISEGMENT":
          case 21:
            e.ltype = 21;
            break;

          case "GEOLINE_BORDER":
          case 22:
            e.ltype = 22;
            break;

          case "GEOPOLYGON":
          case 30:
            e.ltype = 30;
            break;

          case "GEOPOLYGON_EXTENT":
          case 31:
            e.ltype = 31;
            break;

          case "GEOPOLYGON_STORE":
          case 32:
            e.ltype = 32;
            break;

          case "GEOPOLYGON_LABEL":
          case 33:
            e.ltype = 33;
            break;

          case "RASTERATA":
          case 40:
            e.ltype = 40;
            break;

          case "OVERLAYDATA":
          case 50:
            e.ltype = 50;
        }
        return null != t.offsetX && (e.offsetX = Number(t.offsetX)), null != t.offsetY && (e.offsetY = Number(t.offsetY)), 
        null != t.height && (e.height = Number(t.height)), null != t.rotateAngleX && (e.rotateAngleX = Number(t.rotateAngleX)), 
        null != t.rotateAngleY && (e.rotateAngleY = Number(t.rotateAngleY)), null != t.rotateAngleZ && (e.rotateAngleZ = Number(t.rotateAngleZ)), 
        null != t.minScaleLevel && (e.minScaleLevel = Number(t.minScaleLevel)), null != t.maxScaleLevel && (e.maxScaleLevel = Number(t.maxScaleLevel)), 
        null != t.isVisible && (e.isVisible = Boolean(t.isVisible)), null != t.isSelectable && (e.isSelectable = Boolean(t.isSelectable)), 
        null != t.isEditable && (e.isEditable = Boolean(t.isEditable)), null != t.desc && (e.desc = String(t.desc)), 
        e;
    }, PS.toObject = function(t, e) {
        var n = {};
        return (e = e || {}).defaults && (n.lid = 0, n.lname = "", n.alias = "", n.ltype = e.enums === String ? "GEOPOINT" : 1, 
        n.offsetX = 0, n.offsetY = 0, n.height = 0, n.rotateAngleX = 0, n.rotateAngleY = 0, 
        n.rotateAngleZ = 0, n.minScaleLevel = 0, n.maxScaleLevel = 0, n.isVisible = !1, 
        n.isSelectable = !1, n.isEditable = !1, n.desc = ""), null != t.lid && t.hasOwnProperty("lid") && (n.lid = t.lid), 
        null != t.lname && t.hasOwnProperty("lname") && (n.lname = t.lname), null != t.alias && t.hasOwnProperty("alias") && (n.alias = t.alias), 
        null != t.ltype && t.hasOwnProperty("ltype") && (n.ltype = e.enums === String ? MS.protobuf.Scene.Layer.Type[t.ltype] : t.ltype), 
        null != t.offsetX && t.hasOwnProperty("offsetX") && (n.offsetX = e.json && !isFinite(t.offsetX) ? String(t.offsetX) : t.offsetX), 
        null != t.offsetY && t.hasOwnProperty("offsetY") && (n.offsetY = e.json && !isFinite(t.offsetY) ? String(t.offsetY) : t.offsetY), 
        null != t.height && t.hasOwnProperty("height") && (n.height = e.json && !isFinite(t.height) ? String(t.height) : t.height), 
        null != t.rotateAngleX && t.hasOwnProperty("rotateAngleX") && (n.rotateAngleX = e.json && !isFinite(t.rotateAngleX) ? String(t.rotateAngleX) : t.rotateAngleX), 
        null != t.rotateAngleY && t.hasOwnProperty("rotateAngleY") && (n.rotateAngleY = e.json && !isFinite(t.rotateAngleY) ? String(t.rotateAngleY) : t.rotateAngleY), 
        null != t.rotateAngleZ && t.hasOwnProperty("rotateAngleZ") && (n.rotateAngleZ = e.json && !isFinite(t.rotateAngleZ) ? String(t.rotateAngleZ) : t.rotateAngleZ), 
        null != t.minScaleLevel && t.hasOwnProperty("minScaleLevel") && (n.minScaleLevel = e.json && !isFinite(t.minScaleLevel) ? String(t.minScaleLevel) : t.minScaleLevel), 
        null != t.maxScaleLevel && t.hasOwnProperty("maxScaleLevel") && (n.maxScaleLevel = e.json && !isFinite(t.maxScaleLevel) ? String(t.maxScaleLevel) : t.maxScaleLevel), 
        null != t.isVisible && t.hasOwnProperty("isVisible") && (n.isVisible = t.isVisible), 
        null != t.isSelectable && t.hasOwnProperty("isSelectable") && (n.isSelectable = t.isSelectable), 
        null != t.isEditable && t.hasOwnProperty("isEditable") && (n.isEditable = t.isEditable), 
        null != t.desc && t.hasOwnProperty("desc") && (n.desc = t.desc), n;
    }, PS.prototype.toJSON = function() {
        return this.constructor.toObject(this, wS.util.toJSONOptions);
    }, PS.Type = (Oy = {}, (Fy = Object.create(Oy))[Oy[1] = "GEOPOINT"] = 1, Fy[Oy[2] = "GEOPOINT_ESCALATOR"] = 2, 
    Fy[Oy[3] = "GEOPOINT_LIFT"] = 3, Fy[Oy[4] = "GEOPOINT_STAIR"] = 4, Fy[Oy[5] = "GEOPOINT_PANORAMA"] = 5, 
    Fy[Oy[6] = "GEOPOINT_POI"] = 6, Fy[Oy[7] = "GEOPOINT_STORELABEL"] = 7, Fy[Oy[8] = "GEOPOINT_NAVINODE"] = 8, 
    Fy[Oy[9] = "GEOPOINT_MODEL"] = 9, Fy[Oy[20] = "GEOLINE"] = 20, Fy[Oy[21] = "GEOLINE_NAVISEGMENT"] = 21, 
    Fy[Oy[22] = "GEOLINE_BORDER"] = 22, Fy[Oy[30] = "GEOPOLYGON"] = 30, Fy[Oy[31] = "GEOPOLYGON_EXTENT"] = 31, 
    Fy[Oy[32] = "GEOPOLYGON_STORE"] = 32, Fy[Oy[33] = "GEOPOLYGON_LABEL"] = 33, Fy[Oy[40] = "RASTERATA"] = 40, 
    Fy[Oy[50] = "OVERLAYDATA"] = 50, Fy), PS), AS.LayerGroup = (RS.prototype.gid = 0, 
    RS.prototype.gname = "", RS.prototype.alias = "", RS.prototype.height = 0, RS.prototype.desc = "", 
    RS.prototype.layers = OS.emptyArray, RS.prototype.floorId = "", RS.prototype.naviType = 0, 
    RS.create = function(t) {
        return new RS(t);
    }, RS.encode = function(t, e) {
        if (e = e || ES.create(), null != t.gid && Object.hasOwnProperty.call(t, "gid") && e.uint32(8).int32(t.gid), 
        null != t.gname && Object.hasOwnProperty.call(t, "gname") && e.uint32(18).string(t.gname), 
        null != t.alias && Object.hasOwnProperty.call(t, "alias") && e.uint32(26).string(t.alias), 
        null != t.height && Object.hasOwnProperty.call(t, "height") && e.uint32(37).float(t.height), 
        null != t.desc && Object.hasOwnProperty.call(t, "desc") && e.uint32(42).string(t.desc), 
        null != t.layers && t.layers.length) for (var n = 0; n < t.layers.length; ++n) MS.protobuf.Scene.Layer.encode(t.layers[n], e.uint32(50).fork()).ldelim();
        return null != t.floorId && Object.hasOwnProperty.call(t, "floorId") && e.uint32(58).string(t.floorId), 
        null != t.naviType && Object.hasOwnProperty.call(t, "naviType") && e.uint32(64).int32(t.naviType), 
        e;
    }, RS.encodeDelimited = function(t, e) {
        return this.encode(t, e).ldelim();
    }, RS.decode = function(t, e) {
        t instanceof _S || (t = _S.create(t));
        for (var n = void 0 === e ? t.len : t.pos + e, r = new MS.protobuf.Scene.LayerGroup(); t.pos < n; ) {
            var i = t.uint32();
            switch (i >>> 3) {
              case 1:
                r.gid = t.int32();
                break;

              case 2:
                r.gname = t.string();
                break;

              case 3:
                r.alias = t.string();
                break;

              case 4:
                r.height = t.float();
                break;

              case 5:
                r.desc = t.string();
                break;

              case 6:
                r.layers && r.layers.length || (r.layers = []), r.layers.push(MS.protobuf.Scene.Layer.decode(t, t.uint32()));
                break;

              case 7:
                r.floorId = t.string();
                break;

              case 8:
                r.naviType = t.int32();
                break;

              default:
                t.skipType(7 & i);
            }
        }
        return r;
    }, RS.decodeDelimited = function(t) {
        return t instanceof _S || (t = new _S(t)), this.decode(t, t.uint32());
    }, RS.verify = function(t) {
        if ("object" !== SS(t) || null === t) return "object expected";
        if (null != t.gid && t.hasOwnProperty("gid") && !OS.isInteger(t.gid)) return "gid: integer expected";
        if (null != t.gname && t.hasOwnProperty("gname") && !OS.isString(t.gname)) return "gname: string expected";
        if (null != t.alias && t.hasOwnProperty("alias") && !OS.isString(t.alias)) return "alias: string expected";
        if (null != t.height && t.hasOwnProperty("height") && "number" != typeof t.height) return "height: number expected";
        if (null != t.desc && t.hasOwnProperty("desc") && !OS.isString(t.desc)) return "desc: string expected";
        if (null != t.layers && t.hasOwnProperty("layers")) {
            if (!Array.isArray(t.layers)) return "layers: array expected";
            for (var e = 0; e < t.layers.length; ++e) {
                var n = MS.protobuf.Scene.Layer.verify(t.layers[e]);
                if (n) return "layers." + n;
            }
        }
        return null != t.floorId && t.hasOwnProperty("floorId") && !OS.isString(t.floorId) ? "floorId: string expected" : null != t.naviType && t.hasOwnProperty("naviType") && !OS.isInteger(t.naviType) ? "naviType: integer expected" : null;
    }, RS.fromObject = function(t) {
        if (t instanceof MS.protobuf.Scene.LayerGroup) return t;
        var e = new MS.protobuf.Scene.LayerGroup();
        if (null != t.gid && (e.gid = 0 | t.gid), null != t.gname && (e.gname = String(t.gname)), 
        null != t.alias && (e.alias = String(t.alias)), null != t.height && (e.height = Number(t.height)), 
        null != t.desc && (e.desc = String(t.desc)), t.layers) {
            if (!Array.isArray(t.layers)) throw TypeError(".protobuf.Scene.LayerGroup.layers: array expected");
            e.layers = [];
            for (var n = 0; n < t.layers.length; ++n) {
                if ("object" !== SS(t.layers[n])) throw TypeError(".protobuf.Scene.LayerGroup.layers: object expected");
                e.layers[n] = MS.protobuf.Scene.Layer.fromObject(t.layers[n]);
            }
        }
        return null != t.floorId && (e.floorId = String(t.floorId)), null != t.naviType && (e.naviType = 0 | t.naviType), 
        e;
    }, RS.toObject = function(t, e) {
        var n = {};
        if (((e = e || {}).arrays || e.defaults) && (n.layers = []), e.defaults && (n.gid = 0, 
        n.gname = "", n.alias = "", n.height = 0, n.desc = "", n.floorId = "", n.naviType = 0), 
        null != t.gid && t.hasOwnProperty("gid") && (n.gid = t.gid), null != t.gname && t.hasOwnProperty("gname") && (n.gname = t.gname), 
        null != t.alias && t.hasOwnProperty("alias") && (n.alias = t.alias), null != t.height && t.hasOwnProperty("height") && (n.height = e.json && !isFinite(t.height) ? String(t.height) : t.height), 
        null != t.desc && t.hasOwnProperty("desc") && (n.desc = t.desc), t.layers && t.layers.length) {
            n.layers = [];
            for (var r = 0; r < t.layers.length; ++r) n.layers[r] = MS.protobuf.Scene.Layer.toObject(t.layers[r], e);
        }
        return null != t.floorId && t.hasOwnProperty("floorId") && (n.floorId = t.floorId), 
        null != t.naviType && t.hasOwnProperty("naviType") && (n.naviType = t.naviType), 
        n;
    }, RS.prototype.toJSON = function() {
        return this.constructor.toObject(this, wS.util.toJSONOptions);
    }, RS), AS.Floor = (jS.prototype.gid = 0, jS.prototype.x = 0, jS.prototype.y = 0, 
    jS.prototype.offsetX = 0, jS.prototype.offsetY = 0, jS.prototype.angle = 0, jS.prototype.scale = 0, 
    jS.prototype.fids = OS.emptyArray, jS.prototype.pgid = 0, jS.prototype.baseLevel = !1, 
    jS.prototype.minlevel = 0, jS.prototype.maxlevel = 0, jS.prototype.floorId = "", 
    jS.prototype.idxs = OS.emptyArray, jS.prototype.pts = OS.emptyArray, jS.create = function(t) {
        return new jS(t);
    }, jS.encode = function(t, e) {
        if (e = e || ES.create(), null != t.gid && Object.hasOwnProperty.call(t, "gid") && e.uint32(8).int32(t.gid), 
        null != t.x && Object.hasOwnProperty.call(t, "x") && e.uint32(21).float(t.x), null != t.y && Object.hasOwnProperty.call(t, "y") && e.uint32(29).float(t.y), 
        null != t.offsetX && Object.hasOwnProperty.call(t, "offsetX") && e.uint32(37).float(t.offsetX), 
        null != t.offsetY && Object.hasOwnProperty.call(t, "offsetY") && e.uint32(45).float(t.offsetY), 
        null != t.angle && Object.hasOwnProperty.call(t, "angle") && e.uint32(53).float(t.angle), 
        null != t.scale && Object.hasOwnProperty.call(t, "scale") && e.uint32(61).float(t.scale), 
        null != t.fids && t.fids.length) for (var n = 0; n < t.fids.length; ++n) e.uint32(66).string(t.fids[n]);
        if (null != t.pgid && Object.hasOwnProperty.call(t, "pgid") && e.uint32(72).int32(t.pgid), 
        null != t.baseLevel && Object.hasOwnProperty.call(t, "baseLevel") && e.uint32(80).bool(t.baseLevel), 
        null != t.minlevel && Object.hasOwnProperty.call(t, "minlevel") && e.uint32(88).int32(t.minlevel), 
        null != t.maxlevel && Object.hasOwnProperty.call(t, "maxlevel") && e.uint32(96).int32(t.maxlevel), 
        null != t.floorId && Object.hasOwnProperty.call(t, "floorId") && e.uint32(106).string(t.floorId), 
        null != t.idxs && t.idxs.length) for (var r = 0; r < t.idxs.length; ++r) MS.protobuf.Scene.Floor.IndexInfo.encode(t.idxs[r], e.uint32(114).fork()).ldelim();
        if (null != t.pts && t.pts.length) for (var i = 0; i < t.pts.length; ++i) e.uint32(121).double(t.pts[i]);
        return e;
    }, jS.encodeDelimited = function(t, e) {
        return this.encode(t, e).ldelim();
    }, jS.decode = function(t, e) {
        t instanceof _S || (t = _S.create(t));
        for (var n = void 0 === e ? t.len : t.pos + e, r = new MS.protobuf.Scene.Floor(); t.pos < n; ) {
            var i = t.uint32();
            switch (i >>> 3) {
              case 1:
                r.gid = t.int32();
                break;

              case 2:
                r.x = t.float();
                break;

              case 3:
                r.y = t.float();
                break;

              case 4:
                r.offsetX = t.float();
                break;

              case 5:
                r.offsetY = t.float();
                break;

              case 6:
                r.angle = t.float();
                break;

              case 7:
                r.scale = t.float();
                break;

              case 8:
                r.fids && r.fids.length || (r.fids = []), r.fids.push(t.string());
                break;

              case 9:
                r.pgid = t.int32();
                break;

              case 10:
                r.baseLevel = t.bool();
                break;

              case 11:
                r.minlevel = t.int32();
                break;

              case 12:
                r.maxlevel = t.int32();
                break;

              case 13:
                r.floorId = t.string();
                break;

              case 14:
                r.idxs && r.idxs.length || (r.idxs = []), r.idxs.push(MS.protobuf.Scene.Floor.IndexInfo.decode(t, t.uint32()));
                break;

              case 15:
                if (r.pts && r.pts.length || (r.pts = []), 2 == (7 & i)) for (var o = t.uint32() + t.pos; t.pos < o; ) r.pts.push(t.double()); else r.pts.push(t.double());
                break;

              default:
                t.skipType(7 & i);
            }
        }
        return r;
    }, jS.decodeDelimited = function(t) {
        return t instanceof _S || (t = new _S(t)), this.decode(t, t.uint32());
    }, jS.verify = function(t) {
        if ("object" !== SS(t) || null === t) return "object expected";
        if (null != t.gid && t.hasOwnProperty("gid") && !OS.isInteger(t.gid)) return "gid: integer expected";
        if (null != t.x && t.hasOwnProperty("x") && "number" != typeof t.x) return "x: number expected";
        if (null != t.y && t.hasOwnProperty("y") && "number" != typeof t.y) return "y: number expected";
        if (null != t.offsetX && t.hasOwnProperty("offsetX") && "number" != typeof t.offsetX) return "offsetX: number expected";
        if (null != t.offsetY && t.hasOwnProperty("offsetY") && "number" != typeof t.offsetY) return "offsetY: number expected";
        if (null != t.angle && t.hasOwnProperty("angle") && "number" != typeof t.angle) return "angle: number expected";
        if (null != t.scale && t.hasOwnProperty("scale") && "number" != typeof t.scale) return "scale: number expected";
        if (null != t.fids && t.hasOwnProperty("fids")) {
            if (!Array.isArray(t.fids)) return "fids: array expected";
            for (var e = 0; e < t.fids.length; ++e) if (!OS.isString(t.fids[e])) return "fids: string[] expected";
        }
        if (null != t.pgid && t.hasOwnProperty("pgid") && !OS.isInteger(t.pgid)) return "pgid: integer expected";
        if (null != t.baseLevel && t.hasOwnProperty("baseLevel") && "boolean" != typeof t.baseLevel) return "baseLevel: boolean expected";
        if (null != t.minlevel && t.hasOwnProperty("minlevel") && !OS.isInteger(t.minlevel)) return "minlevel: integer expected";
        if (null != t.maxlevel && t.hasOwnProperty("maxlevel") && !OS.isInteger(t.maxlevel)) return "maxlevel: integer expected";
        if (null != t.floorId && t.hasOwnProperty("floorId") && !OS.isString(t.floorId)) return "floorId: string expected";
        if (null != t.idxs && t.hasOwnProperty("idxs")) {
            if (!Array.isArray(t.idxs)) return "idxs: array expected";
            for (var n = 0; n < t.idxs.length; ++n) {
                var r = MS.protobuf.Scene.Floor.IndexInfo.verify(t.idxs[n]);
                if (r) return "idxs." + r;
            }
        }
        if (null != t.pts && t.hasOwnProperty("pts")) {
            if (!Array.isArray(t.pts)) return "pts: array expected";
            for (var i = 0; i < t.pts.length; ++i) if ("number" != typeof t.pts[i]) return "pts: number[] expected";
        }
        return null;
    }, jS.fromObject = function(t) {
        if (t instanceof MS.protobuf.Scene.Floor) return t;
        var e = new MS.protobuf.Scene.Floor();
        if (null != t.gid && (e.gid = 0 | t.gid), null != t.x && (e.x = Number(t.x)), null != t.y && (e.y = Number(t.y)), 
        null != t.offsetX && (e.offsetX = Number(t.offsetX)), null != t.offsetY && (e.offsetY = Number(t.offsetY)), 
        null != t.angle && (e.angle = Number(t.angle)), null != t.scale && (e.scale = Number(t.scale)), 
        t.fids) {
            if (!Array.isArray(t.fids)) throw TypeError(".protobuf.Scene.Floor.fids: array expected");
            e.fids = [];
            for (var n = 0; n < t.fids.length; ++n) e.fids[n] = String(t.fids[n]);
        }
        if (null != t.pgid && (e.pgid = 0 | t.pgid), null != t.baseLevel && (e.baseLevel = Boolean(t.baseLevel)), 
        null != t.minlevel && (e.minlevel = 0 | t.minlevel), null != t.maxlevel && (e.maxlevel = 0 | t.maxlevel), 
        null != t.floorId && (e.floorId = String(t.floorId)), t.idxs) {
            if (!Array.isArray(t.idxs)) throw TypeError(".protobuf.Scene.Floor.idxs: array expected");
            e.idxs = [];
            for (var r = 0; r < t.idxs.length; ++r) {
                if ("object" !== SS(t.idxs[r])) throw TypeError(".protobuf.Scene.Floor.idxs: object expected");
                e.idxs[r] = MS.protobuf.Scene.Floor.IndexInfo.fromObject(t.idxs[r]);
            }
        }
        if (t.pts) {
            if (!Array.isArray(t.pts)) throw TypeError(".protobuf.Scene.Floor.pts: array expected");
            e.pts = [];
            for (var i = 0; i < t.pts.length; ++i) e.pts[i] = Number(t.pts[i]);
        }
        return e;
    }, jS.toObject = function(t, e) {
        var n = {};
        if (((e = e || {}).arrays || e.defaults) && (n.fids = [], n.idxs = [], n.pts = []), 
        e.defaults && (n.gid = 0, n.x = 0, n.y = 0, n.offsetX = 0, n.offsetY = 0, n.angle = 0, 
        n.scale = 0, n.pgid = 0, n.baseLevel = !1, n.minlevel = 0, n.maxlevel = 0, n.floorId = ""), 
        null != t.gid && t.hasOwnProperty("gid") && (n.gid = t.gid), null != t.x && t.hasOwnProperty("x") && (n.x = e.json && !isFinite(t.x) ? String(t.x) : t.x), 
        null != t.y && t.hasOwnProperty("y") && (n.y = e.json && !isFinite(t.y) ? String(t.y) : t.y), 
        null != t.offsetX && t.hasOwnProperty("offsetX") && (n.offsetX = e.json && !isFinite(t.offsetX) ? String(t.offsetX) : t.offsetX), 
        null != t.offsetY && t.hasOwnProperty("offsetY") && (n.offsetY = e.json && !isFinite(t.offsetY) ? String(t.offsetY) : t.offsetY), 
        null != t.angle && t.hasOwnProperty("angle") && (n.angle = e.json && !isFinite(t.angle) ? String(t.angle) : t.angle), 
        null != t.scale && t.hasOwnProperty("scale") && (n.scale = e.json && !isFinite(t.scale) ? String(t.scale) : t.scale), 
        t.fids && t.fids.length) {
            n.fids = [];
            for (var r = 0; r < t.fids.length; ++r) n.fids[r] = t.fids[r];
        }
        if (null != t.pgid && t.hasOwnProperty("pgid") && (n.pgid = t.pgid), null != t.baseLevel && t.hasOwnProperty("baseLevel") && (n.baseLevel = t.baseLevel), 
        null != t.minlevel && t.hasOwnProperty("minlevel") && (n.minlevel = t.minlevel), 
        null != t.maxlevel && t.hasOwnProperty("maxlevel") && (n.maxlevel = t.maxlevel), 
        null != t.floorId && t.hasOwnProperty("floorId") && (n.floorId = t.floorId), t.idxs && t.idxs.length) {
            n.idxs = [];
            for (var i = 0; i < t.idxs.length; ++i) n.idxs[i] = MS.protobuf.Scene.Floor.IndexInfo.toObject(t.idxs[i], e);
        }
        if (t.pts && t.pts.length) {
            n.pts = [];
            for (var o = 0; o < t.pts.length; ++o) n.pts[o] = e.json && !isFinite(t.pts[o]) ? String(t.pts[o]) : t.pts[o];
        }
        return n;
    }, jS.prototype.toJSON = function() {
        return this.constructor.toObject(this, wS.util.toJSONOptions);
    }, jS.IndexInfo = (IS.prototype.idxs = OS.emptyArray, IS.create = function(t) {
        return new IS(t);
    }, IS.encode = function(t, e) {
        if (e = e || ES.create(), null != t.idxs && t.idxs.length) for (var n = 0; n < t.idxs.length; ++n) e.uint32(8).int32(t.idxs[n]);
        return e;
    }, IS.encodeDelimited = function(t, e) {
        return this.encode(t, e).ldelim();
    }, IS.decode = function(t, e) {
        t instanceof _S || (t = _S.create(t));
        for (var n = void 0 === e ? t.len : t.pos + e, r = new MS.protobuf.Scene.Floor.IndexInfo(); t.pos < n; ) {
            var i = t.uint32();
            if (i >>> 3 == 1) if (r.idxs && r.idxs.length || (r.idxs = []), 2 == (7 & i)) for (var o = t.uint32() + t.pos; t.pos < o; ) r.idxs.push(t.int32()); else r.idxs.push(t.int32()); else t.skipType(7 & i);
        }
        return r;
    }, IS.decodeDelimited = function(t) {
        return t instanceof _S || (t = new _S(t)), this.decode(t, t.uint32());
    }, IS.verify = function(t) {
        if ("object" !== SS(t) || null === t) return "object expected";
        if (null != t.idxs && t.hasOwnProperty("idxs")) {
            if (!Array.isArray(t.idxs)) return "idxs: array expected";
            for (var e = 0; e < t.idxs.length; ++e) if (!OS.isInteger(t.idxs[e])) return "idxs: integer[] expected";
        }
        return null;
    }, IS.fromObject = function(t) {
        if (t instanceof MS.protobuf.Scene.Floor.IndexInfo) return t;
        var e = new MS.protobuf.Scene.Floor.IndexInfo();
        if (t.idxs) {
            if (!Array.isArray(t.idxs)) throw TypeError(".protobuf.Scene.Floor.IndexInfo.idxs: array expected");
            e.idxs = [];
            for (var n = 0; n < t.idxs.length; ++n) e.idxs[n] = 0 | t.idxs[n];
        }
        return e;
    }, IS.toObject = function(t, e) {
        var n = {};
        if (((e = e || {}).arrays || e.defaults) && (n.idxs = []), t.idxs && t.idxs.length) {
            n.idxs = [];
            for (var r = 0; r < t.idxs.length; ++r) n.idxs[r] = t.idxs[r];
        }
        return n;
    }, IS.prototype.toJSON = function() {
        return this.constructor.toObject(this, wS.util.toJSONOptions);
    }, IS), jS), AS.Building = (DS.prototype.bid = "", DS.prototype.name = "", DS.prototype.ename = "", 
    DS.prototype.alias = "", DS.prototype.x = 0, DS.prototype.y = 0, DS.prototype.mid = "", 
    DS.prototype.version = 0, DS.prototype.floors = OS.emptyArray, DS.prototype.bcode = 0, 
    DS.create = function(t) {
        return new DS(t);
    }, DS.encode = function(t, e) {
        if (e = e || ES.create(), null != t.bid && Object.hasOwnProperty.call(t, "bid") && e.uint32(10).string(t.bid), 
        null != t.name && Object.hasOwnProperty.call(t, "name") && e.uint32(18).string(t.name), 
        null != t.ename && Object.hasOwnProperty.call(t, "ename") && e.uint32(26).string(t.ename), 
        null != t.alias && Object.hasOwnProperty.call(t, "alias") && e.uint32(34).string(t.alias), 
        null != t.x && Object.hasOwnProperty.call(t, "x") && e.uint32(45).float(t.x), null != t.y && Object.hasOwnProperty.call(t, "y") && e.uint32(53).float(t.y), 
        null != t.mid && Object.hasOwnProperty.call(t, "mid") && e.uint32(58).string(t.mid), 
        null != t.version && Object.hasOwnProperty.call(t, "version") && e.uint32(64).int32(t.version), 
        null != t.floors && t.floors.length) for (var n = 0; n < t.floors.length; ++n) MS.protobuf.Scene.Floor.encode(t.floors[n], e.uint32(74).fork()).ldelim();
        return null != t.bcode && Object.hasOwnProperty.call(t, "bcode") && e.uint32(80).int32(t.bcode), 
        e;
    }, DS.encodeDelimited = function(t, e) {
        return this.encode(t, e).ldelim();
    }, DS.decode = function(t, e) {
        t instanceof _S || (t = _S.create(t));
        for (var n = void 0 === e ? t.len : t.pos + e, r = new MS.protobuf.Scene.Building(); t.pos < n; ) {
            var i = t.uint32();
            switch (i >>> 3) {
              case 1:
                r.bid = t.string();
                break;

              case 2:
                r.name = t.string();
                break;

              case 3:
                r.ename = t.string();
                break;

              case 4:
                r.alias = t.string();
                break;

              case 5:
                r.x = t.float();
                break;

              case 6:
                r.y = t.float();
                break;

              case 7:
                r.mid = t.string();
                break;

              case 8:
                r.version = t.int32();
                break;

              case 9:
                r.floors && r.floors.length || (r.floors = []), r.floors.push(MS.protobuf.Scene.Floor.decode(t, t.uint32()));
                break;

              case 10:
                r.bcode = t.int32();
                break;

              default:
                t.skipType(7 & i);
            }
        }
        return r;
    }, DS.decodeDelimited = function(t) {
        return t instanceof _S || (t = new _S(t)), this.decode(t, t.uint32());
    }, DS.verify = function(t) {
        if ("object" !== SS(t) || null === t) return "object expected";
        if (null != t.bid && t.hasOwnProperty("bid") && !OS.isString(t.bid)) return "bid: string expected";
        if (null != t.name && t.hasOwnProperty("name") && !OS.isString(t.name)) return "name: string expected";
        if (null != t.ename && t.hasOwnProperty("ename") && !OS.isString(t.ename)) return "ename: string expected";
        if (null != t.alias && t.hasOwnProperty("alias") && !OS.isString(t.alias)) return "alias: string expected";
        if (null != t.x && t.hasOwnProperty("x") && "number" != typeof t.x) return "x: number expected";
        if (null != t.y && t.hasOwnProperty("y") && "number" != typeof t.y) return "y: number expected";
        if (null != t.mid && t.hasOwnProperty("mid") && !OS.isString(t.mid)) return "mid: string expected";
        if (null != t.version && t.hasOwnProperty("version") && !OS.isInteger(t.version)) return "version: integer expected";
        if (null != t.floors && t.hasOwnProperty("floors")) {
            if (!Array.isArray(t.floors)) return "floors: array expected";
            for (var e = 0; e < t.floors.length; ++e) {
                var n = MS.protobuf.Scene.Floor.verify(t.floors[e]);
                if (n) return "floors." + n;
            }
        }
        return null != t.bcode && t.hasOwnProperty("bcode") && !OS.isInteger(t.bcode) ? "bcode: integer expected" : null;
    }, DS.fromObject = function(t) {
        if (t instanceof MS.protobuf.Scene.Building) return t;
        var e = new MS.protobuf.Scene.Building();
        if (null != t.bid && (e.bid = String(t.bid)), null != t.name && (e.name = String(t.name)), 
        null != t.ename && (e.ename = String(t.ename)), null != t.alias && (e.alias = String(t.alias)), 
        null != t.x && (e.x = Number(t.x)), null != t.y && (e.y = Number(t.y)), null != t.mid && (e.mid = String(t.mid)), 
        null != t.version && (e.version = 0 | t.version), t.floors) {
            if (!Array.isArray(t.floors)) throw TypeError(".protobuf.Scene.Building.floors: array expected");
            e.floors = [];
            for (var n = 0; n < t.floors.length; ++n) {
                if ("object" !== SS(t.floors[n])) throw TypeError(".protobuf.Scene.Building.floors: object expected");
                e.floors[n] = MS.protobuf.Scene.Floor.fromObject(t.floors[n]);
            }
        }
        return null != t.bcode && (e.bcode = 0 | t.bcode), e;
    }, DS.toObject = function(t, e) {
        var n = {};
        if (((e = e || {}).arrays || e.defaults) && (n.floors = []), e.defaults && (n.bid = "", 
        n.name = "", n.ename = "", n.alias = "", n.x = 0, n.y = 0, n.mid = "", n.version = 0, 
        n.bcode = 0), null != t.bid && t.hasOwnProperty("bid") && (n.bid = t.bid), null != t.name && t.hasOwnProperty("name") && (n.name = t.name), 
        null != t.ename && t.hasOwnProperty("ename") && (n.ename = t.ename), null != t.alias && t.hasOwnProperty("alias") && (n.alias = t.alias), 
        null != t.x && t.hasOwnProperty("x") && (n.x = e.json && !isFinite(t.x) ? String(t.x) : t.x), 
        null != t.y && t.hasOwnProperty("y") && (n.y = e.json && !isFinite(t.y) ? String(t.y) : t.y), 
        null != t.mid && t.hasOwnProperty("mid") && (n.mid = t.mid), null != t.version && t.hasOwnProperty("version") && (n.version = t.version), 
        t.floors && t.floors.length) {
            n.floors = [];
            for (var r = 0; r < t.floors.length; ++r) n.floors[r] = MS.protobuf.Scene.Floor.toObject(t.floors[r], e);
        }
        return null != t.bcode && t.hasOwnProperty("bcode") && (n.bcode = t.bcode), n;
    }, DS.prototype.toJSON = function() {
        return this.constructor.toObject(this, wS.util.toJSONOptions);
    }, DS), AS), gy.Gate = (kS.prototype.mid = "", kS.prototype.floors = OS.emptyArray, 
    kS.create = function(t) {
        return new kS(t);
    }, kS.encode = function(t, e) {
        if ((e = e || ES.create()).uint32(10).string(t.mid), null != t.floors && t.floors.length) for (var n = 0; n < t.floors.length; ++n) MS.protobuf.Gate.NaviFloor.encode(t.floors[n], e.uint32(18).fork()).ldelim();
        return e;
    }, kS.encodeDelimited = function(t, e) {
        return this.encode(t, e).ldelim();
    }, kS.decode = function(t, e) {
        t instanceof _S || (t = _S.create(t));
        for (var n = void 0 === e ? t.len : t.pos + e, r = new MS.protobuf.Gate(); t.pos < n; ) {
            var i = t.uint32();
            switch (i >>> 3) {
              case 1:
                r.mid = t.string();
                break;

              case 2:
                r.floors && r.floors.length || (r.floors = []), r.floors.push(MS.protobuf.Gate.NaviFloor.decode(t, t.uint32()));
                break;

              default:
                t.skipType(7 & i);
            }
        }
        if (r.hasOwnProperty("mid")) return r;
        throw OS.ProtocolError("missing required 'mid'", {
            instance: r
        });
    }, kS.decodeDelimited = function(t) {
        return t instanceof _S || (t = new _S(t)), this.decode(t, t.uint32());
    }, kS.verify = function(t) {
        if ("object" !== SS(t) || null === t) return "object expected";
        if (!OS.isString(t.mid)) return "mid: string expected";
        if (null != t.floors && t.hasOwnProperty("floors")) {
            if (!Array.isArray(t.floors)) return "floors: array expected";
            for (var e = 0; e < t.floors.length; ++e) {
                var n = MS.protobuf.Gate.NaviFloor.verify(t.floors[e]);
                if (n) return "floors." + n;
            }
        }
        return null;
    }, kS.fromObject = function(t) {
        if (t instanceof MS.protobuf.Gate) return t;
        var e = new MS.protobuf.Gate();
        if (null != t.mid && (e.mid = String(t.mid)), t.floors) {
            if (!Array.isArray(t.floors)) throw TypeError(".protobuf.Gate.floors: array expected");
            e.floors = [];
            for (var n = 0; n < t.floors.length; ++n) {
                if ("object" !== SS(t.floors[n])) throw TypeError(".protobuf.Gate.floors: object expected");
                e.floors[n] = MS.protobuf.Gate.NaviFloor.fromObject(t.floors[n]);
            }
        }
        return e;
    }, kS.toObject = function(t, e) {
        var n = {};
        if (((e = e || {}).arrays || e.defaults) && (n.floors = []), e.defaults && (n.mid = ""), 
        null != t.mid && t.hasOwnProperty("mid") && (n.mid = t.mid), t.floors && t.floors.length) {
            n.floors = [];
            for (var r = 0; r < t.floors.length; ++r) n.floors[r] = MS.protobuf.Gate.NaviFloor.toObject(t.floors[r], e);
        }
        return n;
    }, kS.prototype.toJSON = function() {
        return this.constructor.toObject(this, wS.util.toJSONOptions);
    }, kS.NaviFloor = (CS.prototype.gid = 0, CS.prototype.floorId = "", CS.prototype.bid = "", 
    CS.prototype.mid = "", CS.prototype.navi = OS.emptyArray, CS.prototype.drive = OS.emptyArray, 
    CS.prototype.accessible = OS.emptyArray, CS.create = function(t) {
        return new CS(t);
    }, CS.encode = function(t, e) {
        if (e = e || ES.create(), null != t.gid && Object.hasOwnProperty.call(t, "gid") && e.uint32(8).int32(t.gid), 
        null != t.floorId && Object.hasOwnProperty.call(t, "floorId") && e.uint32(18).string(t.floorId), 
        null != t.bid && Object.hasOwnProperty.call(t, "bid") && e.uint32(26).string(t.bid), 
        null != t.mid && Object.hasOwnProperty.call(t, "mid") && e.uint32(34).string(t.mid), 
        null != t.navi && t.navi.length) for (var n = 0; n < t.navi.length; ++n) MS.protobuf.Gate.NaviRelationship.encode(t.navi[n], e.uint32(42).fork()).ldelim();
        if (null != t.drive && t.drive.length) for (var r = 0; r < t.drive.length; ++r) MS.protobuf.Gate.NaviRelationship.encode(t.drive[r], e.uint32(50).fork()).ldelim();
        if (null != t.accessible && t.accessible.length) for (var i = 0; i < t.accessible.length; ++i) MS.protobuf.Gate.NaviRelationship.encode(t.accessible[i], e.uint32(58).fork()).ldelim();
        return e;
    }, CS.encodeDelimited = function(t, e) {
        return this.encode(t, e).ldelim();
    }, CS.decode = function(t, e) {
        t instanceof _S || (t = _S.create(t));
        for (var n = void 0 === e ? t.len : t.pos + e, r = new MS.protobuf.Gate.NaviFloor(); t.pos < n; ) {
            var i = t.uint32();
            switch (i >>> 3) {
              case 1:
                r.gid = t.int32();
                break;

              case 2:
                r.floorId = t.string();
                break;

              case 3:
                r.bid = t.string();
                break;

              case 4:
                r.mid = t.string();
                break;

              case 5:
                r.navi && r.navi.length || (r.navi = []), r.navi.push(MS.protobuf.Gate.NaviRelationship.decode(t, t.uint32()));
                break;

              case 6:
                r.drive && r.drive.length || (r.drive = []), r.drive.push(MS.protobuf.Gate.NaviRelationship.decode(t, t.uint32()));
                break;

              case 7:
                r.accessible && r.accessible.length || (r.accessible = []), r.accessible.push(MS.protobuf.Gate.NaviRelationship.decode(t, t.uint32()));
                break;

              default:
                t.skipType(7 & i);
            }
        }
        return r;
    }, CS.decodeDelimited = function(t) {
        return t instanceof _S || (t = new _S(t)), this.decode(t, t.uint32());
    }, CS.verify = function(t) {
        if ("object" !== SS(t) || null === t) return "object expected";
        if (null != t.gid && t.hasOwnProperty("gid") && !OS.isInteger(t.gid)) return "gid: integer expected";
        if (null != t.floorId && t.hasOwnProperty("floorId") && !OS.isString(t.floorId)) return "floorId: string expected";
        if (null != t.bid && t.hasOwnProperty("bid") && !OS.isString(t.bid)) return "bid: string expected";
        if (null != t.mid && t.hasOwnProperty("mid") && !OS.isString(t.mid)) return "mid: string expected";
        if (null != t.navi && t.hasOwnProperty("navi")) {
            if (!Array.isArray(t.navi)) return "navi: array expected";
            for (var e = 0; e < t.navi.length; ++e) {
                var n = MS.protobuf.Gate.NaviRelationship.verify(t.navi[e]);
                if (n) return "navi." + n;
            }
        }
        if (null != t.drive && t.hasOwnProperty("drive")) {
            if (!Array.isArray(t.drive)) return "drive: array expected";
            for (var r = 0; r < t.drive.length; ++r) {
                var i = MS.protobuf.Gate.NaviRelationship.verify(t.drive[r]);
                if (i) return "drive." + i;
            }
        }
        if (null != t.accessible && t.hasOwnProperty("accessible")) {
            if (!Array.isArray(t.accessible)) return "accessible: array expected";
            for (var o = 0; o < t.accessible.length; ++o) {
                var a = MS.protobuf.Gate.NaviRelationship.verify(t.accessible[o]);
                if (a) return "accessible." + a;
            }
        }
        return null;
    }, CS.fromObject = function(t) {
        if (t instanceof MS.protobuf.Gate.NaviFloor) return t;
        var e = new MS.protobuf.Gate.NaviFloor();
        if (null != t.gid && (e.gid = 0 | t.gid), null != t.floorId && (e.floorId = String(t.floorId)), 
        null != t.bid && (e.bid = String(t.bid)), null != t.mid && (e.mid = String(t.mid)), 
        t.navi) {
            if (!Array.isArray(t.navi)) throw TypeError(".protobuf.Gate.NaviFloor.navi: array expected");
            e.navi = [];
            for (var n = 0; n < t.navi.length; ++n) {
                if ("object" !== SS(t.navi[n])) throw TypeError(".protobuf.Gate.NaviFloor.navi: object expected");
                e.navi[n] = MS.protobuf.Gate.NaviRelationship.fromObject(t.navi[n]);
            }
        }
        if (t.drive) {
            if (!Array.isArray(t.drive)) throw TypeError(".protobuf.Gate.NaviFloor.drive: array expected");
            e.drive = [];
            for (var r = 0; r < t.drive.length; ++r) {
                if ("object" !== SS(t.drive[r])) throw TypeError(".protobuf.Gate.NaviFloor.drive: object expected");
                e.drive[r] = MS.protobuf.Gate.NaviRelationship.fromObject(t.drive[r]);
            }
        }
        if (t.accessible) {
            if (!Array.isArray(t.accessible)) throw TypeError(".protobuf.Gate.NaviFloor.accessible: array expected");
            e.accessible = [];
            for (var i = 0; i < t.accessible.length; ++i) {
                if ("object" !== SS(t.accessible[i])) throw TypeError(".protobuf.Gate.NaviFloor.accessible: object expected");
                e.accessible[i] = MS.protobuf.Gate.NaviRelationship.fromObject(t.accessible[i]);
            }
        }
        return e;
    }, CS.toObject = function(t, e) {
        var n = {};
        if (((e = e || {}).arrays || e.defaults) && (n.navi = [], n.drive = [], n.accessible = []), 
        e.defaults && (n.gid = 0, n.floorId = "", n.bid = "", n.mid = ""), null != t.gid && t.hasOwnProperty("gid") && (n.gid = t.gid), 
        null != t.floorId && t.hasOwnProperty("floorId") && (n.floorId = t.floorId), null != t.bid && t.hasOwnProperty("bid") && (n.bid = t.bid), 
        null != t.mid && t.hasOwnProperty("mid") && (n.mid = t.mid), t.navi && t.navi.length) {
            n.navi = [];
            for (var r = 0; r < t.navi.length; ++r) n.navi[r] = MS.protobuf.Gate.NaviRelationship.toObject(t.navi[r], e);
        }
        if (t.drive && t.drive.length) {
            n.drive = [];
            for (var i = 0; i < t.drive.length; ++i) n.drive[i] = MS.protobuf.Gate.NaviRelationship.toObject(t.drive[i], e);
        }
        if (t.accessible && t.accessible.length) {
            n.accessible = [];
            for (var o = 0; o < t.accessible.length; ++o) n.accessible[o] = MS.protobuf.Gate.NaviRelationship.toObject(t.accessible[o], e);
        }
        return n;
    }, CS.prototype.toJSON = function() {
        return this.constructor.toObject(this, wS.util.toJSONOptions);
    }, CS), kS.NaviRelationship = (NS.prototype.eid = 0, NS.prototype.type = 0, NS.prototype.accessible = 0, 
    NS.prototype.idxs = OS.emptyArray, NS.prototype.pts = OS.emptyArray, NS.prototype.flag = 0, 
    NS.prototype.toBid = OS.emptyArray, NS.prototype.toGid = OS.emptyArray, NS.create = function(t) {
        return new NS(t);
    }, NS.encode = function(t, e) {
        if ((e = e || ES.create()).uint32(8).int32(t.eid), null != t.type && Object.hasOwnProperty.call(t, "type") && e.uint32(16).int32(t.type), 
        null != t.accessible && Object.hasOwnProperty.call(t, "accessible") && e.uint32(24).int32(t.accessible), 
        null != t.idxs && t.idxs.length) for (var n = 0; n < t.idxs.length; ++n) MS.protobuf.Gate.NaviRelationship.IndexInfo.encode(t.idxs[n], e.uint32(34).fork()).ldelim();
        if (null != t.pts && t.pts.length) for (var r = 0; r < t.pts.length; ++r) e.uint32(41).double(t.pts[r]);
        if (null != t.flag && Object.hasOwnProperty.call(t, "flag") && e.uint32(48).int32(t.flag), 
        null != t.toBid && t.toBid.length) for (var i = 0; i < t.toBid.length; ++i) e.uint32(58).string(t.toBid[i]);
        if (null != t.toGid && t.toGid.length) for (var o = 0; o < t.toGid.length; ++o) e.uint32(66).string(t.toGid[o]);
        return e;
    }, NS.encodeDelimited = function(t, e) {
        return this.encode(t, e).ldelim();
    }, NS.decode = function(t, e) {
        t instanceof _S || (t = _S.create(t));
        for (var n = void 0 === e ? t.len : t.pos + e, r = new MS.protobuf.Gate.NaviRelationship(); t.pos < n; ) {
            var i = t.uint32();
            switch (i >>> 3) {
              case 1:
                r.eid = t.int32();
                break;

              case 2:
                r.type = t.int32();
                break;

              case 3:
                r.accessible = t.int32();
                break;

              case 4:
                r.idxs && r.idxs.length || (r.idxs = []), r.idxs.push(MS.protobuf.Gate.NaviRelationship.IndexInfo.decode(t, t.uint32()));
                break;

              case 5:
                if (r.pts && r.pts.length || (r.pts = []), 2 == (7 & i)) for (var o = t.uint32() + t.pos; t.pos < o; ) r.pts.push(t.double()); else r.pts.push(t.double());
                break;

              case 6:
                r.flag = t.int32();
                break;

              case 7:
                r.toBid && r.toBid.length || (r.toBid = []), r.toBid.push(t.string());
                break;

              case 8:
                r.toGid && r.toGid.length || (r.toGid = []), r.toGid.push(t.string());
                break;

              default:
                t.skipType(7 & i);
            }
        }
        if (r.hasOwnProperty("eid")) return r;
        throw OS.ProtocolError("missing required 'eid'", {
            instance: r
        });
    }, NS.decodeDelimited = function(t) {
        return t instanceof _S || (t = new _S(t)), this.decode(t, t.uint32());
    }, NS.verify = function(t) {
        if ("object" !== SS(t) || null === t) return "object expected";
        if (!OS.isInteger(t.eid)) return "eid: integer expected";
        if (null != t.type && t.hasOwnProperty("type") && !OS.isInteger(t.type)) return "type: integer expected";
        if (null != t.accessible && t.hasOwnProperty("accessible") && !OS.isInteger(t.accessible)) return "accessible: integer expected";
        if (null != t.idxs && t.hasOwnProperty("idxs")) {
            if (!Array.isArray(t.idxs)) return "idxs: array expected";
            for (var e = 0; e < t.idxs.length; ++e) {
                var n = MS.protobuf.Gate.NaviRelationship.IndexInfo.verify(t.idxs[e]);
                if (n) return "idxs." + n;
            }
        }
        if (null != t.pts && t.hasOwnProperty("pts")) {
            if (!Array.isArray(t.pts)) return "pts: array expected";
            for (var r = 0; r < t.pts.length; ++r) if ("number" != typeof t.pts[r]) return "pts: number[] expected";
        }
        if (null != t.flag && t.hasOwnProperty("flag") && !OS.isInteger(t.flag)) return "flag: integer expected";
        if (null != t.toBid && t.hasOwnProperty("toBid")) {
            if (!Array.isArray(t.toBid)) return "toBid: array expected";
            for (var i = 0; i < t.toBid.length; ++i) if (!OS.isString(t.toBid[i])) return "toBid: string[] expected";
        }
        if (null != t.toGid && t.hasOwnProperty("toGid")) {
            if (!Array.isArray(t.toGid)) return "toGid: array expected";
            for (var o = 0; o < t.toGid.length; ++o) if (!OS.isString(t.toGid[o])) return "toGid: string[] expected";
        }
        return null;
    }, NS.fromObject = function(t) {
        if (t instanceof MS.protobuf.Gate.NaviRelationship) return t;
        var e = new MS.protobuf.Gate.NaviRelationship();
        if (null != t.eid && (e.eid = 0 | t.eid), null != t.type && (e.type = 0 | t.type), 
        null != t.accessible && (e.accessible = 0 | t.accessible), t.idxs) {
            if (!Array.isArray(t.idxs)) throw TypeError(".protobuf.Gate.NaviRelationship.idxs: array expected");
            e.idxs = [];
            for (var n = 0; n < t.idxs.length; ++n) {
                if ("object" !== SS(t.idxs[n])) throw TypeError(".protobuf.Gate.NaviRelationship.idxs: object expected");
                e.idxs[n] = MS.protobuf.Gate.NaviRelationship.IndexInfo.fromObject(t.idxs[n]);
            }
        }
        if (t.pts) {
            if (!Array.isArray(t.pts)) throw TypeError(".protobuf.Gate.NaviRelationship.pts: array expected");
            e.pts = [];
            for (var r = 0; r < t.pts.length; ++r) e.pts[r] = Number(t.pts[r]);
        }
        if (null != t.flag && (e.flag = 0 | t.flag), t.toBid) {
            if (!Array.isArray(t.toBid)) throw TypeError(".protobuf.Gate.NaviRelationship.toBid: array expected");
            e.toBid = [];
            for (var i = 0; i < t.toBid.length; ++i) e.toBid[i] = String(t.toBid[i]);
        }
        if (t.toGid) {
            if (!Array.isArray(t.toGid)) throw TypeError(".protobuf.Gate.NaviRelationship.toGid: array expected");
            e.toGid = [];
            for (var o = 0; o < t.toGid.length; ++o) e.toGid[o] = String(t.toGid[o]);
        }
        return e;
    }, NS.toObject = function(t, e) {
        var n = {};
        if (((e = e || {}).arrays || e.defaults) && (n.idxs = [], n.pts = [], n.toBid = [], 
        n.toGid = []), e.defaults && (n.eid = 0, n.type = 0, n.accessible = 0, n.flag = 0), 
        null != t.eid && t.hasOwnProperty("eid") && (n.eid = t.eid), null != t.type && t.hasOwnProperty("type") && (n.type = t.type), 
        null != t.accessible && t.hasOwnProperty("accessible") && (n.accessible = t.accessible), 
        t.idxs && t.idxs.length) {
            n.idxs = [];
            for (var r = 0; r < t.idxs.length; ++r) n.idxs[r] = MS.protobuf.Gate.NaviRelationship.IndexInfo.toObject(t.idxs[r], e);
        }
        if (t.pts && t.pts.length) {
            n.pts = [];
            for (var i = 0; i < t.pts.length; ++i) n.pts[i] = e.json && !isFinite(t.pts[i]) ? String(t.pts[i]) : t.pts[i];
        }
        if (null != t.flag && t.hasOwnProperty("flag") && (n.flag = t.flag), t.toBid && t.toBid.length) {
            n.toBid = [];
            for (var o = 0; o < t.toBid.length; ++o) n.toBid[o] = t.toBid[o];
        }
        if (t.toGid && t.toGid.length) {
            n.toGid = [];
            for (var a = 0; a < t.toGid.length; ++a) n.toGid[a] = t.toGid[a];
        }
        return n;
    }, NS.prototype.toJSON = function() {
        return this.constructor.toObject(this, wS.util.toJSONOptions);
    }, NS.IndexInfo = (FS.prototype.idxs = OS.emptyArray, FS.create = function(t) {
        return new FS(t);
    }, FS.encode = function(t, e) {
        if (e = e || ES.create(), null != t.idxs && t.idxs.length) for (var n = 0; n < t.idxs.length; ++n) e.uint32(8).int32(t.idxs[n]);
        return e;
    }, FS.encodeDelimited = function(t, e) {
        return this.encode(t, e).ldelim();
    }, FS.decode = function(t, e) {
        t instanceof _S || (t = _S.create(t));
        for (var n = void 0 === e ? t.len : t.pos + e, r = new MS.protobuf.Gate.NaviRelationship.IndexInfo(); t.pos < n; ) {
            var i = t.uint32();
            if (i >>> 3 == 1) if (r.idxs && r.idxs.length || (r.idxs = []), 2 == (7 & i)) for (var o = t.uint32() + t.pos; t.pos < o; ) r.idxs.push(t.int32()); else r.idxs.push(t.int32()); else t.skipType(7 & i);
        }
        return r;
    }, FS.decodeDelimited = function(t) {
        return t instanceof _S || (t = new _S(t)), this.decode(t, t.uint32());
    }, FS.verify = function(t) {
        if ("object" !== SS(t) || null === t) return "object expected";
        if (null != t.idxs && t.hasOwnProperty("idxs")) {
            if (!Array.isArray(t.idxs)) return "idxs: array expected";
            for (var e = 0; e < t.idxs.length; ++e) if (!OS.isInteger(t.idxs[e])) return "idxs: integer[] expected";
        }
        return null;
    }, FS.fromObject = function(t) {
        if (t instanceof MS.protobuf.Gate.NaviRelationship.IndexInfo) return t;
        var e = new MS.protobuf.Gate.NaviRelationship.IndexInfo();
        if (t.idxs) {
            if (!Array.isArray(t.idxs)) throw TypeError(".protobuf.Gate.NaviRelationship.IndexInfo.idxs: array expected");
            e.idxs = [];
            for (var n = 0; n < t.idxs.length; ++n) e.idxs[n] = 0 | t.idxs[n];
        }
        return e;
    }, FS.toObject = function(t, e) {
        var n = {};
        if (((e = e || {}).arrays || e.defaults) && (n.idxs = []), t.idxs && t.idxs.length) {
            n.idxs = [];
            for (var r = 0; r < t.idxs.length; ++r) n.idxs[r] = t.idxs[r];
        }
        return n;
    }, FS.prototype.toJSON = function() {
        return this.constructor.toObject(this, wS.util.toJSONOptions);
    }, FS), NS), kS), gy.FloorGeo = (BS.prototype.mid = "", BS.prototype.gid = 0, BS.prototype.height = 0, 
    BS.prototype.extentLayer = OS.emptyArray, BS.prototype.modelLayer = OS.emptyArray, 
    BS.prototype.labelLayer = OS.emptyArray, BS.prototype.poiLayer = OS.emptyArray, 
    BS.prototype.polygonLayer = OS.emptyArray, BS.prototype.polygonLabelLayer = OS.emptyArray, 
    BS.prototype.liftLayer = OS.emptyArray, BS.prototype.stairLayer = OS.emptyArray, 
    BS.prototype.escalatorLayer = OS.emptyArray, BS.prototype.externalModelLayer = OS.emptyArray, 
    BS.create = function(t) {
        return new BS(t);
    }, BS.encode = function(t, e) {
        if ((e = e || ES.create()).uint32(10).string(t.mid), e.uint32(16).int32(t.gid), 
        null != t.height && Object.hasOwnProperty.call(t, "height") && e.uint32(29).float(t.height), 
        null != t.extentLayer && t.extentLayer.length) for (var n = 0; n < t.extentLayer.length; ++n) MS.protobuf.FloorGeo.GeneralGeoInfo.encode(t.extentLayer[n], e.uint32(34).fork()).ldelim();
        if (null != t.modelLayer && t.modelLayer.length) for (var r = 0; r < t.modelLayer.length; ++r) MS.protobuf.FloorGeo.GeneralGeoInfo.encode(t.modelLayer[r], e.uint32(42).fork()).ldelim();
        if (null != t.labelLayer && t.labelLayer.length) for (var i = 0; i < t.labelLayer.length; ++i) MS.protobuf.FloorGeo.GeneralGeoInfo.encode(t.labelLayer[i], e.uint32(50).fork()).ldelim();
        if (null != t.poiLayer && t.poiLayer.length) for (var o = 0; o < t.poiLayer.length; ++o) MS.protobuf.FloorGeo.GeneralGeoInfo.encode(t.poiLayer[o], e.uint32(58).fork()).ldelim();
        if (null != t.polygonLayer && t.polygonLayer.length) for (var a = 0; a < t.polygonLayer.length; ++a) MS.protobuf.FloorGeo.GeneralGeoInfo.encode(t.polygonLayer[a], e.uint32(66).fork()).ldelim();
        if (null != t.polygonLabelLayer && t.polygonLabelLayer.length) for (var s = 0; s < t.polygonLabelLayer.length; ++s) MS.protobuf.FloorGeo.GeneralGeoInfo.encode(t.polygonLabelLayer[s], e.uint32(74).fork()).ldelim();
        if (null != t.liftLayer && t.liftLayer.length) for (var l = 0; l < t.liftLayer.length; ++l) MS.protobuf.FloorGeo.GeneralGeoInfo.encode(t.liftLayer[l], e.uint32(82).fork()).ldelim();
        if (null != t.stairLayer && t.stairLayer.length) for (var u = 0; u < t.stairLayer.length; ++u) MS.protobuf.FloorGeo.GeneralGeoInfo.encode(t.stairLayer[u], e.uint32(90).fork()).ldelim();
        if (null != t.escalatorLayer && t.escalatorLayer.length) for (var c = 0; c < t.escalatorLayer.length; ++c) MS.protobuf.FloorGeo.GeneralGeoInfo.encode(t.escalatorLayer[c], e.uint32(98).fork()).ldelim();
        if (null != t.externalModelLayer && t.externalModelLayer.length) for (var h = 0; h < t.externalModelLayer.length; ++h) MS.protobuf.FloorGeo.GeneralGeoInfo.encode(t.externalModelLayer[h], e.uint32(106).fork()).ldelim();
        return e;
    }, BS.encodeDelimited = function(t, e) {
        return this.encode(t, e).ldelim();
    }, BS.decode = function(t, e) {
        t instanceof _S || (t = _S.create(t));
        for (var n = void 0 === e ? t.len : t.pos + e, r = new MS.protobuf.FloorGeo(); t.pos < n; ) {
            var i = t.uint32();
            switch (i >>> 3) {
              case 1:
                r.mid = t.string();
                break;

              case 2:
                r.gid = t.int32();
                break;

              case 3:
                r.height = t.float();
                break;

              case 4:
                r.extentLayer && r.extentLayer.length || (r.extentLayer = []), r.extentLayer.push(MS.protobuf.FloorGeo.GeneralGeoInfo.decode(t, t.uint32()));
                break;

              case 5:
                r.modelLayer && r.modelLayer.length || (r.modelLayer = []), r.modelLayer.push(MS.protobuf.FloorGeo.GeneralGeoInfo.decode(t, t.uint32()));
                break;

              case 6:
                r.labelLayer && r.labelLayer.length || (r.labelLayer = []), r.labelLayer.push(MS.protobuf.FloorGeo.GeneralGeoInfo.decode(t, t.uint32()));
                break;

              case 7:
                r.poiLayer && r.poiLayer.length || (r.poiLayer = []), r.poiLayer.push(MS.protobuf.FloorGeo.GeneralGeoInfo.decode(t, t.uint32()));
                break;

              case 8:
                r.polygonLayer && r.polygonLayer.length || (r.polygonLayer = []), r.polygonLayer.push(MS.protobuf.FloorGeo.GeneralGeoInfo.decode(t, t.uint32()));
                break;

              case 9:
                r.polygonLabelLayer && r.polygonLabelLayer.length || (r.polygonLabelLayer = []), 
                r.polygonLabelLayer.push(MS.protobuf.FloorGeo.GeneralGeoInfo.decode(t, t.uint32()));
                break;

              case 10:
                r.liftLayer && r.liftLayer.length || (r.liftLayer = []), r.liftLayer.push(MS.protobuf.FloorGeo.GeneralGeoInfo.decode(t, t.uint32()));
                break;

              case 11:
                r.stairLayer && r.stairLayer.length || (r.stairLayer = []), r.stairLayer.push(MS.protobuf.FloorGeo.GeneralGeoInfo.decode(t, t.uint32()));
                break;

              case 12:
                r.escalatorLayer && r.escalatorLayer.length || (r.escalatorLayer = []), r.escalatorLayer.push(MS.protobuf.FloorGeo.GeneralGeoInfo.decode(t, t.uint32()));
                break;

              case 13:
                r.externalModelLayer && r.externalModelLayer.length || (r.externalModelLayer = []), 
                r.externalModelLayer.push(MS.protobuf.FloorGeo.GeneralGeoInfo.decode(t, t.uint32()));
                break;

              default:
                t.skipType(7 & i);
            }
        }
        if (!r.hasOwnProperty("mid")) throw OS.ProtocolError("missing required 'mid'", {
            instance: r
        });
        if (r.hasOwnProperty("gid")) return r;
        throw OS.ProtocolError("missing required 'gid'", {
            instance: r
        });
    }, BS.decodeDelimited = function(t) {
        return t instanceof _S || (t = new _S(t)), this.decode(t, t.uint32());
    }, BS.verify = function(t) {
        if ("object" !== SS(t) || null === t) return "object expected";
        if (!OS.isString(t.mid)) return "mid: string expected";
        if (!OS.isInteger(t.gid)) return "gid: integer expected";
        if (null != t.height && t.hasOwnProperty("height") && "number" != typeof t.height) return "height: number expected";
        if (null != t.extentLayer && t.hasOwnProperty("extentLayer")) {
            if (!Array.isArray(t.extentLayer)) return "extentLayer: array expected";
            for (var e = 0; e < t.extentLayer.length; ++e) {
                var n = MS.protobuf.FloorGeo.GeneralGeoInfo.verify(t.extentLayer[e]);
                if (n) return "extentLayer." + n;
            }
        }
        if (null != t.modelLayer && t.hasOwnProperty("modelLayer")) {
            if (!Array.isArray(t.modelLayer)) return "modelLayer: array expected";
            for (var r = 0; r < t.modelLayer.length; ++r) {
                var i = MS.protobuf.FloorGeo.GeneralGeoInfo.verify(t.modelLayer[r]);
                if (i) return "modelLayer." + i;
            }
        }
        if (null != t.labelLayer && t.hasOwnProperty("labelLayer")) {
            if (!Array.isArray(t.labelLayer)) return "labelLayer: array expected";
            for (var o = 0; o < t.labelLayer.length; ++o) {
                var a = MS.protobuf.FloorGeo.GeneralGeoInfo.verify(t.labelLayer[o]);
                if (a) return "labelLayer." + a;
            }
        }
        if (null != t.poiLayer && t.hasOwnProperty("poiLayer")) {
            if (!Array.isArray(t.poiLayer)) return "poiLayer: array expected";
            for (var s = 0; s < t.poiLayer.length; ++s) {
                var l = MS.protobuf.FloorGeo.GeneralGeoInfo.verify(t.poiLayer[s]);
                if (l) return "poiLayer." + l;
            }
        }
        if (null != t.polygonLayer && t.hasOwnProperty("polygonLayer")) {
            if (!Array.isArray(t.polygonLayer)) return "polygonLayer: array expected";
            for (var u = 0; u < t.polygonLayer.length; ++u) {
                var c = MS.protobuf.FloorGeo.GeneralGeoInfo.verify(t.polygonLayer[u]);
                if (c) return "polygonLayer." + c;
            }
        }
        if (null != t.polygonLabelLayer && t.hasOwnProperty("polygonLabelLayer")) {
            if (!Array.isArray(t.polygonLabelLayer)) return "polygonLabelLayer: array expected";
            for (var h = 0; h < t.polygonLabelLayer.length; ++h) {
                var f = MS.protobuf.FloorGeo.GeneralGeoInfo.verify(t.polygonLabelLayer[h]);
                if (f) return "polygonLabelLayer." + f;
            }
        }
        if (null != t.liftLayer && t.hasOwnProperty("liftLayer")) {
            if (!Array.isArray(t.liftLayer)) return "liftLayer: array expected";
            for (var p = 0; p < t.liftLayer.length; ++p) {
                var d = MS.protobuf.FloorGeo.GeneralGeoInfo.verify(t.liftLayer[p]);
                if (d) return "liftLayer." + d;
            }
        }
        if (null != t.stairLayer && t.hasOwnProperty("stairLayer")) {
            if (!Array.isArray(t.stairLayer)) return "stairLayer: array expected";
            for (var y = 0; y < t.stairLayer.length; ++y) {
                var m = MS.protobuf.FloorGeo.GeneralGeoInfo.verify(t.stairLayer[y]);
                if (m) return "stairLayer." + m;
            }
        }
        if (null != t.escalatorLayer && t.hasOwnProperty("escalatorLayer")) {
            if (!Array.isArray(t.escalatorLayer)) return "escalatorLayer: array expected";
            for (var v = 0; v < t.escalatorLayer.length; ++v) {
                var g = MS.protobuf.FloorGeo.GeneralGeoInfo.verify(t.escalatorLayer[v]);
                if (g) return "escalatorLayer." + g;
            }
        }
        if (null != t.externalModelLayer && t.hasOwnProperty("externalModelLayer")) {
            if (!Array.isArray(t.externalModelLayer)) return "externalModelLayer: array expected";
            for (var b = 0; b < t.externalModelLayer.length; ++b) {
                var x = MS.protobuf.FloorGeo.GeneralGeoInfo.verify(t.externalModelLayer[b]);
                if (x) return "externalModelLayer." + x;
            }
        }
        return null;
    }, BS.fromObject = function(t) {
        if (t instanceof MS.protobuf.FloorGeo) return t;
        var e = new MS.protobuf.FloorGeo();
        if (null != t.mid && (e.mid = String(t.mid)), null != t.gid && (e.gid = 0 | t.gid), 
        null != t.height && (e.height = Number(t.height)), t.extentLayer) {
            if (!Array.isArray(t.extentLayer)) throw TypeError(".protobuf.FloorGeo.extentLayer: array expected");
            e.extentLayer = [];
            for (var n = 0; n < t.extentLayer.length; ++n) {
                if ("object" !== SS(t.extentLayer[n])) throw TypeError(".protobuf.FloorGeo.extentLayer: object expected");
                e.extentLayer[n] = MS.protobuf.FloorGeo.GeneralGeoInfo.fromObject(t.extentLayer[n]);
            }
        }
        if (t.modelLayer) {
            if (!Array.isArray(t.modelLayer)) throw TypeError(".protobuf.FloorGeo.modelLayer: array expected");
            e.modelLayer = [];
            for (var r = 0; r < t.modelLayer.length; ++r) {
                if ("object" !== SS(t.modelLayer[r])) throw TypeError(".protobuf.FloorGeo.modelLayer: object expected");
                e.modelLayer[r] = MS.protobuf.FloorGeo.GeneralGeoInfo.fromObject(t.modelLayer[r]);
            }
        }
        if (t.labelLayer) {
            if (!Array.isArray(t.labelLayer)) throw TypeError(".protobuf.FloorGeo.labelLayer: array expected");
            e.labelLayer = [];
            for (var i = 0; i < t.labelLayer.length; ++i) {
                if ("object" !== SS(t.labelLayer[i])) throw TypeError(".protobuf.FloorGeo.labelLayer: object expected");
                e.labelLayer[i] = MS.protobuf.FloorGeo.GeneralGeoInfo.fromObject(t.labelLayer[i]);
            }
        }
        if (t.poiLayer) {
            if (!Array.isArray(t.poiLayer)) throw TypeError(".protobuf.FloorGeo.poiLayer: array expected");
            e.poiLayer = [];
            for (var o = 0; o < t.poiLayer.length; ++o) {
                if ("object" !== SS(t.poiLayer[o])) throw TypeError(".protobuf.FloorGeo.poiLayer: object expected");
                e.poiLayer[o] = MS.protobuf.FloorGeo.GeneralGeoInfo.fromObject(t.poiLayer[o]);
            }
        }
        if (t.polygonLayer) {
            if (!Array.isArray(t.polygonLayer)) throw TypeError(".protobuf.FloorGeo.polygonLayer: array expected");
            e.polygonLayer = [];
            for (var a = 0; a < t.polygonLayer.length; ++a) {
                if ("object" !== SS(t.polygonLayer[a])) throw TypeError(".protobuf.FloorGeo.polygonLayer: object expected");
                e.polygonLayer[a] = MS.protobuf.FloorGeo.GeneralGeoInfo.fromObject(t.polygonLayer[a]);
            }
        }
        if (t.polygonLabelLayer) {
            if (!Array.isArray(t.polygonLabelLayer)) throw TypeError(".protobuf.FloorGeo.polygonLabelLayer: array expected");
            e.polygonLabelLayer = [];
            for (var s = 0; s < t.polygonLabelLayer.length; ++s) {
                if ("object" !== SS(t.polygonLabelLayer[s])) throw TypeError(".protobuf.FloorGeo.polygonLabelLayer: object expected");
                e.polygonLabelLayer[s] = MS.protobuf.FloorGeo.GeneralGeoInfo.fromObject(t.polygonLabelLayer[s]);
            }
        }
        if (t.liftLayer) {
            if (!Array.isArray(t.liftLayer)) throw TypeError(".protobuf.FloorGeo.liftLayer: array expected");
            e.liftLayer = [];
            for (var l = 0; l < t.liftLayer.length; ++l) {
                if ("object" !== SS(t.liftLayer[l])) throw TypeError(".protobuf.FloorGeo.liftLayer: object expected");
                e.liftLayer[l] = MS.protobuf.FloorGeo.GeneralGeoInfo.fromObject(t.liftLayer[l]);
            }
        }
        if (t.stairLayer) {
            if (!Array.isArray(t.stairLayer)) throw TypeError(".protobuf.FloorGeo.stairLayer: array expected");
            e.stairLayer = [];
            for (var u = 0; u < t.stairLayer.length; ++u) {
                if ("object" !== SS(t.stairLayer[u])) throw TypeError(".protobuf.FloorGeo.stairLayer: object expected");
                e.stairLayer[u] = MS.protobuf.FloorGeo.GeneralGeoInfo.fromObject(t.stairLayer[u]);
            }
        }
        if (t.escalatorLayer) {
            if (!Array.isArray(t.escalatorLayer)) throw TypeError(".protobuf.FloorGeo.escalatorLayer: array expected");
            e.escalatorLayer = [];
            for (var c = 0; c < t.escalatorLayer.length; ++c) {
                if ("object" !== SS(t.escalatorLayer[c])) throw TypeError(".protobuf.FloorGeo.escalatorLayer: object expected");
                e.escalatorLayer[c] = MS.protobuf.FloorGeo.GeneralGeoInfo.fromObject(t.escalatorLayer[c]);
            }
        }
        if (t.externalModelLayer) {
            if (!Array.isArray(t.externalModelLayer)) throw TypeError(".protobuf.FloorGeo.externalModelLayer: array expected");
            e.externalModelLayer = [];
            for (var h = 0; h < t.externalModelLayer.length; ++h) {
                if ("object" !== SS(t.externalModelLayer[h])) throw TypeError(".protobuf.FloorGeo.externalModelLayer: object expected");
                e.externalModelLayer[h] = MS.protobuf.FloorGeo.GeneralGeoInfo.fromObject(t.externalModelLayer[h]);
            }
        }
        return e;
    }, BS.toObject = function(t, e) {
        var n = {};
        if (((e = e || {}).arrays || e.defaults) && (n.extentLayer = [], n.modelLayer = [], 
        n.labelLayer = [], n.poiLayer = [], n.polygonLayer = [], n.polygonLabelLayer = [], 
        n.liftLayer = [], n.stairLayer = [], n.escalatorLayer = [], n.externalModelLayer = []), 
        e.defaults && (n.mid = "", n.gid = 0, n.height = 0), null != t.mid && t.hasOwnProperty("mid") && (n.mid = t.mid), 
        null != t.gid && t.hasOwnProperty("gid") && (n.gid = t.gid), null != t.height && t.hasOwnProperty("height") && (n.height = e.json && !isFinite(t.height) ? String(t.height) : t.height), 
        t.extentLayer && t.extentLayer.length) {
            n.extentLayer = [];
            for (var r = 0; r < t.extentLayer.length; ++r) n.extentLayer[r] = MS.protobuf.FloorGeo.GeneralGeoInfo.toObject(t.extentLayer[r], e);
        }
        if (t.modelLayer && t.modelLayer.length) {
            n.modelLayer = [];
            for (var i = 0; i < t.modelLayer.length; ++i) n.modelLayer[i] = MS.protobuf.FloorGeo.GeneralGeoInfo.toObject(t.modelLayer[i], e);
        }
        if (t.labelLayer && t.labelLayer.length) {
            n.labelLayer = [];
            for (var o = 0; o < t.labelLayer.length; ++o) n.labelLayer[o] = MS.protobuf.FloorGeo.GeneralGeoInfo.toObject(t.labelLayer[o], e);
        }
        if (t.poiLayer && t.poiLayer.length) {
            n.poiLayer = [];
            for (var a = 0; a < t.poiLayer.length; ++a) n.poiLayer[a] = MS.protobuf.FloorGeo.GeneralGeoInfo.toObject(t.poiLayer[a], e);
        }
        if (t.polygonLayer && t.polygonLayer.length) {
            n.polygonLayer = [];
            for (var s = 0; s < t.polygonLayer.length; ++s) n.polygonLayer[s] = MS.protobuf.FloorGeo.GeneralGeoInfo.toObject(t.polygonLayer[s], e);
        }
        if (t.polygonLabelLayer && t.polygonLabelLayer.length) {
            n.polygonLabelLayer = [];
            for (var l = 0; l < t.polygonLabelLayer.length; ++l) n.polygonLabelLayer[l] = MS.protobuf.FloorGeo.GeneralGeoInfo.toObject(t.polygonLabelLayer[l], e);
        }
        if (t.liftLayer && t.liftLayer.length) {
            n.liftLayer = [];
            for (var u = 0; u < t.liftLayer.length; ++u) n.liftLayer[u] = MS.protobuf.FloorGeo.GeneralGeoInfo.toObject(t.liftLayer[u], e);
        }
        if (t.stairLayer && t.stairLayer.length) {
            n.stairLayer = [];
            for (var c = 0; c < t.stairLayer.length; ++c) n.stairLayer[c] = MS.protobuf.FloorGeo.GeneralGeoInfo.toObject(t.stairLayer[c], e);
        }
        if (t.escalatorLayer && t.escalatorLayer.length) {
            n.escalatorLayer = [];
            for (var h = 0; h < t.escalatorLayer.length; ++h) n.escalatorLayer[h] = MS.protobuf.FloorGeo.GeneralGeoInfo.toObject(t.escalatorLayer[h], e);
        }
        if (t.externalModelLayer && t.externalModelLayer.length) {
            n.externalModelLayer = [];
            for (var f = 0; f < t.externalModelLayer.length; ++f) n.externalModelLayer[f] = MS.protobuf.FloorGeo.GeneralGeoInfo.toObject(t.externalModelLayer[f], e);
        }
        return n;
    }, BS.prototype.toJSON = function() {
        return this.constructor.toObject(this, wS.util.toJSONOptions);
    }, BS.GeneralGeoInfo = (US.prototype.eid = 0, US.prototype.geo = "", US.prototype.height = 0, 
    US.prototype.area = 0, US.prototype.idxs = OS.emptyArray, US.prototype.pts = OS.emptyArray, 
    US.create = function(t) {
        return new US(t);
    }, US.encode = function(t, e) {
        if ((e = e || ES.create()).uint32(8).int32(t.eid), null != t.geo && Object.hasOwnProperty.call(t, "geo") && e.uint32(18).string(t.geo), 
        null != t.height && Object.hasOwnProperty.call(t, "height") && e.uint32(29).float(t.height), 
        null != t.area && Object.hasOwnProperty.call(t, "area") && e.uint32(37).float(t.area), 
        null != t.idxs && t.idxs.length) for (var n = 0; n < t.idxs.length; ++n) MS.protobuf.FloorGeo.GeneralGeoInfo.IndexInfo.encode(t.idxs[n], e.uint32(42).fork()).ldelim();
        if (null != t.pts && t.pts.length) for (var r = 0; r < t.pts.length; ++r) e.uint32(49).double(t.pts[r]);
        return e;
    }, US.encodeDelimited = function(t, e) {
        return this.encode(t, e).ldelim();
    }, US.decode = function(t, e) {
        t instanceof _S || (t = _S.create(t));
        for (var n = void 0 === e ? t.len : t.pos + e, r = new MS.protobuf.FloorGeo.GeneralGeoInfo(); t.pos < n; ) {
            var i = t.uint32();
            switch (i >>> 3) {
              case 1:
                r.eid = t.int32();
                break;

              case 2:
                r.geo = t.string();
                break;

              case 3:
                r.height = t.float();
                break;

              case 4:
                r.area = t.float();
                break;

              case 5:
                r.idxs && r.idxs.length || (r.idxs = []), r.idxs.push(MS.protobuf.FloorGeo.GeneralGeoInfo.IndexInfo.decode(t, t.uint32()));
                break;

              case 6:
                if (r.pts && r.pts.length || (r.pts = []), 2 == (7 & i)) for (var o = t.uint32() + t.pos; t.pos < o; ) r.pts.push(t.double()); else r.pts.push(t.double());
                break;

              default:
                t.skipType(7 & i);
            }
        }
        if (r.hasOwnProperty("eid")) return r;
        throw OS.ProtocolError("missing required 'eid'", {
            instance: r
        });
    }, US.decodeDelimited = function(t) {
        return t instanceof _S || (t = new _S(t)), this.decode(t, t.uint32());
    }, US.verify = function(t) {
        if ("object" !== SS(t) || null === t) return "object expected";
        if (!OS.isInteger(t.eid)) return "eid: integer expected";
        if (null != t.geo && t.hasOwnProperty("geo") && !OS.isString(t.geo)) return "geo: string expected";
        if (null != t.height && t.hasOwnProperty("height") && "number" != typeof t.height) return "height: number expected";
        if (null != t.area && t.hasOwnProperty("area") && "number" != typeof t.area) return "area: number expected";
        if (null != t.idxs && t.hasOwnProperty("idxs")) {
            if (!Array.isArray(t.idxs)) return "idxs: array expected";
            for (var e = 0; e < t.idxs.length; ++e) {
                var n = MS.protobuf.FloorGeo.GeneralGeoInfo.IndexInfo.verify(t.idxs[e]);
                if (n) return "idxs." + n;
            }
        }
        if (null != t.pts && t.hasOwnProperty("pts")) {
            if (!Array.isArray(t.pts)) return "pts: array expected";
            for (var r = 0; r < t.pts.length; ++r) if ("number" != typeof t.pts[r]) return "pts: number[] expected";
        }
        return null;
    }, US.fromObject = function(t) {
        if (t instanceof MS.protobuf.FloorGeo.GeneralGeoInfo) return t;
        var e = new MS.protobuf.FloorGeo.GeneralGeoInfo();
        if (null != t.eid && (e.eid = 0 | t.eid), null != t.geo && (e.geo = String(t.geo)), 
        null != t.height && (e.height = Number(t.height)), null != t.area && (e.area = Number(t.area)), 
        t.idxs) {
            if (!Array.isArray(t.idxs)) throw TypeError(".protobuf.FloorGeo.GeneralGeoInfo.idxs: array expected");
            e.idxs = [];
            for (var n = 0; n < t.idxs.length; ++n) {
                if ("object" !== SS(t.idxs[n])) throw TypeError(".protobuf.FloorGeo.GeneralGeoInfo.idxs: object expected");
                e.idxs[n] = MS.protobuf.FloorGeo.GeneralGeoInfo.IndexInfo.fromObject(t.idxs[n]);
            }
        }
        if (t.pts) {
            if (!Array.isArray(t.pts)) throw TypeError(".protobuf.FloorGeo.GeneralGeoInfo.pts: array expected");
            e.pts = [];
            for (var r = 0; r < t.pts.length; ++r) e.pts[r] = Number(t.pts[r]);
        }
        return e;
    }, US.toObject = function(t, e) {
        var n = {};
        if (((e = e || {}).arrays || e.defaults) && (n.idxs = [], n.pts = []), e.defaults && (n.eid = 0, 
        n.geo = "", n.height = 0, n.area = 0), null != t.eid && t.hasOwnProperty("eid") && (n.eid = t.eid), 
        null != t.geo && t.hasOwnProperty("geo") && (n.geo = t.geo), null != t.height && t.hasOwnProperty("height") && (n.height = e.json && !isFinite(t.height) ? String(t.height) : t.height), 
        null != t.area && t.hasOwnProperty("area") && (n.area = e.json && !isFinite(t.area) ? String(t.area) : t.area), 
        t.idxs && t.idxs.length) {
            n.idxs = [];
            for (var r = 0; r < t.idxs.length; ++r) n.idxs[r] = MS.protobuf.FloorGeo.GeneralGeoInfo.IndexInfo.toObject(t.idxs[r], e);
        }
        if (t.pts && t.pts.length) {
            n.pts = [];
            for (var i = 0; i < t.pts.length; ++i) n.pts[i] = e.json && !isFinite(t.pts[i]) ? String(t.pts[i]) : t.pts[i];
        }
        return n;
    }, US.prototype.toJSON = function() {
        return this.constructor.toObject(this, wS.util.toJSONOptions);
    }, US.IndexInfo = (zS.prototype.idxs = OS.emptyArray, zS.create = function(t) {
        return new zS(t);
    }, zS.encode = function(t, e) {
        if (e = e || ES.create(), null != t.idxs && t.idxs.length) for (var n = 0; n < t.idxs.length; ++n) e.uint32(8).int32(t.idxs[n]);
        return e;
    }, zS.encodeDelimited = function(t, e) {
        return this.encode(t, e).ldelim();
    }, zS.decode = function(t, e) {
        t instanceof _S || (t = _S.create(t));
        for (var n = void 0 === e ? t.len : t.pos + e, r = new MS.protobuf.FloorGeo.GeneralGeoInfo.IndexInfo(); t.pos < n; ) {
            var i = t.uint32();
            if (i >>> 3 == 1) if (r.idxs && r.idxs.length || (r.idxs = []), 2 == (7 & i)) for (var o = t.uint32() + t.pos; t.pos < o; ) r.idxs.push(t.int32()); else r.idxs.push(t.int32()); else t.skipType(7 & i);
        }
        return r;
    }, zS.decodeDelimited = function(t) {
        return t instanceof _S || (t = new _S(t)), this.decode(t, t.uint32());
    }, zS.verify = function(t) {
        if ("object" !== SS(t) || null === t) return "object expected";
        if (null != t.idxs && t.hasOwnProperty("idxs")) {
            if (!Array.isArray(t.idxs)) return "idxs: array expected";
            for (var e = 0; e < t.idxs.length; ++e) if (!OS.isInteger(t.idxs[e])) return "idxs: integer[] expected";
        }
        return null;
    }, zS.fromObject = function(t) {
        if (t instanceof MS.protobuf.FloorGeo.GeneralGeoInfo.IndexInfo) return t;
        var e = new MS.protobuf.FloorGeo.GeneralGeoInfo.IndexInfo();
        if (t.idxs) {
            if (!Array.isArray(t.idxs)) throw TypeError(".protobuf.FloorGeo.GeneralGeoInfo.IndexInfo.idxs: array expected");
            e.idxs = [];
            for (var n = 0; n < t.idxs.length; ++n) e.idxs[n] = 0 | t.idxs[n];
        }
        return e;
    }, zS.toObject = function(t, e) {
        var n = {};
        if (((e = e || {}).arrays || e.defaults) && (n.idxs = []), t.idxs && t.idxs.length) {
            n.idxs = [];
            for (var r = 0; r < t.idxs.length; ++r) n.idxs[r] = t.idxs[r];
        }
        return n;
    }, zS.prototype.toJSON = function() {
        return this.constructor.toObject(this, wS.util.toJSONOptions);
    }, zS), US), BS), gy.FloorBiz = (GS.prototype.mid = "", GS.prototype.gid = 0, GS.prototype.extentLayer = OS.emptyArray, 
    GS.prototype.modelLayer = OS.emptyArray, GS.prototype.labelLayer = OS.emptyArray, 
    GS.prototype.poiLayer = OS.emptyArray, GS.prototype.polygonLayer = OS.emptyArray, 
    GS.prototype.liftLayer = OS.emptyArray, GS.prototype.stairLayer = OS.emptyArray, 
    GS.prototype.polygonLabelLayer = OS.emptyArray, GS.prototype.externalModelLayer = OS.emptyArray, 
    GS.create = function(t) {
        return new GS(t);
    }, GS.encode = function(t, e) {
        if ((e = e || ES.create()).uint32(10).string(t.mid), e.uint32(16).int32(t.gid), 
        null != t.extentLayer && t.extentLayer.length) for (var n = 0; n < t.extentLayer.length; ++n) MS.protobuf.FloorBiz.ExtentBizInfo.encode(t.extentLayer[n], e.uint32(26).fork()).ldelim();
        if (null != t.modelLayer && t.modelLayer.length) for (var r = 0; r < t.modelLayer.length; ++r) MS.protobuf.FloorBiz.ModelBizInfo.encode(t.modelLayer[r], e.uint32(34).fork()).ldelim();
        if (null != t.labelLayer && t.labelLayer.length) for (var i = 0; i < t.labelLayer.length; ++i) MS.protobuf.FloorBiz.LabelBizInfo.encode(t.labelLayer[i], e.uint32(42).fork()).ldelim();
        if (null != t.poiLayer && t.poiLayer.length) for (var o = 0; o < t.poiLayer.length; ++o) MS.protobuf.FloorBiz.POIBizInfo.encode(t.poiLayer[o], e.uint32(50).fork()).ldelim();
        if (null != t.polygonLayer && t.polygonLayer.length) for (var a = 0; a < t.polygonLayer.length; ++a) MS.protobuf.FloorBiz.PolygonBizInfo.encode(t.polygonLayer[a], e.uint32(58).fork()).ldelim();
        if (null != t.liftLayer && t.liftLayer.length) for (var s = 0; s < t.liftLayer.length; ++s) MS.protobuf.FloorBiz.LiftBizInfo.encode(t.liftLayer[s], e.uint32(66).fork()).ldelim();
        if (null != t.stairLayer && t.stairLayer.length) for (var l = 0; l < t.stairLayer.length; ++l) MS.protobuf.FloorBiz.StairBizInfo.encode(t.stairLayer[l], e.uint32(74).fork()).ldelim();
        if (null != t.polygonLabelLayer && t.polygonLabelLayer.length) for (var u = 0; u < t.polygonLabelLayer.length; ++u) MS.protobuf.FloorBiz.PolygonLabelBizInfo.encode(t.polygonLabelLayer[u], e.uint32(82).fork()).ldelim();
        if (null != t.externalModelLayer && t.externalModelLayer.length) for (var c = 0; c < t.externalModelLayer.length; ++c) MS.protobuf.FloorBiz.ExternalModelBizInfo.encode(t.externalModelLayer[c], e.uint32(90).fork()).ldelim();
        return e;
    }, GS.encodeDelimited = function(t, e) {
        return this.encode(t, e).ldelim();
    }, GS.decode = function(t, e) {
        t instanceof _S || (t = _S.create(t));
        for (var n = void 0 === e ? t.len : t.pos + e, r = new MS.protobuf.FloorBiz(); t.pos < n; ) {
            var i = t.uint32();
            switch (i >>> 3) {
              case 1:
                r.mid = t.string();
                break;

              case 2:
                r.gid = t.int32();
                break;

              case 3:
                r.extentLayer && r.extentLayer.length || (r.extentLayer = []), r.extentLayer.push(MS.protobuf.FloorBiz.ExtentBizInfo.decode(t, t.uint32()));
                break;

              case 4:
                r.modelLayer && r.modelLayer.length || (r.modelLayer = []), r.modelLayer.push(MS.protobuf.FloorBiz.ModelBizInfo.decode(t, t.uint32()));
                break;

              case 5:
                r.labelLayer && r.labelLayer.length || (r.labelLayer = []), r.labelLayer.push(MS.protobuf.FloorBiz.LabelBizInfo.decode(t, t.uint32()));
                break;

              case 6:
                r.poiLayer && r.poiLayer.length || (r.poiLayer = []), r.poiLayer.push(MS.protobuf.FloorBiz.POIBizInfo.decode(t, t.uint32()));
                break;

              case 7:
                r.polygonLayer && r.polygonLayer.length || (r.polygonLayer = []), r.polygonLayer.push(MS.protobuf.FloorBiz.PolygonBizInfo.decode(t, t.uint32()));
                break;

              case 8:
                r.liftLayer && r.liftLayer.length || (r.liftLayer = []), r.liftLayer.push(MS.protobuf.FloorBiz.LiftBizInfo.decode(t, t.uint32()));
                break;

              case 9:
                r.stairLayer && r.stairLayer.length || (r.stairLayer = []), r.stairLayer.push(MS.protobuf.FloorBiz.StairBizInfo.decode(t, t.uint32()));
                break;

              case 10:
                r.polygonLabelLayer && r.polygonLabelLayer.length || (r.polygonLabelLayer = []), 
                r.polygonLabelLayer.push(MS.protobuf.FloorBiz.PolygonLabelBizInfo.decode(t, t.uint32()));
                break;

              case 11:
                r.externalModelLayer && r.externalModelLayer.length || (r.externalModelLayer = []), 
                r.externalModelLayer.push(MS.protobuf.FloorBiz.ExternalModelBizInfo.decode(t, t.uint32()));
                break;

              default:
                t.skipType(7 & i);
            }
        }
        if (!r.hasOwnProperty("mid")) throw OS.ProtocolError("missing required 'mid'", {
            instance: r
        });
        if (r.hasOwnProperty("gid")) return r;
        throw OS.ProtocolError("missing required 'gid'", {
            instance: r
        });
    }, GS.decodeDelimited = function(t) {
        return t instanceof _S || (t = new _S(t)), this.decode(t, t.uint32());
    }, GS.verify = function(t) {
        if ("object" !== SS(t) || null === t) return "object expected";
        if (!OS.isString(t.mid)) return "mid: string expected";
        if (!OS.isInteger(t.gid)) return "gid: integer expected";
        if (null != t.extentLayer && t.hasOwnProperty("extentLayer")) {
            if (!Array.isArray(t.extentLayer)) return "extentLayer: array expected";
            for (var e = 0; e < t.extentLayer.length; ++e) {
                var n = MS.protobuf.FloorBiz.ExtentBizInfo.verify(t.extentLayer[e]);
                if (n) return "extentLayer." + n;
            }
        }
        if (null != t.modelLayer && t.hasOwnProperty("modelLayer")) {
            if (!Array.isArray(t.modelLayer)) return "modelLayer: array expected";
            for (var r = 0; r < t.modelLayer.length; ++r) {
                var i = MS.protobuf.FloorBiz.ModelBizInfo.verify(t.modelLayer[r]);
                if (i) return "modelLayer." + i;
            }
        }
        if (null != t.labelLayer && t.hasOwnProperty("labelLayer")) {
            if (!Array.isArray(t.labelLayer)) return "labelLayer: array expected";
            for (var o = 0; o < t.labelLayer.length; ++o) {
                var a = MS.protobuf.FloorBiz.LabelBizInfo.verify(t.labelLayer[o]);
                if (a) return "labelLayer." + a;
            }
        }
        if (null != t.poiLayer && t.hasOwnProperty("poiLayer")) {
            if (!Array.isArray(t.poiLayer)) return "poiLayer: array expected";
            for (var s = 0; s < t.poiLayer.length; ++s) {
                var l = MS.protobuf.FloorBiz.POIBizInfo.verify(t.poiLayer[s]);
                if (l) return "poiLayer." + l;
            }
        }
        if (null != t.polygonLayer && t.hasOwnProperty("polygonLayer")) {
            if (!Array.isArray(t.polygonLayer)) return "polygonLayer: array expected";
            for (var u = 0; u < t.polygonLayer.length; ++u) {
                var c = MS.protobuf.FloorBiz.PolygonBizInfo.verify(t.polygonLayer[u]);
                if (c) return "polygonLayer." + c;
            }
        }
        if (null != t.liftLayer && t.hasOwnProperty("liftLayer")) {
            if (!Array.isArray(t.liftLayer)) return "liftLayer: array expected";
            for (var h = 0; h < t.liftLayer.length; ++h) {
                var f = MS.protobuf.FloorBiz.LiftBizInfo.verify(t.liftLayer[h]);
                if (f) return "liftLayer." + f;
            }
        }
        if (null != t.stairLayer && t.hasOwnProperty("stairLayer")) {
            if (!Array.isArray(t.stairLayer)) return "stairLayer: array expected";
            for (var p = 0; p < t.stairLayer.length; ++p) {
                var d = MS.protobuf.FloorBiz.StairBizInfo.verify(t.stairLayer[p]);
                if (d) return "stairLayer." + d;
            }
        }
        if (null != t.polygonLabelLayer && t.hasOwnProperty("polygonLabelLayer")) {
            if (!Array.isArray(t.polygonLabelLayer)) return "polygonLabelLayer: array expected";
            for (var y = 0; y < t.polygonLabelLayer.length; ++y) {
                var m = MS.protobuf.FloorBiz.PolygonLabelBizInfo.verify(t.polygonLabelLayer[y]);
                if (m) return "polygonLabelLayer." + m;
            }
        }
        if (null != t.externalModelLayer && t.hasOwnProperty("externalModelLayer")) {
            if (!Array.isArray(t.externalModelLayer)) return "externalModelLayer: array expected";
            for (var v = 0; v < t.externalModelLayer.length; ++v) {
                var g = MS.protobuf.FloorBiz.ExternalModelBizInfo.verify(t.externalModelLayer[v]);
                if (g) return "externalModelLayer." + g;
            }
        }
        return null;
    }, GS.fromObject = function(t) {
        if (t instanceof MS.protobuf.FloorBiz) return t;
        var e = new MS.protobuf.FloorBiz();
        if (null != t.mid && (e.mid = String(t.mid)), null != t.gid && (e.gid = 0 | t.gid), 
        t.extentLayer) {
            if (!Array.isArray(t.extentLayer)) throw TypeError(".protobuf.FloorBiz.extentLayer: array expected");
            e.extentLayer = [];
            for (var n = 0; n < t.extentLayer.length; ++n) {
                if ("object" !== SS(t.extentLayer[n])) throw TypeError(".protobuf.FloorBiz.extentLayer: object expected");
                e.extentLayer[n] = MS.protobuf.FloorBiz.ExtentBizInfo.fromObject(t.extentLayer[n]);
            }
        }
        if (t.modelLayer) {
            if (!Array.isArray(t.modelLayer)) throw TypeError(".protobuf.FloorBiz.modelLayer: array expected");
            e.modelLayer = [];
            for (var r = 0; r < t.modelLayer.length; ++r) {
                if ("object" !== SS(t.modelLayer[r])) throw TypeError(".protobuf.FloorBiz.modelLayer: object expected");
                e.modelLayer[r] = MS.protobuf.FloorBiz.ModelBizInfo.fromObject(t.modelLayer[r]);
            }
        }
        if (t.labelLayer) {
            if (!Array.isArray(t.labelLayer)) throw TypeError(".protobuf.FloorBiz.labelLayer: array expected");
            e.labelLayer = [];
            for (var i = 0; i < t.labelLayer.length; ++i) {
                if ("object" !== SS(t.labelLayer[i])) throw TypeError(".protobuf.FloorBiz.labelLayer: object expected");
                e.labelLayer[i] = MS.protobuf.FloorBiz.LabelBizInfo.fromObject(t.labelLayer[i]);
            }
        }
        if (t.poiLayer) {
            if (!Array.isArray(t.poiLayer)) throw TypeError(".protobuf.FloorBiz.poiLayer: array expected");
            e.poiLayer = [];
            for (var o = 0; o < t.poiLayer.length; ++o) {
                if ("object" !== SS(t.poiLayer[o])) throw TypeError(".protobuf.FloorBiz.poiLayer: object expected");
                e.poiLayer[o] = MS.protobuf.FloorBiz.POIBizInfo.fromObject(t.poiLayer[o]);
            }
        }
        if (t.polygonLayer) {
            if (!Array.isArray(t.polygonLayer)) throw TypeError(".protobuf.FloorBiz.polygonLayer: array expected");
            e.polygonLayer = [];
            for (var a = 0; a < t.polygonLayer.length; ++a) {
                if ("object" !== SS(t.polygonLayer[a])) throw TypeError(".protobuf.FloorBiz.polygonLayer: object expected");
                e.polygonLayer[a] = MS.protobuf.FloorBiz.PolygonBizInfo.fromObject(t.polygonLayer[a]);
            }
        }
        if (t.liftLayer) {
            if (!Array.isArray(t.liftLayer)) throw TypeError(".protobuf.FloorBiz.liftLayer: array expected");
            e.liftLayer = [];
            for (var s = 0; s < t.liftLayer.length; ++s) {
                if ("object" !== SS(t.liftLayer[s])) throw TypeError(".protobuf.FloorBiz.liftLayer: object expected");
                e.liftLayer[s] = MS.protobuf.FloorBiz.LiftBizInfo.fromObject(t.liftLayer[s]);
            }
        }
        if (t.stairLayer) {
            if (!Array.isArray(t.stairLayer)) throw TypeError(".protobuf.FloorBiz.stairLayer: array expected");
            e.stairLayer = [];
            for (var l = 0; l < t.stairLayer.length; ++l) {
                if ("object" !== SS(t.stairLayer[l])) throw TypeError(".protobuf.FloorBiz.stairLayer: object expected");
                e.stairLayer[l] = MS.protobuf.FloorBiz.StairBizInfo.fromObject(t.stairLayer[l]);
            }
        }
        if (t.polygonLabelLayer) {
            if (!Array.isArray(t.polygonLabelLayer)) throw TypeError(".protobuf.FloorBiz.polygonLabelLayer: array expected");
            e.polygonLabelLayer = [];
            for (var u = 0; u < t.polygonLabelLayer.length; ++u) {
                if ("object" !== SS(t.polygonLabelLayer[u])) throw TypeError(".protobuf.FloorBiz.polygonLabelLayer: object expected");
                e.polygonLabelLayer[u] = MS.protobuf.FloorBiz.PolygonLabelBizInfo.fromObject(t.polygonLabelLayer[u]);
            }
        }
        if (t.externalModelLayer) {
            if (!Array.isArray(t.externalModelLayer)) throw TypeError(".protobuf.FloorBiz.externalModelLayer: array expected");
            e.externalModelLayer = [];
            for (var c = 0; c < t.externalModelLayer.length; ++c) {
                if ("object" !== SS(t.externalModelLayer[c])) throw TypeError(".protobuf.FloorBiz.externalModelLayer: object expected");
                e.externalModelLayer[c] = MS.protobuf.FloorBiz.ExternalModelBizInfo.fromObject(t.externalModelLayer[c]);
            }
        }
        return e;
    }, GS.toObject = function(t, e) {
        var n = {};
        if (((e = e || {}).arrays || e.defaults) && (n.extentLayer = [], n.modelLayer = [], 
        n.labelLayer = [], n.poiLayer = [], n.polygonLayer = [], n.liftLayer = [], n.stairLayer = [], 
        n.polygonLabelLayer = [], n.externalModelLayer = []), e.defaults && (n.mid = "", 
        n.gid = 0), null != t.mid && t.hasOwnProperty("mid") && (n.mid = t.mid), null != t.gid && t.hasOwnProperty("gid") && (n.gid = t.gid), 
        t.extentLayer && t.extentLayer.length) {
            n.extentLayer = [];
            for (var r = 0; r < t.extentLayer.length; ++r) n.extentLayer[r] = MS.protobuf.FloorBiz.ExtentBizInfo.toObject(t.extentLayer[r], e);
        }
        if (t.modelLayer && t.modelLayer.length) {
            n.modelLayer = [];
            for (var i = 0; i < t.modelLayer.length; ++i) n.modelLayer[i] = MS.protobuf.FloorBiz.ModelBizInfo.toObject(t.modelLayer[i], e);
        }
        if (t.labelLayer && t.labelLayer.length) {
            n.labelLayer = [];
            for (var o = 0; o < t.labelLayer.length; ++o) n.labelLayer[o] = MS.protobuf.FloorBiz.LabelBizInfo.toObject(t.labelLayer[o], e);
        }
        if (t.poiLayer && t.poiLayer.length) {
            n.poiLayer = [];
            for (var a = 0; a < t.poiLayer.length; ++a) n.poiLayer[a] = MS.protobuf.FloorBiz.POIBizInfo.toObject(t.poiLayer[a], e);
        }
        if (t.polygonLayer && t.polygonLayer.length) {
            n.polygonLayer = [];
            for (var s = 0; s < t.polygonLayer.length; ++s) n.polygonLayer[s] = MS.protobuf.FloorBiz.PolygonBizInfo.toObject(t.polygonLayer[s], e);
        }
        if (t.liftLayer && t.liftLayer.length) {
            n.liftLayer = [];
            for (var l = 0; l < t.liftLayer.length; ++l) n.liftLayer[l] = MS.protobuf.FloorBiz.LiftBizInfo.toObject(t.liftLayer[l], e);
        }
        if (t.stairLayer && t.stairLayer.length) {
            n.stairLayer = [];
            for (var u = 0; u < t.stairLayer.length; ++u) n.stairLayer[u] = MS.protobuf.FloorBiz.StairBizInfo.toObject(t.stairLayer[u], e);
        }
        if (t.polygonLabelLayer && t.polygonLabelLayer.length) {
            n.polygonLabelLayer = [];
            for (var c = 0; c < t.polygonLabelLayer.length; ++c) n.polygonLabelLayer[c] = MS.protobuf.FloorBiz.PolygonLabelBizInfo.toObject(t.polygonLabelLayer[c], e);
        }
        if (t.externalModelLayer && t.externalModelLayer.length) {
            n.externalModelLayer = [];
            for (var h = 0; h < t.externalModelLayer.length; ++h) n.externalModelLayer[h] = MS.protobuf.FloorBiz.ExternalModelBizInfo.toObject(t.externalModelLayer[h], e);
        }
        return n;
    }, GS.prototype.toJSON = function() {
        return this.constructor.toObject(this, wS.util.toJSONOptions);
    }, GS.ExtentBizInfo = (HS.prototype.eid = 0, HS.prototype.fid = "", HS.prototype.type = 0, 
    HS.prototype.name = "", HS.prototype.ename = "", HS.prototype.minlevel = 0, HS.prototype.maxlevel = 0, 
    HS.create = function(t) {
        return new HS(t);
    }, HS.encode = function(t, e) {
        return (e = e || ES.create()).uint32(8).int32(t.eid), null != t.fid && Object.hasOwnProperty.call(t, "fid") && e.uint32(18).string(t.fid), 
        null != t.type && Object.hasOwnProperty.call(t, "type") && e.uint32(24).int32(t.type), 
        null != t.name && Object.hasOwnProperty.call(t, "name") && e.uint32(34).string(t.name), 
        null != t.ename && Object.hasOwnProperty.call(t, "ename") && e.uint32(42).string(t.ename), 
        null != t.minlevel && Object.hasOwnProperty.call(t, "minlevel") && e.uint32(48).int32(t.minlevel), 
        null != t.maxlevel && Object.hasOwnProperty.call(t, "maxlevel") && e.uint32(56).int32(t.maxlevel), 
        e;
    }, HS.encodeDelimited = function(t, e) {
        return this.encode(t, e).ldelim();
    }, HS.decode = function(t, e) {
        t instanceof _S || (t = _S.create(t));
        for (var n = void 0 === e ? t.len : t.pos + e, r = new MS.protobuf.FloorBiz.ExtentBizInfo(); t.pos < n; ) {
            var i = t.uint32();
            switch (i >>> 3) {
              case 1:
                r.eid = t.int32();
                break;

              case 2:
                r.fid = t.string();
                break;

              case 3:
                r.type = t.int32();
                break;

              case 4:
                r.name = t.string();
                break;

              case 5:
                r.ename = t.string();
                break;

              case 6:
                r.minlevel = t.int32();
                break;

              case 7:
                r.maxlevel = t.int32();
                break;

              default:
                t.skipType(7 & i);
            }
        }
        if (r.hasOwnProperty("eid")) return r;
        throw OS.ProtocolError("missing required 'eid'", {
            instance: r
        });
    }, HS.decodeDelimited = function(t) {
        return t instanceof _S || (t = new _S(t)), this.decode(t, t.uint32());
    }, HS.verify = function(t) {
        return "object" !== SS(t) || null === t ? "object expected" : OS.isInteger(t.eid) ? null != t.fid && t.hasOwnProperty("fid") && !OS.isString(t.fid) ? "fid: string expected" : null != t.type && t.hasOwnProperty("type") && !OS.isInteger(t.type) ? "type: integer expected" : null != t.name && t.hasOwnProperty("name") && !OS.isString(t.name) ? "name: string expected" : null != t.ename && t.hasOwnProperty("ename") && !OS.isString(t.ename) ? "ename: string expected" : null != t.minlevel && t.hasOwnProperty("minlevel") && !OS.isInteger(t.minlevel) ? "minlevel: integer expected" : null != t.maxlevel && t.hasOwnProperty("maxlevel") && !OS.isInteger(t.maxlevel) ? "maxlevel: integer expected" : null : "eid: integer expected";
    }, HS.fromObject = function(t) {
        var e;
        return t instanceof MS.protobuf.FloorBiz.ExtentBizInfo ? t : (e = new MS.protobuf.FloorBiz.ExtentBizInfo(), 
        null != t.eid && (e.eid = 0 | t.eid), null != t.fid && (e.fid = String(t.fid)), 
        null != t.type && (e.type = 0 | t.type), null != t.name && (e.name = String(t.name)), 
        null != t.ename && (e.ename = String(t.ename)), null != t.minlevel && (e.minlevel = 0 | t.minlevel), 
        null != t.maxlevel && (e.maxlevel = 0 | t.maxlevel), e);
    }, HS.toObject = function(t, e) {
        var n = {};
        return (e = e || {}).defaults && (n.eid = 0, n.fid = "", n.type = 0, n.name = "", 
        n.ename = "", n.minlevel = 0, n.maxlevel = 0), null != t.eid && t.hasOwnProperty("eid") && (n.eid = t.eid), 
        null != t.fid && t.hasOwnProperty("fid") && (n.fid = t.fid), null != t.type && t.hasOwnProperty("type") && (n.type = t.type), 
        null != t.name && t.hasOwnProperty("name") && (n.name = t.name), null != t.ename && t.hasOwnProperty("ename") && (n.ename = t.ename), 
        null != t.minlevel && t.hasOwnProperty("minlevel") && (n.minlevel = t.minlevel), 
        null != t.maxlevel && t.hasOwnProperty("maxlevel") && (n.maxlevel = t.maxlevel), 
        n;
    }, HS.prototype.toJSON = function() {
        return this.constructor.toObject(this, wS.util.toJSONOptions);
    }, HS), GS.ModelBizInfo = (VS.prototype.eid = 0, VS.prototype.fid = "", VS.prototype.type = 0, 
    VS.prototype.name = "", VS.prototype.ename = "", VS.prototype.minlevel = 0, VS.prototype.maxlevel = 0, 
    VS.prototype.pass = 0, VS.create = function(t) {
        return new VS(t);
    }, VS.encode = function(t, e) {
        return (e = e || ES.create()).uint32(8).int32(t.eid), null != t.fid && Object.hasOwnProperty.call(t, "fid") && e.uint32(18).string(t.fid), 
        null != t.type && Object.hasOwnProperty.call(t, "type") && e.uint32(24).int32(t.type), 
        null != t.name && Object.hasOwnProperty.call(t, "name") && e.uint32(34).string(t.name), 
        null != t.ename && Object.hasOwnProperty.call(t, "ename") && e.uint32(42).string(t.ename), 
        null != t.minlevel && Object.hasOwnProperty.call(t, "minlevel") && e.uint32(48).int32(t.minlevel), 
        null != t.maxlevel && Object.hasOwnProperty.call(t, "maxlevel") && e.uint32(56).int32(t.maxlevel), 
        null != t.pass && Object.hasOwnProperty.call(t, "pass") && e.uint32(64).int32(t.pass), 
        e;
    }, VS.encodeDelimited = function(t, e) {
        return this.encode(t, e).ldelim();
    }, VS.decode = function(t, e) {
        t instanceof _S || (t = _S.create(t));
        for (var n = void 0 === e ? t.len : t.pos + e, r = new MS.protobuf.FloorBiz.ModelBizInfo(); t.pos < n; ) {
            var i = t.uint32();
            switch (i >>> 3) {
              case 1:
                r.eid = t.int32();
                break;

              case 2:
                r.fid = t.string();
                break;

              case 3:
                r.type = t.int32();
                break;

              case 4:
                r.name = t.string();
                break;

              case 5:
                r.ename = t.string();
                break;

              case 6:
                r.minlevel = t.int32();
                break;

              case 7:
                r.maxlevel = t.int32();
                break;

              case 8:
                r.pass = t.int32();
                break;

              default:
                t.skipType(7 & i);
            }
        }
        if (r.hasOwnProperty("eid")) return r;
        throw OS.ProtocolError("missing required 'eid'", {
            instance: r
        });
    }, VS.decodeDelimited = function(t) {
        return t instanceof _S || (t = new _S(t)), this.decode(t, t.uint32());
    }, VS.verify = function(t) {
        return "object" !== SS(t) || null === t ? "object expected" : OS.isInteger(t.eid) ? null != t.fid && t.hasOwnProperty("fid") && !OS.isString(t.fid) ? "fid: string expected" : null != t.type && t.hasOwnProperty("type") && !OS.isInteger(t.type) ? "type: integer expected" : null != t.name && t.hasOwnProperty("name") && !OS.isString(t.name) ? "name: string expected" : null != t.ename && t.hasOwnProperty("ename") && !OS.isString(t.ename) ? "ename: string expected" : null != t.minlevel && t.hasOwnProperty("minlevel") && !OS.isInteger(t.minlevel) ? "minlevel: integer expected" : null != t.maxlevel && t.hasOwnProperty("maxlevel") && !OS.isInteger(t.maxlevel) ? "maxlevel: integer expected" : null != t.pass && t.hasOwnProperty("pass") && !OS.isInteger(t.pass) ? "pass: integer expected" : null : "eid: integer expected";
    }, VS.fromObject = function(t) {
        var e;
        return t instanceof MS.protobuf.FloorBiz.ModelBizInfo ? t : (e = new MS.protobuf.FloorBiz.ModelBizInfo(), 
        null != t.eid && (e.eid = 0 | t.eid), null != t.fid && (e.fid = String(t.fid)), 
        null != t.type && (e.type = 0 | t.type), null != t.name && (e.name = String(t.name)), 
        null != t.ename && (e.ename = String(t.ename)), null != t.minlevel && (e.minlevel = 0 | t.minlevel), 
        null != t.maxlevel && (e.maxlevel = 0 | t.maxlevel), null != t.pass && (e.pass = 0 | t.pass), 
        e);
    }, VS.toObject = function(t, e) {
        var n = {};
        return (e = e || {}).defaults && (n.eid = 0, n.fid = "", n.type = 0, n.name = "", 
        n.ename = "", n.minlevel = 0, n.maxlevel = 0, n.pass = 0), null != t.eid && t.hasOwnProperty("eid") && (n.eid = t.eid), 
        null != t.fid && t.hasOwnProperty("fid") && (n.fid = t.fid), null != t.type && t.hasOwnProperty("type") && (n.type = t.type), 
        null != t.name && t.hasOwnProperty("name") && (n.name = t.name), null != t.ename && t.hasOwnProperty("ename") && (n.ename = t.ename), 
        null != t.minlevel && t.hasOwnProperty("minlevel") && (n.minlevel = t.minlevel), 
        null != t.maxlevel && t.hasOwnProperty("maxlevel") && (n.maxlevel = t.maxlevel), 
        null != t.pass && t.hasOwnProperty("pass") && (n.pass = t.pass), n;
    }, VS.prototype.toJSON = function() {
        return this.constructor.toObject(this, wS.util.toJSONOptions);
    }, VS), GS.LabelBizInfo = (WS.prototype.eid = 0, WS.prototype.fid = "", WS.prototype.type = 0, 
    WS.prototype.name = "", WS.prototype.ename = "", WS.prototype.minlevel = 0, WS.prototype.maxlevel = 0, 
    WS.create = function(t) {
        return new WS(t);
    }, WS.encode = function(t, e) {
        return (e = e || ES.create()).uint32(8).int32(t.eid), null != t.fid && Object.hasOwnProperty.call(t, "fid") && e.uint32(18).string(t.fid), 
        null != t.type && Object.hasOwnProperty.call(t, "type") && e.uint32(24).int32(t.type), 
        null != t.name && Object.hasOwnProperty.call(t, "name") && e.uint32(34).string(t.name), 
        null != t.ename && Object.hasOwnProperty.call(t, "ename") && e.uint32(42).string(t.ename), 
        null != t.minlevel && Object.hasOwnProperty.call(t, "minlevel") && e.uint32(48).int32(t.minlevel), 
        null != t.maxlevel && Object.hasOwnProperty.call(t, "maxlevel") && e.uint32(56).int32(t.maxlevel), 
        e;
    }, WS.encodeDelimited = function(t, e) {
        return this.encode(t, e).ldelim();
    }, WS.decode = function(t, e) {
        t instanceof _S || (t = _S.create(t));
        for (var n = void 0 === e ? t.len : t.pos + e, r = new MS.protobuf.FloorBiz.LabelBizInfo(); t.pos < n; ) {
            var i = t.uint32();
            switch (i >>> 3) {
              case 1:
                r.eid = t.int32();
                break;

              case 2:
                r.fid = t.string();
                break;

              case 3:
                r.type = t.int32();
                break;

              case 4:
                r.name = t.string();
                break;

              case 5:
                r.ename = t.string();
                break;

              case 6:
                r.minlevel = t.int32();
                break;

              case 7:
                r.maxlevel = t.int32();
                break;

              default:
                t.skipType(7 & i);
            }
        }
        if (r.hasOwnProperty("eid")) return r;
        throw OS.ProtocolError("missing required 'eid'", {
            instance: r
        });
    }, WS.decodeDelimited = function(t) {
        return t instanceof _S || (t = new _S(t)), this.decode(t, t.uint32());
    }, WS.verify = function(t) {
        return "object" !== SS(t) || null === t ? "object expected" : OS.isInteger(t.eid) ? null != t.fid && t.hasOwnProperty("fid") && !OS.isString(t.fid) ? "fid: string expected" : null != t.type && t.hasOwnProperty("type") && !OS.isInteger(t.type) ? "type: integer expected" : null != t.name && t.hasOwnProperty("name") && !OS.isString(t.name) ? "name: string expected" : null != t.ename && t.hasOwnProperty("ename") && !OS.isString(t.ename) ? "ename: string expected" : null != t.minlevel && t.hasOwnProperty("minlevel") && !OS.isInteger(t.minlevel) ? "minlevel: integer expected" : null != t.maxlevel && t.hasOwnProperty("maxlevel") && !OS.isInteger(t.maxlevel) ? "maxlevel: integer expected" : null : "eid: integer expected";
    }, WS.fromObject = function(t) {
        var e;
        return t instanceof MS.protobuf.FloorBiz.LabelBizInfo ? t : (e = new MS.protobuf.FloorBiz.LabelBizInfo(), 
        null != t.eid && (e.eid = 0 | t.eid), null != t.fid && (e.fid = String(t.fid)), 
        null != t.type && (e.type = 0 | t.type), null != t.name && (e.name = String(t.name)), 
        null != t.ename && (e.ename = String(t.ename)), null != t.minlevel && (e.minlevel = 0 | t.minlevel), 
        null != t.maxlevel && (e.maxlevel = 0 | t.maxlevel), e);
    }, WS.toObject = function(t, e) {
        var n = {};
        return (e = e || {}).defaults && (n.eid = 0, n.fid = "", n.type = 0, n.name = "", 
        n.ename = "", n.minlevel = 0, n.maxlevel = 0), null != t.eid && t.hasOwnProperty("eid") && (n.eid = t.eid), 
        null != t.fid && t.hasOwnProperty("fid") && (n.fid = t.fid), null != t.type && t.hasOwnProperty("type") && (n.type = t.type), 
        null != t.name && t.hasOwnProperty("name") && (n.name = t.name), null != t.ename && t.hasOwnProperty("ename") && (n.ename = t.ename), 
        null != t.minlevel && t.hasOwnProperty("minlevel") && (n.minlevel = t.minlevel), 
        null != t.maxlevel && t.hasOwnProperty("maxlevel") && (n.maxlevel = t.maxlevel), 
        n;
    }, WS.prototype.toJSON = function() {
        return this.constructor.toObject(this, wS.util.toJSONOptions);
    }, WS), GS.PolygonBizInfo = (YS.prototype.eid = 0, YS.prototype.fid = "", YS.prototype.type = 0, 
    YS.prototype.name = "", YS.prototype.ename = "", YS.prototype.minlevel = 0, YS.prototype.maxlevel = 0, 
    YS.create = function(t) {
        return new YS(t);
    }, YS.encode = function(t, e) {
        return (e = e || ES.create()).uint32(8).int32(t.eid), null != t.fid && Object.hasOwnProperty.call(t, "fid") && e.uint32(18).string(t.fid), 
        null != t.type && Object.hasOwnProperty.call(t, "type") && e.uint32(24).int32(t.type), 
        null != t.name && Object.hasOwnProperty.call(t, "name") && e.uint32(34).string(t.name), 
        null != t.ename && Object.hasOwnProperty.call(t, "ename") && e.uint32(42).string(t.ename), 
        null != t.minlevel && Object.hasOwnProperty.call(t, "minlevel") && e.uint32(48).int32(t.minlevel), 
        null != t.maxlevel && Object.hasOwnProperty.call(t, "maxlevel") && e.uint32(56).int32(t.maxlevel), 
        e;
    }, YS.encodeDelimited = function(t, e) {
        return this.encode(t, e).ldelim();
    }, YS.decode = function(t, e) {
        t instanceof _S || (t = _S.create(t));
        for (var n = void 0 === e ? t.len : t.pos + e, r = new MS.protobuf.FloorBiz.PolygonBizInfo(); t.pos < n; ) {
            var i = t.uint32();
            switch (i >>> 3) {
              case 1:
                r.eid = t.int32();
                break;

              case 2:
                r.fid = t.string();
                break;

              case 3:
                r.type = t.int32();
                break;

              case 4:
                r.name = t.string();
                break;

              case 5:
                r.ename = t.string();
                break;

              case 6:
                r.minlevel = t.int32();
                break;

              case 7:
                r.maxlevel = t.int32();
                break;

              default:
                t.skipType(7 & i);
            }
        }
        if (r.hasOwnProperty("eid")) return r;
        throw OS.ProtocolError("missing required 'eid'", {
            instance: r
        });
    }, YS.decodeDelimited = function(t) {
        return t instanceof _S || (t = new _S(t)), this.decode(t, t.uint32());
    }, YS.verify = function(t) {
        return "object" !== SS(t) || null === t ? "object expected" : OS.isInteger(t.eid) ? null != t.fid && t.hasOwnProperty("fid") && !OS.isString(t.fid) ? "fid: string expected" : null != t.type && t.hasOwnProperty("type") && !OS.isInteger(t.type) ? "type: integer expected" : null != t.name && t.hasOwnProperty("name") && !OS.isString(t.name) ? "name: string expected" : null != t.ename && t.hasOwnProperty("ename") && !OS.isString(t.ename) ? "ename: string expected" : null != t.minlevel && t.hasOwnProperty("minlevel") && !OS.isInteger(t.minlevel) ? "minlevel: integer expected" : null != t.maxlevel && t.hasOwnProperty("maxlevel") && !OS.isInteger(t.maxlevel) ? "maxlevel: integer expected" : null : "eid: integer expected";
    }, YS.fromObject = function(t) {
        var e;
        return t instanceof MS.protobuf.FloorBiz.PolygonBizInfo ? t : (e = new MS.protobuf.FloorBiz.PolygonBizInfo(), 
        null != t.eid && (e.eid = 0 | t.eid), null != t.fid && (e.fid = String(t.fid)), 
        null != t.type && (e.type = 0 | t.type), null != t.name && (e.name = String(t.name)), 
        null != t.ename && (e.ename = String(t.ename)), null != t.minlevel && (e.minlevel = 0 | t.minlevel), 
        null != t.maxlevel && (e.maxlevel = 0 | t.maxlevel), e);
    }, YS.toObject = function(t, e) {
        var n = {};
        return (e = e || {}).defaults && (n.eid = 0, n.fid = "", n.type = 0, n.name = "", 
        n.ename = "", n.minlevel = 0, n.maxlevel = 0), null != t.eid && t.hasOwnProperty("eid") && (n.eid = t.eid), 
        null != t.fid && t.hasOwnProperty("fid") && (n.fid = t.fid), null != t.type && t.hasOwnProperty("type") && (n.type = t.type), 
        null != t.name && t.hasOwnProperty("name") && (n.name = t.name), null != t.ename && t.hasOwnProperty("ename") && (n.ename = t.ename), 
        null != t.minlevel && t.hasOwnProperty("minlevel") && (n.minlevel = t.minlevel), 
        null != t.maxlevel && t.hasOwnProperty("maxlevel") && (n.maxlevel = t.maxlevel), 
        n;
    }, YS.prototype.toJSON = function() {
        return this.constructor.toObject(this, wS.util.toJSONOptions);
    }, YS), GS.POIBizInfo = (XS.prototype.eid = 0, XS.prototype.fid = "", XS.prototype.type = 0, 
    XS.prototype.name = "", XS.prototype.ename = "", XS.prototype.minlevel = 0, XS.prototype.maxlevel = 0, 
    XS.create = function(t) {
        return new XS(t);
    }, XS.encode = function(t, e) {
        return (e = e || ES.create()).uint32(8).int32(t.eid), null != t.fid && Object.hasOwnProperty.call(t, "fid") && e.uint32(18).string(t.fid), 
        null != t.type && Object.hasOwnProperty.call(t, "type") && e.uint32(24).int32(t.type), 
        null != t.name && Object.hasOwnProperty.call(t, "name") && e.uint32(34).string(t.name), 
        null != t.ename && Object.hasOwnProperty.call(t, "ename") && e.uint32(42).string(t.ename), 
        null != t.minlevel && Object.hasOwnProperty.call(t, "minlevel") && e.uint32(48).int32(t.minlevel), 
        null != t.maxlevel && Object.hasOwnProperty.call(t, "maxlevel") && e.uint32(56).int32(t.maxlevel), 
        e;
    }, XS.encodeDelimited = function(t, e) {
        return this.encode(t, e).ldelim();
    }, XS.decode = function(t, e) {
        t instanceof _S || (t = _S.create(t));
        for (var n = void 0 === e ? t.len : t.pos + e, r = new MS.protobuf.FloorBiz.POIBizInfo(); t.pos < n; ) {
            var i = t.uint32();
            switch (i >>> 3) {
              case 1:
                r.eid = t.int32();
                break;

              case 2:
                r.fid = t.string();
                break;

              case 3:
                r.type = t.int32();
                break;

              case 4:
                r.name = t.string();
                break;

              case 5:
                r.ename = t.string();
                break;

              case 6:
                r.minlevel = t.int32();
                break;

              case 7:
                r.maxlevel = t.int32();
                break;

              default:
                t.skipType(7 & i);
            }
        }
        if (r.hasOwnProperty("eid")) return r;
        throw OS.ProtocolError("missing required 'eid'", {
            instance: r
        });
    }, XS.decodeDelimited = function(t) {
        return t instanceof _S || (t = new _S(t)), this.decode(t, t.uint32());
    }, XS.verify = function(t) {
        return "object" !== SS(t) || null === t ? "object expected" : OS.isInteger(t.eid) ? null != t.fid && t.hasOwnProperty("fid") && !OS.isString(t.fid) ? "fid: string expected" : null != t.type && t.hasOwnProperty("type") && !OS.isInteger(t.type) ? "type: integer expected" : null != t.name && t.hasOwnProperty("name") && !OS.isString(t.name) ? "name: string expected" : null != t.ename && t.hasOwnProperty("ename") && !OS.isString(t.ename) ? "ename: string expected" : null != t.minlevel && t.hasOwnProperty("minlevel") && !OS.isInteger(t.minlevel) ? "minlevel: integer expected" : null != t.maxlevel && t.hasOwnProperty("maxlevel") && !OS.isInteger(t.maxlevel) ? "maxlevel: integer expected" : null : "eid: integer expected";
    }, XS.fromObject = function(t) {
        var e;
        return t instanceof MS.protobuf.FloorBiz.POIBizInfo ? t : (e = new MS.protobuf.FloorBiz.POIBizInfo(), 
        null != t.eid && (e.eid = 0 | t.eid), null != t.fid && (e.fid = String(t.fid)), 
        null != t.type && (e.type = 0 | t.type), null != t.name && (e.name = String(t.name)), 
        null != t.ename && (e.ename = String(t.ename)), null != t.minlevel && (e.minlevel = 0 | t.minlevel), 
        null != t.maxlevel && (e.maxlevel = 0 | t.maxlevel), e);
    }, XS.toObject = function(t, e) {
        var n = {};
        return (e = e || {}).defaults && (n.eid = 0, n.fid = "", n.type = 0, n.name = "", 
        n.ename = "", n.minlevel = 0, n.maxlevel = 0), null != t.eid && t.hasOwnProperty("eid") && (n.eid = t.eid), 
        null != t.fid && t.hasOwnProperty("fid") && (n.fid = t.fid), null != t.type && t.hasOwnProperty("type") && (n.type = t.type), 
        null != t.name && t.hasOwnProperty("name") && (n.name = t.name), null != t.ename && t.hasOwnProperty("ename") && (n.ename = t.ename), 
        null != t.minlevel && t.hasOwnProperty("minlevel") && (n.minlevel = t.minlevel), 
        null != t.maxlevel && t.hasOwnProperty("maxlevel") && (n.maxlevel = t.maxlevel), 
        n;
    }, XS.prototype.toJSON = function() {
        return this.constructor.toObject(this, wS.util.toJSONOptions);
    }, XS), GS.LiftBizInfo = (ZS.prototype.eid = 0, ZS.prototype.fid = "", ZS.prototype.type = 0, 
    ZS.prototype.flag = 0, ZS.prototype.floor = "", ZS.prototype.minlevel = 0, ZS.prototype.maxlevel = 0, 
    ZS.create = function(t) {
        return new ZS(t);
    }, ZS.encode = function(t, e) {
        return (e = e || ES.create()).uint32(8).int32(t.eid), null != t.fid && Object.hasOwnProperty.call(t, "fid") && e.uint32(18).string(t.fid), 
        null != t.type && Object.hasOwnProperty.call(t, "type") && e.uint32(24).int32(t.type), 
        null != t.flag && Object.hasOwnProperty.call(t, "flag") && e.uint32(32).int32(t.flag), 
        null != t.floor && Object.hasOwnProperty.call(t, "floor") && e.uint32(42).string(t.floor), 
        null != t.minlevel && Object.hasOwnProperty.call(t, "minlevel") && e.uint32(48).int32(t.minlevel), 
        null != t.maxlevel && Object.hasOwnProperty.call(t, "maxlevel") && e.uint32(56).int32(t.maxlevel), 
        e;
    }, ZS.encodeDelimited = function(t, e) {
        return this.encode(t, e).ldelim();
    }, ZS.decode = function(t, e) {
        t instanceof _S || (t = _S.create(t));
        for (var n = void 0 === e ? t.len : t.pos + e, r = new MS.protobuf.FloorBiz.LiftBizInfo(); t.pos < n; ) {
            var i = t.uint32();
            switch (i >>> 3) {
              case 1:
                r.eid = t.int32();
                break;

              case 2:
                r.fid = t.string();
                break;

              case 3:
                r.type = t.int32();
                break;

              case 4:
                r.flag = t.int32();
                break;

              case 5:
                r.floor = t.string();
                break;

              case 6:
                r.minlevel = t.int32();
                break;

              case 7:
                r.maxlevel = t.int32();
                break;

              default:
                t.skipType(7 & i);
            }
        }
        if (r.hasOwnProperty("eid")) return r;
        throw OS.ProtocolError("missing required 'eid'", {
            instance: r
        });
    }, ZS.decodeDelimited = function(t) {
        return t instanceof _S || (t = new _S(t)), this.decode(t, t.uint32());
    }, ZS.verify = function(t) {
        return "object" !== SS(t) || null === t ? "object expected" : OS.isInteger(t.eid) ? null != t.fid && t.hasOwnProperty("fid") && !OS.isString(t.fid) ? "fid: string expected" : null != t.type && t.hasOwnProperty("type") && !OS.isInteger(t.type) ? "type: integer expected" : null != t.flag && t.hasOwnProperty("flag") && !OS.isInteger(t.flag) ? "flag: integer expected" : null != t.floor && t.hasOwnProperty("floor") && !OS.isString(t.floor) ? "floor: string expected" : null != t.minlevel && t.hasOwnProperty("minlevel") && !OS.isInteger(t.minlevel) ? "minlevel: integer expected" : null != t.maxlevel && t.hasOwnProperty("maxlevel") && !OS.isInteger(t.maxlevel) ? "maxlevel: integer expected" : null : "eid: integer expected";
    }, ZS.fromObject = function(t) {
        var e;
        return t instanceof MS.protobuf.FloorBiz.LiftBizInfo ? t : (e = new MS.protobuf.FloorBiz.LiftBizInfo(), 
        null != t.eid && (e.eid = 0 | t.eid), null != t.fid && (e.fid = String(t.fid)), 
        null != t.type && (e.type = 0 | t.type), null != t.flag && (e.flag = 0 | t.flag), 
        null != t.floor && (e.floor = String(t.floor)), null != t.minlevel && (e.minlevel = 0 | t.minlevel), 
        null != t.maxlevel && (e.maxlevel = 0 | t.maxlevel), e);
    }, ZS.toObject = function(t, e) {
        var n = {};
        return (e = e || {}).defaults && (n.eid = 0, n.fid = "", n.type = 0, n.flag = 0, 
        n.floor = "", n.minlevel = 0, n.maxlevel = 0), null != t.eid && t.hasOwnProperty("eid") && (n.eid = t.eid), 
        null != t.fid && t.hasOwnProperty("fid") && (n.fid = t.fid), null != t.type && t.hasOwnProperty("type") && (n.type = t.type), 
        null != t.flag && t.hasOwnProperty("flag") && (n.flag = t.flag), null != t.floor && t.hasOwnProperty("floor") && (n.floor = t.floor), 
        null != t.minlevel && t.hasOwnProperty("minlevel") && (n.minlevel = t.minlevel), 
        null != t.maxlevel && t.hasOwnProperty("maxlevel") && (n.maxlevel = t.maxlevel), 
        n;
    }, ZS.prototype.toJSON = function() {
        return this.constructor.toObject(this, wS.util.toJSONOptions);
    }, ZS), GS.StairBizInfo = (qS.prototype.eid = 0, qS.prototype.fid = "", qS.prototype.type = 0, 
    qS.prototype.flag = 0, qS.prototype.minlevel = 0, qS.prototype.maxlevel = 0, qS.create = function(t) {
        return new qS(t);
    }, qS.encode = function(t, e) {
        return (e = e || ES.create()).uint32(8).int32(t.eid), null != t.fid && Object.hasOwnProperty.call(t, "fid") && e.uint32(18).string(t.fid), 
        null != t.type && Object.hasOwnProperty.call(t, "type") && e.uint32(24).int32(t.type), 
        null != t.flag && Object.hasOwnProperty.call(t, "flag") && e.uint32(32).int32(t.flag), 
        null != t.minlevel && Object.hasOwnProperty.call(t, "minlevel") && e.uint32(40).int32(t.minlevel), 
        null != t.maxlevel && Object.hasOwnProperty.call(t, "maxlevel") && e.uint32(48).int32(t.maxlevel), 
        e;
    }, qS.encodeDelimited = function(t, e) {
        return this.encode(t, e).ldelim();
    }, qS.decode = function(t, e) {
        t instanceof _S || (t = _S.create(t));
        for (var n = void 0 === e ? t.len : t.pos + e, r = new MS.protobuf.FloorBiz.StairBizInfo(); t.pos < n; ) {
            var i = t.uint32();
            switch (i >>> 3) {
              case 1:
                r.eid = t.int32();
                break;

              case 2:
                r.fid = t.string();
                break;

              case 3:
                r.type = t.int32();
                break;

              case 4:
                r.flag = t.int32();
                break;

              case 5:
                r.minlevel = t.int32();
                break;

              case 6:
                r.maxlevel = t.int32();
                break;

              default:
                t.skipType(7 & i);
            }
        }
        if (r.hasOwnProperty("eid")) return r;
        throw OS.ProtocolError("missing required 'eid'", {
            instance: r
        });
    }, qS.decodeDelimited = function(t) {
        return t instanceof _S || (t = new _S(t)), this.decode(t, t.uint32());
    }, qS.verify = function(t) {
        return "object" !== SS(t) || null === t ? "object expected" : OS.isInteger(t.eid) ? null != t.fid && t.hasOwnProperty("fid") && !OS.isString(t.fid) ? "fid: string expected" : null != t.type && t.hasOwnProperty("type") && !OS.isInteger(t.type) ? "type: integer expected" : null != t.flag && t.hasOwnProperty("flag") && !OS.isInteger(t.flag) ? "flag: integer expected" : null != t.minlevel && t.hasOwnProperty("minlevel") && !OS.isInteger(t.minlevel) ? "minlevel: integer expected" : null != t.maxlevel && t.hasOwnProperty("maxlevel") && !OS.isInteger(t.maxlevel) ? "maxlevel: integer expected" : null : "eid: integer expected";
    }, qS.fromObject = function(t) {
        var e;
        return t instanceof MS.protobuf.FloorBiz.StairBizInfo ? t : (e = new MS.protobuf.FloorBiz.StairBizInfo(), 
        null != t.eid && (e.eid = 0 | t.eid), null != t.fid && (e.fid = String(t.fid)), 
        null != t.type && (e.type = 0 | t.type), null != t.flag && (e.flag = 0 | t.flag), 
        null != t.minlevel && (e.minlevel = 0 | t.minlevel), null != t.maxlevel && (e.maxlevel = 0 | t.maxlevel), 
        e);
    }, qS.toObject = function(t, e) {
        var n = {};
        return (e = e || {}).defaults && (n.eid = 0, n.fid = "", n.type = 0, n.flag = 0, 
        n.minlevel = 0, n.maxlevel = 0), null != t.eid && t.hasOwnProperty("eid") && (n.eid = t.eid), 
        null != t.fid && t.hasOwnProperty("fid") && (n.fid = t.fid), null != t.type && t.hasOwnProperty("type") && (n.type = t.type), 
        null != t.flag && t.hasOwnProperty("flag") && (n.flag = t.flag), null != t.minlevel && t.hasOwnProperty("minlevel") && (n.minlevel = t.minlevel), 
        null != t.maxlevel && t.hasOwnProperty("maxlevel") && (n.maxlevel = t.maxlevel), 
        n;
    }, qS.prototype.toJSON = function() {
        return this.constructor.toObject(this, wS.util.toJSONOptions);
    }, qS), GS.PolygonLabelBizInfo = (KS.prototype.eid = 0, KS.prototype.fid = "", KS.prototype.type = 0, 
    KS.prototype.width = 0, KS.prototype.name = "", KS.prototype.ename = "", KS.prototype.angle = 0, 
    KS.create = function(t) {
        return new KS(t);
    }, KS.encode = function(t, e) {
        return (e = e || ES.create()).uint32(8).int32(t.eid), null != t.fid && Object.hasOwnProperty.call(t, "fid") && e.uint32(18).string(t.fid), 
        null != t.type && Object.hasOwnProperty.call(t, "type") && e.uint32(24).int32(t.type), 
        null != t.width && Object.hasOwnProperty.call(t, "width") && e.uint32(37).float(t.width), 
        null != t.name && Object.hasOwnProperty.call(t, "name") && e.uint32(42).string(t.name), 
        null != t.ename && Object.hasOwnProperty.call(t, "ename") && e.uint32(50).string(t.ename), 
        null != t.angle && Object.hasOwnProperty.call(t, "angle") && e.uint32(61).float(t.angle), 
        e;
    }, KS.encodeDelimited = function(t, e) {
        return this.encode(t, e).ldelim();
    }, KS.decode = function(t, e) {
        t instanceof _S || (t = _S.create(t));
        for (var n = void 0 === e ? t.len : t.pos + e, r = new MS.protobuf.FloorBiz.PolygonLabelBizInfo(); t.pos < n; ) {
            var i = t.uint32();
            switch (i >>> 3) {
              case 1:
                r.eid = t.int32();
                break;

              case 2:
                r.fid = t.string();
                break;

              case 3:
                r.type = t.int32();
                break;

              case 4:
                r.width = t.float();
                break;

              case 5:
                r.name = t.string();
                break;

              case 6:
                r.ename = t.string();
                break;

              case 7:
                r.angle = t.float();
                break;

              default:
                t.skipType(7 & i);
            }
        }
        if (r.hasOwnProperty("eid")) return r;
        throw OS.ProtocolError("missing required 'eid'", {
            instance: r
        });
    }, KS.decodeDelimited = function(t) {
        return t instanceof _S || (t = new _S(t)), this.decode(t, t.uint32());
    }, KS.verify = function(t) {
        return "object" !== SS(t) || null === t ? "object expected" : OS.isInteger(t.eid) ? null != t.fid && t.hasOwnProperty("fid") && !OS.isString(t.fid) ? "fid: string expected" : null != t.type && t.hasOwnProperty("type") && !OS.isInteger(t.type) ? "type: integer expected" : null != t.width && t.hasOwnProperty("width") && "number" != typeof t.width ? "width: number expected" : null != t.name && t.hasOwnProperty("name") && !OS.isString(t.name) ? "name: string expected" : null != t.ename && t.hasOwnProperty("ename") && !OS.isString(t.ename) ? "ename: string expected" : null != t.angle && t.hasOwnProperty("angle") && "number" != typeof t.angle ? "angle: number expected" : null : "eid: integer expected";
    }, KS.fromObject = function(t) {
        var e;
        return t instanceof MS.protobuf.FloorBiz.PolygonLabelBizInfo ? t : (e = new MS.protobuf.FloorBiz.PolygonLabelBizInfo(), 
        null != t.eid && (e.eid = 0 | t.eid), null != t.fid && (e.fid = String(t.fid)), 
        null != t.type && (e.type = 0 | t.type), null != t.width && (e.width = Number(t.width)), 
        null != t.name && (e.name = String(t.name)), null != t.ename && (e.ename = String(t.ename)), 
        null != t.angle && (e.angle = Number(t.angle)), e);
    }, KS.toObject = function(t, e) {
        var n = {};
        return (e = e || {}).defaults && (n.eid = 0, n.fid = "", n.type = 0, n.width = 0, 
        n.name = "", n.ename = "", n.angle = 0), null != t.eid && t.hasOwnProperty("eid") && (n.eid = t.eid), 
        null != t.fid && t.hasOwnProperty("fid") && (n.fid = t.fid), null != t.type && t.hasOwnProperty("type") && (n.type = t.type), 
        null != t.width && t.hasOwnProperty("width") && (n.width = e.json && !isFinite(t.width) ? String(t.width) : t.width), 
        null != t.name && t.hasOwnProperty("name") && (n.name = t.name), null != t.ename && t.hasOwnProperty("ename") && (n.ename = t.ename), 
        null != t.angle && t.hasOwnProperty("angle") && (n.angle = e.json && !isFinite(t.angle) ? String(t.angle) : t.angle), 
        n;
    }, KS.prototype.toJSON = function() {
        return this.constructor.toObject(this, wS.util.toJSONOptions);
    }, KS), GS.ExternalModelBizInfo = (JS.prototype.eid = 0, JS.prototype.fid = "", 
    JS.prototype.type = 0, JS.prototype.name = "", JS.prototype.ename = "", JS.prototype.minlevel = 0, 
    JS.prototype.maxlevel = 0, JS.create = function(t) {
        return new JS(t);
    }, JS.encode = function(t, e) {
        return (e = e || ES.create()).uint32(8).int32(t.eid), null != t.fid && Object.hasOwnProperty.call(t, "fid") && e.uint32(18).string(t.fid), 
        null != t.type && Object.hasOwnProperty.call(t, "type") && e.uint32(24).int32(t.type), 
        null != t.name && Object.hasOwnProperty.call(t, "name") && e.uint32(34).string(t.name), 
        null != t.ename && Object.hasOwnProperty.call(t, "ename") && e.uint32(42).string(t.ename), 
        null != t.minlevel && Object.hasOwnProperty.call(t, "minlevel") && e.uint32(48).int32(t.minlevel), 
        null != t.maxlevel && Object.hasOwnProperty.call(t, "maxlevel") && e.uint32(56).int32(t.maxlevel), 
        e;
    }, JS.encodeDelimited = function(t, e) {
        return this.encode(t, e).ldelim();
    }, JS.decode = function(t, e) {
        t instanceof _S || (t = _S.create(t));
        for (var n = void 0 === e ? t.len : t.pos + e, r = new MS.protobuf.FloorBiz.ExternalModelBizInfo(); t.pos < n; ) {
            var i = t.uint32();
            switch (i >>> 3) {
              case 1:
                r.eid = t.int32();
                break;

              case 2:
                r.fid = t.string();
                break;

              case 3:
                r.type = t.int32();
                break;

              case 4:
                r.name = t.string();
                break;

              case 5:
                r.ename = t.string();
                break;

              case 6:
                r.minlevel = t.int32();
                break;

              case 7:
                r.maxlevel = t.int32();
                break;

              default:
                t.skipType(7 & i);
            }
        }
        if (r.hasOwnProperty("eid")) return r;
        throw OS.ProtocolError("missing required 'eid'", {
            instance: r
        });
    }, JS.decodeDelimited = function(t) {
        return t instanceof _S || (t = new _S(t)), this.decode(t, t.uint32());
    }, JS.verify = function(t) {
        return "object" !== SS(t) || null === t ? "object expected" : OS.isInteger(t.eid) ? null != t.fid && t.hasOwnProperty("fid") && !OS.isString(t.fid) ? "fid: string expected" : null != t.type && t.hasOwnProperty("type") && !OS.isInteger(t.type) ? "type: integer expected" : null != t.name && t.hasOwnProperty("name") && !OS.isString(t.name) ? "name: string expected" : null != t.ename && t.hasOwnProperty("ename") && !OS.isString(t.ename) ? "ename: string expected" : null != t.minlevel && t.hasOwnProperty("minlevel") && !OS.isInteger(t.minlevel) ? "minlevel: integer expected" : null != t.maxlevel && t.hasOwnProperty("maxlevel") && !OS.isInteger(t.maxlevel) ? "maxlevel: integer expected" : null : "eid: integer expected";
    }, JS.fromObject = function(t) {
        var e;
        return t instanceof MS.protobuf.FloorBiz.ExternalModelBizInfo ? t : (e = new MS.protobuf.FloorBiz.ExternalModelBizInfo(), 
        null != t.eid && (e.eid = 0 | t.eid), null != t.fid && (e.fid = String(t.fid)), 
        null != t.type && (e.type = 0 | t.type), null != t.name && (e.name = String(t.name)), 
        null != t.ename && (e.ename = String(t.ename)), null != t.minlevel && (e.minlevel = 0 | t.minlevel), 
        null != t.maxlevel && (e.maxlevel = 0 | t.maxlevel), e);
    }, JS.toObject = function(t, e) {
        var n = {};
        return (e = e || {}).defaults && (n.eid = 0, n.fid = "", n.type = 0, n.name = "", 
        n.ename = "", n.minlevel = 0, n.maxlevel = 0), null != t.eid && t.hasOwnProperty("eid") && (n.eid = t.eid), 
        null != t.fid && t.hasOwnProperty("fid") && (n.fid = t.fid), null != t.type && t.hasOwnProperty("type") && (n.type = t.type), 
        null != t.name && t.hasOwnProperty("name") && (n.name = t.name), null != t.ename && t.hasOwnProperty("ename") && (n.ename = t.ename), 
        null != t.minlevel && t.hasOwnProperty("minlevel") && (n.minlevel = t.minlevel), 
        null != t.maxlevel && t.hasOwnProperty("maxlevel") && (n.maxlevel = t.maxlevel), 
        n;
    }, JS.prototype.toJSON = function() {
        return this.constructor.toObject(this, wS.util.toJSONOptions);
    }, JS), GS), gy.FloorNavi = (QS.prototype.mid = "", QS.prototype.gid = 0, QS.prototype.naviNodes = OS.emptyArray, 
    QS.prototype.naviSegments = OS.emptyArray, QS.prototype.naviZones = OS.emptyArray, 
    QS.prototype.naviModels = OS.emptyArray, QS.prototype.nextFloors = OS.emptyArray, 
    QS.prototype.naviExtents = OS.emptyArray, QS.create = function(t) {
        return new QS(t);
    }, QS.encode = function(t, e) {
        if ((e = e || ES.create()).uint32(10).string(t.mid), e.uint32(16).int32(t.gid), 
        null != t.naviNodes && t.naviNodes.length) for (var n = 0; n < t.naviNodes.length; ++n) MS.protobuf.FloorNavi.NaviNode.encode(t.naviNodes[n], e.uint32(26).fork()).ldelim();
        if (null != t.naviSegments && t.naviSegments.length) for (var r = 0; r < t.naviSegments.length; ++r) MS.protobuf.FloorNavi.NaviSegment.encode(t.naviSegments[r], e.uint32(34).fork()).ldelim();
        if (null != t.naviZones && t.naviZones.length) for (var i = 0; i < t.naviZones.length; ++i) MS.protobuf.FloorNavi.NaviZone.encode(t.naviZones[i], e.uint32(42).fork()).ldelim();
        if (null != t.naviModels && t.naviModels.length) for (var o = 0; o < t.naviModels.length; ++o) MS.protobuf.FloorNavi.NaviModel.encode(t.naviModels[o], e.uint32(50).fork()).ldelim();
        if (null != t.nextFloors && t.nextFloors.length) for (var a = 0; a < t.nextFloors.length; ++a) e.uint32(56).int32(t.nextFloors[a]);
        if (null != t.naviExtents && t.naviExtents.length) for (var s = 0; s < t.naviExtents.length; ++s) MS.protobuf.FloorNavi.NaviExtent.encode(t.naviExtents[s], e.uint32(66).fork()).ldelim();
        return e;
    }, QS.encodeDelimited = function(t, e) {
        return this.encode(t, e).ldelim();
    }, QS.decode = function(t, e) {
        t instanceof _S || (t = _S.create(t));
        for (var n = void 0 === e ? t.len : t.pos + e, r = new MS.protobuf.FloorNavi(); t.pos < n; ) {
            var i = t.uint32();
            switch (i >>> 3) {
              case 1:
                r.mid = t.string();
                break;

              case 2:
                r.gid = t.int32();
                break;

              case 3:
                r.naviNodes && r.naviNodes.length || (r.naviNodes = []), r.naviNodes.push(MS.protobuf.FloorNavi.NaviNode.decode(t, t.uint32()));
                break;

              case 4:
                r.naviSegments && r.naviSegments.length || (r.naviSegments = []), r.naviSegments.push(MS.protobuf.FloorNavi.NaviSegment.decode(t, t.uint32()));
                break;

              case 5:
                r.naviZones && r.naviZones.length || (r.naviZones = []), r.naviZones.push(MS.protobuf.FloorNavi.NaviZone.decode(t, t.uint32()));
                break;

              case 6:
                r.naviModels && r.naviModels.length || (r.naviModels = []), r.naviModels.push(MS.protobuf.FloorNavi.NaviModel.decode(t, t.uint32()));
                break;

              case 7:
                if (r.nextFloors && r.nextFloors.length || (r.nextFloors = []), 2 == (7 & i)) for (var o = t.uint32() + t.pos; t.pos < o; ) r.nextFloors.push(t.int32()); else r.nextFloors.push(t.int32());
                break;

              case 8:
                r.naviExtents && r.naviExtents.length || (r.naviExtents = []), r.naviExtents.push(MS.protobuf.FloorNavi.NaviExtent.decode(t, t.uint32()));
                break;

              default:
                t.skipType(7 & i);
            }
        }
        if (!r.hasOwnProperty("mid")) throw OS.ProtocolError("missing required 'mid'", {
            instance: r
        });
        if (r.hasOwnProperty("gid")) return r;
        throw OS.ProtocolError("missing required 'gid'", {
            instance: r
        });
    }, QS.decodeDelimited = function(t) {
        return t instanceof _S || (t = new _S(t)), this.decode(t, t.uint32());
    }, QS.verify = function(t) {
        if ("object" !== SS(t) || null === t) return "object expected";
        if (!OS.isString(t.mid)) return "mid: string expected";
        if (!OS.isInteger(t.gid)) return "gid: integer expected";
        if (null != t.naviNodes && t.hasOwnProperty("naviNodes")) {
            if (!Array.isArray(t.naviNodes)) return "naviNodes: array expected";
            for (var e = 0; e < t.naviNodes.length; ++e) {
                var n = MS.protobuf.FloorNavi.NaviNode.verify(t.naviNodes[e]);
                if (n) return "naviNodes." + n;
            }
        }
        if (null != t.naviSegments && t.hasOwnProperty("naviSegments")) {
            if (!Array.isArray(t.naviSegments)) return "naviSegments: array expected";
            for (var r = 0; r < t.naviSegments.length; ++r) {
                var i = MS.protobuf.FloorNavi.NaviSegment.verify(t.naviSegments[r]);
                if (i) return "naviSegments." + i;
            }
        }
        if (null != t.naviZones && t.hasOwnProperty("naviZones")) {
            if (!Array.isArray(t.naviZones)) return "naviZones: array expected";
            for (var o = 0; o < t.naviZones.length; ++o) {
                var a = MS.protobuf.FloorNavi.NaviZone.verify(t.naviZones[o]);
                if (a) return "naviZones." + a;
            }
        }
        if (null != t.naviModels && t.hasOwnProperty("naviModels")) {
            if (!Array.isArray(t.naviModels)) return "naviModels: array expected";
            for (var s = 0; s < t.naviModels.length; ++s) {
                var l = MS.protobuf.FloorNavi.NaviModel.verify(t.naviModels[s]);
                if (l) return "naviModels." + l;
            }
        }
        if (null != t.nextFloors && t.hasOwnProperty("nextFloors")) {
            if (!Array.isArray(t.nextFloors)) return "nextFloors: array expected";
            for (var u = 0; u < t.nextFloors.length; ++u) if (!OS.isInteger(t.nextFloors[u])) return "nextFloors: integer[] expected";
        }
        if (null != t.naviExtents && t.hasOwnProperty("naviExtents")) {
            if (!Array.isArray(t.naviExtents)) return "naviExtents: array expected";
            for (var c = 0; c < t.naviExtents.length; ++c) {
                var h = MS.protobuf.FloorNavi.NaviExtent.verify(t.naviExtents[c]);
                if (h) return "naviExtents." + h;
            }
        }
        return null;
    }, QS.fromObject = function(t) {
        if (t instanceof MS.protobuf.FloorNavi) return t;
        var e = new MS.protobuf.FloorNavi();
        if (null != t.mid && (e.mid = String(t.mid)), null != t.gid && (e.gid = 0 | t.gid), 
        t.naviNodes) {
            if (!Array.isArray(t.naviNodes)) throw TypeError(".protobuf.FloorNavi.naviNodes: array expected");
            e.naviNodes = [];
            for (var n = 0; n < t.naviNodes.length; ++n) {
                if ("object" !== SS(t.naviNodes[n])) throw TypeError(".protobuf.FloorNavi.naviNodes: object expected");
                e.naviNodes[n] = MS.protobuf.FloorNavi.NaviNode.fromObject(t.naviNodes[n]);
            }
        }
        if (t.naviSegments) {
            if (!Array.isArray(t.naviSegments)) throw TypeError(".protobuf.FloorNavi.naviSegments: array expected");
            e.naviSegments = [];
            for (var r = 0; r < t.naviSegments.length; ++r) {
                if ("object" !== SS(t.naviSegments[r])) throw TypeError(".protobuf.FloorNavi.naviSegments: object expected");
                e.naviSegments[r] = MS.protobuf.FloorNavi.NaviSegment.fromObject(t.naviSegments[r]);
            }
        }
        if (t.naviZones) {
            if (!Array.isArray(t.naviZones)) throw TypeError(".protobuf.FloorNavi.naviZones: array expected");
            e.naviZones = [];
            for (var i = 0; i < t.naviZones.length; ++i) {
                if ("object" !== SS(t.naviZones[i])) throw TypeError(".protobuf.FloorNavi.naviZones: object expected");
                e.naviZones[i] = MS.protobuf.FloorNavi.NaviZone.fromObject(t.naviZones[i]);
            }
        }
        if (t.naviModels) {
            if (!Array.isArray(t.naviModels)) throw TypeError(".protobuf.FloorNavi.naviModels: array expected");
            e.naviModels = [];
            for (var o = 0; o < t.naviModels.length; ++o) {
                if ("object" !== SS(t.naviModels[o])) throw TypeError(".protobuf.FloorNavi.naviModels: object expected");
                e.naviModels[o] = MS.protobuf.FloorNavi.NaviModel.fromObject(t.naviModels[o]);
            }
        }
        if (t.nextFloors) {
            if (!Array.isArray(t.nextFloors)) throw TypeError(".protobuf.FloorNavi.nextFloors: array expected");
            e.nextFloors = [];
            for (var a = 0; a < t.nextFloors.length; ++a) e.nextFloors[a] = 0 | t.nextFloors[a];
        }
        if (t.naviExtents) {
            if (!Array.isArray(t.naviExtents)) throw TypeError(".protobuf.FloorNavi.naviExtents: array expected");
            e.naviExtents = [];
            for (var s = 0; s < t.naviExtents.length; ++s) {
                if ("object" !== SS(t.naviExtents[s])) throw TypeError(".protobuf.FloorNavi.naviExtents: object expected");
                e.naviExtents[s] = MS.protobuf.FloorNavi.NaviExtent.fromObject(t.naviExtents[s]);
            }
        }
        return e;
    }, QS.toObject = function(t, e) {
        var n = {};
        if (((e = e || {}).arrays || e.defaults) && (n.naviNodes = [], n.naviSegments = [], 
        n.naviZones = [], n.naviModels = [], n.nextFloors = [], n.naviExtents = []), e.defaults && (n.mid = "", 
        n.gid = 0), null != t.mid && t.hasOwnProperty("mid") && (n.mid = t.mid), null != t.gid && t.hasOwnProperty("gid") && (n.gid = t.gid), 
        t.naviNodes && t.naviNodes.length) {
            n.naviNodes = [];
            for (var r = 0; r < t.naviNodes.length; ++r) n.naviNodes[r] = MS.protobuf.FloorNavi.NaviNode.toObject(t.naviNodes[r], e);
        }
        if (t.naviSegments && t.naviSegments.length) {
            n.naviSegments = [];
            for (var i = 0; i < t.naviSegments.length; ++i) n.naviSegments[i] = MS.protobuf.FloorNavi.NaviSegment.toObject(t.naviSegments[i], e);
        }
        if (t.naviZones && t.naviZones.length) {
            n.naviZones = [];
            for (var o = 0; o < t.naviZones.length; ++o) n.naviZones[o] = MS.protobuf.FloorNavi.NaviZone.toObject(t.naviZones[o], e);
        }
        if (t.naviModels && t.naviModels.length) {
            n.naviModels = [];
            for (var a = 0; a < t.naviModels.length; ++a) n.naviModels[a] = MS.protobuf.FloorNavi.NaviModel.toObject(t.naviModels[a], e);
        }
        if (t.nextFloors && t.nextFloors.length) {
            n.nextFloors = [];
            for (var s = 0; s < t.nextFloors.length; ++s) n.nextFloors[s] = t.nextFloors[s];
        }
        if (t.naviExtents && t.naviExtents.length) {
            n.naviExtents = [];
            for (var l = 0; l < t.naviExtents.length; ++l) n.naviExtents[l] = MS.protobuf.FloorNavi.NaviExtent.toObject(t.naviExtents[l], e);
        }
        return n;
    }, QS.prototype.toJSON = function() {
        return this.constructor.toObject(this, wS.util.toJSONOptions);
    }, QS.NaviNode = ($S.prototype.nodeId = 0, $S.prototype.nodeType = 0, $S.prototype.liftType = 0, 
    $S.prototype.liftFlag = 0, $S.prototype.liftEntry = 0, $S.prototype.liftFloor = "", 
    $S.prototype.linkSeg = "", $S.prototype.geo = "", $S.prototype.entranceType = 0, 
    $S.prototype.entranceFloor = "", $S.prototype.doortype = 0, $S.prototype.idxs = OS.emptyArray, 
    $S.prototype.pts = OS.emptyArray, $S.prototype.accessible = 0, $S.create = function(t) {
        return new $S(t);
    }, $S.encode = function(t, e) {
        if (e = e || ES.create(), null != t.nodeId && Object.hasOwnProperty.call(t, "nodeId") && e.uint32(8).int32(t.nodeId), 
        null != t.nodeType && Object.hasOwnProperty.call(t, "nodeType") && e.uint32(16).int32(t.nodeType), 
        null != t.liftType && Object.hasOwnProperty.call(t, "liftType") && e.uint32(24).int32(t.liftType), 
        null != t.liftFlag && Object.hasOwnProperty.call(t, "liftFlag") && e.uint32(32).int32(t.liftFlag), 
        null != t.liftEntry && Object.hasOwnProperty.call(t, "liftEntry") && e.uint32(40).int32(t.liftEntry), 
        null != t.liftFloor && Object.hasOwnProperty.call(t, "liftFloor") && e.uint32(50).string(t.liftFloor), 
        null != t.linkSeg && Object.hasOwnProperty.call(t, "linkSeg") && e.uint32(58).string(t.linkSeg), 
        null != t.geo && Object.hasOwnProperty.call(t, "geo") && e.uint32(66).string(t.geo), 
        null != t.entranceType && Object.hasOwnProperty.call(t, "entranceType") && e.uint32(72).int32(t.entranceType), 
        null != t.entranceFloor && Object.hasOwnProperty.call(t, "entranceFloor") && e.uint32(82).string(t.entranceFloor), 
        null != t.doortype && Object.hasOwnProperty.call(t, "doortype") && e.uint32(88).int32(t.doortype), 
        null != t.idxs && t.idxs.length) for (var n = 0; n < t.idxs.length; ++n) e.uint32(96).int32(t.idxs[n]);
        if (null != t.pts && t.pts.length) for (var r = 0; r < t.pts.length; ++r) e.uint32(105).double(t.pts[r]);
        return null != t.accessible && Object.hasOwnProperty.call(t, "accessible") && e.uint32(112).int32(t.accessible), 
        e;
    }, $S.encodeDelimited = function(t, e) {
        return this.encode(t, e).ldelim();
    }, $S.decode = function(t, e) {
        t instanceof _S || (t = _S.create(t));
        for (var n = void 0 === e ? t.len : t.pos + e, r = new MS.protobuf.FloorNavi.NaviNode(); t.pos < n; ) {
            var i = t.uint32();
            switch (i >>> 3) {
              case 1:
                r.nodeId = t.int32();
                break;

              case 2:
                r.nodeType = t.int32();
                break;

              case 3:
                r.liftType = t.int32();
                break;

              case 4:
                r.liftFlag = t.int32();
                break;

              case 5:
                r.liftEntry = t.int32();
                break;

              case 6:
                r.liftFloor = t.string();
                break;

              case 7:
                r.linkSeg = t.string();
                break;

              case 8:
                r.geo = t.string();
                break;

              case 9:
                r.entranceType = t.int32();
                break;

              case 10:
                r.entranceFloor = t.string();
                break;

              case 11:
                r.doortype = t.int32();
                break;

              case 12:
                if (r.idxs && r.idxs.length || (r.idxs = []), 2 == (7 & i)) for (var o = t.uint32() + t.pos; t.pos < o; ) r.idxs.push(t.int32()); else r.idxs.push(t.int32());
                break;

              case 13:
                if (r.pts && r.pts.length || (r.pts = []), 2 == (7 & i)) for (var a = t.uint32() + t.pos; t.pos < a; ) r.pts.push(t.double()); else r.pts.push(t.double());
                break;

              case 14:
                r.accessible = t.int32();
                break;

              default:
                t.skipType(7 & i);
            }
        }
        return r;
    }, $S.decodeDelimited = function(t) {
        return t instanceof _S || (t = new _S(t)), this.decode(t, t.uint32());
    }, $S.verify = function(t) {
        if ("object" !== SS(t) || null === t) return "object expected";
        if (null != t.nodeId && t.hasOwnProperty("nodeId") && !OS.isInteger(t.nodeId)) return "nodeId: integer expected";
        if (null != t.nodeType && t.hasOwnProperty("nodeType") && !OS.isInteger(t.nodeType)) return "nodeType: integer expected";
        if (null != t.liftType && t.hasOwnProperty("liftType") && !OS.isInteger(t.liftType)) return "liftType: integer expected";
        if (null != t.liftFlag && t.hasOwnProperty("liftFlag") && !OS.isInteger(t.liftFlag)) return "liftFlag: integer expected";
        if (null != t.liftEntry && t.hasOwnProperty("liftEntry") && !OS.isInteger(t.liftEntry)) return "liftEntry: integer expected";
        if (null != t.liftFloor && t.hasOwnProperty("liftFloor") && !OS.isString(t.liftFloor)) return "liftFloor: string expected";
        if (null != t.linkSeg && t.hasOwnProperty("linkSeg") && !OS.isString(t.linkSeg)) return "linkSeg: string expected";
        if (null != t.geo && t.hasOwnProperty("geo") && !OS.isString(t.geo)) return "geo: string expected";
        if (null != t.entranceType && t.hasOwnProperty("entranceType") && !OS.isInteger(t.entranceType)) return "entranceType: integer expected";
        if (null != t.entranceFloor && t.hasOwnProperty("entranceFloor") && !OS.isString(t.entranceFloor)) return "entranceFloor: string expected";
        if (null != t.doortype && t.hasOwnProperty("doortype") && !OS.isInteger(t.doortype)) return "doortype: integer expected";
        if (null != t.idxs && t.hasOwnProperty("idxs")) {
            if (!Array.isArray(t.idxs)) return "idxs: array expected";
            for (var e = 0; e < t.idxs.length; ++e) if (!OS.isInteger(t.idxs[e])) return "idxs: integer[] expected";
        }
        if (null != t.pts && t.hasOwnProperty("pts")) {
            if (!Array.isArray(t.pts)) return "pts: array expected";
            for (var n = 0; n < t.pts.length; ++n) if ("number" != typeof t.pts[n]) return "pts: number[] expected";
        }
        return null != t.accessible && t.hasOwnProperty("accessible") && !OS.isInteger(t.accessible) ? "accessible: integer expected" : null;
    }, $S.fromObject = function(t) {
        if (t instanceof MS.protobuf.FloorNavi.NaviNode) return t;
        var e = new MS.protobuf.FloorNavi.NaviNode();
        if (null != t.nodeId && (e.nodeId = 0 | t.nodeId), null != t.nodeType && (e.nodeType = 0 | t.nodeType), 
        null != t.liftType && (e.liftType = 0 | t.liftType), null != t.liftFlag && (e.liftFlag = 0 | t.liftFlag), 
        null != t.liftEntry && (e.liftEntry = 0 | t.liftEntry), null != t.liftFloor && (e.liftFloor = String(t.liftFloor)), 
        null != t.linkSeg && (e.linkSeg = String(t.linkSeg)), null != t.geo && (e.geo = String(t.geo)), 
        null != t.entranceType && (e.entranceType = 0 | t.entranceType), null != t.entranceFloor && (e.entranceFloor = String(t.entranceFloor)), 
        null != t.doortype && (e.doortype = 0 | t.doortype), t.idxs) {
            if (!Array.isArray(t.idxs)) throw TypeError(".protobuf.FloorNavi.NaviNode.idxs: array expected");
            e.idxs = [];
            for (var n = 0; n < t.idxs.length; ++n) e.idxs[n] = 0 | t.idxs[n];
        }
        if (t.pts) {
            if (!Array.isArray(t.pts)) throw TypeError(".protobuf.FloorNavi.NaviNode.pts: array expected");
            e.pts = [];
            for (var r = 0; r < t.pts.length; ++r) e.pts[r] = Number(t.pts[r]);
        }
        return null != t.accessible && (e.accessible = 0 | t.accessible), e;
    }, $S.toObject = function(t, e) {
        var n = {};
        if (((e = e || {}).arrays || e.defaults) && (n.idxs = [], n.pts = []), e.defaults && (n.nodeId = 0, 
        n.nodeType = 0, n.liftType = 0, n.liftFlag = 0, n.liftEntry = 0, n.liftFloor = "", 
        n.linkSeg = "", n.geo = "", n.entranceType = 0, n.entranceFloor = "", n.doortype = 0, 
        n.accessible = 0), null != t.nodeId && t.hasOwnProperty("nodeId") && (n.nodeId = t.nodeId), 
        null != t.nodeType && t.hasOwnProperty("nodeType") && (n.nodeType = t.nodeType), 
        null != t.liftType && t.hasOwnProperty("liftType") && (n.liftType = t.liftType), 
        null != t.liftFlag && t.hasOwnProperty("liftFlag") && (n.liftFlag = t.liftFlag), 
        null != t.liftEntry && t.hasOwnProperty("liftEntry") && (n.liftEntry = t.liftEntry), 
        null != t.liftFloor && t.hasOwnProperty("liftFloor") && (n.liftFloor = t.liftFloor), 
        null != t.linkSeg && t.hasOwnProperty("linkSeg") && (n.linkSeg = t.linkSeg), null != t.geo && t.hasOwnProperty("geo") && (n.geo = t.geo), 
        null != t.entranceType && t.hasOwnProperty("entranceType") && (n.entranceType = t.entranceType), 
        null != t.entranceFloor && t.hasOwnProperty("entranceFloor") && (n.entranceFloor = t.entranceFloor), 
        null != t.doortype && t.hasOwnProperty("doortype") && (n.doortype = t.doortype), 
        t.idxs && t.idxs.length) {
            n.idxs = [];
            for (var r = 0; r < t.idxs.length; ++r) n.idxs[r] = t.idxs[r];
        }
        if (t.pts && t.pts.length) {
            n.pts = [];
            for (var i = 0; i < t.pts.length; ++i) n.pts[i] = e.json && !isFinite(t.pts[i]) ? String(t.pts[i]) : t.pts[i];
        }
        return null != t.accessible && t.hasOwnProperty("accessible") && (n.accessible = t.accessible), 
        n;
    }, $S.prototype.toJSON = function() {
        return this.constructor.toObject(this, wS.util.toJSONOptions);
    }, $S), QS.NaviSegment = (t_.prototype.segmentId = 0, t_.prototype.snode = 0, t_.prototype.enode = 0, 
    t_.prototype.length = 0, t_.prototype.rank = 0, t_.prototype.name = "", t_.prototype.entry = 0, 
    t_.prototype.desc = "", t_.prototype.geo = "", t_.prototype.through = 0, t_.prototype.idxs = OS.emptyArray, 
    t_.prototype.pts = OS.emptyArray, t_.create = function(t) {
        return new t_(t);
    }, t_.encode = function(t, e) {
        if (e = e || ES.create(), null != t.segmentId && Object.hasOwnProperty.call(t, "segmentId") && e.uint32(8).int32(t.segmentId), 
        null != t.snode && Object.hasOwnProperty.call(t, "snode") && e.uint32(16).int32(t.snode), 
        null != t.enode && Object.hasOwnProperty.call(t, "enode") && e.uint32(24).int32(t.enode), 
        null != t.length && Object.hasOwnProperty.call(t, "length") && e.uint32(33).double(t.length), 
        null != t.rank && Object.hasOwnProperty.call(t, "rank") && e.uint32(40).int32(t.rank), 
        null != t.name && Object.hasOwnProperty.call(t, "name") && e.uint32(50).string(t.name), 
        null != t.entry && Object.hasOwnProperty.call(t, "entry") && e.uint32(56).int32(t.entry), 
        null != t.desc && Object.hasOwnProperty.call(t, "desc") && e.uint32(66).string(t.desc), 
        null != t.geo && Object.hasOwnProperty.call(t, "geo") && e.uint32(74).string(t.geo), 
        null != t.through && Object.hasOwnProperty.call(t, "through") && e.uint32(80).int32(t.through), 
        null != t.idxs && t.idxs.length) for (var n = 0; n < t.idxs.length; ++n) e.uint32(88).int32(t.idxs[n]);
        if (null != t.pts && t.pts.length) for (var r = 0; r < t.pts.length; ++r) e.uint32(97).double(t.pts[r]);
        return e;
    }, t_.encodeDelimited = function(t, e) {
        return this.encode(t, e).ldelim();
    }, t_.decode = function(t, e) {
        t instanceof _S || (t = _S.create(t));
        for (var n = void 0 === e ? t.len : t.pos + e, r = new MS.protobuf.FloorNavi.NaviSegment(); t.pos < n; ) {
            var i = t.uint32();
            switch (i >>> 3) {
              case 1:
                r.segmentId = t.int32();
                break;

              case 2:
                r.snode = t.int32();
                break;

              case 3:
                r.enode = t.int32();
                break;

              case 4:
                r.length = t.double();
                break;

              case 5:
                r.rank = t.int32();
                break;

              case 6:
                r.name = t.string();
                break;

              case 7:
                r.entry = t.int32();
                break;

              case 8:
                r.desc = t.string();
                break;

              case 9:
                r.geo = t.string();
                break;

              case 10:
                r.through = t.int32();
                break;

              case 11:
                if (r.idxs && r.idxs.length || (r.idxs = []), 2 == (7 & i)) for (var o = t.uint32() + t.pos; t.pos < o; ) r.idxs.push(t.int32()); else r.idxs.push(t.int32());
                break;

              case 12:
                if (r.pts && r.pts.length || (r.pts = []), 2 == (7 & i)) for (var a = t.uint32() + t.pos; t.pos < a; ) r.pts.push(t.double()); else r.pts.push(t.double());
                break;

              default:
                t.skipType(7 & i);
            }
        }
        return r;
    }, t_.decodeDelimited = function(t) {
        return t instanceof _S || (t = new _S(t)), this.decode(t, t.uint32());
    }, t_.verify = function(t) {
        if ("object" !== SS(t) || null === t) return "object expected";
        if (null != t.segmentId && t.hasOwnProperty("segmentId") && !OS.isInteger(t.segmentId)) return "segmentId: integer expected";
        if (null != t.snode && t.hasOwnProperty("snode") && !OS.isInteger(t.snode)) return "snode: integer expected";
        if (null != t.enode && t.hasOwnProperty("enode") && !OS.isInteger(t.enode)) return "enode: integer expected";
        if (null != t.length && t.hasOwnProperty("length") && "number" != typeof t.length) return "length: number expected";
        if (null != t.rank && t.hasOwnProperty("rank") && !OS.isInteger(t.rank)) return "rank: integer expected";
        if (null != t.name && t.hasOwnProperty("name") && !OS.isString(t.name)) return "name: string expected";
        if (null != t.entry && t.hasOwnProperty("entry") && !OS.isInteger(t.entry)) return "entry: integer expected";
        if (null != t.desc && t.hasOwnProperty("desc") && !OS.isString(t.desc)) return "desc: string expected";
        if (null != t.geo && t.hasOwnProperty("geo") && !OS.isString(t.geo)) return "geo: string expected";
        if (null != t.through && t.hasOwnProperty("through") && !OS.isInteger(t.through)) return "through: integer expected";
        if (null != t.idxs && t.hasOwnProperty("idxs")) {
            if (!Array.isArray(t.idxs)) return "idxs: array expected";
            for (var e = 0; e < t.idxs.length; ++e) if (!OS.isInteger(t.idxs[e])) return "idxs: integer[] expected";
        }
        if (null != t.pts && t.hasOwnProperty("pts")) {
            if (!Array.isArray(t.pts)) return "pts: array expected";
            for (var n = 0; n < t.pts.length; ++n) if ("number" != typeof t.pts[n]) return "pts: number[] expected";
        }
        return null;
    }, t_.fromObject = function(t) {
        if (t instanceof MS.protobuf.FloorNavi.NaviSegment) return t;
        var e = new MS.protobuf.FloorNavi.NaviSegment();
        if (null != t.segmentId && (e.segmentId = 0 | t.segmentId), null != t.snode && (e.snode = 0 | t.snode), 
        null != t.enode && (e.enode = 0 | t.enode), null != t.length && (e.length = Number(t.length)), 
        null != t.rank && (e.rank = 0 | t.rank), null != t.name && (e.name = String(t.name)), 
        null != t.entry && (e.entry = 0 | t.entry), null != t.desc && (e.desc = String(t.desc)), 
        null != t.geo && (e.geo = String(t.geo)), null != t.through && (e.through = 0 | t.through), 
        t.idxs) {
            if (!Array.isArray(t.idxs)) throw TypeError(".protobuf.FloorNavi.NaviSegment.idxs: array expected");
            e.idxs = [];
            for (var n = 0; n < t.idxs.length; ++n) e.idxs[n] = 0 | t.idxs[n];
        }
        if (t.pts) {
            if (!Array.isArray(t.pts)) throw TypeError(".protobuf.FloorNavi.NaviSegment.pts: array expected");
            e.pts = [];
            for (var r = 0; r < t.pts.length; ++r) e.pts[r] = Number(t.pts[r]);
        }
        return e;
    }, t_.toObject = function(t, e) {
        var n = {};
        if (((e = e || {}).arrays || e.defaults) && (n.idxs = [], n.pts = []), e.defaults && (n.segmentId = 0, 
        n.snode = 0, n.enode = 0, n.length = 0, n.rank = 0, n.name = "", n.entry = 0, n.desc = "", 
        n.geo = "", n.through = 0), null != t.segmentId && t.hasOwnProperty("segmentId") && (n.segmentId = t.segmentId), 
        null != t.snode && t.hasOwnProperty("snode") && (n.snode = t.snode), null != t.enode && t.hasOwnProperty("enode") && (n.enode = t.enode), 
        null != t.length && t.hasOwnProperty("length") && (n.length = e.json && !isFinite(t.length) ? String(t.length) : t.length), 
        null != t.rank && t.hasOwnProperty("rank") && (n.rank = t.rank), null != t.name && t.hasOwnProperty("name") && (n.name = t.name), 
        null != t.entry && t.hasOwnProperty("entry") && (n.entry = t.entry), null != t.desc && t.hasOwnProperty("desc") && (n.desc = t.desc), 
        null != t.geo && t.hasOwnProperty("geo") && (n.geo = t.geo), null != t.through && t.hasOwnProperty("through") && (n.through = t.through), 
        t.idxs && t.idxs.length) {
            n.idxs = [];
            for (var r = 0; r < t.idxs.length; ++r) n.idxs[r] = t.idxs[r];
        }
        if (t.pts && t.pts.length) {
            n.pts = [];
            for (var i = 0; i < t.pts.length; ++i) n.pts[i] = e.json && !isFinite(t.pts[i]) ? String(t.pts[i]) : t.pts[i];
        }
        return n;
    }, t_.prototype.toJSON = function() {
        return this.constructor.toObject(this, wS.util.toJSONOptions);
    }, t_), QS.NaviZone = (e_.prototype.id = 0, e_.prototype.type = 0, e_.prototype.geo = "", 
    e_.prototype.rejects = OS.emptyArray, e_.prototype.idxs = OS.emptyArray, e_.prototype.pts = OS.emptyArray, 
    e_.create = function(t) {
        return new e_(t);
    }, e_.encode = function(t, e) {
        if ((e = e || ES.create()).uint32(8).int32(t.id), e.uint32(16).int32(t.type), null != t.geo && Object.hasOwnProperty.call(t, "geo") && e.uint32(26).string(t.geo), 
        null != t.rejects && t.rejects.length) for (var n = 0; n < t.rejects.length; ++n) e.uint32(34).string(t.rejects[n]);
        if (null != t.idxs && t.idxs.length) for (var r = 0; r < t.idxs.length; ++r) e.uint32(40).int32(t.idxs[r]);
        if (null != t.pts && t.pts.length) for (var i = 0; i < t.pts.length; ++i) e.uint32(49).double(t.pts[i]);
        return e;
    }, e_.encodeDelimited = function(t, e) {
        return this.encode(t, e).ldelim();
    }, e_.decode = function(t, e) {
        t instanceof _S || (t = _S.create(t));
        for (var n = void 0 === e ? t.len : t.pos + e, r = new MS.protobuf.FloorNavi.NaviZone(); t.pos < n; ) {
            var i = t.uint32();
            switch (i >>> 3) {
              case 1:
                r.id = t.int32();
                break;

              case 2:
                r.type = t.int32();
                break;

              case 3:
                r.geo = t.string();
                break;

              case 4:
                r.rejects && r.rejects.length || (r.rejects = []), r.rejects.push(t.string());
                break;

              case 5:
                if (r.idxs && r.idxs.length || (r.idxs = []), 2 == (7 & i)) for (var o = t.uint32() + t.pos; t.pos < o; ) r.idxs.push(t.int32()); else r.idxs.push(t.int32());
                break;

              case 6:
                if (r.pts && r.pts.length || (r.pts = []), 2 == (7 & i)) for (var a = t.uint32() + t.pos; t.pos < a; ) r.pts.push(t.double()); else r.pts.push(t.double());
                break;

              default:
                t.skipType(7 & i);
            }
        }
        if (!r.hasOwnProperty("id")) throw OS.ProtocolError("missing required 'id'", {
            instance: r
        });
        if (r.hasOwnProperty("type")) return r;
        throw OS.ProtocolError("missing required 'type'", {
            instance: r
        });
    }, e_.decodeDelimited = function(t) {
        return t instanceof _S || (t = new _S(t)), this.decode(t, t.uint32());
    }, e_.verify = function(t) {
        if ("object" !== SS(t) || null === t) return "object expected";
        if (!OS.isInteger(t.id)) return "id: integer expected";
        if (!OS.isInteger(t.type)) return "type: integer expected";
        if (null != t.geo && t.hasOwnProperty("geo") && !OS.isString(t.geo)) return "geo: string expected";
        if (null != t.rejects && t.hasOwnProperty("rejects")) {
            if (!Array.isArray(t.rejects)) return "rejects: array expected";
            for (var e = 0; e < t.rejects.length; ++e) if (!OS.isString(t.rejects[e])) return "rejects: string[] expected";
        }
        if (null != t.idxs && t.hasOwnProperty("idxs")) {
            if (!Array.isArray(t.idxs)) return "idxs: array expected";
            for (var n = 0; n < t.idxs.length; ++n) if (!OS.isInteger(t.idxs[n])) return "idxs: integer[] expected";
        }
        if (null != t.pts && t.hasOwnProperty("pts")) {
            if (!Array.isArray(t.pts)) return "pts: array expected";
            for (var r = 0; r < t.pts.length; ++r) if ("number" != typeof t.pts[r]) return "pts: number[] expected";
        }
        return null;
    }, e_.fromObject = function(t) {
        if (t instanceof MS.protobuf.FloorNavi.NaviZone) return t;
        var e = new MS.protobuf.FloorNavi.NaviZone();
        if (null != t.id && (e.id = 0 | t.id), null != t.type && (e.type = 0 | t.type), 
        null != t.geo && (e.geo = String(t.geo)), t.rejects) {
            if (!Array.isArray(t.rejects)) throw TypeError(".protobuf.FloorNavi.NaviZone.rejects: array expected");
            e.rejects = [];
            for (var n = 0; n < t.rejects.length; ++n) e.rejects[n] = String(t.rejects[n]);
        }
        if (t.idxs) {
            if (!Array.isArray(t.idxs)) throw TypeError(".protobuf.FloorNavi.NaviZone.idxs: array expected");
            e.idxs = [];
            for (var r = 0; r < t.idxs.length; ++r) e.idxs[r] = 0 | t.idxs[r];
        }
        if (t.pts) {
            if (!Array.isArray(t.pts)) throw TypeError(".protobuf.FloorNavi.NaviZone.pts: array expected");
            e.pts = [];
            for (var i = 0; i < t.pts.length; ++i) e.pts[i] = Number(t.pts[i]);
        }
        return e;
    }, e_.toObject = function(t, e) {
        var n = {};
        if (((e = e || {}).arrays || e.defaults) && (n.rejects = [], n.idxs = [], n.pts = []), 
        e.defaults && (n.id = 0, n.type = 0, n.geo = ""), null != t.id && t.hasOwnProperty("id") && (n.id = t.id), 
        null != t.type && t.hasOwnProperty("type") && (n.type = t.type), null != t.geo && t.hasOwnProperty("geo") && (n.geo = t.geo), 
        t.rejects && t.rejects.length) {
            n.rejects = [];
            for (var r = 0; r < t.rejects.length; ++r) n.rejects[r] = t.rejects[r];
        }
        if (t.idxs && t.idxs.length) {
            n.idxs = [];
            for (var i = 0; i < t.idxs.length; ++i) n.idxs[i] = t.idxs[i];
        }
        if (t.pts && t.pts.length) {
            n.pts = [];
            for (var o = 0; o < t.pts.length; ++o) n.pts[o] = e.json && !isFinite(t.pts[o]) ? String(t.pts[o]) : t.pts[o];
        }
        return n;
    }, e_.prototype.toJSON = function() {
        return this.constructor.toObject(this, wS.util.toJSONOptions);
    }, e_), QS.NaviModel = (n_.prototype.modelid = 0, n_.prototype.doorids = OS.emptyArray, 
    n_.prototype.nodetypes = OS.emptyArray, n_.prototype.entrytypes = OS.emptyArray, 
    n_.create = function(t) {
        return new n_(t);
    }, n_.encode = function(t, e) {
        if ((e = e || ES.create()).uint32(8).int32(t.modelid), null != t.doorids && t.doorids.length) for (var n = 0; n < t.doorids.length; ++n) e.uint32(16).int32(t.doorids[n]);
        if (null != t.nodetypes && t.nodetypes.length) for (var r = 0; r < t.nodetypes.length; ++r) e.uint32(24).int32(t.nodetypes[r]);
        if (null != t.entrytypes && t.entrytypes.length) for (var i = 0; i < t.entrytypes.length; ++i) e.uint32(32).int32(t.entrytypes[i]);
        return e;
    }, n_.encodeDelimited = function(t, e) {
        return this.encode(t, e).ldelim();
    }, n_.decode = function(t, e) {
        t instanceof _S || (t = _S.create(t));
        for (var n = void 0 === e ? t.len : t.pos + e, r = new MS.protobuf.FloorNavi.NaviModel(); t.pos < n; ) {
            var i = t.uint32();
            switch (i >>> 3) {
              case 1:
                r.modelid = t.int32();
                break;

              case 2:
                if (r.doorids && r.doorids.length || (r.doorids = []), 2 == (7 & i)) for (var o = t.uint32() + t.pos; t.pos < o; ) r.doorids.push(t.int32()); else r.doorids.push(t.int32());
                break;

              case 3:
                if (r.nodetypes && r.nodetypes.length || (r.nodetypes = []), 2 == (7 & i)) for (var a = t.uint32() + t.pos; t.pos < a; ) r.nodetypes.push(t.int32()); else r.nodetypes.push(t.int32());
                break;

              case 4:
                if (r.entrytypes && r.entrytypes.length || (r.entrytypes = []), 2 == (7 & i)) for (var s = t.uint32() + t.pos; t.pos < s; ) r.entrytypes.push(t.int32()); else r.entrytypes.push(t.int32());
                break;

              default:
                t.skipType(7 & i);
            }
        }
        if (r.hasOwnProperty("modelid")) return r;
        throw OS.ProtocolError("missing required 'modelid'", {
            instance: r
        });
    }, n_.decodeDelimited = function(t) {
        return t instanceof _S || (t = new _S(t)), this.decode(t, t.uint32());
    }, n_.verify = function(t) {
        if ("object" !== SS(t) || null === t) return "object expected";
        if (!OS.isInteger(t.modelid)) return "modelid: integer expected";
        if (null != t.doorids && t.hasOwnProperty("doorids")) {
            if (!Array.isArray(t.doorids)) return "doorids: array expected";
            for (var e = 0; e < t.doorids.length; ++e) if (!OS.isInteger(t.doorids[e])) return "doorids: integer[] expected";
        }
        if (null != t.nodetypes && t.hasOwnProperty("nodetypes")) {
            if (!Array.isArray(t.nodetypes)) return "nodetypes: array expected";
            for (var n = 0; n < t.nodetypes.length; ++n) if (!OS.isInteger(t.nodetypes[n])) return "nodetypes: integer[] expected";
        }
        if (null != t.entrytypes && t.hasOwnProperty("entrytypes")) {
            if (!Array.isArray(t.entrytypes)) return "entrytypes: array expected";
            for (var r = 0; r < t.entrytypes.length; ++r) if (!OS.isInteger(t.entrytypes[r])) return "entrytypes: integer[] expected";
        }
        return null;
    }, n_.fromObject = function(t) {
        if (t instanceof MS.protobuf.FloorNavi.NaviModel) return t;
        var e = new MS.protobuf.FloorNavi.NaviModel();
        if (null != t.modelid && (e.modelid = 0 | t.modelid), t.doorids) {
            if (!Array.isArray(t.doorids)) throw TypeError(".protobuf.FloorNavi.NaviModel.doorids: array expected");
            e.doorids = [];
            for (var n = 0; n < t.doorids.length; ++n) e.doorids[n] = 0 | t.doorids[n];
        }
        if (t.nodetypes) {
            if (!Array.isArray(t.nodetypes)) throw TypeError(".protobuf.FloorNavi.NaviModel.nodetypes: array expected");
            e.nodetypes = [];
            for (var r = 0; r < t.nodetypes.length; ++r) e.nodetypes[r] = 0 | t.nodetypes[r];
        }
        if (t.entrytypes) {
            if (!Array.isArray(t.entrytypes)) throw TypeError(".protobuf.FloorNavi.NaviModel.entrytypes: array expected");
            e.entrytypes = [];
            for (var i = 0; i < t.entrytypes.length; ++i) e.entrytypes[i] = 0 | t.entrytypes[i];
        }
        return e;
    }, n_.toObject = function(t, e) {
        var n = {};
        if (((e = e || {}).arrays || e.defaults) && (n.doorids = [], n.nodetypes = [], n.entrytypes = []), 
        e.defaults && (n.modelid = 0), null != t.modelid && t.hasOwnProperty("modelid") && (n.modelid = t.modelid), 
        t.doorids && t.doorids.length) {
            n.doorids = [];
            for (var r = 0; r < t.doorids.length; ++r) n.doorids[r] = t.doorids[r];
        }
        if (t.nodetypes && t.nodetypes.length) {
            n.nodetypes = [];
            for (var i = 0; i < t.nodetypes.length; ++i) n.nodetypes[i] = t.nodetypes[i];
        }
        if (t.entrytypes && t.entrytypes.length) {
            n.entrytypes = [];
            for (var o = 0; o < t.entrytypes.length; ++o) n.entrytypes[o] = t.entrytypes[o];
        }
        return n;
    }, n_.prototype.toJSON = function() {
        return this.constructor.toObject(this, wS.util.toJSONOptions);
    }, n_), QS.NaviExtent = (r_.prototype.id = 0, r_.prototype.pts = OS.emptyArray, 
    r_.prototype.idxs = OS.emptyArray, r_.create = function(t) {
        return new r_(t);
    }, r_.encode = function(t, e) {
        if ((e = e || ES.create()).uint32(8).int32(t.id), null != t.pts && t.pts.length) for (var n = 0; n < t.pts.length; ++n) e.uint32(17).double(t.pts[n]);
        if (null != t.idxs && t.idxs.length) for (var r = 0; r < t.idxs.length; ++r) MS.protobuf.FloorNavi.NaviExtent.IndexInfo.encode(t.idxs[r], e.uint32(26).fork()).ldelim();
        return e;
    }, r_.encodeDelimited = function(t, e) {
        return this.encode(t, e).ldelim();
    }, r_.decode = function(t, e) {
        t instanceof _S || (t = _S.create(t));
        for (var n = void 0 === e ? t.len : t.pos + e, r = new MS.protobuf.FloorNavi.NaviExtent(); t.pos < n; ) {
            var i = t.uint32();
            switch (i >>> 3) {
              case 1:
                r.id = t.int32();
                break;

              case 2:
                if (r.pts && r.pts.length || (r.pts = []), 2 == (7 & i)) for (var o = t.uint32() + t.pos; t.pos < o; ) r.pts.push(t.double()); else r.pts.push(t.double());
                break;

              case 3:
                r.idxs && r.idxs.length || (r.idxs = []), r.idxs.push(MS.protobuf.FloorNavi.NaviExtent.IndexInfo.decode(t, t.uint32()));
                break;

              default:
                t.skipType(7 & i);
            }
        }
        if (r.hasOwnProperty("id")) return r;
        throw OS.ProtocolError("missing required 'id'", {
            instance: r
        });
    }, r_.decodeDelimited = function(t) {
        return t instanceof _S || (t = new _S(t)), this.decode(t, t.uint32());
    }, r_.verify = function(t) {
        if ("object" !== SS(t) || null === t) return "object expected";
        if (!OS.isInteger(t.id)) return "id: integer expected";
        if (null != t.pts && t.hasOwnProperty("pts")) {
            if (!Array.isArray(t.pts)) return "pts: array expected";
            for (var e = 0; e < t.pts.length; ++e) if ("number" != typeof t.pts[e]) return "pts: number[] expected";
        }
        if (null != t.idxs && t.hasOwnProperty("idxs")) {
            if (!Array.isArray(t.idxs)) return "idxs: array expected";
            for (var n = 0; n < t.idxs.length; ++n) {
                var r = MS.protobuf.FloorNavi.NaviExtent.IndexInfo.verify(t.idxs[n]);
                if (r) return "idxs." + r;
            }
        }
        return null;
    }, r_.fromObject = function(t) {
        if (t instanceof MS.protobuf.FloorNavi.NaviExtent) return t;
        var e = new MS.protobuf.FloorNavi.NaviExtent();
        if (null != t.id && (e.id = 0 | t.id), t.pts) {
            if (!Array.isArray(t.pts)) throw TypeError(".protobuf.FloorNavi.NaviExtent.pts: array expected");
            e.pts = [];
            for (var n = 0; n < t.pts.length; ++n) e.pts[n] = Number(t.pts[n]);
        }
        if (t.idxs) {
            if (!Array.isArray(t.idxs)) throw TypeError(".protobuf.FloorNavi.NaviExtent.idxs: array expected");
            e.idxs = [];
            for (var r = 0; r < t.idxs.length; ++r) {
                if ("object" !== SS(t.idxs[r])) throw TypeError(".protobuf.FloorNavi.NaviExtent.idxs: object expected");
                e.idxs[r] = MS.protobuf.FloorNavi.NaviExtent.IndexInfo.fromObject(t.idxs[r]);
            }
        }
        return e;
    }, r_.toObject = function(t, e) {
        var n = {};
        if (((e = e || {}).arrays || e.defaults) && (n.pts = [], n.idxs = []), e.defaults && (n.id = 0), 
        null != t.id && t.hasOwnProperty("id") && (n.id = t.id), t.pts && t.pts.length) {
            n.pts = [];
            for (var r = 0; r < t.pts.length; ++r) n.pts[r] = e.json && !isFinite(t.pts[r]) ? String(t.pts[r]) : t.pts[r];
        }
        if (t.idxs && t.idxs.length) {
            n.idxs = [];
            for (var i = 0; i < t.idxs.length; ++i) n.idxs[i] = MS.protobuf.FloorNavi.NaviExtent.IndexInfo.toObject(t.idxs[i], e);
        }
        return n;
    }, r_.prototype.toJSON = function() {
        return this.constructor.toObject(this, wS.util.toJSONOptions);
    }, r_.IndexInfo = (i_.prototype.idxs = OS.emptyArray, i_.create = function(t) {
        return new i_(t);
    }, i_.encode = function(t, e) {
        if (e = e || ES.create(), null != t.idxs && t.idxs.length) for (var n = 0; n < t.idxs.length; ++n) e.uint32(8).int32(t.idxs[n]);
        return e;
    }, i_.encodeDelimited = function(t, e) {
        return this.encode(t, e).ldelim();
    }, i_.decode = function(t, e) {
        t instanceof _S || (t = _S.create(t));
        for (var n = void 0 === e ? t.len : t.pos + e, r = new MS.protobuf.FloorNavi.NaviExtent.IndexInfo(); t.pos < n; ) {
            var i = t.uint32();
            if (i >>> 3 == 1) if (r.idxs && r.idxs.length || (r.idxs = []), 2 == (7 & i)) for (var o = t.uint32() + t.pos; t.pos < o; ) r.idxs.push(t.int32()); else r.idxs.push(t.int32()); else t.skipType(7 & i);
        }
        return r;
    }, i_.decodeDelimited = function(t) {
        return t instanceof _S || (t = new _S(t)), this.decode(t, t.uint32());
    }, i_.verify = function(t) {
        if ("object" !== SS(t) || null === t) return "object expected";
        if (null != t.idxs && t.hasOwnProperty("idxs")) {
            if (!Array.isArray(t.idxs)) return "idxs: array expected";
            for (var e = 0; e < t.idxs.length; ++e) if (!OS.isInteger(t.idxs[e])) return "idxs: integer[] expected";
        }
        return null;
    }, i_.fromObject = function(t) {
        if (t instanceof MS.protobuf.FloorNavi.NaviExtent.IndexInfo) return t;
        var e = new MS.protobuf.FloorNavi.NaviExtent.IndexInfo();
        if (t.idxs) {
            if (!Array.isArray(t.idxs)) throw TypeError(".protobuf.FloorNavi.NaviExtent.IndexInfo.idxs: array expected");
            e.idxs = [];
            for (var n = 0; n < t.idxs.length; ++n) e.idxs[n] = 0 | t.idxs[n];
        }
        return e;
    }, i_.toObject = function(t, e) {
        var n = {};
        if (((e = e || {}).arrays || e.defaults) && (n.idxs = []), t.idxs && t.idxs.length) {
            n.idxs = [];
            for (var r = 0; r < t.idxs.length; ++r) n.idxs[r] = t.idxs[r];
        }
        return n;
    }, i_.prototype.toJSON = function() {
        return this.constructor.toObject(this, wS.util.toJSONOptions);
    }, i_), r_), QS), gy), pb = function(t, e, n) {
        return e && a_(t.prototype, e), n && a_(t, n), Object.defineProperty(t, "prototype", {
            writable: !1
        }), t;
    }(function t() {
        if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
        this.ns = null;
    }), Object.assign(pb.prototype, {
        es: function() {
            this.ns || (this.ns = MS.protobuf);
        },
        rs: function(t) {
            return this.es(), this.ns.Map.decode(t);
        },
        ss: function(t) {
            for (var e = 0; e < t.buffers.length; e++) {
                var n = t.buffers[e];
                if (1 == n.btype) return this.us(n.data);
            }
            return null;
        },
        cs: function(t) {
            for (var e = 0; e < t.buffers.length; e++) {
                var n = t.buffers[e];
                if (7 == n.btype) return this.hs(n.data);
            }
            return null;
        },
        ls: function(t, e) {
            for (var n = 0; n < t.buffers.length; n++) {
                var r = t.buffers[n];
                if (2 == r.btype && r.gid == e) return this.ds(r.data);
            }
            return null;
        },
        vs: function(t, e) {
            for (var n = 0; n < t.buffers.length; n++) {
                var r = t.buffers[n];
                if (3 == r.btype && r.gid == e) return this.ps(r.data);
            }
            return null;
        },
        ys: function(t, e) {
            for (var n = 0; n < t.buffers.length; n++) {
                var r = t.buffers[n];
                if (4 == r.btype && r.gid == e) return this.bs(r.data);
            }
            return null;
        },
        gs: function(t, e) {
            for (var n = 0; n < t.buffers.length; n++) {
                var r = t.buffers[n];
                if (5 === r.btype && r.gid === e) return this.bs(r.data);
            }
            return null;
        },
        ws: function(t, e) {
            for (var n = 0; n < t.buffers.length; n++) {
                var r = t.buffers[n];
                if (6 === r.btype && r.gid === e) return this.bs(r.data);
            }
            return null;
        },
        us: function(t) {
            this.es();
            var e = this.ns.Scene.decode(t);
            return e.levels = [], e.layerGroups.forEach(function(t) {
                e.levels.push(t.gid);
            }), e;
        },
        hs: function(t) {
            return this.es(), this.ns.Gate.decode(t);
        },
        ds: function(t) {
            return this.es(), this.ns.FloorGeo.decode(t);
        },
        ps: function(t) {
            return this.es(), this.ns.FloorBiz.decode(t);
        },
        bs: function(t) {
            return this.es(), this.ns.FloorNavi.decode(t);
        }
    }), _b = pb, bw = function() {
        var t = n, e = Qm;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t, e) {
            var r;
            if (this instanceof n) return (r = u_(this, n, [ e = e || {} ])).Re = Ct.HEAT_MAP_MARKER, 
            r.jt = t, r.Jm = e.backgroundColor, r.ht = e.opacity, r.Qv = void 0 !== e.radius ? e.radius : 30, 
            r.gb = void 0 !== e.valueRange ? void 0 !== e.valueRange.max ? void 0 !== e.valueRange.min ? e.valueRange : {
                max: e.valueRange.max,
                min: 0
            } : void 0 !== e.valueRange.min ? {
                max: 100,
                min: e.valueRange.min
            } : {
                max: 100,
                min: 0
            } : {
                max: 100,
                min: 0
            }, r.gb.min >= r.gb.max && (r.gb = {
                max: 100,
                min: 0
            }), r.wb = void 0 !== e.quality ? e.quality : 1024, r.Qf = void 0 === e.isPlane || e.isPlane, 
            r._b = r.Qf, r.m0 = void 0 !== e.gradient ? e.gradient : {
                .45: "rgb(0,0,255)",
                .55: "rgb(0,255,255)",
                .65: "rgb(0,255,0)",
                .95: "yellow",
                1: "rgb(255,0,0)"
            }, r.lt = e.maxOpacity, void 0 === r.lt && (r.lt = 1), void 0 !== r.ht && (r.lt = r.ht), 
            r.dt = e.minOpacity, void 0 === r.dt && (r.dt = 0), r.ft = e.blur, void 0 === r.ft && (r.ft = .85), 
            r.Sb = e.scaleRadius, void 0 === r.Sb && (r.Sb = !0), r.nt = e.height, void 0 === r.nt && (r.nt = 1), 
            r.Qf || (r.Sb = !0), r.Vf = [], r.xb = null, r.B = null, r.Eb = null, r.Mb = 0, 
            r.Ay = null, r.th = null, r.Ob = void 0, r.Tb = null, r.jb = null, r.Lb = null, 
            r.kb = null, r.Ab = null, r.Rb = null, r.Cb = r.Cb.bind(c_(r)), r.Nb = 11, r.Pb = 22, 
            r.Db = null, r;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && m_(t, e), t = n, (e = [ {
            key: "bound",
            get: function() {
                var t, e;
                return !0 === this.needUpdateBound && null !== this.Ay && (this.xe.reset(), t = this.Ay.getLayers(Ct.MODEL_LAYER)[0], 
                !1 === this.Qf ? (e = this.Ay.getLayers(Ct.EXTENT_LAYER)[0], t && this.xe.expand(t.bound), 
                e && this.xe.expand(e.bound)) : t && this.xe.expand(t.bound), this.needUpdateBound = !1), 
                this.xe.clone();
            }
        }, {
            key: "x",
            get: function() {
                return this._t;
            }
        }, {
            key: "y",
            get: function() {
                return this.St;
            }
        }, {
            key: "height",
            get: function() {
                return this.nt;
            },
            set: function(t) {
                this._b && (this.nt = t, this.Lv());
            }
        }, {
            key: "opacity",
            get: function() {
                return this.ht;
            },
            set: function(t) {
                this.ht = t, this.lt = this.ht, this.Tb && this.Tb.configure({
                    radius: this.Qv,
                    valueRange: this.gb,
                    maxOpacity: this.lt,
                    minOpacity: this.dt,
                    gradient: this.m0,
                    blur: this.ft
                });
            }
        }, {
            key: "valueRange",
            get: function() {
                return this.gb;
            },
            set: function(t) {
                void 0 !== t.max && (this.gb.max = t.max), void 0 !== t.min && (this.gb.min = t.min), 
                this.gb.min >= this.gb.max && (this.gb = {
                    max: 100,
                    min: 0
                });
            }
        }, {
            key: "level",
            get: function() {
                return this.Ay.level;
            }
        }, {
            key: "visible",
            get: function() {
                return p_(y_(n.prototype), "visible", this);
            },
            set: function(t) {
                if (this.Yi !== t) {
                    var e = y_(n.prototype);
                    if (!h_(e, "visible", t, this || e)) throw new TypeError("failed to set property");
                    this.Qf ? this.Yi && this.Ib() && (this.Vf.length = 0, this.Fb(), this.update()) : (t ? this.Bt.$f(this.th) : this.Bt.$f(null), 
                    this.jt.enableUpdateRender());
                }
            }
        }, {
            key: "simulate",
            value: function(t) {
                this.Mb = t;
            }
        }, {
            key: "clearDataSource",
            value: function() {
                this.B = null, this.Vf = [];
            }
        }, {
            key: "addPoint",
            value: function(t, e, n) {
                var r;
                t && e && n && (r = this.Ay.getLayers(Ct.EXTENT_LAYER)[0].bound, t = this.Gb(t, e, r)) && (t.x = Math.round(t.x), 
                t.y = Math.round(t.y), t.value = n, t.radius = this.Qv, this.Vf.push(t));
            }
        }, {
            key: "addDataSource",
            value: function(t) {
                this.B = t, this.Vf = [];
            }
        }, {
            key: "update",
            value: function() {
                var t;
                0 === this.Vf.length && null != this.B && (t = (t = this.Ay.getExtendByCoords(this.B[0])) || this.Ay.getLayers(Ct.EXTENT_LAYER)[0], 
                this.Sb ? this.Ub(t.bound) : this.Fb()), jt.a.environment === Ut.a.WX && (this.Eb.width = this.xb.width, 
                this.Eb.height = this.xb.height), this.Tb.setData({
                    max: this.gb.max,
                    min: this.gb.min,
                    data: this.Vf
                }), this.Bb(), this.Qf ? this.Sb ? (t = this.xi.material.map, this.xi.material.map = this.th, 
                this.xi.material.map.needsUpdate = !0, this.xi.material.needsUpdate = !0, t.dispose()) : this.Hb() : this.Bt.$f(this.th), 
                this.jt.enableUpdateRender();
            }
        }, {
            key: "addTo",
            value: function(t) {
                this.Ay = t;
                var e = null;
                if (null === this.B) e = this.Ay.getLayers(Ct.EXTENT_LAYER)[0].Nt[0]; else {
                    for (var r = [], i = (e = (e = this.Ay.getExtendByCoords(this.B[0])) || this.Ay.getLayers(Ct.EXTENT_LAYER)[0].Nt[0]).B.Ce[0], o = 0; o < this.B.length; o++) Ve.Fn(this.B[o], i, i.length) && r.push(this.B[o]);
                    this.B = r;
                }
                var a = e.bound;
                this.jb = e.bound, this.Lb = e, jt.a.environment === Ut.a.WX ? this.Eb = kb.textureCanvas[0] : this.Eb = document.createElement("canvas"), 
                0 != this.Mb && this.zb(this.Mb), null != this.B && (this.Sb ? (this.xb = this.Vb(a), 
                this.Eb.width = this.xb.width, this.Eb.height = this.xb.height, this.Ub(a)) : (e = this.Wb(), 
                this.Yb(e), this.Rb = this.Vb(this.kb), jt.a.environment === Ut.a.WX ? this.Ab = kb.textureCanvas[0] : this.Ab = document.createElement("canvas"), 
                this.Ab.width = this.Rb.width, this.Ab.height = this.Rb.height, this.Ub(this.kb, e))), 
                a = {
                    radius: this.Qv,
                    valueRange: this.gb,
                    maxOpacity: this.lt,
                    minOpacity: this.dt,
                    gradient: this.m0,
                    blur: this.ft
                };
                this.Sb ? a.canvas = this.Eb : a.canvas = this.Ab, this.Tb = jt.a.heatmap.create(a), 
                null !== this.B && this.Tb.setData({
                    max: this.gb.max,
                    min: this.gb.min,
                    data: this.Vf
                }), p_(y_(n.prototype), "addTo", this).call(this, t), this.needUpdateBound = !0;
            }
        }, {
            key: "remove",
            value: function() {
                this.Sb || (this.jt.off("zoom", this.Cb), this.jt.off("levelChanged", this.Cb), 
                this.jt.off("visibleLevelsLoaded", this.Cb), this.jt.off("move", this.Cb), this.jt.off("viewChanged", this.Cb), 
                this.jt.off("resize", this.Cb)), p_(y_(n.prototype), "remove", this).call(this);
            }
        }, {
            key: "dispose",
            value: function() {
                p_(y_(n.prototype), "dispose", this).call(this), this.Ay = null, this.th && this.th.dispose(), 
                this.th = null;
            }
        } ]) && l_(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }(), Object.assign(bw.prototype, {
        Bb: function() {
            var t, e, n = this;
            jt.a.environment === Ut.a.WX ? (this.Sb || this.Xb(), t = this.Eb.toDataURL("image/png"), 
            this.th ? this.image && (this.image.crossOrigin = "Anonymous", this.image.onload = function() {
                n.th.image = n.image, n.xi.material.map = n.th, n.xi.material.map.needsUpdate = !0, 
                n.xi.material.needsUpdate = !0, n.jt.enableUpdateRender();
            }, this.image.src = t) : (e = new Zn(), (this.th = e).minFilter = yt, jt.a.textureHelper.createImage({
                url: t,
                onload: function(t) {
                    n.th.image = t, n.th.needsUpdate = !0, n.image = t, n.xi.material.map = n.th, n.xi.material.map.needsUpdate = !0, 
                    n.xi.material.needsUpdate = !0, n.jt.enableUpdateRender();
                }
            }))) : (this.Sb || this.Xb(), this.th = new Zn(this.Zb(this.Eb)));
        },
        qb: function() {
            var t = new Qr(16777215);
            return t.opacity = 1, t.transparent = !0, t.map = this.th, t.map && (t.map.needsUpdate = !0), 
            t.depthTest = !1, t.needsUpdate = !0, t;
        },
        lc: function() {
            if (!this.Xf) {
                var t, e, n = (null !== this.B && this.Ay.getExtendByCoords(this.B[0]) || this.Ay.getLayers(Ct.EXTENT_LAYER)[0].Nt[0]).xi;
                if (n) if (this.th = null, this.Bb(), this.Qf) this.Sb ? (t = n.userData, n.userData = {}, 
                e = n.clone(), n.userData = t, e.name = "heatMap", e.scale.z = .001, e.position.y += this.nt, 
                n = this.qb(), e.material = n, this.xi = e, this.xi.mapNode = this) : this.Hb(), 
                this.Xf = !0; else {
                    this.Xf = !0;
                    for (var r = this.Ay.getModelMeshs(), i = 0; i < r.length; i++) if (r[i]) {
                        this.Xf = !0;
                        break;
                    }
                }
                this.Zi(vx).enableUpdateRender(), this.Sb || (this.jt.on("zoom", this.Cb), this.jt.on("levelChanged", this.Cb), 
                this.jt.on("visibleLevelsLoaded", this.Cb), this.jt.on("move", this.Cb), this.jt.on("viewChanged", this.Cb), 
                this.jt.on("resize", this.Cb));
            }
            return this.Xf;
        },
        Xb: function() {
            var t, e, n;
            this.Qf ? this.Eb = this.Ab : (this.xb = this.Vb(this.jb), e = this.xb.width, n = this.xb.height, 
            this.Eb.width = e, this.Eb.height = n, (t = this.Eb.getContext("2d")).clearRect(0, 0, e, n), 
            e = (this.kb.min.x - this.jb.min.x) / (this.jb.max.x - this.jb.min.x) * e, n = (this.jb.max.y - this.kb.max.y) / (this.jb.max.y - this.jb.min.y) * n, 
            t.drawImage(this.Ab, e, n, +this.Ab.width, +this.Ab.height));
        },
        Lv: function() {
            this.xi.position.y = this.nt, this.Zi(vx).enableUpdateRender();
        },
        Gb: function(t, e, n) {
            return t = {
                x: (t - n.min.x) / (n.max.x - n.min.x),
                y: (n.max.y - e) / (n.max.y - n.min.y)
            }, this.Sb ? (t.x = t.x * this.xb.width, t.y = t.y * this.xb.height) : (t.x = t.x * this.Rb.width, 
            t.y = t.y * this.Rb.height), t;
        },
        Jb: function() {
            var t, e;
            return jt.a.environment === Ut.a.WX ? [ t = jt.a.window.screenWidth / 2.54, t ] : (t = [], 
            void 0 !== window.screen.deviceXDPI ? (t[0] = window.screen.deviceXDPI, t[1] = window.screen.deviceYDPI) : ((e = document.createElement("DIV")).style.cssText = "width:1in;height:1in;position:absolute;left:0px;top:0px;z-index:99;visibility:hidden", 
            document.body.appendChild(e), t[0] = parseInt(e.offsetWidth), t[1] = parseInt(e.offsetHeight), 
            e.parentNode.removeChild(e)), t);
        },
        Vb: function(t) {
            var e, n = t.max.x - t.min.x, r = (t = t.max.y - t.min.y, null);
            return this.Sb ? (r = {
                width: Math.round(n),
                height: Math.round(t)
            }, e = this.Jb(), r.width = parseInt(r.width * e[0] / 25.4), r.height = parseInt(r.height * e[1] / 25.4), 
            e = 1, (r.width >= this.wb || r.height >= this.wb) && (r.width >= r.height ? (e = r.height / r.width, 
            r.width = this.wb, r.height = parseInt(this.wb * e)) : (e = r.width / r.height, 
            r.height = this.wb, r.width = parseInt(this.wb * e)))) : (e = this.Kb(), r = {
                width: Math.round(n / e),
                height: Math.round(t / e)
            }), r;
        },
        Zb: function(t) {
            var e = s.floorPowerOfTwo(t.width), n = s.floorPowerOfTwo(t.height), r = (this.Sb || (n < e ? 4096 < e && (r = e / 4096, 
            e = 4096, n /= r) : 4096 < n && (r = n / 4096, n = 4096, e /= r)), void 0 === this.Ob && (this.Ob = document.createElementNS("http://www.w3.org/1999/xhtml", "canvas")), 
            this.Ob.width = e, this.Ob.height = n, this.Ob.getContext("2d"));
            return void 0 !== this.Jm && (r.fillStyle = this.Jm, r.fillRect(0, 0, e, n)), r.drawImage(t, 0, 0, e, n), 
            this.Ob;
        },
        Ub: function(t, e) {
            for (var n = e || this.B, r = 0; r < n.length; r++) {
                var i, o = this.Gb(n[r].x, n[r].y, t);
                if (!o) return !0;
                o.x = Math.round(o.x), o.y = Math.round(o.y), o.value = n[r].value, this.Sb ? (i = this.xb.width / this.jb.size.x, 
                o.radius = this.Qv * i) : o.radius = this.Qv, this.Vf.push(o);
            }
        },
        zb: function(t) {
            this.B = [];
            for (var e = this.Lb.B.Ce[0]; this.B.length < t; ) {
                var n = Math.floor(this.jb.min.x + Math.random() * this.jb.size.x + 1), r = Math.floor(this.jb.min.y + Math.random() * this.jb.size.y + 1), i = this.gb.min + Math.floor(Math.random() * (this.gb.max - this.gb.min) + 1);
                Ve.Fn({
                    x: n,
                    y: r
                }, e, e.length) && this.B.push({
                    x: n,
                    y: r,
                    value: i
                });
            }
        },
        Cb: function() {
            this.Xf && null !== this.B && this.Yi && this.Ib() && (this.Vf.length = 0, this.Fb(), 
            this.update());
        },
        Ib: function() {
            for (var t = !1, e = Array.from(this.jt.getRenderManager().getRenderList().keys()), n = this.Ay.parent, r = 0; r < e.length; r++) {
                var i = e[r].split("%A%B%C%D");
                if ("" + i[0] == "" + n.buildingID && "" + i[1] == "" + this.Ay.level) {
                    t = !0;
                    break;
                }
            }
            return t;
        },
        Fb: function() {
            var t = this.Wb();
            this.Yb(t), this.Rb = this.Vb(this.kb), this.Ub(this.kb, t), this.Tb.gt.setDimensions(this.Rb.width, this.Rb.height);
        },
        Yb: function(t) {
            this.kb = new Xe();
            for (var e = null, n = null, r = null, i = null, o = this.Kb() * this.Qv, a = 0; a < t.length; a++) (null === e || e > t[a].x) && (e = t[a].x), 
            (null === n || n > t[a].y) && (n = t[a].y), (null === r || r < t[a].x) && (r = t[a].x), 
            (null === i || i < t[a].y) && (i = t[a].y);
            this.kb.expandByCoords([ {
                x: e - o,
                y: n - o
            }, {
                x: e - o,
                y: i + o
            }, {
                x: r + o,
                y: i + o
            }, {
                x: r + o,
                y: n - o
            } ]);
        },
        Wb: function() {
            for (var t = [], e = this.B, n = this.Kb() * this.Qv, r = 0; r < e.length; r++) for (var i = ld.circleBuilder(n, e[r], 32), o = 0; o < i.length; o++) if (this.Qb(i[o])) {
                t.push(e[r]);
                break;
            }
            return t;
        },
        Qb: function(t) {
            t = new h(t.x - this.jt.x, this.Ay.height, this.jt.y - t.y);
            var e = this.jt.camera;
            t = t.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix);
            return !(1 < Math.abs(t.x) || 1 < Math.abs(t.y) || 1 < Math.abs(t.z));
        },
        Kb: function() {
            var t = {
                x: (e = {
                    x: jt.a.document.body.clientWidth / 2,
                    y: jt.a.document.body.clientHeight / 2,
                    z: this.Ay.height + this.nt,
                    buildingID: this.Ay.parent.buildingID
                }).x + 1,
                y: e.y,
                z: this.Ay.height + this.nt,
                buildingID: this.Ay.parent.buildingID
            }, e = Rt.coordsScreenToMap(this.jt, e);
            t = Rt.coordsScreenToMap(this.jt, t), e = Math.sqrt((e.x - t.x) * (e.x - t.x) + (e.y - t.y) * (e.y - t.y));
            return this.jt.getZoom() < this.Nb ? 76.43745851702988 : e;
        },
        Hb: function(t) {
            this.xi && this.xi.parent && (this.xi.parent.remove(this.xi), null != (e = this.xi.material.map) && e.dispose(), 
            this.xi.geometry.dispose(), this.xi.geometry = void 0, this.xi.material.dispose(), 
            this.xi.material = void 0, this.xi = void 0);
            var e = !1;
            t || (t = this.kb, e = !0);
            var n = new mi(new Dr(t.size.x, t.size.y, 1, 1), void 0);
            n.name = "heatMap", n.position.y = this.nt, n.position.x = t.center.x - this.jt.x, 
            n.position.z = -t.center.y + this.jt.y, n.rotation.set(-Math.PI / 2, 0, 0, "XYZ"), 
            t = this.qb();
            null !== this.Db && (t.clippingPlanes = this.Db, t.clipping = !0), n.material = t, 
            this.xi = n, this.xi.mapNode = this, e && this.Bt.scene.add(this.xi);
        },
        $b: function(t) {
            for (var e = [], n = [], r = 0; r < t.length; r++) e.push({
                x: t[r].x,
                y: t[r].y
            });
            Ve.isClockwise(e[0], e[1], e[2]) || (e = e.reverse());
            for (var i = 0; i < e.length - 1; i++) {
                var o = e[i], a = e[i + 1], s = (o.x + a.x) / 2 - this.jt.x, l = -(o.y + a.y) / 2 + this.jt.y;
                a = (a = o = Ve.getAngle({
                    p1: o,
                    p2: a
                }), o = {
                    x: s,
                    y: 0,
                    z: l
                }, s = this, l = void 0, l = new mi(new Dr(200, 200, 1, 1), new Qr({
                    color: "#38382f",
                    side: 2
                })), void 0 !== a && (l.rotation.y = a), l.position.set(o.x, o.y, o.z), s.parent.xo.add(l), 
                l), o = new ut(), s = new h(), l = new h();
                s.set(0, 0, 1).applyQuaternion(a.quaternion), l.copy(a.position), o.setFromNormalAndCoplanarPoint(s, l), 
                n.push(o), a.parent.remove(a);
            }
            return n;
        }
    }), Wy = bw;
    var b_ = function() {
        function t(e, n, r, i) {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
            this.x = e, this.y = n, this.width = r, this.height = i;
        }
        var e, n;
        return e = t, (n = [ {
            key: "contains",
            value: function(t) {
                return t.x >= this.x && t.y >= this.y && t.x < this.x + this.width && t.y < this.y + this.height;
            }
        }, {
            key: "intersects",
            value: function(t) {
                return this.x < t.x + t.width && this.x + this.width > t.x && this.y < t.y + t.height && this.y + this.height > t.y;
            }
        } ]) && g_(e.prototype, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }();
    function x_(t) {
        return (x_ = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function w_(t, e) {
        var n, r, i, o, a = "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"];
        if (a) return r = !(n = !0), {
            s: function() {
                a = a.call(t);
            },
            n: function() {
                var t = a.next();
                return n = t.done, t;
            },
            e: function(t) {
                r = !0, i = t;
            },
            f: function() {
                try {
                    n || null == a.return || a.return();
                } finally {
                    if (r) throw i;
                }
            }
        };
        if (Array.isArray(t) || (a = function(t, e) {
            var n;
            if (t) return "string" == typeof t ? S_(t, e) : "Map" === (n = "Object" === (n = Object.prototype.toString.call(t).slice(8, -1)) && t.constructor ? t.constructor.name : n) || "Set" === n ? Array.from(t) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? S_(t, e) : void 0;
        }(t)) || e && t && "number" == typeof t.length) return a && (t = a), o = 0, {
            s: e = function() {},
            n: function() {
                return o >= t.length ? {
                    done: !0
                } : {
                    done: !1,
                    value: t[o++]
                };
            },
            e: function(t) {
                throw t;
            },
            f: e
        };
        throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }
    function S_(t, e) {
        (null == e || e > t.length) && (e = t.length);
        for (var n = 0, r = new Array(e); n < e; n++) r[n] = t[n];
        return r;
    }
    function __(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != x_(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != x_(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == x_(t) ? t : String(t);
            }(r.key), r);
        }
    }
    var E_ = function() {
        function t(e) {
            var n = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : 1, r = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : 8, i = 3 < arguments.length && void 0 !== arguments[3] ? arguments[3] : 0, o = this, a = t;
            if (!(o instanceof a)) throw new TypeError("Cannot call a class as a function");
            this.bound = e, this.maxPoints = n, this.maxDepth = r, this.depth = i, this.points = [], 
            this.nodes = [];
        }
        var e, n;
        return e = t, (n = [ {
            key: "insert",
            value: function(t) {
                if (this.bound.contains(t)) {
                    if (this.points.length < this.maxPoints || this.depth >= this.maxDepth) return this.points.push(t), 
                    !0;
                    0 === this.nodes.length && this.split();
                    var e, n = w_(this.nodes);
                    try {
                        for (n.s(); !(e = n.n()).done; ) if (e.value.insert(t)) return !0;
                    } catch (t) {
                        n.e(t);
                    } finally {
                        n.f();
                    }
                }
                return !1;
            }
        }, {
            key: "split",
            value: function() {
                var e, n = this.bound.x, r = this.bound.y, i = this.bound.width / 2, o = this.bound.height / 2, a = (this.nodes.push(new t(new b_(n, r, i, o), this.maxPoints, this.maxDepth, this.depth + 1)), 
                this.nodes.push(new t(new b_(n + i, r, i, o), this.maxPoints, this.maxDepth, this.depth + 1)), 
                this.nodes.push(new t(new b_(n, r + o, i, o), this.maxPoints, this.maxDepth, this.depth + 1)), 
                this.nodes.push(new t(new b_(n + i, r + o, i, o), this.maxPoints, this.maxDepth, this.depth + 1)), 
                w_(this.points));
                try {
                    for (a.s(); !(e = a.n()).done; ) {
                        var s, l = e.value, u = w_(this.nodes);
                        try {
                            for (u.s(); !(s = u.n()).done; ) s.value.insert(l);
                        } catch (e) {
                            u.e(e);
                        } finally {
                            u.f();
                        }
                    }
                } catch (e) {
                    a.e(e);
                } finally {
                    a.f();
                }
                this.points = [];
            }
        }, {
            key: "query",
            value: function(t) {
                var e = [];
                if (this.bound.intersects(t)) {
                    var n, r = w_(this.points);
                    try {
                        for (r.s(); !(n = r.n()).done; ) {
                            var i = n.value;
                            t.contains(i) && e.push(i);
                        }
                    } catch (t) {
                        r.e(t);
                    } finally {
                        r.f();
                    }
                    var o, a = w_(this.nodes);
                    try {
                        for (a.s(); !(o = a.n()).done; ) {
                            var s = o.value;
                            e = e.concat(s.query(t));
                        }
                    } catch (t) {
                        a.e(t);
                    } finally {
                        a.f();
                    }
                }
                return e;
            }
        } ]) && __(e.prototype, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }();
    function O_(t) {
        return (O_ = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function M_(t, e) {
        var n, r, i, o, a = "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"];
        if (a) return r = !(n = !0), {
            s: function() {
                a = a.call(t);
            },
            n: function() {
                var t = a.next();
                return n = t.done, t;
            },
            e: function(t) {
                r = !0, i = t;
            },
            f: function() {
                try {
                    n || null == a.return || a.return();
                } finally {
                    if (r) throw i;
                }
            }
        };
        if (Array.isArray(t) || (a = function(t, e) {
            var n;
            if (t) return "string" == typeof t ? T_(t, e) : "Map" === (n = "Object" === (n = Object.prototype.toString.call(t).slice(8, -1)) && t.constructor ? t.constructor.name : n) || "Set" === n ? Array.from(t) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? T_(t, e) : void 0;
        }(t)) || e && t && "number" == typeof t.length) return a && (t = a), o = 0, {
            s: e = function() {},
            n: function() {
                return o >= t.length ? {
                    done: !0
                } : {
                    done: !1,
                    value: t[o++]
                };
            },
            e: function(t) {
                throw t;
            },
            f: e
        };
        throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }
    function T_(t, e) {
        (null == e || e > t.length) && (e = t.length);
        for (var n = 0, r = new Array(e); n < e; n++) r[n] = t[n];
        return r;
    }
    function L_(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != O_(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != O_(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == O_(t) ? t : String(t);
            }(r.key), r);
        }
    }
    var A_ = function() {
        function t() {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
        }
        var e, n;
        return e = t, (n = [ {
            key: "scatterPoints",
            value: function(t, e) {
                for (var n = e.min.x, r = e.min.y, i = e.max.x - e.min.x, o = (e = e.max.y - e.min.y, 
                n = new b_(n, r, i, e), new E_(n)), a = 0; a < t.length; a++) o.insert(t[a]);
                return o;
            }
        }, {
            key: "clusterPoints",
            value: function(t, e, n, r) {
                var i = [];
                r && t.sort(function(t, e) {
                    return e.weight - t.weight;
                });
                for (var o = 0; o < t.length; o++) {
                    var a = t[o];
                    if (!a.clustered && 0 != (a = (a = e.query(new b_(a.x - n / 2, a.y - n / 2, n, n))).filter(function(t) {
                        return !0 !== t.clustered;
                    })).length) {
                        var s, l = M_(a);
                        try {
                            for (l.s(); !(s = l.n()).done; ) s.value.clustered = !0;
                        } catch (t) {
                            l.e(t);
                        } finally {
                            l.f();
                        }
                        i.push(a);
                    }
                }
                return i;
            }
        }, {
            key: "getClusterCenter",
            value: function(t) {
                for (var e = 1 < arguments.length && void 0 !== arguments[1] && arguments[1], n = [], r = 0; r < t.length; r++) {
                    var i, o, a = t[r].length, s = {};
                    a <= 0 || (i = t[r][0].level, o = t[r][0].buildingID, (s = e ? this.get_centroid(t[r], e) : this.get_centroid(t[r])).level = i, 
                    s.buildingID = o, s.num = a, n.push(s));
                }
                return n;
            }
        }, {
            key: "get_centroid",
            value: function(t) {
                var e = 1 < arguments.length && void 0 !== arguments[1] && arguments[1], n = {};
                if (0 != t.length) {
                    var r = 0, i = 0, o = 0;
                    if (e) {
                        for (var a = 0; a < t.length; a++) {
                            var s = t[a];
                            r += s.x * s.weight, i += s.y * s.weight, o += s.weight;
                        }
                        if (0 == o) return n;
                        r /= o, i /= o;
                    } else {
                        for (var l = 0; l < t.length; l++) {
                            var u = t[l];
                            r += u.x, i += u.y;
                        }
                        r /= t.length, i /= t.length;
                    }
                    n = {
                        x: r,
                        y: i
                    };
                }
                return n;
            }
        } ]) && L_(e.prototype, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }();
    function P_(t) {
        return (P_ = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function R_(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != P_(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != P_(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == P_(t) ? t : String(t);
            }(r.key), r);
        }
    }
    function j_(t, e, n) {
        e = I_(e);
        var r = t;
        if ((e = function() {
            try {
                var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));
            } catch (t) {}
            return function() {
                return !!t;
            }();
        }() ? Reflect.construct(e, n || [], I_(t).constructor) : e.apply(t, n)) && ("object" === P_(e) || "function" == typeof e)) return e;
        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
        return D_(r);
    }
    function I_(t) {
        return (I_ = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t);
        })(t);
    }
    function D_(t) {
        if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return t;
    }
    function k_(t, e) {
        return (k_ = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
            return t.__proto__ = e, t;
        })(t, e);
    }
    jg = function() {
        var t = n, e = Ex;
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        function n(t) {
            var e;
            if (this instanceof n) return (e = j_(this, n, [ t ])).Ae = null, e.Re = Ct.DOM_MARKER, 
            e.t1 = void 0 !== t.fontsize ? t.fontsize : 16, e.n1 = t.content, e.e1 = t.domWidth, 
            e.i1 = t.domHeight, e.o1 = t.domWidth, e.s1 = t.domHeight, e.Gy = void 0 !== t.anchor ? t.anchor : Ft.CENTER, 
            e.ht = void 0 !== t.opacity ? t.opacity : 1, e.Ho = void 0 !== t.collision && t.collision, 
            e.uy = !1, e.xi = null, e.Xf = !1, e.rr = null, e.Rv = null, e.Ay = null, e.a1 = null, 
            e.u1 = e.u1.bind(D_(e)), e.nh = null, e.lc(), e;
            throw new TypeError("Cannot call a class as a function");
        }
        return t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), Object.defineProperty(t, "prototype", {
            writable: !1
        }), e && k_(t, e), t = n, (e = [ {
            key: "isInputElement",
            get: function() {
                for (var t = [ "input", "textarea" ], e = !1, n = 0; n < t.length; n++) if (0 <= this.xi.element.childNodes[0].innerHTML.toLocaleLowerCase().indexOf(t[n])) {
                    e = !0;
                    break;
                }
                return e;
            }
        }, {
            key: "content",
            get: function() {
                return this.n1;
            },
            set: function(t) {
                this.n1 = t, "string" == typeof this.n1 ? this.xi.element.childNodes[0].innerHTML = "" + this.n1 : this.xi.element.childNodes[0].appendChild(this.n1), 
                void 0 !== this.o1 && void 0 !== this.s1 || this.iy();
            }
        }, {
            key: "visible",
            get: function() {
                return this.Yi;
            },
            set: function(t) {
                this.Yi = t, this.xi && (this.Yi ? this.xi.element.childNodes[0].style.display = "block" : this.xi.element.childNodes[0].style.display = "none");
            }
        }, {
            key: "opacity",
            get: function() {
                return this.ht;
            },
            set: function(t) {
                this.ht = t, this.xi.element.childNodes[0].style.opacity = this.ht;
            }
        }, {
            key: "level",
            get: function() {
                return this.rr;
            }
        }, {
            key: "remove",
            value: function() {
                this.stop(), this.isInputElement && (this.Ay.Bt.Bt.getInteracations().controls.enabled = !0), 
                this.nh.remove(this), this.Bt && this.Bt.remove(this), this.xi.parent.remove(this.xi), 
                this.Bt = void 0;
            }
        }, {
            key: "addTo",
            value: function(t) {
                var e, n = t.Bt.Bt, r = (null === n.xy.gt && n.xy.lc(), this.rr = t.level, this.Ay = t, 
                this.Rv = t.parent.buildingID, this.xi.position.set(this._t - n.x, t.height + this.nt, -this.St + n.y), 
                n.getBuilding("" + t.parent.buildingID));
                t.level !== r.level && (n.xy.ql(this.rr, "" + t.parent.buildingID) ? this.xi.element.childNodes[0].style.opacity = t.ht : this.xi.element.childNodes[0].style.display = "none"), 
                n.xy.add(this), this.nh = t.getOrCreateLayer(this.Re), this.nh.add(this), this.isInputElement && (e = null, 
                this.c1 = function() {
                    e = n.getInteracations().controls.enabled, n.getInteracations().controls.enabled = !1, 
                    n.getInteracations().controls.resetState();
                }, this.f1 = function() {
                    null !== e && (n.getInteracations().controls.enabled = e, n.getInteracations().controls.resetState(), 
                    e = null);
                }, this.xi.element.childNodes[0].addEventListener("mouseenter", this.c1), this.xi.element.childNodes[0].addEventListener("mouseleave", this.f1));
            }
        }, {
            key: "dispose",
            value: function() {
                this.remove(), this.xi && (this.isInputElement && (this.xi.element.childNodes[0].removeEventListener("mouseenter", this.c1), 
                this.xi.element.childNodes[0].removeEventListener("mouseleave", this.f1)), this.xi.mapNode = void 0, 
                this.xi = void 0), this.Xf = !1;
            }
        }, {
            key: "getRenderNode",
            value: function() {
                return this.xi;
            }
        } ]) && R_(t.prototype, e), Object.defineProperty(t, "prototype", {
            writable: !1
        }), n;
    }();
    var C_ = (Object.assign(jg.prototype, {
        lc: function() {
            var t = document.createElement("div"), e = document.createElement("div"), n = (e.style.position = "absolute", 
            !(e.style.pointerEvents = "all")), r = (void 0 === this.e1 || void 0 === this.i1 ? n = !0 : (e.style.width = this.e1 + "px", 
            e.style.height = this.i1 + "px"), e.style.fontSize = this.t1 + "px", e.style.opacity = this.ht, 
            n || (r = this.h1(), e.style.top = r.top, e.style.left = r.left), "string" == typeof this.n1 ? e.innerHTML = this.n1 : e.appendChild(this.n1), 
            t.appendChild(e), new Qb(t));
            return this.xi = r, (this.xi.mapNode = this).Xf = !0, this.Ae = this.xi.uuid, n && this.iy(), 
            !0;
        },
        iy: function() {
            var t = this, e = null, n = document.createElement("div"), r = this.xi.element.childNodes[0];
            n.style.position = "absolute", void 0 === this.o1 ? n.style.width = "fit-content" : n.style.width = this.o1 + "px", 
            void 0 === this.s1 ? n.style.height = "fit-content" : n.style.height = this.s1 + "px", 
            n.style.fontSize = this.t1 + "px", n.innerHTML = r.innerHTML, document.body.appendChild(n), 
            function i() {
                var o;
                n.parentNode ? (null !== e && clearTimeout(e), o = n.getBoundingClientRect(), t.e1 = o.width, 
                t.i1 = o.height, o = t.h1(), r.style.width = t.e1 + "px", r.style.height = t.i1 + "px", 
                r.style.top = o.top, r.style.left = o.left, n.parentNode.removeChild(n)) : e = setTimeout(i(), 1);
            }();
        },
        h1: function() {
            var t, e;
            switch (this.Gy) {
              case Ft.CENTER:
                t = -this.e1 / 2, e = -this.i1 / 2;
                break;

              case Ft.RIGHT_BOTTOM:
                t = -this.e1, e = -this.i1;
                break;

              case Ft.LEFT_BOTTOM:
                t = 0, e = -this.i1;
                break;

              case Ft.RIGHT_TOP:
                t = -this.e1, e = 0;
                break;

              case Ft.LEFT_TOP:
                e = t = 0;
                break;

              case Ft.RIGHT:
                t = -this.e1, e = -this.i1 / 2;
                break;

              case Ft.LEFT:
                t = 0, e = -this.i1 / 2;
                break;

              case Ft.BOTTOM:
                t = -this.e1 / 2, e = -this.i1;
                break;

              case Ft.TOP:
                t = -this.e1 / 2, e = 0;
            }
            return this.a1 = {
                left: t,
                top: e
            }, {
                left: t + "px",
                top: e + "px"
            };
        },
        sy: function() {
            var t = this.Bt.Bt;
            if (!this.a1) return null;
            var e = t.camera;
            this.xi.updateMatrixWorld(!0);
            e = new h().setFromMatrixPosition(this.xi.matrixWorld).applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix);
            var n = t.It.renderer.domElement.clientWidth, r = (t = t.It.renderer.domElement.clientHeight, 
            e.x);
            e = e.y;
            return {
                leftTop: new Mt(r - this.e1 / n, e + this.i1 / t),
                rightDown: new Mt(r + this.e1 / n, e - this.i1 / t)
            };
        },
        u1: function(t) {
            var e, n = this.Bt.Bt, r = {};
            for (e in t) r[e] = t[e];
            r.offsetX = t.clientX, r.offsetY = t.clientY, n.pr.Kt(r);
        },
        Lh: function() {
            this.xi.element.childNodes[0].style.opacity = this.Ay.ht;
        }
    }), jg);
    function N_(t) {
        return (N_ = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function F_(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != N_(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != N_(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == N_(t) ? t : String(t);
            }(r.key), r);
        }
    }
    var B_ = function() {
        function t(e) {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
            this.x = e.x, this.y = e.y;
        }
        var e, n;
        return e = t, (n = [ {
            key: "addTo",
            value: function() {}
        }, {
            key: "remove",
            value: function() {}
        }, {
            key: "dispose",
            value: function() {}
        }, {
            key: "moveTo",
            value: function(t) {
                this.x = t.x, this.y = t.y;
            }
        }, {
            key: "getRenderNode",
            value: function() {
                return {};
            }
        } ]) && F_(e.prototype, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }();
    function U_(t, e) {
        var n, r, i, o, a = "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"];
        if (a) return r = !(n = !0), {
            s: function() {
                a = a.call(t);
            },
            n: function() {
                var t = a.next();
                return n = t.done, t;
            },
            e: function(t) {
                r = !0, i = t;
            },
            f: function() {
                try {
                    n || null == a.return || a.return();
                } finally {
                    if (r) throw i;
                }
            }
        };
        if (Array.isArray(t) || (a = function(t, e) {
            var n;
            if (t) return "string" == typeof t ? z_(t, e) : "Map" === (n = "Object" === (n = Object.prototype.toString.call(t).slice(8, -1)) && t.constructor ? t.constructor.name : n) || "Set" === n ? Array.from(t) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? z_(t, e) : void 0;
        }(t)) || e && t && "number" == typeof t.length) return a && (t = a), o = 0, {
            s: e = function() {},
            n: function() {
                return o >= t.length ? {
                    done: !0
                } : {
                    done: !1,
                    value: t[o++]
                };
            },
            e: function(t) {
                throw t;
            },
            f: e
        };
        throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }
    function z_(t, e) {
        (null == e || e > t.length) && (e = t.length);
        for (var n = 0, r = new Array(e); n < e; n++) r[n] = t[n];
        return r;
    }
    function G_(t) {
        return (G_ = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function(t) {
            return _typeof2(t);
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
        })(t);
    }
    function H_(t, e) {
        for (var n = 0; n < e.length; n++) {
            var r = e[n];
            r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
            Object.defineProperty(t, function(t) {
                return t = function(t, e) {
                    if ("object" != G_(t) || !t) return t;
                    var n = t[Symbol.toPrimitive];
                    if (void 0 === n) return String(t);
                    if ("object" != G_(n = n.call(t, e))) return n;
                    throw new TypeError("@@toPrimitive must return a primitive value.");
                }(t, "string"), "symbol" == G_(t) ? t : String(t);
            }(r.key), r);
        }
    }
    It = function() {
        function t(e) {
            if (!(this instanceof t)) throw new TypeError("Cannot call a class as a function");
            this.l1 = e.render, this.jt = e.map, this.d1 = e.gridSize, void 0 === this.d1 && (this.d1 = 100), 
            this.Vf = e.points, this.Pb = e.maxZoom, void 0 === this.Pb && (this.Pb = 20), this.m1 = e.renderClusterMarker, 
            this.b1 = e.renderMarker, this.n1 = e.content, this.g1 = null, this.w1 = new A_(), 
            this._1 = null, this.Rv = e.buildingID, void 0 === this.Rv && (this.Rv = this.jt.getMapOptions().buildingID), 
            this.rr = e.level, this.xe = null, this.Cb = this.Cb.bind(this), this.Jt = this.Jt.bind(this), 
            this.S1 = [], this.E1 = [], this.zt = 0, this.M1 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAACDFJREFUeF7Fmw2MXFUVx3/nzczOdrtt3LZaSYFEDdBqMFKgIUESqhVaxS4xYIJBRVZaMKxktYvT7XZ3ust+0G3aKrVAaJvYBqM0JkitfIjWmDUW6xeU+AFVI2CBCrSpbdmZ2feOuW936n5137vvvdk9yWQ+3vmf8z//e+/7uPeOMFW2Rc9DWYLwMeCjwAeBuUDtMIVTwNvAP4DDwJ+A52iS1ytJUSoZnIc1wylWIHwJ+Dgw3zLfm0A/ym5qeZLVUrLEB7pXToBNeiMO3wKuCmQRzuEgHvezRh4P5x7OK3kBNutH8NiKsCwcBUsv5VmUJprlRUvkhO7JCtCnDQgbgTlJkJskxnGUZpplZ9w8yQnQpx0I6+MSssIrnTRLmxVmjHMyAvTpduCuOERiYB+kWb4WFR9fgE3ag0cuKoFEcA69rJG1UWLFE6BHb8ch9jiMQnwcRvkyOdltGyu6AN26EIfngSrbpBXyH8DjMlrkrzbxowvQqz8HPmGTbAp8D5ATK07RBOjVepREb0gSE0e4kZz8OGw8ewEe0xRH+CNwadgkAX7l29tMQvEOU2QxeRkME89egPu0Hond+r8G9iH04/GaT9ThfNR/XvgscHUY8uf0EeppkSfCxIgiwE+BFWGCT+DzEg7NgeS6dSUefcDFkfIIT7BO6sNg7QTo0vkoLwGzwwQf43OYNDeQk1dCYXv1Qgb5ScShdpJBLiIvx4Jy2QnQqZ8DfhQUdILj/yTFlbSIed4Pb906F5dDwAfCg4Y9hZW0yr4gnJ0AHdoJtAYFHXdcWMF6ecoaZwCduhzlSWuseU5oD35OsBNgg5pLX6ixdZaw8Axtcr11ASMBHfo0ynWWMfbRLiuDMLYCmMufmdKysa/SHvOxdYM2ADtskgLP0y6BXO0EyKu5ZC2wIPIuKS5nvfzFAjPetVMX4fJ7YIZFnKPkJZCrnQDtehx4jwWJNxD/bGwmPKNbXmtRXgbebxHkBBukLsjfToA2fWt4Jjcobvn4URw+RF4GwgIm9GvULHX83bL3vUOHmFnnSc1WgH8BFwYFHXH8BIN8mO6YU9steh5p/mzZ+16lQwK52gnQqr8FrrQQwNziLqdDnrbCjHVu1eVgfSn8HfdJIFdbAX6I8nnLYrbRJY2WmNHu6/QB4G7LGHvpkkCudgKs1VYEczNkY2+hLKTH8i6wnCGv8yhiriLzbJICbXRLIFc7AVr0UyjPWBIx7nvoEbM6ZG853YNwqzVQuI5u+VkQzk6AnNYh/uUo8Ow6LrHSQq/0BBEadTynaxG6rTBDzv8hy8Xk5UQQ1k4AE22tPoryhaDAEx5XNjODdYGXxbxW8y5dCN+IlAe+R6/cFgZrL0BOl6EEdq1Jkv8B+DZpDtAlr47yu1fPR/x5xnuAxWEKOIfPNdwv/WHw9gKYqPfqr4BrwiSYxMc8Gr/gd9che+/wsrn98Bqd5Ck2SugJm6gCfBJ4NqYAlYE7XEGvmOeGUBZNABN6je4FbgqVZeqctrHJ7p4jugBmvHr+Tg6bh6NKSvEyBa7gATlpkyS6AEO94DOoP2833ebisIQ+MSdYK4sngEn1Td3or9VPpymNbJFtUSjEF8BkvUf34/DpKARiY5QdbJU7osZJRoAmnYOHWexYGJVIRFw/dSwNuwo0UY5kBBjqBZcI/rTVzIjF2MJe1xKL2S5v2AJH+icngIn6dV0uYFaOko07vsKCOixlq/wmTvEGmzjRVKPerlR204QIt7jfkR/ELb4iApigzt26WaEpCYJjYwhs9LaJ2X+YiCXeA8qspFEfRy0XUYJKUvbpd4MXO4LCVO4cMDLyKq1xMpgxavYFJ2F/82ZwOZvkdBLBzjZUksHGxbpLL0kJBxO4XS44cFVpu5gN1IlaxYZAmWX6Tr1WHQ7EYu1xk/uQRFmVDkxbcQH8k+KdmhOwmw77fx99yH1QKrYJc0oEMLVkVuv3FW4JbJLRDs8NPixJ7TafMPWUCUCjzs4UeVHhgpAiuE6KS4vbYy6sBiSbOgGA9CpdqvCLMAKo0uw9IpvC+MbxmVIB/KFwhz6mcPNkpBWOuAtYFOchJ6woUy9Ag16mwqQTFyrc6j4ij4YtIo7flAtgyKYbdD+cc/7ghcGdZheKaJzCwmKnS4CrxfwZagJzlPrCrnCbHMMWOZnftAhgCGUbtN8bsyNUlEPFXbIkicLCxpg+Ab6iN6gwah+fwPWFXRJl8TVsveP8KitAXh3eJoNLhjOk8UhRQ6rMoqrAL4FFw98PFYssYxbV/vczmJlelxoGSVFiLiXy4kWu9BzABAVQ4YvUkKamOstMz/MLyaiSQnAw7x7if3bQlMcxz+U2XNrMtIymaUwJ+93ynysVz0cJLoon5h1KjsPAQIHTDHKGPZyJe7KML8DNmmIW86tS1KnHzHKBfrGmAEPf2MjP5muKk54yS4ocRDjqZLjWc6jVQbJnG8tIZ+IYK382ccxvRhSH00WX4/yXN9krRiBriy1AdrVe5LoswKMgUPILDWMeUkpzrKpAHod/Fx12ZBze55cXxjz/OpnBIZtSXivslCNhYGN9YgvAKp2XcbmAFFWmu8tQ+7h+y08mxtBwMOM8jUvRfw8ygzE9QUmp4PjDwqVYKvEKu6NtwYkvgCFthkEtc7IZZqtSrUIWjypD0gghRoiRYpSHxVAxBf/8MCTEUO8xv5fNtPRw4b64DkVRCiIMFEqc5BTvRO3+JkUyAoxqORWaqOY0VZSoQsiYV9Z0V9NyptjM8AkR8EUyRMpd3whVwvVbV3ALZliZX8wrQ5GZFNnCQNyTX5ny/wAFqGhfpVfGKAAAAABJRU5ErkJggg==", 
            this.lc(), this.Ye = new Vb();
        }
        var e, n;
        return e = t, (n = [ {
            key: "dispose",
            value: function() {
                for (var t, e = 0; e < this.S1.length; e++) null != (t = this.S1[e].marker) && t.remove(), 
                delete this.S1[e];
                this.S1.length = 0, this.E1.length = 0, this.O1(), this.Vf.length = 0, this._1 = void 0, 
                this.jt.off("zoom", this.Cb), this.jt.off("move", this.Cb), this.jt.off("viewChanged", this.Cb), 
                this.jt.off("resize", this.Cb);
            }
        }, {
            key: "on",
            value: function(t, e) {
                this.Ye.Gm(t, e);
            }
        } ]) && H_(e.prototype, n), Object.defineProperty(e, "prototype", {
            writable: !1
        }), t;
    }(), Object.assign(It.prototype, {
        lc: function() {
            this.ai().getLayers(Ct.EXTENT_LAYER)[0] ? (this.xe = this.ai().getLayers(Ct.EXTENT_LAYER)[0].bound, 
            this.T1(), this.j1(!0), this.jt.on("zoom", this.Cb), this.jt.on("move", this.Cb), 
            this.jt.on("viewChanged", this.Cb), this.jt.on("resize", this.Cb)) : this.jt.on("update", this.Jt);
        },
        T1: function() {
            this._1 = this.w1.scatterPoints(this.Vf, this.xe);
        },
        j1: function(t) {
            var e, n, r = this;
            if (this.jt.getZoom() < this.Pb) {
                for (var i = 0; i < this.Vf.length && this.Vf[i].clustered; i++) this.Vf[i].clustered = null;
                var o = this.L1();
                t && (this.g1 = this.A1(this.R1(this.Vf, this._1, o))), null !== this.g1 && (t = this.Wb(this.g1), 
                this.C1(t));
            } else o = this.Wb(this.Vf), this.C1(o);
            this.l1 && (e = [], (n = this.Rv) === this.jt.getMapOptions().buildingID && (n = null), 
            this.S1.forEach(function(t) {
                e.push({
                    x: t.marker.x,
                    y: t.marker.y,
                    level: r.rr,
                    buildingID: n,
                    isCluster: "multiple" === t.type,
                    points: t.points || []
                });
            }), Ht.compareArrays(this.E1, e) || (this.E1 = e, this.l1(e)));
        },
        Wb: function(t) {
            for (var e = [], n = 0; n < t.length; n++) this.Qb(t[n]) && e.push(t[n]);
            return e;
        },
        C1: function(t) {
            var e = this;
            if (0 === this.S1.length) for (var n = 0; n < t.length; n++) this.N1(t[n]); else {
                for (var r = [], i = [], o = 0; o < t.length; o++) {
                    var a, s = p(t[o]);
                    null !== s && ((a = this.S1[s]).marker.moveTo({
                        x: t[o].x,
                        y: t[o].y
                    }), a.marker.getRenderNode().point = t[o], a.points = t[o].markers, r.push(a), this.S1.splice(s, 1), 
                    i.push(o), "multiple" === a.type) && this.m1 && (s = {
                        marker: a.marker,
                        count: t[o].num
                    }, this.m1(s));
                }
                t = d(i);
                for (var l = i.length = 0; l < t.length && 0 !== this.S1.length; l++) {
                    var u, c = p(t[l], !0);
                    null !== c && ((c = this.S1.splice(c, 1)[0]).marker.moveTo({
                        x: t[l].x,
                        y: t[l].y
                    }), "multiple" === c.type && (c.marker.getRenderNode().point = t[l], c.points = t[l].markers, 
                    c.num = t[l].num, this.m1 ? (c.marker.content = "<div></div>", u = {
                        marker: c.marker,
                        count: t[l].num
                    }, this.m1(u)) : c.marker.content = this.P1(t[l].num)), i.push(l), r.push(c));
                }
                t = d(i);
                for (var h = i.length = 0; h < t.length; h++) this.N1(t[h], r);
                for (var f = 0; f < this.S1.length; f++) this.S1[f].marker.remove();
                this.S1.length = 0, this.S1 = r;
            }
            function p(t, n) {
                for (var r = null, i = 0; i < e.S1.length; i++) if (void 0 === t.num || 1 === t.num) {
                    if ("single" === e.S1[i].type) {
                        if (!e.b1) {
                            r = i;
                            break;
                        }
                        if (e.S1[i].marker.x === t.x && e.S1[i].marker.y === t.y) {
                            r = i;
                            break;
                        }
                    }
                } else if (n) {
                    if ("multiple" === e.S1[i].type) {
                        r = i;
                        break;
                    }
                } else if (e.S1[i].num === t.num) {
                    r = i;
                    break;
                }
                return r;
            }
            function d(e) {
                for (var n = [], r = 0; r < t.length; r++) !function(t, e) {
                    for (var n = !0, r = 0; r < t.length; r++) if (t[r] === e) {
                        n = !1;
                        break;
                    }
                    return n;
                }(e, r) || n.push(t[r]);
                return n;
            }
        },
        P1: function(t) {
            return void 0 === this.n1 ? '<div style="background: rgba(73,102,245,0.8);height: 50px;width: 50px;border: 2px solid #3F5BC0;border-radius: 25px;box-shadow: rgb(255, 204, 204) 0px 0px 5px;line-height: 50px;color: rgb(255, 255, 255);font-size: 14px;text-align: center;">' + t + "</div>" : this.n1.replace("${num}", "" + t);
        },
        N1: function(t, e) {
            var n, r;
            1 < t.num ? this.m1 ? (r = {
                marker: n = this.D1(t, "<div></div>"),
                count: t.num
            }, this.m1(r), (e || this.S1).push({
                points: t.markers,
                type: "multiple",
                num: t.num,
                marker: n
            })) : (r = this.D1(t, this.P1(t.num)), (e || this.S1).push({
                points: t.markers,
                type: "multiple",
                num: t.num,
                marker: r
            })) : (n = null, n = this.b1 && (r = {
                x: t.x,
                y: t.y
            }, this.b1(r), n = r.marker) || new Fx({
                url: this.M1,
                collision: !1,
                x: t.x,
                y: t.y
            }), r = this.ai(), n.addTo(r), (e || this.S1).push({
                type: "single",
                num: t.num,
                marker: n
            }));
        },
        D1: function(t, e) {
            var n = this, r = new (jt.a.environment == Ut.a.BROWSER ? C_ : B_)({
                map: this.jt,
                x: t.x,
                y: t.y,
                collision: !1,
                anchor: Ft.BOTTOM,
                content: e
            });
            e = this.ai();
            return r.addTo(e), r.getRenderNode().point = t, jt.a.environment == Ut.a.BROWSER && (r.getRenderNode().element.addEventListener("mousedown", function(t) {
                n.zt = new Date().getTime();
            }), r.getRenderNode().element.addEventListener("mouseup", function(t) {
                var e, o;
                200 < new Date().getTime() - n.zt || ((e = n.Rv) === n.jt.getMapOptions().buildingID && (e = null), 
                o = r.getRenderNode().point, n.Ye.We({
                    type: "click",
                    buildingID: e,
                    coords: {
                        x: o.x,
                        y: o.y
                    },
                    level: n.rr,
                    target: r,
                    markers: i(o.markers)
                }));
            }), r.getRenderNode().element.addEventListener("touchstart", function(t) {
                n.zt = new Date().getTime();
            }), r.getRenderNode().element.addEventListener("touchend", function(t) {
                var e, o;
                200 < new Date().getTime() - n.zt || ((e = n.Rv) === n.jt.getMapOptions().buildingID && (e = null), 
                o = r.getRenderNode().point, n.Ye.We({
                    type: "click",
                    buildingID: e,
                    coords: {
                        x: o.x,
                        y: o.y
                    },
                    level: n.rr,
                    target: r,
                    markers: i(o.markers)
                }));
            })), r;
            function i(t) {
                for (var e = [], n = 0; n < t.length; n++) e.push({
                    x: t[n].x,
                    y: t[n].y
                });
                return e;
            }
        },
        L1: function() {
            var t = {
                x: (e = {
                    x: jt.a.document.body.clientWidth / 2,
                    y: jt.a.document.body.clientHeight / 2
                }).x + this.d1,
                y: e.y
            }, e = Rt.coordsScreenToMap(this.jt, e);
            t = Rt.coordsScreenToMap(this.jt, t);
            return Math.sqrt((e.x - t.x) * (e.x - t.x) + (e.y - t.y) * (e.y - t.y));
        },
        R1: function(t, e, n) {
            for (var r = [], i = 0; i < t.length; i++) {
                var o = t[i];
                if (!o.clustered && 0 != (o = (o = e.query(new b_(o.x - n / 2, o.y - n / 2, n, n))).filter(function(t) {
                    return !0 !== t.clustered;
                })).length) {
                    var a, s = U_(o);
                    try {
                        for (s.s(); !(a = s.n()).done; ) a.value.clustered = !0;
                    } catch (t) {
                        s.e(t);
                    } finally {
                        s.f();
                    }
                    r.push(o);
                }
            }
            return r;
        },
        A1: function(t) {
            for (var e = [], n = 0; n < t.length; n++) {
                var r = 0, i = 0, o = t[n].length;
                if (!(o <= 0)) {
                    for (var a = t[n][0].level, s = t[n][0].buildingID, l = 0; l < o; l++) r += t[n][l].x, 
                    i += t[n][l].y;
                    e.push({
                        x: r / o,
                        y: i / o,
                        level: a,
                        buildingID: s,
                        num: o,
                        markers: t[n]
                    });
                }
            }
            return e;
        },
        Cb: function(t) {
            var e;
            this.Ib() && (e = !1, "zoom" === t.type && (e = !0), this.j1(e));
        },
        Ib: function() {
            for (var t = !1, e = Array.from(this.jt.getRenderManager().getRenderList().keys()), n = 0; n < e.length; n++) {
                var r = e[n].split("%A%B%C%D");
                if ("" + r[0] == "" + this.Rv && "" + r[1] == "" + this.rr) {
                    t = !0;
                    break;
                }
            }
            return t;
        },
        Qb: function(t) {
            var e = this.ai();
            e = new h(t.x - this.jt.x, e.height, this.jt.y - t.y), t = this.jt.camera, e = e.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix);
            return !(1 < Math.abs(e.x) || 1 < Math.abs(e.y) || 1 < Math.abs(e.z));
        },
        O1: function() {
            !function t(e) {
                e.points.length = 0;
                for (var n = 0; n < e.nodes.length; n++) t(e.nodes[n]), delete e.nodes[n];
                e.nodes.length = 0;
            }(this._1);
        },
        ai: function() {
            return this.jt.getBuilding(this.Rv).getFloor(this.rr);
        },
        Jt: function() {
            this.ai().getLayers(Ct.EXTENT_LAYER)[0] && (this.lc(), this.jt.off("update", this.Jt));
        }
    }), rh = It, ih = n(35), Oy = n.n(ih), jt.a.XMLHttpRequest = oy, jt.a.environment = Ut.a.WX, 
    jt.a.window = tS, jt.a.ProtoReaderStatic = _b, jt.a.WX_USER_DATA_PATH = /^(wxfile:)?\/\//i, 
    jt.a.heatmap = Oy.a, Fy = {
        FMMarkerCluster: rh,
        FMUtil: Rt,
        FMHeatMap: Wy,
        FMWXSetting: kb,
        FMMap: vx,
        FMType: Ct,
        FMImageMarker: Fx,
        FMTextMarker: jy,
        FMPolygonMarker: lb,
        FMLocationMarker: gb,
        FMExtrudeMarker: Wg,
        FMLineMarker: Yv,
        FMLineType: Nv,
        FMSegment: Cv,
        FMDynamicModel: Jg,
        VERSION: i,
        BUILD: 115,
        FMLight: rb,
        FMLightMode: Cw,
        FMBound: Xe,
        FMViewMode: kt,
        FMShadingMode: In,
        FMLabelField: Hp,
        FMMarkerAnchor: Ft,
        FMTextAlign: Kl,
        FMEdgeMode: fw,
        FMInfoMode: Nt,
        FMOverviewMode: yp,
        FMEnterTriggerMode: Wb,
        FMCalculator: ld,
        FMCoordsTransformer: oh
    }, jt.a.initCanvas = function(t, e) {
        eS(t = t.container), eS(kb.textureCanvas[0]), jt.a.document = new xS(t, kb.textureCanvas[0]), 
        jt.a.textureHelper = new dS(t, kb.textureCanvas[0], e);
    }, e.default = Fy;
} ]).default;